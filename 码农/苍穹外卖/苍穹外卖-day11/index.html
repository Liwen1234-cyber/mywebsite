<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-码农/苍穹外卖/苍穹外卖-day11" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">苍穹外卖-day11 | Coisini</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://doc.minddiy.top/码农/苍穹外卖/苍穹外卖-day11/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="苍穹外卖-day11 | Coisini"><meta data-rh="true" name="description" content="课程内容"><meta data-rh="true" property="og:description" content="课程内容"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://doc.minddiy.top/码农/苍穹外卖/苍穹外卖-day11/"><link data-rh="true" rel="alternate" href="https://doc.minddiy.top/码农/苍穹外卖/苍穹外卖-day11/" hreflang="en"><link data-rh="true" rel="alternate" href="https://doc.minddiy.top/码农/苍穹外卖/苍穹外卖-day11/" hreflang="x-default"><meta name="google-site-verification" content="1FUPX6Qo4y3ecU623ShEurhgnjhSTjK49rRMhEDlzFA">
<link rel="stylesheet" href="/katex/katex.min.css">
<script src="/js/matomo.js" async defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.79037026.css">
<script src="/assets/js/runtime~main.468f2b27.js" defer="defer"></script>
<script src="/assets/js/main.4763ab3e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Chialisp Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Chialisp Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Coisini</b></a></div><div class="navbar__items navbar__items--right"><a href="https://minddiy.top" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Main site<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>苍穹外卖-day11</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="课程内容">课程内容<a href="#课程内容" class="hash-link" aria-label="Direct link to 课程内容" title="Direct link to 课程内容">​</a></h2>
<ul>
<li>Apache ECharts</li>
<li>营业额统计</li>
<li>用户统计</li>
<li>订单统计</li>
<li>销量排名Top10</li>
</ul>
<p>功能实现：<strong>数据统计</strong></p>
<p><strong>数据统计效果图：</strong></p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230101152725417-4b2c486bbf669491b55078a323b01066.png" width="1649" height="792" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-apache-echarts">1. Apache ECharts<a href="#1-apache-echarts" class="hash-link" aria-label="Direct link to 1. Apache ECharts" title="Direct link to 1. Apache ECharts">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-介绍">1.1 介绍<a href="#11-介绍" class="hash-link" aria-label="Direct link to 1.1 介绍" title="Direct link to 1.1 介绍">​</a></h3>
<p>Apache ECharts 是一款基于 Javascript 的数据可视化图表库，提供直观，生动，可交互，可个性化定制的数据可视化图表。
官网地址：<a href="https://echarts.apache.org/zh/index.html" target="_blank" rel="noopener noreferrer">https://echarts.apache.org/zh/index.html</a></p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230101153041348-d94110a6011718385f71b8642c41454e.png" width="1130" height="540" class="img_ev3q"></p>
<p><strong>常见效果展示：</strong></p>
<p>1). 柱形图</p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230101153748714-f89a7e849517a15fa6dceb712417d75d.png" width="933" height="587" class="img_ev3q"></p>
<p>2). 饼形图</p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230101153230868-ddd93f62bf640029ee8dca1d74f70116.png" width="943" height="587" class="img_ev3q"></p>
<p>3). 折线图</p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230101153824086-2be31807e8adb3a8d0e055ccdde91b0d.png" width="968" height="614" class="img_ev3q"></p>
<p>**总结：**不管是哪种形式的图形，最本质的东西实际上是数据，它其实是对数据的一种可视化展示。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-入门案例">1.2 入门案例<a href="#12-入门案例" class="hash-link" aria-label="Direct link to 1.2 入门案例" title="Direct link to 1.2 入门案例">​</a></h3>
<p>Apache Echarts官方提供的快速入门：<a href="https://echarts.apache.org/handbook/zh/get-started/" target="_blank" rel="noopener noreferrer">https://echarts.apache.org/handbook/zh/get-started/</a></p>
<p><strong>效果展示：</strong></p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230101155524477-09c3b9890435ca66b720e7a5dc70f749.png" width="896" height="581" class="img_ev3q"></p>
<p><strong>实现步骤：</strong></p>
<p>1). 引入echarts.js 文件(当天资料已提供)</p>
<p>2). 为 ECharts 准备一个设置宽高的 DOM</p>
<p>3). 初始化echarts实例</p>
<p>4). 指定图表的配置项和数据</p>
<p>5). 使用指定的配置项和数据显示图表</p>
<p><strong>代码开发：</strong></p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token doctype punctuation" style="color:hsl(119, 34%, 47%)">&lt;!</span><span class="token doctype doctype-tag" style="color:hsl(230, 8%, 24%)">DOCTYPE</span><span class="token doctype" style="color:hsl(230, 8%, 24%)"> </span><span class="token doctype name" style="color:hsl(230, 8%, 24%)">html</span><span class="token doctype punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token tag" style="color:hsl(5, 74%, 59%)">html</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token tag" style="color:hsl(5, 74%, 59%)">head</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token tag" style="color:hsl(5, 74%, 59%)">meta</span><span class="token tag" style="color:hsl(5, 74%, 59%)"> </span><span class="token tag attr-name" style="color:hsl(35, 99%, 36%)">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(119, 34%, 47%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag attr-value" style="color:hsl(119, 34%, 47%)">utf-8</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag" style="color:hsl(5, 74%, 59%)"> </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token tag" style="color:hsl(5, 74%, 59%)">title</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain">ECharts</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;/</span><span class="token tag" style="color:hsl(5, 74%, 59%)">title</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">&lt;!-- 引入刚刚下载的 ECharts 文件 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token tag" style="color:hsl(5, 74%, 59%)">script</span><span class="token tag" style="color:hsl(5, 74%, 59%)"> </span><span class="token tag attr-name" style="color:hsl(35, 99%, 36%)">src</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(119, 34%, 47%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag attr-value" style="color:hsl(119, 34%, 47%)">echarts.js</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;/</span><span class="token tag" style="color:hsl(5, 74%, 59%)">script</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;/</span><span class="token tag" style="color:hsl(5, 74%, 59%)">head</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token tag" style="color:hsl(5, 74%, 59%)">body</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token comment" style="color:hsl(230, 4%, 64%)">&lt;!-- 为 ECharts 准备一个定义了宽高的 DOM --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token tag" style="color:hsl(5, 74%, 59%)">div</span><span class="token tag" style="color:hsl(5, 74%, 59%)"> </span><span class="token tag attr-name" style="color:hsl(35, 99%, 36%)">id</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(119, 34%, 47%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag attr-value" style="color:hsl(119, 34%, 47%)">main</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag" style="color:hsl(5, 74%, 59%)"> </span><span class="token tag special-attr attr-name" style="color:hsl(35, 99%, 36%)">style</span><span class="token tag special-attr attr-value punctuation attr-equals" style="color:hsl(119, 34%, 47%)">=</span><span class="token tag special-attr attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag special-attr attr-value value css language-css property" style="color:hsl(5, 74%, 59%)">width</span><span class="token tag special-attr attr-value value css language-css punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token tag special-attr attr-value value css language-css" style="color:hsl(119, 34%, 47%)"> </span><span class="token tag special-attr attr-value value css language-css number" style="color:hsl(35, 99%, 36%)">600</span><span class="token tag special-attr attr-value value css language-css unit" style="color:hsl(119, 34%, 47%)">px</span><span class="token tag special-attr attr-value value css language-css punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token tag special-attr attr-value value css language-css property" style="color:hsl(5, 74%, 59%)">height</span><span class="token tag special-attr attr-value value css language-css punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token tag special-attr attr-value value css language-css number" style="color:hsl(35, 99%, 36%)">400</span><span class="token tag special-attr attr-value value css language-css unit" style="color:hsl(119, 34%, 47%)">px</span><span class="token tag special-attr attr-value value css language-css punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token tag special-attr attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;/</span><span class="token tag" style="color:hsl(5, 74%, 59%)">div</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token tag" style="color:hsl(5, 74%, 59%)">script</span><span class="token tag" style="color:hsl(5, 74%, 59%)"> </span><span class="token tag attr-name" style="color:hsl(35, 99%, 36%)">type</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(119, 34%, 47%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag attr-value" style="color:hsl(119, 34%, 47%)">text/javascript</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">      </span><span class="token script language-javascript comment" style="color:hsl(230, 4%, 64%)">// 基于准备好的dom，初始化echarts实例</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">      </span><span class="token script language-javascript keyword" style="color:hsl(301, 63%, 40%)">var</span><span class="token script language-javascript"> myChart </span><span class="token script language-javascript operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token script language-javascript"> echarts</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token script language-javascript method function property-access" style="color:hsl(221, 87%, 60%)">init</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token script language-javascript dom variable" style="color:hsl(221, 87%, 60%)">document</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token script language-javascript method function property-access" style="color:hsl(221, 87%, 60%)">getElementById</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token script language-javascript string" style="color:hsl(119, 34%, 47%)">&#x27;main&#x27;</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">      </span><span class="token script language-javascript comment" style="color:hsl(230, 4%, 64%)">// 指定图表的配置项和数据</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">      </span><span class="token script language-javascript keyword" style="color:hsl(301, 63%, 40%)">var</span><span class="token script language-javascript"> option </span><span class="token script language-javascript operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">        </span><span class="token script language-javascript literal-property property" style="color:hsl(5, 74%, 59%)">title</span><span class="token script language-javascript operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">          </span><span class="token script language-javascript literal-property property" style="color:hsl(5, 74%, 59%)">text</span><span class="token script language-javascript operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:hsl(119, 34%, 47%)">&#x27;ECharts 入门示例&#x27;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">        </span><span class="token script language-javascript literal-property property" style="color:hsl(5, 74%, 59%)">tooltip</span><span class="token script language-javascript operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">        </span><span class="token script language-javascript literal-property property" style="color:hsl(5, 74%, 59%)">legend</span><span class="token script language-javascript operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">          </span><span class="token script language-javascript literal-property property" style="color:hsl(5, 74%, 59%)">data</span><span class="token script language-javascript operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token script language-javascript string" style="color:hsl(119, 34%, 47%)">&#x27;销量&#x27;</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">        </span><span class="token script language-javascript literal-property property" style="color:hsl(5, 74%, 59%)">xAxis</span><span class="token script language-javascript operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">          </span><span class="token script language-javascript literal-property property" style="color:hsl(5, 74%, 59%)">data</span><span class="token script language-javascript operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token script language-javascript string" style="color:hsl(119, 34%, 47%)">&#x27;衬衫&#x27;</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:hsl(119, 34%, 47%)">&#x27;羊毛衫&#x27;</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:hsl(119, 34%, 47%)">&#x27;雪纺衫&#x27;</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:hsl(119, 34%, 47%)">&#x27;裤子&#x27;</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:hsl(119, 34%, 47%)">&#x27;高跟鞋&#x27;</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:hsl(119, 34%, 47%)">&#x27;袜子&#x27;</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">        </span><span class="token script language-javascript literal-property property" style="color:hsl(5, 74%, 59%)">yAxis</span><span class="token script language-javascript operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">        </span><span class="token script language-javascript literal-property property" style="color:hsl(5, 74%, 59%)">series</span><span class="token script language-javascript operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">          </span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">            </span><span class="token script language-javascript literal-property property" style="color:hsl(5, 74%, 59%)">name</span><span class="token script language-javascript operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:hsl(119, 34%, 47%)">&#x27;销量&#x27;</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">            </span><span class="token script language-javascript literal-property property" style="color:hsl(5, 74%, 59%)">type</span><span class="token script language-javascript operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:hsl(119, 34%, 47%)">&#x27;bar&#x27;</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">            </span><span class="token script language-javascript literal-property property" style="color:hsl(5, 74%, 59%)">data</span><span class="token script language-javascript operator" style="color:hsl(221, 87%, 60%)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token script language-javascript number" style="color:hsl(35, 99%, 36%)">5</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript number" style="color:hsl(35, 99%, 36%)">20</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript number" style="color:hsl(35, 99%, 36%)">36</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript number" style="color:hsl(35, 99%, 36%)">10</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript number" style="color:hsl(35, 99%, 36%)">10</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript number" style="color:hsl(35, 99%, 36%)">20</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">          </span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">      </span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">      </span><span class="token script language-javascript comment" style="color:hsl(230, 4%, 64%)">// 使用刚指定的配置项和数据显示图表。</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">      myChart</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token script language-javascript method function property-access" style="color:hsl(221, 87%, 60%)">setOption</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token script language-javascript">option</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token script language-javascript punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;/</span><span class="token tag" style="color:hsl(5, 74%, 59%)">script</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;/</span><span class="token tag" style="color:hsl(5, 74%, 59%)">body</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;/</span><span class="token tag" style="color:hsl(5, 74%, 59%)">html</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>测试：</strong>(当天资料中已提供)</p>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="467" height="114" class="img_ev3q"></p>
<p>使用浏览器方式打开即可。</p>
<p>**总结：**使用Echarts，重点在于研究当前图表所需的数据格式。通常是需要后端提供符合格式要求的动态数据，然后响应给前端来展示图表。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-营业额统计">2. 营业额统计<a href="#2-营业额统计" class="hash-link" aria-label="Direct link to 2. 营业额统计" title="Direct link to 2. 营业额统计">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-需求分析和设计">2.1 需求分析和设计<a href="#21-需求分析和设计" class="hash-link" aria-label="Direct link to 2.1 需求分析和设计" title="Direct link to 2.1 需求分析和设计">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="211-产品原型">2.1.1 产品原型<a href="#211-产品原型" class="hash-link" aria-label="Direct link to 2.1.1 产品原型" title="Direct link to 2.1.1 产品原型">​</a></h4>
<p>营业额统计是基于折现图来展现，并且按照天来展示的。实际上，就是某一个时间范围之内的每一天的营业额。同时，不管光标放在哪个点上，那么它就会把具体的数值展示出来。并且还需要注意日期并不是固定写死的，是由上边时间选择器来决定。比如选择是近7天、或者是近30日，或者是本周，就会把相应这个时间段之内的每一天日期通过横坐标展示。</p>
<p><strong>原型图：</strong></p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230101160747433-c1f739f34b0dc511d6f38c8685477bfc.png" width="889" height="508" class="img_ev3q"></p>
<p><strong>业务规则：</strong></p>
<ul>
<li>营业额指订单状态为已完成的订单金额合计</li>
<li>基于可视化报表的折线图展示营业额数据，X轴为日期，Y轴为营业额</li>
<li>根据时间选择区间，展示每天的营业额数据</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="212-接口设计">2.1.2 接口设计<a href="#212-接口设计" class="hash-link" aria-label="Direct link to 2.1.2 接口设计" title="Direct link to 2.1.2 接口设计">​</a></h4>
<p>通过上述原型图，设计出对应的接口。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230101160801758-c105a7669f94ef95586959c6036ec1fb.png" width="532" height="619" class="img_ev3q"></p>
<p>**注意：**具体返回数据一般由前端来决定，前端展示图表，具体折现图对应数据是什么格式，是有固定的要求的。
所以说，后端需要去适应前端，它需要什么格式的数据，我们就给它返回什么格式的数据。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-代码开发">2.2 代码开发<a href="#22-代码开发" class="hash-link" aria-label="Direct link to 2.2 代码开发" title="Direct link to 2.2 代码开发">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="221-vo设计">2.2.1 VO设计<a href="#221-vo设计" class="hash-link" aria-label="Direct link to 2.2.1 VO设计" title="Direct link to 2.2.1 VO设计">​</a></h4>
<p><strong>根据接口定义设计对应的VO：</strong></p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230101164058056-5d4fdf3379cc8648f24b83a08d9ad27b.png" width="760" height="364" class="img_ev3q"></p>
<p>在sky-pojo模块，TurnoverReportVO.java已定义</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">package com.sky.vo;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.AllArgsConstructor;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.Builder;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.Data;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.NoArgsConstructor;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import java.io.Serializable;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@Builder</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@NoArgsConstructor</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@AllArgsConstructor</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">public class TurnoverReportVO implements Serializable {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //日期，以逗号分隔，例如：2022-10-01,2022-10-02,2022-10-03</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    private String dateList;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //营业额，以逗号分隔，例如：406.0,1520.0,75.0</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    private String turnoverList;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="222-controller层">2.2.2 Controller层<a href="#222-controller层" class="hash-link" aria-label="Direct link to 2.2.2 Controller层" title="Direct link to 2.2.2 Controller层">​</a></h4>
<p><strong>根据接口定义创建ReportController：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">package com.sky.controller.admin;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import com.sky.result.Result;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import com.sky.service.ReportService;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import com.sky.vo.TurnoverReportVO;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import io.swagger.annotations.Api;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import io.swagger.annotations.ApiOperation;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.extern.slf4j.Slf4j;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import org.springframework.beans.factory.annotation.Autowired;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import org.springframework.format.annotation.DateTimeFormat;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import org.springframework.web.bind.annotation.GetMapping;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import org.springframework.web.bind.annotation.RequestMapping;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import org.springframework.web.bind.annotation.RestController;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import java.time.LocalDate;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">/**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"> * 报表</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"> */</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@RequestMapping(&quot;/admin/report&quot;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@Api(tags = &quot;统计报表相关接口&quot;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">public class ReportController {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    private ReportService reportService;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * 营业额数据统计</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     *</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param begin</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param end</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     */</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    @GetMapping(&quot;/turnoverStatistics&quot;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    @ApiOperation(&quot;营业额数据统计&quot;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    public Result&lt;TurnoverReportVO&gt; turnoverStatistics(</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                    LocalDate begin,</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                    LocalDate end) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        return Result.success(reportService.getTurnover(begin, end));</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="223-service层接口">2.2.3 Service层接口<a href="#223-service层接口" class="hash-link" aria-label="Direct link to 2.2.3 Service层接口" title="Direct link to 2.2.3 Service层接口">​</a></h4>
<p><strong>创建ReportService接口，声明getTurnover方法：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">package com.sky.service;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import com.sky.vo.TurnoverReportVO;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import java.time.LocalDate;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">public interface ReportService {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * 根据时间区间统计营业额</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param beginTime</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param endTime</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     */</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    TurnoverReportVO getTurnover(LocalDate beginTime, LocalDate endTime);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="224-service层实现类">2.2.4 Service层实现类<a href="#224-service层实现类" class="hash-link" aria-label="Direct link to 2.2.4 Service层实现类" title="Direct link to 2.2.4 Service层实现类">​</a></h4>
<p><strong>创建ReportServiceImpl实现类，实现getTurnover方法:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">package com.sky.service.impl;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import com.sky.entity.Orders;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import com.sky.mapper.OrderMapper;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import com.sky.service.ReportService;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import com.sky.vo.TurnoverReportVO;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.extern.slf4j.Slf4j;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import org.apache.commons.lang.StringUtils;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import org.springframework.beans.factory.annotation.Autowired;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import org.springframework.stereotype.Service;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import java.time.LocalDate;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import java.time.LocalDateTime;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import java.time.LocalTime;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import java.util.ArrayList;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import java.util.HashMap;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import java.util.Map;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@Service</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">public class ReportServiceImpl implements ReportService {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    private OrderMapper orderMapper;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * 根据时间区间统计营业额</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param begin</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param end</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     */</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    public TurnoverReportVO getTurnover(LocalDate begin, LocalDate end) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        List&lt;LocalDate&gt; dateList = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        dateList.add(begin);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        while (!begin.equals(end)){</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            begin = begin.plusDays(1);//日期计算，获得指定日期后1天的日期</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            dateList.add(begin);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">       List&lt;Double&gt; turnoverList = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        for (LocalDate date : dateList) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            LocalDateTime beginTime = LocalDateTime.of(date, LocalTime.MIN);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            LocalDateTime endTime = LocalDateTime.of(date, LocalTime.MAX);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            Map map = new HashMap();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        	map.put(&quot;status&quot;, Orders.COMPLETED);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        	map.put(&quot;begin&quot;,beginTime);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        	map.put(&quot;end&quot;, endTime);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            Double turnover = orderMapper.sumByMap(map); </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            turnover = turnover == null ? 0.0 : turnover;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            turnoverList.add(turnover);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        //数据封装</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        return TurnoverReportVO.builder()</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                .dateList(StringUtils.join(dateList,&quot;,&quot;))</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                .turnoverList(StringUtils.join(turnoverList,&quot;,&quot;))</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="225-mapper层">2.2.5 Mapper层<a href="#225-mapper层" class="hash-link" aria-label="Direct link to 2.2.5 Mapper层" title="Direct link to 2.2.5 Mapper层">​</a></h4>
<p><strong>在OrderMapper接口声明sumByMap方法：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">	/**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * 根据动态条件统计营业额</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param map</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     */</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    Double sumByMap(Map map);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>在OrderMapper.xml文件中编写动态SQL：</strong></p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token tag" style="color:hsl(5, 74%, 59%)">select</span><span class="token tag" style="color:hsl(5, 74%, 59%)"> </span><span class="token tag attr-name" style="color:hsl(35, 99%, 36%)">id</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(119, 34%, 47%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag attr-value" style="color:hsl(119, 34%, 47%)">sumByMap</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag" style="color:hsl(5, 74%, 59%)"> </span><span class="token tag attr-name" style="color:hsl(35, 99%, 36%)">resultType</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(119, 34%, 47%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag attr-value" style="color:hsl(119, 34%, 47%)">java.lang.Double</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        select sum(amount) from orders</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token tag" style="color:hsl(5, 74%, 59%)">where</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token tag" style="color:hsl(5, 74%, 59%)">if</span><span class="token tag" style="color:hsl(5, 74%, 59%)"> </span><span class="token tag attr-name" style="color:hsl(35, 99%, 36%)">test</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(119, 34%, 47%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag attr-value" style="color:hsl(119, 34%, 47%)">status != null</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                and status = #{status}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;/</span><span class="token tag" style="color:hsl(5, 74%, 59%)">if</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token tag" style="color:hsl(5, 74%, 59%)">if</span><span class="token tag" style="color:hsl(5, 74%, 59%)"> </span><span class="token tag attr-name" style="color:hsl(35, 99%, 36%)">test</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(119, 34%, 47%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag attr-value" style="color:hsl(119, 34%, 47%)">begin != null</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                and order_time </span><span class="token entity named-entity" style="color:hsl(230, 8%, 24%)">&amp;gt;</span><span class="token plain">= #{begin}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;/</span><span class="token tag" style="color:hsl(5, 74%, 59%)">if</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token tag" style="color:hsl(5, 74%, 59%)">if</span><span class="token tag" style="color:hsl(5, 74%, 59%)"> </span><span class="token tag attr-name" style="color:hsl(35, 99%, 36%)">test</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(119, 34%, 47%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag attr-value" style="color:hsl(119, 34%, 47%)">end != null</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                and order_time </span><span class="token entity named-entity" style="color:hsl(230, 8%, 24%)">&amp;lt;</span><span class="token plain">= #{end}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;/</span><span class="token tag" style="color:hsl(5, 74%, 59%)">if</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;/</span><span class="token tag" style="color:hsl(5, 74%, 59%)">where</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;/</span><span class="token tag" style="color:hsl(5, 74%, 59%)">select</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-功能测试">2.3 功能测试<a href="#23-功能测试" class="hash-link" aria-label="Direct link to 2.3 功能测试" title="Direct link to 2.3 功能测试">​</a></h3>
<p>可以通过如下方式进行测试：</p>
<ul>
<li>接口文档测试</li>
<li>前后端联调测试</li>
</ul>
<p>启动服务器，启动nginx，直接采用前后端联调测试。</p>
<p>进入数据统计模块</p>
<p><strong>1). 查看近7日营业额统计</strong></p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230101172807757-ca6414052d9c12c67579e00f79b752a4.png" width="1915" height="675" class="img_ev3q"></p>
<p>进入开发者模式，查看返回数据</p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230101173031357-c0f72f7ba0423440d5b81abc22e59713.png" width="1887" height="229" class="img_ev3q"></p>
<p><strong>2). 查看近30日营业额统计</strong></p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230101173201667-a27227700855dc276027387ae4fba023.png" width="1918" height="776" class="img_ev3q"></p>
<p>进入开发者模式，查看返回数据</p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230101173304127-0f09c47b6acb146b00502778e30faa44.png" width="1909" height="232" class="img_ev3q"></p>
<p>也可通过断点方式启动，查看每步执行情况。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="24-代码提交">2.4 代码提交<a href="#24-代码提交" class="hash-link" aria-label="Direct link to 2.4 代码提交" title="Direct link to 2.4 代码提交">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107183427167-27318161d8065320747cb7202f377500.png" width="1083" height="1003" class="img_ev3q"></p>
<p>后续步骤和其它功能代码提交一致，不再赘述。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-用户统计">3. 用户统计<a href="#3-用户统计" class="hash-link" aria-label="Direct link to 3. 用户统计" title="Direct link to 3. 用户统计">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-需求分析和设计">3.1 需求分析和设计<a href="#31-需求分析和设计" class="hash-link" aria-label="Direct link to 3.1 需求分析和设计" title="Direct link to 3.1 需求分析和设计">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="311-产品原型">3.1.1 产品原型<a href="#311-产品原型" class="hash-link" aria-label="Direct link to 3.1.1 产品原型" title="Direct link to 3.1.1 产品原型">​</a></h4>
<p>所谓用户统计，实际上统计的是用户的数量。通过折线图来展示，上面这根蓝色线代表的是用户总量，下边这根绿色线代表的是新增用户数量，是具体到每一天。所以说用户统计主要统计<strong>两个数据</strong>，一个是<strong>总的用户数量</strong>，另外一个是<strong>新增用户数量</strong>。</p>
<p><strong>原型图：</strong></p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230102213727736-67306b17254576d73ea74a448e584a1e.png" width="1020" height="533" class="img_ev3q"></p>
<p><strong>业务规则：</strong></p>
<ul>
<li>基于可视化报表的折线图展示用户数据，X轴为日期，Y轴为用户数</li>
<li>根据时间选择区间，展示每天的用户总量和新增用户量数据</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="312-接口设计">3.1.2 接口设计<a href="#312-接口设计" class="hash-link" aria-label="Direct link to 3.1.2 接口设计" title="Direct link to 3.1.2 接口设计">​</a></h4>
<p>根据上述原型图设计接口。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230102213809414-b79928cbf0d0e8a2ec053fbf0c020124.png" width="477" height="549" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-代码开发">3.2 代码开发<a href="#32-代码开发" class="hash-link" aria-label="Direct link to 3.2 代码开发" title="Direct link to 3.2 代码开发">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="321-vo设计">3.2.1 VO设计<a href="#321-vo设计" class="hash-link" aria-label="Direct link to 3.2.1 VO设计" title="Direct link to 3.2.1 VO设计">​</a></h4>
<p><strong>根据用户统计接口的返回结果设计VO：</strong></p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230102211004237-22906e1d07681a13e3e7fd198f95a7a0.png" width="769" height="443" class="img_ev3q"></p>
<p>在sky-pojo模块，UserReportVO.java已定义</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">package com.sky.vo;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.AllArgsConstructor;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.Builder;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.Data;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.NoArgsConstructor;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import java.io.Serializable;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@Builder</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@NoArgsConstructor</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@AllArgsConstructor</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">public class UserReportVO implements Serializable {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //日期，以逗号分隔，例如：2022-10-01,2022-10-02,2022-10-03</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    private String dateList;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //用户总量，以逗号分隔，例如：200,210,220</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    private String totalUserList;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //新增用户，以 逗号分隔，例如：20,21,10</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    private String newUserList;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="322-controller层">3.2.2 Controller层<a href="#322-controller层" class="hash-link" aria-label="Direct link to 3.2.2 Controller层" title="Direct link to 3.2.2 Controller层">​</a></h4>
<p><strong>根据接口定义，在ReportController中创建userStatistics方法：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">/**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * 用户数据统计</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param begin</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param end</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     */</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    @GetMapping(&quot;/userStatistics&quot;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    @ApiOperation(&quot;用户数据统计&quot;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    public Result&lt;UserReportVO&gt; userStatistics(</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;) LocalDate begin,</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;) LocalDate end){</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        return Result.success(reportService.getUserStatistics(begin,end));            </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="323-service层接口">3.2.3 Service层接口<a href="#323-service层接口" class="hash-link" aria-label="Direct link to 3.2.3 Service层接口" title="Direct link to 3.2.3 Service层接口">​</a></h4>
<p><strong>在ReportService接口中声明getUserStatistics方法：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">	/**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * 根据时间区间统计用户数量</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param begin</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param end</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     */</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    UserReportVO getUserStatistics(LocalDate begin, LocalDate end);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="324-service层实现类">3.2.4 Service层实现类<a href="#324-service层实现类" class="hash-link" aria-label="Direct link to 3.2.4 Service层实现类" title="Direct link to 3.2.4 Service层实现类">​</a></h4>
<p><strong>在ReportServiceImpl实现类中实现getUserStatistics方法：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">	@Override</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    public UserReportVO getUserStatistics(LocalDate begin, LocalDate end) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        List&lt;LocalDate&gt; dateList = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        dateList.add(begin);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        while (!begin.equals(end)){</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            begin = begin.plusDays(1);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            dateList.add(begin);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        List&lt;Integer&gt; newUserList = new ArrayList&lt;&gt;(); //新增用户数</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        List&lt;Integer&gt; totalUserList = new ArrayList&lt;&gt;(); //总用户数</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        for (LocalDate date : dateList) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            LocalDateTime beginTime = LocalDateTime.of(date, LocalTime.MIN);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            LocalDateTime endTime = LocalDateTime.of(date, LocalTime.MAX);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            //新增用户数量 select count(id) from user where create_time &gt; ? and create_time &lt; ?</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            Integer newUser = getUserCount(beginTime, endTime);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            //总用户数量 select count(id) from user where  create_time &lt; ?</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            Integer totalUser = getUserCount(null, endTime);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            newUserList.add(newUser);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            totalUserList.add(totalUser);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        return UserReportVO.builder()</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                .dateList(StringUtils.join(dateList,&quot;,&quot;))</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                .newUserList(StringUtils.join(newUserList,&quot;,&quot;))</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                .totalUserList(StringUtils.join(totalUserList,&quot;,&quot;))</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>  在ReportServiceImpl实现类中创建私有方法getUserCount：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">	/**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * 根据时间区间统计用户数量</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param beginTime</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param endTime</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     */</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    private Integer getUserCount(LocalDateTime beginTime, LocalDateTime endTime) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        Map map = new HashMap();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        map.put(&quot;begin&quot;,beginTime);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        map.put(&quot;end&quot;, endTime);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        return userMapper.countByMap(map);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="325-mapper层">3.2.5 Mapper层<a href="#325-mapper层" class="hash-link" aria-label="Direct link to 3.2.5 Mapper层" title="Direct link to 3.2.5 Mapper层">​</a></h4>
<p><strong>在UserMapper接口中声明countByMap方法：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">	/**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * 根据动态条件统计用户数量</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param map</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     */</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    Integer countByMap(Map map);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>在UserMapper.xml文件中编写动态SQL：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">&lt;select id=&quot;countByMap&quot; resultType=&quot;java.lang.Integer&quot;&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        select count(id) from user</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        &lt;where&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            &lt;if test=&quot;begin != null&quot;&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                and create_time &amp;gt;= #{begin}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            &lt;/if&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            &lt;if test=&quot;end != null&quot;&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                and create_time &amp;lt;= #{end}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            &lt;/if&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        &lt;/where&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">&lt;/select&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-功能测试">3.3 功能测试<a href="#33-功能测试" class="hash-link" aria-label="Direct link to 3.3 功能测试" title="Direct link to 3.3 功能测试">​</a></h3>
<p>可以通过如下方式进行测试：</p>
<ul>
<li>接口文档测试</li>
<li>前后端联调测试</li>
</ul>
<p>进入数据统计模块</p>
<p><strong>1). 查看近7日用户统计</strong></p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107191339668-4d5bd2c4d4ee64dde9dd943f8e568021.png" width="1903" height="768" class="img_ev3q"></p>
<p>进入开发者模式，查看返回数据</p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107191532175-8e0493034fc972d5bca997b8c7d9d856.png" width="1596" height="277" class="img_ev3q"></p>
<p><strong>2). 查看近30日用户统计</strong></p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107191613369-52cbfabdb09d90318b410d6c4aa07a7e.png" width="1895" height="766" class="img_ev3q"></p>
<p>进入开发者模式，查看返回数据</p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107191707568-a2da558148f7a6ca7b4ad5a597794d21.png" width="1908" height="265" class="img_ev3q"></p>
<p>也可通过断点方式启动，查看每步执行情况。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-代码提交">3.4 代码提交<a href="#34-代码提交" class="hash-link" aria-label="Direct link to 3.4 代码提交" title="Direct link to 3.4 代码提交">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107191949566-52f3b8599b58472b9ae75e7ec5111990.png" width="1084" height="1001" class="img_ev3q"></p>
<p>后续步骤和其它功能代码提交一致，不再赘述。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-订单统计">4. 订单统计<a href="#4-订单统计" class="hash-link" aria-label="Direct link to 4. 订单统计" title="Direct link to 4. 订单统计">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-需求分析和设计">4.1 需求分析和设计<a href="#41-需求分析和设计" class="hash-link" aria-label="Direct link to 4.1 需求分析和设计" title="Direct link to 4.1 需求分析和设计">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="411-产品原型">4.1.1 产品原型<a href="#411-产品原型" class="hash-link" aria-label="Direct link to 4.1.1 产品原型" title="Direct link to 4.1.1 产品原型">​</a></h4>
<p>订单统计通过一个折现图来展现，折线图上有两根线，这根蓝色的线代表的是订单总数，而下边这根绿色的线代表的是有效订单数，指的就是状态是已完成的订单就属于有效订单，分别反映的是每一天的数据。上面还有3个数字，分别是订单总数、有效订单、订单完成率，它指的是整个时间区间之内总的数据。</p>
<p><strong>原型图：</strong></p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107192859270-12173925abc2eb522c0a4457b1a98fdc.png" width="803" height="472" class="img_ev3q"></p>
<p><strong>业务规则：</strong></p>
<ul>
<li>有效订单指状态为 “已完成” 的订单</li>
<li>基于可视化报表的折线图展示订单数据，X轴为日期，Y轴为订单数量</li>
<li>根据时间选择区间，展示每天的订单总数和有效订单数</li>
<li>展示所选时间区间内的有效订单数、总订单数、订单完成率，订单完成率 = 有效订单数 / 总订单数 * 100%</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="412-接口设计">4.1.2 接口设计<a href="#412-接口设计" class="hash-link" aria-label="Direct link to 4.1.2 接口设计" title="Direct link to 4.1.2 接口设计">​</a></h4>
<p>根据上述原型图设计接口。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107192942872-df57b90928feb5d2be644bd133783b90.png" width="475" height="561" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-代码开发">4.2 代码开发<a href="#42-代码开发" class="hash-link" aria-label="Direct link to 4.2 代码开发" title="Direct link to 4.2 代码开发">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="421-vo设计">4.2.1 VO设计<a href="#421-vo设计" class="hash-link" aria-label="Direct link to 4.2.1 VO设计" title="Direct link to 4.2.1 VO设计">​</a></h4>
<p><strong>根据订单统计接口的返回结果设计VO：</strong></p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107195325915-304fc5c6a75aa8bca186c5c27528c6c0.png" width="773" height="561" class="img_ev3q"></p>
<p>在sky-pojo模块，OrderReportVO.java已定义</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">package com.sky.vo;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.AllArgsConstructor;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.Builder;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.Data;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.NoArgsConstructor;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import java.io.Serializable;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@Builder</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@NoArgsConstructor</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@AllArgsConstructor</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">public class OrderReportVO implements Serializable {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //日期，以逗号分隔，例如：2022-10-01,2022-10-02,2022-10-03</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    private String dateList;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //每日订单数，以逗号分隔，例如：260,210,215</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    private String orderCountList;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //每日有效订单数，以逗号分隔，例如：20,21,10</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    private String validOrderCountList;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //订单总数</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    private Integer totalOrderCount;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //有效订单数</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    private Integer validOrderCount;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //订单完成率</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    private Double orderCompletionRate;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="422-controller层">4.2.2 Controller层<a href="#422-controller层" class="hash-link" aria-label="Direct link to 4.2.2 Controller层" title="Direct link to 4.2.2 Controller层">​</a></h4>
<p><strong>在ReportController中根据订单统计接口创建orderStatistics方法：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">/**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * 订单数据统计</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param begin</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param end</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     */</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    @GetMapping(&quot;/ordersStatistics&quot;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    @ApiOperation(&quot;用户数据统计&quot;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    public Result&lt;OrderReportVO&gt; orderStatistics(</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                    LocalDate begin,</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                    LocalDate end){</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        return Result.success(reportService.getOrderStatistics(begin,end));</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="423-service层接口">4.2.3 Service层接口<a href="#423-service层接口" class="hash-link" aria-label="Direct link to 4.2.3 Service层接口" title="Direct link to 4.2.3 Service层接口">​</a></h4>
<p><strong>在ReportService接口中声明getOrderStatistics方法：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">/**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* 根据时间区间统计订单数量</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @param begin </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @param end</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @return </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">*/</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">OrderReportVO getOrderStatistics(LocalDate begin, LocalDate end);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="424-service层实现类">4.2.4 Service层实现类<a href="#424-service层实现类" class="hash-link" aria-label="Direct link to 4.2.4 Service层实现类" title="Direct link to 4.2.4 Service层实现类">​</a></h4>
<p><strong>在ReportServiceImpl实现类中实现getOrderStatistics方法：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">/**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* 根据时间区间统计订单数量</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @param begin </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @param end</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @return </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">*/</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">public OrderReportVO getOrderStatistics(LocalDate begin, LocalDate end){</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">	List&lt;LocalDate&gt; dateList = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    dateList.add(begin);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    while (!begin.equals(end)){</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">          begin = begin.plusDays(1);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">          dateList.add(begin);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //每天订单总数集合</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     List&lt;Integer&gt; orderCountList = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //每天有效订单数集合</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    List&lt;Integer&gt; validOrderCountList = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    for (LocalDate date : dateList) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">         LocalDateTime beginTime = LocalDateTime.of(date, LocalTime.MIN);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">         LocalDateTime endTime = LocalDateTime.of(date, LocalTime.MAX);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">   //查询每天的总订单数 select count(id) from orders where order_time &gt; ? and order_time &lt; ?</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">         Integer orderCount = getOrderCount(beginTime, endTime, null);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  //查询每天的有效订单数 select count(id) from orders where order_time &gt; ? and order_time &lt; ? and status = ?</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">         Integer validOrderCount = getOrderCount(beginTime, endTime, Orders.COMPLETED);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">         orderCountList.add(orderCount);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">         validOrderCountList.add(validOrderCount);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //时间区间内的总订单数</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    Integer totalOrderCount = orderCountList.stream().reduce(Integer::sum).get();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //时间区间内的总有效订单数</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    Integer validOrderCount = validOrderCountList.stream().reduce(Integer::sum).get();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //订单完成率</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    Double orderCompletionRate = 0.0;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    if(totalOrderCount != 0){</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">         orderCompletionRate = validOrderCount.doubleValue() / totalOrderCount;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     }</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    return OrderReportVO.builder()</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                .dateList(StringUtils.join(dateList, &quot;,&quot;))</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                .orderCountList(StringUtils.join(orderCountList, &quot;,&quot;))</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                .validOrderCountList(StringUtils.join(validOrderCountList, &quot;,&quot;))</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                .totalOrderCount(totalOrderCount)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                .validOrderCount(validOrderCount)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                .orderCompletionRate(orderCompletionRate)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>在ReportServiceImpl实现类中提供私有方法getOrderCount：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">/**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* 根据时间区间统计指定状态的订单数量</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @param beginTime</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @param endTime</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @param status</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @return</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">*/</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">private Integer getOrderCount(LocalDateTime beginTime, LocalDateTime endTime, Integer status) {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">	Map map = new HashMap();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">	map.put(&quot;status&quot;, status);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">	map.put(&quot;begin&quot;,beginTime);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">	map.put(&quot;end&quot;, endTime);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">	return orderMapper.countByMap(map);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="425-mapper层">4.2.5 Mapper层<a href="#425-mapper层" class="hash-link" aria-label="Direct link to 4.2.5 Mapper层" title="Direct link to 4.2.5 Mapper层">​</a></h4>
<p><strong>在OrderMapper接口中声明countByMap方法：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">/**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">*根据动态条件统计订单数量</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @param map</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">*/</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Integer countByMap(Map map);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>在OrderMapper.xml文件中编写动态SQL：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">&lt;select id=&quot;countByMap&quot; resultType=&quot;java.lang.Integer&quot;&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        select count(id) from orders</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        &lt;where&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            &lt;if test=&quot;status != null&quot;&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                and status = #{status}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            &lt;/if&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            &lt;if test=&quot;begin != null&quot;&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                and order_time &amp;gt;= #{begin}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            &lt;/if&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            &lt;if test=&quot;end != null&quot;&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                and order_time &amp;lt;= #{end}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            &lt;/if&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        &lt;/where&gt;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">&lt;/select&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="43-功能测试">4.3 功能测试<a href="#43-功能测试" class="hash-link" aria-label="Direct link to 4.3 功能测试" title="Direct link to 4.3 功能测试">​</a></h3>
<p>可以通过如下方式进行测试：</p>
<ul>
<li>接口文档测试</li>
<li>前后端联调</li>
</ul>
<p>重启服务，直接采用前后端联调测试。</p>
<p>进入数据统计模块</p>
<p><strong>1). 查看近7日订单统计</strong></p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107202854533-ff63366a04c158076e1cca4ccae1e21c.png" width="1899" height="820" class="img_ev3q"></p>
<p>进入开发者模式，查看返回数据</p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107202953128-85868c6406219b0955df36f2936463ad.png" width="1890" height="279" class="img_ev3q"></p>
<p><strong>2). 查看近30日订单统计</strong></p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107203025165-d77458b4b5e03b4da056802ac4b61936.png" width="1893" height="841" class="img_ev3q"></p>
<p>进入开发者模式，查看返回数据</p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107203127308-730daf964cb968d446abb8bce04e19e8.png" width="1895" height="246" class="img_ev3q"></p>
<p>也可通过断点方式启动，查看每步执行情况。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="44-代码提交">4.4 代码提交<a href="#44-代码提交" class="hash-link" aria-label="Direct link to 4.4 代码提交" title="Direct link to 4.4 代码提交">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107203344774-d41fa7566fc0f1feab134a62f7eef234.png" width="1085" height="1010" class="img_ev3q"></p>
<p>后续步骤和其它功能代码提交一致，不再赘述。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-销量排名top10">5. 销量排名Top10<a href="#5-销量排名top10" class="hash-link" aria-label="Direct link to 5. 销量排名Top10" title="Direct link to 5. 销量排名Top10">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-需求分析和设计">5.1 需求分析和设计<a href="#51-需求分析和设计" class="hash-link" aria-label="Direct link to 5.1 需求分析和设计" title="Direct link to 5.1 需求分析和设计">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="511-产品原型">5.1.1 产品原型<a href="#511-产品原型" class="hash-link" aria-label="Direct link to 5.1.1 产品原型" title="Direct link to 5.1.1 产品原型">​</a></h4>
<p>所谓销量排名，销量指的是商品销售的数量。项目当中的商品主要包含两类：一个是<strong>套餐</strong>，一个是<strong>菜品</strong>，所以销量排名其实指的就是菜品和套餐销售的数量排名。通过柱形图来展示销量排名，这些销量是按照降序来排列，并且只需要统计销量排名前十的商品。</p>
<p><strong>原型图：</strong></p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107203622747-5f9cffb46f21d31745b47b7d80e9f6d8.png" width="749" height="466" class="img_ev3q"></p>
<p><strong>业务规则：</strong></p>
<ul>
<li>根据时间选择区间，展示销量前10的商品（包括菜品和套餐）</li>
<li>基于可视化报表的柱状图降序展示商品销量</li>
<li>此处的销量为商品销售的份数</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="512-接口设计">5.1.2 接口设计<a href="#512-接口设计" class="hash-link" aria-label="Direct link to 5.1.2 接口设计" title="Direct link to 5.1.2 接口设计">​</a></h4>
<p>根据上述原型图设计接口。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107203720606-2a70c6e38476d52da9ed896abf8a9f0c.png" width="471" height="555" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-代码开发">5.2 代码开发<a href="#52-代码开发" class="hash-link" aria-label="Direct link to 5.2 代码开发" title="Direct link to 5.2 代码开发">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="521-vo设计">5.2.1 VO设计<a href="#521-vo设计" class="hash-link" aria-label="Direct link to 5.2.1 VO设计" title="Direct link to 5.2.1 VO设计">​</a></h4>
<p><strong>根据销量排名接口的返回结果设计VO：</strong></p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107204028895-dcf43d0bc4630a610dac424210eaeb1f.png" width="790" height="418" class="img_ev3q"></p>
<p>在sky-pojo模块，SalesTop10ReportVO.java已定义</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">package com.sky.vo;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.AllArgsConstructor;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.Builder;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.Data;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import lombok.NoArgsConstructor;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">import java.io.Serializable;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@Builder</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@NoArgsConstructor</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@AllArgsConstructor</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">public class SalesTop10ReportVO implements Serializable {</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //商品名称列表，以逗号分隔，例如：鱼香肉丝,宫保鸡丁,水煮鱼</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    private String nameList;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    //销量列表，以逗号分隔，例如：260,215,200</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    private String numberList;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="522-controller层">5.2.2 Controller层<a href="#522-controller层" class="hash-link" aria-label="Direct link to 5.2.2 Controller层" title="Direct link to 5.2.2 Controller层">​</a></h4>
<p><strong>在ReportController中根据销量排名接口创建top10方法：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">/**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* 销量排名统计</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @param begin</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @param end</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @return</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">*/</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@GetMapping(&quot;/top10&quot;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">@ApiOperation(&quot;销量排名统计&quot;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">public Result&lt;SalesTop10ReportVO&gt; top10(</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;) LocalDate begin,</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;) LocalDate end){</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">	return Result.success(reportService.getSalesTop10(begin,end));</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="523-service层接口">5.2.3 Service层接口<a href="#523-service层接口" class="hash-link" aria-label="Direct link to 5.2.3 Service层接口" title="Direct link to 5.2.3 Service层接口">​</a></h4>
<p><strong>在ReportService接口中声明getSalesTop10方法：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">/**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* 查询指定时间区间内的销量排名top10 </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @param begin</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @param end</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @return</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">*/</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">SalesTop10ReportVO getSalesTop10(LocalDate begin, LocalDate end);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="524-service层实现类">5.2.4 Service层实现类<a href="#524-service层实现类" class="hash-link" aria-label="Direct link to 5.2.4 Service层实现类" title="Direct link to 5.2.4 Service层实现类">​</a></h4>
<p><strong>在ReportServiceImpl实现类中实现getSalesTop10方法：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">/**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * 查询指定时间区间内的销量排名top10</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param begin</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @param end</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     * */</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    public SalesTop10ReportVO getSalesTop10(LocalDate begin, LocalDate end){</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        LocalDateTime beginTime = LocalDateTime.of(begin, LocalTime.MIN);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        LocalDateTime endTime = LocalDateTime.of(end, LocalTime.MAX);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        List&lt;GoodsSalesDTO&gt; goodsSalesDTOList = orderMapper.getSalesTop10(beginTime, endTime);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        String nameList = StringUtils.join(goodsSalesDTOList.stream().map(GoodsSalesDTO::getName).collect(Collectors.toList()),&quot;,&quot;);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        String numberList = StringUtils.join(goodsSalesDTOList.stream().map(GoodsSalesDTO::getNumber).collect(Collectors.toList()),&quot;,&quot;);</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        return SalesTop10ReportVO.builder()</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                .nameList(nameList)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                .numberList(numberList)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="525-mapper层">5.2.5 Mapper层<a href="#525-mapper层" class="hash-link" aria-label="Direct link to 5.2.5 Mapper层" title="Direct link to 5.2.5 Mapper层">​</a></h4>
<p><strong>在OrderMapper接口中声明getSalesTop10方法：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">/**</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* 查询商品销量排名</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @param begin</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* @param end</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">*/</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">List&lt;GoodsSalesDTO&gt; getSalesTop10(LocalDateTime begin, LocalDateTime end);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>在OrderMapper.xml文件中编写动态SQL：</strong></p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token tag" style="color:hsl(5, 74%, 59%)">select</span><span class="token tag" style="color:hsl(5, 74%, 59%)"> </span><span class="token tag attr-name" style="color:hsl(35, 99%, 36%)">id</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(119, 34%, 47%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag attr-value" style="color:hsl(119, 34%, 47%)">getSalesTop10</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag" style="color:hsl(5, 74%, 59%)"> </span><span class="token tag attr-name" style="color:hsl(35, 99%, 36%)">resultType</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(119, 34%, 47%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag attr-value" style="color:hsl(119, 34%, 47%)">com.sky.dto.GoodsSalesDTO</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        select od.name name,sum(od.number) number from order_detail od ,orders o</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        where od.order_id = o.id</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            and o.status = 5</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token tag" style="color:hsl(5, 74%, 59%)">if</span><span class="token tag" style="color:hsl(5, 74%, 59%)"> </span><span class="token tag attr-name" style="color:hsl(35, 99%, 36%)">test</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(119, 34%, 47%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag attr-value" style="color:hsl(119, 34%, 47%)">begin != null</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                and order_time </span><span class="token entity named-entity" style="color:hsl(230, 8%, 24%)">&amp;gt;</span><span class="token plain">= #{begin}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;/</span><span class="token tag" style="color:hsl(5, 74%, 59%)">if</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;</span><span class="token tag" style="color:hsl(5, 74%, 59%)">if</span><span class="token tag" style="color:hsl(5, 74%, 59%)"> </span><span class="token tag attr-name" style="color:hsl(35, 99%, 36%)">test</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(119, 34%, 47%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag attr-value" style="color:hsl(119, 34%, 47%)">end != null</span><span class="token tag attr-value punctuation" style="color:hsl(119, 34%, 47%)">&quot;</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                and order_time </span><span class="token entity named-entity" style="color:hsl(230, 8%, 24%)">&amp;lt;</span><span class="token plain">= #{end}</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">            </span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;/</span><span class="token tag" style="color:hsl(5, 74%, 59%)">if</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        group by name</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        order by number desc</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        limit 0, 10</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&lt;/</span><span class="token tag" style="color:hsl(5, 74%, 59%)">select</span><span class="token tag punctuation" style="color:hsl(119, 34%, 47%)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="53-功能测试">5.3 功能测试<a href="#53-功能测试" class="hash-link" aria-label="Direct link to 5.3 功能测试" title="Direct link to 5.3 功能测试">​</a></h3>
<p>可以通过如下方式进行测试：</p>
<ul>
<li>接口文档测试</li>
<li>前后端联调</li>
</ul>
<p>重启服务，直接采用前后端联调测试。</p>
<p><strong>查看近30日销量排名Top10统计</strong></p>
<p>若查询的某一段时间没有销量数据，则显示不出效果。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107210518821-5b1571b8370a20a4fb5d0ba3b5be95f7.png" width="1892" height="741" class="img_ev3q"></p>
<p>进入开发者模式，查看返回数据</p>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107210711326-745ad78afdbef8b762cc21295a4547a5.png" width="1415" height="279" class="img_ev3q"></p>
<p>也可通过断点方式启动，查看每步执行情况。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="54-代码提交">5.4 代码提交<a href="#54-代码提交" class="hash-link" aria-label="Direct link to 5.4 代码提交" title="Direct link to 5.4 代码提交">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/image-20230107210835115-879993a3add3737e016dee7aa0fe89fa.png" width="1076" height="1004" class="img_ev3q"></p>
<p>后续步骤和其它功能代码提交一致，不再赘述。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#课程内容" class="table-of-contents__link toc-highlight">课程内容</a></li><li><a href="#1-apache-echarts" class="table-of-contents__link toc-highlight">1. Apache ECharts</a><ul><li><a href="#11-介绍" class="table-of-contents__link toc-highlight">1.1 介绍</a></li><li><a href="#12-入门案例" class="table-of-contents__link toc-highlight">1.2 入门案例</a></li></ul></li><li><a href="#2-营业额统计" class="table-of-contents__link toc-highlight">2. 营业额统计</a><ul><li><a href="#21-需求分析和设计" class="table-of-contents__link toc-highlight">2.1 需求分析和设计</a></li><li><a href="#22-代码开发" class="table-of-contents__link toc-highlight">2.2 代码开发</a></li><li><a href="#23-功能测试" class="table-of-contents__link toc-highlight">2.3 功能测试</a></li><li><a href="#24-代码提交" class="table-of-contents__link toc-highlight">2.4 代码提交</a></li></ul></li><li><a href="#3-用户统计" class="table-of-contents__link toc-highlight">3. 用户统计</a><ul><li><a href="#31-需求分析和设计" class="table-of-contents__link toc-highlight">3.1 需求分析和设计</a></li><li><a href="#32-代码开发" class="table-of-contents__link toc-highlight">3.2 代码开发</a></li><li><a href="#33-功能测试" class="table-of-contents__link toc-highlight">3.3 功能测试</a></li><li><a href="#34-代码提交" class="table-of-contents__link toc-highlight">3.4 代码提交</a></li></ul></li><li><a href="#4-订单统计" class="table-of-contents__link toc-highlight">4. 订单统计</a><ul><li><a href="#41-需求分析和设计" class="table-of-contents__link toc-highlight">4.1 需求分析和设计</a></li><li><a href="#42-代码开发" class="table-of-contents__link toc-highlight">4.2 代码开发</a></li><li><a href="#43-功能测试" class="table-of-contents__link toc-highlight">4.3 功能测试</a></li><li><a href="#44-代码提交" class="table-of-contents__link toc-highlight">4.4 代码提交</a></li></ul></li><li><a href="#5-销量排名top10" class="table-of-contents__link toc-highlight">5. 销量排名Top10</a><ul><li><a href="#51-需求分析和设计" class="table-of-contents__link toc-highlight">5.1 需求分析和设计</a></li><li><a href="#52-代码开发" class="table-of-contents__link toc-highlight">5.2 代码开发</a></li><li><a href="#53-功能测试" class="table-of-contents__link toc-highlight">5.3 功能测试</a></li><li><a href="#54-代码提交" class="table-of-contents__link toc-highlight">5.4 代码提交</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>