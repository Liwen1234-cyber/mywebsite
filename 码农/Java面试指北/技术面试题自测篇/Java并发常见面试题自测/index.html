<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-码农/Java面试指北/技术面试题自测篇/Java并发常见面试题自测" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Java 并发常见面试题自测 | Coisini</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://doc.minddiy.top/码农/Java面试指北/技术面试题自测篇/Java并发常见面试题自测/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Java 并发常见面试题自测 | Coisini"><meta data-rh="true" name="description" content="Java 并发在面试中还是非常常问的，需要多花一些时间准备！另外，个人建议你在项目经历中提到一两条多线程相关的应用，例如 CompletableFuture 编排任务。"><meta data-rh="true" property="og:description" content="Java 并发在面试中还是非常常问的，需要多花一些时间准备！另外，个人建议你在项目经历中提到一两条多线程相关的应用，例如 CompletableFuture 编排任务。"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://doc.minddiy.top/码农/Java面试指北/技术面试题自测篇/Java并发常见面试题自测/"><link data-rh="true" rel="alternate" href="https://doc.minddiy.top/码农/Java面试指北/技术面试题自测篇/Java并发常见面试题自测/" hreflang="en"><link data-rh="true" rel="alternate" href="https://doc.minddiy.top/码农/Java面试指北/技术面试题自测篇/Java并发常见面试题自测/" hreflang="x-default"><meta name="google-site-verification" content="1FUPX6Qo4y3ecU623ShEurhgnjhSTjK49rRMhEDlzFA">
<link rel="stylesheet" href="/katex/katex.min.css">
<script src="/js/matomo.js" async defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.79037026.css">
<script src="/assets/js/runtime~main.468f2b27.js" defer="defer"></script>
<script src="/assets/js/main.4763ab3e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Chialisp Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Chialisp Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Coisini</b></a></div><div class="navbar__items navbar__items--right"><a href="https://minddiy.top" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Main site<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Java 并发常见面试题自测</h1></header>
<p>Java 并发在面试中还是非常常问的，需要多花一些时间准备！另外，个人建议你在项目经历中提到一两条多线程相关的应用，例如 <a href="https://t.zsxq.com/oEXEh" target="_blank" rel="noopener noreferrer">CompletableFuture 编排任务</a>。</p>
<p>📌<strong>说明</strong>：</p>
<ol>
<li>下面这些 Java 并发自测问题的详细参考答案你都可以在 <a href="https://javaguide.cn/cs-basics/network/other-network-questions.html" target="_blank" rel="noopener noreferrer">JavaGuide </a>中找到。我还会直接给出对应的参考文章，方便你查阅。</li>
<li>⭐代表重要程度，⭐越多表现面试越爱问，越要认真准备。</li>
</ol>
<p>如果觉得 Java 并发知识点太多的话，完全可以按照这个自测来准备，把握重点，这样可以节省不少时间！</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="基础">基础<a href="#基础" class="hash-link" aria-label="Direct link to 基础" title="Direct link to 基础">​</a></h2>
<blockquote>
<p>相关阅读：<a href="https://javaguide.cn/java/concurrent/java-concurrent-questions-01.html" target="_blank" rel="noopener noreferrer">Java 并发常见面试题总结（上） - JavaGuide</a></p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="什么是线程和进程线程与进程的关系区别及优缺点">什么是线程和进程?线程与进程的关系,区别及优缺点？⭐⭐⭐⭐<a href="#什么是线程和进程线程与进程的关系区别及优缺点" class="hash-link" aria-label="Direct link to 什么是线程和进程?线程与进程的关系,区别及优缺点？⭐⭐⭐⭐" title="Direct link to 什么是线程和进程?线程与进程的关系,区别及优缺点？⭐⭐⭐⭐">​</a></h3>
<p>💡 提示：可以从从 JVM 角度说进程和线程之间的关系</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="为什么要使用多线程呢-">为什么要使用多线程呢? ⭐⭐⭐<a href="#为什么要使用多线程呢-" class="hash-link" aria-label="Direct link to 为什么要使用多线程呢? ⭐⭐⭐" title="Direct link to 为什么要使用多线程呢? ⭐⭐⭐">​</a></h3>
<p>💡 提示：从计算机角度来说主要是为了充分利用多核 CPU 的能力，从项目角度来说主要是为了提升系统的性能。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="说说线程的生命周期和状态-">说说线程的生命周期和状态? ⭐⭐⭐⭐<a href="#说说线程的生命周期和状态-" class="hash-link" aria-label="Direct link to 说说线程的生命周期和状态? ⭐⭐⭐⭐" title="Direct link to 说说线程的生命周期和状态? ⭐⭐⭐⭐">​</a></h3>
<p>💡 提示： 6 种状态（<code>NEW</code>、<code>RUNNABLE</code>、<code>BLOCKED</code>、<code>WAITING</code>、<code>TIME_WAITING</code>、<code>TERMINATED</code>）。</p>
<p>🌈 拓展：在操作系统中层面线程有 <code>READY</code> 和 <code>RUNNING</code> 状态，而在 JVM 层面只能看到 <code>RUNNABLE</code> 状态。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="什么是线程死锁如何避免死锁如何预防和避免线程死锁-">什么是线程死锁?如何避免死锁?如何预防和避免线程死锁? ⭐⭐⭐⭐<a href="#什么是线程死锁如何避免死锁如何预防和避免线程死锁-" class="hash-link" aria-label="Direct link to 什么是线程死锁?如何避免死锁?如何预防和避免线程死锁? ⭐⭐⭐⭐" title="Direct link to 什么是线程死锁?如何避免死锁?如何预防和避免线程死锁? ⭐⭐⭐⭐">​</a></h3>
<p>💡 提示： 这里最好能够结合代码来聊，你要确保自己可以写出有死锁问题的代码。</p>
<p>🌈 拓展：项目中遇到死锁问题是比较常见的，除了要搞懂上面这些死锁的基本概念之外，你还要知道线上项目遇到死锁问题该如何排查和解决。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="乐观锁和悲观锁">乐观锁和悲观锁<a href="#乐观锁和悲观锁" class="hash-link" aria-label="Direct link to 乐观锁和悲观锁" title="Direct link to 乐观锁和悲观锁">​</a></h2>
<blockquote>
<p>相关阅读：<a href="https://javaguide.cn/java/concurrent/optimistic-lock-and-pessimistic-lock.html" target="_blank" rel="noopener noreferrer">乐观锁和悲观锁详解 - JavaGuide</a></p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="乐观锁和悲观锁的区别-">乐观锁和悲观锁的区别 ⭐⭐⭐⭐⭐<a href="#乐观锁和悲观锁的区别-" class="hash-link" aria-label="Direct link to 乐观锁和悲观锁的区别 ⭐⭐⭐⭐⭐" title="Direct link to 乐观锁和悲观锁的区别 ⭐⭐⭐⭐⭐">​</a></h3>
<p>💡 提示：乐观锁和悲观锁的最终目的都是为了保证线程安全，避免在并发场景下的资源竞争问题，但乐观锁不会真的去加锁。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="如何实现乐观锁-">如何实现乐观锁？ ⭐⭐⭐⭐<a href="#如何实现乐观锁-" class="hash-link" aria-label="Direct link to 如何实现乐观锁？ ⭐⭐⭐⭐" title="Direct link to 如何实现乐观锁？ ⭐⭐⭐⭐">​</a></h3>
<p>💡 提示：乐观锁一般会使用版本号机制或 CAS 算法实现，CAS 算法相对来说更多一些，这里需要格外注意。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cas-了解么原理-"><code>CAS</code> 了解么？原理？ ⭐⭐⭐⭐⭐<a href="#cas-了解么原理-" class="hash-link" aria-label="Direct link to cas-了解么原理-" title="Direct link to cas-了解么原理-">​</a></h3>
<p>💡 提示：多地方都用到了 <code>CAS</code> 比如 <code>ConcurrentHashMap</code> 采用 <code>CAS</code> 和 <code>synchronized</code> 来保证并发安全，再比如<code>java.util.concurrent.atomic</code>包中的类通过 <code>volatile+CAS</code> 重试保证线程安全性。和面试官聊 <code>CAS</code> 的时候，你可以结合 <code>CAS</code> 的一些实际应用来说。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="乐观锁存在哪些问题-">乐观锁存在哪些问题？ ⭐⭐⭐<a href="#乐观锁存在哪些问题-" class="hash-link" aria-label="Direct link to 乐观锁存在哪些问题？ ⭐⭐⭐" title="Direct link to 乐观锁存在哪些问题？ ⭐⭐⭐">​</a></h3>
<p>💡 提示： ABA 问题、循环时间长开销大、只能保证一个共享变量的原子操作</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="什么是-aba-问题aba-问题怎么解决-">什么是 ABA 问题？ABA 问题怎么解决？ ⭐⭐⭐⭐<a href="#什么是-aba-问题aba-问题怎么解决-" class="hash-link" aria-label="Direct link to 什么是 ABA 问题？ABA 问题怎么解决？ ⭐⭐⭐⭐" title="Direct link to 什么是 ABA 问题？ABA 问题怎么解决？ ⭐⭐⭐⭐">​</a></h3>
<p>💡 提示： 所谓 ABA 问题，就是一个值原来是 A，变成了 B，又变回了 A。这个时候使用 CAS 是检查不出变化的，但实际上却被更新了两次。ABA 问题的解决思路是在变量前面追加上版本号或者时间戳。从 JDK 1.5 开始，JDK 的 atomic 包里提供了一个类 <code>AtomicStampedReference</code> 类来解决 ABA 问题。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="jmm">JMM<a href="#jmm" class="hash-link" aria-label="Direct link to JMM" title="Direct link to JMM">​</a></h2>
<blockquote>
<p>相关阅读：<a href="https://javaguide.cn/java/concurrent/jmm.html" target="_blank" rel="noopener noreferrer">JMM（Java 内存模型）详解 - JavaGuide</a></p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="并发编程的三个重要特性-">并发编程的三个重要特性 ⭐⭐⭐⭐⭐<a href="#并发编程的三个重要特性-" class="hash-link" aria-label="Direct link to 并发编程的三个重要特性 ⭐⭐⭐⭐⭐" title="Direct link to 并发编程的三个重要特性 ⭐⭐⭐⭐⭐">​</a></h3>
<p>💡 提示： 原子性、可见性、有序性</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="什么是-jmm为什么需要-jmm-">什么是 JMM？为什么需要 JMM？ ⭐⭐⭐⭐⭐<a href="#什么是-jmm为什么需要-jmm-" class="hash-link" aria-label="Direct link to 什么是 JMM？为什么需要 JMM？ ⭐⭐⭐⭐⭐" title="Direct link to 什么是 JMM？为什么需要 JMM？ ⭐⭐⭐⭐⭐">​</a></h3>
<p>💡 提示：对于 Java 来说，你可以把 JMM 看作是 Java 定义的并 发编程相关的一组规范，除了抽象了线程和主内存之间的关系之外，其还规定了从 Java 源代码到 CPU 可执行指令的这个转化过程要遵守哪些和并发相关的原则和规范，其主要目的是为了简化多线程编程，增强程序可移植性的。</p>
<p>相关阅读：<a href="https://javaguide.cn/java/concurrent/jmm.html" target="_blank" rel="noopener noreferrer">JMM（Java 内存模型）详解</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="jmm-是如何抽象线程和主内存之间的关系">JMM 是如何抽象线程和主内存之间的关系？⭐⭐⭐⭐⭐<a href="#jmm-是如何抽象线程和主内存之间的关系" class="hash-link" aria-label="Direct link to JMM 是如何抽象线程和主内存之间的关系？⭐⭐⭐⭐⭐" title="Direct link to JMM 是如何抽象线程和主内存之间的关系？⭐⭐⭐⭐⭐">​</a></h3>
<p>💡 提示：Java 内存模型的抽象示意图如下：</p>
<p><img decoding="async" loading="lazy" alt="jmm.png" src="/assets/images/1661588239938-a610a412-848a-4efd-80f9-6d1c5d5c003c-665341-9cba8aa1e444da2a843823599199366a.png" width="551" height="541" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="java-内存区域和-jmm-有何区别-">Java 内存区域和 JMM 有何区别？ ⭐⭐⭐⭐<a href="#java-内存区域和-jmm-有何区别-" class="hash-link" aria-label="Direct link to Java 内存区域和 JMM 有何区别？ ⭐⭐⭐⭐" title="Direct link to Java 内存区域和 JMM 有何区别？ ⭐⭐⭐⭐">​</a></h3>
<p>💡 提示： Java 内存区域和内存模型是完全不一样的两个东西。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="happens-before-原则是什么为什么需要-happens-before-原则-">happens-before 原则是什么？为什么需要 happens-before 原则？ ⭐⭐⭐<a href="#happens-before-原则是什么为什么需要-happens-before-原则-" class="hash-link" aria-label="Direct link to happens-before 原则是什么？为什么需要 happens-before 原则？ ⭐⭐⭐" title="Direct link to happens-before 原则是什么？为什么需要 happens-before 原则？ ⭐⭐⭐">​</a></h3>
<p>💡 提示：happens-before 原则的诞生是为了程序员和编译器、处理器之间的平衡。程序员追求的是易于理解和编程的强内存模型，遵守既定规则编码即可。编译器和处理器追求的是较少约束的弱内存模型，让它们尽己所能地去优化性能，让性能最大化。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="synchronized-和-volatile">synchronized 和 volatile<a href="#synchronized-和-volatile" class="hash-link" aria-label="Direct link to synchronized 和 volatile" title="Direct link to synchronized 和 volatile">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="synchronized-关键字-"><code>synchronized</code> 关键字 ⭐⭐⭐⭐⭐<a href="#synchronized-关键字-" class="hash-link" aria-label="Direct link to synchronized-关键字-" title="Direct link to synchronized-关键字-">​</a></h3>
<p>💡 提示：<code>synchronized</code> 关键字几乎是面试必问，你需要搞懂下面这些 <code>synchronized</code> 关键字相关的问题：</p>
<ul>
<li><code>synchronized</code> 关键字的作用，自己是怎么使用的。</li>
<li><code>synchronized</code> 关键字的底层原理（重点！！！）</li>
<li>JDK1.6 之后的 <code>synchronized</code> 关键字底层做了哪些优化。<code>synchronized</code> 锁升级流程。</li>
<li><code>synchronized</code> 和 <code>ReentrantLock</code> 的区别。</li>
<li><code>synchronized</code> 和 <code>volatile</code> 的区别。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="volatile-关键字-"><code>volatile</code> 关键字 ⭐⭐⭐⭐⭐<a href="#volatile-关键字-" class="hash-link" aria-label="Direct link to volatile-关键字-" title="Direct link to volatile-关键字-">​</a></h3>
<p>💡 提示：<code>volatile</code> 关键字同样是一个重点！结合 <code>JMM</code>（Java Memory Model，Java 内存模型）来回答就行了。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="threadlocal">ThreadLocal<a href="#threadlocal" class="hash-link" aria-label="Direct link to ThreadLocal" title="Direct link to ThreadLocal">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="threadlocal-有什么用">ThreadLocal 有什么用？⭐⭐⭐<a href="#threadlocal-有什么用" class="hash-link" aria-label="Direct link to ThreadLocal 有什么用？⭐⭐⭐" title="Direct link to ThreadLocal 有什么用？⭐⭐⭐">​</a></h3>
<p>💡 提示：<code>ThreadLocal</code> 用于为每个线程提供独立的变量副本，解决多线程环境中的数据竞争和线程安全问题。每个线程都有自己的“本地变量盒子”，确保数据互不干扰。通过 <code>ThreadLocal</code>，线程可以使用 <code>get()</code> 和 <code>set()</code> 方法访问和修改自己的副本，从而避免线程安全问题。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="threadlocal-原理了解吗">ThreadLocal 原理了解吗？⭐⭐⭐⭐⭐<a href="#threadlocal-原理了解吗" class="hash-link" aria-label="Direct link to ThreadLocal 原理了解吗？⭐⭐⭐⭐⭐" title="Direct link to ThreadLocal 原理了解吗？⭐⭐⭐⭐⭐">​</a></h3>
<p>💡 提示：</p>
<ul>
<li>每个线程都有一个 <code>ThreadLocalMap</code>。</li>
<li><code>ThreadLocal</code> 变量的值存储在这个 <code>ThreadLocalMap</code> 中，而不是直接在 <code>ThreadLocal</code> 对象上。</li>
<li><code>ThreadLocal</code> 作为键，存储和访问线程特有的数据。</li>
<li>通过 <code>get()</code> 和 <code>set()</code> 方法，<code>ThreadLocal</code> 传递和管理变量值。</li>
</ul>
<p><code>&lt;font style=&quot;color:rgb(59, 69, 78);&quot;&gt;ThreadLocal&lt;/font&gt;</code><font style="color:rgb(59, 69, 78)"> 数据结构如下图所示：</font></p>
<p><font style="color:rgb(59, 69, 78)"></font></p>
<p><img decoding="async" loading="lazy" alt="1727256334342-4e94a8e9-786d-43b3-bbe7-acae14f58215.png" src="data:image/png;base64,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" width="591" height="412" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="线程池">线程池<a href="#线程池" class="hash-link" aria-label="Direct link to 线程池" title="Direct link to 线程池">​</a></h2>
<blockquote>
<p>相关阅读：<a href="https://javaguide.cn/java/concurrent/java-thread-pool-summary.html" target="_blank" rel="noopener noreferrer">Java 线程池详解 - JavaGuide </a>。</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="为什么要用线程池">为什么要用线程池？⭐⭐⭐⭐<a href="#为什么要用线程池" class="hash-link" aria-label="Direct link to 为什么要用线程池？⭐⭐⭐⭐" title="Direct link to 为什么要用线程池？⭐⭐⭐⭐">​</a></h3>
<p>💡 提示：</p>
<ul>
<li><strong>降低资源消耗</strong>。通过重复利用已创建的线程降低线程创建和销毁造成的消耗。</li>
<li><strong>提高响应速度</strong>。当任务到达时，任务可以不需要等到线程创建就能立即执行。</li>
<li><strong>提高线程的可管理性</strong>。线程是稀缺资源，如果无限制的创建，不仅会消耗系统资源，还会降低系统的稳定性，使用线程池可以进行统一的分配，调优和监控。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="为什么不推荐使用内置线程池">为什么不推荐使用内置线程池？⭐⭐⭐⭐⭐<a href="#为什么不推荐使用内置线程池" class="hash-link" aria-label="Direct link to 为什么不推荐使用内置线程池？⭐⭐⭐⭐⭐" title="Direct link to 为什么不推荐使用内置线程池？⭐⭐⭐⭐⭐">​</a></h3>
<p>💡 提示：</p>
<ul>
<li><code>FixedThreadPool</code> 和 <code>SingleThreadExecutor</code> 使用 <code>LinkedBlockingQueue</code>，任务队列长度为 <code>Integer.MAX_VALUE</code>，可能导致 OOM。</li>
<li><code>CachedThreadPool</code> 使用 <code>SynchronousQueue</code>，线程数量可达 <code>Integer.MAX_VALUE</code>，任务过多 时可能导致 OOM。</li>
<li><code>ScheduledThreadPool</code> 和 <code>SingleThreadScheduledExecutor</code> 使用 <code>DelayedWorkQueue</code>，任务队列长度为 <code>Integer.MAX_VALUE</code>，可能导致 OOM。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="线程池常见参数有哪些如何解释">线程池常见参数有哪些？如何解释？⭐⭐⭐⭐⭐<a href="#线程池常见参数有哪些如何解释" class="hash-link" aria-label="Direct link to 线程池常见参数有哪些？如何解释？⭐⭐⭐⭐⭐" title="Direct link to 线程池常见参数有哪些？如何解释？⭐⭐⭐⭐⭐">​</a></h3>
<p>💡 提示：<code>&lt;font style=&quot;color:rgb(59, 69, 78);&quot;&gt;corePoolSize&lt;/font&gt;</code><font style="color:rgb(59, 69, 78)">、</font><code>&lt;font style=&quot;color:rgb(59, 69, 78);&quot;&gt;maximumPoolSize&lt;/font&gt;</code><font style="color:rgb(59, 69, 78)">、</font><code>&lt;font style=&quot;color:rgb(59, 69, 78);&quot;&gt;workQueue&lt;/font&gt;</code><font style="color:rgb(59, 69, 78)">、</font><code>&lt;font style=&quot;color:rgb(59, 69, 78);&quot;&gt;keepAliveTime&lt;/font&gt;</code><font style="color:rgb(59, 69, 78)">、</font><code>&lt;font style=&quot;color:rgb(59, 69, 78);&quot;&gt;threadFactory&lt;/font&gt;</code><font style="color:rgb(59, 69, 78)">、</font><code>&lt;font style=&quot;color:rgb(59, 69, 78);&quot;&gt;handler&lt;/font&gt;</code><font style="color:rgb(59, 69, 78)">。</font></p>
<p><font style="color:rgb(59, 69, 78)"></font></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="线程池的拒绝策略有哪些">线程池的拒绝策略有哪些？⭐⭐⭐⭐⭐<a href="#线程池的拒绝策略有哪些" class="hash-link" aria-label="Direct link to 线程池的拒绝策略有哪些？⭐⭐⭐⭐⭐" title="Direct link to 线程池的拒绝策略有哪些？⭐⭐⭐⭐⭐">​</a></h3>
<p>💡 提示：</p>

























<table><thead><tr><th>策略</th><th>描述</th></tr></thead><tbody><tr><td><code>AbortPolicy</code></td><td>抛出异常拒绝新任务。</td></tr><tr><td><code>CallerRunsPolicy</code></td><td>在调用者线程中运行被拒绝任务，可能影响性能。</td></tr><tr><td><code>DiscardPolicy</code></td><td>直接丢弃新任务。</td></tr><tr><td><code>DiscardOldestPolicy</code></td><td>丢弃最早的未处理任务。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="线程池的核心线程会被回收吗">线程池的核心线程会被回收吗？⭐⭐⭐<a href="#线程池的核心线程会被回收吗" class="hash-link" aria-label="Direct link to 线程池的核心线程会被回收吗？⭐⭐⭐" title="Direct link to 线程池的核心线程会被回收吗？⭐⭐⭐">​</a></h3>
<p>💡 提示：</p>
<p><code>ThreadPoolExecutor</code> 默认不会回收核心线程，即使它们已经空闲了。这是为了减少创建线程的开销，因为核心线程通常是要长期保持活跃的。但是，如果线程池是被用于周期性使用的场景，且频率不高（周期之间有明显的空闲时间），可以考虑将 <code>allowCoreThreadTimeOut(boolean value)</code> 方法的参数设置为 <code>true</code>，这样就会回收空闲（时间间隔由 <code>keepAliveTime</code> 指定）的核心线程了。</p>
<p>换一种问法：</p>
<ul>
<li><code>keepAliveTime</code> 对核心线程是否生效，是否能杀死核心线程?</li>
<li>如果我想杀死核心线程应该怎么做?</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="线程池常用的阻塞队列有哪些">线程池常用的阻塞队列有哪些？⭐⭐⭐<a href="#线程池常用的阻塞队列有哪些" class="hash-link" aria-label="Direct link to 线程池常用的阻塞队列有哪些？⭐⭐⭐" title="Direct link to 线程池常用的阻塞队列有哪些？⭐⭐⭐">​</a></h3>
<p>💡 提示：容量为 <code>Integer.MAX_VALUE</code> 的 <code>LinkedBlockingQueue</code>（有界阻塞队列）、<code>SynchronousQueue</code>（同步队列） 、<code>DelayedWorkQueue</code>（延迟队列）、<code>ArrayBlockingQueue</code>（有界阻塞队列）。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="线程池处理任务的流程了解吗">线程池处理任务的流程了解吗？⭐⭐⭐⭐⭐<a href="#线程池处理任务的流程了解吗" class="hash-link" aria-label="Direct link to 线程池处理任务的流程了解吗？⭐⭐⭐⭐⭐" title="Direct link to 线程池处理任务的流程了解吗？⭐⭐⭐⭐⭐">​</a></h3>
<p>💡 提示：</p>
<p><img decoding="async" loading="lazy" alt="thread-pool-principle.png" src="data:image/png;base64,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" width="811" height="191" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="线程池中线程异常后销毁还是复用">线程池中线程异常后，销毁还是复用？⭐⭐⭐⭐<a href="#线程池中线程异常后销毁还是复用" class="hash-link" aria-label="Direct link to 线程池中线程异常后，销毁还是复用？⭐⭐⭐⭐" title="Direct link to 线程池中线程异常后，销毁还是复用？⭐⭐⭐⭐">​</a></h3>
<p>💡 提示：</p>
<p>使用<code>execute()</code>时，未捕获异常导致线程终止，线程池创建新线程替代；使用<code>submit()</code>时，异常被封装在<code>Future</code>中，线程继续复用。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="如何设计一个能够根据任务的优先级来执行的线程池">如何设计一个能够根据任务的优先级来执行的线程池？⭐⭐⭐⭐<a href="#如何设计一个能够根据任务的优先级来执行的线程池" class="hash-link" aria-label="Direct link to 如何设计一个能够根据任务的优先级来执行的线程池？⭐⭐⭐⭐" title="Direct link to 如何设计一个能够根据任务的优先级来执行的线程池？⭐⭐⭐⭐">​</a></h3>
<p>💡 提示：</p>
<p><font style="color:rgb(59, 69, 78)"></font></p>
<p>可以考虑使用 <code>PriorityBlockingQueue</code> （优先级阻塞队列）作为任务队列。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="aqs">AQS<a href="#aqs" class="hash-link" aria-label="Direct link to AQS" title="Direct link to AQS">​</a></h2>
<blockquote>
<p>相关阅读：<a href="https://javaguide.cn/java/concurrent/aqs.html" target="_blank" rel="noopener noreferrer">AQS 详解 - JavaGuide</a>。</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="aqs-是什么aqs-的原理是什么">AQS 是什么？AQS 的原理是什么？⭐⭐⭐⭐⭐<a href="#aqs-是什么aqs-的原理是什么" class="hash-link" aria-label="Direct link to AQS 是什么？AQS 的原理是什么？⭐⭐⭐⭐⭐" title="Direct link to AQS 是什么？AQS 的原理是什么？⭐⭐⭐⭐⭐">​</a></h3>
<p>💡 提示：</p>
<p>AQS 的全称为 <code>AbstractQueuedSynchronizer</code> ，翻译过来的意思就是抽象队列同步器。这个类在 <code>java.util.concurrent.locks</code> 包下面。AQS 核心思想是，如果被请求的共享资源空闲，则将当前请求资源的线程设置为有效的工作线程，并且将共享资源设置为锁定状态。如果被请求的共享资源被占用，那么就需要一套线程阻塞等待以及被唤醒时锁分配的机制，这个机制 AQS 是用 <strong>CLH 队列锁</strong> 实现的，即将暂时获取不到锁的线程加入到队列中。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semaphore-有什么用semaphore-的原理是什么">Semaphore 有什么用？Semaphore 的原理是什么？⭐⭐⭐⭐<a href="#semaphore-有什么用semaphore-的原理是什么" class="hash-link" aria-label="Direct link to Semaphore 有什么用？Semaphore 的原理是什么？⭐⭐⭐⭐" title="Direct link to Semaphore 有什么用？Semaphore 的原理是什么？⭐⭐⭐⭐">​</a></h3>
<p>💡 提示：</p>
<p><code>Semaphore</code> 是共享锁的一种实现，它默认构造 AQS 的 <code>state</code> 值为 <code>permits</code>，你可以将 <code>permits</code> 的值理解为许可证的数量，只有拿到许可证的线程才能执行。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="countdownlatch-有什么用countdownlatch-的原理是什么用过-countdownlatch-么什么场景下用的">CountDownLatch 有什么用？CountDownLatch 的原理是什么？用过 CountDownLatch 么？什么场景下用的？⭐⭐⭐⭐<a href="#countdownlatch-有什么用countdownlatch-的原理是什么用过-countdownlatch-么什么场景下用的" class="hash-link" aria-label="Direct link to CountDownLatch 有什么用？CountDownLatch 的原理是什么？用过 CountDownLatch 么？什么场景下用的？⭐⭐⭐⭐" title="Direct link to CountDownLatch 有什么用？CountDownLatch 的原理是什么？用过 CountDownLatch 么？什么场景下用的？⭐⭐⭐⭐">​</a></h3>
<p>💡 提示：</p>
<p><code>CountDownLatch</code> 允许 <code>count</code> 个线程阻塞在一个地方，直至所有线程的任务都执行完毕，一次性的。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cyclicbarrier-有什么用cyclicbarrier-的原理是什么">CyclicBarrier 有什么用？CyclicBarrier 的原理是什么？⭐⭐⭐<a href="#cyclicbarrier-有什么用cyclicbarrier-的原理是什么" class="hash-link" aria-label="Direct link to CyclicBarrier 有什么用？CyclicBarrier 的原理是什么？⭐⭐⭐" title="Direct link to CyclicBarrier 有什么用？CyclicBarrier 的原理是什么？⭐⭐⭐">​</a></h3>
<p>💡 提示：</p>
<p><code>CyclicBarrier</code> 和 <code>CountDownLatch</code> 非常类似，它也可以实现线程间的技术等待，但是它的功能比 <code>CountDownLatch</code> 更加复杂和强大。主要应用场景和 <code>CountDownLatch</code> 类似。</p>
<blockquote>
<p>更新: 2024-09-25 17:39:02<br>
原文: <a href="https://www.yuque.com/snailclimb/mf2z3k/cm70wa" target="_blank" rel="noopener noreferrer">https://www.yuque.com/snailclimb/mf2z3k/cm70wa</a></p>
</blockquote></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#基础" class="table-of-contents__link toc-highlight">基础</a><ul><li><a href="#什么是线程和进程线程与进程的关系区别及优缺点" class="table-of-contents__link toc-highlight">什么是线程和进程?线程与进程的关系,区别及优缺点？⭐⭐⭐⭐</a></li><li><a href="#为什么要使用多线程呢-" class="table-of-contents__link toc-highlight">为什么要使用多线程呢? ⭐⭐⭐</a></li><li><a href="#说 说线程的生命周期和状态-" class="table-of-contents__link toc-highlight">说说线程的生命周期和状态? ⭐⭐⭐⭐</a></li><li><a href="#什么是线程死锁如何避免死锁如何预防和避免线程死锁-" class="table-of-contents__link toc-highlight">什么是线程死锁?如何避免死锁?如何预防和避免线程死锁? ⭐⭐⭐⭐</a></li></ul></li><li><a href="#乐观锁和悲观锁" class="table-of-contents__link toc-highlight">乐观锁和悲观锁</a><ul><li><a href="#乐观锁和悲观锁的区别-" class="table-of-contents__link toc-highlight">乐观锁和悲观锁的区别 ⭐⭐⭐⭐⭐</a></li><li><a href="#如何实现乐观锁-" class="table-of-contents__link toc-highlight">如何实现乐观锁？ ⭐⭐⭐⭐</a></li><li><a href="#cas-了解么原理-" class="table-of-contents__link toc-highlight"><code>CAS</code> 了解么？原理？ ⭐⭐⭐⭐⭐</a></li><li><a href="#乐观锁存在哪些问题-" class="table-of-contents__link toc-highlight">乐观锁存在哪些问题？ ⭐⭐⭐</a></li><li><a href="#什么是-aba-问题aba-问题怎么解决-" class="table-of-contents__link toc-highlight">什么是 ABA 问题？ABA 问题怎么解决？ ⭐⭐⭐⭐</a></li></ul></li><li><a href="#jmm" class="table-of-contents__link toc-highlight">JMM</a><ul><li><a href="#并发编程的三个重要特性-" class="table-of-contents__link toc-highlight">并发编程的三个重要特性 ⭐⭐⭐⭐⭐</a></li><li><a href="#什么是-jmm为什么需要-jmm-" class="table-of-contents__link toc-highlight">什么是 JMM？为什么需要 JMM？ ⭐⭐⭐⭐⭐</a></li><li><a href="#jmm-是如何抽象线程和主内存之间的关系" class="table-of-contents__link toc-highlight">JMM 是如何抽象线程和主内存之间的关系？⭐⭐⭐⭐⭐</a></li><li><a href="#java-内存区域和-jmm-有何区别-" class="table-of-contents__link toc-highlight">Java 内存区域和 JMM 有何区别？ ⭐⭐⭐⭐</a></li><li><a href="#happens-before-原则是什么为什么需要-happens-before-原则-" class="table-of-contents__link toc-highlight">happens-before 原则是什么？为什么需要 happens-before 原则？ ⭐⭐⭐</a></li></ul></li><li><a href="#synchronized-和-volatile" class="table-of-contents__link toc-highlight">synchronized 和 volatile</a><ul><li><a href="#synchronized-关键字-" class="table-of-contents__link toc-highlight"><code>synchronized</code> 关键字 ⭐⭐⭐⭐⭐</a></li><li><a href="#volatile-关键字-" class="table-of-contents__link toc-highlight"><code>volatile</code> 关键字 ⭐⭐⭐⭐⭐</a></li></ul></li><li><a href="#threadlocal" class="table-of-contents__link toc-highlight">ThreadLocal</a><ul><li><a href="#threadlocal-有什么用" class="table-of-contents__link toc-highlight">ThreadLocal 有什么用？⭐⭐⭐</a></li><li><a href="#threadlocal-原理了解吗" class="table-of-contents__link toc-highlight">ThreadLocal 原理了解吗？⭐⭐⭐⭐⭐</a></li></ul></li><li><a href="#线程池" class="table-of-contents__link toc-highlight">线程池</a><ul><li><a href="#为什么要用线程池" class="table-of-contents__link toc-highlight">为什么要用线程池？⭐⭐⭐⭐</a></li><li><a href="#为什么不推荐使用内置线程池" class="table-of-contents__link toc-highlight">为什么不推荐使用内置线程池？⭐⭐⭐⭐⭐</a></li><li><a href="#线程池常见参数有哪些如何解释" class="table-of-contents__link toc-highlight">线程池常见参数有哪些？如何解释？⭐⭐⭐⭐⭐</a></li><li><a href="#线程池的拒绝策略有哪些" class="table-of-contents__link toc-highlight">线程池的拒绝策略有哪些？⭐⭐⭐⭐⭐</a></li><li><a href="#线程池的核心线程会被回收吗" class="table-of-contents__link toc-highlight">线程池的核心线程会被回收吗？⭐⭐⭐</a></li><li><a href="#线程池常用的阻塞队列有哪些" class="table-of-contents__link toc-highlight">线程池常用的阻塞队列有哪些？⭐⭐⭐</a></li><li><a href="#线程池处理任务的流程了  解吗" class="table-of-contents__link toc-highlight">线程池处理任务的流程了解吗？⭐⭐⭐⭐⭐</a></li><li><a href="#线程池中线程异常后销毁还是复用" class="table-of-contents__link toc-highlight">线程池中线程异常后，销毁还是复用？⭐⭐⭐⭐</a></li><li><a href="#如何设计一个能够根据任务的优先级来执行的线程池" class="table-of-contents__link toc-highlight">如何设计一个能够根据任务的优先级来执行的线程池？⭐⭐⭐⭐</a></li></ul></li><li><a href="#aqs" class="table-of-contents__link toc-highlight">AQS</a><ul><li><a href="#aqs-是什么aqs-的原理是什么" class="table-of-contents__link toc-highlight">AQS 是什么？AQS 的原理是什么？⭐⭐⭐⭐⭐</a></li><li><a href="#semaphore-有什么用semaphore-的原理是什么" class="table-of-contents__link toc-highlight">Semaphore 有什么用？Semaphore 的原理是什么？⭐⭐⭐⭐</a></li><li><a href="#countdownlatch-有什么用countdownlatch-的原理是什么用过-countdownlatch-么什么场景下用的" class="table-of-contents__link toc-highlight">CountDownLatch 有什么用？CountDownLatch 的原理是什么？用过 CountDownLatch 么？什么场景下用的？⭐⭐⭐⭐</a></li><li><a href="#cyclicbarrier-有什么用cyclicbarrier-的原理是什么" class="table-of-contents__link toc-highlight">CyclicBarrier 有什么用？CyclicBarrier 的原理是什么？⭐⭐⭐</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>