"use strict";(self.webpackChunkmybase=self.webpackChunkmybase||[]).push([[59848],{20914:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>o,frontMatter:()=>s,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"\u7801\u519c/\u8ba1\u7b97\u673a\u57fa\u7840/\u8bbe\u8ba1\u6a21\u5f0f - \u4eab\u5143","title":"\u8bbe\u8ba1\u6a21\u5f0f - \u4eab\u5143","description":"\u4eab\u5143\uff08Flyweight\uff09","source":"@site/docs/\u7801\u519c/\u8ba1\u7b97\u673a\u57fa\u7840/\u8bbe\u8ba1\u6a21\u5f0f - \u4eab\u5143.md","sourceDirName":"\u7801\u519c/\u8ba1\u7b97\u673a\u57fa\u7840","slug":"/\u7801\u519c/\u8ba1\u7b97\u673a\u57fa\u7840/\u8bbe\u8ba1\u6a21\u5f0f - \u4eab\u5143","permalink":"/\u7801\u519c/\u8ba1\u7b97\u673a\u57fa\u7840/\u8bbe\u8ba1\u6a21\u5f0f - \u4eab\u5143","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{}}');var a=t(74848),l=t(28453);const s={},r=void 0,c={},h=[{value:"\u4eab\u5143\uff08Flyweight\uff09",id:"\u4eab\u5143flyweight",level:2},{value:"Intent",id:"intent",level:3},{value:"Class Diagram",id:"class-diagram",level:3},{value:"Implementation",id:"implementation",level:3},{value:"JDK",id:"jdk",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"\u4eab\u5143flyweight",children:"\u4eab\u5143\uff08Flyweight\uff09"}),"\n",(0,a.jsx)(n.h3,{id:"intent",children:"Intent"}),"\n",(0,a.jsx)(n.p,{children:"\u5229\u7528\u5171\u4eab\u7684\u65b9\u5f0f\u6765\u652f\u6301\u5927\u91cf\u7ec6\u7c92\u5ea6\u7684\u5bf9\u8c61\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u4e00\u90e8\u5206\u5185\u90e8\u72b6\u6001\u662f\u76f8\u540c\u7684\u3002"}),"\n",(0,a.jsx)(n.h3,{id:"class-diagram",children:"Class Diagram"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Flyweight\uff1a\u4eab\u5143\u5bf9\u8c61"}),"\n",(0,a.jsx)(n.li,{children:"IntrinsicState\uff1a\u5185\u90e8\u72b6\u6001\uff0c\u4eab\u5143\u5bf9\u8c61\u5171\u4eab\u5185\u90e8\u72b6\u6001"}),"\n",(0,a.jsx)(n.li,{children:"ExtrinsicState\uff1a\u5916\u90e8\u72b6\u6001\uff0c\u6bcf\u4e2a\u4eab\u5143\u5bf9\u8c61\u7684\u5916\u90e8\u72b6\u6001\u4e0d\u540c"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:t(20334).A+"",width:"925",height:"403"})}),"\n",(0,a.jsx)(n.h3,{id:"implementation",children:"Implementation"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"public interface Flyweight {\n    void doOperation(String extrinsicState);\n}\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'public class ConcreteFlyweight implements Flyweight {\n\n    private String intrinsicState;\n\n    public ConcreteFlyweight(String intrinsicState) {\n        this.intrinsicState = intrinsicState;\n    }\n\n    @Override\n    public void doOperation(String extrinsicState) {\n        System.out.println("Object address: " + System.identityHashCode(this));\n        System.out.println("IntrinsicState: " + intrinsicState);\n        System.out.println("ExtrinsicState: " + extrinsicState);\n    }\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"public class FlyweightFactory {\n\n    private HashMap<String, Flyweight> flyweights = new HashMap<>();\n\n    Flyweight getFlyweight(String intrinsicState) {\n        if (!flyweights.containsKey(intrinsicState)) {\n            Flyweight flyweight = new ConcreteFlyweight(intrinsicState);\n            flyweights.put(intrinsicState, flyweight);\n        }\n        return flyweights.get(intrinsicState);\n    }\n}\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'public class Client {\n\n    public static void main(String[] args) {\n        FlyweightFactory factory = new FlyweightFactory();\n        Flyweight flyweight1 = factory.getFlyweight("aa");\n        Flyweight flyweight2 = factory.getFlyweight("aa");\n        flyweight1.doOperation("x");\n        flyweight2.doOperation("y");\n    }\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:"Object address: 1163157884\nIntrinsicState: aa\nExtrinsicState: x\nObject address: 1163157884\nIntrinsicState: aa\nExtrinsicState: y\n"})}),"\n",(0,a.jsx)(n.h3,{id:"jdk",children:"JDK"}),"\n",(0,a.jsx)(n.p,{children:"Java \u5229\u7528\u7f13\u5b58\u6765\u52a0\u901f\u5927\u91cf\u5c0f\u5bf9\u8c61\u7684\u8bbf\u95ee\u65f6\u95f4\u3002"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"java.lang.Integer#valueOf(int)"}),"\n",(0,a.jsx)(n.li,{children:"java.lang.Boolean#valueOf(boolean)"}),"\n",(0,a.jsx)(n.li,{children:"java.lang.Byte#valueOf(byte)"}),"\n",(0,a.jsx)(n.li,{children:"java.lang.Character#valueOf(char)"}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},20334:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/5f5c22d5-9c0e-49e1-b5b0-6cc7032724d4-a6aba6770f794605a65fa90b98099714.png"},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>r});var i=t(96540);const a={},l=i.createContext(a);function s(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);