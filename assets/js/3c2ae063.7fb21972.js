"use strict";(self.webpackChunkmybase=self.webpackChunkmybase||[]).push([[95444],{27701:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>h,contentTitle:()=>c,default:()=>t,frontMatter:()=>r,metadata:()=>l,toc:()=>x});const l=JSON.parse('{"id":"\u7801\u519c/JavaNote/DB","title":"MySQL","description":"\u7b80\u4ecb","source":"@site/docs/\u7801\u519c/JavaNote/DB.md","sourceDirName":"\u7801\u519c/JavaNote","slug":"/\u7801\u519c/JavaNote/DB","permalink":"/\u7801\u519c/JavaNote/DB","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{}}');var i=s(74848),d=s(28453);const r={},c="MySQL",h={},x=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u6570\u636e\u5e93",id:"\u6570\u636e\u5e93",level:3},{value:"MySQL",id:"mysql-1",level:3},{value:"\u4f53\u7cfb\u67b6\u6784",id:"\u4f53\u7cfb\u67b6\u6784",level:2},{value:"\u6574\u4f53\u67b6\u6784",id:"\u6574\u4f53\u67b6\u6784",level:3},{value:"\u5efa\u7acb\u8fde\u63a5",id:"\u5efa\u7acb\u8fde\u63a5",level:3},{value:"\u8fde\u63a5\u5668",id:"\u8fde\u63a5\u5668",level:4},{value:"\u6743\u9650\u4fe1\u606f",id:"\u6743\u9650\u4fe1\u606f",level:4},{value:"\u8fde\u63a5\u72b6\u6001",id:"\u8fde\u63a5\u72b6\u6001",level:4},{value:"\u6267\u884c\u6d41\u7a0b",id:"\u6267\u884c\u6d41\u7a0b",level:3},{value:"\u67e5\u8be2\u7f13\u5b58",id:"\u67e5\u8be2\u7f13\u5b58",level:4},{value:"\u5de5\u4f5c\u6d41\u7a0b",id:"\u5de5\u4f5c\u6d41\u7a0b",level:5},{value:"\u7f13\u5b58\u914d\u7f6e",id:"\u7f13\u5b58\u914d\u7f6e",level:5},{value:"\u7f13\u5b58\u5931\u6548",id:"\u7f13\u5b58\u5931\u6548",level:5},{value:"\u5206\u6790\u5668",id:"\u5206\u6790\u5668",level:4},{value:"\u4f18\u5316\u5668",id:"\u4f18\u5316\u5668",level:4},{value:"\u6210\u672c\u5206\u6790",id:"\u6210\u672c\u5206\u6790",level:5},{value:"\u7edf\u8ba1\u6570\u636e",id:"\u7edf\u8ba1\u6570\u636e",level:5},{value:"\u9519\u9009\u7d22\u5f15",id:"\u9519\u9009\u7d22\u5f15",level:5},{value:"\u6267\u884c\u5668",id:"\u6267\u884c\u5668",level:4},{value:"\u5f15\u64ce\u5c42",id:"\u5f15\u64ce\u5c42",level:4},{value:"\u7ec8\u6b62\u6d41\u7a0b",id:"\u7ec8\u6b62\u6d41\u7a0b",level:3},{value:"\u7ec8\u6b62\u8bed\u53e5",id:"\u7ec8\u6b62\u8bed\u53e5",level:4},{value:"\u7ec8\u6b62\u8fde\u63a5",id:"\u7ec8\u6b62\u8fde\u63a5",level:4},{value:"\u5e38\u7528\u5de5\u5177",id:"\u5e38\u7528\u5de5\u5177",level:3},{value:"mysql",id:"mysql-2",level:4},{value:"admin",id:"admin",level:4},{value:"binlog",id:"binlog",level:4},{value:"dump",id:"dump",level:4},{value:"\u547d\u4ee4\u4ecb\u7ecd",id:"\u547d\u4ee4\u4ecb\u7ecd",level:5},{value:"\u6570\u636e\u5907\u4efd",id:"\u6570\u636e\u5907\u4efd",level:5},{value:"import",id:"import",level:4},{value:"show",id:"show",level:4},{value:"\u5355\u8868\u64cd\u4f5c",id:"\u5355\u8868\u64cd\u4f5c",level:2},{value:"SQL",id:"sql",level:3},{value:"DDL",id:"ddl",level:3},{value:"\u6570\u636e\u5e93",id:"\u6570\u636e\u5e93-1",level:4},{value:"\u6570\u636e\u8868",id:"\u6570\u636e\u8868",level:4},{value:"DML",id:"dml",level:3},{value:"INSERT",id:"insert",level:4},{value:"UPDATE",id:"update",level:4},{value:"DELETE",id:"delete",level:4},{value:"DQL",id:"dql",level:3},{value:"\u67e5\u8be2\u8bed\u6cd5",id:"\u67e5\u8be2\u8bed\u6cd5",level:4},{value:"\u67e5\u8be2\u5168\u90e8",id:"\u67e5\u8be2\u5168\u90e8",level:4},{value:"\u6761\u4ef6\u67e5\u8be2",id:"\u6761\u4ef6\u67e5\u8be2",level:4},{value:"\u51fd\u6570\u67e5\u8be2",id:"\u51fd\u6570\u67e5\u8be2",level:4},{value:"\u805a\u5408\u51fd\u6570",id:"\u805a\u5408\u51fd\u6570",level:5},{value:"\u6587\u672c\u51fd\u6570",id:"\u6587\u672c\u51fd\u6570",level:5},{value:"\u6570\u5b57\u51fd\u6570",id:"\u6570\u5b57\u51fd\u6570",level:5},{value:"\u65e5\u671f\u51fd\u6570",id:"\u65e5\u671f\u51fd\u6570",level:5},{value:"\u6b63\u5219\u67e5\u8be2",id:"\u6b63\u5219\u67e5\u8be2",level:4},{value:"\u6392\u5e8f\u67e5\u8be2",id:"\u6392\u5e8f\u67e5\u8be2",level:4},{value:"\u5206\u7ec4\u67e5\u8be2",id:"\u5206\u7ec4\u67e5\u8be2",level:4},{value:"\u5206\u9875\u67e5\u8be2",id:"\u5206\u9875\u67e5\u8be2",level:4},{value:"\u591a\u8868\u64cd\u4f5c",id:"\u591a\u8868\u64cd\u4f5c",level:2},{value:"\u7ea6\u675f\u5206\u7c7b",id:"\u7ea6\u675f\u5206\u7c7b",level:3},{value:"\u7ea6\u675f\u4ecb\u7ecd",id:"\u7ea6\u675f\u4ecb\u7ecd",level:4},{value:"\u4e3b\u952e\u7ea6\u675f",id:"\u4e3b\u952e\u7ea6\u675f",level:4},{value:"\u4e3b\u952e\u81ea\u589e",id:"\u4e3b\u952e\u81ea\u589e",level:4},{value:"\u552f\u4e00\u7ea6\u675f",id:"\u552f\u4e00\u7ea6\u675f",level:4},{value:"\u975e\u7a7a\u7ea6\u675f",id:"\u975e\u7a7a\u7ea6\u675f",level:4},{value:"\u5916\u952e\u7ea6\u675f",id:"\u5916\u952e\u7ea6\u675f",level:4},{value:"\u5916\u952e\u7ea7\u8054",id:"\u5916\u952e\u7ea7\u8054",level:4},{value:"\u591a\u8868\u8bbe\u8ba1",id:"\u591a\u8868\u8bbe\u8ba1",level:3},{value:"\u4e00\u5bf9\u4e00",id:"\u4e00\u5bf9\u4e00",level:4},{value:"\u4e00\u5bf9\u591a",id:"\u4e00\u5bf9\u591a",level:4},{value:"\u591a\u5bf9\u591a",id:"\u591a\u5bf9\u591a",level:4},{value:"\u8fde\u63a5\u67e5\u8be2",id:"\u8fde\u63a5\u67e5\u8be2",level:3},{value:"\u5185\u5916\u8fde\u63a5",id:"\u5185\u5916\u8fde\u63a5",level:4},{value:"\u5185\u8fde\u63a5",id:"\u5185\u8fde\u63a5",level:5},{value:"\u5916\u8fde\u63a5",id:"\u5916\u8fde\u63a5",level:5},{value:"\u5173\u8054\u67e5\u8be2",id:"\u5173\u8054\u67e5\u8be2",level:4},{value:"\u8fde\u63a5\u539f\u7406",id:"\u8fde\u63a5\u539f\u7406",level:4},{value:"\u8fde\u63a5\u4f18\u5316",id:"\u8fde\u63a5\u4f18\u5316",level:4},{value:"BKA",id:"bka",level:5},{value:"BNL",id:"bnl",level:5},{value:"\u95ee\u9898",id:"\u95ee\u9898",level:6},{value:"\u4f18\u5316",id:"\u4f18\u5316",level:6},{value:"\u5d4c\u5957\u67e5\u8be2",id:"\u5d4c\u5957\u67e5\u8be2",level:3},{value:"\u67e5\u8be2\u5206\u7c7b",id:"\u67e5\u8be2\u5206\u7c7b",level:4},{value:"\u67e5\u8be2\u4f18\u5316",id:"\u67e5\u8be2\u4f18\u5316",level:4},{value:"\u8054\u5408\u67e5\u8be2",id:"\u8054\u5408\u67e5\u8be2",level:4},{value:"\u67e5\u8be2\u7ec3\u4e60",id:"\u67e5\u8be2\u7ec3\u4e60",level:3},{value:"\u9ad8\u7ea7\u7ed3\u6784",id:"\u9ad8\u7ea7\u7ed3\u6784",level:2},{value:"\u89c6\u56fe",id:"\u89c6\u56fe",level:3},{value:"\u57fa\u672c\u4ecb\u7ecd",id:"\u57fa\u672c\u4ecb\u7ecd",level:4},{value:"\u89c6\u56fe\u521b\u5efa",id:"\u89c6\u56fe\u521b\u5efa",level:4},{value:"\u89c6\u56fe\u67e5\u8be2",id:"\u89c6\u56fe\u67e5\u8be2",level:4},{value:"\u89c6\u56fe\u4fee\u6539",id:"\u89c6\u56fe\u4fee\u6539",level:4},{value:"\u89c6\u56fe\u5220\u9664",id:"\u89c6\u56fe\u5220\u9664",level:4},{value:"\u5b58\u50a8\u8fc7\u7a0b",id:"\u5b58\u50a8\u8fc7\u7a0b",level:3},{value:"\u57fa\u672c\u4ecb\u7ecd",id:"\u57fa\u672c\u4ecb\u7ecd-1",level:4},{value:"\u57fa\u672c\u64cd\u4f5c",id:"\u57fa\u672c\u64cd\u4f5c",level:4},{value:"\u5b58\u50a8\u8bed\u6cd5",id:"\u5b58\u50a8\u8bed\u6cd5",level:4},{value:"\u53d8\u91cf\u4f7f\u7528",id:"\u53d8\u91cf\u4f7f\u7528",level:5},{value:"IF\u8bed\u53e5",id:"if\u8bed\u53e5",level:5},{value:"\u53c2\u6570\u4f20\u9012",id:"\u53c2\u6570\u4f20\u9012",level:5},{value:"CASE",id:"case",level:5},{value:"WHILE",id:"while",level:5},{value:"REPEAT",id:"repeat",level:5},{value:"LOOP",id:"loop",level:5},{value:"\u6e38\u6807",id:"\u6e38\u6807",level:5},{value:"\u5b58\u50a8\u51fd\u6570",id:"\u5b58\u50a8\u51fd\u6570",level:4},{value:"\u89e6\u53d1\u5668",id:"\u89e6\u53d1\u5668",level:3},{value:"\u57fa\u672c\u4ecb\u7ecd",id:"\u57fa\u672c\u4ecb\u7ecd-2",level:4},{value:"\u57fa\u672c\u64cd\u4f5c",id:"\u57fa\u672c\u64cd\u4f5c-1",level:4},{value:"\u89e6\u53d1\u6f14\u793a",id:"\u89e6\u53d1\u6f14\u793a",level:4},{value:"\u5b58\u50a8\u5f15\u64ce",id:"\u5b58\u50a8\u5f15\u64ce",level:2},{value:"\u57fa\u672c\u4ecb\u7ecd",id:"\u57fa\u672c\u4ecb\u7ecd-3",level:3},{value:"\u5f15\u64ce\u5bf9\u6bd4",id:"\u5f15\u64ce\u5bf9\u6bd4",level:3},{value:"\u5f15\u64ce\u64cd\u4f5c",id:"\u5f15\u64ce\u64cd\u4f5c",level:3},{value:"\u7d22\u5f15\u673a\u5236",id:"\u7d22\u5f15\u673a\u5236",level:2},{value:"\u7d22\u5f15\u4ecb\u7ecd",id:"\u7d22\u5f15\u4ecb\u7ecd",level:3},{value:"\u57fa\u672c\u4ecb\u7ecd",id:"\u57fa\u672c\u4ecb\u7ecd-4",level:4},{value:"\u7d22\u5f15\u5206\u7c7b",id:"\u7d22\u5f15\u5206\u7c7b",level:4},{value:"\u7d22\u5f15\u64cd\u4f5c",id:"\u7d22\u5f15\u64cd\u4f5c",level:3},{value:"\u805a\u7c07\u7d22\u5f15",id:"\u805a\u7c07\u7d22\u5f15",level:3},{value:"\u7d22\u5f15\u5bf9\u6bd4",id:"\u7d22\u5f15\u5bf9\u6bd4",level:4},{value:"Innodb",id:"innodb",level:4},{value:"\u805a\u7c07\u7d22\u5f15",id:"\u805a\u7c07\u7d22\u5f15-1",level:5},{value:"\u8f85\u52a9\u7d22\u5f15",id:"\u8f85\u52a9\u7d22\u5f15",level:5},{value:"\u7d22\u5f15\u5b9e\u73b0",id:"\u7d22\u5f15\u5b9e\u73b0",level:5},{value:"MyISAM",id:"myisam",level:4},{value:"\u975e\u805a\u7c07",id:"\u975e\u805a\u7c07",level:5},{value:"\u7d22\u5f15\u5b9e\u73b0",id:"\u7d22\u5f15\u5b9e\u73b0-1",level:5},{value:"\u7d22\u5f15\u7ed3\u6784",id:"\u7d22\u5f15\u7ed3\u6784",level:3},{value:"\u6570\u636e\u9875",id:"\u6570\u636e\u9875",level:4},{value:"BTree",id:"btree",level:4},{value:"B+Tree",id:"btree-1",level:4},{value:"\u6570\u636e\u7ed3\u6784",id:"\u6570\u636e\u7ed3\u6784",level:5},{value:"\u4f18\u5316\u7ed3\u6784",id:"\u4f18\u5316\u7ed3\u6784",level:5},{value:"\u7d22\u5f15\u7ef4\u62a4",id:"\u7d22\u5f15\u7ef4\u62a4",level:5},{value:"\u8bbe\u8ba1\u539f\u5219",id:"\u8bbe\u8ba1\u539f\u5219",level:3},{value:"\u7d22\u5f15\u4f18\u5316",id:"\u7d22\u5f15\u4f18\u5316",level:3},{value:"\u8986\u76d6\u7d22\u5f15",id:"\u8986\u76d6\u7d22\u5f15",level:4},{value:"\u7d22\u5f15\u4e0b\u63a8",id:"\u7d22\u5f15\u4e0b\u63a8",level:4},{value:"\u524d\u7f00\u7d22\u5f15",id:"\u524d\u7f00\u7d22\u5f15",level:4},{value:"\u7d22\u5f15\u5408\u5e76",id:"\u7d22\u5f15\u5408\u5e76",level:4},{value:"\u7cfb\u7edf\u4f18\u5316",id:"\u7cfb\u7edf\u4f18\u5316",level:2},{value:"\u8868\u4f18\u5316",id:"\u8868\u4f18\u5316",level:3},{value:"\u5206\u533a\u8868",id:"\u5206\u533a\u8868",level:4},{value:"\u57fa\u672c\u4ecb\u7ecd",id:"\u57fa\u672c\u4ecb\u7ecd-5",level:5},{value:"\u5206\u533a\u7b56\u7565",id:"\u5206\u533a\u7b56\u7565",level:5},{value:"Server \u5c42",id:"server-\u5c42",level:5},{value:"\u5e94\u7528\u573a\u666f",id:"\u5e94\u7528\u573a\u666f",level:5},{value:"\u4e34\u65f6\u8868",id:"\u4e34\u65f6\u8868",level:4},{value:"\u57fa\u672c\u4ecb\u7ecd",id:"\u57fa\u672c\u4ecb\u7ecd-6",level:5},{value:"\u91cd\u540d\u539f\u7406",id:"\u91cd\u540d\u539f\u7406",level:5},{value:"\u4e3b\u5907\u590d\u5236",id:"\u4e3b\u5907\u590d\u5236",level:5},{value:"\u8de8\u5e93\u67e5\u8be2",id:"\u8de8\u5e93\u67e5\u8be2",level:5},{value:"\u4f18\u5316\u6b65\u9aa4",id:"\u4f18\u5316\u6b65\u9aa4",level:3},{value:"\u6267\u884c\u9891\u7387",id:"\u6267\u884c\u9891\u7387",level:4},{value:"\u5b9a\u4f4d\u4f4e\u6548",id:"\u5b9a\u4f4d\u4f4e\u6548",level:4},{value:"EXPLAIN",id:"explain",level:4},{value:"\u6267\u884c\u8ba1\u5212",id:"\u6267\u884c\u8ba1\u5212",level:5},{value:"id",id:"id",level:5},{value:"select",id:"select",level:5},{value:"type",id:"type",level:5},{value:"key",id:"key",level:5},{value:"Extra",id:"extra",level:5},{value:"PROFILES",id:"profiles",level:4},{value:"TRACE",id:"trace",level:4},{value:"\u7d22\u5f15\u4f18\u5316",id:"\u7d22\u5f15\u4f18\u5316-1",level:3},{value:"\u521b\u5efa\u7d22\u5f15",id:"\u521b\u5efa\u7d22\u5f15",level:4},{value:"\u907f\u514d\u5931\u6548",id:"\u907f\u514d\u5931\u6548",level:4},{value:"\u8bed\u53e5\u9519\u8bef",id:"\u8bed\u53e5\u9519\u8bef",level:5},{value:"\u7cfb\u7edf\u4f18\u5316",id:"\u7cfb\u7edf\u4f18\u5316-1",level:5},{value:"\u5e95\u5c42\u539f\u7406",id:"\u5e95\u5c42\u539f\u7406",level:4},{value:"\u67e5\u770b\u7d22\u5f15",id:"\u67e5\u770b\u7d22\u5f15",level:4},{value:"SQL \u4f18\u5316",id:"sql-\u4f18\u5316",level:3},{value:"\u81ea\u589e\u4e3b\u952e",id:"\u81ea\u589e\u4e3b\u952e",level:4},{value:"\u81ea\u589e\u673a\u5236",id:"\u81ea\u589e\u673a\u5236",level:5},{value:"\u81ea\u589e ID",id:"\u81ea\u589e-id",level:5},{value:"\u8986\u76d6\u7d22\u5f15",id:"\u8986\u76d6\u7d22\u5f15-1",level:4},{value:"\u51cf\u5c11\u8bbf\u95ee",id:"\u51cf\u5c11\u8bbf\u95ee",level:4},{value:"\u6570\u636e\u63d2\u5165",id:"\u6570\u636e\u63d2\u5165",level:4},{value:"\u5206\u7ec4\u6392\u5e8f",id:"\u5206\u7ec4\u6392\u5e8f",level:4},{value:"ORDER",id:"order",level:5},{value:"GROUP",id:"group",level:5},{value:"\u8054\u5408\u67e5\u8be2",id:"\u8054\u5408\u67e5\u8be2-1",level:4},{value:"\u5d4c\u5957\u67e5\u8be2",id:"\u5d4c\u5957\u67e5\u8be2-1",level:4},{value:"\u5206\u9875\u67e5\u8be2",id:"\u5206\u9875\u67e5\u8be2-1",level:4},{value:"\u4f7f\u7528\u63d0\u793a",id:"\u4f7f\u7528\u63d0\u793a",level:4},{value:"\u7edf\u8ba1\u8ba1\u6570",id:"\u7edf\u8ba1\u8ba1\u6570",level:4},{value:"\u7f13\u51b2\u4f18\u5316",id:"\u7f13\u51b2\u4f18\u5316",level:3},{value:"\u4f18\u5316\u539f\u5219",id:"\u4f18\u5316\u539f\u5219",level:4},{value:"\u7f13\u51b2\u5185\u5b58",id:"\u7f13\u51b2\u5185\u5b58",level:4},{value:"\u5185\u5b58\u7ba1\u7406",id:"\u5185\u5b58\u7ba1\u7406",level:4},{value:"Free \u94fe\u8868",id:"free-\u94fe\u8868",level:5},{value:"Flush \u94fe\u8868",id:"flush-\u94fe\u8868",level:5},{value:"LRU \u94fe\u8868",id:"lru-\u94fe\u8868",level:5},{value:"\u53c2\u6570\u4f18\u5316",id:"\u53c2\u6570\u4f18\u5316",level:4},{value:"\u5185\u5b58\u4f18\u5316",id:"\u5185\u5b58\u4f18\u5316",level:3},{value:"Change",id:"change",level:4},{value:"Net",id:"net",level:4},{value:"Read",id:"read",level:4},{value:"Key",id:"key-1",level:4},{value:"\u5b58\u50a8\u4f18\u5316",id:"\u5b58\u50a8\u4f18\u5316",level:3},{value:"\u6570\u636e\u5b58\u50a8",id:"\u6570\u636e\u5b58\u50a8",level:4},{value:"\u6570\u636e\u5220\u9664",id:"\u6570\u636e\u5220\u9664",level:4},{value:"\u91cd\u5efa\u6570\u636e",id:"\u91cd\u5efa\u6570\u636e",level:4},{value:"\u539f\u5730\u7f6e\u6362",id:"\u539f\u5730\u7f6e\u6362",level:4},{value:"\u5e76\u53d1\u4f18\u5316",id:"\u5e76\u53d1\u4f18\u5316",level:3},{value:"\u4e8b\u52a1\u673a\u5236",id:"\u4e8b\u52a1\u673a\u5236",level:2},{value:"\u57fa\u672c\u4ecb\u7ecd",id:"\u57fa\u672c\u4ecb\u7ecd-7",level:3},{value:"\u4e8b\u52a1\u7ba1\u7406",id:"\u4e8b\u52a1\u7ba1\u7406",level:3},{value:"\u57fa\u672c\u64cd\u4f5c",id:"\u57fa\u672c\u64cd\u4f5c-2",level:4},{value:"\u63d0\u4ea4\u65b9\u5f0f",id:"\u63d0\u4ea4\u65b9\u5f0f",level:4},{value:"\u4e8b\u52a1 ID",id:"\u4e8b\u52a1-id",level:4},{value:"\u9694\u79bb\u7ea7\u522b",id:"\u9694\u79bb\u7ea7\u522b",level:3},{value:"\u56db\u79cd\u7ea7\u522b",id:"\u56db\u79cd\u7ea7\u522b",level:4},{value:"\u52a0\u9501\u5206\u6790",id:"\u52a0\u9501\u5206\u6790",level:4},{value:"\u539f\u5b50\u7279\u6027",id:"\u539f\u5b50\u7279\u6027",level:3},{value:"\u5b9e\u73b0\u65b9\u5f0f",id:"\u5b9e\u73b0\u65b9\u5f0f",level:4},{value:"DML \u89e3\u6790",id:"dml-\u89e3\u6790",level:4},{value:"INSERT",id:"insert-1",level:5},{value:"DELETE",id:"delete-1",level:5},{value:"UPDATE",id:"update-1",level:5},{value:"\u56de\u6eda\u65e5\u5fd7",id:"\u56de\u6eda\u65e5\u5fd7",level:4},{value:"\u9694\u79bb\u7279\u6027",id:"\u9694\u79bb\u7279\u6027",level:3},{value:"\u5b9e\u73b0\u65b9\u5f0f",id:"\u5b9e\u73b0\u65b9\u5f0f-1",level:4},{value:"\u5e76\u53d1\u63a7\u5236",id:"\u5e76\u53d1\u63a7\u5236",level:4},{value:"\u5b9e\u73b0\u539f\u7406",id:"\u5b9e\u73b0\u539f\u7406",level:4},{value:"\u9690\u85cf\u5b57\u6bb5",id:"\u9690\u85cf\u5b57\u6bb5",level:5},{value:"\u7248\u672c\u94fe",id:"\u7248\u672c\u94fe",level:5},{value:"\u8bfb\u89c6\u56fe",id:"\u8bfb\u89c6\u56fe",level:5},{value:"\u5de5\u4f5c\u6d41\u7a0b",id:"\u5de5\u4f5c\u6d41\u7a0b-1",level:5},{value:"\u4e8c\u7ea7\u7d22\u5f15",id:"\u4e8c\u7ea7\u7d22\u5f15",level:5},{value:"RC RR",id:"rc-rr",level:4},{value:"\u6301\u4e45\u7279\u6027",id:"\u6301\u4e45\u7279\u6027",level:3},{value:"\u5b9e\u73b0\u65b9\u5f0f",id:"\u5b9e\u73b0\u65b9\u5f0f-2",level:4},{value:"\u91cd\u505a\u65e5\u5fd7",id:"\u91cd\u505a\u65e5\u5fd7",level:4},{value:"\u65e5\u5fd7\u7f13\u51b2",id:"\u65e5\u5fd7\u7f13\u51b2",level:5},{value:"\u65e5\u5fd7\u5237\u76d8",id:"\u65e5\u5fd7\u5237\u76d8",level:5},{value:"\u65e5\u5fd7\u5e8f\u53f7",id:"\u65e5\u5fd7\u5e8f\u53f7",level:5},{value:"\u5d29\u6e83\u6062\u590d",id:"\u5d29\u6e83\u6062\u590d",level:5},{value:"\u5de5\u4f5c\u6d41\u7a0b",id:"\u5de5\u4f5c\u6d41\u7a0b-2",level:4},{value:"\u65e5\u5fd7\u5bf9\u6bd4",id:"\u65e5\u5fd7\u5bf9\u6bd4",level:5},{value:"\u66f4\u65b0\u8bb0\u5f55",id:"\u66f4\u65b0\u8bb0\u5f55",level:5},{value:"\u4e24\u6bb5\u63d0\u4ea4",id:"\u4e24\u6bb5\u63d0\u4ea4",level:5},{value:"\u6570\u636e\u6062\u590d",id:"\u6570\u636e\u6062\u590d",level:5},{value:"\u5237\u810f\u4f18\u5316",id:"\u5237\u810f\u4f18\u5316",level:4},{value:"\u4e00\u81f4\u7279\u6027",id:"\u4e00\u81f4\u7279\u6027",level:3},{value:"\u9501\u673a\u5236",id:"\u9501\u673a\u5236",level:2},{value:"\u57fa\u672c\u4ecb\u7ecd",id:"\u57fa\u672c\u4ecb\u7ecd-8",level:3},{value:"\u5185\u5b58\u7ed3\u6784",id:"\u5185\u5b58\u7ed3\u6784",level:3},{value:"Server",id:"server",level:3},{value:"MyISAM",id:"myisam-1",level:3},{value:"\u8868\u7ea7\u9501",id:"\u8868\u7ea7\u9501",level:4},{value:"\u9501\u64cd\u4f5c",id:"\u9501\u64cd\u4f5c",level:4},{value:"\u8bfb\u9501",id:"\u8bfb\u9501",level:5},{value:"\u5199\u9501",id:"\u5199\u9501",level:5},{value:"\u9501\u72b6\u6001",id:"\u9501\u72b6\u6001",level:4},{value:"InnoDB",id:"innodb-1",level:3},{value:"\u884c\u7ea7\u9501",id:"\u884c\u7ea7\u9501",level:4},{value:"\u8bb0\u5f55\u9501",id:"\u8bb0\u5f55\u9501",level:5},{value:"\u9501\u64cd\u4f5c",id:"\u9501\u64cd\u4f5c-1",level:5},{value:"\u9501\u5206\u7c7b",id:"\u9501\u5206\u7c7b",level:4},{value:"\u95f4\u9699\u9501",id:"\u95f4\u9699\u9501",level:5},{value:"\u610f\u5411\u9501",id:"\u610f\u5411\u9501",level:5},{value:"\u81ea\u589e\u9501",id:"\u81ea\u589e\u9501",level:5},{value:"\u9690\u5f0f\u9501",id:"\u9690\u5f0f\u9501",level:5},{value:"\u9501\u4f18\u5316",id:"\u9501\u4f18\u5316",level:4},{value:"\u4f18\u5316\u9501",id:"\u4f18\u5316\u9501",level:5},{value:"\u9501\u5347\u7ea7",id:"\u9501\u5347\u7ea7",level:5},{value:"\u6b7b\u9501",id:"\u6b7b\u9501",level:5},{value:"\u9501\u72b6\u6001",id:"\u9501\u72b6\u6001-1",level:4},{value:"\u4e50\u89c2\u9501",id:"\u4e50\u89c2\u9501",level:3},{value:"\u4e3b\u4ece",id:"\u4e3b\u4ece",level:2},{value:"\u57fa\u672c\u4ecb\u7ecd",id:"\u57fa\u672c\u4ecb\u7ecd-9",level:3},{value:"\u4e3b\u4ece\u590d\u5236",id:"\u4e3b\u4ece\u590d\u5236",level:3},{value:"\u4e3b\u4ece\u7ed3\u6784",id:"\u4e3b\u4ece\u7ed3\u6784",level:4},{value:"\u4e3b\u4e3b\u7ed3\u6784",id:"\u4e3b\u4e3b\u7ed3\u6784",level:4},{value:"\u4e3b\u4ece\u5ef6\u8fdf",id:"\u4e3b\u4ece\u5ef6\u8fdf",level:3},{value:"\u5ef6\u8fdf\u539f\u56e0",id:"\u5ef6\u8fdf\u539f\u56e0",level:4},{value:"\u5e76\u884c\u590d\u5236",id:"\u5e76\u884c\u590d\u5236",level:4},{value:"MySQL5.6",id:"mysql56",level:5},{value:"MySQL5.7",id:"mysql57",level:5},{value:"\u8bfb\u5199\u5206\u79bb",id:"\u8bfb\u5199\u5206\u79bb",level:3},{value:"\u8bfb\u5199\u5ef6\u8fdf",id:"\u8bfb\u5199\u5ef6\u8fdf",level:4},{value:"\u786e\u4fdd\u673a\u5236",id:"\u786e\u4fdd\u673a\u5236",level:4},{value:"\u65e0\u5ef6\u8fdf",id:"\u65e0\u5ef6\u8fdf",level:5},{value:"\u534a\u540c\u6b65",id:"\u534a\u540c\u6b65",level:5},{value:"\u7b49\u4f4d\u70b9",id:"\u7b49\u4f4d\u70b9",level:5},{value:"\u7b49GTID",id:"\u7b49gtid",level:5},{value:"\u8d1f\u8f7d\u5747\u8861",id:"\u8d1f\u8f7d\u5747\u8861",level:4},{value:"\u4e3b\u4ece\u642d\u5efa",id:"\u4e3b\u4ece\u642d\u5efa",level:3},{value:"master",id:"master",level:4},{value:"slave",id:"slave",level:4},{value:"\u9a8c\u8bc1",id:"\u9a8c\u8bc1",level:4},{value:"\u4e3b\u4ece\u5207\u6362",id:"\u4e3b\u4ece\u5207\u6362",level:3},{value:"\u6b63\u5e38\u5207\u6362",id:"\u6b63\u5e38\u5207\u6362",level:4},{value:"\u5065\u5eb7\u68c0\u6d4b",id:"\u5065\u5eb7\u68c0\u6d4b",level:4},{value:"\u57fa\u4e8e\u4f4d\u70b9",id:"\u57fa\u4e8e\u4f4d\u70b9",level:4},{value:"\u57fa\u4e8eGTID",id:"\u57fa\u4e8egtid",level:4},{value:"GTID",id:"gtid",level:5},{value:"\u5207\u6362",id:"\u5207\u6362",level:5},{value:"\u65e5\u5fd7",id:"\u65e5\u5fd7",level:2},{value:"\u65e5\u5fd7\u5206\u7c7b",id:"\u65e5\u5fd7\u5206\u7c7b",level:3},{value:"\u9519\u8bef\u65e5\u5fd7",id:"\u9519\u8bef\u65e5\u5fd7",level:3},{value:"\u5f52\u6863\u65e5\u5fd7",id:"\u5f52\u6863\u65e5\u5fd7",level:3},{value:"\u57fa\u672c\u4ecb\u7ecd",id:"\u57fa\u672c\u4ecb\u7ecd-10",level:4},{value:"\u65e5\u5fd7\u5237\u76d8",id:"\u65e5\u5fd7\u5237\u76d8-1",level:4},{value:"\u65e5\u5fd7\u8bfb\u53d6",id:"\u65e5\u5fd7\u8bfb\u53d6",level:4},{value:"\u65e5\u5fd7\u5220\u9664",id:"\u65e5\u5fd7\u5220\u9664",level:4},{value:"\u6570\u636e\u6062\u590d",id:"\u6570\u636e\u6062\u590d-1",level:4},{value:"\u67e5\u8be2\u65e5\u5fd7",id:"\u67e5\u8be2\u65e5\u5fd7",level:3},{value:"\u6162\u65e5\u5fd7",id:"\u6162\u65e5\u5fd7",level:3},{value:"\u8303\u5f0f",id:"\u8303\u5f0f",level:2},{value:"\u7b2c\u4e00\u8303\u5f0f",id:"\u7b2c\u4e00\u8303\u5f0f",level:3},{value:"\u7b2c\u4e8c\u8303\u5f0f",id:"\u7b2c\u4e8c\u8303\u5f0f",level:3},{value:"\u7b2c\u4e09\u8303\u5f0f",id:"\u7b2c\u4e09\u8303\u5f0f",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:3},{value:"NoSQL",id:"nosql",level:2},{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:3},{value:"Redis",id:"redis-1",level:3},{value:"\u5b89\u88c5\u542f\u52a8",id:"\u5b89\u88c5\u542f\u52a8",level:3},{value:"\u57fa\u672c\u914d\u7f6e",id:"\u57fa\u672c\u914d\u7f6e",level:3},{value:"\u7cfb\u7edf\u76ee\u5f55",id:"\u7cfb\u7edf\u76ee\u5f55",level:4},{value:"\u670d\u52a1\u5668",id:"\u670d\u52a1\u5668",level:4},{value:"\u5ba2\u6237\u7aef",id:"\u5ba2\u6237\u7aef",level:4},{value:"\u65e5\u5fd7\u914d\u7f6e",id:"\u65e5\u5fd7\u914d\u7f6e",level:4},{value:"\u57fa\u672c\u6307\u4ee4",id:"\u57fa\u672c\u6307\u4ee4",level:4},{value:"\u6570\u636e\u5e93",id:"\u6570\u636e\u5e93-2",level:2},{value:"\u670d\u52a1\u5668",id:"\u670d\u52a1\u5668-1",level:3},{value:"\u952e\u7a7a\u95f4",id:"\u952e\u7a7a\u95f4",level:3},{value:"key space",id:"key-space",level:4},{value:"\u8bfb\u5199\u6307\u4ee4",id:"\u8bfb\u5199\u6307\u4ee4",level:4},{value:"\u65f6\u6548\u8bbe\u7f6e",id:"\u65f6\u6548\u8bbe\u7f6e",level:4},{value:"\u65f6\u6548\u72b6\u6001",id:"\u65f6\u6548\u72b6\u6001",level:4},{value:"\u8fc7\u671f\u5220\u9664",id:"\u8fc7\u671f\u5220\u9664",level:3},{value:"\u5220\u9664\u7b56\u7565",id:"\u5220\u9664\u7b56\u7565",level:4},{value:"\u5b9a\u65f6\u5220\u9664",id:"\u5b9a\u65f6\u5220\u9664",level:4},{value:"\u60f0\u6027\u5220\u9664",id:"\u60f0\u6027\u5220\u9664",level:4},{value:"\u5b9a\u671f\u5220\u9664",id:"\u5b9a\u671f\u5220\u9664",level:4},{value:"\u6570\u636e\u6dd8\u6c70",id:"\u6570\u636e\u6dd8\u6c70",level:3},{value:"\u9010\u51fa\u7b97\u6cd5",id:"\u9010\u51fa\u7b97\u6cd5",level:4},{value:"\u7b56\u7565\u914d\u7f6e",id:"\u7b56\u7565\u914d\u7f6e",level:4},{value:"\u6392\u5e8f\u673a\u5236",id:"\u6392\u5e8f\u673a\u5236",level:3},{value:"\u57fa\u672c\u4ecb\u7ecd",id:"\u57fa\u672c\u4ecb\u7ecd-11",level:4},{value:"SORT",id:"sort",level:4},{value:"BY",id:"by",level:4},{value:"LIMIT",id:"limit",level:4},{value:"GET",id:"get",level:4},{value:"STORE",id:"store",level:4},{value:"\u6267\u884c\u987a\u5e8f",id:"\u6267\u884c\u987a\u5e8f",level:4},{value:"\u901a\u77e5\u673a\u5236",id:"\u901a\u77e5\u673a\u5236",level:3},{value:"\u4f53\u7cfb\u67b6\u6784",id:"\u4f53\u7cfb\u67b6\u6784-1",level:2},{value:"\u4e8b\u4ef6\u9a71\u52a8",id:"\u4e8b\u4ef6\u9a71\u52a8",level:3},{value:"\u57fa\u672c\u4ecb\u7ecd",id:"\u57fa\u672c\u4ecb\u7ecd-12",level:4},{value:"\u6587\u4ef6\u4e8b\u4ef6",id:"\u6587\u4ef6\u4e8b\u4ef6",level:4},{value:"\u57fa\u672c\u7ec4\u6210",id:"\u57fa\u672c\u7ec4\u6210",level:5},{value:"\u591a\u8def\u590d\u7528",id:"\u591a\u8def\u590d\u7528",level:5},{value:"\u5904\u7406\u5668",id:"\u5904\u7406\u5668",level:5},{value:"\u65f6\u95f4\u4e8b\u4ef6",id:"\u65f6\u95f4\u4e8b\u4ef6",level:4},{value:"\u4e8b\u4ef6\u8c03\u5ea6",id:"\u4e8b\u4ef6\u8c03\u5ea6",level:4},{value:"\u591a\u7ebf\u7a0b",id:"\u591a\u7ebf\u7a0b",level:4},{value:"\u5ba2\u6237\u7aef",id:"\u5ba2\u6237\u7aef-1",level:3},{value:"\u57fa\u672c\u4ecb\u7ecd",id:"\u57fa\u672c\u4ecb\u7ecd-13",level:4},{value:"\u6570\u636e\u7ed3\u6784",id:"\u6570\u636e\u7ed3\u6784-1",level:4},{value:"redisClient",id:"redisclient",level:5},{value:"\u5957\u63a5\u5b57",id:"\u5957\u63a5\u5b57",level:5},{value:"\u540d\u5b57",id:"\u540d\u5b57",level:5},{value:"\u6807\u5fd7",id:"\u6807\u5fd7",level:5},{value:"\u7f13\u51b2\u533a",id:"\u7f13\u51b2\u533a",level:5},{value:"\u547d\u4ee4",id:"\u547d\u4ee4",level:5},{value:"\u9a8c\u8bc1",id:"\u9a8c\u8bc1-1",level:5},{value:"\u65f6\u95f4",id:"\u65f6\u95f4",level:5},{value:"\u751f\u547d\u5468\u671f",id:"\u751f\u547d\u5468\u671f",level:4},{value:"\u521b\u5efa",id:"\u521b\u5efa",level:5},{value:"\u5173\u95ed",id:"\u5173\u95ed",level:5},{value:"\u670d\u52a1\u5668",id:"\u670d\u52a1\u5668-2",level:3},{value:"\u6267\u884c\u6d41\u7a0b",id:"\u6267\u884c\u6d41\u7a0b-1",level:4},{value:"\u547d\u4ee4\u8bf7\u6c42",id:"\u547d\u4ee4\u8bf7\u6c42",level:5},{value:"\u547d\u4ee4\u6267\u884c",id:"\u547d\u4ee4\u6267\u884c",level:5},{value:"Command",id:"command",level:5},{value:"serverCron",id:"servercron",level:4},{value:"\u57fa\u672c\u4ecb\u7ecd",id:"\u57fa\u672c\u4ecb\u7ecd-14",level:5},{value:"\u65f6\u95f4\u7f13\u5b58",id:"\u65f6\u95f4\u7f13\u5b58",level:5},{value:"LRU \u65f6\u949f",id:"lru-\u65f6\u949f",level:5},{value:"\u547d\u4ee4\u6b21\u6570",id:"\u547d\u4ee4\u6b21\u6570",level:5},{value:"\u5185\u5b58\u5cf0\u503c",id:"\u5185\u5b58\u5cf0\u503c",level:5},{value:"SIGTERM",id:"sigterm",level:5},{value:"\u7ba1\u7406\u8d44\u6e90",id:"\u7ba1\u7406\u8d44\u6e90",level:5},{value:"\u6301\u4e45\u72b6\u6001",id:"\u6301\u4e45\u72b6\u6001",level:5},{value:"\u5ef6\u8fdf\u6267\u884c",id:"\u5ef6\u8fdf\u6267\u884c",level:5},{value:"\u6267\u884c\u6b21\u6570",id:"\u6267\u884c\u6b21\u6570",level:5},{value:"\u7f13\u51b2\u9650\u5236",id:"\u7f13\u51b2\u9650\u5236",level:5},{value:"\u521d\u59cb\u5316",id:"\u521d\u59cb\u5316",level:4},{value:"\u521d\u59cb\u7ed3\u6784",id:"\u521d\u59cb\u7ed3\u6784",level:5},{value:"\u8fd8\u539f\u72b6\u6001",id:"\u8fd8\u539f\u72b6\u6001",level:5},{value:"\u9a71\u52a8\u5faa\u73af",id:"\u9a71\u52a8\u5faa\u73af",level:5},{value:"\u6162\u65e5\u5fd7",id:"\u6162\u65e5\u5fd7-1",level:3},{value:"\u57fa\u672c\u4ecb\u7ecd",id:"\u57fa\u672c\u4ecb\u7ecd-15",level:4},{value:"\u65e5\u5fd7\u4fdd\u5b58",id:"\u65e5\u5fd7\u4fdd\u5b58",level:4},{value:"\u6dfb\u52a0\u65e5\u5fd7",id:"\u6dfb\u52a0\u65e5\u5fd7",level:4},{value:"\u6570\u636e\u7ed3\u6784",id:"\u6570\u636e\u7ed3\u6784-2",level:2},{value:"\u5b57\u7b26\u4e32",id:"\u5b57\u7b26\u4e32",level:3},{value:"SDS",id:"sds",level:4},{value:"\u5bf9\u6bd4",id:"\u5bf9\u6bd4",level:4},{value:"\u5185\u5b58",id:"\u5185\u5b58",level:4},{value:"\u94fe\u8868",id:"\u94fe\u8868",level:3},{value:"\u5b57\u5178",id:"\u5b57\u5178",level:3},{value:"\u54c8\u5e0c\u8868",id:"\u54c8\u5e0c\u8868",level:4},{value:"\u5b57\u5178\u7ed3\u6784",id:"\u5b57\u5178\u7ed3\u6784",level:4},{value:"\u54c8\u5e0c\u51b2\u7a81",id:"\u54c8\u5e0c\u51b2\u7a81",level:4},{value:"\u8d1f\u8f7d\u56e0\u5b50",id:"\u8d1f\u8f7d\u56e0\u5b50",level:4},{value:"\u91cd\u65b0\u6563\u5217",id:"\u91cd\u65b0\u6563\u5217",level:4},{value:"\u8df3\u8dc3\u8868",id:"\u8df3\u8dc3\u8868",level:3},{value:"\u5e95\u5c42\u7ed3\u6784",id:"\u5e95\u5c42\u7ed3\u6784",level:4},{value:"\u5c5e\u6027\u5206\u6790",id:"\u5c5e\u6027\u5206\u6790",level:4},{value:"\u6574\u6570\u96c6\u5408",id:"\u6574\u6570\u96c6\u5408",level:3},{value:"\u5e95\u5c42\u7ed3\u6784",id:"\u5e95\u5c42\u7ed3\u6784-1",level:4},{value:"\u7c7b\u578b\u5347\u7ea7",id:"\u7c7b\u578b\u5347\u7ea7",level:4},{value:"\u538b\u7f29\u5217\u8868",id:"\u538b\u7f29\u5217\u8868",level:3},{value:"\u5e95\u5c42\u7ed3\u6784",id:"\u5e95\u5c42\u7ed3\u6784-2",level:4},{value:"\u5217\u8868\u8282\u70b9",id:"\u5217\u8868\u8282\u70b9",level:4},{value:"\u8fde\u9501\u66f4\u65b0",id:"\u8fde\u9501\u66f4\u65b0",level:4},{value:"\u6570\u636e\u7c7b\u578b",id:"\u6570\u636e\u7c7b\u578b",level:2},{value:"redisObj",id:"redisobj",level:3},{value:"\u5bf9\u8c61\u7cfb\u7edf",id:"\u5bf9\u8c61\u7cfb\u7edf",level:4},{value:"\u547d\u4ee4\u591a\u6001",id:"\u547d\u4ee4\u591a\u6001",level:4},{value:"\u5185\u5b58\u56de\u6536",id:"\u5185\u5b58\u56de\u6536",level:4},{value:"\u5bf9\u8c61\u5171\u4eab",id:"\u5bf9\u8c61\u5171\u4eab",level:4},{value:"\u7a7a\u8f6c\u65f6\u957f",id:"\u7a7a\u8f6c\u65f6\u957f",level:4},{value:"string",id:"string",level:3},{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb-1",level:4},{value:"\u64cd\u4f5c",id:"\u64cd\u4f5c",level:4},{value:"\u5b9e\u73b0",id:"\u5b9e\u73b0",level:4},{value:"\u5e94\u7528",id:"\u5e94\u7528",level:4},{value:"hash",id:"hash",level:3},{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb-2",level:4},{value:"\u64cd\u4f5c",id:"\u64cd\u4f5c-1",level:4},{value:"\u5b9e\u73b0",id:"\u5b9e\u73b0-1",level:4},{value:"\u5e94\u7528",id:"\u5e94\u7528-1",level:4},{value:"list",id:"list",level:3},{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb-3",level:4},{value:"\u64cd\u4f5c",id:"\u64cd\u4f5c-2",level:4},{value:"\u5b9e\u73b0",id:"\u5b9e\u73b0-2",level:4},{value:"\u5e94\u7528",id:"\u5e94\u7528-2",level:4},{value:"set",id:"set",level:3},{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb-4",level:4},{value:"\u64cd\u4f5c",id:"\u64cd\u4f5c-3",level:4},{value:"\u5b9e\u73b0",id:"\u5b9e\u73b0-3",level:4},{value:"\u5e94\u7528",id:"\u5e94\u7528-3",level:4},{value:"zset",id:"zset",level:3},{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb-5",level:4},{value:"\u64cd\u4f5c",id:"\u64cd\u4f5c-4",level:4},{value:"\u5b9e\u73b0",id:"\u5b9e\u73b0-4",level:4},{value:"\u5e94\u7528",id:"\u5e94\u7528-4",level:4},{value:"Bitmaps",id:"bitmaps",level:3},{value:"\u57fa\u672c\u64cd\u4f5c",id:"\u57fa\u672c\u64cd\u4f5c-3",level:4},{value:"\u547d\u4ee4\u5b9e\u73b0",id:"\u547d\u4ee4\u5b9e\u73b0",level:4},{value:"GETBIT",id:"getbit",level:5},{value:"SETBIT",id:"setbit",level:5},{value:"BITCOUNT",id:"bitcount",level:5},{value:"BITOP",id:"bitop",level:5},{value:"\u5e94\u7528\u573a\u666f",id:"\u5e94\u7528\u573a\u666f-1",level:4},{value:"Hyper",id:"hyper",level:3},{value:"GEO",id:"geo",level:3},{value:"\u6301\u4e45\u673a\u5236",id:"\u6301\u4e45\u673a\u5236",level:2},{value:"\u6982\u8ff0",id:"\u6982\u8ff0-1",level:3},{value:"RDB",id:"rdb",level:3},{value:"\u6587\u4ef6\u521b\u5efa",id:"\u6587\u4ef6\u521b\u5efa",level:4},{value:"SAVE",id:"save",level:5},{value:"BGSAVE",id:"bgsave",level:5},{value:"\u7279\u6b8a\u6307\u4ee4",id:"\u7279\u6b8a\u6307\u4ee4",level:5},{value:"\u6587\u4ef6\u8f7d\u5165",id:"\u6587\u4ef6\u8f7d\u5165",level:4},{value:"\u81ea\u52a8\u4fdd\u5b58",id:"\u81ea\u52a8\u4fdd\u5b58",level:4},{value:"\u914d\u7f6e\u6587\u4ef6",id:"\u914d\u7f6e\u6587\u4ef6",level:5},{value:"\u81ea\u52a8\u539f\u7406",id:"\u81ea\u52a8\u539f\u7406",level:5},{value:"\u6587\u4ef6\u7ed3\u6784",id:"\u6587\u4ef6\u7ed3\u6784",level:4},{value:"AOF",id:"aof",level:3},{value:"\u57fa\u672c\u6982\u8ff0",id:"\u57fa\u672c\u6982\u8ff0",level:4},{value:"\u6301\u4e45\u5b9e\u73b0",id:"\u6301\u4e45\u5b9e\u73b0",level:4},{value:"\u547d\u4ee4\u8ffd\u52a0",id:"\u547d\u4ee4\u8ffd\u52a0",level:5},{value:"\u6587\u4ef6\u5199\u5165",id:"\u6587\u4ef6\u5199\u5165",level:5},{value:"\u6587\u4ef6\u540c\u6b65",id:"\u6587\u4ef6\u540c\u6b65",level:5},{value:"\u6587\u4ef6\u8f7d\u5165",id:"\u6587\u4ef6\u8f7d\u5165-1",level:4},{value:"\u91cd\u5199\u5b9e\u73b0",id:"\u91cd\u5199\u5b9e\u73b0",level:4},{value:"\u91cd\u5199\u7b56\u7565",id:"\u91cd\u5199\u7b56\u7565",level:5},{value:"\u91cd\u5199\u539f\u7406",id:"\u91cd\u5199\u539f\u7406",level:5},{value:"\u81ea\u52a8\u91cd\u5199",id:"\u81ea\u52a8\u91cd\u5199",level:5},{value:"\u5bf9\u6bd4",id:"\u5bf9\u6bd4-1",level:3},{value:"fork",id:"fork",level:3},{value:"\u4ecb\u7ecd",id:"\u4ecb\u7ecd",level:4},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:4},{value:"\u5185\u5b58",id:"\u5185\u5b58-1",level:4},{value:"\u4e8b\u52a1\u673a\u5236",id:"\u4e8b\u52a1\u673a\u5236-1",level:2},{value:"\u4e8b\u52a1\u7279\u5f81",id:"\u4e8b\u52a1\u7279\u5f81",level:3},{value:"\u5de5\u4f5c\u6d41\u7a0b",id:"\u5de5\u4f5c\u6d41\u7a0b-3",level:3},{value:"WATCH",id:"watch",level:3},{value:"\u76d1\u89c6\u673a\u5236",id:"\u76d1\u89c6\u673a\u5236",level:4},{value:"\u5b9e\u73b0\u539f\u7406",id:"\u5b9e\u73b0\u539f\u7406-1",level:4},{value:"ACID",id:"acid",level:3},{value:"\u539f\u5b50\u6027",id:"\u539f\u5b50\u6027",level:4},{value:"\u4e00\u81f4\u6027",id:"\u4e00\u81f4\u6027",level:4},{value:"\u9694\u79bb\u6027",id:"\u9694\u79bb\u6027",level:4},{value:"\u6301\u4e45\u6027",id:"\u6301\u4e45\u6027",level:4},{value:"Lua \u811a\u672c",id:"lua-\u811a\u672c",level:2},{value:"\u73af\u5883\u521b\u5efa",id:"\u73af\u5883\u521b\u5efa",level:3},{value:"\u57fa\u672c\u4ecb\u7ecd",id:"\u57fa\u672c\u4ecb\u7ecd-16",level:4},{value:"\u521b\u5efa\u8fc7\u7a0b",id:"\u521b\u5efa\u8fc7\u7a0b",level:4},{value:"\u534f\u4f5c\u7ec4\u4ef6",id:"\u534f\u4f5c\u7ec4\u4ef6",level:3},{value:"\u4f2a\u5ba2\u6237\u7aef",id:"\u4f2a\u5ba2\u6237\u7aef",level:4},{value:"\u811a\u672c\u5b57\u5178",id:"\u811a\u672c\u5b57\u5178",level:4},{value:"\u547d\u4ee4\u5b9e\u73b0",id:"\u547d\u4ee4\u5b9e\u73b0-1",level:3},{value:"\u811a\u672c\u51fd\u6570",id:"\u811a\u672c\u51fd\u6570",level:4},{value:"\u6267\u884c\u51fd\u6570",id:"\u6267\u884c\u51fd\u6570",level:4},{value:"EVALSHA",id:"evalsha",level:4},{value:"\u7ba1\u7406\u547d\u4ee4",id:"\u7ba1\u7406\u547d\u4ee4",level:3},{value:"\u811a\u672c\u590d\u5236",id:"\u811a\u672c\u590d\u5236",level:3},{value:"\u547d\u4ee4\u590d\u5236",id:"\u547d\u4ee4\u590d\u5236",level:4},{value:"EVALSHA",id:"evalsha-1",level:4},{value:"\u5206\u5e03\u5f0f\u9501",id:"\u5206\u5e03\u5f0f\u9501",level:2},{value:"\u57fa\u672c\u64cd\u4f5c",id:"\u57fa\u672c\u64cd\u4f5c-4",level:3},{value:"\u9632\u8bef\u5220",id:"\u9632\u8bef\u5220",level:3},{value:"\u4f18\u5316\u9501",id:"\u4f18\u5316\u9501-1",level:3},{value:"\u4e0d\u53ef\u91cd\u5165",id:"\u4e0d\u53ef\u91cd\u5165",level:4},{value:"\u4e0d\u53ef\u91cd\u8bd5",id:"\u4e0d\u53ef\u91cd\u8bd5",level:4},{value:"\u8d85\u65f6\u91ca\u653e",id:"\u8d85\u65f6\u91ca\u653e",level:4},{value:"\u4e3b\u4ece\u4e00\u81f4",id:"\u4e3b\u4ece\u4e00\u81f4",level:4},{value:"\u4e3b\u4ece\u590d\u5236",id:"\u4e3b\u4ece\u590d\u5236-1",level:2},{value:"\u57fa\u672c\u64cd\u4f5c",id:"\u57fa\u672c\u64cd\u4f5c-5",level:3},{value:"\u4e3b\u4ece\u4ecb\u7ecd",id:"\u4e3b\u4ece\u4ecb\u7ecd",level:4},{value:"\u64cd\u4f5c\u6307\u4ee4",id:"\u64cd\u4f5c\u6307\u4ee4",level:4},{value:"\u590d\u5236\u6d41\u7a0b",id:"\u590d\u5236\u6d41\u7a0b",level:3},{value:"\u65e7\u7248\u590d\u5236",id:"\u65e7\u7248\u590d\u5236",level:4},{value:"\u529f\u80fd\u7f3a\u9677",id:"\u529f\u80fd\u7f3a\u9677",level:4},{value:"\u65b0\u7248\u590d\u5236",id:"\u65b0\u7248\u590d\u5236",level:4},{value:"\u90e8\u5206\u540c\u6b65",id:"\u90e8\u5206\u540c\u6b65",level:3},{value:"\u504f\u79fb\u91cf",id:"\u504f\u79fb\u91cf",level:4},{value:"\u7f13\u51b2\u533a",id:"\u7f13\u51b2\u533a-1",level:4},{value:"\u8fd0\u884cID",id:"\u8fd0\u884cid",level:4},{value:"PSYNC",id:"psync",level:4},{value:"\u590d\u5236\u5b9e\u73b0",id:"\u590d\u5236\u5b9e\u73b0",level:3},{value:"\u5b9e\u73b0\u6d41\u7a0b",id:"\u5b9e\u73b0\u6d41\u7a0b",level:4},{value:"\u590d\u5236\u56fe\u793a",id:"\u590d\u5236\u56fe\u793a",level:4},{value:"\u5fc3\u8df3\u68c0\u6d4b",id:"\u5fc3\u8df3\u68c0\u6d4b",level:3},{value:"\u5fc3\u8df3\u673a\u5236",id:"\u5fc3\u8df3\u673a\u5236",level:4},{value:"\u7f51\u7edc\u72b6\u6001",id:"\u7f51\u7edc\u72b6\u6001",level:4},{value:"\u914d\u7f6e\u9009\u9879",id:"\u914d\u7f6e\u9009\u9879",level:4},{value:"\u547d\u4ee4\u4e22\u5931",id:"\u547d\u4ee4\u4e22\u5931",level:4},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:3},{value:"\u91cd\u542f\u6062\u590d",id:"\u91cd\u542f\u6062\u590d",level:4},{value:"\u7f51\u7edc\u4e2d\u65ad",id:"\u7f51\u7edc\u4e2d\u65ad",level:4},{value:"\u4e00\u81f4\u6027",id:"\u4e00\u81f4\u6027-1",level:4},{value:"\u54e8\u5175\u6a21\u5f0f",id:"\u54e8\u5175\u6a21\u5f0f",level:2},{value:"\u54e8\u5175\u6982\u8ff0",id:"\u54e8\u5175\u6982\u8ff0",level:3},{value:"\u542f\u7528\u54e8\u5175",id:"\u542f\u7528\u54e8\u5175",level:3},{value:"\u914d\u7f6e\u65b9\u5f0f",id:"\u914d\u7f6e\u65b9\u5f0f",level:4},{value:"\u521d\u59cb\u5316",id:"\u521d\u59cb\u5316-1",level:4},{value:"\u4ee3\u7801\u66ff\u6362",id:"\u4ee3\u7801\u66ff\u6362",level:4},{value:"\u54e8\u5175\u72b6\u6001",id:"\u54e8\u5175\u72b6\u6001",level:4},{value:"\u76d1\u63a7\u5217\u8868",id:"\u76d1\u63a7\u5217\u8868",level:4},{value:"\u7f51\u7edc\u8fde\u63a5",id:"\u7f51\u7edc\u8fde\u63a5",level:4},{value:"\u4fe1\u606f\u4ea4\u4e92",id:"\u4fe1\u606f\u4ea4\u4e92",level:3},{value:"\u83b7\u53d6\u4fe1\u606f",id:"\u83b7\u53d6\u4fe1\u606f",level:4},{value:"\u4e3b\u670d\u52a1\u5668",id:"\u4e3b\u670d\u52a1\u5668",level:5},{value:"\u4ece\u670d\u52a1\u5668",id:"\u4ece\u670d\u52a1\u5668",level:5},{value:"\u53d1\u9001\u4fe1\u606f",id:"\u53d1\u9001\u4fe1\u606f",level:4},{value:"\u63a5\u53d7\u4fe1\u606f",id:"\u63a5\u53d7\u4fe1\u606f",level:4},{value:"\u8ba2\u9605\u9891\u9053",id:"\u8ba2\u9605\u9891\u9053",level:5},{value:"\u547d\u4ee4\u8fde\u63a5",id:"\u547d\u4ee4\u8fde\u63a5",level:5},{value:"\u4e0b\u7ebf\u68c0\u6d4b",id:"\u4e0b\u7ebf\u68c0\u6d4b",level:3},{value:"\u4e3b\u89c2\u4e0b\u7ebf",id:"\u4e3b\u89c2\u4e0b\u7ebf",level:4},{value:"\u5ba2\u89c2\u4e0b\u7ebf",id:"\u5ba2\u89c2\u4e0b\u7ebf",level:4},{value:"\u9886\u5934\u9009\u4e3e",id:"\u9886\u5934\u9009\u4e3e",level:3},{value:"\u6545\u969c\u8f6c\u79fb",id:"\u6545\u969c\u8f6c\u79fb",level:3},{value:"\u6267\u884c\u6d41\u7a0b",id:"\u6267\u884c\u6d41\u7a0b-2",level:4},{value:"\u9009\u62e9\u7b97\u6cd5",id:"\u9009\u62e9\u7b97\u6cd5",level:4},{value:"\u96c6\u7fa4\u6a21\u5f0f",id:"\u96c6\u7fa4\u6a21\u5f0f",level:2},{value:"\u96c6\u7fa4\u8282\u70b9",id:"\u96c6\u7fa4\u8282\u70b9",level:3},{value:"\u8282\u70b9\u6982\u8ff0",id:"\u8282\u70b9\u6982\u8ff0",level:4},{value:"\u6570\u636e\u7ed3\u6784",id:"\u6570\u636e\u7ed3\u6784-3",level:4},{value:"MEET",id:"meet",level:4},{value:"\u69fd\u6307\u6d3e",id:"\u69fd\u6307\u6d3e",level:3},{value:"\u57fa\u672c\u64cd\u4f5c",id:"\u57fa\u672c\u64cd\u4f5c-6",level:4},{value:"\u8282\u70b9\u6307\u6d3e",id:"\u8282\u70b9\u6307\u6d3e",level:4},{value:"\u96c6\u7fa4\u6307\u6d3e",id:"\u96c6\u7fa4\u6307\u6d3e",level:4},{value:"\u96c6\u7fa4\u6570\u636e",id:"\u96c6\u7fa4\u6570\u636e",level:4},{value:"\u96c6\u7fa4\u547d\u4ee4",id:"\u96c6\u7fa4\u547d\u4ee4",level:3},{value:"\u6267\u884c\u547d\u4ee4",id:"\u6267\u884c\u547d\u4ee4",level:4},{value:"MOVED",id:"moved",level:4},{value:"\u91cd\u65b0\u5206\u7247",id:"\u91cd\u65b0\u5206\u7247",level:3},{value:"\u5b9e\u73b0\u539f\u7406",id:"\u5b9e\u73b0\u539f\u7406-2",level:4},{value:"\u547d\u4ee4\u539f\u7406",id:"\u547d\u4ee4\u539f\u7406",level:4},{value:"ASK \u9519\u8bef",id:"ask-\u9519\u8bef",level:4},{value:"ASKING",id:"asking",level:4},{value:"\u9ad8\u53ef\u7528",id:"\u9ad8\u53ef\u7528",level:3},{value:"\u8282\u70b9\u590d\u5236",id:"\u8282\u70b9\u590d\u5236",level:4},{value:"\u6545\u969c\u68c0\u6d4b",id:"\u6545\u969c\u68c0\u6d4b",level:4},{value:"\u6545\u969c\u8f6c\u79fb",id:"\u6545\u969c\u8f6c\u79fb-1",level:4},{value:"\u9009\u4e3e\u7b97\u6cd5",id:"\u9009\u4e3e\u7b97\u6cd5",level:4},{value:"\u6d88\u606f\u673a\u5236",id:"\u6d88\u606f\u673a\u5236",level:3},{value:"\u6d88\u606f\u7ed3\u6784",id:"\u6d88\u606f\u7ed3\u6784",level:4},{value:"\u6d88\u606f\u5934",id:"\u6d88\u606f\u5934",level:4},{value:"Gossip",id:"gossip",level:4},{value:"FAIL",id:"fail",level:4},{value:"PUBLISH",id:"publish",level:4},{value:"\u8111\u88c2\u95ee\u9898",id:"\u8111\u88c2\u95ee\u9898",level:3},{value:"\u7ed3\u6784\u642d\u5efa",id:"\u7ed3\u6784\u642d\u5efa",level:3},{value:"\u5176\u4ed6\u64cd\u4f5c",id:"\u5176\u4ed6\u64cd\u4f5c",level:2},{value:"\u53d1\u5e03\u8ba2\u9605",id:"\u53d1\u5e03\u8ba2\u9605",level:3},{value:"\u57fa\u672c\u6307\u4ee4",id:"\u57fa\u672c\u6307\u4ee4-1",level:4},{value:"\u9891\u9053\u64cd\u4f5c",id:"\u9891\u9053\u64cd\u4f5c",level:4},{value:"\u6a21\u5f0f\u64cd\u4f5c",id:"\u6a21\u5f0f\u64cd\u4f5c",level:4},{value:"\u53d1\u9001\u6d88\u606f",id:"\u53d1\u9001\u6d88\u606f",level:4},{value:"\u67e5\u770b\u4fe1\u606f",id:"\u67e5\u770b\u4fe1\u606f",level:4},{value:"ACL \u6307\u4ee4",id:"acl-\u6307\u4ee4",level:3},{value:"\u76d1\u89c6\u5668",id:"\u76d1\u89c6\u5668",level:3},{value:"\u6279\u5904\u7406",id:"\u6279\u5904\u7406",level:3},{value:"\u89e3\u51b3\u65b9\u6848",id:"\u89e3\u51b3\u65b9\u6848",level:2},{value:"\u7f13\u5b58\u65b9\u6848",id:"\u7f13\u5b58\u65b9\u6848",level:3},{value:"\u7f13\u5b58\u6a21\u5f0f",id:"\u7f13\u5b58\u6a21\u5f0f",level:4},{value:"\u65c1\u8def\u7f13\u5b58",id:"\u65c1\u8def\u7f13\u5b58",level:5},{value:"\u8bfb\u5199\u7a7f\u900f",id:"\u8bfb\u5199\u7a7f\u900f",level:5},{value:"\u5f02\u6b65\u7f13\u5b58",id:"\u5f02\u6b65\u7f13\u5b58",level:5},{value:"\u7f13\u5b58\u4e00\u81f4",id:"\u7f13\u5b58\u4e00\u81f4",level:4},{value:"\u7f13\u5b58\u95ee\u9898",id:"\u7f13\u5b58\u95ee\u9898",level:4},{value:"\u7f13\u5b58\u9884\u70ed",id:"\u7f13\u5b58\u9884\u70ed",level:5},{value:"\u7f13\u5b58\u96ea\u5d29",id:"\u7f13\u5b58\u96ea\u5d29",level:5},{value:"\u7f13\u5b58\u51fb\u7a7f",id:"\u7f13\u5b58\u51fb\u7a7f",level:5},{value:"\u7f13\u5b58\u7a7f\u900f",id:"\u7f13\u5b58\u7a7f\u900f",level:5},{value:"Key \u8bbe\u8ba1",id:"key-\u8bbe\u8ba1",level:3},{value:"\u6162\u67e5\u8be2",id:"\u6162\u67e5\u8be2",level:3},{value:"JDBC",id:"jdbc",level:2},{value:"\u6982\u8ff0",id:"\u6982\u8ff0-2",level:3},{value:"\u529f\u80fd\u7c7b",id:"\u529f\u80fd\u7c7b",level:3},{value:"DriverManager",id:"drivermanager",level:4},{value:"Connection",id:"connection",level:4},{value:"Statement",id:"statement",level:4},{value:"ResultSet",id:"resultset",level:4},{value:"\u4ee3\u7801\u5b9e\u73b0",id:"\u4ee3\u7801\u5b9e\u73b0",level:4},{value:"\u6ce8\u5165\u653b\u51fb",id:"\u6ce8\u5165\u653b\u51fb",level:3},{value:"\u653b\u51fb\u6f14\u793a",id:"\u653b\u51fb\u6f14\u793a",level:4},{value:"\u653b\u51fb\u89e3\u51b3",id:"\u653b\u51fb\u89e3\u51b3",level:4},{value:"\u8fde\u63a5\u6c60",id:"\u8fde\u63a5\u6c60",level:3},{value:"\u6982\u5ff5",id:"\u6982\u5ff5",level:4},{value:"\u5f52\u8fd8\u8fde\u63a5",id:"\u5f52\u8fd8\u8fde\u63a5",level:4},{value:"\u5f00\u6e90\u9879\u76ee",id:"\u5f00\u6e90\u9879\u76ee",level:4},{value:"C3P0",id:"c3p0",level:5},{value:"Druid",id:"druid",level:5},{value:"Jedis",id:"jedis",level:2},{value:"\u57fa\u672c\u4f7f\u7528",id:"\u57fa\u672c\u4f7f\u7528",level:3},{value:"\u5de5\u5177\u7c7b",id:"\u5de5\u5177\u7c7b",level:3}];function j(n){const e={a:"a",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"mysql",children:"MySQL"})}),"\n",(0,i.jsx)(e.h2,{id:"\u7b80\u4ecb",children:"\u7b80\u4ecb"}),"\n",(0,i.jsx)(e.h3,{id:"\u6570\u636e\u5e93",children:"\u6570\u636e\u5e93"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5e93\uff1aDataBase\uff0c\u7b80\u79f0 DB\uff0c\u5b58\u50a8\u548c\u7ba1\u7406\u6570\u636e\u7684\u4ed3\u5e93"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5e93\u7684\u4f18\u52bf\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53ef\u4ee5\u6301\u4e45\u5316\u5b58\u50a8\u6570\u636e"}),"\n",(0,i.jsx)(e.li,{children:"\u65b9\u4fbf\u5b58\u50a8\u548c\u7ba1\u7406\u6570\u636e"}),"\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u4e86\u7edf\u4e00\u7684\u65b9\u5f0f\u64cd\u4f5c\u6570\u636e\u5e93 SQL"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5e93\u3001\u6570\u636e\u8868\u3001\u6570\u636e\u7684\u5173\u7cfb\u4ecb\u7ecd\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5e93"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7528\u4e8e\u5b58\u50a8\u548c\u7ba1\u7406\u6570\u636e\u7684\u4ed3\u5e93"}),"\n",(0,i.jsx)(e.li,{children:"\u4e00\u4e2a\u5e93\u4e2d\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u6570\u636e\u8868"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u8868"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6570\u636e\u5e93\u6700\u91cd\u8981\u7684\u7ec4\u6210\u90e8\u5206\u4e4b\u4e00"}),"\n",(0,i.jsx)(e.li,{children:"\u7531\u7eb5\u5411\u7684\u5217\u548c\u6a2a\u5411\u7684\u884c\u7ec4\u6210\uff08\u7c7b\u4f3c excel \u8868\u683c\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u53ef\u4ee5\u6307\u5b9a\u5217\u540d\u3001\u6570\u636e\u7c7b\u578b\u3001\u7ea6\u675f\u7b49"}),"\n",(0,i.jsx)(e.li,{children:"\u4e00\u4e2a\u8868\u4e2d\u53ef\u4ee5\u5b58\u50a8\u591a\u6761\u6570\u636e"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\uff1a\u60f3\u8981\u6c38\u4e45\u5316\u5b58\u50a8\u7684\u6570\u636e"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u89c6\u9891\uff1a",(0,i.jsx)(e.a,{href:"https://www.bilibili.com/video/BV1zJ411M7TB",children:"https://www.bilibili.com/video/BV1zJ411M7TB"})]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u4e13\u680f\uff1a",(0,i.jsx)(e.a,{href:"https://time.geekbang.org/column/intro/139",children:"https://time.geekbang.org/column/intro/139"})]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u4e66\u7c4d\uff1a",(0,i.jsx)(e.a,{href:"https://book.douban.com/subject/35231266/",children:"https://book.douban.com/subject/35231266/"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"mysql-1",children:"MySQL"}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u6570\u636e\u5e93\u662f\u4e00\u4e2a\u6700\u6d41\u884c\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u4e4b\u4e00\uff0c\u5173\u7cfb\u578b\u6570\u636e\u5e93\u662f\u5c06\u6570\u636e\u4fdd\u5b58\u5728\u4e0d\u540c\u7684\u6570\u636e\u8868\u4e2d\uff0c\u800c\u4e14\u8868\u4e0e\u8868\u4e4b\u95f4\u53ef\u4ee5\u6709\u5173\u8054\u5173\u7cfb\uff0c\u63d0\u9ad8\u4e86\u7075\u6d3b\u6027"}),"\n",(0,i.jsx)(e.p,{children:"\u7f3a\u70b9\uff1a\u6570\u636e\u5b58\u50a8\u5728\u78c1\u76d8\u4e2d\uff0c\u5bfc\u81f4\u8bfb\u5199\u6027\u80fd\u5dee\uff0c\u800c\u4e14\u6570\u636e\u5173\u7cfb\u590d\u6742\uff0c\u6269\u5c55\u6027\u5dee"}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u6240\u4f7f\u7528\u7684 SQL \u8bed\u53e5\u662f\u7528\u4e8e\u8bbf\u95ee\u6570\u636e\u5e93\u6700\u5e38\u7528\u7684\u6807\u51c6\u5316\u8bed\u8a00"}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u914d\u7f6e\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["MySQL \u5b89\u88c5\uff1a",(0,i.jsx)(e.a,{href:"https://www.jianshu.com/p/ba48f1e386f0",children:"https://www.jianshu.com/p/ba48f1e386f0"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"MySQL \u914d\u7f6e\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539 MySQL \u9ed8\u8ba4\u5b57\u7b26\u96c6\uff1a\u5b89\u88c5 MySQL \u4e4b\u540e\u7b2c\u4e00\u4ef6\u4e8b\u5c31\u662f\u4fee\u6539\u5b57\u7b26\u96c6\u7f16\u7801"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"vim /etc/mysql/my.cnf\n\n\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a\n[mysqld]\ncharacter-set-server=utf8\ncollation-server=utf8_general_ci\n\n[client]\ndefault-character-set=utf8\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u542f\u52a8 MySQL \u670d\u52a1\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"systemctl start/restart mysql\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u767b\u5f55 MySQL\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"mysql -u root -p  \u6572\u56de\u8f66\uff0c\u8f93\u5165\u5bc6\u7801\n\u521d\u59cb\u5bc6\u7801\u67e5\u770b\uff1acat /var/log/mysqld.log\n\u5728root@localhost:   \u540e\u9762\u7684\u5c31\u662f\u521d\u59cb\u5bc6\u7801\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u9ed8\u8ba4\u5b57\u7b26\u96c6\u547d\u4ee4\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW VARIABLES LIKE 'char%';\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539MySQL\u767b\u5f55\u5bc6\u7801\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"set global validate_password_policy=0;\nset global validate_password_length=1;\n  \nset password=password('\u5bc6\u7801');\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6388\u4e88\u8fdc\u7a0b\u8fde\u63a5\u6743\u9650\uff08MySQL \u5185\u8f93\u5165\uff09\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u6388\u6743\ngrant all privileges on *.* to 'root' @'%' identified by '\u5bc6\u7801';\n-- \u5237\u65b0\nflush privileges;\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539 MySQL \u7ed1\u5b9a IP\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"cd /etc/mysql/mysql.conf.d\nsudo chmod 666 mysqld.cnf \nvim mysqld.cnf \n# bind-address = 127.0.0.1\u6ce8\u91ca\u8be5\u884c\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5173\u95ed Linux \u9632\u706b\u5899"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"systemctl stop firewalld.service\n# \u653e\u884c3306\u7aef\u53e3\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u4f53\u7cfb\u67b6\u6784",children:"\u4f53\u7cfb\u67b6\u6784"}),"\n",(0,i.jsx)(e.h3,{id:"\u6574\u4f53\u67b6\u6784",children:"\u6574\u4f53\u67b6\u6784"}),"\n",(0,i.jsx)(e.p,{children:"\u4f53\u7cfb\u7ed3\u6784\u8be6\u89e3\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u7b2c\u4e00\u5c42\uff1a\u7f51\u7edc\u8fde\u63a5\u5c42\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e00\u4e9b\u5ba2\u6237\u7aef\u548c\u94fe\u63a5\u670d\u52a1\uff0c\u5305\u542b\u672c\u5730 Socket \u901a\u4fe1\u548c\u5927\u591a\u6570\u57fa\u4e8e\u5ba2\u6237\u7aef/\u670d\u52a1\u7aef\u5de5\u5177\u5b9e\u73b0\u7684 TCP/IP \u901a\u4fe1\uff0c\u4e3b\u8981\u5b8c\u6210\u4e00\u4e9b\u7c7b\u4f3c\u4e8e\u8fde\u63a5\u5904\u7406\u3001\u6388\u6743\u8ba4\u8bc1\u3001\u53ca\u76f8\u5173\u7684\u5b89\u5168\u65b9\u6848"}),"\n",(0,i.jsxs)(e.li,{children:["\u5728\u8be5\u5c42\u4e0a\u5f15\u5165\u4e86",(0,i.jsx)(e.strong,{children:"\u8fde\u63a5\u6c60"})," Connection Pool \u7684\u6982\u5ff5\uff0c\u7ba1\u7406\u7f13\u51b2\u7528\u6237\u8fde\u63a5\uff0c\u7ebf\u7a0b\u5904\u7406\u7b49\u9700\u8981\u7f13\u5b58\u7684\u9700\u6c42"]}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u8be5\u5c42\u4e0a\u5b9e\u73b0\u57fa\u4e8e SSL \u7684\u5b89\u5168\u94fe\u63a5\uff0c\u670d\u52a1\u5668\u4e5f\u4f1a\u4e3a\u5b89\u5168\u63a5\u5165\u7684\u6bcf\u4e2a\u5ba2\u6237\u7aef\u9a8c\u8bc1\u5b83\u6240\u5177\u6709\u7684\u64cd\u4f5c\u6743\u9650"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u7b2c\u4e8c\u5c42\uff1a\u6838\u5fc3\u670d\u52a1\u5c42\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u67e5\u8be2\u7f13\u5b58\u3001\u5206\u6790\u5668\u3001\u4f18\u5316\u5668\u3001\u6267\u884c\u5668\u7b49\uff0c\u6db5\u76d6 MySQL \u7684\u5927\u591a\u6570\u6838\u5fc3\u670d\u52a1\u529f\u80fd\uff0c\u6240\u6709\u7684\u5185\u7f6e\u51fd\u6570\uff08\u65e5\u671f\u3001\u6570\u5b66\u3001\u52a0\u5bc6\u51fd\u6570\u7b49\uff09\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Management Serveices & Utilities\uff1a\u7cfb\u7edf\u7ba1\u7406\u548c\u63a7\u5236\u5de5\u5177\uff0c\u5907\u4efd\u3001\u5b89\u5168\u3001\u590d\u5236\u3001\u96c6\u7fa4\u7b49"}),"\n",(0,i.jsx)(e.li,{children:"SQL Interface\uff1a\u63a5\u53d7\u7528\u6237\u7684 SQL \u547d\u4ee4\uff0c\u5e76\u4e14\u8fd4\u56de\u7528\u6237\u9700\u8981\u67e5\u8be2\u7684\u7ed3\u679c"}),"\n",(0,i.jsx)(e.li,{children:"Parser\uff1aSQL \u8bed\u53e5\u5206\u6790\u5668"}),"\n",(0,i.jsx)(e.li,{children:"Optimizer\uff1a\u67e5\u8be2\u4f18\u5316\u5668"}),"\n",(0,i.jsx)(e.li,{children:"Caches & Buffers\uff1a\u67e5\u8be2\u7f13\u5b58\uff0c\u670d\u52a1\u5668\u4f1a\u67e5\u8be2\u5185\u90e8\u7684\u7f13\u5b58\uff0c\u5982\u679c\u7f13\u5b58\u7a7a\u95f4\u8db3\u591f\u5927\uff0c\u53ef\u4ee5\u5728\u5927\u91cf\u8bfb\u64cd\u4f5c\u7684\u73af\u5883\u4e2d\u63d0\u5347\u7cfb\u7edf\u6027\u80fd"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u6240\u6709",(0,i.jsx)(e.strong,{children:"\u8de8\u5b58\u50a8\u5f15\u64ce\u7684\u529f\u80fd"}),"\u5728\u8fd9\u4e00\u5c42\u5b9e\u73b0\uff0c\u5982\u5b58\u50a8\u8fc7\u7a0b\u3001\u89e6\u53d1\u5668\u3001\u89c6\u56fe\u7b49"]}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u8be5\u5c42\u670d\u52a1\u5668\u4f1a\u89e3\u6790\u67e5\u8be2\u5e76\u521b\u5efa\u76f8\u5e94\u7684\u5185\u90e8\u89e3\u6790\u6811\uff0c\u5e76\u5bf9\u5176\u5b8c\u6210\u76f8\u5e94\u7684\u4f18\u5316\u5982\u786e\u5b9a\u8868\u7684\u67e5\u8be2\u987a\u5e8f\uff0c\u662f\u5426\u5229\u7528\u7d22\u5f15\u7b49\uff0c \u6700\u540e\u751f\u6210\u76f8\u5e94\u7684\u6267\u884c\u64cd\u4f5c"}),"\n",(0,i.jsxs)(e.li,{children:["MySQL \u4e2d\u670d\u52a1\u5668\u5c42\u4e0d\u7ba1\u7406\u4e8b\u52a1\uff0c",(0,i.jsx)(e.strong,{children:"\u4e8b\u52a1\u662f\u7531\u5b58\u50a8\u5f15\u64ce\u5b9e\u73b0\u7684"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u7b2c\u4e09\u5c42\uff1a\u5b58\u50a8\u5f15\u64ce\u5c42\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Pluggable Storage Engines\uff1a\u5b58\u50a8\u5f15\u64ce\u63a5\u53e3\uff0cMySQL \u533a\u522b\u4e8e\u5176\u4ed6\u6570\u636e\u5e93\u7684\u91cd\u8981\u7279\u70b9\u5c31\u662f\u5176\u5b58\u50a8\u5f15\u64ce\u7684\u67b6\u6784\u6a21\u5f0f\u662f\u63d2\u4ef6\u5f0f\u7684\uff08\u5b58\u50a8\u5f15\u64ce\u662f\u57fa\u4e8e\u8868\u7684\uff0c\u800c\u4e0d\u662f\u6570\u636e\u5e93\uff09"}),"\n",(0,i.jsxs)(e.li,{children:["\u5b58\u50a8\u5f15\u64ce",(0,i.jsx)(e.strong,{children:"\u771f\u6b63\u7684\u8d1f\u8d23\u4e86 MySQL \u4e2d\u6570\u636e\u7684\u5b58\u50a8\u548c\u63d0\u53d6"}),"\uff0c\u670d\u52a1\u5668\u901a\u8fc7 API \u548c\u5b58\u50a8\u5f15\u64ce\u8fdb\u884c\u901a\u4fe1"]}),"\n",(0,i.jsx)(e.li,{children:"\u4e0d\u540c\u7684\u5b58\u50a8\u5f15\u64ce\u5177\u6709\u4e0d\u540c\u7684\u529f\u80fd\uff0c\u5171\u7528\u4e00\u4e2a Server \u5c42\uff0c\u53ef\u4ee5\u6839\u636e\u5f00\u53d1\u7684\u9700\u8981\uff0c\u6765\u9009\u53d6\u5408\u9002\u7684\u5b58\u50a8\u5f15\u64ce"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u7b2c\u56db\u5c42\uff1a\u7cfb\u7edf\u6587\u4ef6\u5c42\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6570\u636e\u5b58\u50a8\u5c42\uff0c\u4e3b\u8981\u662f\u5c06\u6570\u636e\u5b58\u50a8\u5728\u6587\u4ef6\u7cfb\u7edf\u4e4b\u4e0a\uff0c\u5e76\u5b8c\u6210\u4e0e\u5b58\u50a8\u5f15\u64ce\u7684\u4ea4\u4e92"}),"\n",(0,i.jsx)(e.li,{children:"File System\uff1a\u6587\u4ef6\u7cfb\u7edf\uff0c\u4fdd\u5b58\u914d\u7f6e\u6587\u4ef6\u3001\u6570\u636e\u6587\u4ef6\u3001\u65e5\u5fd7\u6587\u4ef6\u3001\u9519\u8bef\u6587\u4ef6\u3001\u4e8c\u8fdb\u5236\u6587\u4ef6\u7b49"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(9720).A+"",width:"850",height:"512"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5efa\u7acb\u8fde\u63a5",children:"\u5efa\u7acb\u8fde\u63a5"}),"\n",(0,i.jsx)(e.h4,{id:"\u8fde\u63a5\u5668",children:"\u8fde\u63a5\u5668"}),"\n",(0,i.jsx)(e.p,{children:"\u6c60\u5316\u6280\u672f\uff1a\u5bf9\u4e8e\u8bbf\u95ee\u6570\u636e\u5e93\u6765\u8bf4\uff0c\u5efa\u7acb\u8fde\u63a5\u7684\u4ee3\u4ef7\u662f\u6bd4\u8f83\u6602\u8d35\u7684\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u8fde\u63a5\u5bf9\u5e94\u4e00\u4e2a\u7528\u6765\u4ea4\u4e92\u7684\u7ebf\u7a0b\uff0c\u9891\u7e41\u7684\u521b\u5efa\u5173\u95ed\u8fde\u63a5\u6bd4\u8f83\u8017\u8d39\u8d44\u6e90\uff0c\u6709\u5fc5\u8981\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u6c60\uff0c\u4ee5\u63d0\u9ad8\u8bbf\u95ee\u7684\u6027\u80fd"}),"\n",(0,i.jsxs)(e.p,{children:["\u8fde\u63a5\u5efa\u7acb TCP \u4ee5\u540e\u9700\u8981\u505a",(0,i.jsx)(e.strong,{children:"\u6743\u9650\u9a8c\u8bc1"}),"\uff0c\u9a8c\u8bc1\u6210\u529f\u540e\u53ef\u4ee5\u8fdb\u884c\u6267\u884c SQL\u3002\u5982\u679c\u8fd9\u65f6\u7ba1\u7406\u5458\u8d26\u53f7\u5bf9\u8fd9\u4e2a\u7528\u6237\u7684\u6743\u9650\u505a\u4e86\u4fee\u6539\uff0c\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u5df2\u7ecf\u5b58\u5728\u8fde\u63a5\u7684\u6743\u9650\uff0c\u53ea\u6709\u518d\u65b0\u5efa\u7684\u8fde\u63a5\u624d\u4f1a\u4f7f\u7528\u65b0\u7684\u6743\u9650\u8bbe\u7f6e"]}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u670d\u52a1\u5668\u53ef\u4ee5\u540c\u65f6\u548c\u591a\u4e2a\u5ba2\u6237\u7aef\u8fdb\u884c\u4ea4\u4e92\uff0c\u6240\u4ee5\u8981\u4fdd\u8bc1\u6bcf\u4e2a\u8fde\u63a5\u4f1a\u8bdd\u7684\u9694\u79bb\u6027\uff08\u4e8b\u52a1\u673a\u5236\u90e8\u5206\u8be6\u89e3\uff09"}),"\n",(0,i.jsx)(e.p,{children:"\u6574\u4f53\u7684\u6267\u884c\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(52078).A+"",width:"1920",height:"1440"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6743\u9650\u4fe1\u606f",children:"\u6743\u9650\u4fe1\u606f"}),"\n",(0,i.jsx)(e.p,{children:"grant \u8bed\u53e5\u4f1a\u540c\u65f6\u4fee\u6539\u6570\u636e\u8868\u548c\u5185\u5b58\uff0c\u5224\u65ad\u6743\u9650\u7684\u65f6\u5019\u4f7f\u7528\u7684\u662f\u5185\u5b58\u6570\u636e"}),"\n",(0,i.jsx)(e.p,{children:"flush privileges \u8bed\u53e5\u672c\u8eab\u4f1a\u7528\u6570\u636e\u8868\uff08\u78c1\u76d8\uff09\u7684\u6570\u636e\u91cd\u5efa\u4e00\u4efd\u5185\u5b58\u6743\u9650\u6570\u636e\uff0c\u6240\u4ee5\u5728\u6743\u9650\u6570\u636e\u53ef\u80fd\u5b58\u5728\u4e0d\u4e00\u81f4\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\uff0c\u8fd9\u79cd\u4e0d\u4e00\u81f4\u5f80\u5f80\u662f\u7531\u4e8e\u76f4\u63a5\u7528 DML \u8bed\u53e5\u64cd\u4f5c\u7cfb\u7edf\u6743\u9650\u8868\u5bfc\u81f4\u7684\uff0c\u6240\u4ee5\u5c3d\u91cf\u4e0d\u8981\u4f7f\u7528\u8fd9\u7c7b\u8bed\u53e5"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(76719).A+"",width:"2414",height:"860"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u8fde\u63a5\u72b6\u6001",children:"\u8fde\u63a5\u72b6\u6001"}),"\n",(0,i.jsxs)(e.p,{children:["\u5ba2\u6237\u7aef\u5982\u679c\u957f\u65f6\u95f4\u6ca1\u6709\u64cd\u4f5c\uff0c\u8fde\u63a5\u5668\u5c31\u4f1a\u81ea\u52a8\u65ad\u5f00\uff0c\u65f6\u95f4\u662f\u7531\u53c2\u6570 wait_timeout \u63a7\u5236\u7684\uff0c\u9ed8\u8ba4\u503c\u662f 8 \u5c0f\u65f6\u3002\u5982\u679c\u5728\u8fde\u63a5\u88ab\u65ad\u5f00\u4e4b\u540e\uff0c\u5ba2\u6237\u7aef",(0,i.jsx)(e.strong,{children:"\u518d\u6b21\u53d1\u9001\u8bf7\u6c42"}),"\u7684\u8bdd\uff0c\u5c31\u4f1a\u6536\u5230\u4e00\u4e2a\u9519\u8bef\u63d0\u9192\uff1a",(0,i.jsx)(e.code,{children:"Lost connection to MySQL server during query"})]}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5e93\u91cc\u9762\uff0c\u957f\u8fde\u63a5\u662f\u6307\u8fde\u63a5\u6210\u529f\u540e\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u6301\u7eed\u6709\u8bf7\u6c42\uff0c\u5219\u4e00\u76f4\u4f7f\u7528\u540c\u4e00\u4e2a\u8fde\u63a5\uff1b\u77ed\u8fde\u63a5\u5219\u662f\u6307\u6bcf\u6b21\u6267\u884c\u5b8c\u5f88\u5c11\u7684\u51e0\u6b21\u67e5\u8be2\u5c31\u65ad\u5f00\u8fde\u63a5\uff0c\u4e0b\u6b21\u67e5\u8be2\u518d\u91cd\u65b0\u5efa\u7acb\u4e00\u4e2a"}),"\n",(0,i.jsxs)(e.p,{children:["\u4e3a\u4e86\u51cf\u5c11\u8fde\u63a5\u7684\u521b\u5efa\uff0c\u63a8\u8350\u4f7f\u7528\u957f\u8fde\u63a5\uff0c\u4f46\u662f",(0,i.jsx)(e.strong,{children:"\u8fc7\u591a\u7684\u957f\u8fde\u63a5\u4f1a\u9020\u6210 OOM"}),"\uff0c\u89e3\u51b3\u65b9\u6848\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b9a\u671f\u65ad\u5f00\u957f\u8fde\u63a5\uff0c\u4f7f\u7528\u4e00\u6bb5\u65f6\u95f4\uff0c\u6216\u8005\u7a0b\u5e8f\u91cc\u9762\u5224\u65ad\u6267\u884c\u8fc7\u4e00\u4e2a\u5360\u7528\u5185\u5b58\u7684\u5927\u67e5\u8be2\u540e\uff0c\u65ad\u5f00\u8fde\u63a5\uff0c\u4e4b\u540e\u8981\u67e5\u8be2\u518d\u91cd\u8fde"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"KILL CONNECTION id\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"MySQL 5.7 \u7248\u672c\uff0c\u53ef\u4ee5\u5728\u6bcf\u6b21\u6267\u884c\u4e00\u4e2a\u6bd4\u8f83\u5927\u7684\u64cd\u4f5c\u540e\uff0c\u901a\u8fc7\u6267\u884c mysql_reset_connection \u6765\u91cd\u65b0\u521d\u59cb\u5316\u8fde\u63a5\u8d44\u6e90\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u4e0d\u9700\u8981\u91cd\u8fde\u548c\u91cd\u65b0\u505a\u6743\u9650\u9a8c\u8bc1\uff0c\u4f46\u662f\u4f1a\u5c06\u8fde\u63a5\u6062\u590d\u5230\u521a\u521a\u521b\u5efa\u5b8c\u65f6\u7684\u72b6\u6001"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"SHOW PROCESSLIST\uff1a\u67e5\u770b\u5f53\u524d MySQL \u5728\u8fdb\u884c\u7684\u7ebf\u7a0b\uff0c\u53ef\u4ee5\u5b9e\u65f6\u5730\u67e5\u770b SQL \u7684\u6267\u884c\u60c5\u51b5\uff0c\u5176\u4e2d\u7684 Command \u5217\u663e\u793a\u4e3a Sleep \u7684\u8fd9\u4e00\u884c\uff0c\u5c31\u8868\u793a\u73b0\u5728\u7cfb\u7edf\u91cc\u9762\u6709\u4e00\u4e2a\u7a7a\u95f2\u8fde\u63a5"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(87489).A+"",width:"1050",height:"167"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u53c2\u6570"}),(0,i.jsx)(e.th,{children:"\u542b\u4e49"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"ID"}),(0,i.jsx)(e.td,{children:"\u7528\u6237\u767b\u5f55 mysql \u65f6\u7cfb\u7edf\u5206\u914d\u7684 connection_id\uff0c\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570 connection_id() \u67e5\u770b"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"User"}),(0,i.jsx)(e.td,{children:"\u663e\u793a\u5f53\u524d\u7528\u6237\uff0c\u5982\u679c\u4e0d\u662f root\uff0c\u8fd9\u4e2a\u547d\u4ee4\u5c31\u53ea\u663e\u793a\u7528\u6237\u6743\u9650\u8303\u56f4\u7684 sql \u8bed\u53e5"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Host"}),(0,i.jsx)(e.td,{children:"\u663e\u793a\u8fd9\u4e2a\u8bed\u53e5\u662f\u4ece\u54ea\u4e2a ip \u7684\u54ea\u4e2a\u7aef\u53e3\u4e0a\u53d1\u7684\uff0c\u53ef\u4ee5\u7528\u6765\u8ddf\u8e2a\u51fa\u73b0\u95ee\u9898\u8bed\u53e5\u7684\u7528\u6237"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"db"}),(0,i.jsx)(e.td,{children:"\u663e\u793a\u8fd9\u4e2a\u8fdb\u7a0b\u76ee\u524d\u8fde\u63a5\u7684\u662f\u54ea\u4e2a\u6570\u636e\u5e93"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Command"}),(0,i.jsx)(e.td,{children:"\u663e\u793a\u5f53\u524d\u8fde\u63a5\u7684\u6267\u884c\u7684\u547d\u4ee4\uff0c\u4e00\u822c\u53d6\u503c\u4e3a\u4f11\u7720 Sleep\u3001\u67e5\u8be2 Query\u3001\u8fde\u63a5 Connect \u7b49"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Time"}),(0,i.jsx)(e.td,{children:"\u663e\u793a\u8fd9\u4e2a\u72b6\u6001\u6301\u7eed\u7684\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u79d2"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"State"}),(0,i.jsx)(e.td,{children:"\u663e\u793a\u4f7f\u7528\u5f53\u524d\u8fde\u63a5\u7684 sql \u8bed\u53e5\u7684\u72b6\u6001\uff0c\u4ee5\u67e5\u8be2\u4e3a\u4f8b\uff0c\u9700\u8981\u7ecf\u8fc7 copying to tmp table\u3001sorting result\u3001sending data\u7b49\u72b6\u6001\u624d\u53ef\u4ee5\u5b8c\u6210"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Info"}),(0,i.jsx)(e.td,{children:"\u663e\u793a\u6267\u884c\u7684 sql \u8bed\u53e5\uff0c\u662f\u5224\u65ad\u95ee\u9898\u8bed\u53e5\u7684\u4e00\u4e2a\u91cd\u8981\u4f9d\u636e"})]})]})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Sending data \u72b6\u6001"}),"\u8868\u793a MySQL \u7ebf\u7a0b\u5f00\u59cb\u8bbf\u95ee\u6570\u636e\u884c\u5e76\u628a\u7ed3\u679c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u800c\u4e0d\u4ec5\u4ec5\u53ea\u662f\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u662f\u5904\u4e8e\u6267\u884c\u5668\u8fc7\u7a0b\u4e2d\u7684\u4efb\u610f\u9636\u6bb5\u3002\u7531\u4e8e\u5728 Sending data \u72b6\u6001\u4e0b\uff0cMySQL \u7ebf\u7a0b\u9700\u8981\u505a\u5927\u91cf\u78c1\u76d8\u8bfb\u53d6\u64cd\u4f5c\uff0c\u6240\u4ee5\u662f\u6574\u4e2a\u67e5\u8be2\u4e2d\u8017\u65f6\u6700\u957f\u7684\u72b6\u6001"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u6267\u884c\u6d41\u7a0b",children:"\u6267\u884c\u6d41\u7a0b"}),"\n",(0,i.jsx)(e.h4,{id:"\u67e5\u8be2\u7f13\u5b58",children:"\u67e5\u8be2\u7f13\u5b58"}),"\n",(0,i.jsx)(e.h5,{id:"\u5de5\u4f5c\u6d41\u7a0b",children:"\u5de5\u4f5c\u6d41\u7a0b"}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u6267\u884c\u5b8c\u5168\u76f8\u540c\u7684 SQL \u8bed\u53e5\u7684\u65f6\u5019\uff0c\u670d\u52a1\u5668\u5c31\u4f1a\u76f4\u63a5\u4ece\u7f13\u5b58\u4e2d\u8bfb\u53d6\u7ed3\u679c\uff0c\u5f53\u6570\u636e\u88ab\u4fee\u6539\uff0c\u4e4b\u524d\u7684\u7f13\u5b58\u4f1a\u5931\u6548\uff0c\u4fee\u6539\u6bd4\u8f83\u9891\u7e41\u7684\u8868\u4e0d\u9002\u5408\u505a\u67e5\u8be2\u7f13\u5b58"}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u8fc7\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u5ba2\u6237\u7aef\u53d1\u9001\u4e00\u6761\u67e5\u8be2\u7ed9\u670d\u52a1\u5668"}),"\n",(0,i.jsx)(e.li,{children:"\u670d\u52a1\u5668\u5148\u4f1a\u68c0\u67e5\u67e5\u8be2\u7f13\u5b58\uff0c\u5982\u679c\u547d\u4e2d\u4e86\u7f13\u5b58\uff0c\u5219\u7acb\u5373\u8fd4\u56de\u5b58\u50a8\u5728\u7f13\u5b58\u4e2d\u7684\u7ed3\u679c\uff08\u4e00\u822c\u662f K-V \u952e\u503c\u5bf9\uff09\uff0c\u5426\u5219\u8fdb\u5165\u4e0b\u4e00\u9636\u6bb5"}),"\n",(0,i.jsx)(e.li,{children:"\u5206\u6790\u5668\u8fdb\u884c SQL \u5206\u6790\uff0c\u518d\u7531\u4f18\u5316\u5668\u751f\u6210\u5bf9\u5e94\u7684\u6267\u884c\u8ba1\u5212"}),"\n",(0,i.jsx)(e.li,{children:"\u6267\u884c\u5668\u6839\u636e\u4f18\u5316\u5668\u751f\u6210\u7684\u6267\u884c\u8ba1\u5212\uff0c\u8c03\u7528\u5b58\u50a8\u5f15\u64ce\u7684 API \u6765\u6267\u884c\u67e5\u8be2"}),"\n",(0,i.jsx)(e.li,{children:"\u5c06\u7ed3\u679c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u4e0d\u5efa\u8bae\u4f7f\u7528\u67e5\u8be2\u7f13\u5b58\uff0c\u56e0\u4e3a\u67e5\u8be2\u7f13\u5b58\u5f80\u5f80\u5f0a\u5927\u4e8e\u5229"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u67e5\u8be2\u7f13\u5b58\u7684",(0,i.jsx)(e.strong,{children:"\u5931\u6548\u975e\u5e38\u9891\u7e41"}),"\uff0c\u53ea\u8981\u6709\u5bf9\u4e00\u4e2a\u8868\u7684\u66f4\u65b0\uff0c\u8fd9\u4e2a\u8868\u4e0a\u6240\u6709\u7684\u67e5\u8be2\u7f13\u5b58\u90fd\u4f1a\u88ab\u6e05\u7a7a\u3002\u56e0\u6b64\u5f88\u53ef\u80fd\u8d39\u529b\u5730\u628a\u7ed3\u679c\u5b58\u8d77\u6765\uff0c\u8fd8\u6ca1\u4f7f\u7528\u5c31\u88ab\u4e00\u4e2a\u66f4\u65b0\u5168\u6e05\u7a7a\u4e86\uff0c\u5bf9\u4e8e\u66f4\u65b0\u538b\u529b\u5927\u7684\u6570\u636e\u5e93\u6765\u8bf4\uff0c\u67e5\u8be2\u7f13\u5b58\u7684\u547d\u4e2d\u7387\u4f1a\u975e\u5e38\u4f4e"]}),"\n",(0,i.jsx)(e.li,{children:"\u9664\u975e\u4e1a\u52a1\u5c31\u662f\u6709\u4e00\u5f20\u9759\u6001\u8868\uff0c\u5f88\u957f\u65f6\u95f4\u624d\u4f1a\u66f4\u65b0\u4e00\u6b21\uff0c\u6bd4\u5982\u4e00\u4e2a\u7cfb\u7edf\u914d\u7f6e\u8868\uff0c\u90a3\u8fd9\u5f20\u8868\u4e0a\u7684\u67e5\u8be2\u624d\u9002\u5408\u4f7f\u7528\u67e5\u8be2\u7f13\u5b58"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u7f13\u5b58\u914d\u7f6e",children:"\u7f13\u5b58\u914d\u7f6e"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u5f53\u524d MySQL \u6570\u636e\u5e93\u662f\u5426\u652f\u6301\u67e5\u8be2\u7f13\u5b58\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW VARIABLES LIKE 'have_query_cache';\t-- YES\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u5f53\u524d MySQL \u662f\u5426\u5f00\u542f\u4e86\u67e5\u8be2\u7f13\u5b58\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW VARIABLES LIKE 'query_cache_type';\t-- OFF\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u53c2\u6570\u8bf4\u660e\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"OFF \u6216 0\uff1a\u67e5\u8be2\u7f13\u5b58\u529f\u80fd\u5173\u95ed"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"ON \u6216 1\uff1a\u67e5\u8be2\u7f13\u5b58\u529f\u80fd\u6253\u5f00\uff0c\u67e5\u8be2\u7ed3\u679c\u7b26\u5408\u7f13\u5b58\u6761\u4ef6\u5373\u4f1a\u7f13\u5b58\uff0c\u5426\u5219\u4e0d\u4e88\u7f13\u5b58\uff1b\u53ef\u4ee5\u663e\u5f0f\u6307\u5b9a SQL_NO_CACHE \u4e0d\u4e88\u7f13\u5b58"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"DEMAND \u6216 2\uff1a\u67e5\u8be2\u7f13\u5b58\u529f\u80fd\u6309\u9700\u8fdb\u884c\uff0c\u663e\u5f0f\u6307\u5b9a SQL_CACHE \u7684 SELECT \u8bed\u53e5\u624d\u7f13\u5b58\uff0c\u5176\u5b83\u4e0d\u4e88\u7f13\u5b58"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT SQL_CACHE id, name FROM customer; -- SQL_CACHE:\u67e5\u8be2\u7ed3\u679c\u53ef\u7f13\u5b58\nSELECT SQL_NO_CACHE id, name FROM customer;-- SQL_NO_CACHE:\u4e0d\u4f7f\u7528\u67e5\u8be2\u7f13\u5b58\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u67e5\u8be2\u7f13\u5b58\u7684\u5360\u7528\u5927\u5c0f\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW VARIABLES LIKE 'query_cache_size';-- \u5355\u4f4d\u662f\u5b57\u8282 1048576 / 1024 = 1024 = 1KB\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u67e5\u8be2\u7f13\u5b58\u7684\u72b6\u6001\u53d8\u91cf\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW STATUS LIKE 'Qcache%';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(58407).A+"",width:"579",height:"273"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u53c2\u6570"}),(0,i.jsx)(e.th,{children:"\u542b\u4e49"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Qcache_free_blocks"}),(0,i.jsx)(e.td,{children:"\u67e5\u8be2\u7f13\u5b58\u4e2d\u7684\u53ef\u7528\u5185\u5b58\u5757\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Qcache_free_memory"}),(0,i.jsx)(e.td,{children:"\u67e5\u8be2\u7f13\u5b58\u7684\u53ef\u7528\u5185\u5b58\u91cf"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Qcache_hits"}),(0,i.jsx)(e.td,{children:"\u67e5\u8be2\u7f13\u5b58\u547d\u4e2d\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Qcache_inserts"}),(0,i.jsx)(e.td,{children:"\u6dfb\u52a0\u5230\u67e5\u8be2\u7f13\u5b58\u7684\u67e5\u8be2\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Qcache_lowmen_prunes"}),(0,i.jsx)(e.td,{children:"\u7531\u4e8e\u5185\u5b58\u4e0d\u8db3\u800c\u4ece\u67e5\u8be2\u7f13\u5b58\u4e2d\u5220\u9664\u7684\u67e5\u8be2\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Qcache_not_cached"}),(0,i.jsx)(e.td,{children:"\u975e\u7f13\u5b58\u67e5\u8be2\u7684\u6570\u91cf\uff08\u7531\u4e8e query_cache_type \u8bbe\u7f6e\u800c\u65e0\u6cd5\u7f13\u5b58\u6216\u672a\u7f13\u5b58\uff09"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Qcache_queries_in_cache"}),(0,i.jsx)(e.td,{children:"\u67e5\u8be2\u7f13\u5b58\u4e2d\u6ce8\u518c\u7684\u67e5\u8be2\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Qcache_total_blocks"}),(0,i.jsx)(e.td,{children:"\u67e5\u8be2\u7f13\u5b58\u4e2d\u7684\u5757\u603b\u6570"})]})]})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u914d\u7f6e my.cnf\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"sudo chmod 666 /etc/mysql/my.cnf\nvim my.cnf\n# mysqld\u4e2d\u914d\u7f6e\u7f13\u5b58\nquery_cache_type=1\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u91cd\u542f\u670d\u52a1\u65e2\u53ef\u751f\u6548\uff0c\u6267\u884c SQL \u8bed\u53e5\u8fdb\u884c\u9a8c\u8bc1 \uff0c\u6267\u884c\u4e00\u6761\u6bd4\u8f83\u8017\u65f6\u7684 SQL \u8bed\u53e5\uff0c\u7136\u540e\u518d\u591a\u6267\u884c\u51e0\u6b21\uff0c\u67e5\u770b\u540e\u9762\u51e0\u6b21\u7684\u6267\u884c\u65f6\u95f4\uff1b\u83b7\u53d6\u901a\u8fc7\u67e5\u770b\u67e5\u8be2\u7f13\u5b58\u7684\u7f13\u5b58\u547d\u4e2d\u6570\uff0c\u6765\u5224\u5b9a\u662f\u5426\u8d70\u67e5\u8be2\u7f13\u5b58"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u7f13\u5b58\u5931\u6548",children:"\u7f13\u5b58\u5931\u6548"}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u7f13\u5b58\u5931\u6548\u7684\u60c5\u51b5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["SQL \u8bed\u53e5\u4e0d\u4e00\u81f4\uff0c\u8981\u60f3\u547d\u4e2d\u67e5\u8be2\u7f13\u5b58\uff0c\u67e5\u8be2\u7684 SQL \u8bed\u53e5\u5fc5\u987b\u4e00\u81f4\uff0c\u56e0\u4e3a",(0,i.jsx)(e.strong,{children:"\u7f13\u5b58\u4e2d key \u662f\u67e5\u8be2\u7684\u8bed\u53e5"}),"\uff0cvalue \u662f\u67e5\u8be2\u7ed3\u6784"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"select count(*) from tb_item;\nSelect count(*) from tb_item;\t-- \u4e0d\u8d70\u7f13\u5b58\uff0c\u9996\u5b57\u6bcd\u4e0d\u4e00\u81f4\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5f53\u67e5\u8be2\u8bed\u53e5\u4e2d\u6709\u4e00\u4e9b\u4e0d\u786e\u5b9a\u67e5\u8be2\u65f6\uff0c\u5219\u4e0d\u4f1a\u7f13\u5b58\uff0c\u6bd4\u5982\uff1anow()\u3001current_date()\u3001curdate()\u3001curtime()\u3001rand()\u3001uuid()\u3001user()\u3001database()"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM tb_item WHERE updatetime < NOW() LIMIT 1;\nSELECT USER();\nSELECT DATABASE();\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e0d\u4f7f\u7528\u4efb\u4f55\u8868\u67e5\u8be2\u8bed\u53e5\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT 'A';\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2 mysql\u3001information_schema\u3001performance_schema \u7b49\u7cfb\u7edf\u8868\u65f6\uff0c\u4e0d\u8d70\u67e5\u8be2\u7f13\u5b58\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM information_schema.engines;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5728",(0,i.jsx)(e.strong,{children:"\u8de8\u5b58\u50a8\u5f15\u64ce"}),"\u7684\u5b58\u50a8\u8fc7\u7a0b\u3001\u89e6\u53d1\u5668\u6216\u5b58\u50a8\u51fd\u6570\u7684\u4e3b\u4f53\u5185\u6267\u884c\u7684\u67e5\u8be2\uff0c\u7f13\u5b58\u5931\u6548"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5982\u679c\u8868\u66f4\u6539\uff0c\u5219\u4f7f\u7528\u8be5\u8868\u7684",(0,i.jsx)(e.strong,{children:"\u6240\u6709\u9ad8\u901f\u7f13\u5b58\u67e5\u8be2\u90fd\u5c06\u53d8\u4e3a\u65e0\u6548"}),"\u5e76\u4ece\u9ad8\u901f\u7f13\u5b58\u4e2d\u5220\u9664\uff0c\u5305\u62ec\u4f7f\u7528 MERGE \u6620\u5c04\u5230\u5df2\u66f4\u6539\u8868\u7684\u8868\u7684\u67e5\u8be2\uff0c\u6bd4\u5982\uff1aINSERT\u3001UPDATE\u3001DELETE\u3001ALTER TABLE\u3001DROP TABLE\u3001DROP DATABASE"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5206\u6790\u5668",children:"\u5206\u6790\u5668"}),"\n",(0,i.jsx)(e.p,{children:"\u6ca1\u6709\u547d\u4e2d\u67e5\u8be2\u7f13\u5b58\uff0c\u5c31\u5f00\u59cb\u4e86 SQL \u7684\u771f\u6b63\u6267\u884c\uff0c\u5206\u6790\u5668\u4f1a\u5bf9 SQL \u8bed\u53e5\u505a\u89e3\u6790"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"SELECT * FROM t WHERE id = 1;\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u89e3\u6790\u5668\uff1a\u5904\u7406\u8bed\u6cd5\u548c\u89e3\u6790\u67e5\u8be2\uff0c\u751f\u6210\u4e00\u8bfe\u5bf9\u5e94\u7684\u89e3\u6790\u6811"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5148\u505a",(0,i.jsx)(e.strong,{children:"\u8bcd\u6cd5\u5206\u6790"}),"\uff0c\u8f93\u5165\u7684\u662f\u7531\u591a\u4e2a\u5b57\u7b26\u4e32\u548c\u7a7a\u683c\u7ec4\u6210\u7684\u4e00\u6761 SQL \u8bed\u53e5\uff0cMySQL \u9700\u8981\u8bc6\u522b\u51fa\u91cc\u9762\u7684\u5b57\u7b26\u4e32\u5206\u522b\u662f\u4ec0\u4e48\u4ee3\u8868\u4ec0\u4e48\u3002\u4ece\u8f93\u5165\u7684 select \u8fd9\u4e2a\u5173\u952e\u5b57\u8bc6\u522b\u51fa\u6765\u8fd9\u662f\u4e00\u4e2a\u67e5\u8be2\u8bed\u53e5\uff1b\u628a\u5b57\u7b26\u4e32 t \u8bc6\u522b\u6210 \u8868\u540d t\uff0c\u628a\u5b57\u7b26\u4e32 id \u8bc6\u522b\u6210\u5217 id"]}),"\n",(0,i.jsxs)(e.li,{children:["\u7136\u540e\u505a",(0,i.jsx)(e.strong,{children:"\u8bed\u6cd5\u5206\u6790"}),"\uff0c\u6839\u636e\u8bcd\u6cd5\u5206\u6790\u7684\u7ed3\u679c\uff0c\u8bed\u6cd5\u5206\u6790\u5668\u4f1a\u6839\u636e\u8bed\u6cd5\u89c4\u5219\uff0c\u5224\u65ad\u4f60\u8f93\u5165\u7684\u8fd9\u4e2a SQL \u8bed\u53e5\u662f\u5426\u6ee1\u8db3 MySQL \u8bed\u6cd5\u3002\u5982\u679c\u8bed\u53e5\u4e0d\u5bf9\uff0c\u5c31\u4f1a\u6536\u5230 ",(0,i.jsx)(e.code,{children:"You have an error in your SQL syntax"})," \u7684\u9519\u8bef\u63d0\u9192"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u9884\u5904\u7406\u5668\uff1a\u8fdb\u4e00\u6b65\u68c0\u67e5\u89e3\u6790\u6811\u7684\u5408\u6cd5\u6027\uff0c\u6bd4\u5982\u6570\u636e\u8868\u548c\u6570\u636e\u5217\u662f\u5426\u5b58\u5728\u3001\u522b\u540d\u662f\u5426\u6709\u6b67\u4e49\u7b49"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u4f18\u5316\u5668",children:"\u4f18\u5316\u5668"}),"\n",(0,i.jsx)(e.h5,{id:"\u6210\u672c\u5206\u6790",children:"\u6210\u672c\u5206\u6790"}),"\n",(0,i.jsx)(e.p,{children:"\u4f18\u5316\u5668\u662f\u5728\u8868\u91cc\u9762\u6709\u591a\u4e2a\u7d22\u5f15\u7684\u65f6\u5019\uff0c\u51b3\u5b9a\u4f7f\u7528\u54ea\u4e2a\u7d22\u5f15\uff1b\u6216\u8005\u5728\u4e00\u4e2a\u8bed\u53e5\u6709\u591a\u8868\u5173\u8054\uff08join\uff09\u7684\u65f6\u5019\uff0c\u51b3\u5b9a\u5404\u4e2a\u8868\u7684\u8fde\u63a5\u987a\u5e8f"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6839\u636e\u641c\u7d22\u6761\u4ef6\u627e\u51fa\u6240\u6709\u53ef\u80fd\u7684\u4f7f\u7528\u7684\u7d22\u5f15"}),"\n",(0,i.jsx)(e.li,{children:"\u6210\u672c\u5206\u6790\uff0c\u6267\u884c\u6210\u672c\u7531 I/O \u6210\u672c\u548c CPU \u6210\u672c\u7ec4\u6210\uff0c\u8ba1\u7b97\u5168\u8868\u626b\u63cf\u548c\u4f7f\u7528\u4e0d\u540c\u7d22\u5f15\u6267\u884c SQL \u7684\u4ee3\u4ef7"}),"\n",(0,i.jsx)(e.li,{children:"\u627e\u5230\u4e00\u4e2a\u6700\u4f18\u7684\u6267\u884c\u65b9\u6848\uff0c\u7528\u6700\u5c0f\u7684\u4ee3\u4ef7\u53bb\u6267\u884c\u8bed\u53e5"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u6570\u636e\u5e93\u91cc\u9762\uff0c\u626b\u63cf\u884c\u6570\u662f\u5f71\u54cd\u6267\u884c\u4ee3\u4ef7\u7684\u56e0\u7d20\u4e4b\u4e00\uff0c\u626b\u63cf\u7684\u884c\u6570\u8d8a\u5c11\u610f\u5473\u7740\u8bbf\u95ee\u78c1\u76d8\u7684\u6b21\u6570\u8d8a\u5c11\uff0c\u6d88\u8017\u7684 CPU \u8d44\u6e90\u8d8a\u5c11\uff0c\u4f18\u5316\u5668\u8fd8\u4f1a\u7ed3\u5408\u662f\u5426\u4f7f\u7528\u4e34\u65f6\u8868\u3001\u662f\u5426\u6392\u5e8f\u7b49\u56e0\u7d20\u8fdb\u884c\u7efc\u5408\u5224\u65ad"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u7edf\u8ba1\u6570\u636e",children:"\u7edf\u8ba1\u6570\u636e"}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u4e2d\u4fdd\u5b58\u7740\u4e24\u79cd\u7edf\u8ba1\u6570\u636e\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"innodb_table_stats \u5b58\u50a8\u4e86\u8868\u7684\u7edf\u8ba1\u6570\u636e\uff0c\u6bcf\u4e00\u6761\u8bb0\u5f55\u5bf9\u5e94\u7740\u4e00\u4e2a\u8868\u7684\u7edf\u8ba1\u6570\u636e"}),"\n",(0,i.jsx)(e.li,{children:"innodb_index_stats \u5b58\u50a8\u4e86\u7d22\u5f15\u7684\u7edf\u8ba1\u6570\u636e\uff0c\u6bcf\u4e00\u6761\u8bb0\u5f55\u5bf9\u5e94\u7740\u4e00\u4e2a\u7d22\u5f15\u7684\u4e00\u4e2a\u7edf\u8ba1\u9879\u7684\u6570\u636e"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["MySQL \u5728\u771f\u6b63\u6267\u884c\u8bed\u53e5\u4e4b\u524d\uff0c\u5e76\u4e0d\u80fd\u7cbe\u786e\u5730\u77e5\u9053\u6ee1\u8db3\u6761\u4ef6\u7684\u8bb0\u5f55\u6709\u591a\u5c11\u6761\uff0c\u53ea\u80fd\u6839\u636e\u7edf\u8ba1\u4fe1\u606f\u6765\u4f30\u7b97\u8bb0\u5f55\uff0c\u7edf\u8ba1\u4fe1\u606f\u5c31\u662f\u7d22\u5f15\u7684\u533a\u5206\u5ea6\uff0c\u4e00\u4e2a\u7d22\u5f15\u4e0a\u4e0d\u540c\u7684\u503c\u7684\u4e2a\u6570\uff08\u6bd4\u5982\u6027\u522b\u53ea\u80fd\u662f\u7537\u5973\uff0c\u5c31\u662f 2 \uff09\uff0c\u79f0\u4e4b\u4e3a\u57fa\u6570\uff08cardinality\uff09\uff0c",(0,i.jsx)(e.strong,{children:"\u57fa\u6570\u8d8a\u5927\u8bf4\u660e\u533a\u5206\u5ea6\u8d8a\u597d"})]}),"\n",(0,i.jsxs)(e.p,{children:["\u901a\u8fc7",(0,i.jsx)(e.strong,{children:"\u91c7\u6837\u7edf\u8ba1"}),"\u6765\u83b7\u53d6\u57fa\u6570\uff0cInnoDB \u9ed8\u8ba4\u4f1a\u9009\u62e9 N \u4e2a\u6570\u636e\u9875\uff0c\u7edf\u8ba1\u8fd9\u4e9b\u9875\u9762\u4e0a\u7684\u4e0d\u540c\u503c\u5f97\u5230\u4e00\u4e2a\u5e73\u5747\u503c\uff0c\u7136\u540e\u4e58\u4ee5\u8fd9\u4e2a\u7d22\u5f15\u7684\u9875\u9762\u6570\uff0c\u5c31\u5f97\u5230\u4e86\u8fd9\u4e2a\u7d22\u5f15\u7684\u57fa\u6570"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5728 MySQL \u4e2d\uff0c\u6709\u4e24\u79cd\u5b58\u50a8\u7edf\u8ba1\u6570\u636e\u7684\u65b9\u5f0f\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u53c2\u6570 ",(0,i.jsx)(e.code,{children:"innodb_stats_persistent"})," \u7684\u503c\u6765\u9009\u62e9\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["ON\uff1a\u8868\u793a\u7edf\u8ba1\u4fe1\u606f\u4f1a\u6301\u4e45\u5316\u5b58\u50a8\uff08\u9ed8\u8ba4\uff09\uff0c\u91c7\u6837\u9875\u6570 N \u9ed8\u8ba4\u4e3a 20\uff0c\u53ef\u4ee5\u901a\u8fc7 ",(0,i.jsx)(e.code,{children:"innodb_stats_persistent_sample_pages"})," \u6307\u5b9a\uff0c\u9875\u6570\u8d8a\u591a\u7edf\u8ba1\u7684\u6570\u636e\u8d8a\u51c6\u786e\uff0c\u4f46\u6d88\u8017\u7684\u8d44\u6e90\u66f4\u5927"]}),"\n",(0,i.jsx)(e.li,{children:"OFF\uff1a\u8868\u793a\u7edf\u8ba1\u4fe1\u606f\u53ea\u5b58\u50a8\u5728\u5185\u5b58\uff0c\u91c7\u6837\u9875\u6570 N \u9ed8\u8ba4\u4e3a 8\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7cfb\u7edf\u53d8\u91cf\u8bbe\u7f6e\uff08\u4e0d\u63a8\u8350\uff0c\u6bcf\u6b21\u91cd\u65b0\u8ba1\u7b97\u6d6a\u8d39\u8d44\u6e90\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u8868\u662f\u4f1a\u6301\u7eed\u66f4\u65b0\u7684\uff0c\u4e24\u79cd\u7edf\u8ba1\u4fe1\u606f\u7684\u66f4\u65b0\u65b9\u5f0f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u8bbe\u7f6e ",(0,i.jsx)(e.code,{children:"innodb_stats_auto_recalc"})," \u4e3a 1\uff0c\u5f53\u53d1\u751f\u53d8\u52a8\u7684\u8bb0\u5f55\u6570\u91cf\u8d85\u8fc7\u8868\u5927\u5c0f\u7684 10% \u65f6\uff0c\u81ea\u52a8\u89e6\u53d1\u91cd\u65b0\u8ba1\u7b97\uff0c\u4e0d\u8fc7\u662f",(0,i.jsx)(e.strong,{children:"\u5f02\u6b65\u8fdb\u884c"})]}),"\n",(0,i.jsxs)(e.li,{children:["\u8c03\u7528 ",(0,i.jsx)(e.code,{children:"ANALYZE TABLE t"})," \u624b\u52a8\u66f4\u65b0\u7edf\u8ba1\u4fe1\u606f\uff0c\u53ea\u5bf9\u4fe1\u606f\u505a",(0,i.jsx)(e.strong,{children:"\u91cd\u65b0\u7edf\u8ba1"}),"\uff08\u4e0d\u662f\u91cd\u5efa\u8868\uff09\uff0c\u6ca1\u6709\u4fee\u6539\u6570\u636e\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u52a0\u4e86 MDL \u8bfb\u9501\u5e76\u4e14\u662f\u540c\u6b65\u8fdb\u884c\uff0c\u6240\u4ee5\u4f1a\u6682\u65f6\u963b\u585e\u7cfb\u7edf"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"EXPLAIN \u6267\u884c\u8ba1\u5212\u5728\u4f18\u5316\u5668\u9636\u6bb5\u751f\u6210"}),"\uff0c\u5982\u679c explain \u7684\u7ed3\u679c\u9884\u4f30\u7684 rows \u503c\u8ddf\u5b9e\u9645\u60c5\u51b5\u5dee\u8ddd\u6bd4\u8f83\u5927\uff0c\u53ef\u4ee5\u6267\u884c analyze \u547d\u4ee4\u91cd\u65b0\u4fee\u6b63\u4fe1\u606f"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u9519\u9009\u7d22\u5f15",children:"\u9519\u9009\u7d22\u5f15"}),"\n",(0,i.jsx)(e.p,{children:"\u91c7\u6837\u7edf\u8ba1\u672c\u8eab\u662f\u4f30\u7b97\u6570\u636e\uff0c\u6216\u8005 SQL \u8bed\u53e5\u4e2d\u7684\u5b57\u6bb5\u9009\u62e9\u6709\u95ee\u9898\u65f6\uff0c\u53ef\u80fd\u5bfc\u81f4 MySQL \u6ca1\u6709\u9009\u62e9\u6b63\u786e\u7684\u6267\u884c\u7d22\u5f15"}),"\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6cd5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u91c7\u7528 force index \u5f3a\u884c\u9009\u62e9\u4e00\u4e2a\u7d22\u5f15"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"SELECT * FROM user FORCE INDEX(name) WHERE NAME='seazean';\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u53ef\u4ee5\u8003\u8651\u4fee\u6539 SQL \u8bed\u53e5\uff0c\u5f15\u5bfc MySQL \u4f7f\u7528\u671f\u671b\u7684\u7d22\u5f15"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u65b0\u5efa\u4e00\u4e2a\u66f4\u5408\u9002\u7684\u7d22\u5f15\uff0c\u6765\u63d0\u4f9b\u7ed9\u4f18\u5316\u5668\u505a\u9009\u62e9\uff0c\u6216\u5220\u6389\u8bef\u7528\u7684\u7d22\u5f15"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6267\u884c\u5668",children:"\u6267\u884c\u5668"}),"\n",(0,i.jsxs)(e.p,{children:["\u5f00\u59cb\u6267\u884c\u7684\u65f6\u5019\uff0c\u8981\u5148\u5224\u65ad\u4e00\u4e0b\u5f53\u524d\u8fde\u63a5\u5bf9\u8868\u6709\u6ca1\u6709",(0,i.jsx)(e.strong,{children:"\u6267\u884c\u67e5\u8be2\u7684\u6743\u9650"}),"\uff0c\u5982\u679c\u6ca1\u6709\u5c31\u4f1a\u8fd4\u56de\u6ca1\u6709\u6743\u9650\u7684\u9519\u8bef\uff0c\u5728\u5de5\u7a0b\u5b9e\u73b0\u4e0a\uff0c\u5982\u679c\u547d\u4e2d\u67e5\u8be2\u7f13\u5b58\uff0c\u4f1a\u5728\u67e5\u8be2\u7f13\u5b58\u8fd4\u56de\u7ed3\u679c\u7684\u65f6\u5019\uff0c\u505a\u6743\u9650\u9a8c\u8bc1\u3002\u5982\u679c\u6709\u6743\u9650\uff0c\u5c31\u6253\u5f00\u8868\u7ee7\u7eed\u6267\u884c\uff0c\u6267\u884c\u5668\u5c31\u4f1a\u6839\u636e\u8868\u7684\u5f15\u64ce\u5b9a\u4e49\uff0c\u53bb\u4f7f\u7528\u8fd9\u4e2a\u5f15\u64ce\u63d0\u4f9b\u7684\u63a5\u53e3"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5f15\u64ce\u5c42",children:"\u5f15\u64ce\u5c42"}),"\n",(0,i.jsxs)(e.p,{children:["Server \u5c42\u548c\u5b58\u50a8\u5f15\u64ce\u5c42\u7684\u4ea4\u4e92\u662f",(0,i.jsx)(e.strong,{children:"\u4ee5\u8bb0\u5f55\u4e3a\u5355\u4f4d\u7684"}),"\uff0c\u5b58\u50a8\u5f15\u64ce\u4f1a\u5c06\u5355\u6761\u8bb0\u5f55\u8fd4\u56de\u7ed9 Server \u5c42\u505a\u8fdb\u4e00\u6b65\u5904\u7406\uff0c\u5e76\u4e0d\u662f\u76f4\u63a5\u8fd4\u56de\u6240\u6709\u7684\u8bb0\u5f55"]}),"\n",(0,i.jsx)(e.p,{children:"\u5de5\u4f5c\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9996\u5148\u6839\u636e\u4e8c\u7ea7\u7d22\u5f15\u9009\u62e9\u626b\u63cf\u8303\u56f4\uff0c\u83b7\u53d6\u7b2c\u4e00\u6761\u7b26\u5408\u4e8c\u7ea7\u7d22\u5f15\u6761\u4ef6\u7684\u8bb0\u5f55\uff0c\u8fdb\u884c\u56de\u8868\u67e5\u8be2\uff0c\u5c06\u805a\u7c07\u7d22\u5f15\u7684\u8bb0\u5f55\u8fd4\u56de Server \u5c42\uff0c\u7531 Server \u5224\u65ad\u8bb0\u5f55\u662f\u5426\u7b26\u5408\u8981\u6c42"}),"\n",(0,i.jsx)(e.li,{children:"\u7136\u540e\u5728\u4e8c\u7ea7\u7d22\u5f15\u4e0a\u7ee7\u7eed\u626b\u63cf\u4e0b\u4e00\u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u8bb0\u5f55"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u63a8\u8350\u9605\u8bfb\uff1a",(0,i.jsx)(e.a,{href:"https://mp.weixin.qq.com/s/YZ-LckObephrP1f15mzHpA",children:"https://mp.weixin.qq.com/s/YZ-LckObephrP1f15mzHpA"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u7ec8\u6b62\u6d41\u7a0b",children:"\u7ec8\u6b62\u6d41\u7a0b"}),"\n",(0,i.jsx)(e.h4,{id:"\u7ec8\u6b62\u8bed\u53e5",children:"\u7ec8\u6b62\u8bed\u53e5"}),"\n",(0,i.jsx)(e.p,{children:"\u7ec8\u6b62\u7ebf\u7a0b\u4e2d\u6b63\u5728\u6267\u884c\u7684\u8bed\u53e5\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"KILL QUERY thread_id\n"})}),"\n",(0,i.jsx)(e.p,{children:"KILL \u4e0d\u662f\u9a6c\u4e0a\u7ec8\u6b62\u7684\u610f\u601d\uff0c\u800c\u662f\u544a\u8bc9\u6267\u884c\u7ebf\u7a0b\u8fd9\u6761\u8bed\u53e5\u5df2\u7ecf\u4e0d\u9700\u8981\u7ee7\u7eed\u6267\u884c\uff0c\u53ef\u4ee5\u5f00\u59cb\u6267\u884c\u505c\u6b62\u7684\u903b\u8f91\uff08\u7c7b\u4f3c\u4e8e\u6253\u65ad\uff09\u3002\u56e0\u4e3a\u5bf9\u8868\u505a\u589e\u5220\u6539\u67e5\u64cd\u4f5c\uff0c\u4f1a\u5728\u8868\u4e0a\u52a0 MDL \u8bfb\u9501\uff0c\u5982\u679c\u7ebf\u7a0b\u88ab KILL \u65f6\u5c31\u76f4\u63a5\u7ec8\u6b62\uff0c\u90a3\u8fd9\u4e2a MDL \u8bfb\u9501\u5c31\u6ca1\u673a\u4f1a\u88ab\u91ca\u653e\u4e86"}),"\n",(0,i.jsxs)(e.p,{children:["\u547d\u4ee4 ",(0,i.jsx)(e.code,{children:"KILL QUERYthread_id_A"})," \u7684\u6267\u884c\u6d41\u7a0b\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u628a session A \u7684\u8fd0\u884c\u72b6\u6001\u6539\u6210 THD::KILL_QUERY\uff08\u5c06\u53d8\u91cf killed \u8d4b\u503c\u4e3a THD::KILL_QUERY\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u7ed9 session A \u7684\u6267\u884c\u7ebf\u7a0b\u53d1\u4e00\u4e2a\u4fe1\u53f7\uff0c\u8ba9 session A \u6765\u5904\u7406\u8fd9\u4e2a THD::KILL_QUERY \u72b6\u6001"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u4f1a\u8bdd\u5904\u4e8e\u7b49\u5f85\u72b6\u6001\uff08\u9501\u963b\u585e\uff09\uff0c\u5fc5\u987b\u6ee1\u8db3\u662f\u4e00\u4e2a\u53ef\u4ee5\u88ab\u5524\u9192\u7684\u7b49\u5f85\uff0c\u5fc5\u987b\u6709\u673a\u4f1a\u53bb",(0,i.jsx)(e.strong,{children:"\u5224\u65ad\u7ebf\u7a0b\u7684\u72b6\u6001"}),"\uff0c\u5982\u679c\u4e0d\u6ee1\u8db3\u5c31\u4f1a\u9020\u6210 KILL \u5931\u8d25"]}),"\n",(0,i.jsx)(e.p,{children:"\u5178\u578b\u573a\u666f\uff1ainnodb_thread_concurrency \u4e3a 2\uff0c\u4ee3\u8868\u5e76\u53d1\u7ebf\u7a0b\u4e0a\u9650\u6570\u8bbe\u7f6e\u4e3a 2"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"session A \u6267\u884c\u4e8b\u52a1\uff0csession B \u6267\u884c\u4e8b\u52a1\uff0c\u8fbe\u5230\u7ebf\u7a0b\u4e0a\u9650\uff1b\u6b64\u65f6 session C \u6267\u884c\u4e8b\u52a1\u4f1a\u963b\u585e\u7b49\u5f85\uff0csession D \u6267\u884c kill query C \u65e0\u6548"}),"\n",(0,i.jsx)(e.li,{children:"C \u7684\u903b\u8f91\u662f\u6bcf 10 \u6beb\u79d2\u5224\u65ad\u662f\u5426\u53ef\u4ee5\u8fdb\u5165 InnoDB \u6267\u884c\uff0c\u5982\u679c\u4e0d\u884c\u5c31\u8c03\u7528 nanosleep \u51fd\u6570\u8fdb\u5165 sleep \u72b6\u6001\uff0c\u6ca1\u6709\u53bb\u5224\u65ad\u7ebf\u7a0b\u72b6\u6001"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8865\u5145\uff1a\u6267\u884c Ctrl+C \u7684\u65f6\u5019\uff0c\u662f MySQL \u5ba2\u6237\u7aef\u53e6\u5916\u542f\u52a8\u4e00\u4e2a\u8fde\u63a5\uff0c\u7136\u540e\u53d1\u9001\u4e00\u4e2a KILL QUERY \u547d\u4ee4"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u7ec8\u6b62\u8fde\u63a5",children:"\u7ec8\u6b62\u8fde\u63a5"}),"\n",(0,i.jsx)(e.p,{children:"\u65ad\u5f00\u7ebf\u7a0b\u7684\u8fde\u63a5\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"KILL CONNECTION id\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u65ad\u5f00\u8fde\u63a5\u540e\u6267\u884c SHOW PROCESSLIST \u547d\u4ee4\uff0c\u5982\u679c\u8fd9\u6761\u8bed\u53e5\u7684 Command \u5217\u663e\u793a Killed\uff0c\u4ee3\u8868\u7ebf\u7a0b\u7684\u72b6\u6001\u662f KILL_CONNECTION\uff0c\u8bf4\u660e\u8fd9\u4e2a\u7ebf\u7a0b\u6709\u8bed\u53e5\u6b63\u5728\u6267\u884c\uff0c\u5f53\u524d\u72b6\u6001\u662f\u505c\u6b62\u8bed\u53e5\u6267\u884c\u4e2d\uff0c\u7ec8\u6b62\u903b\u8f91\u8017\u65f6\u8f83\u957f"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8d85\u5927\u4e8b\u52a1\u6267\u884c\u671f\u95f4\u88ab KILL\uff0c\u8fd9\u65f6\u56de\u6eda\u64cd\u4f5c\u9700\u8981\u5bf9\u4e8b\u52a1\u6267\u884c\u671f\u95f4\u751f\u6210\u7684\u6240\u6709\u65b0\u6570\u636e\u7248\u672c\u505a\u56de\u6536\u64cd\u4f5c\uff0c\u8017\u65f6\u5f88\u957f"}),"\n",(0,i.jsx)(e.li,{children:"\u5927\u67e5\u8be2\u56de\u6eda\uff0c\u5982\u679c\u67e5\u8be2\u8fc7\u7a0b\u4e2d\u751f\u6210\u4e86\u6bd4\u8f83\u5927\u7684\u4e34\u65f6\u6587\u4ef6\uff0c\u5220\u9664\u4e34\u65f6\u6587\u4ef6\u53ef\u80fd\u9700\u8981\u7b49\u5f85 IO \u8d44\u6e90\uff0c\u5bfc\u81f4\u8017\u65f6\u8f83\u957f"}),"\n",(0,i.jsx)(e.li,{children:"DDL \u547d\u4ee4\u6267\u884c\u5230\u6700\u540e\u9636\u6bb5\u88ab KILL\uff0c\u9700\u8981\u5220\u9664\u4e2d\u95f4\u8fc7\u7a0b\u7684\u4e34\u65f6\u6587\u4ef6\uff0c\u4e5f\u53ef\u80fd\u53d7 IO \u8d44\u6e90\u5f71\u54cd\u8017\u65f6\u8f83\u4e45"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u603b\u7ed3\uff1aKILL CONNECTION \u672c\u8d28\u4e0a\u53ea\u662f\u628a\u5ba2\u6237\u7aef\u7684 SQL \u8fde\u63a5\u65ad\u5f00\uff0c\u540e\u9762\u7684\u7ec8\u6b62\u6d41\u7a0b\u8fd8\u662f\u8981\u8d70 KILL QUERY"}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u4e2a\u4e8b\u52a1\u88ab KILL \u4e4b\u540e\uff0c\u6301\u7eed\u5904\u4e8e\u56de\u6eda\u72b6\u6001\uff0c\u4e0d\u5e94\u8be5\u5f3a\u884c\u91cd\u542f\u6574\u4e2a MySQL \u8fdb\u7a0b\uff0c\u5e94\u8be5\u7b49\u5f85\u4e8b\u52a1\u81ea\u5df1\u6267\u884c\u5b8c\u6210\uff0c\u56e0\u4e3a\u91cd\u542f\u540e\u4f9d\u7136\u7ee7\u7eed\u505a\u56de\u6eda\u64cd\u4f5c\u7684\u903b\u8f91"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5e38\u7528\u5de5\u5177",children:"\u5e38\u7528\u5de5\u5177"}),"\n",(0,i.jsx)(e.h4,{id:"mysql-2",children:"mysql"}),"\n",(0,i.jsx)(e.p,{children:"mysql \u4e0d\u662f\u6307 mysql \u670d\u52a1\uff0c\u800c\u662f\u6307 mysql \u7684\u5ba2\u6237\u7aef\u5de5\u5177"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"mysql [options] [database]\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"-u  --user=name\uff1a\u6307\u5b9a\u7528\u6237\u540d"}),"\n",(0,i.jsx)(e.li,{children:"-p  --password[=name]\uff1a\u6307\u5b9a\u5bc6\u7801"}),"\n",(0,i.jsx)(e.li,{children:"-h  --host=name\uff1a\u6307\u5b9a\u670d\u52a1\u5668IP\u6216\u57df\u540d"}),"\n",(0,i.jsx)(e.li,{children:"-P  --port=#\uff1a\u6307\u5b9a\u8fde\u63a5\u7aef\u53e3"}),"\n",(0,i.jsx)(e.li,{children:"-e  --execute=name\uff1a\u6267\u884cSQL\u8bed\u53e5\u5e76\u9000\u51fa\uff0c\u5728\u63a7\u5236\u53f0\u6267\u884cSQL\u8bed\u53e5\uff0c\u800c\u4e0d\u7528\u8fde\u63a5\u5230\u6570\u636e\u5e93\u6267\u884c"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u793a\u4f8b\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'mysql -h 127.0.0.1 -P 3306 -u root -p\nmysql -uroot -p2143 db01 -e "select * from tb_book";\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"admin",children:"admin"}),"\n",(0,i.jsx)(e.p,{children:"mysqladmin \u662f\u4e00\u4e2a\u6267\u884c\u7ba1\u7406\u64cd\u4f5c\u7684\u5ba2\u6237\u7aef\u7a0b\u5e8f\uff0c\u7528\u6765\u68c0\u67e5\u670d\u52a1\u5668\u7684\u914d\u7f6e\u548c\u5f53\u524d\u72b6\u6001\u3001\u521b\u5efa\u5e76\u5220\u9664\u6570\u636e\u5e93\u7b49"}),"\n",(0,i.jsxs)(e.p,{children:["\u901a\u8fc7 ",(0,i.jsx)(e.code,{children:"mysqladmin --help"})," \u6307\u4ee4\u67e5\u770b\u5e2e\u52a9\u6587\u6863"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"mysqladmin -uroot -p2143 create 'test01';\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"binlog",children:"binlog"}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u751f\u6210\u7684\u65e5\u5fd7\u6587\u4ef6\u4ee5\u4e8c\u8fdb\u5236\u683c\u5f0f\u4fdd\u5b58\uff0c\u5982\u679c\u9700\u8981\u68c0\u67e5\u8fd9\u4e9b\u6587\u672c\uff0c\u5c31\u8981\u4f7f\u7528 mysqlbinlog \u65e5\u5fd7\u7ba1\u7406\u5de5\u5177"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"mysqlbinlog [options]  log-files1 log-files2 ...\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"-d  --database=name\uff1a\u6307\u5b9a\u6570\u636e\u5e93\u540d\u79f0\uff0c\u53ea\u5217\u51fa\u6307\u5b9a\u7684\u6570\u636e\u5e93\u76f8\u5173\u64cd\u4f5c"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"-o  --offset=#\uff1a\u5ffd\u7565\u6389\u65e5\u5fd7\u4e2d\u7684\u524d n \u884c\u547d\u4ee4\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"-r  --result-file=name\uff1a\u5c06\u8f93\u51fa\u7684\u6587\u672c\u683c\u5f0f\u65e5\u5fd7\u8f93\u51fa\u5230\u6307\u5b9a\u6587\u4ef6\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"-s  --short-form\uff1a\u663e\u793a\u7b80\u5355\u683c\u5f0f\uff0c\u7701\u7565\u6389\u4e00\u4e9b\u4fe1\u606f\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"--start-datatime=date1  --stop-datetime=date2\uff1a\u6307\u5b9a\u65e5\u671f\u95f4\u9694\u5185\u7684\u6240\u6709\u65e5\u5fd7"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"--start-position=pos1 --stop-position=pos2\uff1a\u6307\u5b9a\u4f4d\u7f6e\u95f4\u9694\u5185\u7684\u6240\u6709\u65e5\u5fd7"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"dump",children:"dump"}),"\n",(0,i.jsx)(e.h5,{id:"\u547d\u4ee4\u4ecb\u7ecd",children:"\u547d\u4ee4\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.p,{children:"mysqldump \u5ba2\u6237\u7aef\u5de5\u5177\u7528\u6765\u5907\u4efd\u6570\u636e\u5e93\u6216\u5728\u4e0d\u540c\u6570\u636e\u5e93\u4e4b\u95f4\u8fdb\u884c\u6570\u636e\u8fc1\u79fb\uff0c\u5907\u4efd\u5185\u5bb9\u5305\u542b\u521b\u5efa\u8868\uff0c\u53ca\u63d2\u5165\u8868\u7684 SQL \u8bed\u53e5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"mysqldump [options] db_name [tables]\nmysqldump [options] --database/-B db1 [db2 db3...]\nmysqldump [options] --all-databases/-A\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8fde\u63a5\u9009\u9879\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"-u  --user=name\uff1a\u6307\u5b9a\u7528\u6237\u540d"}),"\n",(0,i.jsx)(e.li,{children:"-p  --password[=name]\uff1a\u6307\u5b9a\u5bc6\u7801"}),"\n",(0,i.jsx)(e.li,{children:"-h  --host=name\uff1a\u6307\u5b9a\u670d\u52a1\u5668 IP \u6216\u57df\u540d"}),"\n",(0,i.jsx)(e.li,{children:"-P  --port=#\uff1a\u6307\u5b9a\u8fde\u63a5\u7aef\u53e3"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8f93\u51fa\u5185\u5bb9\u9009\u9879\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"--add-drop-database\uff1a\u5728\u6bcf\u4e2a\u6570\u636e\u5e93\u521b\u5efa\u8bed\u53e5\u524d\u52a0\u4e0a Drop database \u8bed\u53e5"}),"\n",(0,i.jsx)(e.li,{children:"--add-drop-table\uff1a\u5728\u6bcf\u4e2a\u8868\u521b\u5efa\u8bed\u53e5\u524d\u52a0\u4e0a Drop table \u8bed\u53e5 , \u9ed8\u8ba4\u5f00\u542f\uff0c\u4e0d\u5f00\u542f (--skip-add-drop-table)"}),"\n",(0,i.jsx)(e.li,{children:"-n  --no-create-db\uff1a\u4e0d\u5305\u542b\u6570\u636e\u5e93\u7684\u521b\u5efa\u8bed\u53e5"}),"\n",(0,i.jsx)(e.li,{children:"-t  --no-create-info\uff1a\u4e0d\u5305\u542b\u6570\u636e\u8868\u7684\u521b\u5efa\u8bed\u53e5"}),"\n",(0,i.jsx)(e.li,{children:"-d --no-data\uff1a\u4e0d\u5305\u542b\u6570\u636e"}),"\n",(0,i.jsx)(e.li,{children:"-T, --tab=name\uff1a\u81ea\u52a8\u751f\u6210\u4e24\u4e2a\u6587\u4ef6\uff1a\u4e00\u4e2a .sql \u6587\u4ef6\uff0c\u521b\u5efa\u8868\u7ed3\u6784\u7684\u8bed\u53e5\uff1b\u4e00\u4e2a .txt \u6587\u4ef6\uff0c\u6570\u636e\u6587\u4ef6\uff0c\u76f8\u5f53\u4e8e select into outfile"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u793a\u4f8b\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"mysqldump -uroot -p2143 db01 tb_book --add-drop-database --add-drop-table > a\nmysqldump -uroot -p2143 -T /tmp test city\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u6570\u636e\u5907\u4efd",children:"\u6570\u636e\u5907\u4efd"}),"\n",(0,i.jsx)(e.p,{children:"\u547d\u4ee4\u884c\u65b9\u5f0f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5907\u4efd\u547d\u4ee4\uff1amysqldump -u root -p \u6570\u636e\u5e93\u540d\u79f0 > \u6587\u4ef6\u4fdd\u5b58\u8def\u5f84"}),"\n",(0,i.jsxs)(e.li,{children:["\u6062\u590d\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\u767b\u5f55MySQL\u6570\u636e\u5e93\uff1a",(0,i.jsx)(e.code,{children:"mysql -u root p"})]}),"\n",(0,i.jsx)(e.li,{children:"\u5220\u9664\u5df2\u7ecf\u5907\u4efd\u7684\u6570\u636e\u5e93"}),"\n",(0,i.jsx)(e.li,{children:"\u91cd\u65b0\u521b\u5efa\u4e0e\u5907\u4efd\u6570\u636e\u5e93\u540d\u79f0\u76f8\u540c\u7684\u6570\u636e\u5e93"}),"\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u8be5\u6570\u636e\u5e93"}),"\n",(0,i.jsxs)(e.li,{children:["\u5bfc\u5165\u6587\u4ef6\u6267\u884c\uff1a",(0,i.jsx)(e.code,{children:"source \u5907\u4efd\u6587\u4ef6\u5168\u8def\u5f84"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u66f4\u591a\u65b9\u5f0f\u53c2\u8003\uff1a",(0,i.jsx)(e.a,{href:"https://time.geekbang.org/column/article/81925",children:"https://time.geekbang.org/column/article/81925"})]}),"\n",(0,i.jsx)(e.p,{children:"\u56fe\u5f62\u5316\u754c\u9762\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5907\u4efd"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"\u56fe\u5f62\u5316\u754c\u9762\u5907\u4efd",src:s(97890).A+"",width:"1051",height:"341"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6062\u590d"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"\u56fe\u5f62\u5316\u754c\u9762\u6062\u590d",src:s(89909).A+"",width:"981",height:"324"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"import",children:"import"}),"\n",(0,i.jsx)(e.p,{children:"mysqlimport \u662f\u5ba2\u6237\u7aef\u6570\u636e\u5bfc\u5165\u5de5\u5177\uff0c\u7528\u6765\u5bfc\u5165mysqldump \u52a0 -T \u53c2\u6570\u540e\u5bfc\u51fa\u7684\u6587\u672c\u6587\u4ef6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"mysqlimport [options]  db_name  textfile1  [textfile2...]\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u793a\u4f8b\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"mysqlimport -uroot -p2143 test /tmp/city.txt\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5bfc\u5165 sql \u6587\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528 MySQL \u4e2d\u7684 source \u6307\u4ee4 :"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"source \u6587\u4ef6\u5168\u8def\u5f84\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"show",children:"show"}),"\n",(0,i.jsx)(e.p,{children:"mysqlshow \u5ba2\u6237\u7aef\u5bf9\u8c61\u67e5\u627e\u5de5\u5177\uff0c\u7528\u6765\u5f88\u5feb\u5730\u67e5\u627e\u5b58\u5728\u54ea\u4e9b\u6570\u636e\u5e93\u3001\u6570\u636e\u5e93\u4e2d\u7684\u8868\u3001\u8868\u4e2d\u7684\u5217\u6216\u8005\u7d22\u5f15"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"mysqlshow [options] [db_name [table_name [col_name]]]\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"--count\uff1a\u663e\u793a\u6570\u636e\u5e93\u53ca\u8868\u7684\u7edf\u8ba1\u4fe1\u606f\uff08\u6570\u636e\u5e93\uff0c\u8868 \u5747\u53ef\u4ee5\u4e0d\u6307\u5b9a\uff09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"-i\uff1a\u663e\u793a\u6307\u5b9a\u6570\u636e\u5e93\u6216\u8005\u6307\u5b9a\u8868\u7684\u72b6\u6001\u4fe1\u606f"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u793a\u4f8b\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"#\u67e5\u8be2\u6bcf\u4e2a\u6570\u636e\u5e93\u7684\u8868\u7684\u6570\u91cf\u53ca\u8868\u4e2d\u8bb0\u5f55\u7684\u6570\u91cf\nmysqlshow -uroot -p1234 --count\n#\u67e5\u8be2test\u5e93\u4e2d\u6bcf\u4e2a\u8868\u4e2d\u7684\u5b57\u6bb5\u4e66\uff0c\u53ca\u884c\u6570\nmysqlshow -uroot -p1234 test --count\n#\u67e5\u8be2test\u5e93\u4e2dbook\u8868\u7684\u8be6\u7ec6\u60c5\u51b5\nmysqlshow -uroot -p1234 test book --count\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u5355\u8868\u64cd\u4f5c",children:"\u5355\u8868\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.h3,{id:"sql",children:"SQL"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"SQL"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Structured Query Language\uff1a\u7ed3\u6784\u5316\u67e5\u8be2\u8bed\u8a00"}),"\n",(0,i.jsx)(e.li,{children:"\u5b9a\u4e49\u4e86\u64cd\u4f5c\u6240\u6709\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u89c4\u5219\uff0c\u6bcf\u79cd\u6570\u636e\u5e93\u64cd\u4f5c\u7684\u65b9\u5f0f\u53ef\u80fd\u4f1a\u5b58\u5728\u4e0d\u4e00\u6837\u7684\u5730\u65b9\uff0c\u79f0\u4e3a\u201c\u65b9\u8a00\u201d"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"SQL \u901a\u7528\u8bed\u6cd5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["SQL \u8bed\u53e5\u53ef\u4ee5\u5355\u884c\u6216\u591a\u884c\u4e66\u5199\uff0c\u4ee5",(0,i.jsx)(e.strong,{children:"\u5206\u53f7\u7ed3\u5c3e"}),"\u3002"]}),"\n",(0,i.jsx)(e.li,{children:"\u53ef\u4f7f\u7528\u7a7a\u683c\u548c\u7f29\u8fdb\u6765\u589e\u5f3a\u8bed\u53e5\u7684\u53ef\u8bfb\u6027\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["MySQL \u6570\u636e\u5e93\u7684 SQL \u8bed\u53e5\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c",(0,i.jsx)(e.strong,{children:"\u5173\u952e\u5b57\u5efa\u8bae\u4f7f\u7528\u5927\u5199"}),"\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:["\u6570\u636e\u5e93\u7684\u6ce8\u91ca\uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5355\u884c\u6ce8\u91ca\uff1a-- \u6ce8\u91ca\u5185\u5bb9       #\u6ce8\u91ca\u5185\u5bb9\uff08MySQL \u7279\u6709\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u591a\u884c\u6ce8\u91ca\uff1a/* \u6ce8\u91ca\u5185\u5bb9 */"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"SQL \u5206\u7c7b"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"DDL\uff08Data Definition Language\uff09\u6570\u636e\u5b9a\u4e49\u8bed\u8a00"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7528\u6765\u5b9a\u4e49\u6570\u636e\u5e93\u5bf9\u8c61\uff1a\u6570\u636e\u5e93\uff0c\u8868\uff0c\u5217\u7b49\u3002\u5173\u952e\u5b57\uff1acreate\u3001drop,\u3001alter \u7b49"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"DML\uff08Data Manipulation Language\uff09\u6570\u636e\u64cd\u4f5c\u8bed\u8a00"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7528\u6765\u5bf9\u6570\u636e\u5e93\u4e2d\u8868\u7684\u6570\u636e\u8fdb\u884c\u589e\u5220\u6539\u3002\u5173\u952e\u5b57\uff1ainsert\u3001delete\u3001update \u7b49"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"DQL\uff08Data Query Language\uff09\u6570\u636e\u67e5\u8be2\u8bed\u8a00"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7528\u6765\u67e5\u8be2\u6570\u636e\u5e93\u4e2d\u8868\u7684\u8bb0\u5f55(\u6570\u636e)\u3002\u5173\u952e\u5b57\uff1aselect\u3001where \u7b49"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"DCL\uff08Data Control Language\uff09\u6570\u636e\u63a7\u5236\u8bed\u8a00"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7528\u6765\u5b9a\u4e49\u6570\u636e\u5e93\u7684\u8bbf\u95ee\u6743\u9650\u548c\u5b89\u5168\u7ea7\u522b\uff0c\u53ca\u521b\u5efa\u7528\u6237\u3002\u5173\u952e\u5b57\uff1agrant\uff0c revoke\u7b49"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(88638).A+"",width:"1506",height:"657"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"ddl",children:"DDL"}),"\n",(0,i.jsx)(e.h4,{id:"\u6570\u636e\u5e93-1",children:"\u6570\u636e\u5e93"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"R(Retrieve)\uff1a\u67e5\u8be2"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u6240\u6709\u6570\u636e\u5e93\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW DATABASES;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u67d0\u4e2a\u6570\u636e\u5e93\u7684\u521b\u5efa\u8bed\u53e5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"SHOW CREATE DATABASE \u6570\u636e\u5e93\u540d\u79f0;  -- \u6807\u51c6\u8bed\u6cd5\n\nSHOW CREATE DATABASE mysql;     -- \u67e5\u770bmysql\u6570\u636e\u5e93\u7684\u521b\u5efa\u683c\u5f0f\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"C(Create)\uff1a\u521b\u5efa"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u6570\u636e\u5e93"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE DATABASE \u6570\u636e\u5e93\u540d\u79f0;-- \u6807\u51c6\u8bed\u6cd5\n\nCREATE DATABASE db1;     -- \u521b\u5efadb1\u6570\u636e\u5e93\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u6570\u636e\u5e93\uff08\u5224\u65ad\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5219\u521b\u5efa\uff09"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE DATABASE IF NOT EXISTS \u6570\u636e\u5e93\u540d\u79f0;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u6570\u636e\u5e93\uff0c\u5e76\u6307\u5b9a\u5b57\u7b26\u96c6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE DATABASE \u6570\u636e\u5e93\u540d\u79f0 CHARACTER SET \u5b57\u7b26\u96c6\u540d\u79f0;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f8b\u5982\uff1a\u521b\u5efadb4\u6570\u636e\u5e93\u3001\u5982\u679c\u4e0d\u5b58\u5728\u5219\u521b\u5efa\uff0c\u6307\u5b9a\u5b57\u7b26\u96c6\u4e3agbk"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u521b\u5efadb4\u6570\u636e\u5e93\u3001\u5982\u679c\u4e0d\u5b58\u5728\u5219\u521b\u5efa\uff0c\u6307\u5b9a\u5b57\u7b26\u96c6\u4e3agbk\nCREATE DATABASE IF NOT EXISTS db4 CHARACTER SET gbk;\n\n-- \u67e5\u770bdb4\u6570\u636e\u5e93\u7684\u5b57\u7b26\u96c6\nSHOW CREATE DATABASE db4;\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"U(Update)\uff1a\u4fee\u6539"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539\u6570\u636e\u5e93\u7684\u5b57\u7b26\u96c6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER DATABASE \u6570\u636e\u5e93\u540d\u79f0 CHARACTER SET \u5b57\u7b26\u96c6\u540d\u79f0;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5e38\u7528\u5b57\u7b26\u96c6\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"--\u67e5\u8be2\u6240\u6709\u652f\u6301\u7684\u5b57\u7b26\u96c6\nSHOW CHARSET;\n--\u67e5\u770b\u6240\u6709\u652f\u6301\u7684\u6821\u5bf9\u89c4\u5219\nSHOW COLLATION;\n\n-- \u5b57\u7b26\u96c6: utf8,latinI,GBK,,GBK\u662futf8\u7684\u5b50\u96c6\n-- \u6821\u5bf9\u89c4\u5219: ci \u5927\u5c0f\u5b9a\u4e0d\u654f\u611f\uff0ccs\u6216bin\u5927\u5c0f\u5199\u654f\u611f\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"D(Delete)\uff1a\u5220\u9664"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u6570\u636e\u5e93\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DROP DATABASE \u6570\u636e\u5e93\u540d\u79f0;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u6570\u636e\u5e93(\u5224\u65ad\uff0c\u5982\u679c\u5b58\u5728\u5219\u5220\u9664)\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DROP DATABASE IF EXISTS \u6570\u636e\u5e93\u540d\u79f0;\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u6570\u636e\u5e93\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u5f53\u524d\u6b63\u5728\u4f7f\u7528\u7684\u6570\u636e\u5e93\u540d\u79f0"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT DATABASE();\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u6570\u636e\u5e93"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"USE \u6570\u636e\u5e93\u540d\u79f0\uff1b -- \u6807\u51c6\u8bed\u6cd5\nUSE db4;\t   -- \u4f7f\u7528db4\u6570\u636e\u5e93\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6570\u636e\u8868",children:"\u6570\u636e\u8868"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"R(Retrieve)\uff1a\u67e5\u8be2"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u6570\u636e\u5e93\u4e2d\u6240\u6709\u7684\u6570\u636e\u8868"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"USE mysql;-- \u4f7f\u7528mysql\u6570\u636e\u5e93\n\nSHOW TABLES;-- \u67e5\u8be2\u5e93\u4e2d\u6240\u6709\u7684\u8868\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u8868\u7ed3\u6784"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"DESC \u8868\u540d;"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\n- \u67e5\u8be2\u8868\u5b57\u7b26\u96c6\n\n```mysql\nSHOW TABLE STATUS FROM \u5e93\u540d LIKE '\u8868\u540d';\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"C(Create)\uff1a\u521b\u5efa"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u6570\u636e\u8868"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE TABLE \u8868\u540d(\n    \u5217\u540d1 \u6570\u636e\u7c7b\u578b1,\n    \u5217\u540d2 \u6570\u636e\u7c7b\u578b2,\n    ....\n    \u5217\u540dn \u6570\u636e\u7c7b\u578bn\n);\n-- \u6ce8\u610f\uff1a\u6700\u540e\u4e00\u5217\uff0c\u4e0d\u9700\u8981\u52a0\u9017\u53f7\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u590d\u5236\u8868"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE TABLE \u8868\u540d LIKE \u88ab\u590d\u5236\u7684\u8868\u540d;  -- \u6807\u51c6\u8bed\u6cd5\n\nCREATE TABLE product2 LIKE product; -- \u590d\u5236product\u8868\u5230product2\u8868\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u7c7b\u578b"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u6570\u636e\u7c7b\u578b"}),(0,i.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"INT"}),(0,i.jsx)(e.td,{children:"\u6574\u6570\u7c7b\u578b"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"DOUBLE"}),(0,i.jsx)(e.td,{children:"\u5c0f\u6570\u7c7b\u578b"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"DATE"}),(0,i.jsx)(e.td,{children:"\u65e5\u671f\uff0c\u53ea\u5305\u542b\u5e74\u6708\u65e5\uff1ayyyy-MM-dd"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"DATETIME"}),(0,i.jsx)(e.td,{children:"\u65e5\u671f\uff0c\u5305\u542b\u5e74\u6708\u65e5\u65f6\u5206\u79d2\uff1ayyyy-MM-dd HH:mm:ss"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"TIMESTAMP"}),(0,i.jsxs)(e.td,{children:["\u65f6\u95f4\u6233\u7c7b\u578b\uff0c\u5305\u542b\u5e74\u6708\u65e5\u65f6\u5206\u79d2\uff1ayyyy-MM-dd HH:mm:ss",(0,i.jsx)(e.br,{}),"\u5982\u679c\u4e0d\u7ed9\u8fd9\u4e2a\u5b57\u6bb5\u8d4b\u503c\u6216\u8d4b\u503c\u4e3a NULL\uff0c\u5219\u9ed8\u8ba4\u4f7f\u7528\u5f53\u524d\u7684\u7cfb\u7edf\u65f6\u95f4"]})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"CHAR"}),(0,i.jsx)(e.td,{children:"\u5b57\u7b26\u4e32\uff0c\u5b9a\u957f\u7c7b\u578b"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"VARCHAR"}),(0,i.jsxs)(e.td,{children:["\u5b57\u7b26\u4e32\uff0c",(0,i.jsx)(e.strong,{children:"\u53d8\u957f\u7c7b\u578b"}),(0,i.jsx)(e.br,{}),"name varchar(20) \u4ee3\u8868\u59d3\u540d\u6700\u5927 20 \u4e2a\u5b57\u7b26\uff1azhangsan 8 \u4e2a\u5b57\u7b26\uff0c\u5f20\u4e09 2 \u4e2a\u5b57\u7b26"]})]})]})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"INT(n)"}),"\uff1an \u4ee3\u8868\u4f4d\u6570"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"3\uff1aint\uff089\uff09\u663e\u793a\u7ed3\u679c\u4e3a 000000010"}),"\n",(0,i.jsx)(e.li,{children:"3\uff1aint\uff083\uff09\u663e\u793a\u7ed3\u679c\u4e3a 010"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"varchar(n)"}),"\uff1an \u8868\u793a\u7684\u662f\u5b57\u7b26\u6570"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f8b\u5982\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u4f7f\u7528db3\u6570\u636e\u5e93\nUSE db3;\n\n-- \u521b\u5efa\u4e00\u4e2aproduct\u5546\u54c1\u8868\nCREATE TABLE product(\n\tid INT,\t\t\t\t-- \u5546\u54c1\u7f16\u53f7\n\tNAME VARCHAR(30),\t-- \u5546\u54c1\u540d\u79f0\n\tprice DOUBLE,\t\t-- \u5546\u54c1\u4ef7\u683c\n\tstock INT,\t\t\t-- \u5546\u54c1\u5e93\u5b58\n\tinsert_time DATE    -- \u4e0a\u67b6\u65f6\u95f4\n);\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u200b"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"U(Update)\uff1a\u4fee\u6539"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539\u8868\u540d"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d RENAME TO \u65b0\u7684\u8868\u540d;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539\u8868\u7684\u5b57\u7b26\u96c6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"ALTER TABLE \u8868\u540d CHARACTER SET \u5b57\u7b26\u96c6\u540d\u79f0;"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\n- \u6dfb\u52a0\u4e00\u5217\n\n```mysql\nALTER TABLE \u8868\u540d ADD \u5217\u540d \u6570\u636e\u7c7b\u578b;\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539\u5217\u6570\u636e\u7c7b\u578b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d MODIFY \u5217\u540d \u65b0\u6570\u636e\u7c7b\u578b;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539\u5217\u540d\u79f0\u548c\u6570\u636e\u7c7b\u578b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d CHANGE \u5217\u540d \u65b0\u5217\u540d \u65b0\u6570\u636e\u7c7b\u578b;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u5217"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d DROP \u5217\u540d;\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"D(Delete)\uff1a\u5220\u9664"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u6570\u636e\u8868"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DROP TABLE \u8868\u540d;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u6570\u636e\u8868(\u5224\u65ad\uff0c\u5982\u679c\u5b58\u5728\u5219\u5220\u9664)"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DROP TABLE IF EXISTS \u8868\u540d;\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"dml",children:"DML"}),"\n",(0,i.jsx)(e.h4,{id:"insert",children:"INSERT"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u65b0\u589e\u8868\u6570\u636e"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u65b0\u589e\u683c\u5f0f 1\uff1a\u7ed9\u6307\u5b9a\u5217\u6dfb\u52a0\u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"INSERT INTO \u8868\u540d(\u5217\u540d1,\u5217\u540d2...) VALUES (\u503c1,\u503c2...);\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u65b0\u589e\u683c\u5f0f 2\uff1a\u9ed8\u8ba4\u7ed9\u5168\u90e8\u5217\u6dfb\u52a0\u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"INSERT INTO \u8868\u540d VALUES (\u503c1,\u503c2,\u503c3,...);\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u65b0\u589e\u683c\u5f0f 3\uff1a\u6279\u91cf\u6dfb\u52a0\u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u7ed9\u6307\u5b9a\u5217\u6279\u91cf\u6dfb\u52a0\u6570\u636e\nINSERT INTO \u8868\u540d(\u5217\u540d1,\u5217\u540d2,...) VALUES (\u503c1,\u503c2,...),(\u503c1,\u503c2,...)...;\n\n-- \u9ed8\u8ba4\u7ed9\u6240\u6709\u5217\u6279\u91cf\u6dfb\u52a0\u6570\u636e \nINSERT INTO \u8868\u540d VALUES (\u503c1,\u503c2,\u503c3,...),(\u503c1,\u503c2,\u503c3,...)...;\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b57\u7b26\u4e32\u62fc\u63a5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CONCAT(string1,string2,'',...)\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5217\u540d\u548c\u503c\u7684\u6570\u91cf\u4ee5\u53ca\u6570\u636e\u7c7b\u578b\u8981\u5bf9\u5e94"}),"\n",(0,i.jsx)(e.li,{children:"\u9664\u4e86\u6570\u5b57\u7c7b\u578b\uff0c\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u7684\u6570\u636e\u90fd\u9700\u8981\u52a0\u5f15\u53f7(\u5355\u5f15\u53cc\u5f15\u90fd\u53ef\u4ee5\uff0c\u63a8\u8350\u5355\u5f15)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"update",children:"UPDATE"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539\u8868\u6570\u636e\u8bed\u6cd5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6807\u51c6\u8bed\u6cd5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"UPDATE \u8868\u540d SET \u5217\u540d1 = \u503c1,\u5217\u540d2 = \u503c2,... [where \u6761\u4ef6];\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539\u7535\u89c6\u7684\u4ef7\u683c\u4e3a1800\u3001\u5e93\u5b58\u4e3a36"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"UPDATE product SET price=1800,stock=36 WHERE NAME='\u7535\u89c6';\nSELECT * FROM product;-- \u67e5\u770b\u6240\u6709\u5546\u54c1\u4fe1\u606f\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4fee\u6539\u8bed\u53e5\u4e2d\u5fc5\u987b\u52a0\u6761\u4ef6"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u4e0d\u52a0\u6761\u4ef6\uff0c\u5219\u5c06\u6240\u6709\u6570\u636e\u90fd\u4fee\u6539"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"delete",children:"DELETE"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u8868\u6570\u636e\u8bed\u6cd5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELETE FROM \u8868\u540d [WHERE \u6761\u4ef6];\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5220\u9664\u8bed\u53e5\u4e2d\u5fc5\u987b\u52a0\u6761\u4ef6"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u4e0d\u52a0\u6761\u4ef6\uff0c\u5219\u5c06\u6240\u6709\u6570\u636e\u5220\u9664"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u200b"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"dql",children:"DQL"}),"\n",(0,i.jsx)(e.h4,{id:"\u67e5\u8be2\u8bed\u6cd5",children:"\u67e5\u8be2\u8bed\u6cd5"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5e93\u67e5\u8be2\u9075\u5faa\u6761\u4ef6\u5728\u524d\u7684\u539f\u5219"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT DISTINCT\n\t<select list>\nFROM\n\t<left_table> <join_type>\nJOIN\n\t<right_table> ON <join_condition>\t-- \u8fde\u63a5\u67e5\u8be2\u5728\u591a\u8868\u67e5\u8be2\u90e8\u5206\u8be6\u89e3\nWHERE\n\t<where_condition>\nGROUP BY\n\t<group_by_list>\nHAVING\n\t<having_condition>\nORDER BY\n\t<order_by_condition>\nLIMIT\n\t<limit_params>\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u987a\u5e8f\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"FROM\t<left_table>\n\nON \t\t<join_condition>\n\n<join_type>\t\tJOIN\t<right_table>\n\nWHERE\t\t<where_condition>\n\nGROUP BY \t<group_by_list>\n\nHAVING\t\t<having_condition>\n\nSELECT DISTINCT\t\t<select list>\n\nORDER BY\t<order_by_condition>\n\nLIMIT\t\t<limit_params>\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u67e5\u8be2\u5168\u90e8",children:"\u67e5\u8be2\u5168\u90e8"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u5168\u90e8\u7684\u8868\u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u6807\u51c6\u8bed\u6cd5\nSELECT * FROM \u8868\u540d;\n\n-- \u67e5\u8be2product\u8868\u6240\u6709\u6570\u636e(\u5e38\u7528)\nSELECT * FROM product;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u6307\u5b9a\u5b57\u6bb5\u7684\u8868\u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT \u5217\u540d1,\u5217\u540d2,... FROM \u8868\u540d;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u53bb\u9664\u91cd\u590d\u67e5\u8be2"}),"\uff1a\u53ea\u6709\u503c\u5168\u90e8\u91cd\u590d\u7684\u624d\u53ef\u4ee5\u53bb\u9664\uff0c\u9700\u8981\u521b\u5efa\u4e34\u65f6\u8868\u8f85\u52a9\u67e5\u8be2"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT DISTINCT \u5217\u540d1,\u5217\u540d2,... FROM \u8868\u540d;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8ba1\u7b97\u5217\u7684\u503c\uff08\u56db\u5219\u8fd0\u7b97\uff09"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT \u5217\u540d1 \u8fd0\u7b97\u7b26(+ - * /) \u5217\u540d2 FROM \u8868\u540d;\n\n/*\u5982\u679c\u67d0\u4e00\u5217\u503c\u4e3anull\uff0c\u53ef\u4ee5\u8fdb\u884c\u66ff\u6362\n\tifnull(\u8868\u8fbe\u5f0f1,\u8868\u8fbe\u5f0f2)\n\t\u8868\u8fbe\u5f0f1\uff1a\u60f3\u66ff\u6362\u7684\u5217\n\t\u8868\u8fbe\u5f0f2\uff1a\u60f3\u66ff\u6362\u7684\u503c*/\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4f8b\u5982\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u67e5\u8be2\u5546\u54c1\u540d\u79f0\u548c\u5e93\u5b58\uff0c\u5e93\u5b58\u6570\u91cf\u5728\u539f\u6709\u57fa\u7840\u4e0a\u52a010\nSELECT NAME,stock+10 FROM product;\n\n-- \u67e5\u8be2\u5546\u54c1\u540d\u79f0\u548c\u5e93\u5b58\uff0c\u5e93\u5b58\u6570\u91cf\u5728\u539f\u6709\u57fa\u7840\u4e0a\u52a010\u3002\u8fdb\u884cnull\u503c\u5224\u65ad\nSELECT NAME,IFNULL(stock,0)+10 FROM product;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8d77\u522b\u540d"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT \u5217\u540d1,\u5217\u540d2,... AS \u522b\u540d FROM \u8868\u540d;\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4f8b\u5982\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u67e5\u8be2\u5546\u54c1\u540d\u79f0\u548c\u5e93\u5b58\uff0c\u5e93\u5b58\u6570\u91cf\u5728\u539f\u6709\u57fa\u7840\u4e0a\u52a010\u3002\u8fdb\u884cnull\u503c\u5224\u65ad\uff0c\u8d77\u522b\u540d\u4e3agetSum,AS\u53ef\u4ee5\u7701\u7565\u3002\nSELECT NAME,IFNULL(stock,0)+10 AS getsum FROM product;\nSELECT NAME,IFNULL(stock,0)+10 getsum FROM product;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6761\u4ef6\u67e5\u8be2",children:"\u6761\u4ef6\u67e5\u8be2"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6761\u4ef6\u67e5\u8be2\u8bed\u6cd5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT \u5217\u540d FROM \u8868\u540d WHERE \u6761\u4ef6;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6761\u4ef6\u5206\u7c7b"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7b26\u53f7"}),(0,i.jsx)(e.th,{children:"\u529f\u80fd"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:">"}),(0,i.jsx)(e.td,{children:"\u5927\u4e8e"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"<"}),(0,i.jsx)(e.td,{children:"\u5c0f\u4e8e"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:">="}),(0,i.jsx)(e.td,{children:"\u5927\u4e8e\u7b49\u4e8e"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"<="}),(0,i.jsx)(e.td,{children:"\u5c0f\u4e8e\u7b49\u4e8e"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"="}),(0,i.jsx)(e.td,{children:"\u7b49\u4e8e"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"<> \u6216 !="}),(0,i.jsx)(e.td,{children:"\u4e0d\u7b49\u4e8e"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"BETWEEN ... AND ..."}),(0,i.jsx)(e.td,{children:"\u5728\u67d0\u4e2a\u8303\u56f4\u4e4b\u5185(\u90fd\u5305\u542b)"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"IN(...)"}),(0,i.jsx)(e.td,{children:"\u591a\u9009\u4e00"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"LIKE"}),(0,i.jsxs)(e.td,{children:[(0,i.jsx)(e.strong,{children:"\u6a21\u7cca\u67e5\u8be2"}),"\uff1a_\u5355\u4e2a\u4efb\u610f\u5b57\u7b26\u3001%\u4efb\u610f\u4e2a\u5b57\u7b26\u3001[] \u5339\u914d\u96c6\u5408\u5185\u7684\u5b57\u7b26",(0,i.jsx)(e.br,{}),(0,i.jsx)(e.code,{children:"LIKE '[^AB]%' "}),"\uff1a\u4e0d\u4ee5 A \u548c B \u5f00\u5934\u7684\u4efb\u610f\u6587\u672c"]})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"IS NULL"}),(0,i.jsx)(e.td,{children:"\u662fNULL"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"IS NOT NULL"}),(0,i.jsx)(e.td,{children:"\u4e0d\u662fNULL"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"AND \u6216 &&"}),(0,i.jsx)(e.td,{children:"\u5e76\u4e14"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"OR \u6216 ||"}),(0,i.jsx)(e.td,{children:"\u6216\u8005"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"NOT \u6216 !"}),(0,i.jsx)(e.td,{children:"\u975e\uff0c\u4e0d\u662f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"UNION"}),(0,i.jsxs)(e.td,{children:["\u5bf9\u4e24\u4e2a\u7ed3\u679c\u96c6\u8fdb\u884c",(0,i.jsx)(e.strong,{children:"\u5e76\u96c6\u64cd\u4f5c\u5e76\u8fdb\u884c\u53bb\u91cd\uff0c\u540c\u65f6\u8fdb\u884c\u9ed8\u8ba4\u89c4\u5219\u7684\u6392\u5e8f"})]})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"UNION ALL"}),(0,i.jsx)(e.td,{children:"\u5bf9\u4e24\u4e2a\u7ed3\u679c\u96c6\u8fdb\u884c\u5e76\u96c6\u64cd\u4f5c\u4e0d\u8fdb\u884c\u53bb\u91cd\uff0c\u4e0d\u8fdb\u884c\u6392\u5e8f"})]})]})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f8b\u5982\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u67e5\u8be2\u5e93\u5b58\u5927\u4e8e20\u7684\u5546\u54c1\u4fe1\u606f\nSELECT * FROM product WHERE stock > 20;\n\n-- \u67e5\u8be2\u54c1\u724c\u4e3a\u534e\u4e3a\u7684\u5546\u54c1\u4fe1\u606f\nSELECT * FROM product WHERE brand='\u534e\u4e3a';\n\n-- \u67e5\u8be2\u91d1\u989d\u57284000 ~ 6000\u4e4b\u95f4\u7684\u5546\u54c1\u4fe1\u606f\nSELECT * FROM product WHERE price >= 4000 AND price <= 6000;\nSELECT * FROM product WHERE price BETWEEN 4000 AND 6000;\n\n-- \u67e5\u8be2\u5e93\u5b58\u4e3a14\u300130\u300123\u7684\u5546\u54c1\u4fe1\u606f\nSELECT * FROM product WHERE stock=14 OR stock=30 OR stock=23;\nSELECT * FROM product WHERE stock IN(14,30,23);\n\n-- \u67e5\u8be2\u5e93\u5b58\u4e3anull\u7684\u5546\u54c1\u4fe1\u606f\nSELECT * FROM product WHERE stock IS NULL;\n-- \u67e5\u8be2\u5e93\u5b58\u4e0d\u4e3anull\u7684\u5546\u54c1\u4fe1\u606f\nSELECT * FROM product WHERE stock IS NOT NULL;\n\n-- \u67e5\u8be2\u540d\u79f0\u4ee5'\u5c0f\u7c73'\u4e3a\u5f00\u5934\u7684\u5546\u54c1\u4fe1\u606f\nSELECT * FROM product WHERE NAME LIKE '\u5c0f\u7c73%';\n\n-- \u67e5\u8be2\u540d\u79f0\u7b2c\u4e8c\u4e2a\u5b57\u662f'\u4e3a'\u7684\u5546\u54c1\u4fe1\u606f\nSELECT * FROM product WHERE NAME LIKE '_\u4e3a%';\n\n-- \u67e5\u8be2\u540d\u79f0\u4e3a\u56db\u4e2a\u5b57\u7b26\u7684\u5546\u54c1\u4fe1\u606f 4\u4e2a\u4e0b\u5212\u7ebf\nSELECT * FROM product WHERE NAME LIKE '____';\n\n-- \u67e5\u8be2\u540d\u79f0\u4e2d\u5305\u542b\u7535\u8111\u7684\u5546\u54c1\u4fe1\u606f\nSELECT * FROM product WHERE NAME LIKE '%\u7535\u8111%';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(88639).A+"",width:"787",height:"298"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u51fd\u6570\u67e5\u8be2",children:"\u51fd\u6570\u67e5\u8be2"}),"\n",(0,i.jsx)(e.h5,{id:"\u805a\u5408\u51fd\u6570",children:"\u805a\u5408\u51fd\u6570"}),"\n",(0,i.jsx)(e.p,{children:"\u805a\u5408\u51fd\u6570\uff1a\u5c06\u4e00\u5217\u6570\u636e\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\uff0c\u8fdb\u884c\u7eb5\u5411\u7684\u8ba1\u7b97"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u805a\u5408\u51fd\u6570\u8bed\u6cd5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT \u51fd\u6570\u540d(\u5217\u540d) FROM \u8868\u540d [WHERE \u6761\u4ef6]\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u805a\u5408\u51fd\u6570\u5206\u7c7b"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u51fd\u6570\u540d"}),(0,i.jsx)(e.th,{children:"\u529f\u80fd"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"COUNT(\u5217\u540d)"}),(0,i.jsx)(e.td,{children:"\u7edf\u8ba1\u6570\u91cf\uff08\u4e00\u822c\u9009\u7528\u4e0d\u4e3a null \u7684\u5217\uff09"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"MAX(\u5217\u540d)"}),(0,i.jsx)(e.td,{children:"\u6700\u5927\u503c"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"MIN(\u5217\u540d)"}),(0,i.jsx)(e.td,{children:"\u6700\u5c0f\u503c"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"SUM(\u5217\u540d)"}),(0,i.jsx)(e.td,{children:"\u6c42\u548c"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"AVG(\u5217\u540d)"}),(0,i.jsx)(e.td,{children:"\u5e73\u5747\u503c\uff08\u4f1a\u5ffd\u7565 null \u884c\uff09"})]})]})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f8b\u5982"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u8ba1\u7b97product\u8868\u4e2d\u603b\u8bb0\u5f55\u6761\u6570 7\nSELECT COUNT(*) FROM product;\n\n-- \u83b7\u53d6\u6700\u9ad8\u4ef7\u683c\nSELECT MAX(price) FROM product;\n-- \u83b7\u53d6\u6700\u9ad8\u4ef7\u683c\u7684\u5546\u54c1\u540d\u79f0\nSELECT NAME,price FROM product WHERE price = (SELECT MAX(price) FROM product);\n\n-- \u83b7\u53d6\u6700\u4f4e\u5e93\u5b58\nSELECT MIN(stock) FROM product;\n-- \u83b7\u53d6\u6700\u4f4e\u5e93\u5b58\u7684\u5546\u54c1\u540d\u79f0\nSELECT NAME,stock FROM product WHERE stock = (SELECT MIN(stock) FROM product);\n\n-- \u83b7\u53d6\u603b\u5e93\u5b58\u6570\u91cf\nSELECT SUM(stock) FROM product;\n-- \u83b7\u53d6\u54c1\u724c\u4e3a\u5c0f\u7c73\u7684\u5e73\u5747\u5546\u54c1\u4ef7\u683c\nSELECT AVG(price) FROM product WHERE brand='\u5c0f\u7c73';\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u6587\u672c\u51fd\u6570",children:"\u6587\u672c\u51fd\u6570"}),"\n",(0,i.jsx)(e.p,{children:"CONCAT()\uff1a\u7528\u4e8e\u8fde\u63a5\u4e24\u4e2a\u5b57\u6bb5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"SELECT CONCAT(TRIM(col1), '(', TRIM(col2), ')') AS concat_col FROM mytable\n-- \u8bb8\u591a\u6570\u636e\u5e93\u4f1a\u4f7f\u7528\u7a7a\u683c\u628a\u4e00\u4e2a\u503c\u586b\u5145\u4e3a\u5217\u5bbd\uff0c\u8fde\u63a5\u7684\u7ed3\u679c\u51fa\u73b0\u4e00\u4e9b\u4e0d\u5fc5\u8981\u7684\u7a7a\u683c\uff0c\u4f7f\u7528TRIM()\u53ef\u4ee5\u53bb\u9664\u9996\u5c3e\u7a7a\u683c\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u51fd\u6570\u540d\u79f0"}),(0,i.jsx)(e.th,{children:"\u4f5c \u7528"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"LENGTH"}),(0,i.jsx)(e.td,{children:"\u8ba1\u7b97\u5b57\u7b26\u4e32\u957f\u5ea6\u51fd\u6570\uff0c\u8fd4\u56de\u5b57\u7b26\u4e32\u7684\u5b57\u8282\u957f\u5ea6"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"CONCAT"}),(0,i.jsx)(e.td,{children:"\u5408\u5e76\u5b57\u7b26\u4e32\u51fd\u6570\uff0c\u8fd4\u56de\u7ed3\u679c\u4e3a\u8fde\u63a5\u53c2\u6570\u4ea7\u751f\u7684\u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u53ef\u4ee5\u4f7f\u4e00\u4e2a\u6216\u591a\u4e2a"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"INSERT"}),(0,i.jsx)(e.td,{children:"\u66ff\u6362\u5b57\u7b26\u4e32\u51fd\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"LOWER"}),(0,i.jsx)(e.td,{children:"\u5c06\u5b57\u7b26\u4e32\u4e2d\u7684\u5b57\u6bcd\u8f6c\u6362\u4e3a\u5c0f\u5199"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"UPPER"}),(0,i.jsx)(e.td,{children:"\u5c06\u5b57\u7b26\u4e32\u4e2d\u7684\u5b57\u6bcd\u8f6c\u6362\u4e3a\u5927\u5199"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"LEFT"}),(0,i.jsx)(e.td,{children:"\u4ece\u5de6\u4fa7\u5b57\u622a\u53d6\u7b26\u4e32\uff0c\u8fd4\u56de\u5b57\u7b26\u4e32\u5de6\u8fb9\u7684\u82e5\u5e72\u4e2a\u5b57\u7b26"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"RIGHT"}),(0,i.jsx)(e.td,{children:"\u4ece\u53f3\u4fa7\u5b57\u622a\u53d6\u7b26\u4e32\uff0c\u8fd4\u56de\u5b57\u7b26\u4e32\u53f3\u8fb9\u7684\u82e5\u5e72\u4e2a\u5b57\u7b26"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"TRIM"}),(0,i.jsx)(e.td,{children:"\u5220\u9664\u5b57\u7b26\u4e32\u5de6\u53f3\u4e24\u4fa7\u7684\u7a7a\u683c"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"REPLACE"}),(0,i.jsx)(e.td,{children:"\u5b57\u7b26\u4e32\u66ff\u6362\u51fd\u6570\uff0c\u8fd4\u56de\u66ff\u6362\u540e\u7684\u65b0\u5b57\u7b26\u4e32"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"SUBSTRING"}),(0,i.jsx)(e.td,{children:"\u622a\u53d6\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de\u4ece\u6307\u5b9a\u4f4d\u7f6e\u5f00\u59cb\u7684\u6307\u5b9a\u957f\u5ea6\u7684\u5b57\u7b26\u6362"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"REVERSE"}),(0,i.jsx)(e.td,{children:"\u5b57\u7b26\u4e32\u53cd\u8f6c\uff08\u9006\u5e8f\uff09\u51fd\u6570\uff0c\u8fd4\u56de\u4e0e\u539f\u59cb\u5b57\u7b26\u4e32\u987a\u5e8f\u76f8\u53cd\u7684\u5b57\u7b26\u4e32"})]})]})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u6570\u5b57\u51fd\u6570",children:"\u6570\u5b57\u51fd\u6570"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u51fd\u6570\u540d\u79f0"}),(0,i.jsx)(e.th,{children:"\u4f5c \u7528"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"ABS"}),(0,i.jsx)(e.td,{children:"\u6c42\u7edd\u5bf9\u503c"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"SQRT"}),(0,i.jsx)(e.td,{children:"\u6c42\u4e8c\u6b21\u65b9\u6839"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"MOD"}),(0,i.jsx)(e.td,{children:"\u6c42\u4f59\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"CEIL \u548c CEILING"}),(0,i.jsx)(e.td,{children:"\u4e24\u4e2a\u51fd\u6570\u529f\u80fd\u76f8\u540c\uff0c\u90fd\u662f\u8fd4\u56de\u4e0d\u5c0f\u4e8e\u53c2\u6570\u7684\u6700\u5c0f\u6574\u6570\uff0c\u5373\u5411\u4e0a\u53d6\u6574"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"FLOOR"}),(0,i.jsx)(e.td,{children:"\u5411\u4e0b\u53d6\u6574\uff0c\u8fd4\u56de\u503c\u8f6c\u5316\u4e3a\u4e00\u4e2aBIGINT"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"RAND"}),(0,i.jsx)(e.td,{children:"\u751f\u6210\u4e00\u4e2a0~1\u4e4b\u95f4\u7684\u968f\u673a\u6570\uff0c\u4f20\u5165\u6574\u6570\u53c2\u6570\u662f\uff0c\u7528\u6765\u4ea7\u751f\u91cd\u590d\u5e8f\u5217"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"ROUND"}),(0,i.jsx)(e.td,{children:"\u5bf9\u6240\u4f20\u53c2\u6570\u8fdb\u884c\u56db\u820d\u4e94\u5165"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"SIGN"}),(0,i.jsx)(e.td,{children:"\u8fd4\u56de\u53c2\u6570\u7684\u7b26\u53f7"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"POW \u548c POWER"}),(0,i.jsx)(e.td,{children:"\u4e24\u4e2a\u51fd\u6570\u7684\u529f\u80fd\u76f8\u540c\uff0c\u90fd\u662f\u6240\u4f20\u53c2\u6570\u7684\u6b21\u65b9\u7684\u7ed3\u679c\u503c"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"SIN"}),(0,i.jsx)(e.td,{children:"\u6c42\u6b63\u5f26\u503c"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"ASIN"}),(0,i.jsx)(e.td,{children:"\u6c42\u53cd\u6b63\u5f26\u503c\uff0c\u4e0e\u51fd\u6570 SIN \u4e92\u4e3a\u53cd\u51fd\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"COS"}),(0,i.jsx)(e.td,{children:"\u6c42\u4f59\u5f26\u503c"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"ACOS"}),(0,i.jsx)(e.td,{children:"\u6c42\u53cd\u4f59\u5f26\u503c\uff0c\u4e0e\u51fd\u6570 COS \u4e92\u4e3a\u53cd\u51fd\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"TAN"}),(0,i.jsx)(e.td,{children:"\u6c42\u6b63\u5207\u503c"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"ATAN"}),(0,i.jsx)(e.td,{children:"\u6c42\u53cd\u6b63\u5207\u503c\uff0c\u4e0e\u51fd\u6570 TAN \u4e92\u4e3a\u53cd\u51fd\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"COT"}),(0,i.jsx)(e.td,{children:"\u6c42\u4f59\u5207\u503c"})]})]})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u65e5\u671f\u51fd\u6570",children:"\u65e5\u671f\u51fd\u6570"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u51fd\u6570\u540d\u79f0"}),(0,i.jsx)(e.th,{children:"\u4f5c \u7528"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"CURDATE \u548c CURRENT_DATE"}),(0,i.jsx)(e.td,{children:"\u4e24\u4e2a\u51fd\u6570\u4f5c\u7528\u76f8\u540c\uff0c\u8fd4\u56de\u5f53\u524d\u7cfb\u7edf\u7684\u65e5\u671f\u503c"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"CURTIME \u548c CURRENT_TIME"}),(0,i.jsx)(e.td,{children:"\u4e24\u4e2a\u51fd\u6570\u4f5c\u7528\u76f8\u540c\uff0c\u8fd4\u56de\u5f53\u524d\u7cfb\u7edf\u7684\u65f6\u95f4\u503c"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"NOW \u548c  SYSDATE"}),(0,i.jsx)(e.td,{children:"\u4e24\u4e2a\u51fd\u6570\u4f5c\u7528\u76f8\u540c\uff0c\u8fd4\u56de\u5f53\u524d\u7cfb\u7edf\u7684\u65e5\u671f\u548c\u65f6\u95f4\u503c"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"MONTH"}),(0,i.jsx)(e.td,{children:"\u83b7\u53d6\u6307\u5b9a\u65e5\u671f\u4e2d\u7684\u6708\u4efd"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"MONTHNAME"}),(0,i.jsx)(e.td,{children:"\u83b7\u53d6\u6307\u5b9a\u65e5\u671f\u4e2d\u7684\u6708\u4efd\u82f1\u6587\u540d\u79f0"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"DAYNAME"}),(0,i.jsx)(e.td,{children:"\u83b7\u53d6\u6307\u5b9a\u66f0\u671f\u5bf9\u5e94\u7684\u661f\u671f\u51e0\u7684\u82f1\u6587\u540d\u79f0"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"DAYOFWEEK"}),(0,i.jsx)(e.td,{children:"\u83b7\u53d6\u6307\u5b9a\u65e5\u671f\u5bf9\u5e94\u7684\u4e00\u5468\u7684\u7d22\u5f15\u4f4d\u7f6e\u503c"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"WEEK"}),(0,i.jsx)(e.td,{children:"\u83b7\u53d6\u6307\u5b9a\u65e5\u671f\u662f\u4e00\u5e74\u4e2d\u7684\u7b2c\u51e0\u5468\uff0c\u8fd4\u56de\u503c\u7684\u8303\u56f4\u662f\u5426\u4e3a 0\u301c52 \u6216 1\u301c53"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"DAYOFYEAR"}),(0,i.jsx)(e.td,{children:"\u83b7\u53d6\u6307\u5b9a\u66f0\u671f\u662f\u4e00\u5e74\u4e2d\u7684\u7b2c\u51e0\u5929\uff0c\u8fd4\u56de\u503c\u8303\u56f4\u662f1~366"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"DAYOFMONTH"}),(0,i.jsx)(e.td,{children:"\u83b7\u53d6\u6307\u5b9a\u65e5\u671f\u662f\u4e00\u4e2a\u6708\u4e2d\u662f\u7b2c\u51e0\u5929\uff0c\u8fd4\u56de\u503c\u8303\u56f4\u662f1~31"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"YEAR"}),(0,i.jsx)(e.td,{children:"\u83b7\u53d6\u5e74\u4efd\uff0c\u8fd4\u56de\u503c\u8303\u56f4\u662f 1970\u301c2069"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"TIME_TO_SEC"}),(0,i.jsx)(e.td,{children:"\u5c06\u65f6\u95f4\u53c2\u6570\u8f6c\u6362\u4e3a\u79d2\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"SEC_TO_TIME"}),(0,i.jsx)(e.td,{children:"\u5c06\u79d2\u6570\u8f6c\u6362\u4e3a\u65f6\u95f4\uff0c\u4e0eTIME_TO_SEC \u4e92\u4e3a\u53cd\u51fd\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"DATE_ADD \u548c ADDDATE"}),(0,i.jsx)(e.td,{children:"\u4e24\u4e2a\u51fd\u6570\u529f\u80fd\u76f8\u540c\uff0c\u90fd\u662f\u5411\u65e5\u671f\u6dfb\u52a0\u6307\u5b9a\u7684\u65f6\u95f4\u95f4\u9694"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"DATE_SUB \u548c SUBDATE"}),(0,i.jsx)(e.td,{children:"\u4e24\u4e2a\u51fd\u6570\u529f\u80fd\u76f8\u540c\uff0c\u90fd\u662f\u5411\u65e5\u671f\u51cf\u53bb\u6307\u5b9a\u7684\u65f6\u95f4\u95f4\u9694"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"ADDTIME"}),(0,i.jsx)(e.td,{children:"\u65f6\u95f4\u52a0\u6cd5\u8fd0\u7b97\uff0c\u5728\u539f\u59cb\u65f6\u95f4\u4e0a\u6dfb\u52a0\u6307\u5b9a\u7684\u65f6\u95f4"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"SUBTIME"}),(0,i.jsx)(e.td,{children:"\u65f6\u95f4\u51cf\u6cd5\u8fd0\u7b97\uff0c\u5728\u539f\u59cb\u65f6\u95f4\u4e0a\u51cf\u53bb\u6307\u5b9a\u7684\u65f6\u95f4"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"DATEDIFF"}),(0,i.jsx)(e.td,{children:"\u83b7\u53d6\u4e24\u4e2a\u65e5\u671f\u4e4b\u95f4\u95f4\u9694\uff0c\u8fd4\u56de\u53c2\u6570 1 \u51cf\u53bb\u53c2\u6570 2 \u7684\u503c"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"DATE_FORMAT"}),(0,i.jsx)(e.td,{children:"\u683c\u5f0f\u5316\u6307\u5b9a\u7684\u65e5\u671f\uff0c\u6839\u636e\u53c2\u6570\u8fd4\u56de\u6307\u5b9a\u683c\u5f0f\u7684\u503c"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"WEEKDAY"}),(0,i.jsx)(e.td,{children:"\u83b7\u53d6\u6307\u5b9a\u65e5\u671f\u5728\u4e00\u5468\u5185\u7684\u5bf9\u5e94\u7684\u5de5\u4f5c\u65e5\u7d22\u5f15"})]})]})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6b63\u5219\u67e5\u8be2",children:"\u6b63\u5219\u67e5\u8be2"}),"\n",(0,i.jsx)(e.p,{children:"\u6b63\u5219\u8868\u8fbe\u5f0f\uff08Regular Expression\uff09\u662f\u6307\u4e00\u4e2a\u7528\u6765\u63cf\u8ff0\u6216\u8005\u5339\u914d\u4e00\u7cfb\u5217\u7b26\u5408\u67d0\u4e2a\u53e5\u6cd5\u89c4\u5219\u7684\u5b57\u7b26\u4e32\u7684\u5355\u4e2a\u5b57\u7b26\u4e32"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM emp WHERE name REGEXP '^T';\t-- \u5339\u914d\u4ee5T\u5f00\u5934\u7684name\u503c\nSELECT * FROM emp WHERE name REGEXP '2$';\t-- \u5339\u914d\u4ee52\u7ed3\u5c3e\u7684name\u503c\nSELECT * FROM emp WHERE name REGEXP '[uvw]';-- \u5339\u914d\u5305\u542b uvw \u7684name\u503c\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7b26\u53f7"}),(0,i.jsx)(e.th,{children:"\u542b\u4e49"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"^"}),(0,i.jsx)(e.td,{children:"\u5728\u5b57\u7b26\u4e32\u5f00\u59cb\u5904\u8fdb\u884c\u5339\u914d"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"$"}),(0,i.jsx)(e.td,{children:"\u5728\u5b57\u7b26\u4e32\u672b\u5c3e\u5904\u8fdb\u884c\u5339\u914d"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"."}),(0,i.jsx)(e.td,{children:"\u5339\u914d\u4efb\u610f\u5355\u4e2a\u5b57\u7b26, \u5305\u62ec\u6362\u884c\u7b26"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"[...]"}),(0,i.jsx)(e.td,{children:"\u5339\u914d\u51fa\u62ec\u53f7\u5185\u7684\u4efb\u610f\u5b57\u7b26"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"[^...]"}),(0,i.jsx)(e.td,{children:"\u5339\u914d\u4e0d\u51fa\u62ec\u53f7\u5185\u7684\u4efb\u610f\u5b57\u7b26"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"a*"}),(0,i.jsx)(e.td,{children:"\u5339\u914d\u96f6\u4e2a\u6216\u8005\u591a\u4e2aa(\u5305\u62ec\u7a7a\u4e32)"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"a+"}),(0,i.jsx)(e.td,{children:"\u5339\u914d\u4e00\u4e2a\u6216\u8005\u591a\u4e2aa(\u4e0d\u5305\u62ec\u7a7a\u4e32)"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"a?"}),(0,i.jsx)(e.td,{children:"\u5339\u914d\u96f6\u4e2a\u6216\u8005\u4e00\u4e2aa"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"a1|a2"}),(0,i.jsx)(e.td,{children:"\u5339\u914da1\u6216a2"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"a(m)"}),(0,i.jsx)(e.td,{children:"\u5339\u914dm\u4e2aa"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"a(m,)"}),(0,i.jsx)(e.td,{children:"\u81f3\u5c11\u5339\u914dm\u4e2aa"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"a(m,n)"}),(0,i.jsx)(e.td,{children:"\u5339\u914dm\u4e2aa \u5230 n\u4e2aa"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"a(,n)"}),(0,i.jsx)(e.td,{children:"\u5339\u914d0\u5230n\u4e2aa"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"(...)"}),(0,i.jsx)(e.td,{children:"\u5c06\u6a21\u5f0f\u5143\u7d20\u7ec4\u6210\u5355\u4e00\u5143\u7d20"})]})]})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6392\u5e8f\u67e5\u8be2",children:"\u6392\u5e8f\u67e5\u8be2"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6392\u5e8f\u67e5\u8be2\u8bed\u6cd5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT \u5217\u540d FROM \u8868\u540d [WHERE \u6761\u4ef6] ORDER BY \u5217\u540d1 \u6392\u5e8f\u65b9\u5f0f1,\u5217\u540d2 \u6392\u5e8f\u65b9\u5f0f2;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6392\u5e8f\u65b9\u5f0f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ASC:\u5347\u5e8f\nDESC:\u964d\u5e8f\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u591a\u4e2a\u6392\u5e8f\u6761\u4ef6\uff0c\u5f53\u524d\u8fb9\u7684\u6761\u4ef6\u503c\u4e00\u6837\u65f6\uff0c\u624d\u4f1a\u5224\u65ad\u7b2c\u4e8c\u6761\u4ef6"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f8b\u5982"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u6309\u7167\u5e93\u5b58\u5347\u5e8f\u6392\u5e8f\nSELECT * FROM product ORDER BY stock ASC;\n\n-- \u67e5\u8be2\u540d\u79f0\u4e2d\u5305\u542b\u624b\u673a\u7684\u5546\u54c1\u4fe1\u606f\u3002\u6309\u7167\u91d1\u989d\u964d\u5e8f\u6392\u5e8f\nSELECT * FROM product WHERE NAME LIKE '%\u624b\u673a%' ORDER BY price DESC;\n\n-- \u6309\u7167\u91d1\u989d\u5347\u5e8f\u6392\u5e8f\uff0c\u5982\u679c\u91d1\u989d\u76f8\u540c\uff0c\u6309\u7167\u5e93\u5b58\u964d\u5e8f\u6392\u5217\nSELECT * FROM product ORDER BY price ASC,stock DESC;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5206\u7ec4\u67e5\u8be2",children:"\u5206\u7ec4\u67e5\u8be2"}),"\n",(0,i.jsx)(e.p,{children:"\u5206\u7ec4\u67e5\u8be2\u4f1a\u8fdb\u884c\u53bb\u91cd"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5206\u7ec4\u67e5\u8be2\u8bed\u6cd5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT \u5217\u540d FROM \u8868\u540d [WHERE \u6761\u4ef6] GROUP BY \u5206\u7ec4\u5217\u540d [HAVING \u5206\u7ec4\u540e\u6761\u4ef6\u8fc7\u6ee4] [ORDER BY \u6392\u5e8f\u5217\u540d \u6392\u5e8f\u65b9\u5f0f];\n"})}),"\n",(0,i.jsx)(e.p,{children:"WHERE \u8fc7\u6ee4\u884c\uff0cHAVING \u8fc7\u6ee4\u5206\u7ec4\uff0c\u884c\u8fc7\u6ee4\u5e94\u5f53\u5148\u4e8e\u5206\u7ec4\u8fc7\u6ee4"}),"\n",(0,i.jsx)(e.p,{children:"\u5206\u7ec4\u89c4\u5b9a\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"GROUP BY \u5b50\u53e5\u51fa\u73b0\u5728 WHERE \u5b50\u53e5\u4e4b\u540e\uff0cORDER BY \u5b50\u53e5\u4e4b\u524d"}),"\n",(0,i.jsx)(e.li,{children:"NULL \u7684\u884c\u4f1a\u5355\u72ec\u5206\u4e3a\u4e00\u7ec4"}),"\n",(0,i.jsx)(e.li,{children:"\u5927\u591a\u6570 SQL \u5b9e\u73b0\u4e0d\u652f\u6301 GROUP BY \u5217\u5177\u6709\u53ef\u53d8\u957f\u5ea6\u7684\u6570\u636e\u7c7b\u578b"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f8b\u5982"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u6309\u7167\u54c1\u724c\u5206\u7ec4\uff0c\u83b7\u53d6\u6bcf\u7ec4\u5546\u54c1\u7684\u603b\u91d1\u989d\nSELECT brand,SUM(price) FROM product GROUP BY brand;\n\n-- \u5bf9\u91d1\u989d\u5927\u4e8e4000\u5143\u7684\u5546\u54c1\uff0c\u6309\u7167\u54c1\u724c\u5206\u7ec4,\u83b7\u53d6\u6bcf\u7ec4\u5546\u54c1\u7684\u603b\u91d1\u989d\nSELECT brand,SUM(price) FROM product WHERE price > 4000 GROUP BY brand;\n\n-- \u5bf9\u91d1\u989d\u5927\u4e8e4000\u5143\u7684\u5546\u54c1\uff0c\u6309\u7167\u54c1\u724c\u5206\u7ec4\uff0c\u83b7\u53d6\u6bcf\u7ec4\u5546\u54c1\u7684\u603b\u91d1\u989d\uff0c\u53ea\u663e\u793a\u603b\u91d1\u989d\u5927\u4e8e7000\u5143\u7684\nSELECT brand,SUM(price) AS getSum FROM product WHERE price > 4000 GROUP BY brand HAVING getSum > 7000;\n\n-- \u5bf9\u91d1\u989d\u5927\u4e8e4000\u5143\u7684\u5546\u54c1\uff0c\u6309\u7167\u54c1\u724c\u5206\u7ec4\uff0c\u83b7\u53d6\u6bcf\u7ec4\u5546\u54c1\u7684\u603b\u91d1\u989d\uff0c\u53ea\u663e\u793a\u603b\u91d1\u989d\u5927\u4e8e7000\u5143\u7684\u3001\u5e76\u6309\u7167\u603b\u91d1\u989d\u7684\u964d\u5e8f\u6392\u5217\nSELECT brand,SUM(price) AS getSum FROM product WHERE price > 4000 GROUP BY brand HAVING getSum > 7000 ORDER BY getSum DESC;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5206\u9875\u67e5\u8be2",children:"\u5206\u9875\u67e5\u8be2"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5206\u9875\u67e5\u8be2\u8bed\u6cd5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT \u5217\u540d FROM \u8868\u540d [WHERE \u6761\u4ef6] GROUP BY \u5206\u7ec4\u5217\u540d [HAVING \u5206\u7ec4\u540e\u6761\u4ef6\u8fc7\u6ee4] [ORDER BY \u6392\u5e8f\u5217\u540d \u6392\u5e8f\u65b9\u5f0f] LIMIT \u5f00\u59cb\u7d22\u5f15,\u67e5\u8be2\u6761\u6570;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u516c\u5f0f\uff1a\u5f00\u59cb\u7d22\u5f15 = (\u5f53\u524d\u9875\u7801-1) * \u6bcf\u9875\u663e\u793a\u7684\u6761\u6570"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f8b\u5982"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM product LIMIT 0,2;  -- \u7b2c\u4e00\u9875 \u5f00\u59cb\u7d22\u5f15=(1-1) * 2\nSELECT * FROM product LIMIT 2,2;  -- \u7b2c\u4e8c\u9875 \u5f00\u59cb\u7d22\u5f15=(2-1) * 2\nSELECT * FROM product LIMIT 4,2;  -- \u7b2c\u4e09\u9875 \u5f00\u59cb\u7d22\u5f15=(3-1) * 2\nSELECT * FROM product LIMIT 6,2;  -- \u7b2c\u56db\u9875 \u5f00\u59cb\u7d22\u5f15=(4-1) * 2\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(46931).A+"",width:"1478",height:"425"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u591a\u8868\u64cd\u4f5c",children:"\u591a\u8868\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.h3,{id:"\u7ea6\u675f\u5206\u7c7b",children:"\u7ea6\u675f\u5206\u7c7b"}),"\n",(0,i.jsx)(e.h4,{id:"\u7ea6\u675f\u4ecb\u7ecd",children:"\u7ea6\u675f\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.p,{children:"\u7ea6\u675f\uff1a\u5bf9\u8868\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u9650\u5b9a\uff0c\u4fdd\u8bc1\u6570\u636e\u7684\u6b63\u786e\u6027\u3001\u6709\u6548\u6027\u3001\u5b8c\u6574\u6027"}),"\n",(0,i.jsx)(e.p,{children:"\u7ea6\u675f\u7684\u5206\u7c7b\uff1a"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7ea6\u675f"}),(0,i.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"PRIMARY KEY"}),(0,i.jsx)(e.td,{children:"\u4e3b\u952e\u7ea6\u675f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"PRIMARY KEY AUTO_INCREMENT"}),(0,i.jsx)(e.td,{children:"\u4e3b\u952e\u3001\u81ea\u52a8\u589e\u957f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"UNIQUE"}),(0,i.jsx)(e.td,{children:"\u552f\u4e00\u7ea6\u675f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"NOT NULL"}),(0,i.jsx)(e.td,{children:"\u975e\u7a7a\u7ea6\u675f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"FOREIGN KEY"}),(0,i.jsx)(e.td,{children:"\u5916\u952e\u7ea6\u675f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"FOREIGN KEY ON UPDATE CASCADE"}),(0,i.jsx)(e.td,{children:"\u5916\u952e\u7ea7\u8054\u66f4\u65b0"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"FOREIGN KEY ON DELETE CASCADE"}),(0,i.jsx)(e.td,{children:"\u5916\u952e\u7ea7\u8054\u5220\u9664"})]})]})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u4e3b\u952e\u7ea6\u675f",children:"\u4e3b\u952e\u7ea6\u675f"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e3b\u952e\u7ea6\u675f\u7279\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4e3b\u952e\u7ea6\u675f\u9ed8\u8ba4\u5305\u542b",(0,i.jsx)(e.strong,{children:"\u975e\u7a7a\u548c\u552f\u4e00"}),"\u4e24\u4e2a\u529f\u80fd"]}),"\n",(0,i.jsx)(e.li,{children:"\u4e00\u5f20\u8868\u53ea\u80fd\u6709\u4e00\u4e2a\u4e3b\u952e"}),"\n",(0,i.jsx)(e.li,{children:"\u4e3b\u952e\u4e00\u822c\u7528\u4e8e\u8868\u4e2d\u6570\u636e\u7684\u552f\u4e00\u6807\u8bc6"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5efa\u8868\u65f6\u6dfb\u52a0\u4e3b\u952e\u7ea6\u675f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE TABLE \u8868\u540d(\n\t\u5217\u540d \u6570\u636e\u7c7b\u578b PRIMARY KEY,\n    \u5217\u540d \u6570\u636e\u7c7b\u578b,\n    ...\n);\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u4e3b\u952e\u7ea6\u675f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d DROP PRIMARY KEY;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5efa\u8868\u540e\u5355\u72ec\u6dfb\u52a0\u4e3b\u952e\u7ea6\u675f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d MODIFY \u5217\u540d \u6570\u636e\u7c7b\u578b PRIMARY KEY;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f8b\u5982"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u521b\u5efastudent\u8868\nCREATE TABLE student(\n\tid INT PRIMARY KEY  -- \u7ed9id\u6dfb\u52a0\u4e3b\u952e\u7ea6\u675f\n);\n\n-- \u6dfb\u52a0\u6570\u636e\nINSERT INTO student VALUES (1),(2);\n-- \u4e3b\u952e\u9ed8\u8ba4\u552f\u4e00\uff0c\u6dfb\u52a0\u91cd\u590d\u6570\u636e\uff0c\u4f1a\u62a5\u9519\nINSERT INTO student VALUES (2);\n-- \u4e3b\u952e\u9ed8\u8ba4\u975e\u7a7a\uff0c\u4e0d\u80fd\u6dfb\u52a0null\u7684\u6570\u636e\nINSERT INTO student VALUES (NULL);\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u4e3b\u952e\u81ea\u589e",children:"\u4e3b\u952e\u81ea\u589e"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u952e\u81ea\u589e\u7ea6\u675f\u53ef\u4ee5\u4e3a\u7a7a\uff0c\u5e76\u81ea\u52a8\u589e\u957f\u3002\u5220\u9664\u67d0\u6761\u6570\u636e\u4e0d\u5f71\u54cd\u81ea\u589e\u7684\u4e0b\u4e00\u4e2a\u6570\u503c\uff0c\u4f9d\u7136\u6309\u7167\u524d\u4e00\u4e2a\u503c\u81ea\u589e"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5efa\u8868\u65f6\u6dfb\u52a0\u4e3b\u952e\u81ea\u589e\u7ea6\u675f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE TABLE \u8868\u540d(\n\t\u5217\u540d \u6570\u636e\u7c7b\u578b PRIMARY KEY AUTO_INCREMENT,\n    \u5217\u540d \u6570\u636e\u7c7b\u578b,\n    ...\n);\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u4e3b\u952e\u81ea\u589e\u7ea6\u675f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d MODIFY \u5217\u540d \u6570\u636e\u7c7b\u578b;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5efa\u8868\u540e\u5355\u72ec\u6dfb\u52a0\u4e3b\u952e\u81ea\u589e\u7ea6\u675f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d MODIFY \u5217\u540d \u6570\u636e\u7c7b\u578b AUTO_INCREMENT;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f8b\u5982"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u521b\u5efastudent2\u8868\nCREATE TABLE student2(\n\tid INT PRIMARY KEY AUTO_INCREMENT    -- \u7ed9id\u6dfb\u52a0\u4e3b\u952e\u81ea\u589e\u7ea6\u675f\n);\n\n-- \u6dfb\u52a0\u6570\u636e\nINSERT INTO student2 VALUES (1),(2);\n-- \u6dfb\u52a0null\u503c\uff0c\u4f1a\u81ea\u52a8\u589e\u957f\nINSERT INTO student2 VALUES (NULL),(NULL);-- 3\uff0c4\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u552f\u4e00\u7ea6\u675f",children:"\u552f\u4e00\u7ea6\u675f"}),"\n",(0,i.jsx)(e.p,{children:"\u552f\u4e00\u7ea6\u675f\uff1a\u7ea6\u675f\u4e0d\u80fd\u6709\u91cd\u590d\u7684\u6570\u636e"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5efa\u8868\u65f6\u6dfb\u52a0\u552f\u4e00\u7ea6\u675f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE TABLE \u8868\u540d(\n\t\u5217\u540d \u6570\u636e\u7c7b\u578b UNIQUE,\n    \u5217\u540d \u6570\u636e\u7c7b\u578b,\n    ...\n);\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u552f\u4e00\u7ea6\u675f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d DROP INDEX \u5217\u540d;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5efa\u8868\u540e\u5355\u72ec\u6dfb\u52a0\u552f\u4e00\u7ea6\u675f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d MODIFY \u5217\u540d \u6570\u636e\u7c7b\u578b UNIQUE;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u975e\u7a7a\u7ea6\u675f",children:"\u975e\u7a7a\u7ea6\u675f"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5efa\u8868\u65f6\u6dfb\u52a0\u975e\u7a7a\u7ea6\u675f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE TABLE \u8868\u540d(\n\t\u5217\u540d \u6570\u636e\u7c7b\u578b NOT NULL,\n    \u5217\u540d \u6570\u636e\u7c7b\u578b,\n    ...\n);\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u975e\u7a7a\u7ea6\u675f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d MODIFY \u5217\u540d \u6570\u636e\u7c7b\u578b;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5efa\u8868\u540e\u5355\u72ec\u6dfb\u52a0\u975e\u7a7a\u7ea6\u675f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d MODIFY \u5217\u540d \u6570\u636e\u7c7b\u578b NOT NULL;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5916\u952e\u7ea6\u675f",children:"\u5916\u952e\u7ea6\u675f"}),"\n",(0,i.jsx)(e.p,{children:"\u5916\u952e\u7ea6\u675f\uff1a\u8ba9\u8868\u548c\u8868\u4e4b\u95f4\u4ea7\u751f\u5173\u7cfb\uff0c\u4ece\u800c\u4fdd\u8bc1\u6570\u636e\u7684\u51c6\u786e\u6027"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5efa\u8868\u65f6\u6dfb\u52a0\u5916\u952e\u7ea6\u675f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE TABLE \u8868\u540d(\n\t\u5217\u540d \u6570\u636e\u7c7b\u578b \u7ea6\u675f,\n    ...\n    CONSTRAINT \u5916\u952e\u540d FOREIGN KEY (\u672c\u8868\u5916\u952e\u5217\u540d) REFERENCES \u4e3b\u8868\u540d(\u4e3b\u8868\u4e3b\u952e\u5217\u540d)\n);\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u5916\u952e\u7ea6\u675f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d DROP FOREIGN KEY \u5916\u952e\u540d;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5efa\u8868\u540e\u5355\u72ec\u6dfb\u52a0\u5916\u952e\u7ea6\u675f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d ADD CONSTRAINT \u5916\u952e\u540d FOREIGN KEY (\u672c\u8868\u5916\u952e\u5217\u540d) REFERENCES \u4e3b\u8868\u540d(\u4e3b\u8868\u4e3b\u952e\u5217\u540d);\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f8b\u5982"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u521b\u5efauser\u7528\u6237\u8868\nCREATE TABLE USER(\n\tid INT PRIMARY KEY AUTO_INCREMENT,    -- id\n\tname VARCHAR(20) NOT NULL             -- \u59d3\u540d\n);\n-- \u6dfb\u52a0\u7528\u6237\u6570\u636e\nINSERT INTO USER VALUES (NULL,'\u5f20\u4e09'),(NULL,'\u674e\u56db'),(NULL,'\u738b\u4e94');\n\n-- \u521b\u5efaorderlist\u8ba2\u5355\u8868\nCREATE TABLE orderlist(\n\tid INT PRIMARY KEY AUTO_INCREMENT,    -- id\n\tnumber VARCHAR(20) NOT NULL,          -- \u8ba2\u5355\u7f16\u53f7\n\tuid INT,                              -- \u8ba2\u5355\u6240\u5c5e\u7528\u6237\n\tCONSTRAINT ou_fk1 FOREIGN KEY (uid) REFERENCES USER(id)   -- \u6dfb\u52a0\u5916\u952e\u7ea6\u675f\n);\n-- \u6dfb\u52a0\u8ba2\u5355\u6570\u636e\nINSERT INTO orderlist VALUES (NULL,'hm001',1),(NULL,'hm002',1),\n(NULL,'hm003',2),(NULL,'hm004',2),\n(NULL,'hm005',3),(NULL,'hm006',3);\n\n-- \u6dfb\u52a0\u4e00\u4e2a\u8ba2\u5355\uff0c\u4f46\u662f\u6ca1\u6709\u6240\u5c5e\u7528\u6237\u3002\u65e0\u6cd5\u6dfb\u52a0\nINSERT INTO orderlist VALUES (NULL,'hm007',8);\n-- \u5220\u9664\u738b\u4e94\u8fd9\u4e2a\u7528\u6237\uff0c\u4f46\u662f\u8ba2\u5355\u8868\u4e2d\u738b\u4e94\u8fd8\u6709\u5f88\u591a\u4e2a\u8ba2\u5355\u5462\u3002\u65e0\u6cd5\u5220\u9664\nDELETE FROM USER WHERE NAME='\u738b\u4e94';\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5916\u952e\u7ea7\u8054",children:"\u5916\u952e\u7ea7\u8054"}),"\n",(0,i.jsx)(e.p,{children:"\u7ea7\u8054\u64cd\u4f5c\uff1a\u5f53\u628a\u4e3b\u8868\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u5220\u9664\u6216\u66f4\u65b0\u65f6\uff0c\u4ece\u8868\u4e2d\u6709\u5173\u8054\u7684\u6570\u636e\u7684\u76f8\u5e94\u64cd\u4f5c\uff0c\u5305\u62ec RESTRICT\u3001CASCADE\u3001SET NULL \u548c NO ACTION"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"RESTRICT \u548c NO ACTION\u76f8\u540c\uff0c \u662f\u6307\u9650\u5236\u5728\u5b50\u8868\u6709\u5173\u8054\u8bb0\u5f55\u7684\u60c5\u51b5\u4e0b\uff0c \u7236\u8868\u4e0d\u80fd\u66f4\u65b0"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"CASCADE \u8868\u793a\u7236\u8868\u5728\u66f4\u65b0\u6216\u8005\u5220\u9664\u65f6\uff0c\u66f4\u65b0\u6216\u8005\u5220\u9664\u5b50\u8868\u5bf9\u5e94\u7684\u8bb0\u5f55"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"SET NULL \u5219\u8868\u793a\u7236\u8868\u5728\u66f4\u65b0\u6216\u8005\u5220\u9664\u7684\u65f6\u5019\uff0c\u5b50\u8868\u7684\u5bf9\u5e94\u5b57\u6bb5\u88abSET NULL"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u7ea7\u8054\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6dfb\u52a0\u7ea7\u8054\u66f4\u65b0"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d ADD CONSTRAINT \u5916\u952e\u540d FOREIGN KEY (\u672c\u8868\u5916\u952e\u5217\u540d) REFERENCES \u4e3b\u8868\u540d(\u4e3b\u8868\u4e3b\u952e\u5217\u540d) ON UPDATE [CASCADE | RESTRICT | SET NULL];\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6dfb\u52a0\u7ea7\u8054\u5220\u9664"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d ADD CONSTRAINT \u5916\u952e\u540d FOREIGN KEY (\u672c\u8868\u5916\u952e\u5217\u540d) REFERENCES \u4e3b\u8868\u540d(\u4e3b\u8868\u4e3b\u952e\u5217\u540d) ON DELETE CASCADE;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u540c\u65f6\u6dfb\u52a0\u7ea7\u8054\u66f4\u65b0\u548c\u7ea7\u8054\u5220\u9664"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d ADD CONSTRAINT \u5916\u952e\u540d FOREIGN KEY (\u672c\u8868\u5916\u952e\u5217\u540d) REFERENCES \u4e3b\u8868\u540d(\u4e3b\u8868\u4e3b\u952e\u5217\u540d) ON UPDATE CASCADE ON DELETE CASCADE;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u591a\u8868\u8bbe\u8ba1",children:"\u591a\u8868\u8bbe\u8ba1"}),"\n",(0,i.jsx)(e.h4,{id:"\u4e00\u5bf9\u4e00",children:"\u4e00\u5bf9\u4e00"}),"\n",(0,i.jsx)(e.p,{children:"\u591a\u8868\uff1a\u6709\u591a\u5f20\u6570\u636e\u8868\uff0c\u800c\u8868\u4e0e\u8868\u4e4b\u95f4\u6709\u4e00\u5b9a\u7684\u5173\u8054\u5173\u7cfb\uff0c\u901a\u8fc7\u5916\u952e\u7ea6\u675f\u5b9e\u73b0\uff0c\u5206\u4e3a\u4e00\u5bf9\u4e00\u3001\u4e00\u5bf9\u591a\u3001\u591a\u5bf9\u591a\u4e09\u7c7b"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3e\u4f8b\uff1a\u4eba\u548c\u8eab\u4efd\u8bc1"}),"\n",(0,i.jsx)(e.p,{children:"\u5b9e\u73b0\u539f\u5219\uff1a\u5728\u4efb\u610f\u4e00\u4e2a\u8868\u5efa\u7acb\u5916\u952e\uff0c\u53bb\u5173\u8054\u53e6\u5916\u4e00\u4e2a\u8868\u7684\u4e3b\u952e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u521b\u5efaperson\u8868\nCREATE TABLE person(\n\tid INT PRIMARY KEY AUTO_INCREMENT,\t-- \u4e3b\u952eid\n\tNAME VARCHAR(20)                        -- \u59d3\u540d\n);\n-- \u6dfb\u52a0\u6570\u636e\nINSERT INTO person VALUES (NULL,'\u5f20\u4e09'),(NULL,'\u674e\u56db');\n\n-- \u521b\u5efacard\u8868\nCREATE TABLE card(\n\tid INT PRIMARY KEY AUTO_INCREMENT,\t-- \u4e3b\u952eid\n\tnumber VARCHAR(20) UNIQUE NOT NULL,\t-- \u8eab\u4efd\u8bc1\u53f7\n\tpid INT UNIQUE,                         -- \u5916\u952e\u5217\n\tCONSTRAINT cp_fk1 FOREIGN KEY (pid) REFERENCES person(id)\n);\n-- \u6dfb\u52a0\u6570\u636e\nINSERT INTO card VALUES (NULL,'12345',1),(NULL,'56789',2);\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(4338).A+"",width:"1274",height:"504"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u4e00\u5bf9\u591a",children:"\u4e00\u5bf9\u591a"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3e\u4f8b\uff1a\u7528\u6237\u548c\u8ba2\u5355\u3001\u5546\u54c1\u5206\u7c7b\u548c\u5546\u54c1"}),"\n",(0,i.jsx)(e.p,{children:"\u5b9e\u73b0\u539f\u5219\uff1a\u5728\u591a\u7684\u4e00\u65b9\uff0c\u5efa\u7acb\u5916\u952e\u7ea6\u675f\uff0c\u6765\u5173\u8054\u4e00\u7684\u4e00\u65b9\u4e3b\u952e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u521b\u5efauser\u8868\nCREATE TABLE USER(\n\tid INT PRIMARY KEY AUTO_INCREMENT,\t-- \u4e3b\u952eid\n\tNAME VARCHAR(20)                        -- \u59d3\u540d\n);\n-- \u6dfb\u52a0\u6570\u636e\nINSERT INTO USER VALUES (NULL,'\u5f20\u4e09'),(NULL,'\u674e\u56db');\n\n-- \u521b\u5efaorderlist\u8868\nCREATE TABLE orderlist(\n\tid INT PRIMARY KEY AUTO_INCREMENT,\t-- \u4e3b\u952eid\n\tnumber VARCHAR(20),                     -- \u8ba2\u5355\u7f16\u53f7\n\tuid INT,\t\t\t\t-- \u5916\u952e\u5217\n\tCONSTRAINT ou_fk1 FOREIGN KEY (uid) REFERENCES USER(id)\n);\n-- \u6dfb\u52a0\u6570\u636e\nINSERT INTO orderlist VALUES (NULL,'hm001',1),(NULL,'hm002',1),(NULL,'hm003',2),(NULL,'hm004',2);\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"\u591a\u8868\u8bbe\u8ba1\u4e00\u5bf9\u591a",src:s(8728).A+"",width:"1249",height:"521"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u591a\u5bf9\u591a",children:"\u591a\u5bf9\u591a"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3e\u4f8b\uff1a\u5b66\u751f\u548c\u8bfe\u7a0b\u3002\u4e00\u4e2a\u5b66\u751f\u53ef\u4ee5\u9009\u62e9\u591a\u4e2a\u8bfe\u7a0b\uff0c\u4e00\u4e2a\u8bfe\u7a0b\u4e5f\u53ef\u4ee5\u88ab\u591a\u4e2a\u5b66\u751f\u9009\u62e9"}),"\n",(0,i.jsx)(e.p,{children:"\u5b9e\u73b0\u539f\u5219\uff1a\u501f\u52a9\u7b2c\u4e09\u5f20\u8868\u4e2d\u95f4\u8868\uff0c\u4e2d\u95f4\u8868\u81f3\u5c11\u5305\u542b\u4e24\u4e2a\u5217\uff0c\u8fd9\u4e24\u4e2a\u5217\u4f5c\u4e3a\u4e2d\u95f4\u8868\u7684\u5916\u952e\uff0c\u5206\u522b\u5173\u8054\u4e24\u5f20\u8868\u7684\u4e3b\u952e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u521b\u5efastudent\u8868\nCREATE TABLE student(\n\tid INT PRIMARY KEY AUTO_INCREMENT,\t-- \u4e3b\u952eid\n\tNAME VARCHAR(20)\t\t\t-- \u5b66\u751f\u59d3\u540d\n);\n-- \u6dfb\u52a0\u6570\u636e\nINSERT INTO student VALUES (NULL,'\u5f20\u4e09'),(NULL,'\u674e\u56db');\n\n-- \u521b\u5efacourse\u8868\nCREATE TABLE course(\n\tid INT PRIMARY KEY AUTO_INCREMENT,\t-- \u4e3b\u952eid\n\tNAME VARCHAR(10)\t\t\t-- \u8bfe\u7a0b\u540d\u79f0\n);\n-- \u6dfb\u52a0\u6570\u636e\nINSERT INTO course VALUES (NULL,'\u8bed\u6587'),(NULL,'\u6570\u5b66');\n\n-- \u521b\u5efa\u4e2d\u95f4\u8868\nCREATE TABLE stu_course(\n\tid INT PRIMARY KEY AUTO_INCREMENT,\t-- \u4e3b\u952eid\n\tsid INT,  -- \u7528\u4e8e\u548cstudent\u8868\u4e2d\u7684id\u8fdb\u884c\u5916\u952e\u5173\u8054\n\tcid INT,  -- \u7528\u4e8e\u548ccourse\u8868\u4e2d\u7684id\u8fdb\u884c\u5916\u952e\u5173\u8054\n\tCONSTRAINT sc_fk1 FOREIGN KEY (sid) REFERENCES student(id), -- \u6dfb\u52a0\u5916\u952e\u7ea6\u675f\n\tCONSTRAINT sc_fk2 FOREIGN KEY (cid) REFERENCES course(id)   -- \u6dfb\u52a0\u5916\u952e\u7ea6\u675f\n);\n-- \u6dfb\u52a0\u6570\u636e\nINSERT INTO stu_course VALUES (NULL,1,1),(NULL,1,2),(NULL,2,1),(NULL,2,2);\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(82694).A+"",width:"1206",height:"687"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u8fde\u63a5\u67e5\u8be2",children:"\u8fde\u63a5\u67e5\u8be2"}),"\n",(0,i.jsx)(e.h4,{id:"\u5185\u5916\u8fde\u63a5",children:"\u5185\u5916\u8fde\u63a5"}),"\n",(0,i.jsx)(e.h5,{id:"\u5185\u8fde\u63a5",children:"\u5185\u8fde\u63a5"}),"\n",(0,i.jsxs)(e.p,{children:["\u8fde\u63a5\u67e5\u8be2\u7684\u662f\u4e24\u5f20\u8868\u6709\u4ea4\u96c6\u7684\u90e8\u5206\u6570\u636e\uff0c\u4e24\u5f20\u8868\u5206\u4e3a",(0,i.jsx)(e.strong,{children:"\u9a71\u52a8\u8868\u548c\u88ab\u9a71\u52a8\u8868"}),"\uff0c\u5982\u679c\u7ed3\u679c\u96c6\u4e2d\u7684\u6bcf\u6761\u8bb0\u5f55\u90fd\u662f\u4e24\u4e2a\u8868\u76f8\u4e92\u5339\u914d\u7684\u7ec4\u5408\uff0c\u5219\u79f0\u8fd9\u6837\u7684\u7ed3\u679c\u96c6\u4e3a\u7b1b\u5361\u5c14\u79ef"]}),"\n",(0,i.jsx)(e.p,{children:"\u5185\u8fde\u63a5\u67e5\u8be2\uff0c\u82e5\u9a71\u52a8\u8868\u4e2d\u7684\u8bb0\u5f55\u5728\u88ab\u9a71\u52a8\u8868\u4e2d\u627e\u4e0d\u5230\u5339\u914d\u7684\u8bb0\u5f55\u65f6\uff0c\u5219\u8be5\u8bb0\u5f55\u4e0d\u4f1a\u52a0\u5230\u6700\u540e\u7684\u7ed3\u679c\u96c6"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u663e\u5f0f\u5185\u8fde\u63a5\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT \u5217\u540d FROM \u8868\u540d1 [INNER] JOIN \u8868\u540d2 ON \u6761\u4ef6;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u9690\u5f0f\u5185\u8fde\u63a5\uff1a\u5185\u8fde\u63a5\u4e2d WHERE \u5b50\u53e5\u548c ON \u5b50\u53e5\u662f\u7b49\u4ef7\u7684"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT \u5217\u540d FROM \u8868\u540d1,\u8868\u540d2 WHERE \u6761\u4ef6;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"STRAIGHT_JOIN\u4e0e JOIN \u7c7b\u4f3c\uff0c\u53ea\u4e0d\u8fc7\u5de6\u8868\u59cb\u7ec8\u5728\u53f3\u8868\u4e4b\u524d\u8bfb\u53d6\uff0c\u53ea\u9002\u7528\u4e8e\u5185\u8fde\u63a5"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u5916\u8fde\u63a5",children:"\u5916\u8fde\u63a5"}),"\n",(0,i.jsxs)(e.p,{children:["\u5916\u8fde\u63a5\u67e5\u8be2\uff0c\u82e5\u9a71\u52a8\u8868\u4e2d\u7684\u8bb0\u5f55\u5728\u88ab\u9a71\u52a8\u8868\u4e2d\u627e\u4e0d\u5230\u5339\u914d\u7684\u8bb0\u5f55\u65f6\uff0c\u5219\u8be5\u8bb0\u5f55\u4e5f\u4f1a\u52a0\u5230\u6700\u540e\u7684\u7ed3\u679c\u96c6\uff0c\u53ea\u662f\u5bf9\u4e8e\u88ab\u9a71\u52a8\u8868\u4e2d",(0,i.jsx)(e.strong,{children:"\u4e0d\u5339\u914d\u8fc7\u6ee4\u6761\u4ef6"}),"\u7684\u8bb0\u5f55\uff0c\u5404\u4e2a\u5b57\u6bb5\u4f7f\u7528 NULL \u586b\u5145"]}),"\n",(0,i.jsx)(e.p,{children:"\u5e94\u7528\u5b9e\u4f8b\uff1a\u67e5\u5b66\u751f\u6210\u7ee9\uff0c\u4e5f\u60f3\u5c55\u793a\u51fa\u7f3a\u8003\u7684\u4eba\u7684\u6210\u7ee9"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5de6\u5916\u8fde\u63a5\uff1a\u9009\u62e9\u5de6\u4fa7\u7684\u8868\u4e3a\u9a71\u52a8\u8868\uff0c\u67e5\u8be2\u5de6\u8868\u7684\u5168\u90e8\u6570\u636e\uff0c\u548c\u5de6\u53f3\u4e24\u5f20\u8868\u6709\u4ea4\u96c6\u90e8\u5206\u7684\u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT \u5217\u540d FROM \u8868\u540d1 LEFT [OUTER] JOIN \u8868\u540d2 ON \u6761\u4ef6;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u53f3\u5916\u8fde\u63a5\uff1a\u9009\u62e9\u53f3\u4fa7\u7684\u8868\u4e3a\u9a71\u52a8\u8868\uff0c\u67e5\u8be2\u53f3\u8868\u7684\u5168\u90e8\u6570\u636e\uff0c\u548c\u5de6\u53f3\u4e24\u5f20\u8868\u6709\u4ea4\u96c6\u90e8\u5206\u7684\u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT \u5217\u540d FROM \u8868\u540d1 RIGHT [OUTER] JOIN \u8868\u540d2 ON \u6761\u4ef6;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(13322).A+"",width:"1315",height:"939"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5173\u8054\u67e5\u8be2",children:"\u5173\u8054\u67e5\u8be2"}),"\n",(0,i.jsx)(e.p,{children:"\u81ea\u5173\u8054\u67e5\u8be2\uff1a\u540c\u4e00\u5f20\u8868\u4e2d\u6709\u6570\u636e\u5173\u8054\uff0c\u53ef\u4ee5\u591a\u6b21\u67e5\u8be2\u8fd9\u540c\u4e00\u4e2a\u8868"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u51c6\u5907"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u521b\u5efa\u5458\u5de5\u8868\nCREATE TABLE employee(\n\tid INT PRIMARY KEY AUTO_INCREMENT,\t-- \u5458\u5de5\u7f16\u53f7\n\tNAME VARCHAR(20),\t\t\t\t\t-- \u5458\u5de5\u59d3\u540d\n\tmgr INT,\t\t\t\t\t\t\t-- \u4e0a\u7ea7\u7f16\u53f7\n\tsalary DOUBLE\t\t\t\t\t\t-- \u5458\u5de5\u5de5\u8d44\n);\n-- \u6dfb\u52a0\u6570\u636e\nINSERT INTO employee VALUES (1001,'\u5b59\u609f\u7a7a',1005,9000.00),..,(1009,'\u5b8b\u6c5f',NULL,16000.00);\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(84747).A+"",width:"410",height:"336"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u67e5\u8be2"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u67e5\u8be2\u6240\u6709\u5458\u5de5\u7684\u59d3\u540d\u53ca\u5176\u76f4\u63a5\u4e0a\u7ea7\u7684\u59d3\u540d\uff0c\u6ca1\u6709\u4e0a\u7ea7\u7684\u5458\u5de5\u4e5f\u9700\u8981\u67e5\u8be2\n/*\n\u5206\u6790\n\t\u5458\u5de5\u4fe1\u606f employee\u8868\n\t\u6761\u4ef6\uff1aemployee.mgr = employee.id\n\t\u67e5\u8be2\u5de6\u8868\u7684\u5168\u90e8\u6570\u636e\uff0c\u548c\u5de6\u53f3\u4e24\u5f20\u8868\u6709\u4ea4\u96c6\u90e8\u5206\u6570\u636e\uff0c\u5de6\u5916\u8fde\u63a5\n*/\nSELECT\n\te1.id,\n\te1.name,\n\te1.mgr,\n\te2.id,\n\te2.name\nFROM\n\temployee e1\nLEFT OUTER JOIN\n\temployee e2\nON\n\te1.mgr = e2.id;\t\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u7ed3\u679c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"id\t\tname\tmgr\t   id\t  name\n1001\t\u5b59\u609f\u7a7a\t  1005\t1005\t\u5510\u50e7\n1002\t\u732a\u516b\u6212\t  1005\t1005\t\u5510\u50e7\n1003\t\u6c99\u548c\u5c1a\t  1005\t1005\t\u5510\u50e7\n1004\t\u5c0f\u767d\u9f99\t  1005\t1005\t\u5510\u50e7\n1005\t\u5510\u50e7\t   NULL\t NULL\t NULL\n1006\t\u6b66\u677e\t   1009\t 1009\t \u5b8b\u6c5f\n1007\t\u674e\u9035\t   1009\t 1009\t \u5b8b\u6c5f\n1008\t\u6797\u51b2\t   1009\t 1009\t \u5b8b\u6c5f\n1009\t\u5b8b\u6c5f\t   NULL\t NULL\t NULL\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u8fde\u63a5\u539f\u7406",children:"\u8fde\u63a5\u539f\u7406"}),"\n",(0,i.jsxs)(e.p,{children:["Index Nested-Loop Join \u7b97\u6cd5\uff1a\u67e5\u8be2\u9a71\u52a8\u8868\u5f97\u5230",(0,i.jsx)(e.strong,{children:"\u6570\u636e\u96c6"}),"\uff0c\u7136\u540e\u6839\u636e\u6570\u636e\u96c6\u4e2d\u7684\u6bcf\u4e00\u6761\u8bb0\u5f55\u7684",(0,i.jsx)(e.strong,{children:"\u5173\u8054\u5b57\u6bb5\u518d\u5206\u522b"}),"\u5230\u88ab\u9a71\u52a8\u8868\u4e2d\u67e5\u627e\u5339\u914d\uff08",(0,i.jsx)(e.strong,{children:"\u8d70\u7d22\u5f15"}),"\uff09\uff0c\u6240\u4ee5\u9a71\u52a8\u8868\u53ea\u9700\u8981\u8bbf\u95ee\u4e00\u6b21\uff0c\u88ab\u9a71\u52a8\u8868\u8981\u8bbf\u95ee\u591a\u6b21"]}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u5c06\u67e5\u8be2\u9a71\u52a8\u8868\u540e\u5f97\u5230\u7684\u8bb0\u5f55\u6210\u4e3a\u9a71\u52a8\u8868\u7684\u6247\u51fa\uff0c\u8fde\u63a5\u67e5\u8be2\u7684\u6210\u672c\uff1a\u5355\u6b21\u8bbf\u95ee\u9a71\u52a8\u8868\u7684\u6210\u672c + \u6247\u51fa\u503c * \u5355\u6b21\u8bbf\u95ee\u88ab\u9a71\u52a8\u8868\u7684\u6210\u672c\uff0c\u4f18\u5316\u5668\u4f1a\u9009\u62e9\u6210\u672c\u6700\u5c0f\u7684\u8868\u8fde\u63a5\u987a\u5e8f\uff08\u786e\u5b9a\u8c01\u662f\u9a71\u52a8\u8868\uff0c\u8c01\u662f\u88ab\u9a71\u52a8\u8868\uff09\u751f\u6210\u6267\u884c\u8ba1\u5212\uff0c\u8fdb\u884c\u8fde\u63a5\u67e5\u8be2\uff0c\u4f18\u5316\u65b9\u5f0f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u51cf\u5c11\u9a71\u52a8\u8868\u7684\u6247\u51fa\uff08\u8ba9\u6570\u636e\u91cf\u5c0f\u7684\u8868\u6765\u505a\u9a71\u52a8\u8868\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u964d\u4f4e\u8bbf\u95ee\u88ab\u9a71\u52a8\u8868\u7684\u6210\u672c"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\uff1aSTRAIGHT_JOIN \u662f\u67e5\u4e00\u6761\u9a71\u52a8\u8868\uff0c\u7136\u540e\u6839\u636e\u5173\u8054\u5b57\u6bb5\u53bb\u67e5\u88ab\u9a71\u52a8\u8868\uff0c\u8981\u8bbf\u95ee\u591a\u6b21\u9a71\u52a8\u8868\uff0c\u6240\u4ee5\u9700\u8981\u4f18\u5316\u4e3a INL \u7b97\u6cd5"}),"\n",(0,i.jsxs)(e.p,{children:["Block Nested-Loop Join \u7b97\u6cd5\uff1a\u4e00\u79cd",(0,i.jsx)(e.strong,{children:"\u7a7a\u95f4\u6362\u65f6\u95f4"}),"\u7684\u4f18\u5316\u65b9\u5f0f\uff0c\u57fa\u4e8e\u5757\u7684\u5faa\u73af\u8fde\u63a5\uff0c\u6267\u884c\u8fde\u63a5\u67e5\u8be2\u524d\u7533\u8bf7\u4e00\u5757\u56fa\u5b9a\u5927\u5c0f\u7684\u5185\u5b58\u4f5c\u4e3a\u8fde\u63a5\u7f13\u51b2\u533a Join Buffer\uff0c\u5148\u628a\u82e5\u5e72\u6761\u9a71\u52a8\u8868\u4e2d\u7684\u6247\u51fa\u6682\u5b58\u5728\u7f13\u51b2\u533a\uff0c\u6bcf\u4e00\u6761\u88ab\u9a71\u52a8\u8868\u4e2d\u7684\u8bb0\u5f55\u4e00\u6b21\u6027\u7684\u4e0e Buffer \u4e2d\u591a\u6761\u8bb0\u5f55\u8fdb\u884c\u5339\u914d\uff08\u626b\u63cf\u5168\u90e8\u6570\u636e\uff0c\u4e00\u6761\u4e00\u6761\u7684\u5339\u914d\uff09\uff0c\u56e0\u4e3a\u662f\u5728\u5185\u5b58\u4e2d\u5b8c\u6210\uff0c\u6240\u4ee5\u901f\u5ea6\u5feb\uff0c\u5e76\u4e14\u964d\u4f4e\u4e86 I/O \u6210\u672c"]}),"\n",(0,i.jsxs)(e.p,{children:["Join Buffer \u53ef\u4ee5\u901a\u8fc7\u53c2\u6570 ",(0,i.jsx)(e.code,{children:"join_buffer_size"})," \u8fdb\u884c\u914d\u7f6e\uff0c\u9ed8\u8ba4\u5927\u5c0f\u662f 256 KB"]}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u6210\u672c\u5206\u6790\u65f6\uff0c\u5bf9\u4e8e\u5f88\u591a\u5f20\u8868\u7684\u8fde\u63a5\u67e5\u8be2\uff0c\u8fde\u63a5\u987a\u5e8f\u6709\u975e\u5e38\u591a\uff0cMySQL \u5982\u679c\u6328\u7740\u8fdb\u884c\u904d\u5386\u8ba1\u7b97\u6210\u672c\uff0c\u4f1a\u6d88\u8017\u5f88\u591a\u8d44\u6e90"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u63d0\u524d\u7ed3\u675f\u67d0\u79cd\u8fde\u63a5\u987a\u5e8f\u7684\u6210\u672c\u8bc4\u4f30\uff1a\u7ef4\u62a4\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u8bb0\u5f55\u5f53\u524d\u6210\u672c\u6700\u5c0f\u7684\u8fde\u63a5\u65b9\u5f0f\uff0c\u5982\u679c\u4e00\u79cd\u987a\u5e8f\u53ea\u8ba1\u7b97\u4e86\u4e00\u90e8\u5206\u5c31\u5df2\u7ecf\u8d85\u8fc7\u4e86\u6700\u5c0f\u6210\u672c\uff0c\u53ef\u4ee5\u63d0\u524d\u7ed3\u675f\u8ba1\u7b97"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7cfb\u7edf\u53d8\u91cf optimizer_search_depth\uff1a\u5982\u679c\u8fde\u63a5\u8868\u7684\u4e2a\u6570\u5c0f\u4e8e\u8be5\u53d8\u91cf\uff0c\u5c31\u7ee7\u7eed\u7a77\u4e3e\u5206\u6790\u6bcf\u4e00\u79cd\u8fde\u63a5\u6570\u91cf\uff0c\u53cd\u4e4b\u53ea\u5bf9\u6570\u91cf\u4e0e depth \u503c\u76f8\u540c\u7684\u8868\u8fdb\u884c\u5206\u6790\uff0c\u8be5\u503c\u8d8a\u5927\u6210\u672c\u5206\u6790\u7684\u8d8a\u7cbe\u786e"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7cfb\u7edf\u53d8\u91cf optimizer_prune_level\uff1a\u63a7\u5236\u542f\u53d1\u5f0f\u89c4\u5219\u7684\u542f\u7528\uff0c\u8fd9\u4e9b\u89c4\u5219\u5c31\u662f\u6839\u636e\u4ee5\u5f80\u7ecf\u9a8c\u6307\u5b9a\u7684\uff0c\u4e0d\u6ee1\u8db3\u89c4\u5219\u7684\u8fde\u63a5\u987a\u5e8f\u4e0d\u5206\u6790\u6210\u672c"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u8fde\u63a5\u4f18\u5316",children:"\u8fde\u63a5\u4f18\u5316"}),"\n",(0,i.jsx)(e.h5,{id:"bka",children:"BKA"}),"\n",(0,i.jsx)(e.p,{children:"Batched Key Access \u7b97\u6cd5\u662f\u5bf9 NLJ \u7b97\u6cd5\u7684\u4f18\u5316\uff0c\u5728\u8bfb\u53d6\u88ab\u9a71\u52a8\u8868\u7684\u8bb0\u5f55\u65f6\u4f7f\u7528\u987a\u5e8f IO\uff0cExtra \u4fe1\u606f\u4e2d\u4f1a\u6709 Batched Key Access \u4fe1\u606f"}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528 BKA \u7684\u8868\u7684 JOIN \u8fc7\u7a0b\u5982\u4e0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8fde\u63a5\u9a71\u52a8\u8868\u5c06\u6ee1\u8db3\u6761\u4ef6\u7684\u8bb0\u5f55\u653e\u5165 Join Buffer\uff0c\u5e76\u5c06\u4e24\u8868\u8fde\u63a5\u7684\u5b57\u6bb5\u653e\u5165\u4e00\u4e2a DYNAMIC_ARRAY ranges \u4e2d"}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u8fdb\u884c\u8868\u7684\u8fc7\u63a5\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u5c06 ranges \u76f8\u5173\u7684\u4fe1\u606f\u4f20\u5165 Buffer \u4e2d\uff0c\u8fdb\u884c\u88ab\u9a71\u52a8\u8868\u4e3b\u5efa\u7684\u67e5\u627e\u53ca\u6392\u5e8f\u64cd\u4f5c"}),"\n",(0,i.jsxs)(e.li,{children:["\u8c03\u7528\u6b65\u9aa4 2 \u4e2d\u4ea7\u751f\u7684\u6709\u5e8f\u4e3b\u5efa\uff0c",(0,i.jsx)(e.strong,{children:"\u987a\u5e8f\u8bfb\u53d6\u88ab\u9a71\u52a8\u8868\u7684\u6570\u636e"})]}),"\n",(0,i.jsx)(e.li,{children:"\u5f53\u7f13\u51b2\u533a\u7684\u6570\u636e\u88ab\u8bfb\u5b8c\u540e\uff0c\u4f1a\u91cd\u590d\u8fdb\u884c\u6b65\u9aa4 2\u30013\uff0c\u76f4\u5230\u8bb0\u5f55\u88ab\u8bfb\u53d6\u5b8c"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528 BKA \u4f18\u5316\u9700\u8981\u8bbe\u8fdb\u884c\u8bbe\u7f6e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SET optimizer_switch='mrr=on,mrr_cost_based=off,batched_key_access=on';\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\uff1a\u524d\u4e24\u4e2a\u53c2\u6570\u7684\u4f5c\u7528\u662f\u542f\u7528 MRR\uff0c\u56e0\u4e3a BKA \u7b97\u6cd5\u7684\u4f18\u5316\u8981\u4f9d\u8d56\u4e8e MRR\uff08\u7cfb\u7edf\u4f18\u5316 \u2192 \u5185\u5b58\u4f18\u5316 \u2192 Read \u8be6\u89e3\uff09"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"bnl",children:"BNL"}),"\n",(0,i.jsx)(e.h6,{id:"\u95ee\u9898",children:"\u95ee\u9898"}),"\n",(0,i.jsx)(e.p,{children:"BNL \u5373 Block Nested-Loop Join \u7b97\u6cd5\uff0c\u7531\u4e8e\u8981\u8bbf\u95ee\u591a\u6b21\u88ab\u9a71\u52a8\u8868\uff0c\u4f1a\u4ea7\u751f\u4e24\u4e2a\u95ee\u9898\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Join \u8bed\u53e5\u591a\u6b21\u626b\u63cf\u4e00\u4e2a\u51b7\u8868\uff0c\u5e76\u4e14\u8bed\u53e5\u6267\u884c\u65f6\u95f4\u5c0f\u4e8e 1 \u79d2\uff0c\u5c31\u4f1a\u5728\u518d\u6b21\u626b\u63cf\u51b7\u8868\u65f6\uff0c\u628a\u51b7\u8868\u7684\u6570\u636e\u9875\u79fb\u5230 LRU \u94fe\u8868\u5934\u90e8\uff0c\u5bfc\u81f4\u70ed\u6570\u636e\u88ab\u6dd8\u6c70\uff0c\u5f71\u54cd\u4e1a\u52a1\u7684\u6b63\u5e38\u8fd0\u884c"}),"\n",(0,i.jsx)(e.p,{children:"\u8fd9\u79cd\u60c5\u51b5\u51b7\u8868\u7684\u6570\u636e\u91cf\u8981\u5c0f\u4e8e\u6574\u4e2a Buffer Pool \u7684 old \u533a\u57df\uff0c\u80fd\u591f\u5b8c\u5168\u653e\u5165 old \u533a\uff0c\u624d\u4f1a\u518d\u6b21\u88ab\u8bfb\u65f6\u52a0\u5230 young\uff0c\u5426\u5219\u8bfb\u53d6\u4e0b\u4e00\u6bb5\u65f6\u5c31\u5df2\u7ecf\u628a\u4e0a\u4e00\u6bb5\u6dd8\u6c70"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Join \u8bed\u53e5\u5728\u5faa\u73af\u8bfb\u78c1\u76d8\u548c\u6dd8\u6c70\u5185\u5b58\u9875\uff0c\u8fdb\u5165 old \u533a\u57df\u7684\u6570\u636e\u9875\u5f88\u53ef\u80fd\u5728 1 \u79d2\u4e4b\u5185\u5c31\u88ab\u6dd8\u6c70\uff0c\u5c31\u4f1a\u5bfc\u81f4 MySQL \u5b9e\u4f8b\u7684 Buffer Pool \u5728\u8fd9\u6bb5\u65f6\u95f4\u5185 young \u533a\u57df\u7684\u6570\u636e\u9875\u6ca1\u6709\u88ab\u5408\u7406\u5730\u6dd8\u6c70"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5927\u8868 Join \u64cd\u4f5c\u867d\u7136\u5bf9 IO \u6709\u5f71\u54cd\uff0c\u4f46\u662f\u5728\u8bed\u53e5\u6267\u884c\u7ed3\u675f\u540e\u5bf9 IO \u7684\u5f71\u54cd\u968f\u4e4b\u7ed3\u675f\u3002\u4f46\u662f\u5bf9 Buffer Pool \u7684\u5f71\u54cd\u5c31\u662f\u6301\u7eed\u6027\u7684\uff0c\u9700\u8981\u4f9d\u9760\u540e\u7eed\u7684\u67e5\u8be2\u8bf7\u6c42\u6162\u6162\u6062\u590d\u5185\u5b58\u547d\u4e2d\u7387"}),"\n",(0,i.jsx)(e.h6,{id:"\u4f18\u5316",children:"\u4f18\u5316"}),"\n",(0,i.jsx)(e.p,{children:"\u5c06 BNL \u7b97\u6cd5\u8f6c\u6210 BKA \u7b97\u6cd5\uff0c\u4f18\u5316\u65b9\u5411\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5728\u88ab\u9a71\u52a8\u8868\u4e0a\u5efa\u7d22\u5f15\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u6839\u636e\u7d22\u5f15\u8fdb\u884c\u987a\u5e8f IO"}),"\n",(0,i.jsxs)(e.li,{children:["\u4f7f\u7528\u4e34\u65f6\u8868\uff0c",(0,i.jsx)(e.strong,{children:"\u5728\u4e34\u65f6\u8868\u4e0a\u5efa\u7acb\u7d22\u5f15"}),"\uff0c\u5c06\u88ab\u9a71\u52a8\u8868\u548c\u4e34\u65f6\u8868\u8fdb\u884c\u8fde\u63a5\u67e5\u8be2"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u9a71\u52a8\u8868 t1\uff0c\u88ab\u9a71\u52a8\u8868 t2\uff0c\u4f7f\u7528\u4e34\u65f6\u8868\u7684\u5de5\u4f5c\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u628a\u8868 t1 \u4e2d\u6ee1\u8db3\u6761\u4ef6\u7684\u6570\u636e\u653e\u5728\u4e34\u65f6\u8868 tmp_t \u4e2d"}),"\n",(0,i.jsx)(e.li,{children:"\u7ed9\u4e34\u65f6\u8868 tmp_t \u7684\u5173\u8054\u5b57\u6bb5\u52a0\u4e0a\u7d22\u5f15\uff0c\u4f7f\u7528 BKA \u7b97\u6cd5"}),"\n",(0,i.jsx)(e.li,{children:"\u8ba9\u8868 t2 \u548c tmp_t \u505a Join \u64cd\u4f5c\uff08\u4e34\u65f6\u8868\u662f\u88ab\u9a71\u52a8\u8868\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8865\u5145\uff1aMySQL 8.0 \u652f\u6301 hash join\uff0cjoin_buffer \u7ef4\u62a4\u7684\u4e0d\u518d\u662f\u4e00\u4e2a\u65e0\u5e8f\u6570\u7ec4\uff0c\u800c\u662f\u4e00\u4e2a\u54c8\u5e0c\u8868\uff0c\u67e5\u8be2\u6548\u7387\u66f4\u9ad8\uff0c\u6267\u884c\u6548\u7387\u6bd4\u4e34\u65f6\u8868\u66f4\u9ad8"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5d4c\u5957\u67e5\u8be2",children:"\u5d4c\u5957\u67e5\u8be2"}),"\n",(0,i.jsx)(e.h4,{id:"\u67e5\u8be2\u5206\u7c7b",children:"\u67e5\u8be2\u5206\u7c7b"}),"\n",(0,i.jsxs)(e.p,{children:["\u67e5\u8be2\u8bed\u53e5\u4e2d\u5d4c\u5957\u4e86\u67e5\u8be2\u8bed\u53e5\uff0c",(0,i.jsx)(e.strong,{children:"\u5c06\u5d4c\u5957\u67e5\u8be2\u79f0\u4e3a\u5b50\u67e5\u8be2"}),"\uff0cFROM \u5b50\u53e5\u540e\u9762\u7684\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u96c6\u79f0\u4e3a\u6d3e\u751f\u8868"]}),"\n",(0,i.jsx)(e.p,{children:"\u6839\u636e\u7ed3\u679c\u5206\u7c7b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7ed3\u679c\u662f\u5355\u884c\u5355\u5217\uff1a\u53ef\u4ee5\u5c06\u67e5\u8be2\u7684\u7ed3\u679c\u4f5c\u4e3a\u53e6\u4e00\u6761\u8bed\u53e5\u7684\u67e5\u8be2\u6761\u4ef6\uff0c\u4f7f\u7528\u8fd0\u7b97\u7b26\u5224\u65ad"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT \u5217\u540d FROM \u8868\u540d WHERE \u5217\u540d=(SELECT \u5217\u540d/\u805a\u5408\u51fd\u6570(\u5217\u540d) FROM \u8868\u540d [WHERE \u6761\u4ef6]);\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7ed3\u679c\u662f\u591a\u884c\u5355\u5217\uff1a\u53ef\u4ee5\u4f5c\u4e3a\u6761\u4ef6\uff0c\u4f7f\u7528\u8fd0\u7b97\u7b26 IN \u6216 NOT IN \u8fdb\u884c\u5224\u65ad"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT \u5217\u540d FROM \u8868\u540d WHERE \u5217\u540d [NOT] IN (SELECT \u5217\u540d FROM \u8868\u540d [WHERE \u6761\u4ef6]); \n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7ed3\u679c\u662f\u591a\u884c\u591a\u5217\uff1a\u67e5\u8be2\u7684\u7ed3\u679c\u53ef\u4ee5\u4f5c\u4e3a\u4e00\u5f20\u865a\u62df\u8868\u53c2\u4e0e\u67e5\u8be2"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT \u5217\u540d FROM \u8868\u540d [\u522b\u540d],(SELECT \u5217\u540d FROM \u8868\u540d [WHERE \u6761\u4ef6]) [\u522b\u540d] [WHERE \u6761\u4ef6];\n\n-- \u67e5\u8be2\u8ba2\u5355\u8868orderlist\u4e2did\u5927\u4e8e4\u7684\u8ba2\u5355\u4fe1\u606f\u548c\u6240\u5c5e\u7528\u6237USER\u4fe1\u606f\nSELECT \n\t* \nFROM \n\tUSER u,\n\t(SELECT * FROM orderlist WHERE id>4) o \nWHERE \n\tu.id=o.uid;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u76f8\u5173\u6027\u5206\u7c7b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e0d\u76f8\u5173\u5b50\u67e5\u8be2\uff1a\u5b50\u67e5\u8be2\u4e0d\u4f9d\u8d56\u5916\u5c42\u67e5\u8be2\u7684\u503c\uff0c\u53ef\u4ee5\u5355\u72ec\u8fd0\u884c\u51fa\u7ed3\u679c"}),"\n",(0,i.jsx)(e.li,{children:"\u76f8\u5173\u5b50\u67e5\u8be2\uff1a\u5b50\u67e5\u8be2\u7684\u6267\u884c\u9700\u8981\u4f9d\u8d56\u5916\u5c42\u67e5\u8be2\u7684\u503c"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u67e5\u8be2\u4f18\u5316",children:"\u67e5\u8be2\u4f18\u5316"}),"\n",(0,i.jsxs)(e.p,{children:["\u4e0d\u76f8\u5173\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u96c6\u4f1a\u88ab\u5199\u5165\u4e00\u4e2a\u4e34\u65f6\u8868\uff0c\u5e76\u4e14\u5728\u5199\u5165\u65f6",(0,i.jsx)(e.strong,{children:"\u53bb\u91cd"}),"\uff0c\u8be5\u8fc7\u7a0b\u79f0\u4e3a",(0,i.jsx)(e.strong,{children:"\u7269\u5316"}),"\uff0c\u5b58\u50a8\u7ed3\u679c\u96c6\u7684\u4e34\u65f6\u8868\u79f0\u4e3a\u7269\u5316\u8868"]}),"\n",(0,i.jsx)(e.p,{children:"\u7cfb\u7edf\u53d8\u91cf tmp_table_size \u6216\u8005 max_heap_table_size \u4e3a\u8868\u7684\u6700\u503c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5c0f\u4e8e\u7cfb\u7edf\u53d8\u91cf\u65f6\uff0c\u5185\u5b58\u4e2d\u53ef\u4ee5\u4fdd\u5b58\uff0c\u4f1a\u4e3a\u5efa\u7acb",(0,i.jsx)(e.strong,{children:"\u57fa\u4e8e\u5185\u5b58"}),"\u7684 MEMORY \u5b58\u50a8\u5f15\u64ce\u7684\u4e34\u65f6\u8868\uff0c\u5e76\u5efa\u7acb\u54c8\u5e0c\u7d22\u5f15"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5927\u4e8e\u4efb\u610f\u4e00\u4e2a\u7cfb\u7edf\u53d8\u91cf\u65f6\uff0c\u7269\u5316\u8868\u4f1a\u4f7f\u7528",(0,i.jsx)(e.strong,{children:"\u57fa\u4e8e\u78c1\u76d8"}),"\u7684 InnoDB \u5b58\u50a8\u5f15\u64ce\u6765\u4fdd\u5b58\u7ed3\u679c\u96c6\u4e2d\u7684\u8bb0\u5f55\uff0c\u7d22\u5f15\u7c7b\u578b\u4e3a B+ \u6811"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u7269\u5316\u540e\uff0c\u5d4c\u5957\u67e5\u8be2\u5c31\u76f8\u5f53\u4e8e\u5916\u5c42\u67e5\u8be2\u7684\u8868\u548c\u7269\u5316\u8868\u8fdb\u884c\u5185\u8fde\u63a5\u67e5\u8be2\uff0c\u7136\u540e\u7ecf\u8fc7\u4f18\u5316\u5668\u9009\u62e9\u6210\u672c\u6700\u5c0f\u7684\u8868\u8fde\u63a5\u987a\u5e8f\u6267\u884c\u67e5\u8be2"}),"\n",(0,i.jsx)(e.p,{children:"\u5b50\u67e5\u8be2\u7269\u5316\u4f1a\u4ea7\u751f\u5efa\u7acb\u4e34\u65f6\u8868\u7684\u6210\u672c\uff0c\u4f46\u662f\u5c06\u5b50\u67e5\u8be2\u8f6c\u5316\u4e3a\u8fde\u63a5\u67e5\u8be2\u53ef\u4ee5\u5145\u5206\u53d1\u6325\u4f18\u5316\u5668\u7684\u4f5c\u7528\uff0c\u6240\u4ee5\u5f15\u5165\uff1a\u534a\u8fde\u63a5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"t1 \u548c t2 \u8868\u8fdb\u884c\u534a\u8fde\u63a5\uff0c\u5bf9\u4e8e t1 \u8868\u4e2d\u7684\u67d0\u6761\u8bb0\u5f55\uff0c\u53ea\u9700\u8981\u5173\u5fc3\u5728 t2 \u8868\u4e2d\u662f\u5426\u5b58\u5728\uff0c\u800c\u4e0d\u9700\u8981\u5173\u5fc3\u6709\u591a\u5c11\u6761\u8bb0\u5f55\u4e0e\u4e4b\u5339\u914d\uff0c\u6700\u7ec8\u7ed3\u679c\u96c6\u53ea\u4fdd\u7559 t1 \u7684\u8bb0\u5f55"}),"\n",(0,i.jsx)(e.li,{children:"\u534a\u8fde\u63a5\u53ea\u662f\u6267\u884c\u5b50\u67e5\u8be2\u7684\u4e00\u79cd\u65b9\u5f0f\uff0cMySQL \u5e76\u6ca1\u6709\u63d0\u4f9b\u9762\u5411\u7528\u6237\u7684\u534a\u8fde\u63a5\u8bed\u6cd5"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u4e66\u7c4d\uff1a",(0,i.jsx)(e.a,{href:"https://book.douban.com/subject/35231266/",children:"https://book.douban.com/subject/35231266/"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u8054\u5408\u67e5\u8be2",children:"\u8054\u5408\u67e5\u8be2"}),"\n",(0,i.jsx)(e.p,{children:"UNION \u662f\u53d6\u8fd9\u4e24\u4e2a\u5b50\u67e5\u8be2\u7ed3\u679c\u7684\u5e76\u96c6\uff0c\u5e76\u8fdb\u884c\u53bb\u91cd\uff0c\u540c\u65f6\u8fdb\u884c\u9ed8\u8ba4\u89c4\u5219\u7684\u6392\u5e8f\uff08union \u662f\u884c\u52a0\u8d77\u6765\uff0cjoin \u662f\u5217\u52a0\u8d77\u6765\uff09"}),"\n",(0,i.jsx)(e.p,{children:"UNION ALL \u662f\u5bf9\u4e24\u4e2a\u7ed3\u679c\u96c6\u8fdb\u884c\u5e76\u96c6\u64cd\u4f5c\u4e0d\u8fdb\u884c\u53bb\u91cd\uff0c\u4e0d\u8fdb\u884c\u6392\u5e8f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"(select 1000 as f) union (select id from t1 order by id desc limit 2); #t1\u8868\u4e2d\u5305\u542bid \u4e3a 1-1000 \u7684\u6570\u636e\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8bed\u53e5\u7684\u6267\u884c\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u521b\u5efa\u4e00\u4e2a\u5185\u5b58\u4e34\u65f6\u8868\uff0c\u8fd9\u4e2a\u4e34\u65f6\u8868\u53ea\u6709\u4e00\u4e2a\u6574\u578b\u5b57\u6bb5 f\uff0c\u5e76\u4e14 f \u662f\u4e3b\u952e\u5b57\u6bb5"}),"\n",(0,i.jsx)(e.li,{children:"\u6267\u884c\u7b2c\u4e00\u4e2a\u5b50\u67e5\u8be2\uff0c\u5f97\u5230 1000 \u8fd9\u4e2a\u503c\uff0c\u5e76\u5b58\u5165\u4e34\u65f6\u8868\u4e2d"}),"\n",(0,i.jsx)(e.li,{children:"\u6267\u884c\u7b2c\u4e8c\u4e2a\u5b50\u67e5\u8be2\uff0c\u62ff\u5230\u7b2c\u4e00\u884c id=1000\uff0c\u8bd5\u56fe\u63d2\u5165\u4e34\u65f6\u8868\u4e2d\uff0c\u4f46\u7531\u4e8e 1000 \u8fd9\u4e2a\u503c\u5df2\u7ecf\u5b58\u5728\u4e8e\u4e34\u65f6\u8868\u4e86\uff0c\u8fdd\u53cd\u4e86\u552f\u4e00\u6027\u7ea6\u675f\uff0c\u6240\u4ee5\u63d2\u5165\u5931\u8d25\uff0c\u7136\u540e\u7ee7\u7eed\u6267\u884c"}),"\n",(0,i.jsx)(e.li,{children:"\u53d6\u5230\u7b2c\u4e8c\u884c id=999\uff0c\u63d2\u5165\u4e34\u65f6\u8868\u6210\u529f"}),"\n",(0,i.jsx)(e.li,{children:"\u4ece\u4e34\u65f6\u8868\u4e2d\u6309\u884c\u53d6\u51fa\u6570\u636e\uff0c\u8fd4\u56de\u7ed3\u679c\u5e76\u5220\u9664\u4e34\u65f6\u8868\uff0c\u7ed3\u679c\u4e2d\u5305\u542b\u4e24\u884c\u6570\u636e\u5206\u522b\u662f 1000 \u548c 999"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u67e5\u8be2\u7ec3\u4e60",children:"\u67e5\u8be2\u7ec3\u4e60"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u51c6\u5907\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u521b\u5efadb4\u6570\u636e\u5e93\nCREATE DATABASE db4;\n-- \u4f7f\u7528db4\u6570\u636e\u5e93\nUSE db4;\n\n-- \u521b\u5efauser\u8868\nCREATE TABLE USER(\n\tid INT PRIMARY KEY AUTO_INCREMENT,\t-- \u7528\u6237id\n\tNAME VARCHAR(20),\t\t\t\t\t-- \u7528\u6237\u59d3\u540d\n\tage INT                             -- \u7528\u6237\u5e74\u9f84\n);\n\n-- \u8ba2\u5355\u8868\nCREATE TABLE orderlist(\n\tid INT PRIMARY KEY AUTO_INCREMENT,\t-- \u8ba2\u5355id\n\tnumber VARCHAR(30),\t\t\t\t\t-- \u8ba2\u5355\u7f16\u53f7\n\tuid INT,   \t\t\t\t\t\t\t-- \u5916\u952e\u5b57\u6bb5\n\tCONSTRAINT ou_fk1 FOREIGN KEY (uid) REFERENCES USER(id)\n);\n\n-- \u5546\u54c1\u5206\u7c7b\u8868\nCREATE TABLE category(\n\tid INT PRIMARY KEY AUTO_INCREMENT,  -- \u5546\u54c1\u5206\u7c7bid\n\tNAME VARCHAR(10)                    -- \u5546\u54c1\u5206\u7c7b\u540d\u79f0\n);\n\n-- \u5546\u54c1\u8868\nCREATE TABLE product(\n\tid INT PRIMARY KEY AUTO_INCREMENT,   -- \u5546\u54c1id\n\tNAME VARCHAR(30),                    -- \u5546\u54c1\u540d\u79f0\n\tcid INT, -- \u5916\u952e\u5b57\u6bb5\n\tCONSTRAINT cp_fk1 FOREIGN KEY (cid) REFERENCES category(id)\n);\n\n-- \u4e2d\u95f4\u8868\nCREATE TABLE us_pro(\n\tupid INT PRIMARY KEY AUTO_INCREMENT,  -- \u4e2d\u95f4\u8868id\n\tuid INT, \t\t\t\t\t\t\t  -- \u5916\u952e\u5b57\u6bb5\u3002\u9700\u8981\u548c\u7528\u6237\u8868\u7684\u4e3b\u952e\u4ea7\u751f\u5173\u8054\n\tpid INT,\t\t\t\t\t\t\t  -- \u5916\u952e\u5b57\u6bb5\u3002\u9700\u8981\u548c\u5546\u54c1\u8868\u7684\u4e3b\u952e\u4ea7\u751f\u5173\u8054\n\tCONSTRAINT up_fk1 FOREIGN KEY (uid) REFERENCES USER(id),\n\tCONSTRAINT up_fk2 FOREIGN KEY (pid) REFERENCES product(id)\n);\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"\u591a\u8868\u7ec3\u4e60\u67b6\u6784\u8bbe\u8ba1",src:s(89018).A+"",width:"936",height:"690"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6570\u636e\u67e5\u8be2\uff1a"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u7528\u6237\u7684\u7f16\u53f7\u3001\u59d3\u540d\u3001\u5e74\u9f84\u3001\u8ba2\u5355\u7f16\u53f7"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\uff1a\u7528\u6237\u7684\u7f16\u53f7\u3001\u59d3\u540d\u3001\u5e74\u9f84\u5728 user \u8868\uff0c\u8ba2\u5355\u7f16\u53f7\u5728 orderlist \u8868"}),"\n",(0,i.jsx)(e.p,{children:"\u6761\u4ef6\uff1auser.id = orderlist.uid"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT\n\tu.*,\n\to.number\nFROM\n\tUSER u,\n\torderlist o\nWHERE\n\tu.id = o.uid;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u6240\u6709\u7684\u7528\u6237\uff0c\u663e\u793a\u7528\u6237\u7684\u7f16\u53f7\u3001\u59d3\u540d\u3001\u5e74\u9f84\u3001\u8ba2\u5355\u7f16\u53f7\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT\n\tu.*,\n\to.number\nFROM\n\tUSER u\nLEFT OUTER JOIN\n\torderlist o\nON\n\tu.id = o.uid;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u7528\u6237\u5e74\u9f84\u5927\u4e8e 23 \u5c81\u7684\u4fe1\u606f\uff0c\u663e\u793a\u7528\u6237\u7684\u7f16\u53f7\u3001\u59d3\u540d\u3001\u5e74\u9f84\u3001\u8ba2\u5355\u7f16\u53f7"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT\n\tu.*,\n\to.number\nFROM\n\tUSER u,\n\torderlist o\nWHERE\n\tu.id = o.uid\n\tAND\n\tu.age > 23;\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT\n\tu.*,\n\to.number\nFROM\n\t(SELECT * FROM USER WHERE age > 23) u,-- \u5d4c\u5957\u67e5\u8be2\n\torderlist o\nWHERE\n\tu.id = o.uid;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u5f20\u4e09\u548c\u674e\u56db\u7528\u6237\u7684\u4fe1\u606f\uff0c\u663e\u793a\u7528\u6237\u7684\u7f16\u53f7\u3001\u59d3\u540d\u3001\u5e74\u9f84\u3001\u8ba2\u5355\u7f16\u53f7\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT\n\tu.*,\n\to.number\nFROM\n\tUSER u,\n\torderlist o\nWHERE\n\tu.id=o.uid\n\tAND\n\tu.name IN ('\u5f20\u4e09','\u674e\u56db');\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u6240\u6709\u7684\u7528\u6237\u548c\u8be5\u7528\u6237\u80fd\u67e5\u770b\u7684\u6240\u6709\u7684\u5546\u54c1\uff0c\u663e\u793a\u7528\u6237\u7684\u7f16\u53f7\u3001\u59d3\u540d\u3001\u5e74\u9f84\u3001\u5546\u54c1\u540d\u79f0"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\uff1a\u7528\u6237\u7684\u7f16\u53f7\u3001\u59d3\u540d\u3001\u5e74\u9f84\u5728 user \u8868\uff0c\u5546\u54c1\u540d\u79f0\u5728 product \u8868\uff0c\u4e2d\u95f4\u8868 us_pro"}),"\n",(0,i.jsx)(e.p,{children:"\u6761\u4ef6\uff1aus_pro.uid = user.id AND us_pro.pid = product.id"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT\n\tu.id,\n\tu.name,\n\tu.age,\n\tp.name\nFROM\n\tUSER u,\n\tproduct p,\n\tus_pro up\nWHERE\n\tup.uid = u.id\n\tAND\n\tup.pid=p.id;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u5f20\u4e09\u548c\u674e\u56db\u8fd9\u4e24\u4e2a\u7528\u6237\u53ef\u4ee5\u770b\u5230\u7684\u5546\u54c1\uff0c\u663e\u793a\u7528\u6237\u7684\u7f16\u53f7\u3001\u59d3\u540d\u3001\u5e74\u9f84\u3001\u5546\u54c1\u540d\u79f0\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT\n\tu.id,\n\tu.name,\n\tu.age,\n\tp.name\nFROM\n\tUSER u,\n\tproduct p,\n\tus_pro up\nWHERE\n\tup.uid=u.id\n\tAND\n\tup.pid=p.id\n\tAND\n\tu.name IN ('\u5f20\u4e09','\u674e\u56db');\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u9ad8\u7ea7\u7ed3\u6784",children:"\u9ad8\u7ea7\u7ed3\u6784"}),"\n",(0,i.jsx)(e.h3,{id:"\u89c6\u56fe",children:"\u89c6\u56fe"}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u4ecb\u7ecd",children:"\u57fa\u672c\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.p,{children:"\u89c6\u56fe\u6982\u5ff5\uff1a\u89c6\u56fe\u662f\u4e00\u79cd\u865a\u62df\u5b58\u5728\u7684\u6570\u636e\u8868\uff0c\u8fd9\u4e2a\u865a\u62df\u7684\u8868\u5e76\u4e0d\u5728\u6570\u636e\u5e93\u4e2d\u5b9e\u9645\u5b58\u5728"}),"\n",(0,i.jsx)(e.p,{children:"\u672c\u8d28\uff1a\u5c06\u4e00\u6761 SELECT \u67e5\u8be2\u8bed\u53e5\u7684\u7ed3\u679c\u5c01\u88c5\u5230\u4e86\u4e00\u4e2a\u865a\u62df\u8868\u4e2d\uff0c\u6240\u4ee5\u5728\u521b\u5efa\u89c6\u56fe\u7684\u65f6\u5019\uff0c\u5de5\u4f5c\u91cd\u5fc3\u8981\u653e\u5728\u8fd9\u6761 SELECT \u67e5\u8be2\u8bed\u53e5\u4e0a"}),"\n",(0,i.jsx)(e.p,{children:"\u4f5c\u7528\uff1a\u5c06\u4e00\u4e9b\u6bd4\u8f83\u590d\u6742\u7684\u67e5\u8be2\u8bed\u53e5\u7684\u7ed3\u679c\uff0c\u5c01\u88c5\u5230\u4e00\u4e2a\u865a\u62df\u8868\u4e2d\uff0c\u518d\u6709\u76f8\u540c\u67e5\u8be2\u9700\u6c42\u65f6\uff0c\u76f4\u63a5\u67e5\u8be2\u8be5\u865a\u62df\u8868"}),"\n",(0,i.jsx)(e.p,{children:"\u4f18\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7b80\u5355\uff1a\u4f7f\u7528\u89c6\u56fe\u7684\u7528\u6237\u4e0d\u9700\u8981\u5173\u5fc3\u8868\u7684\u7ed3\u6784\u3001\u5173\u8054\u6761\u4ef6\u548c\u7b5b\u9009\u6761\u4ef6\uff0c\u56e0\u4e3a\u865a\u62df\u8868\u4e2d\u5df2\u7ecf\u662f\u8fc7\u6ee4\u597d\u7684\u7ed3\u679c\u96c6"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b89\u5168\uff1a\u4f7f\u7528\u89c6\u56fe\u7684\u7528\u6237\u53ea\u80fd\u8bbf\u95ee\u67e5\u8be2\u7684\u7ed3\u679c\u96c6\uff0c\u5bf9\u8868\u7684\u6743\u9650\u7ba1\u7406\u5e76\u4e0d\u80fd\u9650\u5236\u5230\u67d0\u4e2a\u884c\u67d0\u4e2a\u5217"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u72ec\u7acb\uff0c\u4e00\u65e6\u89c6\u56fe\u7684\u7ed3\u6784\u786e\u5b9a\uff0c\u53ef\u4ee5\u5c4f\u853d\u8868\u7ed3\u6784\u53d8\u5316\u5bf9\u7528\u6237\u7684\u5f71\u54cd\uff0c\u6e90\u8868\u589e\u52a0\u5217\u5bf9\u89c6\u56fe\u6ca1\u6709\u5f71\u54cd\uff1b\u6e90\u8868\u4fee\u6539\u5217\u540d\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u89c6\u56fe\u6765\u89e3\u51b3\uff0c\u4e0d\u4f1a\u9020\u6210\u5bf9\u8bbf\u95ee\u8005\u7684\u5f71\u54cd"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u89c6\u56fe\u521b\u5efa",children:"\u89c6\u56fe\u521b\u5efa"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u89c6\u56fe"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE [OR REPLACE] \nVIEW \u89c6\u56fe\u540d\u79f0 [(\u5217\u540d\u5217\u8868)] \nAS \u67e5\u8be2\u8bed\u53e5\n[WITH [CASCADED | LOCAL] CHECK OPTION];\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"WITH [CASCADED | LOCAL] CHECK OPTION"})," \u51b3\u5b9a\u4e86\u662f\u5426\u5141\u8bb8\u66f4\u65b0\u6570\u636e\u4f7f\u8bb0\u5f55\u4e0d\u518d\u6ee1\u8db3\u89c6\u56fe\u7684\u6761\u4ef6\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"LOCAL\uff1a\u53ea\u8981\u6ee1\u8db3\u672c\u89c6\u56fe\u7684\u6761\u4ef6\u5c31\u53ef\u4ee5\u66f4\u65b0"}),"\n",(0,i.jsx)(e.li,{children:"CASCADED\uff1a\u5fc5\u987b\u6ee1\u8db3\u6240\u6709\u9488\u5bf9\u8be5\u89c6\u56fe\u7684\u6240\u6709\u89c6\u56fe\u7684\u6761\u4ef6\u624d\u53ef\u4ee5\u66f4\u65b0\uff0c \u9ed8\u8ba4\u503c"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f8b\u5982"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u6570\u636e\u51c6\u5907 city\nid\tNAME\tcid\n1\t\u6df1\u5733\t \t1\n2\t\u4e0a\u6d77\t\t1\n3\t\u7ebd\u7ea6\t\t2\n4\t\u83ab\u65af\u79d1\t    3\n\n-- \u6570\u636e\u51c6\u5907 country\nid\tNAME\n1\t\u4e2d\u56fd\n2\t\u7f8e\u56fd\n3\t\u4fc4\u7f57\u65af\n\n-- \u521b\u5efacity_country\u89c6\u56fe\uff0c\u4fdd\u5b58\u57ce\u5e02\u548c\u56fd\u5bb6\u7684\u4fe1\u606f(\u4f7f\u7528\u6307\u5b9a\u5217\u540d)\nCREATE \nVIEW \n\tcity_country (city_id,city_name,country_name)\nAS\n    SELECT\n        c1.id,\n        c1.name,\n        c2.name\n    FROM\n        city c1,\n        country c2\n    WHERE\n        c1.cid=c2.id;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u89c6\u56fe\u67e5\u8be2",children:"\u89c6\u56fe\u67e5\u8be2"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u6240\u6709\u6570\u636e\u8868\uff0c\u89c6\u56fe\u4e5f\u4f1a\u67e5\u8be2\u51fa\u6765"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW TABLES;\nSHOW TABLE STATUS [\\G];\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u89c6\u56fe"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM \u89c6\u56fe\u540d\u79f0;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u67d0\u4e2a\u89c6\u56fe\u521b\u5efa"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW CREATE VIEW \u89c6\u56fe\u540d\u79f0;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u89c6\u56fe\u4fee\u6539",children:"\u89c6\u56fe\u4fee\u6539"}),"\n",(0,i.jsxs)(e.p,{children:["\u89c6\u56fe\u8868\u6570\u636e\u4fee\u6539\uff0c\u4f1a",(0,i.jsx)(e.strong,{children:"\u81ea\u52a8\u4fee\u6539\u6e90\u8868\u4e2d\u7684\u6570\u636e"}),"\uff0c\u56e0\u4e3a\u66f4\u65b0\u7684\u662f\u89c6\u56fe\u4e2d\u7684\u57fa\u8868\u4e2d\u7684\u6570\u636e"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539\u89c6\u56fe\u8868\u4e2d\u7684\u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"UPDATE \u89c6\u56fe\u540d\u79f0 SET \u5217\u540d = \u503c WHERE \u6761\u4ef6;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539\u89c6\u56fe\u7684\u7ed3\u6784"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER [ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}]\nVIEW \u89c6\u56fe\u540d\u79f0 [(\u5217\u540d\u5217\u8868)] \nAS \u67e5\u8be2\u8bed\u53e5\n[WITH [CASCADED | LOCAL] CHECK OPTION]\n\n-- \u5c06\u89c6\u56fe\u4e2d\u7684country_name\u4fee\u6539\u4e3aname\nALTER \nVIEW \n\tcity_country (city_id,city_name,name) \nAS\n    SELECT\n        c1.id,\n        c1.name,\n        c2.name\n    FROM\n        city c1,\n        country c2\n    WHERE\n        c1.cid=c2.id;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u89c6\u56fe\u5220\u9664",children:"\u89c6\u56fe\u5220\u9664"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u89c6\u56fe"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DROP VIEW \u89c6\u56fe\u540d\u79f0;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u5b58\u5728\u5219\u5220\u9664"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DROP VIEW IF EXISTS \u89c6\u56fe\u540d\u79f0;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5b58\u50a8\u8fc7\u7a0b",children:"\u5b58\u50a8\u8fc7\u7a0b"}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u4ecb\u7ecd-1",children:"\u57fa\u672c\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.p,{children:"\u5b58\u50a8\u8fc7\u7a0b\u548c\u51fd\u6570\uff1a\u5b58\u50a8\u8fc7\u7a0b\u548c\u51fd\u6570\u662f\u4e8b\u5148\u7ecf\u8fc7\u7f16\u8bd1\u5e76\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u7684\u4e00\u6bb5 SQL \u8bed\u53e5\u7684\u96c6\u5408"}),"\n",(0,i.jsx)(e.p,{children:"\u5b58\u50a8\u8fc7\u7a0b\u548c\u51fd\u6570\u7684\u597d\u5904\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u63d0\u9ad8\u4ee3\u7801\u7684\u590d\u7528\u6027"}),"\n",(0,i.jsx)(e.li,{children:"\u51cf\u5c11\u6570\u636e\u5728\u6570\u636e\u5e93\u548c\u5e94\u7528\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u4f20\u8f93\uff0c\u63d0\u9ad8\u4f20\u8f93\u6548\u7387"}),"\n",(0,i.jsx)(e.li,{children:"\u51cf\u5c11\u4ee3\u7801\u5c42\u9762\u7684\u4e1a\u52a1\u5904\u7406"}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.strong,{children:"\u4e00\u6b21\u7f16\u8bd1\u6c38\u4e45\u6709\u6548"})}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5b58\u50a8\u8fc7\u7a0b\u548c\u51fd\u6570\u7684\u533a\u522b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5b58\u50a8\u51fd\u6570\u5fc5\u987b\u6709\u8fd4\u56de\u503c"}),"\n",(0,i.jsx)(e.li,{children:"\u5b58\u50a8\u8fc7\u7a0b\u53ef\u4ee5\u6ca1\u6709\u8fd4\u56de\u503c"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u64cd\u4f5c",children:"\u57fa\u672c\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"DELIMITER\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"DELIMITER \u5173\u952e\u5b57\u7528\u6765\u58f0\u660e sql \u8bed\u53e5\u7684\u5206\u9694\u7b26\uff0c\u544a\u8bc9 MySQL \u8be5\u6bb5\u547d\u4ee4\u5df2\u7ecf\u7ed3\u675f"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"MySQL \u8bed\u53e5\u9ed8\u8ba4\u7684\u5206\u9694\u7b26\u662f\u5206\u53f7\uff0c\u4f46\u662f\u6709\u65f6\u9700\u8981\u4e00\u6761\u529f\u80fd sql \u8bed\u53e5\u4e2d\u5305\u542b\u5206\u53f7\uff0c\u4f46\u662f\u5e76\u4e0d\u4f5c\u4e3a\u7ed3\u675f\u6807\u8bc6\uff0c\u8fd9\u65f6\u4f7f\u7528 DELIMITER \u6765\u6307\u5b9a\u5206\u9694\u7b26\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELIMITER \u5206\u9694\u7b26\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5b58\u50a8\u8fc7\u7a0b\u7684\u521b\u5efa\u8c03\u7528\u67e5\u770b\u548c\u5220\u9664\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u5b58\u50a8\u8fc7\u7a0b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u4fee\u6539\u5206\u9694\u7b26\u4e3a$\nDELIMITER $\n\n-- \u6807\u51c6\u8bed\u6cd5\nCREATE PROCEDURE \u5b58\u50a8\u8fc7\u7a0b\u540d\u79f0(\u53c2\u6570...)\nBEGIN\n\tsql\u8bed\u53e5;\nEND$\n\n-- \u4fee\u6539\u5206\u9694\u7b26\u4e3a\u5206\u53f7\nDELIMITER ;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CALL \u5b58\u50a8\u8fc7\u7a0b\u540d\u79f0(\u5b9e\u9645\u53c2\u6570);\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u5b58\u50a8\u8fc7\u7a0b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM mysql.proc WHERE db='\u6570\u636e\u5e93\u540d\u79f0';\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u5b58\u50a8\u8fc7\u7a0b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DROP PROCEDURE [IF EXISTS] \u5b58\u50a8\u8fc7\u7a0b\u540d\u79f0;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u7ec3\u4e60\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u51c6\u5907"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"id\tNAME\tage\t\tgender\tscore\n1\t\u5f20\u4e09\t\t23\t\t\u7537\t\t95\n2\t\u674e\u56db\t\t24\t\t\u7537\t\t98\n3\t\u738b\u4e94\t\t25\t\t\u5973\t\t100\n4\t\u8d75\u516d\t\t26\t\t\u5973\t\t90\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa stu_group() \u5b58\u50a8\u8fc7\u7a0b\uff0c\u5c01\u88c5\u5206\u7ec4\u67e5\u8be2\u603b\u6210\u7ee9\uff0c\u5e76\u6309\u7167\u603b\u6210\u7ee9\u5347\u5e8f\u6392\u5e8f\u7684\u529f\u80fd"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELIMITER $\n\nCREATE PROCEDURE stu_group()\nBEGIN\n\tSELECT gender,SUM(score) getSum FROM student GROUP BY gender ORDER BY getSum ASC; \nEND$\n\nDELIMITER ;\n\n-- \u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\nCALL stu_group();\n-- \u5220\u9664\u5b58\u50a8\u8fc7\u7a0b\nDROP PROCEDURE IF EXISTS stu_group;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5b58\u50a8\u8bed\u6cd5",children:"\u5b58\u50a8\u8bed\u6cd5"}),"\n",(0,i.jsx)(e.h5,{id:"\u53d8\u91cf\u4f7f\u7528",children:"\u53d8\u91cf\u4f7f\u7528"}),"\n",(0,i.jsx)(e.p,{children:"\u5b58\u50a8\u8fc7\u7a0b\u662f\u53ef\u4ee5\u8fdb\u884c\u7f16\u7a0b\u7684\uff0c\u610f\u5473\u7740\u53ef\u4ee5\u4f7f\u7528\u53d8\u91cf\u3001\u8868\u8fbe\u5f0f\u3001\u6761\u4ef6\u63a7\u5236\u8bed\u53e5\u7b49\uff0c\u6765\u5b8c\u6210\u6bd4\u8f83\u590d\u6742\u7684\u529f\u80fd"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b9a\u4e49\u53d8\u91cf\uff1aDECLARE \u5b9a\u4e49\u7684\u662f\u5c40\u90e8\u53d8\u91cf\uff0c\u53ea\u80fd\u7528\u5728 BEGIN END \u8303\u56f4\u4e4b\u5185"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DECLARE \u53d8\u91cf\u540d \u6570\u636e\u7c7b\u578b [DEFAULT \u9ed8\u8ba4\u503c];\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u53d8\u91cf\u7684\u8d4b\u503c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SET \u53d8\u91cf\u540d = \u53d8\u91cf\u503c;\nSELECT \u5217\u540d INTO \u53d8\u91cf\u540d FROM \u8868\u540d [WHERE \u6761\u4ef6];\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u51c6\u5907\uff1a\u8868 student"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"id\tNAME\tage\t\tgender\tscore\n1\t\u5f20\u4e09\t\t23\t\t\u7537\t\t95\n2\t\u674e\u56db\t\t24\t\t\u7537\t\t98\n3\t\u738b\u4e94\t\t25\t\t\u5973\t\t100\n4\t\u8d75\u516d\t\t26\t\t\u5973\t\t90\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b9a\u4e49\u4e24\u4e2a int \u53d8\u91cf\uff0c\u7528\u4e8e\u5b58\u50a8\u7537\u5973\u540c\u5b66\u7684\u603b\u5206\u6570"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELIMITER $\nCREATE PROCEDURE pro_test3()\nBEGIN\n\t-- \u5b9a\u4e49\u4e24\u4e2a\u53d8\u91cf\n\tDECLARE men,women INT;\n\t-- \u67e5\u8be2\u7537\u540c\u5b66\u7684\u603b\u5206\u6570\uff0c\u4e3amen\u8d4b\u503c\n\tSELECT SUM(score) INTO men FROM student WHERE gender='\u7537';\n\t-- \u67e5\u8be2\u5973\u540c\u5b66\u7684\u603b\u5206\u6570\uff0c\u4e3awomen\u8d4b\u503c\n\tSELECT SUM(score) INTO women FROM student WHERE gender='\u5973';\n\t-- \u4f7f\u7528\u53d8\u91cf\n\tSELECT men,women;\nEND$\nDELIMITER ;\n-- \u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\nCALL pro_test3();\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"if\u8bed\u53e5",children:"IF\u8bed\u53e5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"if \u8bed\u53e5\u6807\u51c6\u8bed\u6cd5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"IF \u5224\u65ad\u6761\u4ef61 THEN \u6267\u884c\u7684sql\u8bed\u53e51;\n[ELSEIF \u5224\u65ad\u6761\u4ef62 THEN \u6267\u884c\u7684sql\u8bed\u53e52;]\n...\n[ELSE \u6267\u884c\u7684sql\u8bed\u53e5n;]\nEND IF;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u51c6\u5907\uff1a\u8868 student"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"id\tNAME\tage\t\tgender\tscore\n1\t\u5f20\u4e09\t\t23\t\t\u7537\t\t95\n2\t\u674e\u56db\t\t24\t\t\u7537\t\t98\n3\t\u738b\u4e94\t\t25\t\t\u5973\t\t100\n4\t\u8d75\u516d\t\t26\t\t\u5973\t\t90\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6839\u636e\u603b\u6210\u7ee9\u5224\u65ad\uff1a\u5168\u73ed 380 \u5206\u53ca\u4ee5\u4e0a\u5b66\u4e60\u4f18\u79c0\u3001320 ~ 380 \u5b66\u4e60\u826f\u597d\u3001320 \u4ee5\u4e0b\u5b66\u4e60\u4e00\u822c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELIMITER $\nCREATE PROCEDURE pro_test4()\nBEGIN\n\tDECLARE total INT;\t\t\t\t\t\t\t-- \u5b9a\u4e49\u603b\u5206\u6570\u53d8\u91cf\n\tDECLARE description VARCHAR(10);\t\t\t-- \u5b9a\u4e49\u5206\u6570\u63cf\u8ff0\u53d8\u91cf\n\tSELECT SUM(score) INTO total FROM student; \t-- \u4e3a\u603b\u5206\u6570\u53d8\u91cf\u8d4b\u503c\n\t-- \u5224\u65ad\u603b\u5206\u6570\n\tIF total >= 380 THEN\n\t\tSET description = '\u5b66\u4e60\u4f18\u79c0';\n\tELSEIF total >=320 AND total < 380 THEN\n\t\tSET description = '\u5b66\u4e60\u826f\u597d';\n\tELSE\n\t\tSET description = '\u5b66\u4e60\u4e00\u822c';\n\tEND IF;\nEND$\nDELIMITER ;\n-- \u8c03\u7528pro_test4\u5b58\u50a8\u8fc7\u7a0b\nCALL pro_test4();\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u53c2\u6570\u4f20\u9012",children:"\u53c2\u6570\u4f20\u9012"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u53c2\u6570\u4f20\u9012\u7684\u8bed\u6cd5"}),"\n",(0,i.jsx)(e.p,{children:"IN\uff1a\u4ee3\u8868\u8f93\u5165\u53c2\u6570\uff0c\u9700\u8981\u7531\u8c03\u7528\u8005\u4f20\u9012\u5b9e\u9645\u6570\u636e\uff0c\u9ed8\u8ba4\u7684\nOUT\uff1a\u4ee3\u8868\u8f93\u51fa\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u53ef\u4ee5\u4f5c\u4e3a\u8fd4\u56de\u503c\nINOUT\uff1a\u4ee3\u8868\u65e2\u53ef\u4ee5\u4f5c\u4e3a\u8f93\u5165\u53c2\u6570\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u8f93\u51fa\u53c2\u6570"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELIMITER $\n\n-- \u6807\u51c6\u8bed\u6cd5\nCREATE PROCEDURE \u5b58\u50a8\u8fc7\u7a0b\u540d\u79f0([IN|OUT|INOUT] \u53c2\u6570\u540d \u6570\u636e\u7c7b\u578b)\nBEGIN\n\t\u6267\u884c\u7684sql\u8bed\u53e5;\nEND$\n\nDELIMITER ;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8f93\u5165\u603b\u6210\u7ee9\u53d8\u91cf\uff0c\u4ee3\u8868\u5b66\u751f\u603b\u6210\u7ee9\uff0c\u8f93\u51fa\u5206\u6570\u63cf\u8ff0\u53d8\u91cf\uff0c\u4ee3\u8868\u5b66\u751f\u603b\u6210\u7ee9\u7684\u63cf\u8ff0"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELIMITER $\n\nCREATE PROCEDURE pro_test6(IN total INT, OUT description VARCHAR(10))\nBEGIN\n\t-- \u5224\u65ad\u603b\u5206\u6570\n\tIF total >= 380 THEN \n\t\tSET description = '\u5b66\u4e60\u4f18\u79c0';\n\tELSEIF total >= 320 AND total < 380 THEN \n\t\tSET description = '\u5b66\u4e60\u4e0d\u9519';\n\tELSE \n\t\tSET description = '\u5b66\u4e60\u4e00\u822c';\n\tEND IF;\nEND$\n\nDELIMITER ;\n-- \u8c03\u7528pro_test6\u5b58\u50a8\u8fc7\u7a0b\nCALL pro_test6(310,@description);\nCALL pro_test6((SELECT SUM(score) FROM student), @description);\n-- \u67e5\u8be2\u603b\u6210\u7ee9\u63cf\u8ff0\nSELECT @description;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u53c2\u6570\u65b9\u6cd5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["@\u53d8\u91cf\u540d : ",(0,i.jsx)(e.strong,{children:"\u7528\u6237\u4f1a\u8bdd\u53d8\u91cf"}),"\uff0c\u4ee3\u8868\u6574\u4e2a\u4f1a\u8bdd\u8fc7\u7a0b\u4ed6\u90fd\u662f\u6709\u4f5c\u7528\u7684\uff0c\u7c7b\u4f3c\u4e8e\u5168\u5c40\u53d8\u91cf"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["@@\u53d8\u91cf\u540d : ",(0,i.jsx)(e.strong,{children:"\u7cfb\u7edf\u53d8\u91cf"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"case",children:"CASE"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6807\u51c6\u8bed\u6cd5 1"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CASE \u8868\u8fbe\u5f0f\n    WHEN \u503c1 THEN \u6267\u884csql\u8bed\u53e51;\n    [WHEN \u503c2 THEN \u6267\u884csql\u8bed\u53e52;]\n    ...\n    [ELSE \u6267\u884csql\u8bed\u53e5n;]\nEND CASE;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6807\u51c6\u8bed\u6cd5 2"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"sCASE\n    WHEN \u5224\u65ad\u6761\u4ef61 THEN \u6267\u884csql\u8bed\u53e51;\n    [WHEN \u5224\u65ad\u6761\u4ef62 THEN \u6267\u884csql\u8bed\u53e52;]\n    ...\n    [ELSE \u6267\u884csql\u8bed\u53e5n;]\nEND CASE;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6f14\u793a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELIMITER $\nCREATE PROCEDURE pro_test7(IN total INT)\nBEGIN\n\t-- \u5b9a\u4e49\u53d8\u91cf\n\tDECLARE description VARCHAR(10);\n\t-- \u4f7f\u7528case\u5224\u65ad\n\tCASE\n\tWHEN total >= 380 THEN\n\t\tSET description = '\u5b66\u4e60\u4f18\u79c0';\n\tWHEN total >= 320 AND total < 380 THEN\n\t\tSET description = '\u5b66\u4e60\u4e0d\u9519';\n\tELSE \n\t\tSET description = '\u5b66\u4e60\u4e00\u822c';\n\tEND CASE;\n\t\n\t-- \u67e5\u8be2\u5206\u6570\u63cf\u8ff0\u4fe1\u606f\n\tSELECT description;\nEND$\nDELIMITER ;\n-- \u8c03\u7528pro_test7\u5b58\u50a8\u8fc7\u7a0b\nCALL pro_test7(390);\nCALL pro_test7((SELECT SUM(score) FROM student));\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"while",children:"WHILE"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"while \u5faa\u73af\u8bed\u6cd5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"WHILE \u6761\u4ef6\u5224\u65ad\u8bed\u53e5 DO\n\t\u5faa\u73af\u4f53\u8bed\u53e5;\n\t\u6761\u4ef6\u63a7\u5236\u8bed\u53e5;\nEND WHILE;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8ba1\u7b97 1~100 \u4e4b\u95f4\u7684\u5076\u6570\u548c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELIMITER $\nCREATE PROCEDURE pro_test6()\nBEGIN\n\t-- \u5b9a\u4e49\u6c42\u548c\u53d8\u91cf\n\tDECLARE result INT DEFAULT 0;\n\t-- \u5b9a\u4e49\u521d\u59cb\u5316\u53d8\u91cf\n\tDECLARE num INT DEFAULT 1;\n\t-- while\u5faa\u73af\n\tWHILE num <= 100 DO\n\t\tIF num % 2 = 0 THEN\n\t\t\tSET result = result + num;\n\t\tEND IF;\n\t\tSET num = num + 1;\n\tEND WHILE;\n\t-- \u67e5\u8be2\u6c42\u548c\u7ed3\u679c\n\tSELECT result;\nEND$\nDELIMITER ;\n\n-- \u8c03\u7528pro_test6\u5b58\u50a8\u8fc7\u7a0b\nCALL pro_test6();\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"repeat",children:"REPEAT"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"repeat \u5faa\u73af\u6807\u51c6\u8bed\u6cd5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"\u521d\u59cb\u5316\u8bed\u53e5;\nREPEAT\n\t\u5faa\u73af\u4f53\u8bed\u53e5;\n\t\u6761\u4ef6\u63a7\u5236\u8bed\u53e5;\n\tUNTIL \u6761\u4ef6\u5224\u65ad\u8bed\u53e5\nEND REPEAT;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8ba1\u7b97 1~10 \u4e4b\u95f4\u7684\u548c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELIMITER $\nCREATE PROCEDURE pro_test9()\nBEGIN\n\t-- \u5b9a\u4e49\u6c42\u548c\u53d8\u91cf\n\tDECLARE result INT DEFAULT 0;\n\t-- \u5b9a\u4e49\u521d\u59cb\u5316\u53d8\u91cf\n\tDECLARE num INT DEFAULT 1;\n\t-- repeat\u5faa\u73af\n\tREPEAT\n\t\t-- \u7d2f\u52a0\n\t\tSET result = result + num;\n\t\t-- \u8ba9num+1\n\t\tSET num = num + 1;\n\t\t-- \u505c\u6b62\u5faa\u73af\n\t\tUNTIL num > 10\n\tEND REPEAT;\n\t-- \u67e5\u8be2\u6c42\u548c\u7ed3\u679c\n\tSELECT result;\nEND$\n\nDELIMITER ;\n-- \u8c03\u7528pro_test9\u5b58\u50a8\u8fc7\u7a0b\nCALL pro_test9();\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"loop",children:"LOOP"}),"\n",(0,i.jsx)(e.p,{children:"LOOP \u5b9e\u73b0\u7b80\u5355\u7684\u5faa\u73af\uff0c\u9000\u51fa\u5faa\u73af\u7684\u6761\u4ef6\u9700\u8981\u4f7f\u7528\u5176\u4ed6\u7684\u8bed\u53e5\u5b9a\u4e49\uff0c\u901a\u5e38\u53ef\u4ee5\u4f7f\u7528 LEAVE \u8bed\u53e5\u5b9e\u73b0\uff0c\u5982\u679c\u4e0d\u52a0\u9000\u51fa\u5faa\u73af\u7684\u8bed\u53e5\uff0c\u90a3\u4e48\u5c31\u53d8\u6210\u4e86\u6b7b\u5faa\u73af"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"loop \u5faa\u73af\u6807\u51c6\u8bed\u6cd5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"[\u5faa\u73af\u540d\u79f0:] LOOP\n\t\u6761\u4ef6\u5224\u65ad\u8bed\u53e5\n\t\t[LEAVE \u5faa\u73af\u540d\u79f0;]\n\t\u5faa\u73af\u4f53\u8bed\u53e5;\n\t\u6761\u4ef6\u63a7\u5236\u8bed\u53e5;\nEND LOOP \u5faa\u73af\u540d\u79f0;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8ba1\u7b97 1~10 \u4e4b\u95f4\u7684\u548c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELIMITER $\nCREATE PROCEDURE pro_test10()\nBEGIN\n\t-- \u5b9a\u4e49\u6c42\u548c\u53d8\u91cf\n\tDECLARE result INT DEFAULT 0;\n\t-- \u5b9a\u4e49\u521d\u59cb\u5316\u53d8\u91cf\n\tDECLARE num INT DEFAULT 1;\n\t-- loop\u5faa\u73af\n\tl:LOOP\n\t\t-- \u6761\u4ef6\u6210\u7acb\uff0c\u505c\u6b62\u5faa\u73af\n\t\tIF num > 10 THEN\n\t\t\tLEAVE l;\n\t\tEND IF;\n\t\t-- \u7d2f\u52a0\n\t\tSET result = result + num;\n\t\t-- \u8ba9num+1\n\t\tSET num = num + 1;\n\tEND LOOP l;\n\t-- \u67e5\u8be2\u6c42\u548c\u7ed3\u679c\n\tSELECT result;\nEND$\nDELIMITER ;\n-- \u8c03\u7528pro_test10\u5b58\u50a8\u8fc7\u7a0b\nCALL pro_test10();\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u6e38\u6807",children:"\u6e38\u6807"}),"\n",(0,i.jsx)(e.p,{children:"\u6e38\u6807\u662f\u7528\u6765\u5b58\u50a8\u67e5\u8be2\u7ed3\u679c\u96c6\u7684\u6570\u636e\u7c7b\u578b\uff0c\u5728\u5b58\u50a8\u8fc7\u7a0b\u548c\u51fd\u6570\u4e2d\u53ef\u4ee5\u4f7f\u7528\u5149\u6807\u5bf9\u7ed3\u679c\u96c6\u8fdb\u884c\u5faa\u73af\u7684\u5904\u7406"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6e38\u6807\u53ef\u4ee5\u904d\u5386\u8fd4\u56de\u7684\u591a\u884c\u7ed3\u679c\uff0c\u6bcf\u6b21\u62ff\u5230\u4e00\u6574\u884c\u6570\u636e"}),"\n",(0,i.jsx)(e.li,{children:"\u7b80\u5355\u6765\u8bf4\u6e38\u6807\u5c31\u7c7b\u4f3c\u4e8e\u96c6\u5408\u7684\u8fed\u4ee3\u5668\u904d\u5386"}),"\n",(0,i.jsx)(e.li,{children:"MySQL \u4e2d\u7684\u6e38\u6807\u53ea\u80fd\u7528\u5728\u5b58\u50a8\u8fc7\u7a0b\u548c\u51fd\u6570\u4e2d"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6e38\u6807\u7684\u8bed\u6cd5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u6e38\u6807"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DECLARE \u6e38\u6807\u540d\u79f0 CURSOR FOR \u67e5\u8be2sql\u8bed\u53e5;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6253\u5f00\u6e38\u6807"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"OPEN \u6e38\u6807\u540d\u79f0;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u6e38\u6807\u83b7\u53d6\u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"FETCH \u6e38\u6807\u540d\u79f0 INTO \u53d8\u91cf\u540d1,\u53d8\u91cf\u540d2,...;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5173\u95ed\u6e38\u6807"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CLOSE \u6e38\u6807\u540d\u79f0;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Mysql \u901a\u8fc7\u4e00\u4e2a Error handler \u58f0\u660e\u6765\u5224\u65ad\u6307\u9488\u662f\u5426\u5230\u5c3e\u90e8\uff0c\u5e76\u4e14\u5fc5\u987b\u548c\u521b\u5efa\u6e38\u6807\u7684 SQL \u8bed\u53e5\u58f0\u660e\u5728\u4e00\u8d77\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DECLARE EXIT HANDLER FOR NOT FOUND (do some action\uff0c\u4e00\u822c\u662f\u8bbe\u7f6e\u6807\u5fd7\u53d8\u91cf)\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6e38\u6807\u7684\u57fa\u672c\u4f7f\u7528"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u51c6\u5907\uff1a\u8868 student"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"id\tNAME\tage\t\tgender\tscore\n1\t\u5f20\u4e09\t\t23\t\t\u7537\t\t95\n2\t\u674e\u56db\t\t24\t\t\u7537\t\t98\n3\t\u738b\u4e94\t\t25\t\t\u5973\t\t100\n4\t\u8d75\u516d\t\t26\t\t\u5973\t\t90\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa stu_score \u8868"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE TABLE stu_score(\n\tid INT PRIMARY KEY AUTO_INCREMENT,\n\tscore INT\n);\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5c06student\u8868\u4e2d\u6240\u6709\u7684\u6210\u7ee9\u4fdd\u5b58\u5230stu_score\u8868\u4e2d"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELIMITER $\n\nCREATE PROCEDURE pro_test12()\nBEGIN\n\t-- \u5b9a\u4e49\u6210\u7ee9\u53d8\u91cf\n\tDECLARE s_score INT;\n\t-- \u5b9a\u4e49\u6807\u8bb0\u53d8\u91cf\n\tDECLARE flag INT DEFAULT 0;\n\t\n\t-- \u521b\u5efa\u6e38\u6807\uff0c\u67e5\u8be2\u6240\u6709\u5b66\u751f\u6210\u7ee9\u6570\u636e\n\tDECLARE stu_result CURSOR FOR SELECT score FROM student;\n\t-- \u6e38\u6807\u7ed3\u675f\u540e\uff0c\u5c06\u6807\u8bb0\u53d8\u91cf\u6539\u4e3a1  \u8fd9\u4e24\u4e2a\u5fc5\u987b\u58f0\u660e\u5728\u4e00\u8d77\n\tDECLARE EXIT HANDLER FOR NOT FOUND SET flag = 1;\n\t\n\t-- \u5f00\u542f\u6e38\u6807\n\tOPEN stu_result;\n\t-- \u5faa\u73af\u4f7f\u7528\u6e38\u6807\n\tREPEAT\n\t\t-- \u4f7f\u7528\u6e38\u6807\uff0c\u904d\u5386\u7ed3\u679c,\u62ff\u5230\u6570\u636e\n\t\tFETCH stu_result INTO s_score;\n\t\t-- \u5c06\u6570\u636e\u4fdd\u5b58\u5230stu_score\u8868\u4e2d\n\t\tINSERT INTO stu_score VALUES (NULL,s_score);\n\tUNTIL flag=1\n\tEND REPEAT;\n\t-- \u5173\u95ed\u6e38\u6807\n\tCLOSE stu_result;\nEND$\n\nDELIMITER ;\n\n-- \u8c03\u7528pro_test12\u5b58\u50a8\u8fc7\u7a0b\nCALL pro_test12();\n-- \u67e5\u8be2stu_score\u8868\nSELECT * FROM stu_score;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5b58\u50a8\u51fd\u6570",children:"\u5b58\u50a8\u51fd\u6570"}),"\n",(0,i.jsx)(e.p,{children:"\u5b58\u50a8\u51fd\u6570\u548c\u5b58\u50a8\u8fc7\u7a0b\u662f\u975e\u5e38\u76f8\u4f3c\u7684\uff0c\u5b58\u50a8\u51fd\u6570\u53ef\u4ee5\u505a\u7684\u4e8b\u60c5\uff0c\u5b58\u50a8\u8fc7\u7a0b\u4e5f\u53ef\u4ee5\u505a\u5230"}),"\n",(0,i.jsx)(e.p,{children:"\u5b58\u50a8\u51fd\u6570\u6709\u8fd4\u56de\u503c\uff0c\u5b58\u50a8\u8fc7\u7a0b\u6ca1\u6709\u8fd4\u56de\u503c\uff08\u53c2\u6570\u7684 out \u5176\u5b9e\u4e5f\u76f8\u5f53\u4e8e\u662f\u8fd4\u56de\u6570\u636e\u4e86\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u5b58\u50a8\u51fd\u6570"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELIMITER $\n-- \u6807\u51c6\u8bed\u6cd5\nCREATE FUNCTION \u51fd\u6570\u540d\u79f0(\u53c2\u6570 \u6570\u636e\u7c7b\u578b)\nRETURNS \u8fd4\u56de\u503c\u7c7b\u578b\nBEGIN\n\t\u6267\u884c\u7684sql\u8bed\u53e5;\n\tRETURN \u7ed3\u679c;\nEND$\n\nDELIMITER ;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8c03\u7528\u5b58\u50a8\u51fd\u6570\uff0c\u56e0\u4e3a\u6709\u8fd4\u56de\u503c\uff0c\u6240\u4ee5\u4f7f\u7528 SELECT \u8c03\u7528"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT \u51fd\u6570\u540d\u79f0(\u5b9e\u9645\u53c2\u6570);\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u5b58\u50a8\u51fd\u6570"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DROP FUNCTION \u51fd\u6570\u540d\u79f0;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b9a\u4e49\u5b58\u50a8\u51fd\u6570\uff0c\u83b7\u53d6\u5b66\u751f\u8868\u4e2d\u6210\u7ee9\u5927\u4e8e95\u5206\u7684\u5b66\u751f\u6570\u91cf"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELIMITER $\nCREATE FUNCTION fun_test()\nRETURN INT\nBEGIN\n\t-- \u5b9a\u4e49\u7edf\u8ba1\u53d8\u91cf\n\tDECLARE result INT;\n\t-- \u67e5\u8be2\u6210\u7ee9\u5927\u4e8e95\u5206\u7684\u5b66\u751f\u6570\u91cf\uff0c\u7ed9\u7edf\u8ba1\u53d8\u91cf\u8d4b\u503c\n\tSELECT COUNT(score) INTO result FROM student WHERE score > 95;\n\t-- \u8fd4\u56de\u7edf\u8ba1\u7ed3\u679c\n\tSELECT result;\nEND\nDELIMITER ;\n-- \u8c03\u7528fun_test\u5b58\u50a8\u51fd\u6570\nSELECT fun_test();\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u89e6\u53d1\u5668",children:"\u89e6\u53d1\u5668"}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u4ecb\u7ecd-2",children:"\u57fa\u672c\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.p,{children:"\u89e6\u53d1\u5668\u662f\u4e0e\u8868\u6709\u5173\u7684\u6570\u636e\u5e93\u5bf9\u8c61\uff0c\u5728 insert/update/delete \u4e4b\u524d\u6216\u4e4b\u540e\u89e6\u53d1\u5e76\u6267\u884c\u89e6\u53d1\u5668\u4e2d\u5b9a\u4e49\u7684 SQL \u8bed\u53e5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u89e6\u53d1\u5668\u7684\u8fd9\u79cd\u7279\u6027\u53ef\u4ee5\u534f\u52a9\u5e94\u7528\u5728\u6570\u636e\u5e93\u7aef\u786e\u4fdd\u6570\u636e\u7684\u5b8c\u6574\u6027 \u3001\u65e5\u5fd7\u8bb0\u5f55 \u3001\u6570\u636e\u6821\u9a8c\u7b49\u64cd\u4f5c"}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u522b\u540d NEW \u548c OLD \u6765\u5f15\u7528\u89e6\u53d1\u5668\u4e2d\u53d1\u751f\u53d8\u5316\u7684\u8bb0\u5f55\u5185\u5bb9\uff0c\u8fd9\u4e0e\u5176\u4ed6\u7684\u6570\u636e\u5e93\u662f\u76f8\u4f3c\u7684"}),"\n",(0,i.jsx)(e.li,{children:"\u73b0\u5728\u89e6\u53d1\u5668\u8fd8\u53ea\u652f\u6301\u884c\u7ea7\u89e6\u53d1\uff0c\u4e0d\u652f\u6301\u8bed\u53e5\u7ea7\u89e6\u53d1"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u89e6\u53d1\u5668\u7c7b\u578b"}),(0,i.jsx)(e.th,{children:"OLD\u7684\u542b\u4e49"}),(0,i.jsx)(e.th,{children:"NEW\u7684\u542b\u4e49"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"INSERT \u578b\u89e6\u53d1\u5668"}),(0,i.jsx)(e.td,{children:"\u65e0 (\u56e0\u4e3a\u63d2\u5165\u524d\u72b6\u6001\u65e0\u6570\u636e)"}),(0,i.jsx)(e.td,{children:"NEW \u8868\u793a\u5c06\u8981\u6216\u8005\u5df2\u7ecf\u65b0\u589e\u7684\u6570\u636e"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"UPDATE \u578b\u89e6\u53d1\u5668"}),(0,i.jsx)(e.td,{children:"OLD \u8868\u793a\u4fee\u6539\u4e4b\u524d\u7684\u6570\u636e"}),(0,i.jsx)(e.td,{children:"NEW \u8868\u793a\u5c06\u8981\u6216\u5df2\u7ecf\u4fee\u6539\u540e\u7684\u6570\u636e"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"DELETE \u578b\u89e6\u53d1\u5668"}),(0,i.jsx)(e.td,{children:"OLD \u8868\u793a\u5c06\u8981\u6216\u8005\u5df2\u7ecf\u5220\u9664\u7684\u6570\u636e"}),(0,i.jsx)(e.td,{children:"\u65e0 (\u56e0\u4e3a\u5220\u9664\u540e\u72b6\u6001\u65e0\u6570\u636e)"})]})]})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u64cd\u4f5c-1",children:"\u57fa\u672c\u64cd\u4f5c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u89e6\u53d1\u5668"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELIMITER $\n\nCREATE TRIGGER \u89e6\u53d1\u5668\u540d\u79f0\nBEFORE|AFTER  INSERT|UPDATE|DELETE\nON \u8868\u540d\n[FOR EACH ROW]  -- \u884c\u7ea7\u89e6\u53d1\u5668\nBEGIN\n\t\u89e6\u53d1\u5668\u8981\u6267\u884c\u7684\u529f\u80fd;\nEND$\n\nDELIMITER ;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u89e6\u53d1\u5668\u7684\u72b6\u6001\u3001\u8bed\u6cd5\u7b49\u4fe1\u606f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW TRIGGERS;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u89e6\u53d1\u5668\uff0c\u5982\u679c\u6ca1\u6709\u6307\u5b9a schema_name\uff0c\u9ed8\u8ba4\u4e3a\u5f53\u524d\u6570\u636e\u5e93"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DROP TRIGGER [schema_name.]trigger_name;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u89e6\u53d1\u6f14\u793a",children:"\u89e6\u53d1\u6f14\u793a"}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u89e6\u53d1\u5668\u8bb0\u5f55\u8d26\u6237\u8868\u7684\u6570\u636e\u53d8\u66f4\u65e5\u5fd7\u3002\u5305\u542b\uff1a\u589e\u52a0\u3001\u4fee\u6539\u3001\u5220\u9664"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u51c6\u5907"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u521b\u5efadb9\u6570\u636e\u5e93\nCREATE DATABASE db9;\n-- \u4f7f\u7528db9\u6570\u636e\u5e93\nUSE db9;\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u521b\u5efa\u8d26\u6237\u8868account\nCREATE TABLE account(\n\tid INT PRIMARY KEY AUTO_INCREMENT,\t-- \u8d26\u6237id\n\tNAME VARCHAR(20),\t\t\t\t\t-- \u59d3\u540d\n\tmoney DOUBLE\t\t\t\t\t\t-- \u4f59\u989d\n);\n-- \u6dfb\u52a0\u6570\u636e\nINSERT INTO account VALUES (NULL,'\u5f20\u4e09',1000),(NULL,'\u674e\u56db',2000);\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u521b\u5efa\u65e5\u5fd7\u8868account_log\nCREATE TABLE account_log(\n\tid INT PRIMARY KEY AUTO_INCREMENT,\t-- \u65e5\u5fd7id\n\toperation VARCHAR(20),\t\t\t\t-- \u64cd\u4f5c\u7c7b\u578b (insert update delete)\n\toperation_time DATETIME,\t\t\t-- \u64cd\u4f5c\u65f6\u95f4\n\toperation_id INT,\t\t\t\t\t-- \u64cd\u4f5c\u8868\u7684id\n\toperation_params VARCHAR(200)       -- \u64cd\u4f5c\u53c2\u6570\n);\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa INSERT \u578b\u89e6\u53d1\u5668"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELIMITER $\n\nCREATE TRIGGER account_insert\nAFTER INSERT\nON account\nFOR EACH ROW\nBEGIN\n\tINSERT INTO account_log VALUES (NULL,'INSERT',NOW(),new.id,CONCAT('\u63d2\u5165\u540e{id=',new.id,',name=',new.name,',money=',new.money,'}'));\nEND$\n\nDELIMITER ;\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u5411account\u8868\u6dfb\u52a0\u8bb0\u5f55\nINSERT INTO account VALUES (NULL,'\u738b\u4e94',3000);\n\n-- \u67e5\u8be2\u65e5\u5fd7\u8868\nSELECT * FROM account_log;\n/*\nid\toperation\toperation_time\t\toperation_id\toperation_params\n1\tINSERT\t   \t2021-01-26 19:51:11\t\t3\t     \u63d2\u5165\u540e{id=3,name=\u738b\u4e94money=2000}\n*/\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa UPDATE \u578b\u89e6\u53d1\u5668"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELIMITER $\n\nCREATE TRIGGER account_update\nAFTER UPDATE\nON account\nFOR EACH ROW\nBEGIN\n\tINSERT INTO account_log VALUES (NULL,'UPDATE',NOW(),new.id,CONCAT('\u4fee\u6539\u524d{id=',old.id,',name=',old.name,',money=',old.money,'}','\u4fee\u6539\u540e{id=',new.id,',name=',new.name,',money=',new.money,'}'));\nEND$\n\nDELIMITER ;\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u4fee\u6539account\u8868\nUPDATE account SET money=3500 WHERE id=3;\n\n-- \u67e5\u8be2\u65e5\u5fd7\u8868\nSELECT * FROM account_log;\n/*\nid\toperation\toperation_time\t\toperation_id\t  operation_params\n2\tUPDATE\t   \t2021-01-26 19:58:54\t\t2\t\t \u66f4\u65b0\u524d{id=2,name=\u674e\u56dbmoney=1000}\n\t\t\t\t\t\t\t\t\t\t\t\t \u66f4\u65b0\u540e{id=2,name=\u674e\u56dbmoney=200}\n*/\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa DELETE \u578b\u89e6\u53d1\u5668"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DELIMITER $\n\nCREATE TRIGGER account_delete\nAFTER DELETE\nON account\nFOR EACH ROW\nBEGIN\n\tINSERT INTO account_log VALUES (NULL,'DELETE',NOW(),old.id,CONCAT('\u5220\u9664\u524d{id=',old.id,',name=',old.name,',money=',old.money,'}'));\nEND$\n\nDELIMITER ;\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u5220\u9664account\u8868\u6570\u636e\nDELETE FROM account WHERE id=3;\n\n-- \u67e5\u8be2\u65e5\u5fd7\u8868\nSELECT * FROM account_log;\n/*\nid\toperation\toperation_time\t\toperation_id\toperation_params\n3\tDELETE\t\t2021-01-26 20:02:48\t\t3\t    \u5220\u9664\u524d{id=3,name=\u738b\u4e94money=2000}\n*/\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u5b58\u50a8\u5f15\u64ce",children:"\u5b58\u50a8\u5f15\u64ce"}),"\n",(0,i.jsx)(e.h3,{id:"\u57fa\u672c\u4ecb\u7ecd-3",children:"\u57fa\u672c\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u6bd4\u5176\u4ed6\u6570\u636e\u5e93\uff0cMySQL \u7684\u67b6\u6784\u53ef\u4ee5\u5728\u4e0d\u540c\u573a\u666f\u5e94\u7528\u5e76\u53d1\u6325\u826f\u597d\u4f5c\u7528\uff0c\u4e3b\u8981\u4f53\u73b0\u5728\u5b58\u50a8\u5f15\u64ce\uff0c\u63d2\u4ef6\u5f0f\u7684\u5b58\u50a8\u5f15\u64ce\u67b6\u6784\u5c06\u67e5\u8be2\u5904\u7406\u548c\u5176\u4ed6\u7684\u7cfb\u7edf\u4efb\u52a1\u4ee5\u53ca\u6570\u636e\u7684\u5b58\u50a8\u63d0\u53d6\u5206\u79bb\uff0c\u53ef\u4ee5\u9488\u5bf9\u4e0d\u540c\u7684\u5b58\u50a8\u9700\u6c42\u53ef\u4ee5\u9009\u62e9\u6700\u4f18\u7684\u5b58\u50a8\u5f15\u64ce"}),"\n",(0,i.jsx)(e.p,{children:"\u5b58\u50a8\u5f15\u64ce\u7684\u4ecb\u7ecd\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"MySQL \u6570\u636e\u5e93\u4f7f\u7528\u4e0d\u540c\u7684\u673a\u5236\u5b58\u53d6\u8868\u6587\u4ef6 , \u673a\u5236\u7684\u5dee\u522b\u5728\u4e8e\u4e0d\u540c\u7684\u5b58\u50a8\u65b9\u5f0f\u3001\u7d22\u5f15\u6280\u5de7\u3001\u9501\u5b9a\u6c34\u5e73\u7b49\u4e0d\u540c\u7684\u529f\u80fd\u548c\u80fd\u529b\uff0c\u5728 MySQL \u4e2d\uff0c\u5c06\u8fd9\u4e9b\u4e0d\u540c\u7684\u6280\u672f\u53ca\u914d\u5957\u7684\u529f\u80fd\u79f0\u4e3a\u5b58\u50a8\u5f15\u64ce"}),"\n",(0,i.jsxs)(e.li,{children:["Oracle\u3001SqlServer \u7b49\u6570\u636e\u5e93\u53ea\u6709\u4e00\u79cd\u5b58\u50a8\u5f15\u64ce\uff0cMySQL ",(0,i.jsx)(e.strong,{children:"\u63d0\u4f9b\u4e86\u63d2\u4ef6\u5f0f\u7684\u5b58\u50a8\u5f15\u64ce\u67b6\u6784"}),"\uff0c\u6240\u4ee5 MySQL \u5b58\u5728\u591a\u79cd\u5b58\u50a8\u5f15\u64ce , \u5c31\u4f1a\u8ba9\u6570\u636e\u5e93\u91c7\u53d6\u4e86\u4e0d\u540c\u7684\u5904\u7406\u6570\u636e\u7684\u65b9\u5f0f\u548c\u6269\u5c55\u529f\u80fd"]}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u5b58\u50a8\u662f\u4ee5\u8868\u7684\u5f62\u5f0f\u5b58\u8fdb\u884c\uff0c\u6240\u4ee5\u5b58\u50a8\u5f15\u64ce\u4e5f\u79f0\u4e3a\u8868\u7c7b\u578b\uff08\u5b58\u50a8\u548c\u64cd\u4f5c\u6b64\u8868\u7684\u7c7b\u578b\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u901a\u8fc7\u9009\u62e9\u4e0d\u540c\u7684\u5f15\u64ce\uff0c\u80fd\u591f\u83b7\u53d6\u6700\u4f73\u7684\u65b9\u6848,  \u4e5f\u80fd\u591f\u83b7\u5f97\u989d\u5916\u7684\u901f\u5ea6\u6216\u8005\u529f\u80fd\uff0c\u63d0\u9ad8\u7a0b\u5e8f\u7684\u6574\u4f53\u6548\u679c\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u652f\u6301\u7684\u5b58\u50a8\u5f15\u64ce\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"MySQL \u652f\u6301\u7684\u5f15\u64ce\u5305\u62ec\uff1aInnoDB\u3001MyISAM\u3001MEMORY\u3001Archive\u3001Federate\u3001CSV\u3001BLACKHOLE \u7b49"}),"\n",(0,i.jsx)(e.li,{children:"MySQL5.5 \u4e4b\u524d\u7684\u9ed8\u8ba4\u5b58\u50a8\u5f15\u64ce\u662f MyISAM\uff0c5.5 \u4e4b\u540e\u5c31\u6539\u4e3a\u4e86 InnoDB"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5f15\u64ce\u5bf9\u6bd4",children:"\u5f15\u64ce\u5bf9\u6bd4"}),"\n",(0,i.jsx)(e.p,{children:"MyISAM \u5b58\u50a8\u5f15\u64ce\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7279\u70b9\uff1a\u4e0d\u652f\u6301\u4e8b\u52a1\u548c\u5916\u952e\uff0c\u8bfb\u53d6\u901f\u5ea6\u5feb\uff0c\u8282\u7ea6\u8d44\u6e90"}),"\n",(0,i.jsxs)(e.li,{children:["\u5e94\u7528\u573a\u666f\uff1a",(0,i.jsx)(e.strong,{children:"\u9002\u7528\u4e8e\u8bfb\u591a\u5199\u5c11\u7684\u573a\u666f"}),"\uff0c\u5bf9\u4e8b\u52a1\u7684\u5b8c\u6574\u6027\u8981\u6c42\u4e0d\u9ad8\uff0c\u6bd4\u5982\u4e00\u4e9b\u6570\u4ed3\u3001\u79bb\u7ebf\u6570\u636e\u3001\u652f\u4ed8\u5b9d\u7684\u5e74\u5ea6\u603b\u7ed3\u4e4b\u7c7b\u7684\u573a\u666f\uff0c\u4e1a\u52a1\u8fdb\u884c\u53ea\u8bfb\u64cd\u4f5c\uff0c\u67e5\u8be2\u8d77\u6765\u4f1a\u66f4\u5feb"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5b58\u50a8\u65b9\u5f0f\uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6bcf\u4e2a MyISAM \u5728\u78c1\u76d8\u4e0a\u5b58\u50a8\u6210 3 \u4e2a\u6587\u4ef6\uff0c\u5176\u6587\u4ef6\u540d\u90fd\u548c\u8868\u540d\u76f8\u540c\uff0c\u62d3\u5c55\u540d\u4e0d\u540c"}),"\n",(0,i.jsx)(e.li,{children:"\u8868\u7684\u5b9a\u4e49\u4fdd\u5b58\u5728 .frm \u6587\u4ef6\uff0c\u8868\u6570\u636e\u4fdd\u5b58\u5728 .MYD (MYData) \u6587\u4ef6\u4e2d\uff0c\u7d22\u5f15\u4fdd\u5b58\u5728 .MYI (MYIndex) \u6587\u4ef6\u4e2d"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"InnoDB \u5b58\u50a8\u5f15\u64ce\uff1a(MySQL5.5 \u7248\u672c\u540e\u9ed8\u8ba4\u7684\u5b58\u50a8\u5f15\u64ce)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u7279\u70b9\uff1a",(0,i.jsx)(e.strong,{children:"\u652f\u6301\u4e8b\u52a1"}),"\u548c\u5916\u952e\u64cd\u4f5c\uff0c\u652f\u6301\u5e76\u53d1\u63a7\u5236\u3002\u5bf9\u6bd4 MyISAM \u7684\u5b58\u50a8\u5f15\u64ce\uff0cInnoDB \u5199\u7684\u5904\u7406\u6548\u7387\u5dee\u4e00\u4e9b\uff0c\u5e76\u4e14\u4f1a\u5360\u7528\u66f4\u591a\u7684\u78c1\u76d8\u7a7a\u95f4\u4ee5\u4fdd\u7559\u6570\u636e\u548c\u7d22\u5f15"]}),"\n",(0,i.jsx)(e.li,{children:"\u5e94\u7528\u573a\u666f\uff1a\u5bf9\u4e8b\u52a1\u7684\u5b8c\u6574\u6027\u6709\u6bd4\u8f83\u9ad8\u7684\u8981\u6c42\uff0c\u5728\u5e76\u53d1\u6761\u4ef6\u4e0b\u8981\u6c42\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0c\u8bfb\u5199\u9891\u7e41\u7684\u64cd\u4f5c"}),"\n",(0,i.jsxs)(e.li,{children:["\u5b58\u50a8\u65b9\u5f0f\uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u5171\u4eab\u8868\u7a7a\u95f4\u5b58\u50a8\uff0c \u8fd9\u79cd\u65b9\u5f0f\u521b\u5efa\u7684\u8868\u7684\u8868\u7ed3\u6784\u4fdd\u5b58\u5728 .frm \u6587\u4ef6\u4e2d\uff0c \u6570\u636e\u548c\u7d22\u5f15\u4fdd\u5b58\u5728 innodb_data_home_dir \u548c innodb_data_file_path \u5b9a\u4e49\u7684\u8868\u7a7a\u95f4\u4e2d\uff0c\u53ef\u4ee5\u662f\u591a\u4e2a\u6587\u4ef6"}),"\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u591a\u8868\u7a7a\u95f4\u5b58\u50a8\uff0c\u521b\u5efa\u7684\u8868\u7684\u8868\u7ed3\u6784\u5b58\u5728 .frm \u6587\u4ef6\u4e2d\uff0c\u6bcf\u4e2a\u8868\u7684\u6570\u636e\u548c\u7d22\u5f15\u5355\u72ec\u4fdd\u5b58\u5728 .ibd \u4e2d"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"MEMORY \u5b58\u50a8\u5f15\u64ce\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u7279\u70b9\uff1a\u6bcf\u4e2a MEMORY \u8868\u5b9e\u9645\u5bf9\u5e94\u4e00\u4e2a\u78c1\u76d8\u6587\u4ef6 \uff0c\u8be5\u6587\u4ef6\u4e2d\u53ea\u5b58\u50a8\u8868\u7684\u7ed3\u6784\uff0c\u8868\u6570\u636e\u4fdd\u5b58\u5728\u5185\u5b58\u4e2d\uff0c\u4e14\u9ed8\u8ba4",(0,i.jsx)(e.strong,{children:"\u4f7f\u7528 HASH \u7d22\u5f15"}),"\uff0c\u6240\u4ee5\u6570\u636e\u9ed8\u8ba4\u5c31\u662f\u65e0\u5e8f\u7684\uff0c\u4f46\u662f\u5728\u9700\u8981\u5feb\u901f\u5b9a\u4f4d\u8bb0\u5f55\u53ef\u4ee5\u63d0\u4f9b\u66f4\u5feb\u7684\u8bbf\u95ee\uff0c",(0,i.jsx)(e.strong,{children:"\u670d\u52a1\u4e00\u65e6\u5173\u95ed\uff0c\u8868\u4e2d\u7684\u6570\u636e\u5c31\u4f1a\u4e22\u5931"}),"\uff0c\u5b58\u50a8\u4e0d\u5b89\u5168"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5e94\u7528\u573a\u666f\uff1a",(0,i.jsx)(e.strong,{children:"\u7f13\u5b58\u578b\u5b58\u50a8\u5f15\u64ce"}),"\uff0c\u901a\u5e38\u7528\u4e8e\u66f4\u65b0\u4e0d\u592a\u9891\u7e41\u7684\u5c0f\u8868\uff0c\u7528\u4ee5\u5feb\u901f\u5f97\u5230\u8bbf\u95ee\u7ed3\u679c"]}),"\n",(0,i.jsx)(e.li,{children:"\u5b58\u50a8\u65b9\u5f0f\uff1a\u8868\u7ed3\u6784\u4fdd\u5b58\u5728 .frm \u4e2d"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"MERGE \u5b58\u50a8\u5f15\u64ce\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7279\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u662f\u4e00\u7ec4 MyISAM \u8868\u7684\u7ec4\u5408\uff0c\u8fd9\u4e9b MyISAM \u8868\u5fc5\u987b\u7ed3\u6784\u5b8c\u5168\u76f8\u540c\uff0c\u901a\u8fc7\u5c06\u4e0d\u540c\u7684\u8868\u5206\u5e03\u5728\u591a\u4e2a\u78c1\u76d8\u4e0a"}),"\n",(0,i.jsx)(e.li,{children:"MERGE \u8868\u672c\u8eab\u5e76\u6ca1\u6709\u5b58\u50a8\u6570\u636e\uff0c\u5bf9 MERGE \u7c7b\u578b\u7684\u8868\u53ef\u4ee5\u8fdb\u884c\u67e5\u8be2\u3001\u66f4\u65b0\u3001\u5220\u9664\u64cd\u4f5c\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u5b9e\u9645\u4e0a\u662f\u5bf9\u5185\u90e8\u7684 MyISAM \u8868\u8fdb\u884c\u7684"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5e94\u7528\u573a\u666f\uff1a\u5c06\u4e00\u7cfb\u5217\u7b49\u540c\u7684 MyISAM \u8868\u4ee5\u903b\u8f91\u65b9\u5f0f\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u5e76\u4f5c\u4e3a\u4e00\u4e2a\u5bf9\u8c61\u5f15\u7528\u4ed6\u4eec\uff0c\u9002\u5408\u505a\u6570\u636e\u4ed3\u5e93"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u64cd\u4f5c\u65b9\u5f0f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u63d2\u5165\u64cd\u4f5c\u662f\u901a\u8fc7 INSERT_METHOD \u5b50\u53e5\u5b9a\u4e49\u63d2\u5165\u7684\u8868\uff0c\u4f7f\u7528 FIRST \u6216 LAST \u503c\u4f7f\u5f97\u63d2\u5165\u64cd\u4f5c\u88ab\u76f8\u5e94\u5730\u4f5c\u7528\u5728\u7b2c\u4e00\u6216\u8005\u6700\u540e\u4e00\u4e2a\u8868\u4e0a\uff1b\u4e0d\u5b9a\u4e49\u8fd9\u4e2a\u5b50\u53e5\u6216\u8005\u5b9a\u4e49\u4e3a NO\uff0c\u8868\u793a\u4e0d\u80fd\u5bf9 MERGE \u8868\u6267\u884c\u63d2\u5165\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.li,{children:"\u5bf9 MERGE \u8868\u8fdb\u884c DROP \u64cd\u4f5c\uff0c\u4f46\u662f\u8fd9\u4e2a\u64cd\u4f5c\u53ea\u662f\u5220\u9664 MERGE \u8868\u7684\u5b9a\u4e49\uff0c\u5bf9\u5185\u90e8\u7684\u8868\u662f\u6ca1\u6709\u4efb\u4f55\u5f71\u54cd\u7684"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE TABLE order_1(\n)ENGINE = MyISAM DEFAULT CHARSET=utf8;\n\nCREATE TABLE order_2(\n)ENGINE = MyISAM DEFAULT CHARSET=utf8;\n\nCREATE TABLE order_all(\n\t-- \u7ed3\u6784\u4e0eMyISAM\u8868\u76f8\u540c\n)ENGINE = MERGE UNION = (order_1,order_2) INSERT_METHOD=LAST DEFAULT CHARSET=utf8;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(85943).A+"",width:"943",height:"289"})}),"\n"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7279\u6027"}),(0,i.jsx)(e.th,{children:"MyISAM"}),(0,i.jsx)(e.th,{children:"InnoDB"}),(0,i.jsx)(e.th,{children:"MEMORY"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u5b58\u50a8\u9650\u5236"}),(0,i.jsx)(e.td,{children:"\u6709\uff08\u5e73\u53f0\u5bf9\u6587\u4ef6\u7cfb\u7edf\u5927\u5c0f\u7684\u9650\u5236\uff09"}),(0,i.jsx)(e.td,{children:"64TB"}),(0,i.jsx)(e.td,{children:"\u6709\uff08\u5e73\u53f0\u7684\u5185\u5b58\u9650\u5236\uff09"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u4e8b\u52a1\u5b89\u5168"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u4e0d\u652f\u6301"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u652f\u6301"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u4e0d\u652f\u6301"})})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u9501\u673a\u5236"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u8868\u9501"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u8868\u9501/\u884c\u9501"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u8868\u9501"})})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"B+Tree \u7d22\u5f15"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u54c8\u5e0c\u7d22\u5f15"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u5168\u6587\u7d22\u5f15"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u96c6\u7fa4\u7d22\u5f15"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u6570\u636e\u7d22\u5f15"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u6570\u636e\u7f13\u5b58"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"}),(0,i.jsx)(e.td,{children:"N/A"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u7d22\u5f15\u7f13\u5b58"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"}),(0,i.jsx)(e.td,{children:"N/A"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u6570\u636e\u53ef\u538b\u7f29"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u7a7a\u95f4\u4f7f\u7528"}),(0,i.jsx)(e.td,{children:"\u4f4e"}),(0,i.jsx)(e.td,{children:"\u9ad8"}),(0,i.jsx)(e.td,{children:"N/A"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u5185\u5b58\u4f7f\u7528"}),(0,i.jsx)(e.td,{children:"\u4f4e"}),(0,i.jsx)(e.td,{children:"\u9ad8"}),(0,i.jsx)(e.td,{children:"\u4e2d\u7b49"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u6279\u91cf\u63d2\u5165\u901f\u5ea6"}),(0,i.jsx)(e.td,{children:"\u9ad8"}),(0,i.jsx)(e.td,{children:"\u4f4e"}),(0,i.jsx)(e.td,{children:"\u9ad8"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u5916\u952e"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u4e0d\u652f\u6301"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u652f\u6301"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u4e0d\u652f\u6301"})})]})]})]}),"\n",(0,i.jsx)(e.p,{children:"\u53ea\u8bfb\u573a\u666f MyISAM \u6bd4 InnoDB \u66f4\u5feb\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5e95\u5c42\u5b58\u50a8\u7ed3\u6784\u6709\u5dee\u522b\uff0cMyISAM \u662f\u975e\u805a\u7c07\u7d22\u5f15\uff0c\u53f6\u5b50\u8282\u70b9\u4fdd\u5b58\u7684\u662f\u6570\u636e\u7684\u5177\u4f53\u5730\u5740\uff0c\u4e0d\u7528\u56de\u8868\u67e5\u8be2"}),"\n",(0,i.jsx)(e.li,{children:"InnoDB \u6bcf\u6b21\u67e5\u8be2\u9700\u8981\u7ef4\u62a4 MVCC \u7248\u672c\u72b6\u6001\uff0c\u4fdd\u8bc1\u5e76\u53d1\u72b6\u6001\u4e0b\u7684\u8bfb\u5199\u51b2\u7a81\u95ee\u9898"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5f15\u64ce\u64cd\u4f5c",children:"\u5f15\u64ce\u64cd\u4f5c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u6570\u636e\u5e93\u652f\u6301\u7684\u5b58\u50a8\u5f15\u64ce"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW ENGINES;\nSHOW VARIABLES LIKE '%storage_engine%'; -- \u67e5\u770bMysql\u6570\u636e\u5e93\u9ed8\u8ba4\u7684\u5b58\u50a8\u5f15\u64ce \n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u67d0\u4e2a\u6570\u636e\u5e93\u4e2d\u6240\u6709\u6570\u636e\u8868\u7684\u5b58\u50a8\u5f15\u64ce"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW TABLE STATUS FROM \u6570\u636e\u5e93\u540d\u79f0;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u67d0\u4e2a\u6570\u636e\u5e93\u4e2d\u67d0\u4e2a\u6570\u636e\u8868\u7684\u5b58\u50a8\u5f15\u64ce"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW TABLE STATUS FROM \u6570\u636e\u5e93\u540d\u79f0 WHERE NAME = '\u6570\u636e\u8868\u540d\u79f0';\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u6570\u636e\u8868\uff0c\u6307\u5b9a\u5b58\u50a8\u5f15\u64ce"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE TABLE \u8868\u540d(\n\t\u5217\u540d,\u6570\u636e\u7c7b\u578b,\n    ...\n)ENGINE = \u5f15\u64ce\u540d\u79f0;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539\u6570\u636e\u8868\u7684\u5b58\u50a8\u5f15\u64ce"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE \u8868\u540d ENGINE = \u5f15\u64ce\u540d\u79f0;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u7d22\u5f15\u673a\u5236",children:"\u7d22\u5f15\u673a\u5236"}),"\n",(0,i.jsx)(e.h3,{id:"\u7d22\u5f15\u4ecb\u7ecd",children:"\u7d22\u5f15\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u4ecb\u7ecd-4",children:"\u57fa\u672c\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u5b98\u65b9\u5bf9\u7d22\u5f15\u7684\u5b9a\u4e49\u4e3a\uff1a\u7d22\u5f15\uff08index\uff09\u662f\u5e2e\u52a9 MySQL \u9ad8\u6548\u83b7\u53d6\u6570\u636e\u7684\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff0c**\u672c\u8d28\u662f\u6392\u597d\u5e8f\u7684\u5feb\u901f\u67e5\u627e\u6570\u636e\u7ed3\u6784\u3002**\u5728\u8868\u6570\u636e\u4e4b\u5916\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u8fd8\u7ef4\u62a4\u7740\u6ee1\u8db3\u7279\u5b9a\u67e5\u627e\u7b97\u6cd5\u7684\u6570\u636e\u7ed3\u6784\uff0c\u8fd9\u4e9b\u6570\u636e\u7ed3\u6784\u4ee5\u67d0\u79cd\u65b9\u5f0f\u6307\u5411\u6570\u636e\uff0c \u8fd9\u6837\u5c31\u53ef\u4ee5\u5728\u8fd9\u4e9b\u6570\u636e\u7ed3\u6784\u4e0a\u5b9e\u73b0\u9ad8\u7ea7\u67e5\u627e\u7b97\u6cd5\uff0c\u8fd9\u79cd\u6570\u636e\u7ed3\u6784\u5c31\u662f\u7d22\u5f15"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u7d22\u5f15\u662f\u5728\u5b58\u50a8\u5f15\u64ce\u5c42\u5b9e\u73b0\u7684"}),"\uff0c\u6240\u4ee5\u5e76\u6ca1\u6709\u7edf\u4e00\u7684\u7d22\u5f15\u6807\u51c6\uff0c\u5373\u4e0d\u540c\u5b58\u50a8\u5f15\u64ce\u7684\u7d22\u5f15\u7684\u5de5\u4f5c\u65b9\u5f0f\u5e76\u4e0d\u4e00\u6837"]}),"\n",(0,i.jsxs)(e.p,{children:["\u7d22\u5f15\u4f7f\u7528\uff1a\u4e00\u5f20\u6570\u636e\u8868\uff0c\u7528\u4e8e\u4fdd\u5b58\u6570\u636e\uff1b\u4e00\u4e2a\u7d22\u5f15\u914d\u7f6e\u6587\u4ef6\uff0c\u7528\u4e8e\u4fdd\u5b58\u7d22\u5f15\uff1b\u6bcf\u4e2a\u7d22\u5f15\u90fd\u6307\u5411\u4e86\u67d0\u4e00\u4e2a\u6570\u636e\n",(0,i.jsx)(e.img,{src:s(63602).A+"",width:"973",height:"319"})]}),"\n",(0,i.jsx)(e.p,{children:"\u5de6\u8fb9\u662f\u6570\u636e\u8868\uff0c\u4e00\u5171\u6709\u4e24\u5217\u4e03\u6761\u8bb0\u5f55\uff0c\u6700\u5de6\u8fb9\u7684\u662f\u6570\u636e\u8bb0\u5f55\u7684\u7269\u7406\u5730\u5740\uff08\u6ce8\u610f\u903b\u8f91\u4e0a\u76f8\u90bb\u7684\u8bb0\u5f55\u5728\u78c1\u76d8\u4e0a\u4e5f\u5e76\u4e0d\u662f\u4e00\u5b9a\u7269\u7406\u76f8\u90bb\u7684\uff09\u3002\u4e3a\u4e86\u52a0\u5feb Col2 \u7684\u67e5\u627e\uff0c\u53ef\u4ee5\u7ef4\u62a4\u4e00\u4e2a\u53f3\u8fb9\u6240\u793a\u7684\u4e8c\u53c9\u67e5\u627e\u6811\uff0c\u6bcf\u4e2a\u8282\u70b9\u5206\u522b\u5305\u542b\u7d22\u5f15\u952e\u503c\u548c\u4e00\u4e2a\u6307\u5411\u5bf9\u5e94\u6570\u636e\u7684\u7269\u7406\u5730\u5740\u7684\u6307\u9488\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u8fd0\u7528\u4e8c\u53c9\u67e5\u627e\u5feb\u901f\u83b7\u53d6\u5230\u76f8\u5e94\u6570\u636e"}),"\n",(0,i.jsx)(e.p,{children:"\u7d22\u5f15\u7684\u4f18\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7c7b\u4f3c\u4e8e\u4e66\u7c4d\u7684\u76ee\u5f55\u7d22\u5f15\uff0c\u63d0\u9ad8\u6570\u636e\u68c0\u7d22\u7684\u6548\u7387\uff0c\u964d\u4f4e\u6570\u636e\u5e93\u7684 IO \u6210\u672c"}),"\n",(0,i.jsx)(e.li,{children:"\u901a\u8fc7\u7d22\u5f15\u5217\u5bf9\u6570\u636e\u8fdb\u884c\u6392\u5e8f\uff0c\u964d\u4f4e\u6570\u636e\u6392\u5e8f\u7684\u6210\u672c\uff0c\u964d\u4f4e CPU \u7684\u6d88\u8017"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u7d22\u5f15\u7684\u7f3a\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4e00\u822c\u6765\u8bf4\u7d22\u5f15\u672c\u8eab\u4e5f\u5f88\u5927\uff0c\u4e0d\u53ef\u80fd\u5168\u90e8\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\uff0c\u56e0\u6b64\u7d22\u5f15\u5f80\u5f80\u4ee5\u7d22\u5f15\u6587\u4ef6\u7684\u5f62\u5f0f",(0,i.jsx)(e.strong,{children:"\u5b58\u50a8\u5728\u78c1\u76d8"}),"\u4e0a"]}),"\n",(0,i.jsxs)(e.li,{children:["\u867d\u7136\u7d22\u5f15\u5927\u5927\u63d0\u9ad8\u4e86\u67e5\u8be2\u6548\u7387\uff0c\u540c\u65f6\u5374\u4e5f\u964d\u4f4e\u66f4\u65b0\u8868\u7684\u901f\u5ea6\u3002\u5bf9\u8868\u8fdb\u884c INSERT\u3001UPDATE\u3001DELETE \u64cd\u4f5c\uff0cMySQL \u4e0d\u4ec5\u8981\u4fdd\u5b58\u6570\u636e\uff0c\u8fd8\u8981\u4fdd\u5b58\u4e00\u4e0b\u7d22\u5f15\u6587\u4ef6\u6bcf\u6b21\u66f4\u65b0\u6dfb\u52a0\u4e86\u7d22\u5f15\u5217\u7684\u5b57\u6bb5\uff0c\u8fd8\u4f1a\u8c03\u6574\u56e0\u4e3a\u66f4\u65b0\u6240\u5e26\u6765\u7684\u952e\u503c\u53d8\u5316\u540e\u7684\u7d22\u5f15\u4fe1\u606f\uff0c",(0,i.jsx)(e.strong,{children:"\u4f46\u662f\u66f4\u65b0\u6570\u636e\u4e5f\u9700\u8981\u5148\u4ece\u6570\u636e\u5e93\u4e2d\u83b7\u53d6"}),"\uff0c\u7d22\u5f15\u52a0\u5feb\u4e86\u83b7\u53d6\u901f\u5ea6\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f8\u4e92\u62b5\u6d88\u4e00\u4e0b\u3002"]}),"\n",(0,i.jsx)(e.li,{children:"\u7d22\u5f15\u4f1a\u5f71\u54cd\u5230 WHERE \u7684\u67e5\u8be2\u6761\u4ef6\u548c\u6392\u5e8f ORDER BY \u4e24\u5927\u529f\u80fd"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u7d22\u5f15\u5206\u7c7b",children:"\u7d22\u5f15\u5206\u7c7b"}),"\n",(0,i.jsx)(e.p,{children:"\u7d22\u5f15\u4e00\u822c\u7684\u5206\u7c7b\u5982\u4e0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u529f\u80fd\u5206\u7c7b\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e3b\u952e\u7d22\u5f15\uff1a\u4e00\u79cd\u7279\u6b8a\u7684\u552f\u4e00\u7d22\u5f15\uff0c\u4e0d\u5141\u8bb8\u6709\u7a7a\u503c\uff0c\u4e00\u822c\u5728\u5efa\u8868\u65f6\u540c\u65f6\u521b\u5efa\u4e3b\u952e\u7d22\u5f15"}),"\n",(0,i.jsx)(e.li,{children:"\u5355\u5217\u7d22\u5f15\uff1a\u4e00\u4e2a\u7d22\u5f15\u53ea\u5305\u542b\u5355\u4e2a\u5217\uff0c\u4e00\u4e2a\u8868\u53ef\u4ee5\u6709\u591a\u4e2a\u5355\u5217\u7d22\u5f15\uff08\u666e\u901a\u7d22\u5f15\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u8054\u5408\u7d22\u5f15\uff1a\u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u5c06\u5355\u5217\u7d22\u5f15\u8fdb\u884c\u7ec4\u5408"}),"\n",(0,i.jsxs)(e.li,{children:["\u552f\u4e00\u7d22\u5f15\uff1a\u7d22\u5f15\u5217\u7684\u503c\u5fc5\u987b\u552f\u4e00\uff0c",(0,i.jsx)(e.strong,{children:"\u5141\u8bb8\u6709\u7a7a\u503c"}),"\uff0c\u5982\u679c\u662f\u8054\u5408\u7d22\u5f15\uff0c\u5219\u5217\u503c\u7ec4\u5408\u5fc5\u987b\u552f\u4e00\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"NULL \u503c\u53ef\u4ee5\u51fa\u73b0\u591a\u6b21\uff0c\u56e0\u4e3a\u4e24\u4e2a NULL \u6bd4\u8f83\u7684\u7ed3\u679c\u65e2\u4e0d\u76f8\u7b49\uff0c\u4e5f\u4e0d\u4e0d\u7b49\uff0c\u7ed3\u679c\u4ecd\u7136\u662f\u672a\u77e5"}),"\n",(0,i.jsx)(e.li,{children:"\u53ef\u4ee5\u58f0\u660e\u4e0d\u5141\u8bb8\u5b58\u50a8 NULL \u503c\u7684\u975e\u7a7a\u552f\u4e00\u7d22\u5f15"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u5916\u952e\u7d22\u5f15\uff1a\u53ea\u6709 InnoDB \u5f15\u64ce\u652f\u6301\u5916\u952e\u7d22\u5f15\uff0c\u7528\u6765\u4fdd\u8bc1\u6570\u636e\u7684\u4e00\u81f4\u6027\u3001\u5b8c\u6574\u6027\u548c\u5b9e\u73b0\u7ea7\u8054\u64cd\u4f5c"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u7ed3\u6784\u5206\u7c7b\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"BTree \u7d22\u5f15\uff1aMySQL \u4f7f\u7528\u6700\u9891\u7e41\u7684\u4e00\u4e2a\u7d22\u5f15\u6570\u636e\u7ed3\u6784\uff0c\u662f InnoDB \u548c MyISAM \u5b58\u50a8\u5f15\u64ce\u9ed8\u8ba4\u7684\u7d22\u5f15\u7c7b\u578b\uff0c\u5e95\u5c42\u57fa\u4e8e B+Tree"}),"\n",(0,i.jsx)(e.li,{children:"Hash \u7d22\u5f15\uff1aMySQL\u4e2d Memory \u5b58\u50a8\u5f15\u64ce\u9ed8\u8ba4\u652f\u6301\u7684\u7d22\u5f15\u7c7b\u578b"}),"\n",(0,i.jsx)(e.li,{children:"R-tree \u7d22\u5f15\uff08\u7a7a\u95f4\u7d22\u5f15\uff09\uff1a\u7a7a\u95f4\u7d22\u5f15\u662f MyISAM \u5f15\u64ce\u7684\u4e00\u4e2a\u7279\u6b8a\u7d22\u5f15\u7c7b\u578b\uff0c\u4e3b\u8981\u7528\u4e8e\u5730\u7406\u7a7a\u95f4\u6570\u636e\u7c7b\u578b"}),"\n",(0,i.jsx)(e.li,{children:"Full-text \u7d22\u5f15\uff08\u5168\u6587\u7d22\u5f15\uff09\uff1a\u5feb\u901f\u5339\u914d\u5168\u90e8\u6587\u6863\u7684\u65b9\u5f0f\u3002MyISAM \u652f\u6301\uff0c InnoDB \u4e0d\u652f\u6301 FULLTEXT \u7c7b\u578b\u7684\u7d22\u5f15\uff0c\u4f46\u662f InnoDB \u53ef\u4ee5\u4f7f\u7528 sphinx \u63d2\u4ef6\u652f\u6301\u5168\u6587\u7d22\u5f15\uff0cMEMORY \u5f15\u64ce\u4e0d\u652f\u6301"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7d22\u5f15"}),(0,i.jsx)(e.th,{children:"InnoDB"}),(0,i.jsx)(e.th,{children:"MyISAM"}),(0,i.jsx)(e.th,{children:"Memory"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"BTREE"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"HASH"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"R-tree"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Full-text"}),(0,i.jsx)(e.td,{children:"5.6 \u7248\u672c\u4e4b\u540e\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8054\u5408\u7d22\u5f15\u56fe\u793a\uff1a\u6839\u636e\u8eab\u9ad8\u5e74\u9f84\u5efa\u7acb\u7684\u7ec4\u5408\u7d22\u5f15\uff08height\u3001age\uff09"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(13688).A+"",width:"2282",height:"672"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u7d22\u5f15\u64cd\u4f5c",children:"\u7d22\u5f15\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"\u7d22\u5f15\u5728\u521b\u5efa\u8868\u7684\u65f6\u5019\u53ef\u4ee5\u540c\u65f6\u521b\u5efa\uff0c \u4e5f\u53ef\u4ee5\u968f\u65f6\u589e\u52a0\u65b0\u7684\u7d22\u5f15"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u521b\u5efa\u7d22\u5f15\uff1a\u5982\u679c\u4e00\u4e2a\u8868\u4e2d\u6709\u4e00\u5217\u662f\u4e3b\u952e\uff0c\u90a3\u4e48\u4f1a",(0,i.jsx)(e.strong,{children:"\u9ed8\u8ba4\u4e3a\u5176\u521b\u5efa\u4e3b\u952e\u7d22\u5f15"}),"\uff08\u4e3b\u952e\u5217\u4e0d\u9700\u8981\u5355\u72ec\u521b\u5efa\u7d22\u5f15\uff09"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE [UNIQUE|FULLTEXT] INDEX \u7d22\u5f15\u540d\u79f0 [USING \u7d22\u5f15\u7c7b\u578b] ON \u8868\u540d(\u5217\u540d...);\n-- \u7d22\u5f15\u7c7b\u578b\u9ed8\u8ba4\u662f B+TREE\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u7d22\u5f15"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW INDEX FROM \u8868\u540d;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6dfb\u52a0\u7d22\u5f15"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u5355\u5217\u7d22\u5f15\nALTER TABLE \u8868\u540d ADD INDEX \u7d22\u5f15\u540d\u79f0(\u5217\u540d);\n\n-- \u7ec4\u5408\u7d22\u5f15\nALTER TABLE \u8868\u540d ADD INDEX \u7d22\u5f15\u540d\u79f0(\u5217\u540d1,\u5217\u540d2,...);\n\n-- \u4e3b\u952e\u7d22\u5f15\nALTER TABLE \u8868\u540d ADD PRIMARY KEY(\u4e3b\u952e\u5217\u540d); \n\n-- \u5916\u952e\u7d22\u5f15(\u6dfb\u52a0\u5916\u952e\u7ea6\u675f\uff0c\u5c31\u662f\u5916\u952e\u7d22\u5f15)\nALTER TABLE \u8868\u540d ADD CONSTRAINT \u5916\u952e\u540d FOREIGN KEY (\u672c\u8868\u5916\u952e\u5217\u540d) REFERENCES \u4e3b\u8868\u540d(\u4e3b\u952e\u5217\u540d);\n\n-- \u552f\u4e00\u7d22\u5f15\nALTER TABLE \u8868\u540d ADD UNIQUE \u7d22\u5f15\u540d\u79f0(\u5217\u540d);\n\n-- \u5168\u6587\u7d22\u5f15(mysql\u53ea\u652f\u6301\u6587\u672c\u7c7b\u578b)\nALTER TABLE \u8868\u540d ADD FULLTEXT \u7d22\u5f15\u540d\u79f0(\u5217\u540d);\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u7d22\u5f15"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DROP INDEX \u7d22\u5f15\u540d\u79f0 ON \u8868\u540d;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6848\u4f8b\u7ec3\u4e60"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u51c6\u5907\uff1astudent"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"id\tNAME\t age\tscore\n1\t\u5f20\u4e09\t\t23\t\t99\n2\t\u674e\u56db\t\t24\t\t95\n3\t\u738b\u4e94\t\t25\t\t98\n4\t\u8d75\u516d\t\t26\t\t97\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u7d22\u5f15\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u4e3astudent\u8868\u4e2d\u59d3\u540d\u5217\u521b\u5efa\u4e00\u4e2a\u666e\u901a\u7d22\u5f15\nCREATE INDEX idx_name ON student(NAME);\n\n-- \u4e3astudent\u8868\u4e2d\u5e74\u9f84\u5217\u521b\u5efa\u4e00\u4e2a\u552f\u4e00\u7d22\u5f15\nCREATE UNIQUE INDEX idx_age ON student(age);\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u805a\u7c07\u7d22\u5f15",children:"\u805a\u7c07\u7d22\u5f15"}),"\n",(0,i.jsx)(e.h4,{id:"\u7d22\u5f15\u5bf9\u6bd4",children:"\u7d22\u5f15\u5bf9\u6bd4"}),"\n",(0,i.jsx)(e.p,{children:"\u805a\u7c07\u7d22\u5f15\u662f\u4e00\u79cd\u6570\u636e\u5b58\u50a8\u65b9\u5f0f\uff0c\u5e76\u4e0d\u662f\u4e00\u79cd\u5355\u72ec\u7684\u7d22\u5f15\u7c7b\u578b"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u805a\u7c07\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u5b58\u653e\u7684\u662f\u4e3b\u952e\u503c\u548c\u6570\u636e\u884c\uff0c\u652f\u6301\u8986\u76d6\u7d22\u5f15"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u975e\u805a\u7c07\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u5b58\u653e\u7684\u662f\u4e3b\u952e\u503c\u6216\u6307\u5411\u6570\u636e\u884c\u7684\u6307\u9488\uff08\u7531\u5b58\u50a8\u5f15\u64ce\u51b3\u5b9a\uff09"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5728 Innodb \u4e0b\u4e3b\u952e\u7d22\u5f15\u662f\u805a\u7c07\u7d22\u5f15\uff0c\u5728 MyISAM \u4e0b\u4e3b\u952e\u7d22\u5f15\u662f\u975e\u805a\u7c07\u7d22\u5f15"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"innodb",children:"Innodb"}),"\n",(0,i.jsx)(e.h5,{id:"\u805a\u7c07\u7d22\u5f15-1",children:"\u805a\u7c07\u7d22\u5f15"}),"\n",(0,i.jsx)(e.p,{children:"\u5728 Innodb \u5b58\u50a8\u5f15\u64ce\uff0cB+ \u6811\u7d22\u5f15\u53ef\u4ee5\u5206\u4e3a\u805a\u7c07\u7d22\u5f15\uff08\u4e5f\u79f0\u805a\u96c6\u7d22\u5f15\u3001clustered index\uff09\u548c\u8f85\u52a9\u7d22\u5f15\uff08\u4e5f\u79f0\u975e\u805a\u7c07\u7d22\u5f15\u6216\u4e8c\u7ea7\u7d22\u5f15\u3001secondary index\u3001non-clustered index\uff09"}),"\n",(0,i.jsx)(e.p,{children:"InnoDB \u4e2d\uff0c\u805a\u7c07\u7d22\u5f15\u662f\u6309\u7167\u6bcf\u5f20\u8868\u7684\u4e3b\u952e\u6784\u9020\u4e00\u9897 B+ \u6811\uff0c\u53f6\u5b50\u8282\u70b9\u4e2d\u5b58\u653e\u7684\u5c31\u662f\u6574\u5f20\u8868\u7684\u6570\u636e\uff0c\u5c06\u805a\u7c07\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u79f0\u4e3a\u6570\u636e\u9875"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u8fd9\u4e2a\u7279\u6027\u51b3\u5b9a\u4e86",(0,i.jsx)(e.strong,{children:"\u6570\u636e\u4e5f\u662f\u7d22\u5f15\u7684\u4e00\u90e8\u5206"}),"\uff0c\u6240\u4ee5\u4e00\u5f20\u8868\u53ea\u80fd\u6709\u4e00\u4e2a\u805a\u7c07\u7d22\u5f15"]}),"\n",(0,i.jsx)(e.li,{children:"\u8f85\u52a9\u7d22\u5f15\u7684\u5b58\u5728\u4e0d\u5f71\u54cd\u805a\u7c07\u7d22\u5f15\u4e2d\u6570\u636e\u7684\u7ec4\u7ec7\uff0c\u6240\u4ee5\u4e00\u5f20\u8868\u53ef\u4ee5\u6709\u591a\u4e2a\u8f85\u52a9\u7d22\u5f15"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u805a\u7c07\u7d22\u5f15\u7684\u4f18\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6570\u636e\u8bbf\u95ee\u66f4\u5feb\uff0c\u805a\u7c07\u7d22\u5f15\u5c06\u7d22\u5f15\u548c\u6570\u636e\u4fdd\u5b58\u5728\u540c\u4e00\u4e2a B+ \u6811\u4e2d\uff0c\u56e0\u6b64\u4ece\u805a\u7c07\u7d22\u5f15\u4e2d\u83b7\u53d6\u6570\u636e\u6bd4\u975e\u805a\u7c07\u7d22\u5f15\u66f4\u5feb"}),"\n",(0,i.jsx)(e.li,{children:"\u805a\u7c07\u7d22\u5f15\u5bf9\u4e8e\u4e3b\u952e\u7684\u6392\u5e8f\u67e5\u627e\u548c\u8303\u56f4\u67e5\u627e\u901f\u5ea6\u975e\u5e38\u5feb"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u805a\u7c07\u7d22\u5f15\u7684\u7f3a\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u63d2\u5165\u901f\u5ea6\u4e25\u91cd\u4f9d\u8d56\u4e8e\u63d2\u5165\u987a\u5e8f\uff0c\u6309\u7167\u4e3b\u952e\u7684\u987a\u5e8f\uff08\u9012\u589e\uff09\u63d2\u5165\u662f\u6700\u5feb\u7684\u65b9\u5f0f\uff0c\u5426\u5219\u5c06\u4f1a\u51fa\u73b0\u9875\u5206\u88c2\uff0c\u4e25\u91cd\u5f71\u54cd\u6027\u80fd\uff0c\u6240\u4ee5\u5bf9\u4e8e InnoDB \u8868\uff0c\u4e00\u822c\u90fd\u4f1a\u5b9a\u4e49\u4e00\u4e2a\u81ea\u589e\u7684 ID \u5217\u4e3a\u4e3b\u952e"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u66f4\u65b0\u4e3b\u952e\u7684\u4ee3\u4ef7\u5f88\u9ad8\uff0c\u5c06\u4f1a\u5bfc\u81f4\u88ab\u66f4\u65b0\u7684\u884c\u79fb\u52a8\uff0c\u6240\u4ee5\u5bf9\u4e8e InnoDB \u8868\uff0c\u4e00\u822c\u5b9a\u4e49\u4e3b\u952e\u4e3a\u4e0d\u53ef\u66f4\u65b0"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e8c\u7ea7\u7d22\u5f15\u8bbf\u95ee\u9700\u8981\u4e24\u6b21\u7d22\u5f15\u67e5\u627e\uff0c\u7b2c\u4e00\u6b21\u627e\u5230\u4e3b\u952e\u503c\uff0c\u7b2c\u4e8c\u6b21\u6839\u636e\u4e3b\u952e\u503c\u627e\u5230\u884c\u6570\u636e"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u8f85\u52a9\u7d22\u5f15",children:"\u8f85\u52a9\u7d22\u5f15"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u805a\u7c07\u7d22\u5f15\u4e4b\u4e0a\u521b\u5efa\u7684\u7d22\u5f15\u79f0\u4e4b\u4e3a\u8f85\u52a9\u7d22\u5f15\uff0c\u975e\u805a\u7c07\u7d22\u5f15\u90fd\u662f\u8f85\u52a9\u7d22\u5f15\uff0c\u50cf\u590d\u5408\u7d22\u5f15\u3001\u524d\u7f00\u7d22\u5f15\u3001\u552f\u4e00\u7d22\u5f15\u7b49"}),"\n",(0,i.jsx)(e.p,{children:"\u8f85\u52a9\u7d22\u5f15\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u7684\u662f\u4e3b\u952e\u503c\uff0c\u800c\u4e0d\u662f\u6570\u636e\u7684\u7269\u7406\u5730\u5740\uff0c\u6240\u4ee5\u8bbf\u95ee\u6570\u636e\u9700\u8981\u4e8c\u6b21\u67e5\u627e\uff0c\u63a8\u8350\u4f7f\u7528\u8986\u76d6\u7d22\u5f15\uff0c\u53ef\u4ee5\u51cf\u5c11\u56de\u8868\u67e5\u8be2"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u68c0\u7d22\u8fc7\u7a0b"}),"\uff1a\u8f85\u52a9\u7d22\u5f15\u627e\u5230\u4e3b\u952e\u503c\uff0c\u518d\u901a\u8fc7\u805a\u7c07\u7d22\u5f15\uff08\u4e8c\u5206\uff09\u627e\u5230\u6570\u636e\u9875\uff0c\u6700\u540e\u901a\u8fc7\u6570\u636e\u9875\u4e2d\u7684 Page Directory\uff08\u4e8c\u5206\uff09\u627e\u5230\u5bf9\u5e94\u7684\u6570\u636e\u5206\u7ec4\uff0c\u904d\u5386\u7ec4\u5185\u6240\u6240\u6709\u7684\u6570\u636e\u627e\u5230\u6570\u636e\u884c"]}),"\n",(0,i.jsx)(e.p,{children:"\u8865\u5145\uff1a\u65e0\u7d22\u5f15\u8d70\u5168\u8868\u67e5\u8be2\uff0c\u67e5\u5230\u6570\u636e\u9875\u540e\u548c\u4e0a\u8ff0\u6b65\u9aa4\u4e00\u81f4"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u7d22\u5f15\u5b9e\u73b0",children:"\u7d22\u5f15\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.p,{children:"InnoDB \u4f7f\u7528 B+Tree \u4f5c\u4e3a\u7d22\u5f15\u7ed3\u6784\uff0c\u5e76\u4e14 InnoDB \u4e00\u5b9a\u6709\u7d22\u5f15"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u952e\u7d22\u5f15\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728 InnoDB \u4e2d\uff0c\u8868\u6570\u636e\u6587\u4ef6\u672c\u8eab\u5c31\u662f\u6309 B+Tree \u7ec4\u7ec7\u7684\u4e00\u4e2a\u7d22\u5f15\u7ed3\u6784\uff0c\u8fd9\u4e2a\u7d22\u5f15\u7684 key \u662f\u6570\u636e\u8868\u7684\u4e3b\u952e\uff0c\u53f6\u5b50\u8282\u70b9 data \u57df\u4fdd\u5b58\u4e86\u5b8c\u6574\u7684\u6570\u636e\u8bb0\u5f55"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["InnoDB \u7684\u8868\u6570\u636e\u6587\u4ef6",(0,i.jsx)(e.strong,{children:"\u901a\u8fc7\u4e3b\u952e\u805a\u96c6\u6570\u636e"}),"\uff0c\u5982\u679c\u6ca1\u6709\u5b9a\u4e49\u4e3b\u952e\uff0c\u4f1a\u9009\u62e9\u975e\u7a7a\u552f\u4e00\u7d22\u5f15\u4ee3\u66ff\uff0c\u5982\u679c\u4e5f\u6ca1\u6709\u8fd9\u6837\u7684\u5217\uff0cMySQL \u4f1a\u81ea\u52a8\u4e3a InnoDB \u8868\u751f\u6210\u4e00\u4e2a",(0,i.jsx)(e.strong,{children:"\u9690\u542b\u5b57\u6bb5 row_id"})," \u4f5c\u4e3a\u4e3b\u952e\uff0c\u8fd9\u4e2a\u5b57\u6bb5\u957f\u5ea6\u4e3a 6 \u4e2a\u5b57\u8282\uff0c\u7c7b\u578b\u4e3a\u957f\u6574\u5f62"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8f85\u52a9\u7d22\u5f15\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"InnoDB \u7684\u6240\u6709\u8f85\u52a9\u7d22\u5f15\uff08\u4e8c\u7ea7\u7d22\u5f15\uff09\u90fd\u5f15\u7528\u4e3b\u952e\u4f5c\u4e3a data \u57df"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["InnoDB \u8868\u662f\u57fa\u4e8e\u805a\u7c07\u7d22\u5f15\u5efa\u7acb\u7684\uff0c\u56e0\u6b64 InnoDB \u7684\u7d22\u5f15\u80fd\u63d0\u4f9b\u4e00\u79cd\u975e\u5e38\u5feb\u901f\u7684\u4e3b\u952e\u67e5\u627e\u6027\u80fd\u3002\u4e0d\u8fc7\u8f85\u52a9\u7d22\u5f15\u4e5f\u4f1a\u5305\u542b\u4e3b\u952e\u5217\uff0c\u6240\u4ee5\u4e0d\u5efa\u8bae\u4f7f\u7528\u8fc7\u957f\u7684\u5b57\u6bb5\u4f5c\u4e3a\u4e3b\u952e\uff0c",(0,i.jsx)(e.strong,{children:"\u8fc7\u957f\u7684\u4e3b\u7d22\u5f15\u4f1a\u4ee4\u8f85\u52a9\u7d22\u5f15\u53d8\u5f97\u8fc7\u5927"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(28414).A+"",width:"1168",height:"309"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"myisam",children:"MyISAM"}),"\n",(0,i.jsx)(e.h5,{id:"\u975e\u805a\u7c07",children:"\u975e\u805a\u7c07"}),"\n",(0,i.jsxs)(e.p,{children:["MyISAM \u7684\u4e3b\u952e\u7d22\u5f15\u4f7f\u7528\u7684\u662f\u975e\u805a\u7c07\u7d22\u5f15\uff0c\u7d22\u5f15\u6587\u4ef6\u548c\u6570\u636e\u6587\u4ef6\u662f\u5206\u79bb\u7684\uff0c",(0,i.jsx)(e.strong,{children:"\u7d22\u5f15\u6587\u4ef6\u4ec5\u4fdd\u5b58\u6570\u636e\u7684\u5730\u5740"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e3b\u952e\u7d22\u5f15 B+ \u6811\u7684\u8282\u70b9\u5b58\u50a8\u4e86\u4e3b\u952e\uff0c\u8f85\u52a9\u952e\u7d22\u5f15 B+ \u6811\u5b58\u50a8\u4e86\u8f85\u52a9\u952e\uff0c\u8868\u6570\u636e\u5b58\u50a8\u5728\u72ec\u7acb\u7684\u5730\u65b9\uff0c\u8fd9\u4e24\u9897 B+ \u6811\u7684\u53f6\u5b50\u8282\u70b9\u90fd\u4f7f\u7528\u4e00\u4e2a\u5730\u5740\u6307\u5411\u771f\u6b63\u7684\u8868\u6570\u636e\uff0c\u5bf9\u4e8e\u8868\u6570\u636e\u6765\u8bf4\uff0c\u8fd9\u4e24\u4e2a\u952e\u6ca1\u6709\u4efb\u4f55\u5dee\u522b"}),"\n",(0,i.jsxs)(e.li,{children:["\u7531\u4e8e\u7d22\u5f15\u6811\u662f\u72ec\u7acb\u7684\uff0c\u901a\u8fc7\u8f85\u52a9\u7d22\u5f15\u68c0\u7d22",(0,i.jsx)(e.strong,{children:"\u65e0\u9700\u56de\u8868\u67e5\u8be2"}),"\u8bbf\u95ee\u4e3b\u952e\u7684\u7d22\u5f15\u6811"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(86861).A+"",width:"987",height:"543"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u7d22\u5f15\u5b9e\u73b0-1",children:"\u7d22\u5f15\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.p,{children:"MyISAM \u7684\u7d22\u5f15\u65b9\u5f0f\u4e5f\u53eb\u505a\u975e\u805a\u96c6\u7684\uff0c\u4e4b\u6240\u4ee5\u8fd9\u4e48\u79f0\u547c\u662f\u4e3a\u4e86\u4e0e InnoDB \u7684\u805a\u96c6\u7d22\u5f15\u533a\u5206"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u952e\u7d22\u5f15\uff1aMyISAM \u5f15\u64ce\u4f7f\u7528 B+Tree \u4f5c\u4e3a\u7d22\u5f15\u7ed3\u6784\uff0c\u53f6\u8282\u70b9\u7684 data \u57df\u5b58\u653e\u7684\u662f\u6570\u636e\u8bb0\u5f55\u7684\u5730\u5740"}),"\n",(0,i.jsx)(e.p,{children:"\u8f85\u52a9\u7d22\u5f15\uff1aMyISAM \u4e2d\u4e3b\u7d22\u5f15\u548c\u8f85\u52a9\u7d22\u5f15\uff08Secondary key\uff09\u5728\u7ed3\u6784\u4e0a\u6ca1\u6709\u4efb\u4f55\u533a\u522b\uff0c\u53ea\u662f\u4e3b\u7d22\u5f15\u8981\u6c42 key \u662f\u552f\u4e00\u7684\uff0c\u800c\u8f85\u52a9\u7d22\u5f15\u7684 key \u53ef\u4ee5\u91cd\u590d"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(42234).A+"",width:"1454",height:"510"})}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://blog.csdn.net/lm1060891265/article/details/81482136",children:"https://blog.csdn.net/lm1060891265/article/details/81482136"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u7d22\u5f15\u7ed3\u6784",children:"\u7d22\u5f15\u7ed3\u6784"}),"\n",(0,i.jsx)(e.h4,{id:"\u6570\u636e\u9875",children:"\u6570\u636e\u9875"}),"\n",(0,i.jsx)(e.p,{children:"\u6587\u4ef6\u7cfb\u7edf\u7684\u6700\u5c0f\u5355\u5143\u662f\u5757\uff08block\uff09\uff0c\u4e00\u4e2a\u5757\u7684\u5927\u5c0f\u662f 4K\uff0c\u7cfb\u7edf\u4ece\u78c1\u76d8\u8bfb\u53d6\u6570\u636e\u5230\u5185\u5b58\u65f6\u662f\u4ee5\u78c1\u76d8\u5757\u4e3a\u57fa\u672c\u5355\u4f4d\u7684\uff0c\u4f4d\u4e8e\u540c\u4e00\u4e2a\u78c1\u76d8\u5757\u4e2d\u7684\u6570\u636e\u4f1a\u88ab\u4e00\u6b21\u6027\u8bfb\u53d6\u51fa\u6765\uff0c\u800c\u4e0d\u662f\u9700\u8981\u4ec0\u4e48\u53d6\u4ec0\u4e48"}),"\n",(0,i.jsx)(e.p,{children:"InnoDB \u5b58\u50a8\u5f15\u64ce\u4e2d\u6709\u9875\uff08Page\uff09\u7684\u6982\u5ff5\uff0c\u9875\u662f MySQL \u78c1\u76d8\u7ba1\u7406\u7684\u6700\u5c0f\u5355\u4f4d"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"InnoDB \u5b58\u50a8\u5f15\u64ce\u4e2d\u9ed8\u8ba4\u6bcf\u4e2a\u9875\u7684\u5927\u5c0f\u4e3a 16KB\uff0c\u7d22\u5f15\u4e2d\u4e00\u4e2a\u8282\u70b9\u5c31\u662f\u4e00\u4e2a\u6570\u636e\u9875"}),"\uff0c\u6240\u4ee5\u4f1a\u4e00\u6b21\u6027\u8bfb\u53d6 16KB \u7684\u6570\u636e\u5230\u5185\u5b58"]}),"\n",(0,i.jsx)(e.li,{children:"InnoDB \u5f15\u64ce\u5c06\u82e5\u5e72\u4e2a\u5730\u5740\u8fde\u63a5\u78c1\u76d8\u5757\uff0c\u4ee5\u6b64\u6765\u8fbe\u5230\u9875\u7684\u5927\u5c0f 16KB"}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u67e5\u8be2\u6570\u636e\u65f6\u5982\u679c\u4e00\u4e2a\u9875\u4e2d\u7684\u6bcf\u6761\u6570\u636e\u90fd\u80fd\u6709\u52a9\u4e8e\u5b9a\u4f4d\u6570\u636e\u8bb0\u5f55\u7684\u4f4d\u7f6e\uff0c\u8fd9\u5c06\u4f1a\u51cf\u5c11\u78c1\u76d8 I/O \u6b21\u6570\uff0c\u63d0\u9ad8\u67e5\u8be2\u6548\u7387"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u8d85\u8fc7 16KB \u7684\u4e00\u6761\u8bb0\u5f55\uff0c\u4e3b\u952e\u7d22\u5f15\u9875\u53ea\u4f1a\u5b58\u50a8\u90e8\u5206\u6570\u636e\u548c\u6307\u5411",(0,i.jsx)(e.strong,{children:"\u6ea2\u51fa\u9875"}),"\u7684\u6307\u9488\uff0c\u5269\u4f59\u6570\u636e\u90fd\u4f1a\u5206\u6563\u5b58\u50a8\u5728\u6ea2\u51fa\u9875\u4e2d"]}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u9875\u7269\u7406\u7ed3\u6784\uff0c\u4ece\u4e0a\u5230\u4e0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["File Header\uff1a\u4e0a\u4e00\u9875\u548c\u4e0b\u4e00\u9875\u7684\u6307\u9488\u3001\u8be5\u9875\u7684\u7c7b\u578b\uff08\u7d22\u5f15\u9875\u3001\u6570\u636e\u9875\u3001\u65e5\u5fd7\u9875\u7b49\uff09\u3001",(0,i.jsx)(e.strong,{children:"\u6821\u9a8c\u548c"}),"\u3001LSN\uff08\u6700\u8fd1\u4e00\u6b21\u4fee\u6539\u5f53\u524d\u9875\u9762\u65f6\u7684\u7cfb\u7edf lsn \u503c\uff0c\u4e8b\u52a1\u6301\u4e45\u6027\u90e8\u5206\u8be6\u89e3\uff09\u7b49\u4fe1\u606f"]}),"\n",(0,i.jsx)(e.li,{children:"Page Header\uff1a\u8bb0\u5f55\u72b6\u6001\u4fe1\u606f"}),"\n",(0,i.jsx)(e.li,{children:"Infimum + Supremum\uff1a\u5f53\u524d\u9875\u7684\u6700\u5c0f\u8bb0\u5f55\u548c\u6700\u5927\u8bb0\u5f55\uff08\u5934\u5c3e\u6307\u9488\uff09\uff0cInfimum \u6240\u5728\u5206\u7ec4\u53ea\u6709\u4e00\u6761\u8bb0\u5f55\uff0cSupremum \u6240\u5728\u5206\u7ec4\u53ef\u4ee5\u6709 1 ~ 8 \u6761\u8bb0\u5f55\uff0c\u5269\u4f59\u7684\u5206\u7ec4\u53ef\u4ee5\u6709 4 ~ 8 \u6761\u8bb0\u5f55"}),"\n",(0,i.jsx)(e.li,{children:"User Records\uff1a\u5b58\u50a8\u6570\u636e\u7684\u8bb0\u5f55"}),"\n",(0,i.jsx)(e.li,{children:"Free Space\uff1a\u5c1a\u672a\u4f7f\u7528\u7684\u5b58\u50a8\u7a7a\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"Page Directory\uff1a\u5206\u7ec4\u7684\u76ee\u5f55\uff0c\u53ef\u4ee5\u901a\u8fc7\u76ee\u5f55\u5feb\u901f\u5b9a\u4f4d\uff08\u4e8c\u5206\u6cd5\uff09\u6570\u636e\u7684\u5206\u7ec4"}),"\n",(0,i.jsx)(e.li,{children:"File Trailer\uff1a\u68c0\u9a8c\u548c\u5b57\u6bb5\uff0c\u5728\u5237\u810f\u8fc7\u7a0b\u4e2d\uff0c\u9875\u9996\u548c\u9875\u5c3e\u7684\u6821\u9a8c\u548c\u4e00\u81f4\u624d\u80fd\u8bf4\u660e\u9875\u9762\u5237\u65b0\u6210\u529f\uff0c\u4e8c\u8005\u4e0d\u540c\u8bf4\u660e\u5237\u65b0\u671f\u95f4\u53d1\u751f\u4e86\u9519\u8bef\uff1bLSN \u5b57\u6bb5\uff0c\u4e5f\u662f\u7528\u6765\u6821\u9a8c\u9875\u9762\u7684\u5b8c\u6574\u6027"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u9875\u4e2d\u5305\u542b\u6570\u636e\u884c\uff0c\u6570\u636e\u7684\u5b58\u50a8\u662f\u57fa\u4e8e\u6570\u636e\u884c\u7684\uff0c\u6570\u636e\u884c\u6709 next_record \u5c5e\u6027\u6307\u5411\u4e0b\u4e00\u4e2a\u884c\u6570\u636e\uff0c\u6240\u4ee5\u662f\u53ef\u4ee5\u904d\u5386\u7684\uff0c\u4f46\u662f\u4e00\u7ec4\u6570\u636e\u81f3\u591a 8 \u4e2a\u884c\uff0c\u901a\u8fc7 Page Directory \u5148\u5b9a\u4f4d\u5230\u7ec4\uff0c\u7136\u540e\u904d\u5386\u83b7\u53d6\u6240\u9700\u7684\u6570\u636e\u884c\u5373\u53ef"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u884c\u4e2d\u6709\u4e09\u4e2a\u9690\u85cf\u5b57\u6bb5\uff1atrx_id\u3001roll_pointer\u3001row_id\uff08\u5728\u4e8b\u52a1\u7ae0\u8282\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\u5b83\u4eec\u7684\u4f5c\u7528\uff09"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"btree",children:"BTree"}),"\n",(0,i.jsx)(e.p,{children:"BTree \u7684\u7d22\u5f15\u7c7b\u578b\u662f\u57fa\u4e8e B+Tree \u6811\u578b\u6570\u636e\u7ed3\u6784\u7684\uff0cB+Tree \u53c8\u662f BTree \u6570\u636e\u7ed3\u6784\u7684\u53d8\u79cd\uff0c\u7528\u5728\u6570\u636e\u5e93\u548c\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u7279\u70b9\u662f\u80fd\u591f\u4fdd\u6301\u6570\u636e\u7a33\u5b9a\u6709\u5e8f"}),"\n",(0,i.jsx)(e.p,{children:"BTree \u53c8\u53eb\u591a\u8def\u5e73\u8861\u641c\u7d22\u6811\uff0c\u4e00\u9897 m \u53c9\u7684 BTree \u7279\u6027\u5982\u4e0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6811\u4e2d\u6bcf\u4e2a\u8282\u70b9\u6700\u591a\u5305\u542b m \u4e2a\u5b69\u5b50"}),"\n",(0,i.jsx)(e.li,{children:"\u9664\u6839\u8282\u70b9\u4e0e\u53f6\u5b50\u8282\u70b9\u5916\uff0c\u6bcf\u4e2a\u8282\u70b9\u81f3\u5c11\u6709 [ceil(m/2)] \u4e2a\u5b69\u5b50"}),"\n",(0,i.jsx)(e.li,{children:"\u82e5\u6839\u8282\u70b9\u4e0d\u662f\u53f6\u5b50\u8282\u70b9\uff0c\u5219\u81f3\u5c11\u6709\u4e24\u4e2a\u5b69\u5b50"}),"\n",(0,i.jsx)(e.li,{children:"\u6240\u6709\u7684\u53f6\u5b50\u8282\u70b9\u90fd\u5728\u540c\u4e00\u5c42"}),"\n",(0,i.jsx)(e.li,{children:"\u6bcf\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\u7531 n \u4e2a key \u4e0e n+1 \u4e2a\u6307\u9488\u7ec4\u6210\uff0c\u5176\u4e2d [ceil(m/2)-1] <= n <= m-1"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"5 \u53c9\uff0ckey \u7684\u6570\u91cf [ceil(m/2)-1] <= n <= m-1 \u4e3a 2 <= n <=4 \uff0c\u5f53 n>4 \u65f6\u4e2d\u95f4\u8282\u70b9\u5206\u88c2\u5230\u7236\u8282\u70b9\uff0c\u4e24\u8fb9\u8282\u70b9\u5206\u88c2"}),"\n",(0,i.jsx)(e.p,{children:"\u63d2\u5165 C N G A H E K Q M F W L T Z D P R X Y S \u6570\u636e\u7684\u5de5\u4f5c\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u63d2\u5165\u524d 4 \u4e2a\u5b57\u6bcd C N G A"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(94181).A+"",width:"253",height:"63"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u63d2\u5165 H\uff0cn>4\uff0c\u4e2d\u95f4\u5143\u7d20 G \u5b57\u6bcd\u5411\u4e0a\u5206\u88c2\u5230\u65b0\u7684\u8282\u70b9"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(75406).A+"",width:"396",height:"169"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u63d2\u5165 E\u3001K\u3001Q \u4e0d\u9700\u8981\u5206\u88c2"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(49047).A+"",width:"443",height:"214"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u63d2\u5165 M\uff0c\u4e2d\u95f4\u5143\u7d20 M \u5b57\u6bcd\u5411\u4e0a\u5206\u88c2\u5230\u7236\u8282\u70b9 G"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(85784).A+"",width:"460",height:"212"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u63d2\u5165 F\uff0cW\uff0cL\uff0cT \u4e0d\u9700\u8981\u5206\u88c2"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(58497).A+"",width:"616",height:"206"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u63d2\u5165 Z\uff0c\u4e2d\u95f4\u5143\u7d20 T \u5411\u4e0a\u5206\u88c2\u5230\u7236\u8282\u70b9\u4e2d"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(9514).A+"",width:"674",height:"207"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u63d2\u5165 D\uff0c\u4e2d\u95f4\u5143\u7d20 D \u5411\u4e0a\u5206\u88c2\u5230\u7236\u8282\u70b9\u4e2d\uff0c\u7136\u540e\u63d2\u5165 P\uff0cR\uff0cX\uff0cY \u4e0d\u9700\u8981\u5206\u88c2"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(60275).A+"",width:"671",height:"177"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6700\u540e\u63d2\u5165 S\uff0cNPQR \u8282\u70b9 n>5\uff0c\u4e2d\u95f4\u8282\u70b9 Q \u5411\u4e0a\u5206\u88c2\uff0c\u4f46\u5206\u88c2\u540e\u7236\u8282\u70b9 DGMT \u7684 n>5\uff0c\u4e2d\u95f4\u8282\u70b9 M \u5411\u4e0a\u5206\u88c2"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(64980).A+"",width:"669",height:"298"})}),"\n",(0,i.jsxs)(e.p,{children:["BTree \u6811\u5c31\u5df2\u7ecf\u6784\u5efa\u5b8c\u6210\u4e86\uff0cBTree \u6811\u548c\u4e8c\u53c9\u6811\u76f8\u6bd4\uff0c \u67e5\u8be2\u6570\u636e\u7684\u6548\u7387\u66f4\u9ad8\uff0c \u56e0\u4e3a\u5bf9\u4e8e\u76f8\u540c\u7684\u6570\u636e\u91cf\u6765\u8bf4\uff0c",(0,i.jsx)(e.strong,{children:"BTree \u7684\u5c42\u7ea7\u7ed3\u6784\u6bd4\u4e8c\u53c9\u6811\u5c11"}),"\uff0c\u6240\u4ee5\u641c\u7d22\u901f\u5ea6\u5feb"]}),"\n",(0,i.jsxs)(e.p,{children:["BTree \u7ed3\u6784\u7684\u6570\u636e\u53ef\u4ee5\u8ba9\u7cfb\u7edf\u9ad8\u6548\u7684\u627e\u5230\u6570\u636e\u6240\u5728\u7684\u78c1\u76d8\u5757\uff0c\u5b9a\u4e49\u4e00\u6761\u8bb0\u5f55\u4e3a\u4e00\u4e2a\u4e8c\u5143\u7ec4 [key, data] \uff0ckey \u4e3a\u8bb0\u5f55\u7684\u952e\u503c\uff0c\u5bf9\u5e94\u8868\u4e2d\u7684\u4e3b\u952e\u503c\uff0cdata \u4e3a\u4e00\u884c\u8bb0\u5f55\u4e2d\u9664\u4e3b\u952e\u5916\u7684\u6570\u636e\u3002\u5bf9\u4e8e\u4e0d\u540c\u7684\u8bb0\u5f55\uff0ckey \u503c\u4e92\u4e0d\u76f8\u540c\uff0cBTree \u4e2d\u7684\u6bcf\u4e2a\u8282\u70b9\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u53ef\u4ee5\u5305\u542b\u5927\u91cf\u7684\u5173\u952e\u5b57\u4fe1\u606f\u548c\u5206\u652f\n",(0,i.jsx)(e.img,{src:s(95839).A+"",width:"1008",height:"343"})]}),"\n",(0,i.jsx)(e.p,{children:"\u7f3a\u70b9\uff1a\u5f53\u8fdb\u884c\u8303\u56f4\u67e5\u627e\u65f6\u4f1a\u51fa\u73b0\u56de\u65cb\u67e5\u627e"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"btree-1",children:"B+Tree"}),"\n",(0,i.jsx)(e.h5,{id:"\u6570\u636e\u7ed3\u6784",children:"\u6570\u636e\u7ed3\u6784"}),"\n",(0,i.jsx)(e.p,{children:"BTree \u6570\u636e\u7ed3\u6784\u4e2d\u6bcf\u4e2a\u8282\u70b9\u4e2d\u4e0d\u4ec5\u5305\u542b\u6570\u636e\u7684 key \u503c\uff0c\u8fd8\u6709 data \u503c\u3002\u78c1\u76d8\u4e2d\u6bcf\u4e00\u9875\u7684\u5b58\u50a8\u7a7a\u95f4\u662f\u6709\u9650\u7684\uff0c\u5982\u679c data \u6570\u636e\u8f83\u5927\u65f6\u5c06\u4f1a\u5bfc\u81f4\u6bcf\u4e2a\u8282\u70b9\uff08\u5373\u4e00\u4e2a\u9875\uff09\u80fd\u5b58\u50a8\u7684 key \u7684\u6570\u91cf\u5f88\u5c0f\uff0c\u5f53\u5b58\u50a8\u7684\u6570\u636e\u91cf\u5f88\u5927\u65f6\u540c\u6837\u4f1a\u5bfc\u81f4 B-Tree \u7684\u6df1\u5ea6\u8f83\u5927\uff0c\u589e\u5927\u67e5\u8be2\u65f6\u7684\u78c1\u76d8 I/O \u6b21\u6570\uff0c\u8fdb\u800c\u5f71\u54cd\u67e5\u8be2\u6548\u7387\uff0c\u6240\u4ee5\u5f15\u5165 B+Tree"}),"\n",(0,i.jsx)(e.p,{children:"B+Tree \u4e3a BTree \u7684\u53d8\u79cd\uff0cB+Tree \u4e0e BTree \u7684\u533a\u522b\u4e3a\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"n \u53c9 B+Tree \u6700\u591a\u542b\u6709 n \u4e2a key\uff08\u54c8\u5e0c\u503c\uff09\uff0c\u800c BTree \u6700\u591a\u542b\u6709 n-1 \u4e2a key"}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u6240\u6709",(0,i.jsx)(e.strong,{children:"\u975e\u53f6\u5b50\u8282\u70b9\u53ea\u5b58\u50a8\u952e\u503c key"})," \u4fe1\u606f\uff0c\u53ea\u8fdb\u884c\u6570\u636e\u7d22\u5f15\uff0c\u4f7f\u6bcf\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\u6240\u80fd\u4fdd\u5b58\u7684\u5173\u952e\u5b57\u5927\u5927\u589e\u52a0"]}),"\n",(0,i.jsxs)(e.li,{children:["\u6240\u6709",(0,i.jsx)(e.strong,{children:"\u6570\u636e\u90fd\u5b58\u50a8\u5728\u53f6\u5b50\u8282\u70b9"}),"\uff0c\u6240\u4ee5\u6bcf\u6b21\u6570\u636e\u67e5\u8be2\u7684\u6b21\u6570\u90fd\u4e00\u6837"]}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.strong,{children:"\u53f6\u5b50\u8282\u70b9\u6309\u7167 key \u5927\u5c0f\u987a\u5e8f\u6392\u5217\uff0c\u5de6\u8fb9\u7ed3\u5c3e\u6570\u636e\u90fd\u4f1a\u4fdd\u5b58\u53f3\u8fb9\u8282\u70b9\u5f00\u59cb\u6570\u636e\u7684\u6307\u9488\uff0c\u5f62\u6210\u4e00\u4e2a\u94fe\u8868"})}),"\n",(0,i.jsxs)(e.li,{children:["\u6240\u6709\u8282\u70b9\u4e2d\u7684 key \u5728\u53f6\u5b50\u8282\u70b9\u4e2d\u4e5f\u5b58\u5728\uff08\u6bd4\u5982 5)\uff0c",(0,i.jsx)(e.strong,{children:"key \u5141\u8bb8\u91cd\u590d"}),"\uff0cB \u6811\u4e0d\u540c\u8282\u70b9\u4e0d\u5b58\u5728\u91cd\u590d\u7684 key"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(8170).A+"",width:"1150",height:"608"})}),"\n",(0,i.jsx)(e.p,{children:"B* \u6811\uff1a\u662f B+ \u6811\u7684\u53d8\u4f53\uff0c\u5728 B+ \u6811\u7684\u975e\u6839\u548c\u975e\u53f6\u5b50\u7ed3\u70b9\u518d\u589e\u52a0\u6307\u5411\u5144\u5f1f\u7684\u6307\u9488"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u4f18\u5316\u7ed3\u6784",children:"\u4f18\u5316\u7ed3\u6784"}),"\n",(0,i.jsxs)(e.p,{children:["MySQL \u7d22\u5f15\u6570\u636e\u7ed3\u6784\u5bf9\u7ecf\u5178\u7684 B+Tree \u8fdb\u884c\u4e86\u4f18\u5316\uff0c\u5728\u539f B+Tree \u7684\u57fa\u7840\u4e0a\uff0c\u589e\u52a0\u4e00\u4e2a\u6307\u5411\u76f8\u90bb\u53f6\u5b50\u8282\u70b9\u7684\u94fe\u8868\u6307\u9488\uff0c\u5c31\u5f62\u6210\u4e86\u5e26\u6709\u987a\u5e8f\u6307\u9488\u7684 B+Tree\uff0c",(0,i.jsx)(e.strong,{children:"\u63d0\u9ad8\u533a\u95f4\u8bbf\u95ee\u7684\u6027\u80fd\uff0c\u9632\u6b62\u56de\u65cb\u67e5\u627e"})]}),"\n",(0,i.jsx)(e.p,{children:"\u533a\u95f4\u8bbf\u95ee\u7684\u610f\u601d\u662f\u8bbf\u95ee\u7d22\u5f15\u4e3a 5 - 15 \u7684\u6570\u636e\uff0c\u53ef\u4ee5\u76f4\u63a5\u6839\u636e\u76f8\u90bb\u8282\u70b9\u7684\u6307\u9488\u904d\u5386"}),"\n",(0,i.jsxs)(e.p,{children:["B+ \u6811\u7684",(0,i.jsx)(e.strong,{children:"\u53f6\u5b50\u8282\u70b9\u662f\u6570\u636e\u9875"}),"\uff08page\uff09\uff0c\u4e00\u4e2a\u9875\u91cc\u9762\u53ef\u4ee5\u5b58\u591a\u4e2a\u6570\u636e\u884c"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(58980).A+"",width:"1022",height:"376"})}),"\n",(0,i.jsxs)(e.p,{children:["\u901a\u5e38\u5728 B+Tree \u4e0a\u6709\u4e24\u4e2a\u5934\u6307\u9488\uff0c",(0,i.jsx)(e.strong,{children:"\u4e00\u4e2a\u6307\u5411\u6839\u8282\u70b9\uff0c\u53e6\u4e00\u4e2a\u6307\u5411\u5173\u952e\u5b57\u6700\u5c0f\u7684\u53f6\u5b50\u8282\u70b9"}),"\uff0c\u800c\u4e14\u6240\u6709\u53f6\u5b50\u8282\u70b9\uff08\u5373\u6570\u636e\u8282\u70b9\uff09\u4e4b\u95f4\u662f\u4e00\u79cd\u94fe\u5f0f\u73af\u7ed3\u6784\u3002\u53ef\u4ee5\u5bf9 B+Tree \u8fdb\u884c\u4e24\u79cd\u67e5\u627e\u8fd0\u7b97\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6709\u8303\u56f4\uff1a\u5bf9\u4e8e\u4e3b\u952e\u7684\u8303\u56f4\u67e5\u627e\u548c\u5206\u9875\u67e5\u627e"}),"\n",(0,i.jsx)(e.li,{children:"\u6709\u987a\u5e8f\uff1a\u4ece\u6839\u8282\u70b9\u5f00\u59cb\uff0c\u8fdb\u884c\u968f\u673a\u67e5\u627e\uff0c\u987a\u5e8f\u67e5\u627e"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"InnoDB \u4e2d\u6bcf\u4e2a\u6570\u636e\u9875\u7684\u5927\u5c0f\u9ed8\u8ba4\u662f 16KB\uff0c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u7d22\u5f15\u884c\uff1a\u4e00\u822c\u8868\u7684\u4e3b\u952e\u7c7b\u578b\u4e3a INT\uff084 \u5b57\u8282\uff09\u6216 BIGINT\uff088 \u5b57\u8282\uff09\uff0c\u6307\u9488\u5927\u5c0f\u5728 InnoDB \u4e2d\u8bbe\u7f6e\u4e3a 6 \u5b57\u8282\u8282\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e00\u4e2a\u9875\u5927\u6982\u5b58\u50a8 16KB/(8B+6B)=1K \u4e2a\u952e\u503c\uff08\u4f30\u503c\uff09\u3002\u5219\u4e00\u4e2a\u6df1\u5ea6\u4e3a 3 \u7684 B+Tree \u7d22\u5f15\u53ef\u4ee5\u7ef4\u62a4 ",(0,i.jsx)(e.code,{children:"10^3 * 10^3 * 10^3 = 10\u4ebf"})," \u6761\u8bb0\u5f55"]}),"\n",(0,i.jsx)(e.li,{children:"\u6570\u636e\u884c\uff1a\u4e00\u884c\u6570\u636e\u7684\u5927\u5c0f\u53ef\u80fd\u662f 1k\uff0c\u4e00\u4e2a\u6570\u636e\u9875\u53ef\u4ee5\u5b58\u50a8 16 \u884c"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5b9e\u9645\u60c5\u51b5\u4e2d\u6bcf\u4e2a\u8282\u70b9\u53ef\u80fd\u4e0d\u80fd\u586b\u5145\u6ee1\uff0c\u56e0\u6b64\u5728\u6570\u636e\u5e93\u4e2d\uff0cB+Tree \u7684\u9ad8\u5ea6\u4e00\u822c\u90fd\u5728 2-4 \u5c42\u3002MySQL \u7684 InnoDB \u5b58\u50a8\u5f15\u64ce\u5728\u8bbe\u8ba1\u65f6\u662f",(0,i.jsx)(e.strong,{children:"\u5c06\u6839\u8282\u70b9\u5e38\u9a7b\u5185\u5b58\u7684"}),"\uff0c\u4e5f\u5c31\u662f\u8bf4\u67e5\u627e\u67d0\u4e00\u952e\u503c\u7684\u884c\u8bb0\u5f55\u65f6\u6700\u591a\u53ea\u9700\u8981 1~3 \u6b21\u78c1\u76d8 I/O \u64cd\u4f5c"]}),"\n",(0,i.jsx)(e.p,{children:"B+Tree \u4f18\u70b9\uff1a\u63d0\u9ad8\u67e5\u8be2\u901f\u5ea6\uff0c\u51cf\u5c11\u78c1\u76d8\u7684 IO \u6b21\u6570\uff0c\u6811\u5f62\u7ed3\u6784\u8f83\u5c0f"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u7d22\u5f15\u7ef4\u62a4",children:"\u7d22\u5f15\u7ef4\u62a4"}),"\n",(0,i.jsx)(e.p,{children:"B+ \u6811\u4e3a\u4e86\u4fdd\u6301\u7d22\u5f15\u7684\u6709\u5e8f\u6027\uff0c\u5728\u63d2\u5165\u65b0\u503c\u7684\u65f6\u5019\u9700\u8981\u505a\u76f8\u5e94\u7684\u7ef4\u62a4"}),"\n",(0,i.jsx)(e.p,{children:"\u6bcf\u4e2a\u7d22\u5f15\u4e2d\u6bcf\u4e2a\u5757\u5b58\u50a8\u5728\u78c1\u76d8\u9875\u4e2d\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u6240\u5728\u7684\u6570\u636e\u9875\u5df2\u7ecf\u6ee1\u4e86\uff0c\u8fd9\u65f6\u5019\u9700\u8981\u7533\u8bf7\u4e00\u4e2a\u65b0\u7684\u6570\u636e\u9875\uff0c\u7136\u540e\u632a\u52a8\u90e8\u5206\u6570\u636e\u8fc7\u53bb\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u79f0\u4e3a",(0,i.jsx)(e.strong,{children:"\u9875\u5206\u88c2"}),"\uff0c\u539f\u672c\u653e\u5728\u4e00\u4e2a\u9875\u7684\u6570\u636e\u73b0\u5728\u5206\u5230\u4e24\u4e2a\u9875\u4e2d\uff0c\u964d\u4f4e\u4e86\u7a7a\u95f4\u5229\u7528\u7387"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5f53\u76f8\u90bb\u4e24\u4e2a\u9875\u7531\u4e8e\u5220\u9664\u4e86\u6570\u636e\uff0c\u5229\u7528\u7387\u5f88\u4f4e\u4e4b\u540e\uff0c\u4f1a\u5c06\u6570\u636e\u9875\u505a",(0,i.jsx)(e.strong,{children:"\u9875\u5408\u5e76"}),"\uff0c\u5408\u5e76\u7684\u8fc7\u7a0b\u53ef\u4ee5\u8ba4\u4e3a\u662f\u5206\u88c2\u8fc7\u7a0b\u7684\u9006\u8fc7\u7a0b"]}),"\n",(0,i.jsx)(e.li,{children:"\u8fd9\u4e24\u4e2a\u60c5\u51b5\u90fd\u662f\u7531 B+ \u6811\u7684\u7ed3\u6784\u51b3\u5b9a\u7684"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u822c\u9009\u7528\u6570\u636e\u5c0f\u7684\u5b57\u6bb5\u505a\u7d22\u5f15\uff0c\u5b57\u6bb5\u957f\u5ea6\u8d8a\u5c0f\uff0c\u666e\u901a\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u5c31\u8d8a\u5c0f\uff0c\u666e\u901a\u7d22\u5f15\u5360\u7528\u7684\u7a7a\u95f4\u4e5f\u5c31\u8d8a\u5c0f"}),"\n",(0,i.jsxs)(e.p,{children:["\u81ea\u589e\u4e3b\u952e\u7684\u63d2\u5165\u6570\u636e\u6a21\u5f0f\uff0c\u53ef\u4ee5\u8ba9\u4e3b\u952e\u7d22\u5f15\u5c3d\u91cf\u5730\u4fdd\u6301\u9012\u589e\u987a\u5e8f\u63d2\u5165\uff0c\u4e0d\u6d89\u53ca\u5230\u632a\u52a8\u5176\u4ed6\u8bb0\u5f55\uff0c",(0,i.jsx)(e.strong,{children:"\u907f\u514d\u4e86\u9875\u5206\u88c2"}),"\uff0c\u9875\u5206\u88c2\u7684\u76ee\u7684\u5c31\u662f\u4fdd\u8bc1\u540e\u4e00\u4e2a\u6570\u636e\u9875\u4e2d\u7684\u6240\u6709\u884c\u4e3b\u952e\u503c\u6bd4\u524d\u4e00\u4e2a\u6570\u636e\u9875\u4e2d\u4e3b\u952e\u503c\u5927"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://developer.aliyun.com/article/919861",children:"https://developer.aliyun.com/article/919861"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u8bbe\u8ba1\u539f\u5219",children:"\u8bbe\u8ba1\u539f\u5219"}),"\n",(0,i.jsx)(e.p,{children:"\u7d22\u5f15\u7684\u8bbe\u8ba1\u53ef\u4ee5\u9075\u5faa\u4e00\u4e9b\u5df2\u6709\u7684\u539f\u5219\uff0c\u521b\u5efa\u7d22\u5f15\u7684\u65f6\u5019\u8bf7\u5c3d\u91cf\u8003\u8651\u7b26\u5408\u8fd9\u4e9b\u539f\u5219\uff0c\u4fbf\u4e8e\u63d0\u5347\u7d22\u5f15\u7684\u4f7f\u7528\u6548\u7387"}),"\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u7d22\u5f15\u65f6\u7684\u539f\u5219\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5bf9\u67e5\u8be2\u9891\u6b21\u8f83\u9ad8\uff0c\u4e14\u6570\u636e\u91cf\u6bd4\u8f83\u5927\u7684\u8868\u5efa\u7acb\u7d22\u5f15"}),"\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u552f\u4e00\u7d22\u5f15\uff0c\u533a\u5206\u5ea6\u8d8a\u9ad8\uff0c\u4f7f\u7528\u7d22\u5f15\u7684\u6548\u7387\u8d8a\u9ad8"}),"\n",(0,i.jsx)(e.li,{children:"\u7d22\u5f15\u5b57\u6bb5\u7684\u9009\u62e9\uff0c\u6700\u4f73\u5019\u9009\u5217\u5e94\u5f53\u4ece where \u5b50\u53e5\u7684\u6761\u4ef6\u4e2d\u63d0\u53d6\uff0c\u4f7f\u7528\u8986\u76d6\u7d22\u5f15"}),"\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u77ed\u7d22\u5f15\uff0c\u7d22\u5f15\u521b\u5efa\u4e4b\u540e\u4e5f\u662f\u4f7f\u7528\u786c\u76d8\u6765\u5b58\u50a8\u7684\uff0c\u56e0\u6b64\u63d0\u5347\u7d22\u5f15\u8bbf\u95ee\u7684 I/O \u6548\u7387\uff0c\u4e5f\u53ef\u4ee5\u63d0\u5347\u603b\u4f53\u7684\u8bbf\u95ee\u6548\u7387\u3002\u5047\u5982\u6784\u6210\u7d22\u5f15\u7684\u5b57\u6bb5\u603b\u957f\u5ea6\u6bd4\u8f83\u77ed\uff0c\u90a3\u4e48\u5728\u7ed9\u5b9a\u5927\u5c0f\u7684\u5b58\u50a8\u5757\u5185\u53ef\u4ee5\u5b58\u50a8\u66f4\u591a\u7684\u7d22\u5f15\u503c\uff0c\u76f8\u5e94\u7684\u53ef\u4ee5\u6709\u6548\u7684\u63d0\u5347 MySQL \u8bbf\u95ee\u7d22\u5f15\u7684 I/O \u6548\u7387"}),"\n",(0,i.jsx)(e.li,{children:"\u7d22\u5f15\u53ef\u4ee5\u6709\u6548\u7684\u63d0\u5347\u67e5\u8be2\u6570\u636e\u7684\u6548\u7387\uff0c\u4f46\u7d22\u5f15\u6570\u91cf\u4e0d\u662f\u591a\u591a\u76ca\u5584\uff0c\u7d22\u5f15\u8d8a\u591a\uff0c\u7ef4\u62a4\u7d22\u5f15\u7684\u4ee3\u4ef7\u8d8a\u9ad8\u3002\u5bf9\u4e8e\u63d2\u5165\u3001\u66f4\u65b0\u3001\u5220\u9664\u7b49 DML \u64cd\u4f5c\u6bd4\u8f83\u9891\u7e41\u7684\u8868\u6765\u8bf4\uff0c\u7d22\u5f15\u8fc7\u591a\uff0c\u4f1a\u5f15\u5165\u76f8\u5f53\u9ad8\u7684\u7ef4\u62a4\u4ee3\u4ef7\uff0c\u964d\u4f4e DML \u64cd\u4f5c\u7684\u6548\u7387\uff0c\u589e\u52a0\u76f8\u5e94\u64cd\u4f5c\u7684\u65f6\u95f4\u6d88\u8017\uff1b\u53e6\u5916\u7d22\u5f15\u8fc7\u591a\u7684\u8bdd\uff0cMySQL \u4e5f\u4f1a\u72af\u9009\u62e9\u56f0\u96be\u75c5\uff0c\u867d\u7136\u6700\u7ec8\u4ecd\u7136\u4f1a\u627e\u5230\u4e00\u4e2a\u53ef\u7528\u7684\u7d22\u5f15\uff0c\u4f46\u63d0\u9ad8\u4e86\u9009\u62e9\u7684\u4ee3\u4ef7"}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["MySQL \u5efa\u7acb\u8054\u5408\u7d22\u5f15\u65f6\u4f1a\u9075\u5b88",(0,i.jsx)(e.strong,{children:"\u6700\u5de6\u524d\u7f00\u5339\u914d\u539f\u5219"}),"\uff0c\u5373\u6700\u5de6\u4f18\u5148\uff0c\u5728\u68c0\u7d22\u6570\u636e\u65f6\u4ece\u8054\u5408\u7d22\u5f15\u7684\u6700\u5de6\u8fb9\u5f00\u59cb\u5339\u914d"]}),"\n",(0,i.jsxs)(e.p,{children:["N \u4e2a\u5217\u7ec4\u5408\u800c\u6210\u7684\u7ec4\u5408\u7d22\u5f15\uff0c\u76f8\u5f53\u4e8e\u521b\u5efa\u4e86 N \u4e2a\u7d22\u5f15\uff0c\u5982\u679c\u67e5\u8be2\u65f6 where \u53e5\u4e2d\u4f7f\u7528\u4e86\u7ec4\u6210\u8be5\u7d22\u5f15\u7684",(0,i.jsx)(e.strong,{children:"\u524d"}),"\u51e0\u4e2a\u5b57\u6bb5\uff0c\u90a3\u4e48\u8fd9\u6761\u67e5\u8be2 SQL \u53ef\u4ee5\u5229\u7528\u7ec4\u5408\u7d22\u5f15\u6765\u63d0\u5347\u67e5\u8be2\u6548\u7387"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u5bf9name\u3001address\u3001phone\u5217\u5efa\u4e00\u4e2a\u8054\u5408\u7d22\u5f15\nALTER TABLE user ADD INDEX index_three(name,address,phone);\n-- \u67e5\u8be2\u8bed\u53e5\u6267\u884c\u65f6\u4f1a\u4f9d\u7167\u6700\u5de6\u524d\u7f00\u5339\u914d\u539f\u5219\uff0c\u68c0\u7d22\u65f6\u5206\u522b\u4f1a\u4f7f\u7528\u7d22\u5f15\u8fdb\u884c\u6570\u636e\u5339\u914d\u3002\n(name,address,phone)\n(name,address)\n(name,phone)\t-- \u53ea\u6709name\u5b57\u6bb5\u8d70\u4e86\u7d22\u5f15\n(name)\n\n-- \u7d22\u5f15\u7684\u5b57\u6bb5\u53ef\u4ee5\u662f\u4efb\u610f\u987a\u5e8f\u7684\uff0c\u4f18\u5316\u5668\u4f1a\u5e2e\u52a9\u6211\u4eec\u8c03\u6574\u987a\u5e8f\uff0c\u4e0b\u9762\u7684SQL\u8bed\u53e5\u53ef\u4ee5\u547d\u4e2d\u7d22\u5f15\nSELECT * FROM user WHERE address = '\u5317\u4eac' AND phone = '12345' AND name = '\u5f20\u4e09';\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u5982\u679c\u8054\u5408\u7d22\u5f15\u4e2d\u6700\u5de6\u8fb9\u7684\u5217\u4e0d\u5305\u542b\u5728\u6761\u4ef6\u67e5\u8be2\u4e2d\uff0cSQL\u8bed\u53e5\u5c31\u4e0d\u4f1a\u547d\u4e2d\u7d22\u5f15\uff0c\u6bd4\u5982\uff1a\nSELECT * FROM user WHERE address = '\u5317\u4eac' AND phone = '12345'; \n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u54ea\u4e9b\u60c5\u51b5\u4e0d\u8981\u5efa\u7acb\u7d22\u5f15\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8bb0\u5f55\u592a\u5c11\u7684\u8868"}),"\n",(0,i.jsx)(e.li,{children:"\u7ecf\u5e38\u589e\u5220\u6539\u7684\u8868"}),"\n",(0,i.jsx)(e.li,{children:"\u9891\u7e41\u66f4\u65b0\u7684\u5b57\u6bb5\u4e0d\u9002\u5408\u521b\u5efa\u7d22\u5f15"}),"\n",(0,i.jsx)(e.li,{children:"where \u6761\u4ef6\u91cc\u7528\u4e0d\u5230\u7684\u5b57\u6bb5\u4e0d\u521b\u5efa\u7d22\u5f15"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u7d22\u5f15\u4f18\u5316",children:"\u7d22\u5f15\u4f18\u5316"}),"\n",(0,i.jsx)(e.h4,{id:"\u8986\u76d6\u7d22\u5f15",children:"\u8986\u76d6\u7d22\u5f15"}),"\n",(0,i.jsx)(e.p,{children:"\u8986\u76d6\u7d22\u5f15\uff1a\u5305\u542b\u6240\u6709\u6ee1\u8db3\u67e5\u8be2\u9700\u8981\u7684\u6570\u636e\u7684\u7d22\u5f15\uff08SELECT \u540e\u9762\u7684\u5b57\u6bb5\u521a\u597d\u662f\u7d22\u5f15\u5b57\u6bb5\uff09\uff0c\u53ef\u4ee5\u5229\u7528\u8be5\u7d22\u5f15\u8fd4\u56de SELECT \u5217\u8868\u7684\u5b57\u6bb5\uff0c\u800c\u4e0d\u5fc5\u6839\u636e\u7d22\u5f15\u53bb\u805a\u7c07\u7d22\u5f15\u4e0a\u8bfb\u53d6\u6570\u636e\u6587\u4ef6"}),"\n",(0,i.jsx)(e.p,{children:"\u56de\u8868\u67e5\u8be2\uff1a\u8981\u67e5\u627e\u7684\u5b57\u6bb5\u4e0d\u5728\u975e\u4e3b\u952e\u7d22\u5f15\u6811\u4e0a\u65f6\uff0c\u9700\u8981\u901a\u8fc7\u53f6\u5b50\u8282\u70b9\u7684\u4e3b\u952e\u503c\u53bb\u4e3b\u952e\u7d22\u5f15\u4e0a\u83b7\u53d6\u5bf9\u5e94\u7684\u884c\u6570\u636e"}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u8986\u76d6\u7d22\u5f15\uff0c\u9632\u6b62\u56de\u8868\u67e5\u8be2\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8868 user \u4e3b\u952e\u4e3a id\uff0c\u666e\u901a\u7d22\u5f15\u4e3a age\uff0c\u67e5\u8be2\u8bed\u53e5\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM user WHERE age = 30;\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u8fc7\u7a0b\uff1a\u5148\u901a\u8fc7\u666e\u901a\u7d22\u5f15 age=30 \u5b9a\u4f4d\u5230\u4e3b\u952e\u503c id=1\uff0c\u518d\u901a\u8fc7\u805a\u96c6\u7d22\u5f15 id=1 \u5b9a\u4f4d\u5230\u884c\u8bb0\u5f55\u6570\u636e\uff0c\u9700\u8981\u4e24\u6b21\u626b\u63cf B+ \u6811"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u8986\u76d6\u7d22\u5f15\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DROP INDEX idx_age ON user;\nCREATE INDEX idx_age_name ON user(age,name);\nSELECT id,age FROM user WHERE age = 30;\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u4e00\u68f5\u7d22\u5f15\u6811\u4e0a\u5c31\u80fd\u83b7\u53d6\u67e5\u8be2\u6240\u9700\u7684\u6570\u636e\uff0c\u65e0\u9700\u56de\u8868\u901f\u5ea6\u66f4\u5feb"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u8986\u76d6\u7d22\u5f15\uff0c\u8981\u6ce8\u610f SELECT \u5217\u8868\u4e2d\u53ea\u53d6\u51fa\u9700\u8981\u7684\u5217\uff0c\u4e0d\u53ef\u7528 SELECT *\uff0c\u6240\u6709\u5b57\u6bb5\u4e00\u8d77\u505a\u7d22\u5f15\u4f1a\u5bfc\u81f4\u7d22\u5f15\u6587\u4ef6\u8fc7\u5927\uff0c\u67e5\u8be2\u6027\u80fd\u4e0b\u964d"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u7d22\u5f15\u4e0b\u63a8",children:"\u7d22\u5f15\u4e0b\u63a8"}),"\n",(0,i.jsx)(e.p,{children:"\u7d22\u5f15\u6761\u4ef6\u4e0b\u63a8\u4f18\u5316\uff08Index Condition Pushdown\uff0cICP\uff09\u662f MySQL5.6 \u6dfb\u52a0\uff0c\u53ef\u4ee5\u5728\u7d22\u5f15\u904d\u5386\u8fc7\u7a0b\u4e2d\uff0c\u5bf9\u7d22\u5f15\u4e2d\u5305\u542b\u7684\u5b57\u6bb5\u5148\u505a\u5224\u65ad\uff0c\u76f4\u63a5\u8fc7\u6ee4\u6389\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u8bb0\u5f55\uff0c\u51cf\u5c11\u56de\u8868\u6b21\u6570"}),"\n",(0,i.jsx)(e.p,{children:"\u7d22\u5f15\u4e0b\u63a8\u5145\u5206\u5229\u7528\u4e86\u7d22\u5f15\u4e2d\u7684\u6570\u636e\uff0c\u5728\u67e5\u8be2\u51fa\u6574\u884c\u6570\u636e\u4e4b\u524d\u8fc7\u6ee4\u6389\u65e0\u6548\u7684\u6570\u636e\uff0c\u518d\u53bb\u4e3b\u952e\u7d22\u5f15\u6811\u4e0a\u67e5\u627e"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u4e0d\u4f7f\u7528\u7d22\u5f15\u4e0b\u63a8\u4f18\u5316\u65f6\u5b58\u50a8\u5f15\u64ce\u901a\u8fc7\u7d22\u5f15\u68c0\u7d22\u5230\u6570\u636e\uff0c\u7136\u540e\u56de\u8868\u67e5\u8be2\u8bb0\u5f55\u8fd4\u56de\u7ed9 Server \u5c42\uff0c",(0,i.jsx)(e.strong,{children:"\u670d\u52a1\u5668\u5224\u65ad\u6570\u636e\u662f\u5426\u7b26\u5408\u6761\u4ef6"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(10965).A+"",width:"740",height:"323"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u4f7f\u7528\u7d22\u5f15\u4e0b\u63a8\u4f18\u5316\u65f6\uff0c\u5982\u679c",(0,i.jsx)(e.strong,{children:"\u5b58\u5728\u67d0\u4e9b\u88ab\u7d22\u5f15\u7684\u5217\u7684\u5224\u65ad\u6761\u4ef6"}),"\u65f6\uff0c\u7531\u5b58\u50a8\u5f15\u64ce\u5728\u7d22\u5f15\u904d\u5386\u7684\u8fc7\u7a0b\u4e2d\u5224\u65ad\u6570\u636e\u662f\u5426\u7b26\u5408\u4f20\u9012\u7684\u6761\u4ef6\uff0c\u5c06\u7b26\u5408\u6761\u4ef6\u7684\u6570\u636e\u8fdb\u884c\u56de\u8868\uff0c\u68c0\u7d22\u51fa\u6765\u8fd4\u56de\u7ed9\u670d\u52a1\u5668\uff0c\u7531\u6b64\u51cf\u5c11 IO \u6b21\u6570"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(17388).A+"",width:"741",height:"323"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u9002\u7528\u6761\u4ef6"}),"\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u9700\u8981\u5b58\u50a8\u5f15\u64ce\u5c06\u7d22\u5f15\u4e2d\u7684\u6570\u636e\u4e0e\u6761\u4ef6\u8fdb\u884c\u5224\u65ad\uff08\u6240\u4ee5",(0,i.jsx)(e.strong,{children:"\u6761\u4ef6\u5217\u5fc5\u987b\u90fd\u5728\u540c\u4e00\u4e2a\u7d22\u5f15\u4e2d"}),"\uff09\uff0c\u6240\u4ee5\u4f18\u5316\u662f\u57fa\u4e8e\u5b58\u50a8\u5f15\u64ce\u7684\uff0c\u53ea\u6709\u7279\u5b9a\u5f15\u64ce\u53ef\u4ee5\u4f7f\u7528\uff0c\u9002\u7528\u4e8e InnoDB \u548c MyISAM"]}),"\n",(0,i.jsx)(e.li,{children:"\u5b58\u50a8\u5f15\u64ce\u6ca1\u6709\u8c03\u7528\u8de8\u5b58\u50a8\u5f15\u64ce\u7684\u80fd\u529b\uff0c\u8de8\u5b58\u50a8\u5f15\u64ce\u7684\u529f\u80fd\u6709\u5b58\u50a8\u8fc7\u7a0b\u3001\u89e6\u53d1\u5668\u3001\u89c6\u56fe\uff0c\u6240\u4ee5\u8c03\u7528\u8fd9\u4e9b\u529f\u80fd\u7684\u4e0d\u53ef\u4ee5\u8fdb\u884c\u7d22\u5f15\u4e0b\u63a8\u4f18\u5316"}),"\n",(0,i.jsx)(e.li,{children:"\u5bf9\u4e8e InnoDB \u5f15\u64ce\u53ea\u9002\u7528\u4e8e\u4e8c\u7ea7\u7d22\u5f15\uff0cInnoDB \u7684\u805a\u7c07\u7d22\u5f15\u4f1a\u5c06\u6574\u884c\u6570\u636e\u8bfb\u5230\u7f13\u51b2\u533a\uff0c\u4e0d\u518d\u9700\u8981\u53bb\u56de\u8868\u67e5\u8be2\u4e86"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5de5\u4f5c\u8fc7\u7a0b\uff1a\u7528\u6237\u8868 user\uff0c(name, age) \u662f\u8054\u5408\u7d22\u5f15"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM user WHERE name LIKE '\u5f20%' AND\u3000age = 10;\t-- \u5934\u90e8\u6a21\u7cca\u5339\u914d\u4f1a\u9020\u6210\u7d22\u5f15\u5931\u6548\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f18\u5316\u524d\uff1a\u5728\u975e\u4e3b\u952e\u7d22\u5f15\u6811\u4e0a\u627e\u5230\u6ee1\u8db3\u7b2c\u4e00\u4e2a\u6761\u4ef6\u7684\u884c\uff0c\u7136\u540e\u901a\u8fc7\u53f6\u5b50\u8282\u70b9\u8bb0\u5f55\u7684\u4e3b\u952e\u503c\u518d\u56de\u5230\u4e3b\u952e\u7d22\u5f15\u6811\u4e0a\u67e5\u627e\u5230\u5bf9\u5e94\u7684\u884c\u6570\u636e\uff0c\u518d\u5bf9\u6bd4 AND \u540e\u7684\u6761\u4ef6\u662f\u5426\u7b26\u5408\uff0c\u7b26\u5408\u8fd4\u56de\u6570\u636e\uff0c\u9700\u8981 4 \u6b21\u56de\u8868"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(97602).A+"",width:"1084",height:"432"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u4f18\u5316\u540e\uff1a\u68c0\u67e5\u7d22\u5f15\u4e2d\u5b58\u50a8\u7684\u5217\u4fe1\u606f\u662f\u5426\u7b26\u5408\u7d22\u5f15\u6761\u4ef6\uff0c\u7136\u540e\u4ea4\u7531\u5b58\u50a8\u5f15\u64ce\u7528\u5269\u4f59\u7684\u5224\u65ad\u6761\u4ef6\u5224\u65ad\u6b64\u884c\u6570\u636e\u662f\u5426\u7b26\u5408\u8981\u6c42\uff0c",(0,i.jsx)(e.strong,{children:"\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u4e0d\u53bb\u8bfb\u53d6\u8868\u4e2d\u7684\u6570\u636e"}),"\uff0c\u6ee1\u8db3\u4e0b\u63a8\u6761\u4ef6\u7684\u5c31\u6839\u636e\u4e3b\u952e\u503c\u8fdb\u884c\u56de\u8868\u67e5\u8be2\uff0c2 \u6b21\u56de\u8868\n",(0,i.jsx)(e.img,{src:s(64185).A+"",width:"1058",height:"440"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u4f7f\u7528 EXPLAIN \u8fdb\u884c\u5206\u6790\u65f6\uff0c\u5982\u679c\u4f7f\u7528\u4e86\u7d22\u5f15\u6761\u4ef6\u4e0b\u63a8\uff0cExtra \u4f1a\u663e\u793a Using index condition"}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://blog.csdn.net/sinat_29774479/article/details/103470244",children:"https://blog.csdn.net/sinat_29774479/article/details/103470244"})]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://time.geekbang.org/column/article/69636",children:"https://time.geekbang.org/column/article/69636"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u524d\u7f00\u7d22\u5f15",children:"\u524d\u7f00\u7d22\u5f15"}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u8981\u7d22\u5f15\u7684\u5217\u5b57\u7b26\u5f88\u591a\u65f6\uff0c\u7d22\u5f15\u4f1a\u53d8\u5927\u53d8\u6162\uff0c\u53ef\u4ee5\u53ea\u7d22\u5f15\u5217\u5f00\u59cb\u7684\u90e8\u5206\u5b57\u7b26\u4e32\uff0c\u8282\u7ea6\u7d22\u5f15\u7a7a\u95f4\uff0c\u63d0\u9ad8\u7d22\u5f15\u6548\u7387"}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u4f7f\u7528\u524d\u7f00\u7d22\u5f15\u5c31\u7cfb\u7edf\u5c31\u5ffd\u7565\u8986\u76d6\u7d22\u5f15\u5bf9\u67e5\u8be2\u6027\u80fd\u7684\u4f18\u5316\u4e86"}),"\n",(0,i.jsxs)(e.p,{children:["\u4f18\u5316\u539f\u5219\uff1a",(0,i.jsx)(e.strong,{children:"\u964d\u4f4e\u91cd\u590d\u7684\u7d22\u5f15\u503c"})]}),"\n",(0,i.jsx)(e.p,{children:"\u6bd4\u5982\u5730\u533a\u8868\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"area\t\t\tgdp\t\tcode\nchinaShanghai\t100\t\taaa\nchinaDalian\t\t200\t\tbbb\nusaNewYork\t\t300\t\tccc\nchinaFuxin\t\t400\t\tddd\nchinaBeijing\t500\t\teee\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u53d1\u73b0 area \u5b57\u6bb5\u5f88\u591a\u90fd\u662f\u4ee5 china \u5f00\u5934\u7684\uff0c\u90a3\u4e48\u5982\u679c\u4ee5\u524d 1-5 \u4f4d\u5b57\u7b26\u505a\u524d\u7f00\u7d22\u5f15\u5c31\u4f1a\u51fa\u73b0\u5927\u91cf\u7d22\u5f15\u503c\u91cd\u590d\u7684\u60c5\u51b5\uff0c\u7d22\u5f15\u503c\u91cd\u590d\u6027\u8d8a\u4f4e\uff0c\u67e5\u8be2\u6548\u7387\u4e5f\u5c31\u8d8a\u9ad8\uff0c\u6240\u4ee5\u9700\u8981\u5efa\u7acb\u524d 6 \u4f4d\u5b57\u7b26\u7684\u7d22\u5f15\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE INDEX idx_area ON table_name(area(7));\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u573a\u666f\uff1a\u5b58\u50a8\u8eab\u4efd\u8bc1"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u76f4\u63a5\u521b\u5efa\u5b8c\u6574\u7d22\u5f15\uff0c\u8fd9\u6837\u53ef\u80fd\u6bd4\u8f83\u5360\u7528\u7a7a\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"\u521b\u5efa\u524d\u7f00\u7d22\u5f15\uff0c\u8282\u7701\u7a7a\u95f4\uff0c\u4f46\u4f1a\u589e\u52a0\u67e5\u8be2\u626b\u63cf\u6b21\u6570\uff0c\u5e76\u4e14\u4e0d\u80fd\u4f7f\u7528\u8986\u76d6\u7d22\u5f15"}),"\n",(0,i.jsx)(e.li,{children:"\u5012\u5e8f\u5b58\u50a8\uff0c\u518d\u521b\u5efa\u524d\u7f00\u7d22\u5f15\uff0c\u7528\u4e8e\u7ed5\u8fc7\u5b57\u7b26\u4e32\u672c\u8eab\u524d\u7f00\u7684\u533a\u5206\u5ea6\u4e0d\u591f\u7684\u95ee\u9898\uff08\u524d 6 \u4f4d\u76f8\u540c\u7684\u5f88\u591a\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u521b\u5efa hash \u5b57\u6bb5\u7d22\u5f15\uff0c\u67e5\u8be2\u6027\u80fd\u7a33\u5b9a\uff0c\u6709\u989d\u5916\u7684\u5b58\u50a8\u548c\u8ba1\u7b97\u6d88\u8017\uff0c\u8ddf\u7b2c\u4e09\u79cd\u65b9\u5f0f\u4e00\u6837\uff0c\u90fd\u4e0d\u652f\u6301\u8303\u56f4\u626b\u63cf"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u7d22\u5f15\u5408\u5e76",children:"\u7d22\u5f15\u5408\u5e76"}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u591a\u4e2a\u7d22\u5f15\u6765\u5b8c\u6210\u4e00\u6b21\u67e5\u8be2\u7684\u6267\u884c\u65b9\u6cd5\u53eb\u505a\u7d22\u5f15\u5408\u5e76 index merge"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Intersection \u7d22\u5f15\u5408\u5e76\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"SELECT * FROM table_test WHERE key1 = 'a' AND key3 = 'b'; # key1 \u548c key3 \u5217\u90fd\u662f\u5355\u5217\u7d22\u5f15\u3001\u4e8c\u7ea7\u7d22\u5f15\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u4ece\u4e0d\u540c\u7d22\u5f15\u4e2d\u626b\u63cf\u5230\u7684\u8bb0\u5f55\u7684 id \u503c\u53d6",(0,i.jsx)(e.strong,{children:"\u4ea4\u96c6"}),"\uff08\u76f8\u540c id\uff09\uff0c\u7136\u540e\u6267\u884c\u56de\u8868\u64cd\u4f5c\uff0c\u8981\u6c42\u4ece\u6bcf\u4e2a\u4e8c\u7ea7\u7d22\u5f15\u83b7\u53d6\u5230\u7684\u8bb0\u5f55\u90fd\u662f\u6309\u7167\u4e3b\u952e\u503c\u6392\u5e8f"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Union \u7d22\u5f15\u5408\u5e76\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"SELECT * FROM table_test WHERE key1 = 'a' OR key3 = 'b';\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u4ece\u4e0d\u540c\u7d22\u5f15\u4e2d\u626b\u63cf\u5230\u7684\u8bb0\u5f55\u7684 id \u503c\u53d6",(0,i.jsx)(e.strong,{children:"\u5e76\u96c6"}),"\uff0c\u7136\u540e\u6267\u884c\u56de\u8868\u64cd\u4f5c\uff0c\u8981\u6c42\u4ece\u6bcf\u4e2a\u4e8c\u7ea7\u7d22\u5f15\u83b7\u53d6\u5230\u7684\u8bb0\u5f55\u90fd\u662f\u6309\u7167\u4e3b\u952e\u503c\u6392\u5e8f"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Sort-Union \u7d22\u5f15\u5408\u5e76"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"SELECT * FROM table_test WHERE key1 < 'a' OR key3 > 'b';\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5148\u5c06\u4ece\u4e0d\u540c\u7d22\u5f15\u4e2d\u626b\u63cf\u5230\u7684\u8bb0\u5f55\u7684\u4e3b\u952e\u503c\u8fdb\u884c\u6392\u5e8f\uff0c\u518d\u6309\u7167 Union \u7d22\u5f15\u5408\u5e76\u7684\u65b9\u5f0f\u8fdb\u884c\u67e5\u8be2"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u7d22\u5f15\u5408\u5e76\u7b97\u6cd5\u7684\u6548\u7387\u5e76\u4e0d\u597d\uff0c\u901a\u8fc7\u5c06\u5176\u4e2d\u7684\u4e00\u4e2a\u7d22\u5f15\u6539\u6210\u8054\u5408\u7d22\u5f15\u4f1a\u4f18\u5316\u6548\u7387"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u7cfb\u7edf\u4f18\u5316",children:"\u7cfb\u7edf\u4f18\u5316"}),"\n",(0,i.jsx)(e.h3,{id:"\u8868\u4f18\u5316",children:"\u8868\u4f18\u5316"}),"\n",(0,i.jsx)(e.h4,{id:"\u5206\u533a\u8868",children:"\u5206\u533a\u8868"}),"\n",(0,i.jsx)(e.h5,{id:"\u57fa\u672c\u4ecb\u7ecd-5",children:"\u57fa\u672c\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.p,{children:"\u5206\u533a\u8868\u662f\u5c06\u5927\u8868\u7684\u6570\u636e\u6309\u5206\u533a\u5b57\u6bb5\u5206\u6210\u8bb8\u591a\u5c0f\u7684\u5b50\u96c6\uff0c\u5efa\u7acb\u4e00\u4e2a\u4ee5 ftime \u5e74\u4efd\u4e3a\u5206\u533a\u7684\u8868\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE TABLE `t` (\n    `ftime` datetime NOT NULL,\n    `c` int(11) DEFAULT NULL,\n    KEY (`ftime`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1\nPARTITION BY RANGE (YEAR(ftime))\n(PARTITION p_2017 VALUES LESS THAN (2017) ENGINE = InnoDB,\n PARTITION p_2018 VALUES LESS THAN (2018) ENGINE = InnoDB,\n PARTITION p_2019 VALUES LESS THAN (2019) ENGINE = InnoDB,\n PARTITION p_others VALUES LESS THAN MAXVALUE ENGINE = InnoDB);\nINSERT INTO t VALUES('2017-4-1',1),('2018-4-1',1);-- \u8fd9\u4e24\u884c\u8bb0\u5f55\u5206\u522b\u843d\u5728 p_2018 \u548c p_2019 \u8fd9\u4e24\u4e2a\u5206\u533a\u4e0a\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8fd9\u4e2a\u8868\u5305\u542b\u4e86\u4e00\u4e2a.frm \u6587\u4ef6\u548c 4 \u4e2a.ibd \u6587\u4ef6\uff0c\u6bcf\u4e2a\u5206\u533a\u5bf9\u5e94\u4e00\u4e2a.ibd \u6587\u4ef6"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5bf9\u4e8e\u5f15\u64ce\u5c42\u6765\u8bf4\uff0c\u8fd9\u662f 4 \u4e2a\u8868\uff0c\u9488\u5bf9\u6bcf\u4e2a\u5206\u533a\u8868\u7684\u64cd\u4f5c\u4e0d\u4f1a\u76f8\u4e92\u5f71\u54cd"}),"\n",(0,i.jsx)(e.li,{children:"\u5bf9\u4e8e Server \u5c42\u6765\u8bf4\uff0c\u8fd9\u662f 1 \u4e2a\u8868"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u5206\u533a\u7b56\u7565",children:"\u5206\u533a\u7b56\u7565"}),"\n",(0,i.jsxs)(e.p,{children:["\u6253\u5f00\u8868\u884c\u4e3a\uff1a\u7b2c\u4e00\u6b21\u8bbf\u95ee\u4e00\u4e2a\u5206\u533a\u8868\u65f6\uff0cMySQL \u9700\u8981",(0,i.jsx)(e.strong,{children:"\u628a\u6240\u6709\u7684\u5206\u533a\u90fd\u8bbf\u95ee\u4e00\u904d"}),"\uff0c\u5982\u679c\u5206\u533a\u8868\u7684\u6570\u91cf\u5f88\u591a\uff0c\u8d85\u8fc7\u4e86 open_files_limit \u53c2\u6570\uff08\u9ed8\u8ba4\u503c 1024\uff09\uff0c\u90a3\u4e48\u5c31\u4f1a\u5728\u8bbf\u95ee\u8fd9\u4e2a\u8868\u65f6\u6253\u5f00\u6240\u6709\u7684\u6587\u4ef6\uff0c\u5bfc\u81f4\u6253\u5f00\u8868\u6587\u4ef6\u7684\u4e2a\u6570\u8d85\u8fc7\u4e86\u4e0a\u9650\u800c\u62a5\u9519"]}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u7528\u5206\u533a\u7b56\u7565\uff1aMyISAM \u5206\u533a\u8868\u4f7f\u7528\u7684\u5206\u533a\u7b56\u7565\uff0c\u6bcf\u6b21\u8bbf\u95ee\u5206\u533a\u90fd\u7531 Server \u5c42\u63a7\u5236\uff0c\u5728\u6587\u4ef6\u7ba1\u7406\u3001\u8868\u7ba1\u7406\u7684\u5b9e\u73b0\u4e0a\u5f88\u7c97\u7cd9\uff0c\u56e0\u6b64\u6709\u6bd4\u8f83\u4e25\u91cd\u7684\u6027\u80fd\u95ee\u9898"}),"\n",(0,i.jsxs)(e.p,{children:["\u672c\u5730\u5206\u533a\u7b56\u7565\uff1a\u4ece MySQL 5.7.9 \u5f00\u59cb\uff0cInnoDB \u5f15\u64ce\u5185\u90e8\u81ea\u5df1\u7ba1\u7406\u6253\u5f00\u5206\u533a\u7684\u884c\u4e3a\uff0cInnoDB \u5f15\u64ce\u6253\u5f00\u6587\u4ef6\u8d85\u8fc7 innodb_open_files \u65f6\u5c31\u4f1a",(0,i.jsx)(e.strong,{children:"\u5173\u6389\u4e00\u4e9b\u4e4b\u524d\u6253\u5f00\u7684\u6587\u4ef6"}),"\uff0c\u6240\u4ee5\u5373\u4f7f\u5206\u533a\u4e2a\u6570\u5927\u4e8e open_files_limit\uff0c\u4e5f\u4e0d\u4f1a\u62a5\u9519"]}),"\n",(0,i.jsx)(e.p,{children:"\u4ece MySQL 8.0 \u7248\u672c\u5f00\u59cb\uff0c\u5c31\u4e0d\u5141\u8bb8\u521b\u5efa MyISAM \u5206\u533a\u8868\uff0c\u53ea\u5141\u8bb8\u521b\u5efa\u5df2\u7ecf\u5b9e\u73b0\u4e86\u672c\u5730\u5206\u533a\u7b56\u7565\u7684\u5f15\u64ce\uff0c\u76ee\u524d\u53ea\u6709 InnoDB \u548c NDB \u8fd9\u4e24\u4e2a\u5f15\u64ce\u652f\u6301\u4e86\u672c\u5730\u5206\u533a\u7b56\u7565"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"server-\u5c42",children:"Server \u5c42"}),"\n",(0,i.jsx)(e.p,{children:"\u4ece Server \u5c42\u770b\u4e00\u4e2a\u5206\u533a\u8868\u5c31\u53ea\u662f\u4e00\u4e2a\u8868"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Session A\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM t WHERE ftime = '2018-4-1';\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Session B\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ALTER TABLE t TRUNCATE PARTITION p_2017; -- blocked\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u73b0\u8c61\uff1aSession B \u53ea\u64cd\u4f5c p_2017 \u5206\u533a\uff0c\u4f46\u662f\u7531\u4e8e Session A \u6301\u6709\u6574\u4e2a\u8868 t \u7684 MDL \u8bfb\u9501\uff0c\u5c31\u5bfc\u81f4 B \u7684 ALTER \u8bed\u53e5\u83b7\u53d6 MDL \u5199\u9501\u963b\u585e"}),"\n",(0,i.jsx)(e.p,{children:"\u5206\u533a\u8868\u7684\u7279\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7b2c\u4e00\u6b21\u8bbf\u95ee\u7684\u65f6\u5019\u9700\u8981\u8bbf\u95ee\u6240\u6709\u5206\u533a"}),"\n",(0,i.jsxs)(e.li,{children:["\u5728 Server \u5c42\u8ba4\u4e3a\u8fd9\u662f\u540c\u4e00\u5f20\u8868\uff0c\u56e0\u6b64",(0,i.jsx)(e.strong,{children:"\u6240\u6709\u5206\u533a\u5171\u7528\u540c\u4e00\u4e2a MDL \u9501"})]}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u5f15\u64ce\u5c42\u8ba4\u4e3a\u8fd9\u662f\u4e0d\u540c\u7684\u8868\uff0c\u56e0\u6b64 MDL \u9501\u4e4b\u540e\u7684\u6267\u884c\u8fc7\u7a0b\uff0c\u4f1a\u6839\u636e\u5206\u533a\u8868\u89c4\u5219\uff0c\u53ea\u8bbf\u95ee\u9700\u8981\u7684\u5206\u533a"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u5e94\u7528\u573a\u666f",children:"\u5e94\u7528\u573a\u666f"}),"\n",(0,i.jsx)(e.p,{children:"\u5206\u533a\u8868\u7684\u4f18\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5bf9\u4e1a\u52a1\u900f\u660e\uff0c\u76f8\u5bf9\u4e8e\u7528\u6237\u5206\u8868\u6765\u8bf4\uff0c\u4f7f\u7528\u5206\u533a\u8868\u7684\u4e1a\u52a1\u4ee3\u7801\u66f4\u7b80\u6d01"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5206\u533a\u8868\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u6e05\u7406\u5386\u53f2\u6570\u636e\u3002\u6309\u7167\u65f6\u95f4\u5206\u533a\u7684\u5206\u533a\u8868\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 ",(0,i.jsx)(e.code,{children:"alter table t drop partition"})," \u8fd9\u4e2a\u8bed\u6cd5\u76f4\u63a5\u5220\u9664\u5206\u533a\u6587\u4ef6\uff0c\u4ece\u800c\u5220\u6389\u8fc7\u671f\u7684\u5386\u53f2\u6570\u636e\uff0c\u4e0e\u4f7f\u7528 drop \u8bed\u53e5\u5220\u9664\u6570\u636e\u76f8\u6bd4\uff0c\u4f18\u52bf\u662f\u901f\u5ea6\u5feb\u3001\u5bf9\u7cfb\u7edf\u5f71\u54cd\u5c0f"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u5206\u533a\u8868\uff0c\u4e0d\u5efa\u8bae\u521b\u5efa\u592a\u591a\u7684\u5206\u533a\uff0c\u6ce8\u610f\u4e8b\u9879\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5206\u533a\u5e76\u4e0d\u662f\u8d8a\u7ec6\u8d8a\u597d\uff0c\u5355\u8868\u6216\u8005\u5355\u5206\u533a\u7684\u6570\u636e\u4e00\u5343\u4e07\u884c\uff0c\u53ea\u8981\u6ca1\u6709\u7279\u522b\u5927\u7684\u7d22\u5f15\uff0c\u5bf9\u4e8e\u73b0\u5728\u7684\u786c\u4ef6\u80fd\u529b\u6765\u8bf4\u90fd\u5df2\u7ecf\u662f\u5c0f\u8868"}),"\n",(0,i.jsx)(e.li,{children:"\u5206\u533a\u4e0d\u8981\u63d0\u524d\u9884\u7559\u592a\u591a\uff0c\u5728\u4f7f\u7528\u4e4b\u524d\u9884\u5148\u521b\u5efa\u5373\u53ef\u3002\u6bd4\u5982\u662f\u6309\u6708\u5206\u533a\uff0c\u6bcf\u5e74\u5e74\u5e95\u65f6\u518d\u628a\u4e0b\u4e00\u5e74\u5ea6\u7684 12 \u4e2a\u65b0\u5206\u533a\u521b\u5efa\u4e0a\u5373\u53ef\uff0c\u5e76\u4e14\u5bf9\u4e8e\u6ca1\u6709\u6570\u636e\u7684\u5386\u53f2\u5206\u533a\uff0c\u8981\u53ca\u65f6\u7684 drop \u6389"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u6863\uff1a",(0,i.jsx)(e.a,{href:"https://time.geekbang.org/column/article/82560",children:"https://time.geekbang.org/column/article/82560"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u4e34\u65f6\u8868",children:"\u4e34\u65f6\u8868"}),"\n",(0,i.jsx)(e.h5,{id:"\u57fa\u672c\u4ecb\u7ecd-6",children:"\u57fa\u672c\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.p,{children:"\u4e34\u65f6\u8868\u5206\u4e3a\u5185\u90e8\u4e34\u65f6\u8868\u548c\u7528\u6237\u4e34\u65f6\u8868"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5185\u90e8\u4e34\u65f6\u8868\uff1a\u7cfb\u7edf\u6267\u884c SQL \u8bed\u53e5\u4f18\u5316\u65f6\u4ea7\u751f\u7684\u8868\uff0c\u4f8b\u5982 Join \u8fde\u63a5\u67e5\u8be2\u3001\u53bb\u91cd\u67e5\u8be2\u7b49"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7528\u6237\u4e34\u65f6\u8868\uff1a\u7528\u6237\u4e3b\u52a8\u521b\u5efa\u7684\u4e34\u65f6\u8868"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE TEMPORARY TABLE temp_t like table_1;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e34\u65f6\u8868\u53ef\u4ee5\u662f\u5185\u5b58\u8868\uff0c\u4e5f\u53ef\u4ee5\u662f\u78c1\u76d8\u8868\uff08\u591a\u8868\u64cd\u4f5c \u2192 \u5d4c\u5957\u67e5\u8be2\u7ae0\u8282\u63d0\u53ca\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5185\u5b58\u8868\u6307\u7684\u662f\u4f7f\u7528 Memory \u5f15\u64ce\u7684\u8868\uff0c\u5efa\u7acb\u54c8\u5e0c\u7d22\u5f15\uff0c\u5efa\u8868\u8bed\u6cd5\u662f ",(0,i.jsx)(e.code,{children:"create table \u2026 engine=memory"}),"\uff0c\u8fd9\u79cd\u8868\u7684\u6570\u636e\u90fd\u4fdd\u5b58\u5728\u5185\u5b58\u91cc\uff0c\u7cfb\u7edf\u91cd\u542f\u65f6\u4f1a\u88ab\u6e05\u7a7a\uff0c\u4f46\u662f\u8868\u7ed3\u6784\u8fd8\u5728"]}),"\n",(0,i.jsx)(e.li,{children:"\u78c1\u76d8\u8868\u662f\u4f7f\u7528 InnoDB \u5f15\u64ce\u6216\u8005 MyISAM \u5f15\u64ce\u7684\u4e34\u65f6\u8868\uff0c\u5efa\u7acb B+ \u6811\u7d22\u5f15\uff0c\u5199\u6570\u636e\u7684\u65f6\u5019\u662f\u5199\u5230\u78c1\u76d8\u4e0a\u7684"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e34\u65f6\u8868\u7684\u7279\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4e00\u4e2a\u4e34\u65f6\u8868\u53ea\u80fd\u88ab\u521b\u5efa\u5b83\u7684 session \u8bbf\u95ee\uff0c\u5bf9\u5176\u4ed6\u7ebf\u7a0b\u4e0d\u53ef\u89c1\uff0c\u6240\u4ee5\u4e0d\u540c session \u7684\u4e34\u65f6\u8868\u662f",(0,i.jsx)(e.strong,{children:"\u53ef\u4ee5\u91cd\u540d"}),"\u7684"]}),"\n",(0,i.jsx)(e.li,{children:"\u4e34\u65f6\u8868\u53ef\u4ee5\u4e0e\u666e\u901a\u8868\u540c\u540d\uff0c\u4f1a\u8bdd\u5185\u6709\u540c\u540d\u7684\u4e34\u65f6\u8868\u548c\u666e\u901a\u8868\u65f6\uff0c\u6267\u884c show create \u8bed\u53e5\u4ee5\u53ca\u589e\u5220\u6539\u67e5\u8bed\u53e5\u8bbf\u95ee\u7684\u90fd\u662f\u4e34\u65f6\u8868"}),"\n",(0,i.jsx)(e.li,{children:"show tables \u547d\u4ee4\u4e0d\u663e\u793a\u4e34\u65f6\u8868"}),"\n",(0,i.jsxs)(e.li,{children:["\u6570\u636e\u5e93\u53d1\u751f\u5f02\u5e38\u91cd\u542f\u4e0d\u9700\u8981\u62c5\u5fc3\u6570\u636e\u5220\u9664\u95ee\u9898\uff0c\u4e34\u65f6\u8868\u4f1a",(0,i.jsx)(e.strong,{children:"\u81ea\u52a8\u56de\u6536"})]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u91cd\u540d\u539f\u7406",children:"\u91cd\u540d\u539f\u7406"}),"\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u521b\u5efa\u4e34\u65f6\u8868\u7684 SQL\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"create temporary table temp_t(id int primary key)engine=innodb;\n"})}),"\n",(0,i.jsxs)(e.p,{children:["MySQL \u7ed9 InnoDB \u8868\u521b\u5efa\u4e00\u4e2a frm \u6587\u4ef6\u4fdd\u5b58\u8868\u7ed3\u6784\u5b9a\u4e49\uff0c\u5728 ibd \u4fdd\u5b58\u8868\u6570\u636e\u3002frm \u6587\u4ef6\u653e\u5728\u4e34\u65f6\u6587\u4ef6\u76ee\u5f55\u4e0b\uff0c\u6587\u4ef6\u540d\u7684\u540e\u7f00\u662f .frm\uff0c",(0,i.jsx)(e.strong,{children:"\u524d\u7f00\u662f"})," ",(0,i.jsx)(e.code,{children:"#sql{\u8fdb\u7a0b id}_{\u7ebf\u7a0b id}_ \u5e8f\u5217\u53f7"}),"\uff0c\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"select @@tmpdir"})," \u547d\u4ee4\uff0c\u6765\u663e\u793a\u5b9e\u4f8b\u7684\u4e34\u65f6\u6587\u4ef6\u76ee\u5f55"]}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u7ef4\u62a4\u6570\u636e\u8868\uff0c\u9664\u4e86\u7269\u7406\u78c1\u76d8\u4e0a\u7684\u6587\u4ef6\u5916\uff0c\u5185\u5b58\u91cc\u4e5f\u6709\u4e00\u5957\u673a\u5236\u533a\u522b\u4e0d\u540c\u7684\u8868\uff0c\u6bcf\u4e2a\u8868\u90fd\u5bf9\u5e94\u4e00\u4e2a table_def_key"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4e00\u4e2a\u666e\u901a\u8868\u7684 table_def_key \u7684\u503c\u662f\u7531 ",(0,i.jsx)(e.code,{children:"\u5e93\u540d + \u8868\u540d"})," \u5f97\u5230\u7684\uff0c\u6240\u4ee5\u5982\u679c\u5728\u540c\u4e00\u4e2a\u5e93\u4e0b\u521b\u5efa\u4e24\u4e2a\u540c\u540d\u7684\u666e\u901a\u8868\uff0c\u521b\u5efa\u7b2c\u4e8c\u4e2a\u8868\u7684\u8fc7\u7a0b\u4e2d\u5c31\u4f1a\u53d1\u73b0 table_def_key \u5df2\u7ecf\u5b58\u5728\u4e86"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5bf9\u4e8e\u4e34\u65f6\u8868\uff0ctable_def_key \u5728 ",(0,i.jsx)(e.code,{children:"\u5e93\u540d + \u8868\u540d"})," \u57fa\u7840\u4e0a\uff0c\u53c8\u52a0\u5165\u4e86 ",(0,i.jsx)(e.code,{children:"server_id + thread_id"}),"\uff0c\u6240\u4ee5\u4e0d\u540c\u7ebf\u7a0b\u4e4b\u95f4\uff0c\u4e34\u65f6\u8868\u53ef\u4ee5\u91cd\u540d"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5b9e\u73b0\u539f\u7406\uff1a\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u7ef4\u62a4\u4e86\u81ea\u5df1\u7684\u4e34\u65f6\u8868\u94fe\u8868\uff0c\u6bcf\u6b21 session \u5185\u64cd\u4f5c\u8868\u65f6\uff0c\u5148\u904d\u5386\u94fe\u8868\uff0c\u68c0\u67e5\u662f\u5426\u6709\u8fd9\u4e2a\u540d\u5b57\u7684\u4e34\u65f6\u8868\uff0c\u5982\u679c\u6709\u5c31",(0,i.jsx)(e.strong,{children:"\u4f18\u5148\u64cd\u4f5c\u4e34\u65f6\u8868"}),"\uff0c\u5982\u679c\u6ca1\u6709\u518d\u64cd\u4f5c\u666e\u901a\u8868\uff1b\u5728 session \u7ed3\u675f\u65f6\u5bf9\u94fe\u8868\u91cc\u7684\u6bcf\u4e2a\u4e34\u65f6\u8868\uff0c\u6267\u884c ",(0,i.jsx)(e.code,{children:"DROP TEMPORARY TABLE + \u8868\u540d"})," \u64cd\u4f5c"]}),"\n",(0,i.jsxs)(e.p,{children:["\u6267\u884c rename table \u8bed\u53e5\u65e0\u6cd5\u4fee\u6539\u4e34\u65f6\u8868\uff0c\u56e0\u4e3a\u4f1a\u6309\u7167 ",(0,i.jsx)(e.code,{children:"\u5e93\u540d / \u8868\u540d.frm"})," \u7684\u89c4\u5219\u53bb\u78c1\u76d8\u627e\u6587\u4ef6\uff0c\u4f46\u662f\u4e34\u65f6\u8868\u6587\u4ef6\u540d\u7684\u89c4\u5219\u662f ",(0,i.jsx)(e.code,{children:"#sql{\u8fdb\u7a0b id}_{\u7ebf\u7a0b id}_ \u5e8f\u5217\u53f7.frm"}),"\uff0c\u56e0\u6b64\u4f1a\u62a5\u627e\u4e0d\u5230\u6587\u4ef6\u540d\u7684\u9519\u8bef"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u4e3b\u5907\u590d\u5236",children:"\u4e3b\u5907\u590d\u5236"}),"\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u4e34\u65f6\u8868\u7684\u8bed\u53e5\u4f1a\u4f20\u5230\u5907\u5e93\u6267\u884c\uff0c\u56e0\u6b64\u5907\u5e93\u7684\u540c\u6b65\u7ebf\u7a0b\u5c31\u4f1a\u521b\u5efa\u8fd9\u4e2a\u4e34\u65f6\u8868\u3002\u4e3b\u5e93\u5728\u7ebf\u7a0b\u9000\u51fa\u65f6\u4f1a\u81ea\u52a8\u5220\u9664\u4e34\u65f6\u8868\uff0c\u4f46\u5907\u5e93\u540c\u6b65\u7ebf\u7a0b\u662f\u6301\u7eed\u5728\u8fd0\u884c\u7684\u5e76\u4e0d\u4f1a\u9000\u51fa\uff0c\u6240\u4ee5\u8fd9\u65f6\u5c31\u9700\u8981\u5728\u4e3b\u5e93\u4e0a\u518d\u5199\u4e00\u4e2a DROP TEMPORARY TABLE \u4f20\u7ed9\u5907\u5e93\u6267\u884c"}),"\n",(0,i.jsx)(e.p,{children:"binlog \u65e5\u5fd7\u5199\u5165\u89c4\u5219\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"binlog_format=row\uff0c\u8ddf\u4e34\u65f6\u8868\u6709\u5173\u7684\u8bed\u53e5\u5c31\u4e0d\u4f1a\u8bb0\u5f55\u5230 binlog"}),"\n",(0,i.jsxs)(e.li,{children:["binlog_format=statment/mixed\uff0cbinlog \u4e2d\u624d\u4f1a\u8bb0\u5f55\u4e34\u65f6\u8868\u7684\u64cd\u4f5c\uff0c\u4e5f\u5c31\u4f1a\u8bb0\u5f55 ",(0,i.jsx)(e.code,{children:"DROP TEMPORARY TABLE"})," \u8fd9\u6761\u547d\u4ee4"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u5e93\u4e0a\u4e0d\u540c\u7684\u7ebf\u7a0b\u521b\u5efa\u540c\u540d\u7684\u4e34\u65f6\u8868\u662f\u4e0d\u51b2\u7a81\u7684\uff0c\u4f46\u662f\u5907\u5e93\u53ea\u6709\u4e00\u4e2a\u6267\u884c\u7ebf\u7a0b\uff0c\u6240\u4ee5 MySQL \u5728\u8bb0\u5f55 binlog \u65f6\u4f1a\u628a\u4e3b\u5e93\u6267\u884c\u8fd9\u4e2a\u8bed\u53e5\u7684\u7ebf\u7a0b id \u5199\u5230 binlog \u4e2d\uff0c\u5728\u5907\u5e93\u7684\u5e94\u7528\u7ebf\u7a0b\u5c31\u53ef\u4ee5\u83b7\u53d6\u6267\u884c\u6bcf\u4e2a\u8bed\u53e5\u7684\u4e3b\u5e93\u7ebf\u7a0b id\uff0c\u5e76\u5229\u7528\u8fd9\u4e2a\u7ebf\u7a0b id \u6765\u6784\u9020\u4e34\u65f6\u8868\u7684 table_def_key"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["session A \u7684\u4e34\u65f6\u8868 t1\uff0c\u5728\u5907\u5e93\u7684 table_def_key \u5c31\u662f\uff1a",(0,i.jsx)(e.code,{children:'\u5e93\u540d + t1 +\u201cM \u7684 serverid" + "session A \u7684 thread_id\u201d'})]}),"\n",(0,i.jsxs)(e.li,{children:["session B \u7684\u4e34\u65f6\u8868 t1\uff0c\u5728\u5907\u5e93\u7684 table_def_key \u5c31\u662f \uff1a",(0,i.jsx)(e.code,{children:'\u5e93\u540d + t1 +"M \u7684 serverid" + "session B \u7684 thread_id"'})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u5728\u8bb0\u5f55 binlog \u7684\u65f6\u4e0d\u8bba\u662f create table \u8fd8\u662f alter table \u8bed\u53e5\u90fd\u662f\u539f\u6837\u8bb0\u5f55\uff0c\u4f46\u662f\u5982\u679c\u6267\u884c drop table\uff0c\u7cfb\u7edf\u8bb0\u5f55 binlog \u5c31\u4f1a\u88ab\u670d\u52a1\u7aef\u6539\u5199"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DROP TABLE `t_normal` /* generated by server */\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u8de8\u5e93\u67e5\u8be2",children:"\u8de8\u5e93\u67e5\u8be2"}),"\n",(0,i.jsx)(e.p,{children:"\u5206\u5e93\u5206\u8868\u7cfb\u7edf\u7684\u8de8\u5e93\u67e5\u8be2\u4f7f\u7528\u4e34\u65f6\u8868\u4e0d\u7528\u62c5\u5fc3\u7ebf\u7a0b\u4e4b\u95f4\u7684\u91cd\u540d\u51b2\u7a81\uff0c\u5206\u5e93\u5206\u8868\u5c31\u662f\u8981\u628a\u4e00\u4e2a\u903b\u8f91\u4e0a\u7684\u5927\u8868\u5206\u6563\u5230\u4e0d\u540c\u7684\u6570\u636e\u5e93\u5b9e\u4f8b\u4e0a"}),"\n",(0,i.jsx)(e.p,{children:"\u6bd4\u5982\u5c06\u4e00\u4e2a\u5927\u8868 ht\uff0c\u6309\u7167\u5b57\u6bb5 f\uff0c\u62c6\u5206\u6210 1024 \u4e2a\u5206\u8868\uff0c\u5206\u5e03\u5230 32 \u4e2a\u6570\u636e\u5e93\u5b9e\u4f8b\u4e0a\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u90fd\u6709\u4e00\u4e2a\u4e2d\u95f4\u5c42 proxy \u89e3\u6790 SQL \u8bed\u53e5\uff0c\u901a\u8fc7\u5206\u5e93\u89c4\u5219\u901a\u8fc7\u5206\u8868\u89c4\u5219\uff08\u6bd4\u5982 N%1024\uff09\u786e\u5b9a\u5c06\u8fd9\u6761\u8bed\u53e5\u8def\u7531\u5230\u54ea\u4e2a\u5206\u8868\u505a\u67e5\u8be2"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"select v from ht where f=N;\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u8fd9\u4e2a\u8868\u4e0a\u8fd8\u6709\u53e6\u5916\u4e00\u4e2a\u7d22\u5f15 k\uff0c\u5e76\u4e14\u67e5\u8be2\u8bed\u53e5\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"select v from ht where k >= M order by t_modified desc limit 100;\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u67e5\u8be2\u6761\u4ef6\u91cc\u9762\u6ca1\u6709\u7528\u5230\u5206\u533a\u5b57\u6bb5 f\uff0c\u53ea\u80fd",(0,i.jsx)(e.strong,{children:"\u5230\u6240\u6709\u7684\u5206\u533a"}),"\u4e2d\u53bb\u67e5\u627e\u6ee1\u8db3\u6761\u4ef6\u7684\u6240\u6709\u884c\uff0c\u7136\u540e\u7edf\u4e00\u505a order by \u64cd\u4f5c\uff0c\u4e24\u79cd\u65b9\u5f0f\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5728 proxy \u5c42\u7684\u8fdb\u7a0b\u4ee3\u7801\u4e2d\u5b9e\u73b0\u6392\u5e8f\uff0c\u62ff\u5230\u5206\u5e93\u7684\u6570\u636e\u4ee5\u540e\uff0c\u76f4\u63a5\u5728\u5185\u5b58\u4e2d\u53c2\u4e0e\u8ba1\u7b97\uff0c\u4f46\u662f\u5bf9 proxy \u7aef\u7684\u538b\u529b\u6bd4\u8f83\u5927\uff0c\u5f88\u5bb9\u6613\u51fa\u73b0\u5185\u5b58\u4e0d\u591f\u7528\u548c CPU \u74f6\u9888\u95ee\u9898"}),"\n",(0,i.jsxs)(e.li,{children:["\u628a\u5404\u4e2a\u5206\u5e93\u62ff\u5230\u7684\u6570\u636e\uff0c\u6c47\u603b\u5230\u4e00\u4e2a MySQL \u5b9e\u4f8b\u7684\u4e00\u4e2a\u8868\u4e2d\uff0c\u7136\u540e\u5728\u8fd9\u4e2a\u6c47\u603b\u5b9e\u4f8b\u4e0a\u505a\u903b\u8f91\u64cd\u4f5c\uff0c\u6267\u884c\u6d41\u7a0b\uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5728\u6c47\u603b\u5e93\u4e0a\u521b\u5efa\u4e00\u4e2a\u4e34\u65f6\u8868 temp_ht\uff0c\u8868\u91cc\u5305\u542b\u4e09\u4e2a\u5b57\u6bb5 v\u3001k\u3001t_modified"}),"\n",(0,i.jsxs)(e.li,{children:["\u5728\u5404\u4e2a\u5206\u5e93\u6267\u884c\uff1a",(0,i.jsx)(e.code,{children:"select v,k,t_modified from ht_x where k >= M order by t_modified desc limit 100"})]}),"\n",(0,i.jsx)(e.li,{children:"\u628a\u5206\u5e93\u6267\u884c\u7684\u7ed3\u679c\u63d2\u5165\u5230 temp_ht \u8868\u4e2d"}),"\n",(0,i.jsxs)(e.li,{children:["\u5728\u4e34\u65f6\u8868\u4e0a\u6267\u884c\uff1a",(0,i.jsx)(e.code,{children:"select v from temp_ht order by t_modified desc limit 100"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u4f18\u5316\u6b65\u9aa4",children:"\u4f18\u5316\u6b65\u9aa4"}),"\n",(0,i.jsx)(e.h4,{id:"\u6267\u884c\u9891\u7387",children:"\u6267\u884c\u9891\u7387"}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u5ba2\u6237\u7aef\u8fde\u63a5\u6210\u529f\u540e\uff0c\u67e5\u8be2\u670d\u52a1\u5668\u72b6\u6001\u4fe1\u606f\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW [SESSION|GLOBAL] STATUS LIKE '';\n-- SESSION: \u663e\u793a\u5f53\u524d\u4f1a\u8bdd\u8fde\u63a5\u7684\u7edf\u8ba1\u7ed3\u679c\uff0c\u9ed8\u8ba4\u53c2\u6570\n-- GLOBAL: \u663e\u793a\u81ea\u6570\u636e\u5e93\u4e0a\u6b21\u542f\u52a8\u81f3\u4eca\u7684\u7edf\u8ba1\u7ed3\u679c\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b SQL \u6267\u884c\u9891\u7387\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW STATUS LIKE 'Com_____';\n"})}),"\n",(0,i.jsx)(e.p,{children:"Com_xxx \u8868\u793a\u6bcf\u79cd\u8bed\u53e5\u6267\u884c\u7684\u6b21\u6570"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(21572).A+"",width:"1047",height:"292"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2 SQL \u8bed\u53e5\u5f71\u54cd\u7684\u884c\u6570\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW STATUS LIKE 'Innodb_rows_%';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(17719).A+"",width:"1068",height:"189"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Com_xxxx\uff1a\u8fd9\u4e9b\u53c2\u6570\u5bf9\u4e8e\u6240\u6709\u5b58\u50a8\u5f15\u64ce\u7684\u8868\u64cd\u4f5c\u90fd\u4f1a\u8fdb\u884c\u7d2f\u8ba1"}),"\n",(0,i.jsx)(e.p,{children:"Innodb_xxxx\uff1a\u8fd9\u51e0\u4e2a\u53c2\u6570\u53ea\u662f\u9488\u5bf9 InnoDB \u5b58\u50a8\u5f15\u64ce\u7684\uff0c\u7d2f\u52a0\u7684\u7b97\u6cd5\u4e5f\u7565\u6709\u4e0d\u540c"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{style:{textAlign:"left"},children:"\u53c2\u6570"}),(0,i.jsx)(e.th,{children:"\u542b\u4e49"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Com_select"}),(0,i.jsx)(e.td,{children:"\u6267\u884c SELECT \u64cd\u4f5c\u7684\u6b21\u6570\uff0c\u4e00\u6b21\u67e5\u8be2\u53ea\u7d2f\u52a0 1"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Com_insert"}),(0,i.jsx)(e.td,{children:"\u6267\u884c INSERT \u64cd\u4f5c\u7684\u6b21\u6570\uff0c\u5bf9\u4e8e\u6279\u91cf\u63d2\u5165\u7684 INSERT \u64cd\u4f5c\uff0c\u53ea\u7d2f\u52a0\u4e00\u6b21"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Com_update"}),(0,i.jsx)(e.td,{children:"\u6267\u884c UPDATE \u64cd\u4f5c\u7684\u6b21\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Com_delete"}),(0,i.jsx)(e.td,{children:"\u6267\u884c DELETE \u64cd\u4f5c\u7684\u6b21\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Innodb_rows_read"}),(0,i.jsx)(e.td,{children:"\u6267\u884c SELECT \u67e5\u8be2\u8fd4\u56de\u7684\u884c\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Innodb_rows_inserted"}),(0,i.jsx)(e.td,{children:"\u6267\u884c INSERT \u64cd\u4f5c\u63d2\u5165\u7684\u884c\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Innodb_rows_updated"}),(0,i.jsx)(e.td,{children:"\u6267\u884c UPDATE \u64cd\u4f5c\u66f4\u65b0\u7684\u884c\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Innodb_rows_deleted"}),(0,i.jsx)(e.td,{children:"\u6267\u884c DELETE \u64cd\u4f5c\u5220\u9664\u7684\u884c\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Connections"}),(0,i.jsx)(e.td,{children:"\u8bd5\u56fe\u8fde\u63a5 MySQL \u670d\u52a1\u5668\u7684\u6b21\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Uptime"}),(0,i.jsx)(e.td,{children:"\u670d\u52a1\u5668\u5de5\u4f5c\u65f6\u95f4"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Slow_queries"}),(0,i.jsx)(e.td,{children:"\u6162\u67e5\u8be2\u7684\u6b21\u6570"})]})]})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5b9a\u4f4d\u4f4e\u6548",children:"\u5b9a\u4f4d\u4f4e\u6548"}),"\n",(0,i.jsx)(e.p,{children:"SQL \u6267\u884c\u6162\u6709\u4e24\u79cd\u60c5\u51b5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5076\u5c14\u6162\uff1aDB \u5728\u5237\u65b0\u810f\u9875\uff08\u5b66\u5b8c\u4e8b\u52a1\u5c31\u61c2\u4e86\uff09\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"redo log \u5199\u6ee1\u4e86"}),"\n",(0,i.jsx)(e.li,{children:"\u5185\u5b58\u4e0d\u591f\u7528\uff0c\u8981\u4ece LRU \u94fe\u8868\u4e2d\u6dd8\u6c70"}),"\n",(0,i.jsx)(e.li,{children:"MySQL \u8ba4\u4e3a\u7cfb\u7edf\u7a7a\u95f2\u7684\u65f6\u5019"}),"\n",(0,i.jsx)(e.li,{children:"MySQL \u5173\u95ed\u65f6"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u4e00\u76f4\u6162\u7684\u539f\u56e0\uff1a\u7d22\u5f15\u6ca1\u6709\u8bbe\u8ba1\u597d\u3001SQL \u8bed\u53e5\u6ca1\u5199\u597d\u3001MySQL \u9009\u9519\u4e86\u7d22\u5f15"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\u5b9a\u4f4d\u6267\u884c\u6548\u7387\u8f83\u4f4e\u7684 SQL \u8bed\u53e5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6162\u65e5\u5fd7\u67e5\u8be2\uff1a \u6162\u67e5\u8be2\u65e5\u5fd7\u5728\u67e5\u8be2\u7ed3\u675f\u4ee5\u540e\u624d\u8bb0\u5f55\uff0c\u6267\u884c\u6548\u7387\u51fa\u73b0\u95ee\u9898\u65f6\u67e5\u8be2\u65e5\u5fd7\u5e76\u4e0d\u80fd\u5b9a\u4f4d\u95ee\u9898"}),"\n",(0,i.jsxs)(e.p,{children:["\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\uff1a\u4fee\u6539 .cnf \u6587\u4ef6 ",(0,i.jsx)(e.code,{children:"vim /etc/mysql/my.cnf"}),"\uff0c\u91cd\u542f MySQL \u670d\u52a1\u5668"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"slow_query_log=ON\nslow_query_log_file=/usr/local/mysql/var/localhost-slow.log\nlong_query_time=1\t#\u8bb0\u5f55\u8d85\u8fc7long_query_time\u79d2\u7684SQL\u8bed\u53e5\u7684\u65e5\u5fd7\nlog-queries-not-using-indexes = 1\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u547d\u4ee4\u914d\u7f6e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"mysql> SET slow_query_log=ON;\nmysql> SET GLOBAL slow_query_log=ON;\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u662f\u5426\u914d\u7f6e\u6210\u529f\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW VARIABLES LIKE '%query%'\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["SHOW PROCESSLIST\uff1a",(0,i.jsx)(e.strong,{children:"\u5b9e\u65f6\u67e5\u770b"}),"\u5f53\u524d MySQL \u5728\u8fdb\u884c\u7684\u8fde\u63a5\u7ebf\u7a0b\uff0c\u5305\u62ec\u7ebf\u7a0b\u7684\u72b6\u6001\u3001\u662f\u5426\u9501\u8868\u3001SQL \u7684\u6267\u884c\u60c5\u51b5\uff0c\u540c\u65f6\u5bf9\u4e00\u4e9b\u9501\u8868\u64cd\u4f5c\u8fdb\u884c\u4f18\u5316"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(87489).A+"",width:"1050",height:"167"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"explain",children:"EXPLAIN"}),"\n",(0,i.jsx)(e.h5,{id:"\u6267\u884c\u8ba1\u5212",children:"\u6267\u884c\u8ba1\u5212"}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7 EXPLAIN \u547d\u4ee4\u83b7\u53d6\u6267\u884c SQL \u8bed\u53e5\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u5728 SELECT \u8bed\u53e5\u6267\u884c\u8fc7\u7a0b\u4e2d\u5982\u4f55\u8fde\u63a5\u548c\u8fde\u63a5\u7684\u987a\u5e8f\uff0c\u6267\u884c\u8ba1\u5212\u5728\u4f18\u5316\u5668\u4f18\u5316\u5b8c\u6210\u540e\u3001\u6267\u884c\u5668\u4e4b\u524d\u751f\u6210\uff0c\u7136\u540e\u6267\u884c\u5668\u4f1a\u8c03\u7528\u5b58\u50a8\u5f15\u64ce\u68c0\u7d22\u6570\u636e"}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2 SQL \u8bed\u53e5\u7684\u6267\u884c\u8ba1\u5212\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM table_1 WHERE id = 1;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(33357).A+"",width:"1047",height:"130"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u5b57\u6bb5"}),(0,i.jsx)(e.th,{children:"\u542b\u4e49"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"id"}),(0,i.jsx)(e.td,{children:"SELECT \u7684\u5e8f\u5217\u53f7"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"select_type"}),(0,i.jsx)(e.td,{children:"\u8868\u793a SELECT \u7684\u7c7b\u578b"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"table"}),(0,i.jsx)(e.td,{children:"\u8bbf\u95ee\u6570\u636e\u5e93\u4e2d\u8868\u540d\u79f0\uff0c\u6709\u65f6\u53ef\u80fd\u662f\u7b80\u79f0\u6216\u8005\u4e34\u65f6\u8868\u540d\u79f0\uff08<table_name>\uff09"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"type"}),(0,i.jsx)(e.td,{children:"\u8868\u793a\u8868\u7684\u8fde\u63a5\u7c7b\u578b"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"possible_keys"}),(0,i.jsx)(e.td,{children:"\u8868\u793a\u67e5\u8be2\u65f6\uff0c\u53ef\u80fd\u4f7f\u7528\u7684\u7d22\u5f15"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"key"}),(0,i.jsx)(e.td,{children:"\u8868\u793a\u5b9e\u9645\u4f7f\u7528\u7684\u7d22\u5f15"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"key_len"}),(0,i.jsx)(e.td,{children:"\u7d22\u5f15\u5b57\u6bb5\u7684\u957f\u5ea6"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"ref"}),(0,i.jsx)(e.td,{children:"\u8868\u793a\u4e0e\u7d22\u5f15\u5217\u8fdb\u884c\u7b49\u503c\u5339\u914d\u7684\u5bf9\u8c61\uff0c\u5e38\u6570\u3001\u67d0\u4e2a\u5217\u3001\u51fd\u6570\u7b49\uff0ctype \u5fc5\u987b\u5728\uff08range, const] \u4e4b\u95f4\uff0c\u5de6\u95ed\u53f3\u5f00"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"rows"}),(0,i.jsxs)(e.td,{children:["\u626b\u63cf\u51fa\u7684\u884c\u6570\uff0c\u8868\u793a MySQL \u6839\u636e\u8868\u7edf\u8ba1\u4fe1\u606f\u53ca\u7d22\u5f15\u9009\u7528\u60c5\u51b5\uff0c",(0,i.jsx)(e.strong,{children:"\u4f30\u7b97"}),"\u7684\u627e\u5230\u6240\u9700\u7684\u8bb0\u5f55\u626b\u63cf\u7684\u884c\u6570"]})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"filtered"}),(0,i.jsx)(e.td,{children:"\u6761\u4ef6\u8fc7\u6ee4\u7684\u884c\u767e\u5206\u6bd4\uff0c\u5355\u8868\u67e5\u8be2\u6ca1\u610f\u4e49\uff0c\u7528\u4e8e\u8fde\u63a5\u67e5\u8be2\u4e2d\u5bf9\u9a71\u52a8\u8868\u7684\u6247\u51fa\u8fdb\u884c\u8fc7\u6ee4\uff0c\u67e5\u8be2\u4f18\u5316\u5668\u9884\u6d4b\u6240\u6709\u6247\u51fa\u503c\u6ee1\u8db3\u5269\u4f59\u67e5\u8be2\u6761\u4ef6\u7684\u767e\u5206\u6bd4\uff0c\u76f8\u4e58\u4ee5\u540e\u8868\u793a\u591a\u8868\u67e5\u8be2\u4e2d\u8fd8\u8981\u5bf9\u88ab\u9a71\u52a8\u6267\u884c\u67e5\u8be2\u7684\u6b21\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"extra"}),(0,i.jsx)(e.td,{children:"\u6267\u884c\u60c5\u51b5\u7684\u8bf4\u660e\u548c\u63cf\u8ff0"})]})]})]}),"\n",(0,i.jsxs)(e.p,{children:["MySQL ",(0,i.jsx)(e.strong,{children:"\u6267\u884c\u8ba1\u5212\u7684\u5c40\u9650"}),"\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53ea\u662f\u8ba1\u5212\uff0c\u4e0d\u662f\u6267\u884c SQL \u8bed\u53e5\uff0c\u53ef\u4ee5\u968f\u7740\u5e95\u5c42\u4f18\u5316\u5668\u8f93\u5165\u7684\u66f4\u6539\u800c\u66f4\u6539"}),"\n",(0,i.jsx)(e.li,{children:"EXPLAIN \u4e0d\u4f1a\u544a\u8bc9\u663e\u793a\u5173\u4e8e\u89e6\u53d1\u5668\u3001\u5b58\u50a8\u8fc7\u7a0b\u7684\u4fe1\u606f\u5bf9\u67e5\u8be2\u7684\u5f71\u54cd\u60c5\u51b5\uff0c \u4e0d\u8003\u8651\u5404\u79cd Cache"}),"\n",(0,i.jsxs)(e.li,{children:["EXPLAIN \u4e0d\u80fd\u663e\u793a MySQL \u5728\u6267\u884c\u67e5\u8be2\u65f6\u7684\u52a8\u6001\uff0c\u56e0\u4e3a\u6267\u884c\u8ba1\u5212\u5728\u6267\u884c",(0,i.jsx)(e.strong,{children:"\u67e5\u8be2\u4e4b\u524d\u751f\u6210"})]}),"\n",(0,i.jsx)(e.li,{children:"EXPALIN \u53ea\u80fd\u89e3\u91ca SELECT \u64cd\u4f5c\uff0c\u5176\u4ed6\u64cd\u4f5c\u8981\u91cd\u5199\u4e3a SELECT \u540e\u67e5\u770b\u6267\u884c\u8ba1\u5212"}),"\n",(0,i.jsxs)(e.li,{children:["EXPLAIN PLAN \u663e\u793a\u7684\u662f\u5728\u89e3\u91ca\u8bed\u53e5\u65f6\u6570\u636e\u5e93\u5c06\u5982\u4f55\u8fd0\u884c SQL \u8bed\u53e5\uff0c\u7531\u4e8e\u6267\u884c\u73af\u5883\u548c EXPLAIN PLAN \u73af\u5883\u7684\u4e0d\u540c\uff0c\u6b64\u8ba1\u5212\u53ef\u80fd\u4e0e SQL \u8bed\u53e5",(0,i.jsx)(e.strong,{children:"\u5b9e\u9645\u7684\u6267\u884c\u8ba1\u5212\u4e0d\u540c"}),"\uff0c\u90e8\u5206\u7edf\u8ba1\u4fe1\u606f\u662f\u4f30\u7b97\u7684\uff0c\u5e76\u975e\u7cbe\u786e\u503c"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"SHOW WARINGS\uff1a\u5728\u4f7f\u7528 EXPALIN \u547d\u4ee4\u540e\u6267\u884c\u8be5\u8bed\u53e5\uff0c\u53ef\u4ee5\u67e5\u8be2\u4e0e\u6267\u884c\u8ba1\u5212\u76f8\u5173\u7684\u62d3\u5c55\u4fe1\u606f\uff0c\u5c55\u793a\u51fa Level\u3001Code\u3001Message \u4e09\u4e2a\u5b57\u6bb5\uff0c\u5f53 Code \u4e3a 1003 \u65f6\uff0cMessage \u5b57\u6bb5\u5c55\u793a\u7684\u4fe1\u606f\u7c7b\u4f3c\u4e8e\u5c06\u67e5\u8be2\u8bed\u53e5\u91cd\u5199\u540e\u7684\u4fe1\u606f\uff0c\u4f46\u662f\u4e0d\u662f\u7b49\u4ef7\uff0c\u4e0d\u80fd\u6267\u884c\u590d\u5236\u8fc7\u6765\u8fd0\u884c"}),"\n",(0,i.jsx)(e.p,{children:"\u73af\u5883\u51c6\u5907\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(69436).A+"",width:"949",height:"270"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"id",children:"id"}),"\n",(0,i.jsx)(e.p,{children:"id \u4ee3\u8868 SQL \u6267\u884c\u7684\u987a\u5e8f\u7684\u6807\u8bc6\uff0c\u6bcf\u4e2a SELECT \u5173\u952e\u5b57\u5bf9\u5e94\u4e00\u4e2a\u552f\u4e00 id\uff0c\u6240\u4ee5\u5728\u540c\u4e00\u4e2a SELECT \u5173\u952e\u5b57\u4e2d\u7684\u8868\u7684 id \u90fd\u662f\u76f8\u540c\u7684\u3002SELECT \u540e\u7684 FROM \u53ef\u4ee5\u8ddf\u968f\u591a\u4e2a\u8868\uff0c\u6bcf\u4e2a\u8868\u90fd\u4f1a\u5bf9\u5e94\u4e00\u6761\u8bb0\u5f55\uff0c\u8fd9\u4e9b\u8bb0\u5f55\u7684 id \u90fd\u662f\u76f8\u540c\u7684\uff0c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"id \u76f8\u540c\u65f6\uff0c\u6267\u884c\u987a\u5e8f\u7531\u4e0a\u81f3\u4e0b\u3002\u8fde\u63a5\u67e5\u8be2\u7684\u6267\u884c\u8ba1\u5212\uff0c\u8bb0\u5f55\u7684 id \u503c\u90fd\u662f\u76f8\u540c\u7684\uff0c\u51fa\u73b0\u5728\u524d\u9762\u7684\u8868\u4e3a\u9a71\u52a8\u8868\uff0c\u540e\u9762\u4e3a\u88ab\u9a71\u52a8\u8868"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM t_role r, t_user u, user_role ur WHERE r.id = ur.role_id AND u.id = ur.user_id ;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(17092).A+"",width:"1323",height:"160"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"id \u4e0d\u540c\u65f6\uff0cid \u503c\u8d8a\u5927\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u8d8a\u5148\u88ab\u6267\u884c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM t_role WHERE id = (SELECT role_id FROM user_role WHERE user_id = (SELECT id FROM t_user WHERE username = 'stu1'))\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(79299).A+"",width:"1335",height:"181"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"id \u6709\u76f8\u540c\u4e5f\u6709\u4e0d\u540c\u65f6\uff0cid \u76f8\u540c\u7684\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e00\u7ec4\uff0c\u4ece\u4e0a\u5f80\u4e0b\u987a\u5e8f\u6267\u884c\uff1b\u5728\u6240\u6709\u7684\u7ec4\u4e2d\uff0cid \u7684\u503c\u8d8a\u5927\u7684\u7ec4\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u8d8a\u5148\u6267\u884c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM t_role r , (SELECT * FROM user_role ur WHERE ur.`user_id` = '2') a WHERE r.id = a.role_id ; \n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(38005).A+"",width:"1284",height:"169"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"id \u4e3a NULL \u65f6\u4ee3\u8868\u7684\u662f\u4e34\u65f6\u8868"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"select",children:"select"}),"\n",(0,i.jsx)(e.p,{children:"\u8868\u793a\u67e5\u8be2\u4e2d\u6bcf\u4e2a select \u5b50\u53e5\u7684\u7c7b\u578b\uff08\u7b80\u5355 OR \u590d\u6742\uff09"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"select_type"}),(0,i.jsx)(e.th,{children:"\u542b\u4e49"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"SIMPLE"}),(0,i.jsx)(e.td,{children:"\u7b80\u5355\u7684 SELECT \u67e5\u8be2\uff0c\u67e5\u8be2\u4e2d\u4e0d\u5305\u542b\u5b50\u67e5\u8be2\u6216\u8005 UNION"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"PRIMARY"}),(0,i.jsx)(e.td,{children:"\u67e5\u8be2\u4e2d\u82e5\u5305\u542b\u4efb\u4f55\u590d\u6742\u7684\u5b50\u67e5\u8be2\uff0c\u6700\u5916\u5c42\uff08\u4e5f\u5c31\u662f\u6700\u5de6\u4fa7\uff09\u67e5\u8be2\u6807\u8bb0\u4e3a\u8be5\u6807\u8bc6"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"UNION"}),(0,i.jsx)(e.td,{children:"\u5bf9\u4e8e UNION \u6216\u8005 UNION ALL \u7684\u590d\u6742\u67e5\u8be2\uff0c\u9664\u4e86\u6700\u5de6\u4fa7\u7684\u67e5\u8be2\uff0c\u5176\u4f59\u7684\u5c0f\u67e5\u8be2\u90fd\u662f UNION"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"UNION RESULT"}),(0,i.jsx)(e.td,{children:"UNION \u9700\u8981\u4f7f\u7528\u4e34\u65f6\u8868\u8fdb\u884c\u53bb\u91cd\uff0c\u4e34\u65f6\u8868\u7684\u662f UNION RESULT"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"DEPENDENT UNION"}),(0,i.jsx)(e.td,{children:"\u5bf9\u4e8e UNION \u6216\u8005 UNION ALL \u7684\u590d\u6742\u67e5\u8be2\uff0c\u5982\u679c\u5404\u4e2a\u5c0f\u67e5\u8be2\u90fd\u4f9d\u8d56\u5916\u5c42\u67e5\u8be2\uff0c\u662f\u76f8\u5173\u5b50\u67e5\u8be2\uff0c\u9664\u4e86\u6700\u5de6\u4fa7\u7684\u5c0f\u67e5\u8be2\u4e3a DEPENDENT SUBQUERY\uff0c\u5176\u4f59\u90fd\u662f DEPENDENT UNION"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"SUBQUERY"}),(0,i.jsx)(e.td,{children:"\u5b50\u67e5\u8be2\u4e0d\u662f\u76f8\u5173\u5b50\u67e5\u8be2\uff0c\u8be5\u5b50\u67e5\u8be2\u7b2c\u4e00\u4e2a SELECT \u4ee3\u8868\u7684\u67e5\u8be2\u5c31\u662f\u8fd9\u79cd\u7c7b\u578b\uff0c\u4f1a\u8fdb\u884c\u7269\u5316\uff08\u8be5\u5b50\u67e5\u8be2\u53ea\u9700\u8981\u6267\u884c\u4e00\u6b21\uff09"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"DEPENDENT SUBQUERY"}),(0,i.jsx)(e.td,{children:"\u5b50\u67e5\u8be2\u662f\u76f8\u5173\u5b50\u67e5\u8be2\uff0c\u8be5\u5b50\u67e5\u8be2\u7b2c\u4e00\u4e2a SELECT \u4ee3\u8868\u7684\u67e5\u8be2\u5c31\u662f\u8fd9\u79cd\u7c7b\u578b\uff0c\u4e0d\u4f1a\u7269\u5316\uff08\u8be5\u5b50\u67e5\u8be2\u9700\u8981\u6267\u884c\u591a\u6b21\uff09"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"DERIVED"}),(0,i.jsx)(e.td,{children:"\u5728 FROM \u5217\u8868\u4e2d\u5305\u542b\u7684\u5b50\u67e5\u8be2\uff0c\u88ab\u6807\u8bb0\u4e3a DERIVED\uff08\u884d\u751f\uff09\uff0c\u4e5f\u5c31\u662f\u751f\u6210\u7269\u5316\u6d3e\u751f\u8868\u7684\u8fd9\u4e2a\u5b50\u67e5\u8be2"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"MATERIALIZED"}),(0,i.jsx)(e.td,{children:"\u5c06\u5b50\u67e5\u8be2\u7269\u5316\u540e\u4e0e\u4e0e\u5916\u5c42\u8fdb\u884c\u8fde\u63a5\u67e5\u8be2\uff0c\u751f\u6210\u7269\u5316\u8868\u7684\u5b50\u67e5\u8be2"})]})]})]}),"\n",(0,i.jsxs)(e.p,{children:["\u5b50\u67e5\u8be2\u4e3a DERIVED\uff1a",(0,i.jsx)(e.code,{children:"SELECT * FROM (SELECT key1 FROM t1) AS derived_1 WHERE key1 > 10"})]}),"\n",(0,i.jsxs)(e.p,{children:["\u5b50\u67e5\u8be2\u4e3a MATERIALIZED\uff1a",(0,i.jsx)(e.code,{children:"SELECT * FROM t1 WHERE key1 IN (SELECT key1 FROM t2)"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"type",children:"type"}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u8868\u7684\u8bbf\u95ee\u65b9\u5f0f\uff0c\u8868\u793a MySQL \u5728\u8868\u4e2d\u627e\u5230\u6240\u9700\u884c\u7684\u65b9\u5f0f\uff0c\u53c8\u79f0\u8bbf\u95ee\u7c7b\u578b"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"type"}),(0,i.jsx)(e.th,{children:"\u542b\u4e49"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"ALL"}),(0,i.jsx)(e.td,{children:"\u5168\u8868\u626b\u63cf\uff0c\u5982\u679c\u662f InnoDB \u5f15\u64ce\u662f\u626b\u63cf\u805a\u7c07\u7d22\u5f15"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"index"}),(0,i.jsx)(e.td,{children:"\u53ef\u4ee5\u4f7f\u7528\u8986\u76d6\u7d22\u5f15\uff0c\u4f46\u9700\u8981\u626b\u63cf\u5168\u90e8\u7d22\u5f15"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"range"}),(0,i.jsx)(e.td,{children:"\u7d22\u5f15\u8303\u56f4\u626b\u63cf\uff0c\u5e38\u89c1\u4e8e between\u3001<\u3001> \u7b49\u7684\u67e5\u8be2"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"index_subquery"}),(0,i.jsx)(e.td,{children:"\u5b50\u67e5\u8be2\u53ef\u4ee5\u666e\u901a\u7d22\u5f15\uff0c\u5219\u5b50\u67e5\u8be2\u7684 type \u4e3a index_subquery"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"unique_subquery"}),(0,i.jsx)(e.td,{children:"\u5b50\u67e5\u8be2\u53ef\u4ee5\u4f7f\u7528\u4e3b\u952e\u6216\u552f\u4e00\u4e8c\u7ea7\u7d22\u5f15\uff0c\u5219\u5b50\u67e5\u8be2\u7684 type \u4e3a index_subquery"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"index_merge"}),(0,i.jsx)(e.td,{children:"\u7d22\u5f15\u5408\u5e76"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"ref_or_null"}),(0,i.jsx)(e.td,{children:"\u975e\u552f\u4e00\u6027\u7d22\u5f15\uff08\u666e\u901a\u4e8c\u7ea7\u7d22\u5f15\uff09\u5e76\u4e14\u53ef\u4ee5\u5b58\u50a8 NULL\uff0c\u8fdb\u884c\u7b49\u503c\u5339\u914d"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"ref"}),(0,i.jsx)(e.td,{children:"\u975e\u552f\u4e00\u6027\u7d22\u5f15\u4e0e\u5e38\u91cf\u7b49\u503c\u5339\u914d"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"eq_ref"}),(0,i.jsx)(e.td,{children:"\u552f\u4e00\u6027\u7d22\u5f15\uff08\u4e3b\u952e\u6216\u4e0d\u5b58\u50a8 NULL \u7684\u552f\u4e00\u4e8c\u7ea7\u7d22\u5f15\uff09\u8fdb\u884c\u7b49\u503c\u5339\u914d\uff0c\u5982\u679c\u4e8c\u7ea7\u7d22\u5f15\u662f\u8054\u5408\u7d22\u5f15\uff0c\u90a3\u4e48\u6240\u6709\u8054\u5408\u7684\u5217\u90fd\u8981\u8fdb\u884c\u7b49\u503c\u5339\u914d"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"const"}),(0,i.jsx)(e.td,{children:"\u901a\u8fc7\u4e3b\u952e\u6216\u8005\u552f\u4e00\u4e8c\u7ea7\u7d22\u5f15\u4e0e\u5e38\u91cf\u8fdb\u884c\u7b49\u503c\u5339\u914d"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"system"}),(0,i.jsx)(e.td,{children:"system \u662f const \u7c7b\u578b\u7684\u7279\u4f8b\uff0c\u5f53\u67e5\u8be2\u7684\u8868\u53ea\u6709\u4e00\u6761\u8bb0\u5f55\u7684\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528 system"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"NULL"}),(0,i.jsx)(e.td,{children:"MySQL \u5728\u4f18\u5316\u8fc7\u7a0b\u4e2d\u5206\u89e3\u8bed\u53e5\uff0c\u6267\u884c\u65f6\u751a\u81f3\u4e0d\u7528\u8bbf\u95ee\u8868\u6216\u7d22\u5f15"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:"\u4ece\u4e0a\u5230\u4e0b\uff0c\u6027\u80fd\u4ece\u5dee\u5230\u597d\uff0c\u4e00\u822c\u6765\u8bf4\u9700\u8981\u4fdd\u8bc1\u67e5\u8be2\u81f3\u5c11\u8fbe\u5230 range \u7ea7\u522b\uff0c \u6700\u597d\u8fbe\u5230 ref"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"key",children:"key"}),"\n",(0,i.jsx)(e.p,{children:"possible_keys\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6307\u51fa MySQL \u80fd\u4f7f\u7528\u54ea\u4e2a\u7d22\u5f15\u5728\u8868\u4e2d\u627e\u5230\u8bb0\u5f55\uff0c\u67e5\u8be2\u6d89\u53ca\u5230\u7684\u5b57\u6bb5\u4e0a\u82e5\u5b58\u5728\u7d22\u5f15\uff0c\u5219\u8be5\u7d22\u5f15\u5c06\u88ab\u5217\u51fa\uff0c\u4f46\u4e0d\u4e00\u5b9a\u88ab\u67e5\u8be2\u4f7f\u7528"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u8be5\u5217\u662f NULL\uff0c\u5219\u6ca1\u6709\u76f8\u5173\u7684\u7d22\u5f15"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"key\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u663e\u793a MySQL \u5728\u67e5\u8be2\u4e2d\u5b9e\u9645\u4f7f\u7528\u7684\u7d22\u5f15\uff0c\u82e5\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15\uff0c\u663e\u793a\u4e3a NULL"}),"\n",(0,i.jsxs)(e.li,{children:["\u67e5\u8be2\u4e2d\u82e5\u4f7f\u7528\u4e86",(0,i.jsx)(e.strong,{children:"\u8986\u76d6\u7d22\u5f15"}),"\uff0c\u5219\u8be5\u7d22\u5f15\u53ef\u80fd\u51fa\u73b0\u5728 key \u5217\u8868\uff0c\u4e0d\u51fa\u73b0\u5728 possible_keys"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"key_len\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8868\u793a\u7d22\u5f15\u4e2d\u4f7f\u7528\u7684\u5b57\u8282\u6570\uff0c\u53ef\u901a\u8fc7\u8be5\u5217\u8ba1\u7b97\u67e5\u8be2\u4e2d\u4f7f\u7528\u7684\u7d22\u5f15\u7684\u957f\u5ea6"}),"\n",(0,i.jsx)(e.li,{children:"key_len \u663e\u793a\u7684\u503c\u4e3a\u7d22\u5f15\u5b57\u6bb5\u7684\u6700\u5927\u53ef\u80fd\u957f\u5ea6\uff0c\u5e76\u975e\u5b9e\u9645\u4f7f\u7528\u957f\u5ea6\uff0c\u5373 key_len \u662f\u6839\u636e\u8868\u5b9a\u4e49\u8ba1\u7b97\u800c\u5f97\uff0c\u4e0d\u662f\u901a\u8fc7\u8868\u5185\u68c0\u7d22\u51fa\u7684"}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u4e0d\u635f\u5931\u7cbe\u786e\u6027\u7684\u524d\u63d0\u4e0b\uff0c\u957f\u5ea6\u8d8a\u77ed\u8d8a\u597d"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"extra",children:"Extra"}),"\n",(0,i.jsx)(e.p,{children:"\u5176\u4ed6\u7684\u989d\u5916\u7684\u6267\u884c\u8ba1\u5212\u4fe1\u606f\uff0c\u5728\u8be5\u5217\u5c55\u793a\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"No tables used\uff1a\u67e5\u8be2\u8bed\u53e5\u4e2d\u4f7f\u7528 FROM dual \u6216\u8005\u6ca1\u6709 FROM \u8bed\u53e5"}),"\n",(0,i.jsx)(e.li,{children:"Impossible WHERE\uff1a\u67e5\u8be2\u8bed\u53e5\u4e2d\u7684 WHERE \u5b50\u53e5\u6761\u4ef6\u6c38\u8fdc\u4e3a FALSE\uff0c\u4f1a\u5bfc\u81f4\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u884c"}),"\n",(0,i.jsxs)(e.li,{children:["Using index\uff1a\u8be5\u503c\u8868\u793a\u76f8\u5e94\u7684 SELECT \u64cd\u4f5c\u4e2d\u4f7f\u7528\u4e86",(0,i.jsx)(e.strong,{children:"\u8986\u76d6\u7d22\u5f15"}),"\uff08Covering Index\uff09"]}),"\n",(0,i.jsxs)(e.li,{children:["Using index condition\uff1a\u7b2c\u4e00\u79cd\u60c5\u51b5\u662f\u641c\u7d22\u6761\u4ef6\u4e2d\u867d\u7136\u51fa\u73b0\u4e86\u7d22\u5f15\u5217\uff0c\u4f46\u662f\u90e8\u5206\u6761\u4ef6\u65e0\u6cd5\u5f62\u6210\u626b\u63cf\u533a\u95f4\uff08",(0,i.jsx)(e.strong,{children:"\u7d22\u5f15\u5931\u6548"}),"\uff09\uff0c\u4f1a\u6839\u636e\u53ef\u7528\u7d22\u5f15\u7684\u6761\u4ef6\u5148\u641c\u7d22\u4e00\u904d\u518d\u5339\u914d\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15\u7684\u6761\u4ef6\uff0c\u56de\u8868\u67e5\u8be2\u6570\u636e\uff1b\u7b2c\u4e8c\u79cd\u662f\u4f7f\u7528\u4e86",(0,i.jsx)(e.strong,{children:"\u7d22\u5f15\u6761\u4ef6\u4e0b\u63a8"}),"\u4f18\u5316"]}),"\n",(0,i.jsx)(e.li,{children:"Using where\uff1a\u641c\u7d22\u7684\u6570\u636e\u9700\u8981\u5728 Server \u5c42\u5224\u65ad\uff0c\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15\u4e0b\u63a8"}),"\n",(0,i.jsx)(e.li,{children:"Using join buffer\uff1a\u8fde\u63a5\u67e5\u8be2\u88ab\u9a71\u52a8\u8868\u65e0\u6cd5\u5229\u7528\u7d22\u5f15\uff0c\u9700\u8981\u8fde\u63a5\u7f13\u51b2\u533a\u6765\u5b58\u50a8\u4e2d\u95f4\u7ed3\u679c"}),"\n",(0,i.jsx)(e.li,{children:"Using filesort\uff1a\u65e0\u6cd5\u5229\u7528\u7d22\u5f15\u5b8c\u6210\u6392\u5e8f\uff08\u4f18\u5316\u65b9\u5411\uff09\uff0c\u9700\u8981\u5bf9\u6570\u636e\u4f7f\u7528\u5916\u90e8\u6392\u5e8f\u7b97\u6cd5\uff0c\u5c06\u53d6\u5f97\u7684\u6570\u636e\u5728\u5185\u5b58\u6216\u78c1\u76d8\u4e2d\u8fdb\u884c\u6392\u5e8f"}),"\n",(0,i.jsxs)(e.li,{children:["Using temporary\uff1a\u8868\u793a MySQL \u9700\u8981\u4f7f\u7528\u4e34\u65f6\u8868\u6765\u5b58\u50a8\u7ed3\u679c\u96c6\uff0c\u5e38\u89c1\u4e8e",(0,i.jsx)(e.strong,{children:"\u6392\u5e8f\u3001\u53bb\u91cd\uff08UNION\uff09\u3001\u5206\u7ec4"}),"\u7b49\u573a\u666f"]}),"\n",(0,i.jsx)(e.li,{children:"Select tables optimized away\uff1a\u8bf4\u660e\u4ec5\u901a\u8fc7\u4f7f\u7528\u7d22\u5f15\uff0c\u4f18\u5316\u5668\u53ef\u80fd\u4ec5\u4ece\u805a\u5408\u51fd\u6570\u7ed3\u679c\u4e2d\u8fd4\u56de\u4e00\u884c"}),"\n",(0,i.jsx)(e.li,{children:"No tables used\uff1aQuery \u8bed\u53e5\u4e2d\u4f7f\u7528 from dual \u6216\u4e0d\u542b\u4efb\u4f55 from \u5b50\u53e5"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://www.cnblogs.com/ggjucheng/archive/2012/11/11/2765237.html",children:"https://www.cnblogs.com/ggjucheng/archive/2012/11/11/2765237.html"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"profiles",children:"PROFILES"}),"\n",(0,i.jsxs)(e.p,{children:["SHOW PROFILES \u80fd\u591f\u5728\u505a SQL \u4f18\u5316\u65f6\u5206\u6790\u5f53\u524d\u4f1a\u8bdd\u4e2d\u8bed\u53e5\u6267\u884c\u7684",(0,i.jsx)(e.strong,{children:"\u8d44\u6e90\u6d88\u8017"}),"\u60c5\u51b5"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u901a\u8fc7 have_profiling \u53c2\u6570\uff0c\u80fd\u591f\u770b\u5230\u5f53\u524d MySQL \u662f\u5426\u652f\u6301 profile\uff1a\n",(0,i.jsx)(e.img,{src:s(23982).A+"",width:"1059",height:"135"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u9ed8\u8ba4 profiling \u662f\u5173\u95ed\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7 set \u8bed\u53e5\u5728 Session \u7ea7\u522b\u5f00\u542f profiling\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(31161).A+"",width:"1055",height:"131"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SET profiling=1; #\u5f00\u542fprofiling \u5f00\u5173\uff1b\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6267\u884c SHOW PROFILES \u6307\u4ee4\uff0c \u6765\u67e5\u770b SQL \u8bed\u53e5\u6267\u884c\u7684\u8017\u65f6:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW PROFILES;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(60443).A+"",width:"1059",height:"221"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u5230\u8be5 SQL \u6267\u884c\u8fc7\u7a0b\u4e2d\u6bcf\u4e2a\u7ebf\u7a0b\u7684\u72b6\u6001\u548c\u6d88\u8017\u7684\u65f6\u95f4\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW PROFILE FOR QUERY query_id;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(59843).A+"",width:"1056",height:"385"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728\u83b7\u53d6\u5230\u6700\u6d88\u8017\u65f6\u95f4\u7684\u7ebf\u7a0b\u72b6\u6001\u540e\uff0cMySQL \u652f\u6301\u9009\u62e9 all\u3001cpu\u3001block io \u3001context switch\u3001page faults \u7b49\u7c7b\u578b\u67e5\u770b MySQL \u5728\u4f7f\u7528\u4ec0\u4e48\u8d44\u6e90\u4e0a\u8017\u8d39\u4e86\u8fc7\u9ad8\u7684\u65f6\u95f4\u3002\u4f8b\u5982\uff0c\u9009\u62e9\u67e5\u770b CPU \u7684\u8017\u8d39\u65f6\u95f4\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(98207).A+"",width:"1057",height:"379"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Status\uff1aSQL \u8bed\u53e5\u6267\u884c\u7684\u72b6\u6001"}),"\n",(0,i.jsx)(e.li,{children:"Durationsql\uff1a\u6267\u884c\u8fc7\u7a0b\u4e2d\u6bcf\u4e00\u4e2a\u6b65\u9aa4\u7684\u8017\u65f6"}),"\n",(0,i.jsx)(e.li,{children:"CPU_user\uff1a\u5f53\u524d\u7528\u6237\u5360\u6709\u7684 CPU"}),"\n",(0,i.jsx)(e.li,{children:"CPU_system\uff1a\u7cfb\u7edf\u5360\u6709\u7684 CPU"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"trace",children:"TRACE"}),"\n",(0,i.jsxs)(e.p,{children:["MySQL \u63d0\u4f9b\u4e86\u5bf9 SQL \u7684\u8ddf\u8e2a\uff0c \u901a\u8fc7 trace \u6587\u4ef6\u53ef\u4ee5\u67e5\u770b\u4f18\u5316\u5668",(0,i.jsx)(e.strong,{children:"\u751f\u6210\u6267\u884c\u8ba1\u5212\u7684\u8fc7\u7a0b"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6253\u5f00 trace \u529f\u80fd\uff0c\u8bbe\u7f6e\u683c\u5f0f\u4e3a JSON\uff0c\u5e76\u8bbe\u7f6e trace \u7684\u6700\u5927\u4f7f\u7528\u5185\u5b58\uff0c\u907f\u514d\u89e3\u6790\u8fc7\u7a0b\u4e2d\u56e0\u9ed8\u8ba4\u5185\u5b58\u8fc7\u5c0f\u800c\u4e0d\u80fd\u591f\u5b8c\u6574\u5c55\u793a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:'SET optimizer_trace="enabled=on",end_markers_in_json=ON;\t-- \u4f1a\u8bdd\u5185\u6709\u6548\nSET optimizer_trace_max_mem_size=1000000;\n'})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6267\u884c SQL \u8bed\u53e5\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM tb_item WHERE id < 4;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u68c0\u67e5 information_schema.optimizer_trace\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM information_schema.optimizer_trace \\G; -- \\G\u4ee3\u8868\u7ad6\u5217\u5c55\u793a\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u4fe1\u606f\u4e3b\u8981\u6709\u4e09\u4e2a\u9636\u6bb5\uff1aprepare \u9636\u6bb5\u3001optimize \u9636\u6bb5\uff08\u6210\u672c\u5206\u6790\uff09\u3001execute \u9636\u6bb5\uff08\u6267\u884c\uff09"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u7d22\u5f15\u4f18\u5316-1",children:"\u7d22\u5f15\u4f18\u5316"}),"\n",(0,i.jsx)(e.h4,{id:"\u521b\u5efa\u7d22\u5f15",children:"\u521b\u5efa\u7d22\u5f15"}),"\n",(0,i.jsx)(e.p,{children:"\u7d22\u5f15\u662f\u6570\u636e\u5e93\u4f18\u5316\u6700\u91cd\u8981\u7684\u624b\u6bb5\u4e4b\u4e00\uff0c\u901a\u8fc7\u7d22\u5f15\u901a\u5e38\u53ef\u4ee5\u5e2e\u52a9\u7528\u6237\u89e3\u51b3\u5927\u591a\u6570\u7684 MySQL \u7684\u6027\u80fd\u4f18\u5316\u95ee\u9898"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE TABLE `tb_seller` (\n\t`sellerid` varchar (100),\n\t`name` varchar (100),\n\t`nickname` varchar (50),\n\t`password` varchar (60),\n\t`status` varchar (1),\n\t`address` varchar (100),\n\t`createtime` datetime,\n    PRIMARY KEY(`sellerid`)\n)ENGINE=INNODB DEFAULT CHARSET=utf8mb4;\nINSERT INTO `tb_seller` (`sellerid`, `name`, `nickname`, `password`, `status`, `address`, `createtime`) values('xiaomi','\u5c0f\u7c73\u79d1\u6280','\u5c0f\u7c73\u5b98\u65b9\u65d7\u8230\u5e97','e10adc3949ba59abbe56e057f20f883e','1','\u897f\u5b89\u5e02','2088-01-01 12:00:00');\nCREATE INDEX idx_seller_name_sta_addr ON tb_seller(name, status, address); # \u8054\u5408\u7d22\u5f15\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(64860).A+"",width:"1233",height:"256"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u907f\u514d\u5931\u6548",children:"\u907f\u514d\u5931\u6548"}),"\n",(0,i.jsx)(e.h5,{id:"\u8bed\u53e5\u9519\u8bef",children:"\u8bed\u53e5\u9519\u8bef"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5168\u503c\u5339\u914d\uff1a\u5bf9\u7d22\u5f15\u4e2d\u6240\u6709\u5217\u90fd\u6307\u5b9a\u5177\u4f53\u503c\uff0c\u8fd9\u79cd\u60c5\u51b5\u7d22\u5f15\u751f\u6548\uff0c\u6267\u884c\u6548\u7387\u9ad8"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM tb_seller WHERE name='\u5c0f\u7c73\u79d1\u6280' AND status='1' AND address='\u897f\u5b89\u5e02';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(52942).A+"",width:"1308",height:"123"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u6700\u5de6\u524d\u7f00\u6cd5\u5219"}),"\uff1a\u8054\u5408\u7d22\u5f15\u9075\u5b88\u6700\u5de6\u524d\u7f00\u6cd5\u5219"]}),"\n",(0,i.jsx)(e.p,{children:"\u5339\u914d\u6700\u5de6\u524d\u7f00\u6cd5\u5219\uff0c\u8d70\u7d22\u5f15\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM tb_seller WHERE name='\u5c0f\u7c73\u79d1\u6280';\nEXPLAIN SELECT * FROM tb_seller WHERE name='\u5c0f\u7c73\u79d1\u6280' AND status='1';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(55365).A+"",width:"1268",height:"125"})}),"\n",(0,i.jsx)(e.p,{children:"\u8fdd\u6cd5\u6700\u5de6\u524d\u7f00\u6cd5\u5219 \uff0c \u7d22\u5f15\u5931\u6548\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM tb_seller WHERE status='1';\nEXPLAIN SELECT * FROM tb_seller WHERE status='1' AND address='\u897f\u5b89\u5e02';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(37852).A+"",width:"1020",height:"120"})}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u7b26\u5408\u6700\u5de6\u6cd5\u5219\uff0c\u4f46\u662f\u51fa\u73b0\u8df3\u8dc3\u67d0\u4e00\u5217\uff0c\u53ea\u6709\u6700\u5de6\u5217\u7d22\u5f15\u751f\u6548\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM tb_seller WHERE name='\u5c0f\u7c73\u79d1\u6280' AND address='\u897f\u5b89\u5e02';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(21459).A+"",width:"1343",height:"130"})}),"\n",(0,i.jsxs)(e.p,{children:["\u867d\u7136\u7d22\u5f15\u5217\u5931\u6548\uff0c\u4f46\u662f\u7cfb\u7edf\u4f1a",(0,i.jsx)(e.strong,{children:"\u4f7f\u7528\u4e86\u7d22\u5f15\u4e0b\u63a8\u8fdb\u884c\u4e86\u4f18\u5316"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u8303\u56f4\u67e5\u8be2"}),"\u53f3\u8fb9\u7684\u5217\uff0c\u4e0d\u80fd\u4f7f\u7528\u7d22\u5f15\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM tb_seller WHERE name='\u5c0f\u7c73\u79d1\u6280' AND status>'1' AND address='\u897f\u5b89\u5e02';\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6839\u636e\u524d\u9762\u7684\u4e24\u4e2a\u5b57\u6bb5 name \uff0c status \u67e5\u8be2\u662f\u8d70\u7d22\u5f15\u7684\uff0c \u4f46\u662f\u6700\u540e\u4e00\u4e2a\u6761\u4ef6 address \u6ca1\u6709\u7528\u5230\u7d22\u5f15\uff0c\u4f7f\u7528\u4e86\u7d22\u5f15\u4e0b\u63a8"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(70698).A+"",width:"1353",height:"116"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5728\u7d22\u5f15\u5217\u4e0a",(0,i.jsx)(e.strong,{children:"\u51fd\u6570\u6216\u8005\u8fd0\u7b97\uff08+ - \u6570\u503c\uff09\u64cd\u4f5c"}),"\uff0c \u7d22\u5f15\u5c06\u5931\u6548\uff1a\u4f1a\u7834\u574f\u7d22\u5f15\u503c\u7684\u6709\u5e8f\u6027"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM tb_seller WHERE SUBSTRING(name,3,2) = '\u79d1\u6280';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(19681).A+"",width:"1008",height:"116"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u5b57\u7b26\u4e32\u4e0d\u52a0\u5355\u5f15\u53f7"}),"\uff0c\u9020\u6210\u7d22\u5f15\u5931\u6548\uff1a\u9690\u5f0f\u7c7b\u578b\u8f6c\u6362\uff0c\u5f53\u5b57\u7b26\u4e32\u548c\u6570\u5b57\u6bd4\u8f83\u65f6\u4f1a",(0,i.jsx)(e.strong,{children:"\u628a\u5b57\u7b26\u4e32\u8f6c\u5316\u4e3a\u6570\u5b57"})]}),"\n",(0,i.jsx)(e.p,{children:"\u6ca1\u6709\u5bf9\u5b57\u7b26\u4e32\u52a0\u5355\u5f15\u53f7\uff0c\u67e5\u8be2\u4f18\u5316\u5668\u4f1a\u8c03\u7528 CAST \u51fd\u6570\u5c06 status \u8f6c\u6362\u4e3a int \u8fdb\u884c\u6bd4\u8f83\uff0c\u9020\u6210\u7d22\u5f15\u5931\u6548"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM tb_seller WHERE name='\u5c0f\u7c73\u79d1\u6280' AND status = 1;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(46968).A+"",width:"1343",height:"127"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5982\u679c status \u662f int \u7c7b\u578b\uff0cSQL \u4e3a ",(0,i.jsx)(e.code,{children:"SELECT * FROM tb_seller WHERE status = '1' "})," \u5e76\u4e0d\u4f1a\u9020\u6210\u7d22\u5f15\u5931\u6548\uff0c\u56e0\u4e3a\u4f1a\u5c06 ",(0,i.jsx)(e.code,{children:"'1'"})," \u8f6c\u6362\u4e3a ",(0,i.jsx)(e.code,{children:"1"}),"\uff0c\u5e76",(0,i.jsx)(e.strong,{children:"\u4e0d\u4f1a\u5bf9\u7d22\u5f15\u5217\u4ea7\u751f\u64cd\u4f5c"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u591a\u8868\u8fde\u63a5\u67e5\u8be2\u65f6\uff0c\u5982\u679c\u4e24\u5f20\u8868\u7684",(0,i.jsx)(e.strong,{children:"\u5b57\u7b26\u96c6\u4e0d\u540c"}),"\uff0c\u4f1a\u9020\u6210\u7d22\u5f15\u5931\u6548\uff0c\u56e0\u4e3a\u4f1a\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362"]}),"\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6cd5\uff1aCONVERT \u51fd\u6570\u662f\u52a0\u5728\u8f93\u5165\u53c2\u6570\u4e0a\u3001\u4fee\u6539\u8868\u7684\u5b57\u7b26\u96c6"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u7528 OR \u5206\u5272\u6761\u4ef6\uff0c\u7d22\u5f15\u5931\u6548"}),"\uff0c\u5bfc\u81f4\u5168\u8868\u67e5\u8be2\uff1a"]}),"\n",(0,i.jsx)(e.p,{children:"OR \u524d\u7684\u6761\u4ef6\u4e2d\u7684\u5217\u6709\u7d22\u5f15\u800c\u540e\u9762\u7684\u5217\u4e2d\u6ca1\u6709\u7d22\u5f15\u6216 OR \u524d\u540e\u4e24\u4e2a\u5217\u662f\u540c\u4e00\u4e2a\u590d\u5408\u7d22\u5f15\uff0c\u90fd\u9020\u6210\u7d22\u5f15\u5931\u6548"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM tb_seller WHERE name='\u963f\u91cc\u5df4\u5df4' OR createtime = '2088-01-01 12:00:00';\nEXPLAIN SELECT * FROM tb_seller WHERE name='\u5c0f\u7c73\u79d1\u6280' OR status='1';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(31084).A+"",width:"1095",height:"120"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"AND \u5206\u5272\u7684\u6761\u4ef6\u4e0d\u5f71\u54cd"}),"\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM tb_seller WHERE name='\u963f\u91cc\u5df4\u5df4' AND createtime = '2088-01-01 12:00:00';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(42709).A+"",width:"1273",height:"121"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u4ee5 % \u5f00\u5934\u7684 LIKE \u6a21\u7cca\u67e5\u8be2"}),"\uff0c\u7d22\u5f15\u5931\u6548\uff1a"]}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u662f\u5c3e\u90e8\u6a21\u7cca\u5339\u914d\uff0c\u7d22\u5f15\u4e0d\u4f1a\u5931\u6548\uff1b\u5982\u679c\u662f\u5934\u90e8\u6a21\u7cca\u5339\u914d\uff0c\u7d22\u5f15\u5931\u6548"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM tb_seller WHERE name like '%\u79d1\u6280%';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(22334).A+"",width:"1350",height:"253"})}),"\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6848\uff1a\u901a\u8fc7\u8986\u76d6\u7d22\u5f15\u6765\u89e3\u51b3"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT sellerid,name,status FROM tb_seller WHERE name like '%\u79d1\u6280%';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(98119).A+"",width:"1278",height:"128"})}),"\n",(0,i.jsx)(e.p,{children:"\u539f\u56e0\uff1a\u5728\u8986\u76d6\u7d22\u5f15\u7684\u8fd9\u68f5 B+ \u6570\u4e0a\u53ea\u9700\u8981\u8fdb\u884c like \u7684\u5339\u914d\uff0c\u6216\u8005\u662f\u57fa\u4e8e\u8986\u76d6\u7d22\u5f15\u67e5\u8be2\u518d\u8fdb\u884c WHERE \u7684\u5224\u65ad\u5c31\u53ef\u4ee5\u83b7\u5f97\u7ed3\u679c"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u7cfb\u7edf\u4f18\u5316-1",children:"\u7cfb\u7edf\u4f18\u5316"}),"\n",(0,i.jsx)(e.p,{children:"\u7cfb\u7edf\u4f18\u5316\u4e3a\u5168\u8868\u626b\u63cf\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5982\u679c MySQL \u8bc4\u4f30\u4f7f\u7528\u7d22\u5f15\u6bd4\u5168\u8868\u66f4\u6162\uff0c\u5219\u4e0d\u4f7f\u7528\u7d22\u5f15\uff0c\u7d22\u5f15\u5931\u6548\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE INDEX idx_address ON tb_seller(address);\nEXPLAIN SELECT * FROM tb_seller WHERE address='\u897f\u5b89\u5e02';\nEXPLAIN SELECT * FROM tb_seller WHERE address='\u5317\u4eac\u5e02';\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5317\u4eac\u5e02\u7684\u952e\u503c\u5360 9/10\uff08\u533a\u5206\u5ea6\u4f4e\uff09\uff0c\u6240\u4ee5\u4f18\u5316\u4e3a\u5168\u8868\u626b\u63cf\uff0ctype = ALL"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(18504).A+"",width:"1029",height:"255"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["IS  NULL\u3001IS NOT NULL  ",(0,i.jsx)(e.strong,{children:"\u6709\u65f6"}),"\u7d22\u5f15\u5931\u6548\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM tb_seller WHERE name IS NULL;\nEXPLAIN SELECT * FROM tb_seller WHERE name IS NOT NULL;\n"})}),"\n",(0,i.jsx)(e.p,{children:"NOT NULL \u5931\u6548\u7684\u539f\u56e0\u662f name \u5217\u5168\u90e8\u4e0d\u662f null\uff0c\u4f18\u5316\u4e3a\u5168\u8868\u626b\u63cf\uff0c\u5f53 NULL \u8fc7\u591a\u65f6\uff0cIS NULL \u5931\u6548"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(66897).A+"",width:"1342",height:"292"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"IN \u80af\u5b9a\u4f1a\u8d70\u7d22\u5f15\uff0c\u4f46\u662f\u5f53 IN \u7684\u53d6\u503c\u8303\u56f4\u8f83\u5927\u65f6\u4f1a\u5bfc\u81f4\u7d22\u5f15\u5931\u6548\uff0c\u8d70\u5168\u8868\u626b\u63cf\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM tb_seller WHERE sellerId IN ('alibaba','huawei');-- \u90fd\u8d70\u7d22\u5f15\nEXPLAIN SELECT * FROM tb_seller WHERE sellerId NOT IN ('alibaba','huawei');\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.a,{href:"https://time.geekbang.org/column/article/74687",children:"MySQL \u5b9e\u6218 45 \u8bb2"}),"\u8be5\u7ae0\u8282\u6700\u540e\u63d0\u51fa\u4e86\u4e00\u79cd\u6162\u67e5\u8be2\u573a\u666f\uff0c\u83b7\u53d6\u5230\u6570\u636e\u4ee5\u540e Server \u5c42\u8fd8\u4f1a\u505a\u5224\u65ad"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5e95\u5c42\u539f\u7406",children:"\u5e95\u5c42\u539f\u7406"}),"\n",(0,i.jsxs)(e.p,{children:["\u7d22\u5f15\u5931\u6548\u4e00\u822c\u662f\u9488\u5bf9\u8054\u5408\u7d22\u5f15\uff0c\u8054\u5408\u7d22\u5f15\u4e00\u822c\u7531\u51e0\u4e2a\u5b57\u6bb5\u7ec4\u6210\uff0c\u6392\u5e8f\u65b9\u5f0f\u662f\u5148\u6309\u7167\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u6392\u5e8f\u7b2c\u4e8c\u4e2a\uff0c\u4f9d\u6b64\u7c7b\u63a8\uff0c\u56fe\u793a\uff08a, b\uff09\u7d22\u5f15\uff0c",(0,i.jsx)(e.strong,{children:"a \u76f8\u7b49\u7684\u60c5\u51b5\u4e0b b \u662f\u6709\u5e8f\u7684"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(41464).A+"",width:"720",height:"370"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u6700\u5de6\u524d\u7f00\u6cd5\u5219\uff1a\u5f53\u4e0d\u5339\u914d\u524d\u9762\u7684\u5b57\u6bb5\u7684\u65f6\u5019\uff0c\u540e\u9762\u7684\u5b57\u6bb5\u90fd\u662f\u65e0\u5e8f\u7684\u3002\u8fd9\u79cd\u65e0\u5e8f\u4e0d\u4ec5\u4f53\u73b0\u5728\u53f6\u5b50\u8282\u70b9\uff0c\u4e5f\u4f1a",(0,i.jsx)(e.strong,{children:"\u5bfc\u81f4\u67e5\u8be2\u65f6\u626b\u63cf\u7684\u975e\u53f6\u5b50\u8282\u70b9\u4e5f\u662f\u65e0\u5e8f\u7684"}),"\uff0c\u56e0\u4e3a\u7d22\u5f15\u6811\u76f8\u5f53\u4e8e\u5ffd\u7565\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bb5\uff0c\u5c31\u65e0\u6cd5\u4f7f\u7528\u4e8c\u5206\u67e5\u627e"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u8303\u56f4\u67e5\u8be2\u53f3\u8fb9\u7684\u5217\uff0c\u4e0d\u80fd\u4f7f\u7528\u7d22\u5f15\uff0c\u6bd4\u5982\u8bed\u53e5\uff1a ",(0,i.jsx)(e.code,{children:"WHERE a > 1 AND b = 1 "}),"\uff0c\u5728 a \u5927\u4e8e 1 \u7684\u65f6\u5019\uff0cb \u662f\u65e0\u5e8f\u7684\uff0ca > 1 \u662f\u626b\u63cf\u65f6\u6709\u5e8f\u7684\uff0c\u4f46\u662f\u627e\u5230\u4ee5\u540e\u8fdb\u884c\u5bfb\u627e b \u65f6\uff0c\u7d22\u5f15\u6811\u5c31\u4e0d\u662f\u6709\u5e8f\u7684\u4e86"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(87219).A+"",width:"694",height:"249"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u4ee5 % \u5f00\u5934\u7684 LIKE \u6a21\u7cca\u67e5\u8be2\uff0c\u7d22\u5f15\u5931\u6548\uff0c\u6bd4\u5982\u8bed\u53e5\uff1a",(0,i.jsx)(e.code,{children:"WHERE a LIKE '%d'"}),"\uff0c\u524d\u9762\u7684\u4e0d\u786e\u5b9a\uff0c\u5bfc\u81f4\u4e0d\u7b26\u5408\u6700\u5de6\u5339\u914d\uff0c\u76f4\u63a5\u53bb\u7d22\u5f15\u4e2d\u641c\u7d22\u4ee5 d \u7ed3\u5c3e\u7684\u8282\u70b9\uff0c\u6240\u4ee5\u6ca1\u6709\u987a\u5e8f\n",(0,i.jsx)(e.img,{src:s(32010).A+"",width:"438",height:"130"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://mp.weixin.qq.com/s/B_M09dzLe9w7cT46rdGIeQ",children:"https://mp.weixin.qq.com/s/B_M09dzLe9w7cT46rdGIeQ"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u67e5\u770b\u7d22\u5f15",children:"\u67e5\u770b\u7d22\u5f15"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW STATUS LIKE 'Handler_read%';\t\nSHOW GLOBAL STATUS LIKE 'Handler_read%';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(19333).A+"",width:"452",height:"208"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Handler_read_first\uff1a\u7d22\u5f15\u4e2d\u7b2c\u4e00\u6761\u88ab\u8bfb\u7684\u6b21\u6570\uff0c\u5982\u679c\u8f83\u9ad8\uff0c\u8868\u793a\u670d\u52a1\u5668\u6b63\u6267\u884c\u5927\u91cf\u5168\u7d22\u5f15\u626b\u63cf\uff08\u8fd9\u4e2a\u503c\u8d8a\u4f4e\u8d8a\u597d\uff09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Handler_read_key\uff1a\u5982\u679c\u7d22\u5f15\u6b63\u5728\u5de5\u4f5c\uff0c\u8fd9\u4e2a\u503c\u4ee3\u8868\u4e00\u4e2a\u884c\u88ab\u7d22\u5f15\u503c\u8bfb\u7684\u6b21\u6570\uff0c\u503c\u8d8a\u4f4e\u8868\u793a\u7d22\u5f15\u4e0d\u7ecf\u5e38\u4f7f\u7528\uff08\u8fd9\u4e2a\u503c\u8d8a\u9ad8\u8d8a\u597d\uff09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Handler_read_next\uff1a\u6309\u7167\u952e\u987a\u5e8f\u8bfb\u4e0b\u4e00\u884c\u7684\u8bf7\u6c42\u6570\uff0c\u5982\u679c\u8303\u56f4\u7ea6\u675f\u6216\u6267\u884c\u7d22\u5f15\u626b\u63cf\u6765\u67e5\u8be2\u7d22\u5f15\u5217\uff0c\u503c\u589e\u52a0"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Handler_read_prev\uff1a\u6309\u7167\u952e\u987a\u5e8f\u8bfb\u524d\u4e00\u884c\u7684\u8bf7\u6c42\u6570\uff0c\u8be5\u8bfb\u65b9\u6cd5\u4e3b\u8981\u7528\u4e8e\u4f18\u5316 ORDER BY ... DESC"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Handler_read_rnd\uff1a\u6839\u636e\u56fa\u5b9a\u4f4d\u7f6e\u8bfb\u4e00\u884c\u7684\u8bf7\u6c42\u6570\uff0c\u5982\u679c\u6267\u884c\u5927\u91cf\u67e5\u8be2\u5e76\u5bf9\u7ed3\u679c\u8fdb\u884c\u6392\u5e8f\u5219\u8be5\u503c\u8f83\u9ad8\uff0c\u53ef\u80fd\u662f\u4f7f\u7528\u4e86\u5927\u91cf\u9700\u8981 MySQL \u626b\u63cf\u6574\u4e2a\u8868\u7684\u67e5\u8be2\u6216\u8fde\u63a5\uff0c\u8fd9\u4e2a\u503c\u8f83\u9ad8\u610f\u5473\u7740\u8fd0\u884c\u6548\u7387\u4f4e\uff0c\u5e94\u8be5\u5efa\u7acb\u7d22\u5f15\u6765\u89e3\u51b3"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Handler_read_rnd_next\uff1a\u5728\u6570\u636e\u6587\u4ef6\u4e2d\u8bfb\u4e0b\u4e00\u884c\u7684\u8bf7\u6c42\u6570\uff0c\u5982\u679c\u6b63\u8fdb\u884c\u5927\u91cf\u7684\u8868\u626b\u63cf\uff0c\u8be5\u503c\u8f83\u9ad8\uff0c\u8bf4\u660e\u8868\u7d22\u5f15\u4e0d\u6b63\u786e\u6216\u5199\u5165\u7684\u67e5\u8be2\u6ca1\u6709\u5229\u7528\u7d22\u5f15"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"sql-\u4f18\u5316",children:"SQL \u4f18\u5316"}),"\n",(0,i.jsx)(e.h4,{id:"\u81ea\u589e\u4e3b\u952e",children:"\u81ea\u589e\u4e3b\u952e"}),"\n",(0,i.jsx)(e.h5,{id:"\u81ea\u589e\u673a\u5236",children:"\u81ea\u589e\u673a\u5236"}),"\n",(0,i.jsx)(e.p,{children:"\u81ea\u589e\u4e3b\u952e\u53ef\u4ee5\u8ba9\u4e3b\u952e\u7d22\u5f15\u5c3d\u91cf\u5730\u4fdd\u6301\u5728\u6570\u636e\u9875\u4e2d\u9012\u589e\u987a\u5e8f\u63d2\u5165\uff0c\u4e0d\u81ea\u589e\u9700\u8981\u5bfb\u627e\u5176\u4ed6\u9875\u63d2\u5165\uff0c\u5bfc\u81f4\u968f\u673a IO \u548c\u9875\u5206\u88c2\u7684\u60c5\u51b5"}),"\n",(0,i.jsx)(e.p,{children:"\u8868\u7684\u7ed3\u6784\u5b9a\u4e49\u5b58\u653e\u5728\u540e\u7f00\u540d\u4e3a.frm \u7684\u6587\u4ef6\u4e2d\uff0c\u4f46\u662f\u5e76\u4e0d\u4f1a\u4fdd\u5b58\u81ea\u589e\u503c\uff0c\u4e0d\u540c\u7684\u5f15\u64ce\u5bf9\u4e8e\u81ea\u589e\u503c\u7684\u4fdd\u5b58\u7b56\u7565\u4e0d\u540c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"MyISAM \u5f15\u64ce\u7684\u81ea\u589e\u503c\u4fdd\u5b58\u5728\u6570\u636e\u6587\u4ef6\u4e2d"}),"\n",(0,i.jsx)(e.li,{children:"InnoDB \u5f15\u64ce\u7684\u81ea\u589e\u503c\u4fdd\u5b58\u5728\u4e86\u5185\u5b58\u91cc\uff0c\u6bcf\u6b21\u6253\u5f00\u8868\u90fd\u4f1a\u53bb\u627e\u81ea\u589e\u503c\u7684\u6700\u5927\u503c max(id)\uff0c\u7136\u540e\u5c06 max(id)+1 \u4f5c\u4e3a\u5f53\u524d\u7684\u81ea\u589e\u503c\uff1b8.0 \u7248\u672c\u540e\uff0c\u624d\u6709\u4e86\u81ea\u589e\u503c\u6301\u4e45\u5316\u7684\u80fd\u529b\uff0c\u5c06\u81ea\u589e\u503c\u7684\u53d8\u66f4\u8bb0\u5f55\u5728\u4e86 redo log \u4e2d\uff0c\u91cd\u542f\u7684\u65f6\u5019\u4f9d\u9760 redo log \u6062\u590d\u91cd\u542f\u4e4b\u524d\u7684\u503c"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u63d2\u5165\u4e00\u884c\u6570\u636e\u7684\u65f6\u5019\uff0c\u81ea\u589e\u503c\u7684\u884c\u4e3a\u5982\u4e0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u63d2\u5165\u6570\u636e\u65f6 id \u5b57\u6bb5\u6307\u5b9a\u4e3a 0\u3001null \u6216\u672a\u6307\u5b9a\u503c\uff0c\u90a3\u4e48\u5c31\u628a\u8fd9\u4e2a\u8868\u5f53\u524d\u7684 AUTO_INCREMENT \u503c\u586b\u5230\u81ea\u589e\u5b57\u6bb5"}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u63d2\u5165\u6570\u636e\u65f6 id \u5b57\u6bb5\u6307\u5b9a\u4e86\u5177\u4f53\u7684\u503c\uff0c\u6bd4\u5982\u67d0\u6b21\u8981\u63d2\u5165\u7684\u503c\u662f X\uff0c\u5f53\u524d\u7684\u81ea\u589e\u503c\u662f Y\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c X<Y\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8868\u7684\u81ea\u589e\u503c\u4e0d\u53d8"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c X\u2265Y\uff0c\u5c31\u9700\u8981\u628a\u5f53\u524d\u81ea\u589e\u503c\u4fee\u6539\u4e3a\u65b0\u7684\u81ea\u589e\u503c"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u53c2\u6570\u8bf4\u660e\uff1aauto_increment_offset \u548c auto_increment_increment \u5206\u522b\u8868\u793a\u81ea\u589e\u7684\u521d\u59cb\u503c\u548c\u6b65\u957f\uff0c\u9ed8\u8ba4\u503c\u90fd\u662f 1"}),"\n",(0,i.jsx)(e.p,{children:"\u8bed\u53e5\u6267\u884c\u5931\u8d25\u4e5f\u4e0d\u56de\u9000\u81ea\u589e id\uff0c\u6240\u4ee5\u4fdd\u8bc1\u4e86\u81ea\u589e id \u662f\u9012\u589e\u7684\uff0c\u4f46\u4e0d\u4fdd\u8bc1\u662f\u8fde\u7eed\u7684\uff08\u4e0d\u80fd\u56de\u9000\uff0c\u6240\u4ee5\u6709\u4e9b\u56de\u6eda\u4e8b\u52a1\u7684\u81ea\u589e id \u5c31\u4e0d\u4f1a\u91cd\u65b0\u4f7f\u7528\uff0c\u5bfc\u81f4\u51fa\u73b0\u4e0d\u8fde\u7eed\uff09"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u81ea\u589e-id",children:"\u81ea\u589e ID"}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u4e0d\u540c\u7684\u81ea\u589e id \u5728\u8fbe\u5230\u4e0a\u9650\u540e\u7684\u8868\u73b0\u4e0d\u540c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8868\u7684\u81ea\u589e id \u5982\u679c\u662f int \u7c7b\u578b\uff0c\u8fbe\u5230\u4e0a\u9650 2^32-1 \u540e\uff0c\u518d\u7533\u8bf7\u65f6\u503c\u5c31\u4e0d\u4f1a\u6539\u53d8\uff0c\u8fdb\u800c\u5bfc\u81f4\u7ee7\u7eed\u63d2\u5165\u6570\u636e\u65f6\u62a5\u4e3b\u952e\u51b2\u7a81\u7684\u9519\u8bef"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["row_id \u957f\u5ea6\u4e3a 6 \u4e2a\u5b57\u8282\uff0c\u8fbe\u5230\u4e0a\u9650\u540e\u5219\u4f1a\u5f52 0 \u518d\u91cd\u65b0\u9012\u589e\uff0c\u5982\u679c\u51fa\u73b0\u76f8\u540c\u7684 row_id\uff0c\u540e\u5199\u7684\u6570\u636e\u4f1a\u8986\u76d6\u4e4b\u524d\u7684\u6570\u636e\uff0c\u9020\u6210\u65e7\u6570\u636e\u4e22\u5931\uff0c\u5f71\u54cd\u7684\u662f\u6570\u636e\u53ef\u9760\u6027\uff0c\u6240\u4ee5\u5e94\u8be5\u5728 InnoDB \u8868\u4e2d\u4e3b\u52a8\u521b\u5efa\u81ea\u589e\u4e3b\u952e\u62a5\u4e3b\u952e\u51b2\u7a81\uff0c\u63d2\u5165\u5931\u8d25\u5f71\u54cd\u7684\u662f\u53ef\u7528\u6027\uff0c\u800c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c",(0,i.jsx)(e.strong,{children:"\u53ef\u9760\u6027\u4f18\u5148\u4e8e\u53ef\u7528\u6027"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Xid \u957f\u5ea6 8 \u5b57\u8282\uff0c\u7531 Server \u5c42\u7ef4\u62a4\uff0c\u53ea\u9700\u8981\u4e0d\u5728\u540c\u4e00\u4e2a binlog \u6587\u4ef6\u4e2d\u51fa\u73b0\u91cd\u590d\u503c\u5373\u53ef\uff0c\u867d\u7136\u7406\u8bba\u4e0a\u4f1a\u51fa\u73b0\u91cd\u590d\u503c\uff0c\u4f46\u662f\u6982\u7387\u6781\u5c0f"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"InnoDB \u7684 max_trx_id \u9012\u589e\u503c\u6bcf\u6b21 MySQL \u91cd\u542f\u90fd\u4f1a\u88ab\u4fdd\u5b58\u8d77\u6765\uff0c\u91cd\u542f\u4e5f\u4e0d\u4f1a\u91cd\u7f6e\u4e3a 0\uff0c\u6240\u4ee5\u4f1a\u5bfc\u81f4\u4e00\u76f4\u589e\u52a0\u5230\u8fbe\u4e0a\u9650\uff0c\u7136\u540e\u4ece 0 \u5f00\u59cb\uff0c\u8fd9\u65f6\u539f\u4e8b\u52a1 0 \u4fee\u6539\u7684\u6570\u636e\u5bf9\u5f53\u524d\u4e8b\u52a1\u5c31\u662f\u53ef\u89c1\u7684\uff0c\u4ea7\u751f\u810f\u8bfb\u7684\u73b0\u8c61"}),"\n",(0,i.jsx)(e.p,{children:"\u53ea\u8bfb\u4e8b\u52a1\u4e0d\u5206\u914d trx_id\uff0c\u6240\u4ee5 trx_id \u7684\u589e\u52a0\u901f\u5ea6\u53d8\u6162\u4e86"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"thread_id \u957f\u5ea6 4 \u4e2a\u5b57\u8282\uff0c\u5230\u8fbe\u4e0a\u9650\u540e\u5c31\u4f1a\u91cd\u7f6e\u4e3a 0\uff0cMySQL \u8bbe\u8ba1\u4e86\u4e00\u4e2a\u552f\u4e00\u6570\u7ec4\u7684\u903b\u8f91\uff0c\u7ed9\u65b0\u7ebf\u7a0b\u5206\u914d thread_id \u65f6\u505a\u5224\u65ad\uff0c\u4fdd\u8bc1\u4e0d\u4f1a\u51fa\u73b0\u4e24\u4e2a\u76f8\u540c\u7684 thread_id\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c++",children:"do {\n\tnew_id = thread_id_counter++;\n} while (!thread_ids.insert_unique(new_id).second);\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://time.geekbang.org/column/article/83183",children:"https://time.geekbang.org/column/article/83183"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u8986\u76d6\u7d22\u5f15-1",children:"\u8986\u76d6\u7d22\u5f15"}),"\n",(0,i.jsx)(e.p,{children:"\u590d\u5408\u7d22\u5f15\u53f6\u5b50\u8282\u70b9\u4e0d\u4ec5\u4fdd\u5b58\u4e86\u590d\u5408\u7d22\u5f15\u7684\u503c\uff0c\u8fd8\u6709\u4e3b\u952e\u7d22\u5f15\uff0c\u6240\u4ee5\u4f7f\u7528\u8986\u76d6\u7d22\u5f15\u7684\u65f6\u5019\uff0c\u52a0\u4e0a\u4e3b\u952e\u4e5f\u4f1a\u7528\u5230\u7d22\u5f15"}),"\n",(0,i.jsx)(e.p,{children:"\u5c3d\u91cf\u4f7f\u7528\u8986\u76d6\u7d22\u5f15\uff0c\u907f\u514d SELECT *\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT name,status,address FROM tb_seller WHERE name='\u5c0f\u7c73\u79d1\u6280' AND status='1' AND address='\u897f\u5b89\u5e02';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(48623).A+"",width:"1355",height:"124"})}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u67e5\u8be2\u5217\uff0c\u8d85\u51fa\u7d22\u5f15\u5217\uff0c\u4e5f\u4f1a\u964d\u4f4e\u6027\u80fd\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT name,status,address,password FROM tb_seller WHERE name='\u5c0f\u7c73\u79d1\u6280' AND status='1' AND address='\u897f\u5b89\u5e02';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(79878).A+"",width:"1417",height:"116"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u51cf\u5c11\u8bbf\u95ee",children:"\u51cf\u5c11\u8bbf\u95ee"}),"\n",(0,i.jsx)(e.p,{children:"\u907f\u514d\u5bf9\u6570\u636e\u8fdb\u884c\u91cd\u590d\u68c0\u7d22\uff1a\u80fd\u591f\u4e00\u6b21\u8fde\u63a5\u5c31\u83b7\u53d6\u5230\u7ed3\u679c\u7684\uff0c\u5c31\u4e0d\u7528\u4e24\u6b21\u8fde\u63a5\uff0c\u8fd9\u6837\u53ef\u4ee5\u5927\u5927\u51cf\u5c11\u5bf9\u6570\u636e\u5e93\u65e0\u7528\u7684\u91cd\u590d\u8bf7\u6c42"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u6570\u636e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT id,name FROM tb_book;\nSELECT id,status FROM tb_book; -- \u5411\u6570\u636e\u5e93\u63d0\u4ea4\u4e24\u6b21\u8bf7\u6c42\uff0c\u6570\u636e\u5e93\u5c31\u8981\u505a\u4e24\u6b21\u67e5\u8be2\u64cd\u4f5c\n-- > \u4f18\u5316\u4e3a:\nSELECT id,name,statu FROM tb_book;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u63d2\u5165\u6570\u636e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"INSERT INTO tb_test VALUES(1,'Tom');\nINSERT INTO tb_test VALUES(2,'Cat');\nINSERT INTO tb_test VALUES(3,'Jerry');\t-- \u8fde\u63a5\u4e09\u6b21\u6570\u636e\u5e93\n-- >\u4f18\u5316\u4e3a\nINSERT INTO tb_test VALUES(1,'Tom'),(2,'Cat')\uff0c(3,'Jerry');\t-- \u8fde\u63a5\u4e00\u6b21\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728\u4e8b\u52a1\u4e2d\u8fdb\u884c\u6570\u636e\u63d2\u5165\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"start transaction;\nINSERT INTO tb_test VALUES(1,'Tom');\nINSERT INTO tb_test VALUES(2,'Cat');\nINSERT INTO tb_test VALUES(3,'Jerry');\ncommit;\t-- \u624b\u52a8\u63d0\u4ea4\uff0c\u5206\u6bb5\u63d0\u4ea4\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u6709\u5e8f\u63d2\u5165\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"INSERT INTO tb_test VALUES(1,'Tom');\nINSERT INTO tb_test VALUES(2,'Cat');\nINSERT INTO tb_test VALUES(3,'Jerry');\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u589e\u52a0 cache \u5c42\uff1a\u5728\u5e94\u7528\u4e2d\u589e\u52a0\u7f13\u5b58\u5c42\u6765\u8fbe\u5230\u51cf\u8f7b\u6570\u636e\u5e93\u8d1f\u62c5\u7684\u76ee\u7684\u3002\u53ef\u4ee5\u90e8\u5206\u6570\u636e\u4ece\u6570\u636e\u5e93\u4e2d\u62bd\u53d6\u51fa\u6765\u653e\u5230\u5e94\u7528\u7aef\u4ee5\u6587\u672c\u65b9\u5f0f\u5b58\u50a8\uff0c\u6216\u8005\u4f7f\u7528\u6846\u67b6\uff08Mybatis\uff09\u63d0\u4f9b\u7684\u4e00\u7ea7\u7f13\u5b58 / \u4e8c\u7ea7\u7f13\u5b58\uff0c\u6216\u8005\u4f7f\u7528 Redis \u6570\u636e\u5e93\u6765\u7f13\u5b58\u6570\u636e"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6570\u636e\u63d2\u5165",children:"\u6570\u636e\u63d2\u5165"}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u4f7f\u7528 load \u547d\u4ee4\u5bfc\u5165\u6570\u636e\u7684\u65f6\u5019\uff0c\u9002\u5f53\u7684\u8bbe\u7f6e\u53ef\u4ee5\u63d0\u9ad8\u5bfc\u5165\u7684\u6548\u7387\uff1a"}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-\u4f18\u5316SQL load data.png)"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"LOAD DATA LOCAL INFILE = '/home/seazean/sql1.log' INTO TABLE `tb_user_1` FIELD TERMINATED BY ',' LINES TERMINATED BY '\\n'; -- \u6587\u4ef6\u683c\u5f0f\u5982\u4e0a\u56fe\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u4e8e InnoDB \u7c7b\u578b\u7684\u8868\uff0c\u6709\u4ee5\u4e0b\u51e0\u79cd\u65b9\u5f0f\u53ef\u4ee5\u63d0\u9ad8\u5bfc\u5165\u7684\u6548\u7387\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u4e3b\u952e\u987a\u5e8f\u63d2\u5165"}),"\uff1a\u56e0\u4e3a InnoDB \u7c7b\u578b\u7684\u8868\u662f\u6309\u7167\u4e3b\u952e\u7684\u987a\u5e8f\u4fdd\u5b58\u7684\uff0c\u6240\u4ee5\u5c06\u5bfc\u5165\u7684\u6570\u636e\u6309\u7167\u4e3b\u952e\u7684\u987a\u5e8f\u6392\u5217\uff0c\u53ef\u4ee5\u6709\u6548\u7684\u63d0\u9ad8\u5bfc\u5165\u6570\u636e\u7684\u6548\u7387\uff0c\u5982\u679c InnoDB \u8868\u6ca1\u6709\u4e3b\u952e\uff0c\u90a3\u4e48\u7cfb\u7edf\u4f1a\u81ea\u52a8\u9ed8\u8ba4\u521b\u5efa\u4e00\u4e2a\u5185\u90e8\u5217\u4f5c\u4e3a\u4e3b\u952e"]}),"\n",(0,i.jsxs)(e.p,{children:["\u4e3b\u952e\u662f\u5426\u8fde\u7eed\u5bf9\u6027\u80fd\u5f71\u54cd\u4e0d\u5927\uff0c\u53ea\u8981\u662f\u9012\u589e\u7684\u5c31\u53ef\u4ee5\uff0c\u6bd4\u5982\u96ea\u82b1\u7b97\u6cd5\u4ea7\u751f\u7684 ID \u4e0d\u662f\u8fde\u7eed\u7684\uff0c\u4f46\u662f\u662f\u9012\u589e\u7684\uff0c\u56e0\u4e3a\u9012\u589e\u53ef\u4ee5\u8ba9\u4e3b\u952e\u7d22\u5f15\u5c3d\u91cf\u5730\u4fdd\u6301\u987a\u5e8f\u63d2\u5165\uff0c",(0,i.jsx)(e.strong,{children:"\u907f\u514d\u4e86\u9875\u5206\u88c2"}),"\uff0c\u56e0\u6b64\u7d22\u5f15\u66f4\u7d27\u51d1"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u63d2\u5165 ID \u987a\u5e8f\u6392\u5217\u6570\u636e\uff1a"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(30467).A+"",width:"1203",height:"204"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u63d2\u5165 ID \u65e0\u5e8f\u6392\u5217\u6570\u636e\uff1a"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(39293).A+"",width:"1188",height:"205"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u5173\u95ed\u552f\u4e00\u6027\u6821\u9a8c"}),"\uff1a\u5728\u5bfc\u5165\u6570\u636e\u524d\u6267\u884c ",(0,i.jsx)(e.code,{children:"SET UNIQUE_CHECKS=0"}),"\uff0c\u5173\u95ed\u552f\u4e00\u6027\u6821\u9a8c\uff1b\u5bfc\u5165\u7ed3\u675f\u540e\u6267\u884c ",(0,i.jsx)(e.code,{children:"SET UNIQUE_CHECKS=1"}),"\uff0c\u6062\u590d\u552f\u4e00\u6027\u6821\u9a8c\uff0c\u53ef\u4ee5\u63d0\u9ad8\u5bfc\u5165\u7684\u6548\u7387\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(36437).A+"",width:"1181",height:"236"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u624b\u52a8\u63d0\u4ea4\u4e8b\u52a1"}),"\uff1a\u5982\u679c\u5e94\u7528\u4f7f\u7528\u81ea\u52a8\u63d0\u4ea4\u7684\u65b9\u5f0f\uff0c\u5efa\u8bae\u5728\u5bfc\u5165\u524d\u6267\u884c",(0,i.jsx)(e.code,{children:"SET AUTOCOMMIT=0"}),"\uff0c\u5173\u95ed\u81ea\u52a8\u63d0\u4ea4\uff1b\u5bfc\u5165\u7ed3\u675f\u540e\u518d\u6253\u5f00\u81ea\u52a8\u63d0\u4ea4\uff0c\u53ef\u4ee5\u63d0\u9ad8\u5bfc\u5165\u7684\u6548\u7387\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\u9700\u8981\u63a7\u5236\u5927\u5c0f\uff0c\u4e8b\u52a1\u592a\u5927\u53ef\u80fd\u4f1a\u5f71\u54cd\u6267\u884c\u7684\u6548\u7387\u3002MySQL \u6709 innodb_log_buffer_size \u914d\u7f6e\u9879\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u503c\u7684\u65e5\u5fd7\u4f1a\u5199\u5165\u78c1\u76d8\u6570\u636e\uff0c\u6548\u7387\u4f1a\u4e0b\u964d\uff0c\u6240\u4ee5\u5728\u4e8b\u52a1\u5927\u5c0f\u8fbe\u5230\u914d\u7f6e\u9879\u6570\u636e\u7ea7\u524d\u8fdb\u884c\u4e8b\u52a1\u63d0\u4ea4\u53ef\u4ee5\u63d0\u9ad8\u6548\u7387"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(5057).A+"",width:"1186",height:"318"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5206\u7ec4\u6392\u5e8f",children:"\u5206\u7ec4\u6392\u5e8f"}),"\n",(0,i.jsx)(e.h5,{id:"order",children:"ORDER"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u51c6\u5907\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE TABLE `emp` (\n  `id` INT(11) NOT NULL AUTO_INCREMENT,\n  `name` VARCHAR(100) NOT NULL,\n  `age` INT(3) NOT NULL,\n  `salary` INT(11) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=INNODB DEFAULT CHARSET=utf8mb4;\nINSERT INTO `emp` (`id`, `name`, `age`, `salary`) VALUES('1','Tom','25','2300');-- ...\nCREATE INDEX idx_emp_age_salary ON emp(age, salary);\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7b2c\u4e00\u79cd\u662f\u901a\u8fc7\u5bf9\u8fd4\u56de\u6570\u636e\u8fdb\u884c\u6392\u5e8f\uff0c\u6240\u6709\u4e0d\u901a\u8fc7\u7d22\u5f15\u76f4\u63a5\u8fd4\u56de\u7ed3\u679c\u7684\u6392\u5e8f\u90fd\u53eb FileSort \u6392\u5e8f\uff0c\u4f1a\u5728\u5185\u5b58\u4e2d\u91cd\u65b0\u6392\u5e8f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM emp ORDER BY age DESC;\t-- \u5e74\u9f84\u964d\u5e8f\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-\u4f18\u5316SQL ORDER BY\u6392\u5e8f1.png)"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u7b2c\u4e8c\u79cd\u901a\u8fc7\u6709\u5e8f\u7d22\u5f15\u987a\u5e8f\u626b\u63cf\u76f4\u63a5\u8fd4\u56de",(0,i.jsx)(e.strong,{children:"\u6709\u5e8f\u6570\u636e"}),"\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e3a Using index\uff0c\u4e0d\u9700\u8981\u989d\u5916\u6392\u5e8f\uff0c\u64cd\u4f5c\u6548\u7387\u9ad8"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT id, age, salary FROM emp ORDER BY age DESC;\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-\u4f18\u5316SQL ORDER BY\u6392\u5e8f2.png)"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u591a\u5b57\u6bb5\u6392\u5e8f\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT id,age,salary FROM emp ORDER BY age DESC, salary DESC;\nEXPLAIN SELECT id,age,salary FROM emp ORDER BY salary DESC, age DESC;\nEXPLAIN SELECT id,age,salary FROM emp ORDER BY age DESC, salary ASC;\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-\u4f18\u5316SQL ORDER BY\u6392\u5e8f3.png)"}),"\n",(0,i.jsxs)(e.p,{children:["\u5c3d\u91cf\u51cf\u5c11\u989d\u5916\u7684\u6392\u5e8f\uff0c\u901a\u8fc7\u7d22\u5f15\u76f4\u63a5\u8fd4\u56de\u6709\u5e8f\u6570\u636e\u3002",(0,i.jsx)(e.strong,{children:"\u9700\u8981\u6ee1\u8db3 Order by \u4f7f\u7528\u76f8\u540c\u7684\u7d22\u5f15\u3001Order By \u7684\u987a\u5e8f\u548c\u7d22\u5f15\u987a\u5e8f\u76f8\u540c\u3001Order  by \u7684\u5b57\u6bb5\u90fd\u662f\u5347\u5e8f\u6216\u90fd\u662f\u964d\u5e8f"}),"\uff0c\u5426\u5219\u9700\u8981\u989d\u5916\u7684\u64cd\u4f5c\uff0c\u5c31\u4f1a\u51fa\u73b0 FileSort"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"ORDER BY RAND() \u547d\u4ee4\u7528\u6765\u8fdb\u884c\u968f\u673a\u6392\u5e8f\uff0c\u4f1a\u4f7f\u7528\u4e86\u4e34\u65f6\u5185\u5b58\u8868\uff0c\u4e34\u65f6\u5185\u5b58\u8868\u6392\u5e8f\u7684\u65f6\u4f7f\u7528 rowid \u6392\u5e8f\u65b9\u6cd5"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4f18\u5316\u65b9\u5f0f\uff1a\u521b\u5efa\u5408\u9002\u7684\u7d22\u5f15\u80fd\u591f\u51cf\u5c11 Filesort \u7684\u51fa\u73b0\uff0c\u4f46\u662f\u67d0\u4e9b\u60c5\u51b5\u4e0b\u6761\u4ef6\u9650\u5236\u4e0d\u80fd\u8ba9 Filesort \u6d88\u5931\uff0c\u5c31\u8981\u52a0\u5feb Filesort \u7684\u6392\u5e8f\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"\u5185\u5b58\u4e34\u65f6\u8868\uff0cMySQL \u6709\u4e24\u79cd Filesort \u6392\u5e8f\u7b97\u6cd5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["rowid \u6392\u5e8f\uff1a\u9996\u5148\u6839\u636e\u6761\u4ef6\u53d6\u51fa\u6392\u5e8f\u5b57\u6bb5\u548c\u4fe1\u606f\uff0c\u7136\u540e\u5728",(0,i.jsxs)(e.strong,{children:["\u6392\u5e8f\u533a sort buffer\uff08Server \u5c42\uff09",(0,i.jsx)(e.strong,{children:"\u4e2d\u6392\u5e8f\uff0c\u5982\u679c sort buffer \u4e0d\u591f\uff0c\u5219\u5728\u4e34\u65f6\u8868 temporary table \u4e2d\u5b58\u50a8\u6392\u5e8f\u7ed3\u679c\u3002\u5b8c\u6210\u6392\u5e8f\u540e\u518d\u6839\u636e\u884c\u6307\u9488"}),"\u56de\u8868\u8bfb\u53d6\u8bb0\u5f55"]}),"\uff0c\u8be5\u64cd\u4f5c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5927\u91cf\u968f\u673a I/O \u64cd\u4f5c"]}),"\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\uff1a\u5bf9\u4e8e\u4e34\u65f6\u5185\u5b58\u8868\uff0c\u56de\u8868\u8fc7\u7a0b\u53ea\u662f\u7b80\u5355\u5730\u6839\u636e\u6570\u636e\u884c\u7684\u4f4d\u7f6e\uff0c\u76f4\u63a5\u8bbf\u95ee\u5185\u5b58\u5f97\u5230\u6570\u636e\uff0c\u4e0d\u4f1a\u5bfc\u81f4\u591a\u8bbf\u95ee\u78c1\u76d8\uff0c\u4f18\u5148\u9009\u62e9\u8be5\u65b9\u5f0f"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5168\u5b57\u6bb5\u6392\u5e8f\uff1a\u4e00\u6b21\u6027\u53d6\u51fa\u6ee1\u8db3\u6761\u4ef6\u7684\u6240\u6709\u6570\u636e\uff0c\u9700\u8981\u56de\u8868\uff0c\u7136\u540e\u5728\u6392\u5e8f\u533a sort  buffer \u4e2d\u6392\u5e8f\u540e\u76f4\u63a5\u8f93\u51fa\u7ed3\u679c\u96c6\u3002\u6392\u5e8f\u65f6\u5185\u5b58\u5f00\u9500\u8f83\u5927\uff0c\u4f46\u662f\u6392\u5e8f\u6548\u7387\u6bd4\u4e24\u6b21\u626b\u63cf\u7b97\u6cd5\u9ad8"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5177\u4f53\u7684\u9009\u62e9\u65b9\u5f0f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"MySQL \u901a\u8fc7\u6bd4\u8f83\u7cfb\u7edf\u53d8\u91cf max_length_for_sort_data \u7684\u5927\u5c0f\u548c Query \u8bed\u53e5\u53d6\u51fa\u7684\u5b57\u6bb5\u7684\u5927\u5c0f\uff0c\u6765\u5224\u5b9a\u4f7f\u7528\u54ea\u79cd\u6392\u5e8f\u7b97\u6cd5\u3002\u5982\u679c\u524d\u8005\u5927\uff0c\u5219\u8bf4\u660e sort  buffer \u7a7a\u95f4\u8db3\u591f\uff0c\u4f7f\u7528\u7b2c\u4e8c\u79cd\u4f18\u5316\u4e4b\u540e\u7684\u7b97\u6cd5\uff0c\u5426\u5219\u4f7f\u7528\u7b2c\u4e00\u79cd\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u53ef\u4ee5\u9002\u5f53\u63d0\u9ad8 sort_buffer_size  \u548c max_length_for_sort_data \u7cfb\u7edf\u53d8\u91cf\uff0c\u6765\u589e\u5927\u6392\u5e8f\u533a\u7684\u5927\u5c0f\uff0c\u63d0\u9ad8\u6392\u5e8f\u7684\u6548\u7387"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SET @@max_length_for_sort_data = 10000; \t\t-- \u8bbe\u7f6e\u5168\u5c40\u53d8\u91cf\nSET max_length_for_sort_data = 10240; \t\t\t-- \u8bbe\u7f6e\u4f1a\u8bdd\u53d8\u91cf\nSHOW VARIABLES LIKE 'max_length_for_sort_data';\t-- \u9ed8\u8ba41024\nSHOW VARIABLES LIKE 'sort_buffer_size';\t\t\t-- \u9ed8\u8ba4262114\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u78c1\u76d8\u4e34\u65f6\u8868\uff1a\u6392\u5e8f\u4f7f\u7528\u4f18\u5148\u961f\u5217\uff08\u5806\uff09\u7684\u65b9\u5f0f"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"group",children:"GROUP"}),"\n",(0,i.jsx)(e.p,{children:"GROUP BY \u4e5f\u4f1a\u8fdb\u884c\u6392\u5e8f\u64cd\u4f5c\uff0c\u4e0e ORDER BY \u76f8\u6bd4\uff0cGROUP BY \u4e3b\u8981\u53ea\u662f\u591a\u4e86\u6392\u5e8f\u4e4b\u540e\u7684\u5206\u7ec4\u64cd\u4f5c\uff0c\u6240\u4ee5\u5728 GROUP BY \u7684\u5b9e\u73b0\u8fc7\u7a0b\u4e2d\uff0c\u4e0e ORDER BY \u4e00\u6837\u4e5f\u53ef\u4ee5\u5229\u7528\u5230\u7d22\u5f15"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5206\u7ec4\u67e5\u8be2\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"DROP INDEX idx_emp_age_salary ON emp;\nEXPLAIN SELECT age,COUNT(*) FROM emp GROUP BY age;\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-\u4f18\u5316SQL GROUP BY\u6392\u5e8f1.png)"}),"\n",(0,i.jsx)(e.p,{children:"Using temporary\uff1a\u8868\u793a MySQL \u9700\u8981\u4f7f\u7528\u4e34\u65f6\u8868\uff08\u4e0d\u662f sort buffer\uff09\u6765\u5b58\u50a8\u7ed3\u679c\u96c6\uff0c\u5e38\u89c1\u4e8e\u6392\u5e8f\u548c\u5206\u7ec4\u67e5\u8be2"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u5305\u542b GROUP BY \u4f46\u662f\u7528\u6237\u60f3\u8981\u907f\u514d\u6392\u5e8f\u7ed3\u679c\u7684\u6d88\u8017\uff0c \u5219\u53ef\u4ee5\u6267\u884c ORDER BY NULL \u7981\u6b62\u6392\u5e8f\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT age,COUNT(*) FROM emp GROUP BY age ORDER BY NULL;\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-\u4f18\u5316SQL GROUP BY\u6392\u5e8f2.png)"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u7d22\u5f15\uff1a\u7d22\u5f15\u672c\u8eab\u6709\u5e8f\uff0c\u4e0d\u9700\u8981\u4e34\u65f6\u8868\uff0c\u4e5f\u4e0d\u9700\u8981\u518d\u989d\u5916\u6392\u5e8f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE INDEX idx_emp_age_salary ON emp(age, salary);\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-\u4f18\u5316SQL GROUP BY\u6392\u5e8f3.png)"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u91cf\u5f88\u5927\u65f6\uff0c\u4f7f\u7528 SQL_BIG_RESULT \u63d0\u793a\u4f18\u5316\u5668\u76f4\u63a5\u4f7f\u7528\u76f4\u63a5\u7528\u78c1\u76d8\u4e34\u65f6\u8868"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u8054\u5408\u67e5\u8be2-1",children:"\u8054\u5408\u67e5\u8be2"}),"\n",(0,i.jsxs)(e.p,{children:["\u5bf9\u4e8e\u5305\u542b OR \u7684\u67e5\u8be2\u5b50\u53e5\uff0c\u5982\u679c\u8981\u5229\u7528\u7d22\u5f15\uff0c\u5219 OR \u4e4b\u95f4\u7684",(0,i.jsx)(e.strong,{children:"\u6bcf\u4e2a\u6761\u4ef6\u5217\u90fd\u5fc5\u987b\u7528\u5230\u7d22\u5f15\uff0c\u800c\u4e14\u4e0d\u80fd\u4f7f\u7528\u5230\u6761\u4ef6\u4e4b\u95f4\u7684\u590d\u5408\u7d22\u5f15"}),"\uff0c\u5982\u679c\u6ca1\u6709\u7d22\u5f15\uff0c\u5219\u5e94\u8be5\u8003\u8651\u589e\u52a0\u7d22\u5f15"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM emp WHERE id = 1 OR age = 30;\t-- \u4e24\u4e2a\u7d22\u5f15\uff0c\u5e76\u4e14\u4e0d\u662f\u590d\u5408\u7d22\u5f15\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-\u4f18\u5316SQL OR\u6761\u4ef6\u67e5\u8be21.png)"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"Extra: Using sort_union(idx_emp_age_salary,PRIMARY); Using where\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528 UNION \u66ff\u6362 OR\uff0c\u6c42\u5e76\u96c6\uff1a"}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u8be5\u4f18\u5316\u53ea\u9488\u5bf9\u591a\u4e2a\u7d22\u5f15\u5217\u6709\u6548\uff0c\u5982\u679c\u6709\u5217\u6ca1\u6709\u88ab\u7d22\u5f15\uff0c\u67e5\u8be2\u6548\u7387\u53ef\u80fd\u4f1a\u56e0\u4e3a\u6ca1\u6709\u9009\u62e9 OR \u800c\u964d\u4f4e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM emp WHERE id = 1 UNION SELECT * FROM emp WHERE age = 30;\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-\u4f18\u5316SQL OR\u6761\u4ef6\u67e5\u8be22.png)"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"UNION \u8981\u4f18\u4e8e OR \u7684\u539f\u56e0\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"UNION \u8bed\u53e5\u7684 type \u503c\u4e3a ref\uff0cOR \u8bed\u53e5\u7684 type \u503c\u4e3a range"}),"\n",(0,i.jsx)(e.li,{children:"UNION \u8bed\u53e5\u7684 ref \u503c\u4e3a const\uff0cOR \u8bed\u53e5\u7684 ref \u503c\u4e3a null\uff0cconst \u8868\u793a\u662f\u5e38\u91cf\u503c\u5f15\u7528\uff0c\u975e\u5e38\u5feb"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5d4c\u5957\u67e5\u8be2-1",children:"\u5d4c\u5957\u67e5\u8be2"}),"\n",(0,i.jsx)(e.p,{children:"MySQL 4.1 \u7248\u672c\u4e4b\u540e\uff0c\u5f00\u59cb\u652f\u6301 SQL \u7684\u5b50\u67e5\u8be2"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53ef\u4ee5\u4f7f\u7528 SELECT \u8bed\u53e5\u6765\u521b\u5efa\u4e00\u4e2a\u5355\u5217\u7684\u67e5\u8be2\u7ed3\u679c\uff0c\u7136\u540e\u628a\u7ed3\u679c\u4f5c\u4e3a\u8fc7\u6ee4\u6761\u4ef6\u7528\u5728\u53e6\u4e00\u4e2a\u67e5\u8be2\u4e2d"}),"\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u5b50\u67e5\u8be2\u53ef\u4ee5\u4e00\u6b21\u6027\u7684\u5b8c\u6210\u903b\u8f91\u4e0a\u9700\u8981\u591a\u4e2a\u6b65\u9aa4\u624d\u80fd\u5b8c\u6210\u7684 SQL \u64cd\u4f5c\uff0c\u540c\u65f6\u4e5f\u53ef\u4ee5\u907f\u514d\u4e8b\u52a1\u6216\u8005\u8868\u9501\u6b7b"}),"\n",(0,i.jsxs)(e.li,{children:["\u5728\u6709\u4e9b\u60c5\u51b5\u4e0b\uff0c",(0,i.jsx)(e.strong,{children:"\u5b50\u67e5\u8be2\u662f\u53ef\u4ee5\u88ab\u66f4\u9ad8\u6548\u7684\u8fde\u63a5\uff08JOIN\uff09\u66ff\u4ee3"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4f8b\u5982\u67e5\u627e\u6709\u89d2\u8272\u7684\u6240\u6709\u7684\u7528\u6237\u4fe1\u606f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u8ba1\u5212\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM t_user WHERE id IN (SELECT user_id FROM user_role);\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(4778).A+"",width:"1187",height:"144"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f18\u5316\u540e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM t_user u , user_role ur WHERE u.id = ur.user_id;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(19009).A+"",width:"1081",height:"137"})}),"\n",(0,i.jsxs)(e.p,{children:["\u8fde\u63a5\u67e5\u8be2\u4e4b\u6240\u4ee5\u6548\u7387\u66f4\u9ad8 \uff0c\u662f\u56e0\u4e3a",(0,i.jsx)(e.strong,{children:"\u4e0d\u9700\u8981\u5728\u5185\u5b58\u4e2d\u521b\u5efa\u4e34\u65f6\u8868"}),"\u6765\u5b8c\u6210\u903b\u8f91\u4e0a\u9700\u8981\u4e24\u4e2a\u6b65\u9aa4\u7684\u67e5\u8be2\u5de5\u4f5c"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5206\u9875\u67e5\u8be2-1",children:"\u5206\u9875\u67e5\u8be2"}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u822c\u5206\u9875\u67e5\u8be2\u65f6\uff0c\u901a\u8fc7\u521b\u5efa\u8986\u76d6\u7d22\u5f15\u80fd\u591f\u6bd4\u8f83\u597d\u5730\u63d0\u9ad8\u6027\u80fd"}),"\n",(0,i.jsxs)(e.p,{children:["\u4e00\u4e2a\u5e38\u89c1\u7684\u95ee\u9898\u662f ",(0,i.jsx)(e.code,{children:"LIMIT 200000,10"}),"\uff0c\u6b64\u65f6\u9700\u8981 MySQL \u626b\u63cf\u524d 200010 \u8bb0\u5f55\uff0c\u4ec5\u4ec5\u8fd4\u56de 200000 - 200010 \u4e4b\u95f4\u7684\u8bb0\u5f55\uff0c\u5176\u4ed6\u8bb0\u5f55\u4e22\u5f03\uff0c\u67e5\u8be2\u6392\u5e8f\u7684\u4ee3\u4ef7\u975e\u5e38\u5927"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5206\u9875\u67e5\u8be2\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM tb_user_1 LIMIT 200000,10;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(86318).A+"",width:"984",height:"123"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f18\u5316\u65b9\u5f0f\u4e00\uff1a\u5185\u8fde\u63a5\u67e5\u8be2\uff0c\u5728\u7d22\u5f15\u5217 id \u4e0a\u5b8c\u6210\u6392\u5e8f\u5206\u9875\u64cd\u4f5c\uff0c\u6700\u540e\u6839\u636e\u4e3b\u952e\u5173\u8054\u56de\u539f\u8868\u67e5\u8be2\u6240\u9700\u8981\u7684\u5176\u4ed6\u5217\u5185\u5bb9"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM tb_user_1 t,(SELECT id FROM tb_user_1 ORDER BY id LIMIT 200000,10) a WHERE t.id = a.id;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(56677).A+"",width:"1067",height:"162"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f18\u5316\u65b9\u5f0f\u4e8c\uff1a\u65b9\u6848\u9002\u7528\u4e8e\u4e3b\u952e\u81ea\u589e\u7684\u8868\uff0c\u53ef\u4ee5\u628a LIMIT \u67e5\u8be2\u8f6c\u6362\u6210\u67d0\u4e2a\u4f4d\u7f6e\u7684\u67e5\u8be2"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM tb_user_1 WHERE id > 200000 LIMIT 10;\t\t\t-- \u5199\u6cd5 1\nEXPLAIN SELECT * FROM tb_user_1 WHERE id BETWEEN 200000 and 200010;\t-- \u5199\u6cd5 2\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(73788).A+"",width:"1058",height:"120"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u4f7f\u7528\u63d0\u793a",children:"\u4f7f\u7528\u63d0\u793a"}),"\n",(0,i.jsx)(e.p,{children:"SQL \u63d0\u793a\uff0c\u662f\u4f18\u5316\u6570\u636e\u5e93\u7684\u4e00\u4e2a\u91cd\u8981\u624b\u6bb5\uff0c\u5c31\u662f\u5728 SQL \u8bed\u53e5\u4e2d\u52a0\u5165\u4e00\u4e9b\u63d0\u793a\u6765\u8fbe\u5230\u4f18\u5316\u64cd\u4f5c\u7684\u76ee\u7684"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"USE INDEX\uff1a\u5728\u67e5\u8be2\u8bed\u53e5\u4e2d\u8868\u540d\u7684\u540e\u9762\u6dfb\u52a0 USE INDEX \u6765\u63d0\u4f9b MySQL \u53bb\u53c2\u8003\u7684\u7d22\u5f15\u5217\u8868\uff0c\u53ef\u4ee5\u8ba9 MySQL \u4e0d\u518d\u8003\u8651\u5176\u4ed6\u53ef\u7528\u7684\u7d22\u5f15"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE INDEX idx_seller_name ON tb_seller(name);\nEXPLAIN SELECT * FROM tb_seller USE INDEX(idx_seller_name) WHERE name='\u5c0f\u7c73\u79d1\u6280';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(6857).A+"",width:"1068",height:"119"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"IGNORE INDEX\uff1a\u8ba9 MySQL \u5ffd\u7565\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u7d22\u5f15\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 IGNORE INDEX \u4f5c\u4e3a\u63d0\u793a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM tb_seller IGNORE INDEX(idx_seller_name) WHERE name = '\u5c0f\u7c73\u79d1\u6280';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(16146).A+"",width:"1207",height:"117"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"FORCE INDEX\uff1a\u5f3a\u5236 MySQL \u4f7f\u7528\u4e00\u4e2a\u7279\u5b9a\u7684\u7d22\u5f15"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"EXPLAIN SELECT * FROM tb_seller FORCE INDEX(idx_seller_name_sta_addr) WHERE NAME='\u5c0f\u7c73\u79d1\u6280';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(30363).A+"",width:"1210",height:"123"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u7edf\u8ba1\u8ba1\u6570",children:"\u7edf\u8ba1\u8ba1\u6570"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u4e0d\u540c\u7684 MySQL \u5f15\u64ce\u4e2d\uff0ccount(*) \u6709\u4e0d\u540c\u7684\u5b9e\u73b0\u65b9\u5f0f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"MyISAM \u5f15\u64ce\u628a\u4e00\u4e2a\u8868\u7684\u603b\u884c\u6570\u5b58\u5728\u4e86\u78c1\u76d8\u4e0a\uff0c\u56e0\u6b64\u6267\u884c count(*) \u7684\u65f6\u5019\u4f1a\u76f4\u63a5\u8fd4\u56de\u8fd9\u4e2a\u6570\uff0c\u6548\u7387\u5f88\u9ad8\uff0c\u4f46\u4e0d\u652f\u6301\u4e8b\u52a1"}),"\n",(0,i.jsx)(e.li,{children:"show table status \u547d\u4ee4\u901a\u8fc7\u91c7\u6837\u4f30\u7b97\u53ef\u4ee5\u5feb\u901f\u83b7\u53d6\uff0c\u4f46\u662f\u4e0d\u51c6\u786e"}),"\n",(0,i.jsx)(e.li,{children:"InnoDB \u8868\u6267\u884c count(*) \u4f1a\u904d\u5386\u5168\u8868\uff0c\u867d\u7136\u7ed3\u679c\u51c6\u786e\uff0c\u4f46\u4f1a\u5bfc\u81f4\u6027\u80fd\u95ee\u9898"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6848\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8ba1\u6570\u4fdd\u5b58\u5728 Redis \u4e2d\uff0c\u4f46\u662f\u66f4\u65b0 MySQL \u548c Redis \u7684\u64cd\u4f5c\u4e0d\u662f\u539f\u5b50\u7684\uff0c\u4f1a\u5b58\u5728\u6570\u636e\u4e00\u81f4\u6027\u7684\u95ee\u9898"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8ba1\u6570\u76f4\u63a5\u653e\u5230\u6570\u636e\u5e93\u91cc\u5355\u72ec\u7684\u4e00\u5f20\u8ba1\u6570\u8868\u4e2d\uff0c\u5229\u7528\u4e8b\u52a1\u89e3\u51b3\u8ba1\u6570\u7cbe\u786e\u95ee\u9898\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(40805).A+"",width:"1075",height:"577"})}),"\n",(0,i.jsx)(e.p,{children:"\u4f1a\u8bdd B \u7684\u8bfb\u64cd\u4f5c\u5728 T3 \u6267\u884c\u7684\uff0c\u8fd9\u65f6\u66f4\u65b0\u4e8b\u52a1\u8fd8\u6ca1\u6709\u63d0\u4ea4\uff0c\u6240\u4ee5\u8ba1\u6570\u503c\u52a0 1 \u8fd9\u4e2a\u64cd\u4f5c\u5bf9\u4f1a\u8bdd B \u8fd8\u4e0d\u53ef\u89c1\uff0c\u56e0\u6b64\u4f1a\u8bdd B \u67e5\u8be2\u7684\u8ba1\u6570\u503c\u548c\u6700\u8fd1 100 \u6761\u8bb0\u5f55\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u903b\u8f91\u4e0a\u5c31\u662f\u4e00\u81f4\u7684"}),"\n",(0,i.jsxs)(e.p,{children:["\u5e76\u53d1\u7cfb\u7edf\u6027\u80fd\u7684\u89d2\u5ea6\u8003\u8651\uff0c\u5e94\u8be5\u5148\u63d2\u5165\u64cd\u4f5c\u8bb0\u5f55\u518d\u66f4\u65b0\u8ba1\u6570\u8868\uff0c\u56e0\u4e3a\u66f4\u65b0\u8ba1\u6570\u8868\u6d89\u53ca\u5230\u884c\u9501\u7684\u7ade\u4e89\uff0c",(0,i.jsx)(e.strong,{children:"\u5148\u63d2\u5165\u518d\u66f4\u65b0\u80fd\u6700\u5927\u7a0b\u5ea6\u5730\u51cf\u5c11\u4e8b\u52a1\u4e4b\u95f4\u7684\u9501\u7b49\u5f85\uff0c\u63d0\u5347\u5e76\u53d1\u5ea6"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["count \u51fd\u6570\u7684\u6309\u7167\u6548\u7387\u6392\u5e8f\uff1a",(0,i.jsx)(e.code,{children:"count(\u5b57\u6bb5) < count(\u4e3b\u952eid) < count(1) \u2248 count(*)"}),"\uff0c\u6240\u4ee5\u5efa\u8bae\u5c3d\u91cf\u4f7f\u7528 count(*)"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"count(\u4e3b\u952e id)\uff1aInnoDB \u5f15\u64ce\u4f1a\u904d\u5386\u6574\u5f20\u8868\uff0c\u628a\u6bcf\u4e00\u884c\u7684 id \u503c\u90fd\u53d6\u51fa\u6765\u8fd4\u56de\u7ed9 Server \u5c42\uff0cServer \u5224\u65ad id \u4e0d\u4e3a\u7a7a\u5c31\u6309\u884c\u7d2f\u52a0"}),"\n",(0,i.jsx)(e.li,{children:"count(1)\uff1aInnoDB \u5f15\u64ce\u904d\u5386\u6574\u5f20\u8868\u4f46\u4e0d\u53d6\u503c\uff0cServer \u5c42\u5bf9\u4e8e\u8fd4\u56de\u7684\u6bcf\u4e00\u884c\uff0c\u653e\u4e00\u4e2a\u6570\u5b57 1 \u8fdb\u53bb\uff0c\u5224\u65ad\u4e0d\u4e3a\u7a7a\u5c31\u6309\u884c\u7d2f\u52a0"}),"\n",(0,i.jsx)(e.li,{children:"count(\u5b57\u6bb5)\uff1a\u5982\u679c\u8fd9\u4e2a\u5b57\u6bb5\u662f\u5b9a\u4e49\u4e3a not null \u7684\u8bdd\uff0c\u4e00\u884c\u884c\u5730\u4ece\u8bb0\u5f55\u91cc\u9762\u8bfb\u51fa\u8fd9\u4e2a\u5b57\u6bb5\uff0c\u5224\u65ad\u4e0d\u80fd\u4e3a null\uff0c\u6309\u884c\u7d2f\u52a0\uff1b\u5982\u679c\u8fd9\u4e2a\u5b57\u6bb5\u5b9a\u4e49\u5141\u8bb8\u4e3a null\uff0c\u90a3\u4e48\u6267\u884c\u7684\u65f6\u5019\uff0c\u5224\u65ad\u5230\u6709\u53ef\u80fd\u662f null\uff0c\u8fd8\u8981\u628a\u503c\u53d6\u51fa\u6765\u518d\u5224\u65ad\u4e00\u4e0b\uff0c\u4e0d\u662f null \u624d\u7d2f\u52a0"}),"\n",(0,i.jsx)(e.li,{children:"count(*)\uff1a\u4e0d\u53d6\u503c\uff0c\u6309\u884c\u7d2f\u52a0"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://time.geekbang.org/column/article/72775",children:"https://time.geekbang.org/column/article/72775"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u7f13\u51b2\u4f18\u5316",children:"\u7f13\u51b2\u4f18\u5316"}),"\n",(0,i.jsx)(e.h4,{id:"\u4f18\u5316\u539f\u5219",children:"\u4f18\u5316\u539f\u5219"}),"\n",(0,i.jsx)(e.p,{children:"\u4e09\u4e2a\u539f\u5219\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5c06\u5c3d\u91cf\u591a\u7684\u5185\u5b58\u5206\u914d\u7ed9 MySQL \u505a\u7f13\u5b58\uff0c\u4f46\u4e5f\u8981\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u548c\u5176\u4ed6\u7a0b\u5e8f\u9884\u7559\u8db3\u591f\u5185\u5b58"}),"\n",(0,i.jsx)(e.li,{children:"MyISAM \u5b58\u50a8\u5f15\u64ce\u7684\u6570\u636e\u6587\u4ef6\u8bfb\u53d6\u4f9d\u8d56\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u81ea\u8eab\u7684 IO \u7f13\u5b58\uff0c\u5982\u679c\u6709 MyISAM \u8868\uff0c\u5c31\u8981\u9884\u7559\u66f4\u591a\u7684\u5185\u5b58\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u505a IO \u7f13\u5b58"}),"\n",(0,i.jsx)(e.li,{children:"\u6392\u5e8f\u533a\u3001\u8fde\u63a5\u533a\u7b49\u7f13\u5b58\u662f\u5206\u914d\u7ed9\u6bcf\u4e2a\u6570\u636e\u5e93\u4f1a\u8bdd\uff08Session\uff09\u4e13\u7528\u7684\uff0c\u503c\u7684\u8bbe\u7f6e\u8981\u6839\u636e\u6700\u5927\u8fde\u63a5\u6570\u5408\u7406\u5206\u914d\uff0c\u5982\u679c\u8bbe\u7f6e\u592a\u5927\uff0c\u4e0d\u4f46\u6d6a\u8d39\u8d44\u6e90\uff0c\u800c\u4e14\u5728\u5e76\u53d1\u6570\u8f83\u9ad8\u65f6\u4f1a\u5bfc\u81f4\u7269\u7406\u5185\u5b58\u8017\u5c3d"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u7f13\u51b2\u5185\u5b58",children:"\u7f13\u51b2\u5185\u5b58"}),"\n",(0,i.jsx)(e.p,{children:"Buffer Pool \u672c\u8d28\u4e0a\u662f InnoDB \u5411\u64cd\u4f5c\u7cfb\u7edf\u7533\u8bf7\u7684\u4e00\u6bb5\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\u3002InnoDB \u7684\u6570\u636e\u662f\u6309\u6570\u636e\u9875\u4e3a\u5355\u4f4d\u6765\u8bfb\u5199\uff0c\u6bcf\u4e2a\u6570\u636e\u9875\u7684\u5927\u5c0f\u9ed8\u8ba4\u662f 16KB\u3002\u6570\u636e\u662f\u5b58\u653e\u5728\u78c1\u76d8\u4e2d\uff0c\u6bcf\u6b21\u8bfb\u5199\u6570\u636e\u90fd\u9700\u8981\u8fdb\u884c\u78c1\u76d8 IO \u5c06\u6570\u636e\u8bfb\u5165\u5185\u5b58\u8fdb\u884c\u64cd\u4f5c\uff0c\u6548\u7387\u4f1a\u5f88\u4f4e\uff0c\u6240\u4ee5\u63d0\u4f9b\u4e86 Buffer Pool \u6765\u6682\u5b58\u8fd9\u4e9b\u6570\u636e\u9875\uff0c\u7f13\u5b58\u4e2d\u7684\u8fd9\u4e9b\u9875\u53c8\u53eb\u7f13\u51b2\u9875"}),"\n",(0,i.jsx)(e.p,{children:"\u5de5\u4f5c\u539f\u7406\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ece\u6570\u636e\u5e93\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u4f1a\u9996\u5148\u4ece\u7f13\u5b58\u4e2d\u8bfb\u53d6\uff0c\u5982\u679c\u7f13\u5b58\u4e2d\u6ca1\u6709\uff0c\u5219\u4ece\u78c1\u76d8\u8bfb\u53d6\u540e\u653e\u5165 Buffer Pool"}),"\n",(0,i.jsxs)(e.li,{children:["\u5411\u6570\u636e\u5e93\u5199\u5165\u6570\u636e\u65f6\uff0c\u4f1a\u5199\u5165\u7f13\u5b58\uff0c\u7f13\u5b58\u4e2d\u4fee\u6539\u7684\u6570\u636e\u4f1a",(0,i.jsx)(e.strong,{children:"\u5b9a\u671f\u5237\u65b0"}),"\u5230\u78c1\u76d8\uff0c\u8fd9\u4e00\u8fc7\u7a0b\u79f0\u4e3a\u5237\u810f"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Buffer Pool \u4e2d\u6bcf\u4e2a\u7f13\u51b2\u9875\u90fd\u6709\u5bf9\u5e94\u7684\u63a7\u5236\u4fe1\u606f\uff0c\u5305\u62ec\u8868\u7a7a\u95f4\u7f16\u53f7\u3001\u9875\u53f7\u3001\u504f\u79fb\u91cf\u3001\u94fe\u8868\u4fe1\u606f\u7b49\uff0c\u63a7\u5236\u4fe1\u606f\u5b58\u653e\u5728\u5360\u7528\u7684\u5185\u5b58\u79f0\u4e3a\u63a7\u5236\u5757\uff0c\u63a7\u5236\u5757\u4e0e\u7f13\u51b2\u9875\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\uff0c\u4f46\u5e76\u4e0d\u662f\u7269\u7406\u4e0a\u76f8\u8fde\u7684\uff0c\u90fd\u5728\u7f13\u51b2\u6c60\u4e2d"}),"\n",(0,i.jsxs)(e.p,{children:["MySQL \u63d0\u4f9b\u4e86\u7f13\u51b2\u9875\u7684\u5feb\u901f\u67e5\u627e\u65b9\u5f0f\uff1a",(0,i.jsx)(e.strong,{children:"\u54c8\u5e0c\u8868"}),"\uff0c\u4f7f\u7528\u8868\u7a7a\u95f4\u53f7\u548c\u9875\u53f7\u4f5c\u4e3a Key\uff0c\u7f13\u51b2\u9875\u63a7\u5236\u5757\u7684\u5730\u5740\u4f5c\u4e3a Value \u521b\u5efa\u4e00\u4e2a\u54c8\u5e0c\u8868\uff0c\u83b7\u53d6\u6570\u636e\u9875\u65f6\u6839\u636e Key \u8fdb\u884c\u54c8\u5e0c\u5bfb\u5740\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u4e0d\u5b58\u5728\u5bf9\u5e94\u7684\u7f13\u5b58\u9875\uff0c\u5c31\u4ece free \u94fe\u8868\u4e2d\u9009\u4e00\u4e2a\u7a7a\u95f2\u7f13\u51b2\u9875\uff0c\u628a\u78c1\u76d8\u4e2d\u7684\u5bf9\u5e94\u9875\u52a0\u8f7d\u5230\u8be5\u4f4d\u7f6e"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u5b58\u5728\u5bf9\u5e94\u7684\u7f13\u5b58\u9875\uff0c\u76f4\u63a5\u83b7\u53d6\u4f7f\u7528\uff0c\u63d0\u9ad8\u67e5\u8be2\u6570\u636e\u7684\u6548\u7387"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u5185\u5b58\u6570\u636e\u9875\u8ddf\u78c1\u76d8\u6570\u636e\u9875\u5185\u5bb9\u4e0d\u4e00\u81f4\u65f6\uff0c\u79f0\u8fd9\u4e2a\u5185\u5b58\u9875\u4e3a\u810f\u9875\uff1b\u5185\u5b58\u6570\u636e\u5199\u5165\u78c1\u76d8\u540e\uff0c\u5185\u5b58\u548c\u78c1\u76d8\u4e0a\u7684\u6570\u636e\u9875\u4e00\u81f4\uff0c\u79f0\u4e3a\u5e72\u51c0\u9875"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5185\u5b58\u7ba1\u7406",children:"\u5185\u5b58\u7ba1\u7406"}),"\n",(0,i.jsx)(e.h5,{id:"free-\u94fe\u8868",children:"Free \u94fe\u8868"}),"\n",(0,i.jsxs)(e.p,{children:["MySQL \u542f\u52a8\u65f6\u5b8c\u6210\u5bf9 Buffer Pool \u7684\u521d\u59cb\u5316\uff0c\u5148\u5411\u64cd\u4f5c\u7cfb\u7edf\u7533\u8bf7\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u7136\u540e\u5c06\u5185\u5b58\u5212\u5206\u4e3a\u82e5\u5e72\u5bf9\u63a7\u5236\u5757\u548c\u7f13\u51b2\u9875\u3002\u4e3a\u4e86\u533a\u5206\u7a7a\u95f2\u548c\u5df2\u5360\u7528\u7684\u6570\u636e\u9875\uff0c\u5c06\u6240\u6709\u7a7a\u95f2\u7f13\u51b2\u9875\u5bf9\u5e94\u7684",(0,i.jsx)(e.strong,{children:"\u63a7\u5236\u5757\u4f5c\u4e3a\u4e00\u4e2a\u8282\u70b9"}),"\u653e\u5165\u4e00\u4e2a\u94fe\u8868\u4e2d\uff0c\u5c31\u662f Free \u94fe\u8868\uff08",(0,i.jsx)(e.strong,{children:"\u7a7a\u95f2\u94fe\u8868"}),"\uff09"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(36997).A+"",width:"1381",height:"702"})}),"\n",(0,i.jsx)(e.p,{children:"\u57fa\u8282\u70b9\uff1a\u662f\u4e00\u5757\u5355\u72ec\u7533\u8bf7\u7684\u5185\u5b58\u7a7a\u95f4\uff08\u5360 40 \u5b57\u8282\uff09\uff0c\u5e76\u4e0d\u5728 Buffer Pool \u7684\u90a3\u4e00\u5927\u7247\u8fde\u7eed\u5185\u5b58\u7a7a\u95f4\u91cc"}),"\n",(0,i.jsx)(e.p,{children:"\u78c1\u76d8\u52a0\u8f7d\u9875\u7684\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ece Free \u94fe\u8868\u4e2d\u53d6\u51fa\u4e00\u4e2a\u7a7a\u95f2\u7684\u7f13\u51b2\u9875"}),"\n",(0,i.jsx)(e.li,{children:"\u628a\u7f13\u51b2\u9875\u5bf9\u5e94\u7684\u63a7\u5236\u5757\u7684\u4fe1\u606f\u586b\u4e0a\uff08\u9875\u6240\u5728\u7684\u8868\u7a7a\u95f4\u3001\u9875\u53f7\u4e4b\u7c7b\u7684\u4fe1\u606f\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u628a\u7f13\u51b2\u9875\u5bf9\u5e94\u7684 Free \u94fe\u8868\u8282\u70b9\uff08\u63a7\u5236\u5757\uff09\u4ece\u94fe\u8868\u4e2d\u79fb\u9664\uff0c\u8868\u793a\u8be5\u7f13\u51b2\u9875\u5df2\u7ecf\u88ab\u4f7f\u7528"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://blog.csdn.net/li1325169021/article/details/121124440",children:"https://blog.csdn.net/li1325169021/article/details/121124440"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"flush-\u94fe\u8868",children:"Flush \u94fe\u8868"}),"\n",(0,i.jsxs)(e.p,{children:["Flush \u94fe\u8868\u662f\u4e00\u4e2a\u7528\u6765",(0,i.jsx)(e.strong,{children:"\u5b58\u50a8\u810f\u9875"}),"\u7684\u94fe\u8868\uff0c\u5bf9\u4e8e\u5df2\u7ecf\u4fee\u6539\u8fc7\u7684\u7f13\u51b2\u810f\u9875\uff0c\u7b2c\u4e00\u6b21\u4fee\u6539\u540e\u52a0\u5165\u5230",(0,i.jsx)(e.strong,{children:"\u94fe\u8868\u5934\u90e8"}),"\uff0c\u4ee5\u540e\u6bcf\u6b21\u4fee\u6539\u90fd\u4e0d\u4f1a\u91cd\u65b0\u52a0\u5165\uff0c\u53ea\u4fee\u6539\u90e8\u5206\u63a7\u5236\u4fe1\u606f\uff0c\u51fa\u4e8e\u6027\u80fd\u8003\u8651\u5e76\u4e0d\u662f\u76f4\u63a5\u66f4\u65b0\u5230\u78c1\u76d8\uff0c\u800c\u662f\u5728\u672a\u6765\u7684\u67d0\u4e2a\u65f6\u95f4\u8fdb\u884c\u5237\u810f"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(24193).A+"",width:"1435",height:"688"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u540e\u53f0\u6709\u4e13\u95e8\u7684\u7ebf\u7a0b\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u628a\u810f\u9875\u5237\u65b0\u5230\u78c1\u76d8"}),"\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4ece Flush \u94fe\u8868\u4e2d\u5237\u65b0\u4e00\u90e8\u5206\u9875\u9762\u5230\u78c1\u76d8\uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u540e\u53f0\u7ebf\u7a0b\u5b9a\u65f6"}),"\u4ece Flush \u94fe\u8868\u5237\u810f\uff0c\u6839\u636e\u7cfb\u7edf\u7684\u7e41\u5fd9\u7a0b\u5ea6\u6765\u51b3\u5b9a\u5237\u65b0\u901f\u7387\uff0c\u8fd9\u79cd\u65b9\u5f0f\u79f0\u4e3a BUF_FLUSH_LIST"]}),"\n",(0,i.jsxs)(e.li,{children:["\u7ebf\u7a0b\u5237\u810f\u7684\u6bd4\u8f83\u6162\uff0c\u5bfc\u81f4\u7528\u6237\u7ebf\u7a0b\u52a0\u8f7d\u4e00\u4e2a\u65b0\u7684\u6570\u636e\u9875\u65f6\u53d1\u73b0\u6ca1\u6709\u7a7a\u95f2\u7f13\u51b2\u9875\uff0c\u6b64\u65f6\u4f1a\u5c1d\u8bd5\u4ece LRU \u94fe\u8868\u5c3e\u90e8\u5bfb\u627e\u7f13\u51b2\u9875\u76f4\u63a5\u91ca\u653e\uff0c\u5982\u679c\u8be5\u9875\u9762\u662f\u5df2\u7ecf\u4fee\u6539\u8fc7\u7684\u810f\u9875\u5c31",(0,i.jsx)(e.strong,{children:"\u540c\u6b65\u5237\u65b0"}),"\u5230\u78c1\u76d8\uff0c\u901f\u5ea6\u8f83\u6162\uff0c\u8fd9\u79cd\u65b9\u5f0f\u79f0\u4e3a BUF_FLUSH_SINGLE_PAGE"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u4ece LRU \u94fe\u8868\u7684\u51b7\u6570\u636e\u4e2d\u5237\u65b0\u4e00\u90e8\u5206\u9875\u9762\u5230\u78c1\u76d8\uff0c\u5373\uff1aBUF_FLUSH_LRU\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u540e\u53f0\u7ebf\u7a0b\u4f1a\u5b9a\u65f6\u4ece LRU \u94fe\u8868\u7684\u5c3e\u90e8\u5f00\u59cb\u626b\u63cf\u4e00\u4e9b\u9875\u9762\uff0c\u626b\u63cf\u7684\u9875\u9762\u6570\u91cf\u53ef\u4ee5\u901a\u8fc7\u7cfb\u7edf\u53d8\u91cf ",(0,i.jsx)(e.code,{children:"innodb_lru_scan_depth"})," \u6307\u5b9a\uff0c\u5982\u679c\u5728 LRU \u94fe\u8868\u4e2d\u53d1\u73b0\u810f\u9875\uff0c\u5219\u628a\u5b83\u4eec\u5237\u65b0\u5230\u78c1\u76d8\uff0c\u8fd9\u79cd\u65b9\u5f0f\u79f0\u4e3a BUF_FLUSH_LRU"]}),"\n",(0,i.jsx)(e.li,{children:"\u63a7\u5236\u5757\u91cc\u4f1a\u5b58\u50a8\u8be5\u7f13\u51b2\u9875\u662f\u5426\u88ab\u4fee\u6539\u7684\u4fe1\u606f\uff0c\u6240\u4ee5\u53ef\u4ee5\u5f88\u5bb9\u6613\u7684\u83b7\u53d6\u5230\u67d0\u4e2a\u7f13\u51b2\u9875\u662f\u5426\u662f\u810f\u9875"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://blog.csdn.net/li1325169021/article/details/121125765",children:"https://blog.csdn.net/li1325169021/article/details/121125765"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"lru-\u94fe\u8868",children:"LRU \u94fe\u8868"}),"\n",(0,i.jsx)(e.p,{children:"Buffer Pool \u9700\u8981\u4fdd\u8bc1\u7f13\u5b58\u7684\u547d\u4e2d\u7387\uff0c\u6240\u4ee5 MySQL \u521b\u5efa\u4e86\u4e00\u4e2a LRU \u94fe\u8868\uff0c\u5f53\u8bbf\u95ee\u67d0\u4e2a\u9875\u65f6\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u8be5\u9875\u4e0d\u5728 Buffer Pool \u4e2d\uff0c\u628a\u8be5\u9875\u4ece\u78c1\u76d8\u52a0\u8f7d\u8fdb\u6765\u540e\u4f1a\u5c06\u8be5\u7f13\u51b2\u9875\u5bf9\u5e94\u7684\u63a7\u5236\u5757\u4f5c\u4e3a\u8282\u70b9\u653e\u5165 ",(0,i.jsx)(e.strong,{children:"LRU \u94fe\u8868\u7684\u5934\u90e8"}),"\uff0c\u4fdd\u8bc1\u70ed\u70b9\u6570\u636e\u5728\u94fe\u8868\u5934"]}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u8be5\u9875\u5728 Buffer Pool \u4e2d\uff0c\u5219\u76f4\u63a5\u628a\u8be5\u9875\u5bf9\u5e94\u7684\u63a7\u5236\u5757\u79fb\u52a8\u5230 LRU \u94fe\u8868\u7684\u5934\u90e8\uff0c\u6240\u4ee5 LRU \u94fe\u8868\u5c3e\u90e8\u5c31\u662f\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684\u7f13\u51b2\u9875"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u57fa\u4e8e\u5c40\u90e8\u6027\u539f\u7406\u63d0\u4f9b\u4e86\u9884\u8bfb\u529f\u80fd\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u7ebf\u6027\u9884\u8bfb\uff1a\u7cfb\u7edf\u53d8\u91cf ",(0,i.jsx)(e.code,{children:"innodb_read_ahead_threshold"}),"\uff0c\u5982\u679c\u987a\u5e8f\u8bbf\u95ee\u67d0\u4e2a\u533a\uff08extent\uff1a16 KB \u7684\u9875\uff0c\u8fde\u7eed 64 \u4e2a\u5f62\u6210\u4e00\u4e2a\u533a\uff0c\u4e00\u4e2a\u533a\u9ed8\u8ba4 1MB \u5927\u5c0f\uff09\u7684\u9875\u9762\u6570\u8d85\u8fc7\u4e86\u8be5\u7cfb\u7edf\u53d8\u91cf\u503c\uff0c\u5c31\u4f1a\u89e6\u53d1\u4e00\u6b21",(0,i.jsx)(e.strong,{children:"\u5f02\u6b65\u8bfb\u53d6"}),"\u4e0b\u4e00\u4e2a\u533a\u4e2d\u5168\u90e8\u7684\u9875\u9762\u5230 Buffer Pool \u4e2d"]}),"\n",(0,i.jsxs)(e.li,{children:["\u968f\u673a\u9884\u8bfb\uff1a\u5982\u679c\u67d0\u4e2a\u533a 13 \u4e2a\u8fde\u7eed\u7684\u9875\u9762\u90fd\u88ab\u52a0\u8f7d\u5230 Buffer Pool\uff0c\u65e0\u8bba\u8fd9\u4e9b\u9875\u9762\u662f\u5426\u662f\u987a\u5e8f\u8bfb\u53d6\uff0c\u90fd\u4f1a\u89e6\u53d1\u4e00\u6b21",(0,i.jsx)(e.strong,{children:"\u5f02\u6b65\u8bfb\u53d6"}),"\u672c\u533a\u6240\u6709\u7684\u5176\u4ed6\u9875\u9762\u5230 Buffer Pool \u4e2d"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u9884\u8bfb\u4f1a\u9020\u6210\u52a0\u8f7d\u592a\u591a\u7528\u4e0d\u5230\u7684\u6570\u636e\u9875\uff0c\u9020\u6210\u90a3\u4e9b\u4f7f\u7528\u9891\u7387\u5f88\u9ad8\u7684\u6570\u636e\u9875\u88ab\u6324\u5230 LRU \u94fe\u8868\u5c3e\u90e8\uff0c\u6240\u4ee5 InnoDB \u5c06 LRU \u94fe\u8868\u5206\u6210\u4e24\u6bb5\uff0c",(0,i.jsx)(e.strong,{children:"\u51b7\u70ed\u6570\u636e\u9694\u79bb"}),"\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e00\u90e8\u5206\u5b58\u50a8\u4f7f\u7528\u9891\u7387\u5f88\u9ad8\u7684\u6570\u636e\u9875\uff0c\u8fd9\u90e8\u5206\u94fe\u8868\u4e5f\u53eb\u70ed\u6570\u636e\uff0cyoung \u533a\uff0c\u9760\u8fd1\u94fe\u8868\u5934\u90e8\u7684\u533a\u57df"}),"\n",(0,i.jsxs)(e.li,{children:["\u4e00\u90e8\u5206\u5b58\u50a8\u4f7f\u7528\u9891\u7387\u4e0d\u9ad8\u7684\u51b7\u6570\u636e\uff0cold \u533a\uff0c\u9760\u8fd1\u94fe\u8868\u5c3e\u90e8\uff0c\u9ed8\u8ba4\u5360 37%\uff0c\u53ef\u4ee5\u901a\u8fc7\u7cfb\u7edf\u53d8\u91cf ",(0,i.jsx)(e.code,{children:"innodb_old_blocks_pct"})," \u6307\u5b9a"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u78c1\u76d8\u4e0a\u7684\u67d0\u6570\u636e\u9875\u88ab\u521d\u6b21\u52a0\u8f7d\u5230 Buffer Pool \u4e2d\u4f1a\u88ab\u653e\u5165 old \u533a\uff0c\u6dd8\u6c70\u65f6\u4f18\u5148\u6dd8\u6c70 old \u533a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5f53\u5bf9 old \u533a\u7684\u6570\u636e\u8fdb\u884c\u8bbf\u95ee\u65f6\uff0c\u4f1a\u5728\u63a7\u5236\u5757\u8bb0\u5f55\u4e0b\u8bbf\u95ee\u65f6\u95f4\uff0c\u7b49\u5f85\u540e\u7eed\u7684\u8bbf\u95ee\u65f6\u95f4\u4e0e\u7b2c\u4e00\u6b21\u8bbf\u95ee\u7684\u65f6\u95f4\u662f\u5426\u5728\u67d0\u4e2a\u65f6\u95f4\u95f4\u9694\u5185\uff0c\u901a\u8fc7\u7cfb\u7edf\u53d8\u91cf ",(0,i.jsx)(e.code,{children:"innodb_old_blocks_time"})," \u6307\u5b9a\u65f6\u95f4\u95f4\u9694\uff0c\u9ed8\u8ba4 1000ms\uff0c\u6210\u7acb\u5c31",(0,i.jsx)(e.strong,{children:"\u79fb\u52a8\u5230 young \u533a\u7684\u94fe\u8868\u5934\u90e8"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"innodb_old_blocks_time"})," \u4e3a 0 \u65f6\uff0c\u6bcf\u6b21\u8bbf\u95ee\u4e00\u4e2a\u9875\u9762\u90fd\u4f1a\u653e\u5165 young \u533a\u7684\u5934\u90e8"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u53c2\u6570\u4f18\u5316",children:"\u53c2\u6570\u4f18\u5316"}),"\n",(0,i.jsx)(e.p,{children:"InnoDB \u7528\u4e00\u5757\u5185\u5b58\u533a\u505a IO \u7f13\u5b58\u6c60\uff0c\u8be5\u7f13\u5b58\u6c60\u4e0d\u4ec5\u7528\u6765\u7f13\u5b58 InnoDB \u7684\u7d22\u5f15\u5757\uff0c\u4e5f\u7528\u6765\u7f13\u5b58 InnoDB \u7684\u6570\u636e\u5757\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u6307\u4ee4\u67e5\u770b Buffer Pool \u7684\u72b6\u6001\u4fe1\u606f\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW ENGINE INNODB STATUS\\G\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"Buffer pool hit rate"})," \u5b57\u6bb5\u4ee3\u8868",(0,i.jsx)(e.strong,{children:"\u5185\u5b58\u547d\u4e2d\u7387"}),"\uff0c\u8868\u793a Buffer Pool \u5bf9\u67e5\u8be2\u7684\u52a0\u901f\u6548\u679c"]}),"\n",(0,i.jsx)(e.p,{children:"\u6838\u5fc3\u53c2\u6570\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"innodb_buffer_pool_size"}),"\uff1a\u8be5\u53d8\u91cf\u51b3\u5b9a\u4e86 Innodb \u5b58\u50a8\u5f15\u64ce\u8868\u6570\u636e\u548c\u7d22\u5f15\u6570\u636e\u7684\u6700\u5927\u7f13\u5b58\u533a\u5927\u5c0f\uff0c\u9ed8\u8ba4 128M"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW VARIABLES LIKE 'innodb_buffer_pool_size';\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5728\u4fdd\u8bc1\u64cd\u4f5c\u7cfb\u7edf\u53ca\u5176\u4ed6\u7a0b\u5e8f\u6709\u8db3\u591f\u5185\u5b58\u53ef\u7528\u7684\u60c5\u51b5\u4e0b\uff0c",(0,i.jsx)(e.code,{children:"innodb_buffer_pool_size"})," \u7684\u503c\u8d8a\u5927\uff0c\u7f13\u5b58\u547d\u4e2d\u7387\u8d8a\u9ad8\uff0c\u5efa\u8bae\u8bbe\u7f6e\u6210\u53ef\u7528\u7269\u7406\u5185\u5b58\u7684 60%~80%"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"innodb_buffer_pool_size=512M\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"innodb_log_buffer_size"}),"\uff1a\u8be5\u503c\u51b3\u5b9a\u4e86 Innodb \u65e5\u5fd7\u7f13\u51b2\u533a\u7684\u5927\u5c0f\uff0c\u4fdd\u5b58\u8981\u5199\u5165\u78c1\u76d8\u4e0a\u7684\u65e5\u5fd7\u6587\u4ef6\u6570\u636e"]}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u4e8e\u53ef\u80fd\u4ea7\u751f\u5927\u91cf\u66f4\u65b0\u8bb0\u5f55\u7684\u5927\u4e8b\u52a1\uff0c\u589e\u52a0\u8be5\u503c\u7684\u5927\u5c0f\uff0c\u53ef\u4ee5\u907f\u514d Innodb \u5728\u4e8b\u52a1\u63d0\u4ea4\u524d\u5c31\u6267\u884c\u4e0d\u5fc5\u8981\u7684\u65e5\u5fd7\u5199\u5165\u78c1\u76d8\u64cd\u4f5c\uff0c\u5f71\u54cd\u6267\u884c\u6548\u7387\uff0c\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"innodb_log_buffer_size=10M\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5728\u591a\u7ebf\u7a0b\u4e0b\uff0c\u8bbf\u95ee Buffer Pool \u4e2d\u7684\u5404\u79cd\u94fe\u8868\u90fd\u9700\u8981\u52a0\u9501\uff0c\u6240\u4ee5\u5c06 Buffer Pool \u62c6\u6210\u82e5\u5e72\u4e2a\u5c0f\u5b9e\u4f8b\uff0c",(0,i.jsx)(e.strong,{children:"\u6bcf\u4e2a\u7ebf\u7a0b\u5bf9\u5e94\u4e00\u4e2a\u5b9e\u4f8b"}),"\uff0c\u72ec\u7acb\u7ba1\u7406\u5185\u5b58\u7a7a\u95f4\u548c\u5404\u79cd\u94fe\u8868\uff08\u7c7b\u4f3c ThreadLocal\uff09\uff0c\u591a\u7ebf\u7a0b\u8bbf\u95ee\u5404\u81ea\u5b9e\u4f8b\u4e92\u4e0d\u5f71\u54cd\uff0c\u63d0\u9ad8\u4e86\u5e76\u53d1\u80fd\u529b"]}),"\n",(0,i.jsxs)(e.p,{children:["MySQL 5.7.5 \u4e4b\u524d ",(0,i.jsx)(e.code,{children:"innodb_buffer_pool_size"})," \u53ea\u652f\u6301\u5728\u7cfb\u7edf\u542f\u52a8\u65f6\u4fee\u6539\uff0c\u73b0\u5728\u5df2\u7ecf\u652f\u6301\u8fd0\u884c\u65f6\u4fee\u6539 Buffer Pool \u7684\u5927\u5c0f\uff0c\u4f46\u662f\u6bcf\u6b21\u8c03\u6574\u53c2\u6570\u90fd\u4f1a\u91cd\u65b0\u5411\u64cd\u4f5c\u7cfb\u7edf\u7533\u8bf7\u4e00\u5757\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\uff0c",(0,i.jsx)(e.strong,{children:"\u5c06\u65e7\u7684\u7f13\u51b2\u6c60\u7684\u5185\u5bb9\u62f7\u8d1d\u5230\u65b0\u7a7a\u95f4"}),"\u975e\u5e38\u8017\u65f6\uff0c\u6240\u4ee5 MySQL \u5f00\u59cb\u4ee5\u4e00\u4e2a chunk \u4e3a\u5355\u4f4d\u5411\u64cd\u4f5c\u7cfb\u7edf\u7533\u8bf7\u5185\u5b58\uff0c\u6240\u4ee5\u4e00\u4e2a Buffer Pool \u5b9e\u4f8b\u53ef\u4ee5\u7531\u591a\u4e2a chunk \u7ec4\u6210"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5728\u7cfb\u7edf\u542f\u52a8\u65f6\u8bbe\u7f6e\u7cfb\u7edf\u53d8\u91cf ",(0,i.jsx)(e.code,{children:"innodb_buffer_pool_instance"})," \u53ef\u4ee5\u6307\u5b9a Buffer Pool \u5b9e\u4f8b\u7684\u4e2a\u6570\uff0c\u4f46\u662f\u5f53 Buffer Pool \u5c0f\u4e8e 1GB \u65f6\uff0c\u8bbe\u7f6e\u591a\u4e2a\u5b9e\u4f8b\u65f6\u65e0\u6548\u7684"]}),"\n",(0,i.jsxs)(e.li,{children:["\u6307\u5b9a\u7cfb\u7edf\u53d8\u91cf ",(0,i.jsx)(e.code,{children:"innodb_buffer_pool_chunk_size"})," \u6765\u6539\u53d8 chunk \u7684\u5927\u5c0f\uff0c\u53ea\u80fd\u5728\u542f\u52a8\u65f6\u4fee\u6539\uff0c\u8fd0\u884c\u4e2d\u4e0d\u80fd\u4fee\u6539\uff0c\u800c\u4e14\u8be5\u53d8\u91cf\u5e76\u4e0d\u5305\u542b\u7f13\u51b2\u9875\u7684\u63a7\u5236\u5757\u7684\u5185\u5b58\u5927\u5c0f"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"innodb_buffer_pool_size"})," \u5fc5\u987b\u662f ",(0,i.jsx)(e.code,{children:"innodb_buffer_pool_chunk_size \xd7 innodb_buffer_pool_instance"})," \u7684\u500d\u6570\uff0c\u9ed8\u8ba4\u503c\u662f ",(0,i.jsx)(e.code,{children:"128M \xd7 16 = 2G"}),"\uff0cBuffer Pool \u5fc5\u987b\u662f 2G \u7684\u6574\u6570\u500d\uff0c\u5982\u679c\u6307\u5b9a 5G\uff0c\u4f1a\u81ea\u52a8\u8c03\u6574\u6210 6G"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u542f\u52a8\u65f6 ",(0,i.jsx)(e.code,{children:"chunk \xd7 instances"})," > ",(0,i.jsx)(e.code,{children:"pool_size"}),"\uff0c\u90a3\u4e48 chunk \u7684\u503c\u4f1a\u81ea\u52a8\u8bbe\u7f6e\u4e3a ",(0,i.jsx)(e.code,{children:"pool_size \xf7 instances"})]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5185\u5b58\u4f18\u5316",children:"\u5185\u5b58\u4f18\u5316"}),"\n",(0,i.jsx)(e.h4,{id:"change",children:"Change"}),"\n",(0,i.jsxs)(e.p,{children:["InnoDB \u7ba1\u7406\u7684 Buffer Pool \u4e2d\u6709\u4e00\u5757\u5185\u5b58\u53eb Change Buffer \u7528\u6765\u5bf9",(0,i.jsx)(e.strong,{children:"\u589e\u5220\u6539\u64cd\u4f5c"}),"\u63d0\u4f9b\u7f13\u5b58\uff0c\u53ef\u4ee5\u901a\u8fc7\u53c2\u6570\u6765\u52a8\u6001\u8bbe\u7f6e\uff0c\u8bbe\u7f6e\u4e3a 50 \u65f6\u8868\u793a Change Buffer \u7684\u5927\u5c0f\u6700\u591a\u5360\u7528 Buffer Pool \u7684 50%"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u552f\u4e00\u7d22\u5f15\u7684\u66f4\u65b0\u4e0d\u80fd\u4f7f\u7528 Change Buffer\uff0c\u9700\u8981\u5c06\u6570\u636e\u9875\u8bfb\u5165\u5185\u5b58\uff0c\u5224\u65ad\u6ca1\u6709\u51b2\u7a81\u5728\u5199\u5165"}),"\n",(0,i.jsxs)(e.li,{children:["\u666e\u901a\u7d22\u5f15\u53ef\u4ee5\u4f7f\u7528 Change Buffer\uff0c",(0,i.jsx)(e.strong,{children:"\u76f4\u63a5\u5199\u5165 Buffer \u5c31\u7ed3\u675f"}),"\uff0c\u4e0d\u7528\u6821\u9a8c\u552f\u4e00\u6027"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Change Buffer \u5e76\u4e0d\u662f\u6570\u636e\u9875\uff0c\u53ea\u662f\u5bf9\u64cd\u4f5c\u7684\u7f13\u5b58\uff0c\u6240\u4ee5\u9700\u8981\u5c06 Change Buffer \u4e2d\u7684\u64cd\u4f5c\u5e94\u7528\u5230\u65e7\u6570\u636e\u9875\uff0c\u5f97\u5230\u65b0\u7684\u6570\u636e\u9875\uff08\u810f\u9875\uff09\u7684\u8fc7\u7a0b\u79f0\u4e3a Merge"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u89e6\u53d1\u65f6\u673a\uff1a\u8bbf\u95ee\u6570\u636e\u9875\u65f6\u4f1a\u89e6\u53d1 Merge\u3001\u540e\u53f0\u6709\u5b9a\u65f6\u7ebf\u7a0b\u8fdb\u884c Merge\u3001\u5728\u6570\u636e\u5e93\u6b63\u5e38\u5173\u95ed\uff08shutdown\uff09\u7684\u8fc7\u7a0b\u4e2d\u4e5f\u4f1a\u89e6\u53d1"}),"\n",(0,i.jsx)(e.li,{children:"\u5de5\u4f5c\u6d41\u7a0b\uff1a\u9996\u5148\u4ece\u78c1\u76d8\u8bfb\u5165\u6570\u636e\u9875\u5230\u5185\u5b58\uff08\u56e0\u4e3a Buffer Pool \u4e2d\u4e0d\u4e00\u5b9a\u5b58\u5728\u5bf9\u5e94\u7684\u6570\u636e\u9875\uff09\uff0c\u4ece Change Buffer \u4e2d\u627e\u5230\u5bf9\u5e94\u7684\u64cd\u4f5c\u5e94\u7528\u5230\u6570\u636e\u9875\uff0c\u5f97\u5230\u65b0\u7684\u6570\u636e\u9875\u5373\u4e3a\u810f\u9875\uff0c\u7136\u540e\u5199\u5165 redo log\uff0c\u7b49\u5f85\u5237\u810f\u5373\u53ef"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\uff1aChange Buffer \u4e2d\u7684\u8bb0\u5f55\uff0c\u5728\u4e8b\u52a1\u63d0\u4ea4\u65f6\u4e5f\u4f1a\u5199\u5165 redo log\uff0c\u6240\u4ee5\u662f\u53ef\u4ee5\u4fdd\u8bc1\u4e0d\u4e22\u5931\u7684"}),"\n",(0,i.jsx)(e.p,{children:"\u4e1a\u52a1\u573a\u666f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5bf9\u4e8e",(0,i.jsx)(e.strong,{children:"\u5199\u591a\u8bfb\u5c11"}),"\u7684\u4e1a\u52a1\u6765\u8bf4\uff0c\u9875\u9762\u5728\u5199\u5b8c\u4ee5\u540e\u9a6c\u4e0a\u88ab\u8bbf\u95ee\u5230\u7684\u6982\u7387\u6bd4\u8f83\u5c0f\uff0c\u6b64\u65f6 Change Buffer \u7684\u4f7f\u7528\u6548\u679c\u6700\u597d\uff0c\u5e38\u89c1\u7684\u5c31\u662f\u8d26\u5355\u7c7b\u3001\u65e5\u5fd7\u7c7b\u7684\u7cfb\u7edf"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e00\u4e2a\u4e1a\u52a1\u7684\u66f4\u65b0\u6a21\u5f0f\u662f\u5199\u5165\u540e\u9a6c\u4e0a\u505a\u67e5\u8be2\uff0c\u90a3\u4e48\u5373\u4f7f\u6ee1\u8db3\u4e86\u6761\u4ef6\uff0c\u5c06\u66f4\u65b0\u5148\u8bb0\u5f55\u5728 Change Buffer\uff0c\u4f46\u4e4b\u540e\u7531\u4e8e\u9a6c\u4e0a\u8981\u8bbf\u95ee\u8fd9\u4e2a\u6570\u636e\u9875\uff0c\u4f1a\u7acb\u5373\u89e6\u53d1 Merge \u8fc7\u7a0b\uff0c\u8fd9\u6837\u968f\u673a\u8bbf\u95ee IO \u7684\u6b21\u6570\u4e0d\u4f1a\u51cf\u5c11\uff0c\u5e76\u4e14\u589e\u52a0\u4e86 Change Buffer \u7684\u7ef4\u62a4\u4ee3\u4ef7"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8865\u5145\uff1aChange Buffer \u7684\u524d\u8eab\u662f Insert Buffer\uff0c\u53ea\u80fd\u5bf9 Insert \u64cd\u4f5c\u4f18\u5316\uff0c\u540e\u6765\u589e\u52a0\u4e86 Update/Delete \u7684\u652f\u6301\uff0c\u6539\u4e3a Change Buffer"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"net",children:"Net"}),"\n",(0,i.jsxs)(e.p,{children:["Server \u5c42\u9488\u5bf9\u4f18\u5316",(0,i.jsx)(e.strong,{children:"\u67e5\u8be2"}),"\u7684\u5185\u5b58\u4e3a Net Buffer\uff0c\u5185\u5b58\u7684\u5927\u5c0f\u662f\u7531\u53c2\u6570 ",(0,i.jsx)(e.code,{children:"net_buffer_length"}),"\u5b9a\u4e49\uff0c\u9ed8\u8ba4 16k\uff0c\u5b9e\u73b0\u6d41\u7a0b\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u83b7\u53d6\u4e00\u884c\u6570\u636e\u5199\u5165 Net Buffer\uff0c\u91cd\u590d\u83b7\u53d6\u76f4\u5230 Net Buffer \u5199\u6ee1\uff0c\u8c03\u7528\u7f51\u7edc\u63a5\u53e3\u53d1\u51fa\u53bb"}),"\n",(0,i.jsxs)(e.li,{children:["\u82e5\u53d1\u9001\u6210\u529f\u5c31\u6e05\u7a7a Net Buffer\uff0c\u7136\u540e\u7ee7\u7eed\u53d6\u4e0b\u4e00\u884c\uff1b\u82e5\u53d1\u9001\u51fd\u6570\u8fd4\u56de EAGAIN \u6216 WSAEWOULDBLOCK\uff0c\u8868\u793a\u672c\u5730\u7f51\u7edc\u6808 ",(0,i.jsx)(e.code,{children:"socket send buffer"})," \u5199\u6ee1\u4e86\uff0c",(0,i.jsx)(e.strong,{children:"\u8fdb\u5165\u7b49\u5f85"}),"\uff0c\u76f4\u5230\u7f51\u7edc\u6808\u91cd\u65b0\u53ef\u5199\u518d\u7ee7\u7eed\u53d1\u9001"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["MySQL \u91c7\u7528\u7684\u662f\u8fb9\u8bfb\u8fb9\u53d1\u7684\u903b\u8f91\uff0c\u56e0\u6b64\u5bf9\u4e8e\u6570\u636e\u91cf\u5f88\u5927\u7684\u67e5\u8be2\u6765\u8bf4\uff0c\u4e0d\u4f1a\u5728 Server \u7aef\u4fdd\u5b58\u5b8c\u6574\u7684\u7ed3\u679c\u96c6\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u8bfb\u7ed3\u679c\u4e0d\u53ca\u65f6\uff0c\u4f1a\u5835\u4f4f MySQL \u7684\u67e5\u8be2\u8fc7\u7a0b\uff0c\u4f46\u662f",(0,i.jsx)(e.strong,{children:"\u4e0d\u4f1a\u628a\u5185\u5b58\u6253\u7206\u5bfc\u81f4 OOM"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(12571).A+"",width:"1400",height:"607"})}),"\n",(0,i.jsx)(e.p,{children:"SHOW PROCESSLIST \u83b7\u53d6\u7ebf\u7a0b\u4fe1\u606f\u540e\uff0c\u5904\u4e8e Sending to client \u72b6\u6001\u4ee3\u8868\u670d\u52a1\u5668\u7aef\u7684\u7f51\u7edc\u6808\u5199\u6ee1\uff0c\u7b49\u5f85\u5ba2\u6237\u7aef\u63a5\u6536\u6570\u636e"}),"\n",(0,i.jsx)(e.p,{children:"\u5047\u8bbe\u6709\u4e00\u4e2a\u4e1a\u52a1\u7684\u903b\u8f91\u6bd4\u8f83\u590d\u6742\uff0c\u6bcf\u8bfb\u4e00\u884c\u6570\u636e\u4ee5\u540e\u8981\u5904\u7406\u5f88\u4e45\u7684\u903b\u8f91\uff0c\u5c31\u4f1a\u5bfc\u81f4\u5ba2\u6237\u7aef\u8981\u8fc7\u5f88\u4e45\u624d\u4f1a\u53bb\u53d6\u4e0b\u4e00\u884c\u6570\u636e\uff0c\u5bfc\u81f4 MySQL \u7684\u963b\u585e\uff0c\u4e00\u76f4\u5904\u4e8e Sending to client \u7684\u72b6\u6001"}),"\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6cd5\uff1a\u5982\u679c\u4e00\u4e2a\u67e5\u8be2\u7684\u8fd4\u56de\u7ed3\u679c\u5f88\u662f\u5f88\u591a\uff0c\u5efa\u8bae\u4f7f\u7528 mysql_store_result \u8fd9\u4e2a\u63a5\u53e3\uff0c\u76f4\u63a5\u628a\u67e5\u8be2\u7ed3\u679c\u4fdd\u5b58\u5230\u672c\u5730\u5185\u5b58"}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://blog.csdn.net/qq_33589510/article/details/117673449",children:"https://blog.csdn.net/qq_33589510/article/details/117673449"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"read",children:"Read"}),"\n",(0,i.jsx)(e.p,{children:"read_rnd_buffer \u662f MySQL \u7684\u968f\u673a\u8bfb\u7f13\u51b2\u533a\uff0c\u5f53\u6309\u4efb\u610f\u987a\u5e8f\u8bfb\u53d6\u8bb0\u5f55\u884c\u65f6\u5c06\u5206\u914d\u4e00\u4e2a\u968f\u673a\u8bfb\u53d6\u7f13\u51b2\u533a\uff0c\u8fdb\u884c\u6392\u5e8f\u67e5\u8be2\u65f6\uff0cMySQL \u4f1a\u9996\u5148\u626b\u63cf\u4e00\u904d\u8be5\u7f13\u51b2\uff0c\u4ee5\u907f\u514d\u78c1\u76d8\u641c\u7d22\uff0c\u63d0\u9ad8\u67e5\u8be2\u901f\u5ea6\uff0c\u5927\u5c0f\u662f\u7531 read_rnd_buffer_size \u53c2\u6570\u63a7\u5236\u7684"}),"\n",(0,i.jsxs)(e.p,{children:["Multi-Range Read \u4f18\u5316\uff0c",(0,i.jsx)(e.strong,{children:"\u5c06\u968f\u673a IO \u8f6c\u5316\u4e3a\u987a\u5e8f IO"})," \u4ee5\u964d\u4f4e\u67e5\u8be2\u8fc7\u7a0b\u4e2d IO \u5f00\u9500\uff0c\u56e0\u4e3a\u5927\u591a\u6570\u7684\u6570\u636e\u90fd\u662f\u6309\u7167\u4e3b\u952e\u9012\u589e\u987a\u5e8f\u63d2\u5165\u5f97\u5230\uff0c\u6240\u4ee5\u6309\u7167\u4e3b\u952e\u7684\u9012\u589e\u987a\u5e8f\u67e5\u8be2\u7684\u8bdd\uff0c\u5bf9\u78c1\u76d8\u7684\u8bfb\u6bd4\u8f83\u63a5\u8fd1\u987a\u5e8f\u8bfb\uff0c\u80fd\u591f\u63d0\u5347\u8bfb\u6027\u80fd"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e8c\u7ea7\u7d22\u5f15\u4e3a a\uff0c\u805a\u7c07\u7d22\u5f15\u4e3a id\uff0c\u4f18\u5316\u56de\u8868\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6839\u636e\u7d22\u5f15 a\uff0c\u5b9a\u4f4d\u5230\u6ee1\u8db3\u6761\u4ef6\u7684\u8bb0\u5f55\uff0c\u5c06 id \u503c\u653e\u5165 read_rnd_buffer \u4e2d"}),"\n",(0,i.jsxs)(e.li,{children:["\u5c06 read_rnd_buffer \u4e2d\u7684 id \u8fdb\u884c",(0,i.jsx)(e.strong,{children:"\u9012\u589e\u6392\u5e8f"})]}),"\n",(0,i.jsx)(e.li,{children:"\u6392\u5e8f\u540e\u7684 id \u6570\u7ec4\uff0c\u4f9d\u6b21\u56de\u8868\u5230\u4e3b\u952e id \u7d22\u5f15\u4e2d\u67e5\u8bb0\u5f55\uff0c\u5e76\u4f5c\u4e3a\u7ed3\u679c\u8fd4\u56de"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\uff1a\u5982\u679c\u6b65\u9aa4 1 \u4e2d read_rnd_buffer \u653e\u6ee1\u4e86\uff0c\u5c31\u4f1a\u5148\u6267\u884c\u6b65\u9aa4 2 \u548c 3\uff0c\u7136\u540e\u6e05\u7a7a read_rnd_buffer\uff0c\u4e4b\u540e\u7ee7\u7eed\u627e\u7d22\u5f15 a \u7684\u4e0b\u4e2a\u8bb0\u5f55"}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528 MRR \u4f18\u5316\u9700\u8981\u8bbe\u8fdb\u884c\u8bbe\u7f6e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SET optimizer_switch='mrr_cost_based=off'\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"key-1",children:"Key"}),"\n",(0,i.jsx)(e.p,{children:"MyISAM \u5b58\u50a8\u5f15\u64ce\u4f7f\u7528 key_buffer \u7f13\u5b58\u7d22\u5f15\u5757\uff0c\u52a0\u901f MyISAM \u7d22\u5f15\u7684\u8bfb\u5199\u901f\u5ea6\u3002\u5bf9\u4e8e MyISAM \u8868\u7684\u6570\u636e\u5757\u6ca1\u6709\u7279\u522b\u7684\u7f13\u5b58\u673a\u5236\uff0c\u5b8c\u5168\u4f9d\u8d56\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u7684 IO \u7f13\u5b58"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"key_buffer_size\uff1a\u8be5\u53d8\u91cf\u51b3\u5b9a MyISAM \u7d22\u5f15\u5757\u7f13\u5b58\u533a\u7684\u5927\u5c0f\uff0c\u76f4\u63a5\u5f71\u54cd\u5230 MyISAM \u8868\u7684\u5b58\u53d6\u6548\u7387"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW VARIABLES LIKE 'key_buffer_size';\t-- \u5355\u4f4d\u662f\u5b57\u8282\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5728 MySQL \u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u8be5\u503c\uff0c\u5efa\u8bae\u81f3\u5c11\u5c061/4\u53ef\u7528\u5185\u5b58\u5206\u914d\u7ed9 key_buffer_size\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"vim /etc/mysql/my.cnf\nkey_buffer_size=1024M\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"read_buffer_size\uff1a\u5982\u679c\u9700\u8981\u7ecf\u5e38\u987a\u5e8f\u626b\u63cf MyISAM \u8868\uff0c\u53ef\u4ee5\u901a\u8fc7\u589e\u5927 read_buffer_size \u7684\u503c\u6765\u6539\u5584\u6027\u80fd\u3002\u4f46 read_buffer_size \u662f\u6bcf\u4e2a Session \u72ec\u5360\u7684\uff0c\u5982\u679c\u9ed8\u8ba4\u503c\u8bbe\u7f6e\u592a\u5927\uff0c\u5e76\u53d1\u73af\u5883\u5c31\u4f1a\u9020\u6210\u5185\u5b58\u6d6a\u8d39"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"read_rnd_buffer_size\uff1a\u5bf9\u4e8e\u9700\u8981\u505a\u6392\u5e8f\u7684 MyISAM \u8868\u7684\u67e5\u8be2\uff0c\u5982\u5e26\u6709 ORDER BY \u5b50\u53e5\u7684\u8bed\u53e5\uff0c\u9002\u5f53\u589e\u52a0\u8be5\u7684\u503c\uff0c\u53ef\u4ee5\u6539\u5584\u6b64\u7c7b\u7684 SQL \u7684\u6027\u80fd\uff0c\u4f46\u662f read_rnd_buffer_size \u662f\u6bcf\u4e2a Session \u72ec\u5360\u7684\uff0c\u5982\u679c\u9ed8\u8ba4\u503c\u8bbe\u7f6e\u592a\u5927\uff0c\u5c31\u4f1a\u9020\u6210\u5185\u5b58\u6d6a\u8d39"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5b58\u50a8\u4f18\u5316",children:"\u5b58\u50a8\u4f18\u5316"}),"\n",(0,i.jsx)(e.h4,{id:"\u6570\u636e\u5b58\u50a8",children:"\u6570\u636e\u5b58\u50a8"}),"\n",(0,i.jsx)(e.p,{children:"\u7cfb\u7edf\u8868\u7a7a\u95f4\u662f\u7528\u6765\u653e\u7cfb\u7edf\u4fe1\u606f\u7684\uff0c\u6bd4\u5982\u6570\u636e\u5b57\u5178\u4ec0\u4e48\u7684\uff0c\u5bf9\u5e94\u7684\u78c1\u76d8\u6587\u4ef6\u662f ibdata\uff0c\u6570\u636e\u8868\u7a7a\u95f4\u662f\u4e00\u4e2a\u4e2a\u7684\u8868\u6570\u636e\u6587\u4ef6\uff0c\u5bf9\u5e94\u7684\u78c1\u76d8\u6587\u4ef6\u5c31\u662f\u8868\u540d.ibd"}),"\n",(0,i.jsx)(e.p,{children:"\u8868\u6570\u636e\u65e2\u53ef\u4ee5\u5b58\u5728\u5171\u4eab\u8868\u7a7a\u95f4\u91cc\uff0c\u4e5f\u53ef\u4ee5\u662f\u5355\u72ec\u7684\u6587\u4ef6\uff0c\u8fd9\u4e2a\u884c\u4e3a\u662f\u7531\u53c2\u6570 innodb_file_per_table \u63a7\u5236\u7684\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"OFF\uff1a\u8868\u793a\u8868\u7684\u6570\u636e\u653e\u5728\u7cfb\u7edf\u5171\u4eab\u8868\u7a7a\u95f4\uff0c\u4e5f\u5c31\u662f\u8ddf\u6570\u636e\u5b57\u5178\u653e\u5728\u4e00\u8d77"}),"\n",(0,i.jsx)(e.li,{children:"ON \uff1a\u8868\u793a\u6bcf\u4e2a InnoDB \u8868\u6570\u636e\u5b58\u50a8\u5728\u4e00\u4e2a\u4ee5 .ibd \u4e3a\u540e\u7f00\u7684\u6587\u4ef6\u4e2d\uff08\u9ed8\u8ba4\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u4e2a\u8868\u5355\u72ec\u5b58\u50a8\u4e3a\u4e00\u4e2a\u6587\u4ef6\u66f4\u5bb9\u6613\u7ba1\u7406\uff0c\u5728\u4e0d\u9700\u8981\u8fd9\u4e2a\u8868\u65f6\u901a\u8fc7 drop table \u547d\u4ee4\uff0c\u7cfb\u7edf\u5c31\u4f1a\u76f4\u63a5\u5220\u9664\u8fd9\u4e2a\u6587\u4ef6\uff1b\u5982\u679c\u662f\u653e\u5728\u5171\u4eab\u8868\u7a7a\u95f4\u4e2d\uff0c\u5373\u4f7f\u8868\u5220\u6389\u4e86\uff0c\u7a7a\u95f4\u4e5f\u662f\u4e0d\u4f1a\u56de\u6536\u7684"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6570\u636e\u5220\u9664",children:"\u6570\u636e\u5220\u9664"}),"\n",(0,i.jsxs)(e.p,{children:["MySQL \u7684\u6570\u636e\u5220\u9664\u5c31\u662f\u79fb\u9664\u6389\u67d0\u4e2a\u8bb0\u5f55\u540e\uff0c\u8be5\u4f4d\u7f6e\u5c31\u88ab\u6807\u8bb0\u4e3a",(0,i.jsx)(e.strong,{children:"\u53ef\u590d\u7528"}),"\uff0c\u5982\u679c\u6709\u7b26\u5408\u8303\u56f4\u6761\u4ef6\u7684\u6570\u636e\u53ef\u4ee5\u63d2\u5165\u5230\u8fd9\u91cc\u3002\u7b26\u5408\u8303\u56f4\u6761\u4ef6\u7684\u610f\u601d\u662f\u5047\u8bbe\u5220\u9664\u8bb0\u5f55 R4\uff0c\u4e4b\u540e\u8981\u518d\u63d2\u5165\u4e00\u4e2a ID \u5728 300 \u548c 600 \u4e4b\u95f4\u7684\u8bb0\u5f55\u65f6\uff0c\u5c31\u4f1a\u590d\u7528\u8fd9\u4e2a\u4f4d\u7f6e"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(5337).A+"",width:"519",height:"308"})}),"\n",(0,i.jsx)(e.p,{children:"InnoDB \u7684\u6570\u636e\u662f\u6309\u9875\u5b58\u50a8\u7684\u5982\u679c\u5220\u6389\u4e86\u4e00\u4e2a\u6570\u636e\u9875\u4e0a\u7684\u6240\u6709\u8bb0\u5f55\uff0c\u6574\u4e2a\u6570\u636e\u9875\u5c31\u53ef\u4ee5\u88ab\u590d\u7528\u4e86\uff0c\u5982\u679c\u76f8\u90bb\u7684\u4e24\u4e2a\u6570\u636e\u9875\u5229\u7528\u7387\u90fd\u5f88\u5c0f\uff0c\u7cfb\u7edf\u5c31\u4f1a\u628a\u8fd9\u4e24\u4e2a\u9875\u4e0a\u7684\u6570\u636e\u5408\u5230\u5176\u4e2d\u4e00\u4e2a\u9875\u4e0a\uff0c\u53e6\u5916\u4e00\u4e2a\u6570\u636e\u9875\u5c31\u88ab\u6807\u8bb0\u4e3a\u53ef\u590d\u7528"}),"\n",(0,i.jsxs)(e.p,{children:["\u5220\u9664\u547d\u4ee4\u5176\u5b9e\u53ea\u662f\u628a\u8bb0\u5f55\u7684\u4f4d\u7f6e\uff0c\u6216\u8005",(0,i.jsx)(e.strong,{children:"\u6570\u636e\u9875\u6807\u8bb0\u4e3a\u4e86\u53ef\u590d\u7528\uff0c\u4f46\u78c1\u76d8\u6587\u4ef6\u7684\u5927\u5c0f\u662f\u4e0d\u4f1a\u53d8\u7684"}),"\uff0c\u8fd9\u4e9b\u53ef\u4ee5\u590d\u7528\u8fd8\u6ca1\u6709\u88ab\u4f7f\u7528\u7684\u7a7a\u95f4\uff0c\u770b\u8d77\u6765\u5c31\u50cf\u662f\u7a7a\u6d1e\uff0c\u9020\u6210\u6570\u636e\u5e93\u7684\u7a00\u758f\uff0c\u56e0\u6b64\u9700\u8981\u8fdb\u884c\u7d27\u51d1\u5904\u7406"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u91cd\u5efa\u6570\u636e",children:"\u91cd\u5efa\u6570\u636e"}),"\n",(0,i.jsx)(e.p,{children:"\u91cd\u5efa\u8868\u5c31\u662f\u6309\u7167\u4e3b\u952e ID \u9012\u589e\u7684\u987a\u5e8f\uff0c\u628a\u6570\u636e\u4e00\u884c\u4e00\u884c\u5730\u4ece\u65e7\u8868\u4e2d\u8bfb\u51fa\u6765\u518d\u63d2\u5165\u5230\u65b0\u8868\u4e2d\uff0c\u8ba9\u6570\u636e\u66f4\u52a0\u7d27\u51d1\u3002\u91cd\u5efa\u8868\u65f6 MySQL \u4f1a\u81ea\u52a8\u5b8c\u6210\u8f6c\u5b58\u6570\u636e\u3001\u4ea4\u6362\u8868\u540d\u3001\u5220\u9664\u65e7\u8868\u7684\u64cd\u4f5c\uff0c\u7ebf\u4e0a\u64cd\u4f5c\u4f1a\u963b\u585e\u5927\u91cf\u7684\u7ebf\u7a0b\u589e\u5220\u6539\u67e5\u7684\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"\u91cd\u5efa\u547d\u4ee4\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"ALTER TABLE A ENGINE=InnoDB\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5de5\u4f5c\u6d41\u7a0b\uff1a\u65b0\u5efa\u4e34\u65f6\u8868 tmp_table B\uff08\u5728 Server \u5c42\u521b\u5efa\u7684\uff09\uff0c\u628a\u8868 A \u4e2d\u7684\u6570\u636e\u5bfc\u5165\u5230\u8868 B \u4e2d\uff0c\u64cd\u4f5c\u5b8c\u6210\u540e\u7528\u8868 B \u66ff\u6362\u8868 A\uff0c\u5b8c\u6210\u91cd\u5efa"}),"\n",(0,i.jsx)(e.p,{children:"\u91cd\u5efa\u8868\u7684\u6b65\u9aa4\u9700\u8981 DDL \u4e0d\u662f Online \u7684\uff0c\u56e0\u4e3a\u5728\u5bfc\u5165\u6570\u636e\u7684\u8fc7\u7a0b\u6709\u65b0\u7684\u6570\u636e\u8981\u5199\u5165\u5230\u8868 A \u7684\u8bdd\uff0c\u5c31\u4f1a\u9020\u6210\u6570\u636e\u4e22\u5931"}),"\n",(0,i.jsxs)(e.p,{children:["MySQL 5.6 \u7248\u672c\u5f00\u59cb\u5f15\u5165\u7684 ",(0,i.jsx)(e.strong,{children:"Online DDL"}),"\uff0c\u91cd\u5efa\u8868\u7684\u547d\u4ee4\u9ed8\u8ba4\u6267\u884c\u6b64\u6b65\u9aa4\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5efa\u7acb\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6 tmp_file\uff08InnoDB \u521b\u5efa\uff09\uff0c\u626b\u63cf\u8868 A \u4e3b\u952e\u7684\u6240\u6709\u6570\u636e\u9875"}),"\n",(0,i.jsx)(e.li,{children:"\u7528\u6570\u636e\u9875\u4e2d\u8868 A \u7684\u8bb0\u5f55\u751f\u6210 B+ \u6811\uff0c\u5b58\u50a8\u5230\u4e34\u65f6\u6587\u4ef6\u4e2d"}),"\n",(0,i.jsx)(e.li,{children:"\u751f\u6210\u4e34\u65f6\u6587\u4ef6\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5c06\u6240\u6709\u5bf9 A \u7684\u64cd\u4f5c\u8bb0\u5f55\u5728\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff08row log\uff09\u4e2d\uff0c\u5bf9\u5e94\u7684\u662f\u56fe\u4e2d state2 \u7684\u72b6\u6001"}),"\n",(0,i.jsx)(e.li,{children:"\u4e34\u65f6\u6587\u4ef6\u751f\u6210\u540e\uff0c\u5c06\u65e5\u5fd7\u6587\u4ef6\u4e2d\u7684\u64cd\u4f5c\u5e94\u7528\u5230\u4e34\u65f6\u6587\u4ef6\uff0c\u5f97\u5230\u4e00\u4e2a\u903b\u8f91\u6570\u636e\u4e0a\u4e0e\u8868 A \u76f8\u540c\u7684\u6570\u636e\u6587\u4ef6\uff0c\u5bf9\u5e94\u7684\u5c31\u662f\u56fe\u4e2d state3"}),"\n",(0,i.jsx)(e.li,{children:"\u7528\u4e34\u65f6\u6587\u4ef6\u66ff\u6362\u8868 A \u7684\u6570\u636e\u6587\u4ef6"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(46156).A+"",width:"802",height:"493"})}),"\n",(0,i.jsxs)(e.p,{children:["Online DDL \u64cd\u4f5c\u4f1a\u5148\u83b7\u53d6 MDL \u5199\u9501\uff0c\u518d\u9000\u5316\u6210 MDL \u8bfb\u9501\u3002\u4f46 MDL \u5199\u9501\u6301\u6709\u65f6\u95f4\u6bd4\u8f83\u77ed\uff0c\u6240\u4ee5\u53ef\u4ee5\u79f0\u4e3a Online\uff1b \u800c MDL \u8bfb\u9501\uff0c\u4e0d\u963b\u6b62\u6570\u636e\u589e\u5220\u67e5\u6539\uff0c\u4f46\u4f1a\u963b\u6b62\u5176\u5b83\u7ebf\u7a0b\u4fee\u6539\u8868\u7ed3\u6784\uff08\u53ef\u4ee5\u5bf9\u6bd4 ",(0,i.jsx)(e.code,{children:"ANALYZE TABLE t"}),"  \u547d\u4ee4\uff09"]}),"\n",(0,i.jsx)(e.p,{children:"\u95ee\u9898\uff1a\u91cd\u5efa\u8868\u53ef\u4ee5\u6536\u7f29\u8868\u7a7a\u95f4\uff0c\u4f46\u662f\u6267\u884c\u6307\u4ee4\u540e\u6574\u4f53\u5360\u7528\u7a7a\u95f4\u589e\u5927"}),"\n",(0,i.jsx)(e.p,{children:"\u539f\u56e0\uff1a\u5728\u91cd\u5efa\u8868\u540e InnoDB \u4e0d\u4f1a\u628a\u6574\u5f20\u8868\u5360\u6ee1\uff0c\u6bcf\u4e2a\u9875\u7559\u4e86 1/16 \u7ed9\u540e\u7eed\u7684\u66f4\u65b0\u4f7f\u7528\u3002\u8868\u5728\u672a\u6574\u7406\u4e4b\u524d\u9875\u5df2\u7ecf\u5360\u7528 15/16 \u4ee5\u4e0a\uff0c\u6536\u7f29\u4e4b\u540e\u9700\u8981\u4fdd\u6301\u6570\u636e\u5360\u7528\u7a7a\u95f4\u5728 15/16\uff0c\u6240\u4ee5\u6587\u4ef6\u5360\u7528\u7a7a\u95f4\u66f4\u5927\u624d\u80fd\u4fdd\u6301"}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u4e34\u65f6\u6587\u4ef6\u4e5f\u8981\u5360\u7528\u7a7a\u95f4\uff0c\u5982\u679c\u7a7a\u95f4\u4e0d\u8db3\u4f1a\u91cd\u5efa\u5931\u8d25"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u539f\u5730\u7f6e\u6362",children:"\u539f\u5730\u7f6e\u6362"}),"\n",(0,i.jsx)(e.p,{children:"DDL \u4e2d\u7684\u4e34\u65f6\u8868 tmp_table \u662f\u5728 Server \u5c42\u521b\u5efa\u7684\uff0cOnline DDL \u4e2d\u7684\u4e34\u65f6\u6587\u4ef6 tmp_file \u662f InnoDB \u5728\u5185\u90e8\u521b\u5efa\u51fa\u6765\u7684\uff0c\u6574\u4e2a DDL \u8fc7\u7a0b\u90fd\u5728 InnoDB \u5185\u90e8\u5b8c\u6210\uff0c\u5bf9\u4e8e Server \u5c42\u6765\u8bf4\uff0c\u6ca1\u6709\u628a\u6570\u636e\u632a\u52a8\u5230\u4e34\u65f6\u8868\uff0c\u662f\u4e00\u4e2a\u539f\u5730\u64cd\u4f5c\uff0c\u8fd9\u5c31\u662f inplace"}),"\n",(0,i.jsx)(e.p,{children:"\u4e24\u8005\u7684\u5173\u7cfb\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"DDL \u8fc7\u7a0b\u5982\u679c\u662f Online \u7684\uff0c\u5c31\u4e00\u5b9a\u662f inplace \u7684"}),"\n",(0,i.jsx)(e.li,{children:"inplace \u7684 DDL\uff0c\u6709\u53ef\u80fd\u4e0d\u662f Online \u7684\uff0c\u622a\u6b62\u5230 MySQL 8.0\uff0c\u5168\u6587\u7d22\u5f15\uff08FULLTEXT\uff09\u548c\u7a7a\u95f4\u7d22\u5f15\uff08SPATIAL\uff09\u5c5e\u4e8e\u8fd9\u79cd\u60c5\u51b5"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5e76\u53d1\u4f18\u5316",children:"\u5e76\u53d1\u4f18\u5316"}),"\n",(0,i.jsx)(e.p,{children:"MySQL Server \u662f\u591a\u7ebf\u7a0b\u7ed3\u6784\uff0c\u5305\u62ec\u540e\u53f0\u7ebf\u7a0b\u548c\u5ba2\u6237\u670d\u52a1\u7ebf\u7a0b\u3002\u591a\u7ebf\u7a0b\u53ef\u4ee5\u6709\u6548\u5229\u7528\u670d\u52a1\u5668\u8d44\u6e90\uff0c\u63d0\u9ad8\u6570\u636e\u5e93\u7684\u5e76\u53d1\u6027\u80fd\u3002\u5728 MySQL \u4e2d\uff0c\u63a7\u5236\u5e76\u53d1\u8fde\u63a5\u548c\u7ebf\u7a0b\u7684\u4e3b\u8981\u53c2\u6570\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"max_connections\uff1a\u63a7\u5236\u5141\u8bb8\u8fde\u63a5\u5230 MySQL \u6570\u636e\u5e93\u7684\u6700\u5927\u8fde\u63a5\u6570\uff0c\u9ed8\u8ba4\u503c\u662f 151"}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u72b6\u6001\u53d8\u91cf connection_errors_max_connections \u4e0d\u4e3a\u96f6\uff0c\u5e76\u4e14\u4e00\u76f4\u589e\u957f\uff0c\u5219\u8bf4\u660e\u4e0d\u65ad\u6709\u8fde\u63a5\u8bf7\u6c42\u56e0\u6570\u636e\u5e93\u8fde\u63a5\u6570\u5df2\u8fbe\u5230\u5141\u8bb8\u6700\u5927\u503c\u800c\u5931\u8d25\uff0c\u8fd9\u65f6\u53ef\u4ee5\u8003\u8651\u589e\u5927 max_connections \u7684\u503c"}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u6700\u5927\u53ef\u652f\u6301\u7684\u8fde\u63a5\u6570\u53d6\u51b3\u4e8e\u5f88\u591a\u56e0\u7d20\uff0c\u5305\u62ec\u64cd\u4f5c\u7cfb\u7edf\u5e73\u53f0\u7684\u7ebf\u7a0b\u5e93\u7684\u8d28\u91cf\u3001\u5185\u5b58\u5927\u5c0f\u3001\u6bcf\u4e2a\u8fde\u63a5\u7684\u8d1f\u8377\u3001CPU\u7684\u5904\u7406\u901f\u5ea6\u3001\u671f\u671b\u7684\u54cd\u5e94\u65f6\u95f4\u7b49\u3002\u5728 Linux \u5e73\u53f0\u4e0b\uff0c\u6027\u80fd\u597d\u7684\u670d\u52a1\u5668\uff0c\u53ef\u4ee5\u652f\u6301 500-1000 \u4e2a\u8fde\u63a5\uff0c\u9700\u8981\u6839\u636e\u670d\u52a1\u5668\u6027\u80fd\u8fdb\u884c\u8bc4\u4f30\u8bbe\u5b9a"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"innodb_thread_concurrency\uff1a\u5e76\u53d1\u7ebf\u7a0b\u6570\uff0c\u4ee3\u8868\u7cfb\u7edf\u5185\u540c\u65f6\u8fd0\u884c\u7684\u7ebf\u7a0b\u6570\u91cf\uff08\u5df2\u7ecf\u88ab\u79fb\u9664\uff09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"back_log\uff1a\u63a7\u5236 MySQL \u76d1\u542c TCP \u7aef\u53e3\u65f6\u7684\u79ef\u538b\u8bf7\u6c42\u6808\u7684\u5927\u5c0f"}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c Mysql \u7684\u8fde\u63a5\u6570\u8fbe\u5230 max_connections \u65f6\uff0c\u65b0\u6765\u7684\u8bf7\u6c42\u5c06\u4f1a\u88ab\u5b58\u5728\u5806\u6808\u4e2d\uff0c\u4ee5\u7b49\u5f85\u67d0\u4e00\u8fde\u63a5\u91ca\u653e\u8d44\u6e90\uff0c\u8be5\u5806\u6808\u7684\u6570\u91cf\u5373 back_log\u3002\u5982\u679c\u7b49\u5f85\u8fde\u63a5\u7684\u6570\u91cf\u8d85\u8fc7 back_log\uff0c\u5c06\u4e0d\u88ab\u6388\u4e88\u8fde\u63a5\u8d44\u6e90\u76f4\u63a5\u62a5\u9519"}),"\n",(0,i.jsxs)(e.p,{children:["5.6.6 \u7248\u672c\u4e4b\u524d\u9ed8\u8ba4\u503c\u4e3a 50\uff0c\u4e4b\u540e\u7684\u7248\u672c\u9ed8\u8ba4\u4e3a ",(0,i.jsx)(e.code,{children:"50 + (max_connections/5)"}),"\uff0c\u4f46\u6700\u5927\u4e0d\u8d85\u8fc7900\uff0c\u5982\u679c\u9700\u8981\u6570\u636e\u5e93\u5728\u8f83\u77ed\u7684\u65f6\u95f4\u5185\u5904\u7406\u5927\u91cf\u8fde\u63a5\u8bf7\u6c42\uff0c \u53ef\u4ee5\u8003\u8651\u9002\u5f53\u589e\u5927 back_log \u7684\u503c"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"table_open_cache\uff1a\u63a7\u5236\u6240\u6709 SQL \u8bed\u53e5\u6267\u884c\u7ebf\u7a0b\u53ef\u6253\u5f00\u8868\u7f13\u5b58\u7684\u6570\u91cf"}),"\n",(0,i.jsxs)(e.p,{children:["\u5728\u6267\u884c SQL \u8bed\u53e5\u65f6\uff0c\u6bcf\u4e2a\u6267\u884c\u7ebf\u7a0b\u81f3\u5c11\u8981\u6253\u5f001\u4e2a\u8868\u7f13\u5b58\uff0c\u8be5\u53c2\u6570\u7684\u503c\u5e94\u8be5\u6839\u636e\u8bbe\u7f6e\u7684\u6700\u5927\u8fde\u63a5\u6570\u4ee5\u53ca\u6bcf\u4e2a\u8fde\u63a5\u6267\u884c\u5173\u8054\u67e5\u8be2\u4e2d\u6d89\u53ca\u7684\u8868\u7684\u6700\u5927\u6570\u91cf\u6765\u8bbe\u5b9a\uff1a",(0,i.jsx)(e.code,{children:"max_connections * N"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"thread_cache_size\uff1a\u53ef\u63a7\u5236 MySQL \u7f13\u5b58\u5ba2\u6237\u670d\u52a1\u7ebf\u7a0b\u7684\u6570\u91cf"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3a\u4e86\u52a0\u5feb\u8fde\u63a5\u6570\u636e\u5e93\u7684\u901f\u5ea6\uff0cMySQL \u4f1a\u7f13\u5b58\u4e00\u5b9a\u6570\u91cf\u7684\u5ba2\u6237\u670d\u52a1\u7ebf\u7a0b\u4ee5\u5907\u91cd\u7528\uff0c\u6c60\u5316\u601d\u60f3"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"innodb_lock_wait_timeout\uff1a\u8bbe\u7f6e InnoDB \u4e8b\u52a1\u7b49\u5f85\u884c\u9501\u7684\u65f6\u95f4\uff0c\u9ed8\u8ba4\u503c\u662f 50ms"}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u4e8e\u9700\u8981\u5feb\u901f\u53cd\u9988\u7684\u4e1a\u52a1\u7cfb\u7edf\uff0c\u53ef\u4ee5\u5c06\u884c\u9501\u7684\u7b49\u5f85\u65f6\u95f4\u8c03\u5c0f\uff0c\u4ee5\u907f\u514d\u4e8b\u52a1\u88ab\u957f\u65f6\u95f4\u6302\u8d77\uff1b \u5bf9\u4e8e\u540e\u53f0\u8fd0\u884c\u7684\u6279\u91cf\u5904\u7406\u7a0b\u5e8f\u6765\u8bf4\uff0c\u53ef\u4ee5\u5c06\u884c\u9501\u7684\u7b49\u5f85\u65f6\u95f4\u8c03\u5927\uff0c\u4ee5\u907f\u514d\u53d1\u751f\u5927\u7684\u56de\u6eda\u64cd\u4f5c"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u4e8b\u52a1\u673a\u5236",children:"\u4e8b\u52a1\u673a\u5236"}),"\n",(0,i.jsx)(e.h3,{id:"\u57fa\u672c\u4ecb\u7ecd-7",children:"\u57fa\u672c\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\uff08Transaction\uff09\u662f\u8bbf\u95ee\u548c\u66f4\u65b0\u6570\u636e\u5e93\u7684\u7a0b\u5e8f\u6267\u884c\u5355\u5143\uff1b\u4e8b\u52a1\u4e2d\u53ef\u80fd\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a SQL \u8bed\u53e5\uff0c\u8fd9\u4e9b\u8bed\u53e5\u8981\u4e48\u90fd\u6267\u884c\uff0c\u8981\u4e48\u90fd\u4e0d\u6267\u884c\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff0cMySQL \u652f\u6301\u4e8b\u52a1\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u5355\u5143\u4e2d\u7684\u6bcf\u6761 SQL \u8bed\u53e5\u90fd\u76f8\u4e92\u4f9d\u8d56\uff0c\u5f62\u6210\u4e00\u4e2a\u6574\u4f53"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u67d0\u6761 SQL \u8bed\u53e5\u6267\u884c\u5931\u8d25\u6216\u8005\u51fa\u73b0\u9519\u8bef\uff0c\u90a3\u4e48\u6574\u4e2a\u5355\u5143\u5c31\u4f1a\u56de\u6eda\uff0c\u64a4\u56de\u5230\u4e8b\u52a1\u6700\u521d\u7684\u72b6\u6001"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u5355\u5143\u4e2d\u6240\u6709\u7684 SQL \u8bed\u53e5\u90fd\u6267\u884c\u6210\u529f\uff0c\u5219\u4e8b\u52a1\u5c31\u987a\u5229\u6267\u884c"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\u7684\u56db\u5927\u7279\u5f81\uff1aACID"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u539f\u5b50\u6027 (atomicity)"}),"\n",(0,i.jsx)(e.li,{children:"\u4e00\u81f4\u6027 (consistency)"}),"\n",(0,i.jsx)(e.li,{children:"\u9694\u79bb\u6027 (isolaction)"}),"\n",(0,i.jsx)(e.li,{children:"\u6301\u4e45\u6027 (durability)"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\u7684\u51e0\u79cd\u72b6\u6001\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6d3b\u52a8\u7684\uff08active\uff09\uff1a\u4e8b\u52a1\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u64cd\u4f5c\u6b63\u5728\u6267\u884c\u4e2d"}),"\n",(0,i.jsx)(e.li,{children:"\u90e8\u5206\u63d0\u4ea4\u7684\uff08partially committed\uff09\uff1a\u4e8b\u52a1\u7684\u6700\u540e\u4e00\u4e2a\u64cd\u4f5c\u6267\u884c\u5b8c\uff0c\u4f46\u662f\u5185\u5b58\u8fd8\u6ca1\u5237\u65b0\u81f3\u78c1\u76d8"}),"\n",(0,i.jsx)(e.li,{children:"\u5931\u8d25\u7684\uff08failed\uff09\uff1a\u5f53\u4e8b\u52a1\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u6216\u90e8\u5206\u63d0\u4ea4\u72b6\u6001\u65f6\uff0c\u5982\u679c\u6570\u636e\u5e93\u9047\u5230\u4e86\u9519\u8bef\u6216\u5237\u810f\u5931\u8d25\uff0c\u6216\u8005\u7528\u6237\u4e3b\u52a8\u505c\u6b62\u5f53\u524d\u7684\u4e8b\u52a1"}),"\n",(0,i.jsx)(e.li,{children:"\u4e2d\u6b62\u7684\uff08aborted\uff09\uff1a\u5931\u8d25\u72b6\u6001\u7684\u4e8b\u52a1\u56de\u6eda\u5b8c\u6210\u540e\u7684\u72b6\u6001"}),"\n",(0,i.jsx)(e.li,{children:"\u63d0\u4ea4\u7684\uff08committed\uff09\uff1a\u5f53\u5904\u4e8e\u90e8\u5206\u63d0\u4ea4\u72b6\u6001\u7684\u4e8b\u52a1\u5237\u810f\u6210\u529f\uff0c\u5c31\u5904\u4e8e\u63d0\u4ea4\u72b6\u6001"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u4e8b\u52a1\u7ba1\u7406",children:"\u4e8b\u52a1\u7ba1\u7406"}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u64cd\u4f5c-2",children:"\u57fa\u672c\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\u7ba1\u7406\u7684\u4e09\u4e2a\u6b65\u9aa4"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5f00\u542f\u4e8b\u52a1\uff1a\u8bb0\u5f55\u56de\u6eda\u70b9\uff0c\u5e76\u901a\u77e5\u670d\u52a1\u5668\uff0c\u5c06\u8981\u6267\u884c\u4e00\u7ec4\u64cd\u4f5c\uff0c\u8981\u4e48\u540c\u65f6\u6210\u529f\u3001\u8981\u4e48\u540c\u65f6\u5931\u8d25"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6267\u884c SQL \u8bed\u53e5\uff1a\u6267\u884c\u5177\u4f53\u7684\u4e00\u6761\u6216\u591a\u6761 SQL \u8bed\u53e5"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7ed3\u675f\u4e8b\u52a1\uff08\u63d0\u4ea4|\u56de\u6eda\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u63d0\u4ea4\uff1a\u6ca1\u51fa\u73b0\u95ee\u9898\uff0c\u6570\u636e\u8fdb\u884c\u66f4\u65b0"}),"\n",(0,i.jsx)(e.li,{children:"\u56de\u6eda\uff1a\u51fa\u73b0\u95ee\u9898\uff0c\u6570\u636e\u6062\u590d\u5230\u5f00\u542f\u4e8b\u52a1\u65f6\u7684\u72b6\u6001"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u663e\u5f0f\u5f00\u542f\u4e8b\u52a1"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"START TRANSACTION [READ ONLY|READ WRITE|WITH CONSISTENT SNAPSHOT]; #\u53ef\u4ee5\u8ddf\u4e00\u4e2a\u6216\u591a\u4e2a\u72b6\u6001\uff0c\u6700\u540e\u7684\u662f\u4e00\u81f4\u6027\u8bfb\nBEGIN [WORK];\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\uff1a\u4e0d\u586b\u72b6\u6001\u9ed8\u8ba4\u662f\u8bfb\u5199\u4e8b\u52a1"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u56de\u6eda\u4e8b\u52a1\uff0c\u7528\u6765\u624b\u52a8\u4e2d\u6b62\u4e8b\u52a1"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"ROLLBACK;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u63d0\u4ea4\u4e8b\u52a1\uff0c\u663e\u793a\u6267\u884c\u662f\u624b\u52a8\u63d0\u4ea4\uff0cMySQL \u9ed8\u8ba4\u4e3a\u81ea\u52a8\u63d0\u4ea4"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"COMMIT;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fdd\u5b58\u70b9\uff1a\u5728\u4e8b\u52a1\u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\u8bbe\u7f6e\u7684\u8fd8\u539f\u70b9\uff0c\u8c03\u7528 ROLLBACK \u65f6\u53ef\u4ee5\u6307\u5b9a\u56de\u6eda\u5230\u54ea\u4e2a\u70b9"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SAVEPOINT point_name;\t\t\t\t\t\t#\u8bbe\u7f6e\u4fdd\u5b58\u70b9\nRELEASE point_name\t\t\t\t\t\t\t#\u5220\u9664\u4fdd\u5b58\u70b9\nROLLBACK [WORK] TO [SAVEPOINT] point_name\t#\u56de\u6eda\u81f3\u67d0\u4e2a\u4fdd\u5b58\u70b9\uff0c\u4e0d\u586b\u9ed8\u8ba4\u56de\u6eda\u5230\u4e8b\u52a1\u6267\u884c\u4e4b\u524d\u7684\u72b6\u6001\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u64cd\u4f5c\u6f14\u793a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u5f00\u542f\u4e8b\u52a1\nSTART TRANSACTION;\n\n-- \u5f20\u4e09\u7ed9\u674e\u56db\u8f6c\u8d26500\u5143\n-- 1.\u5f20\u4e09\u8d26\u6237-500\nUPDATE account SET money=money-500 WHERE NAME='\u5f20\u4e09';\n-- 2.\u674e\u56db\u8d26\u6237+500\nUPDATE account SET money=money+500 WHERE NAME='\u674e\u56db';\n\n-- \u56de\u6eda\u4e8b\u52a1(\u51fa\u73b0\u95ee\u9898)\nROLLBACK;\n\n-- \u63d0\u4ea4\u4e8b\u52a1(\u6ca1\u51fa\u73b0\u95ee\u9898)\nCOMMIT;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u63d0\u4ea4\u65b9\u5f0f",children:"\u63d0\u4ea4\u65b9\u5f0f"}),"\n",(0,i.jsx)(e.p,{children:"\u63d0\u4ea4\u65b9\u5f0f\u7684\u76f8\u5173\u8bed\u6cd5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u4e8b\u52a1\u63d0\u4ea4\u65b9\u5f0f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT @@AUTOCOMMIT;  \t\t-- \u4f1a\u8bdd\uff0c1 \u4ee3\u8868\u81ea\u52a8\u63d0\u4ea4    0 \u4ee3\u8868\u624b\u52a8\u63d0\u4ea4\nSELECT @@GLOBAL.AUTOCOMMIT;\t-- \u7cfb\u7edf\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539\u4e8b\u52a1\u63d0\u4ea4\u65b9\u5f0f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SET @@AUTOCOMMIT=\u6570\u5b57;\t-- \u7cfb\u7edf\nSET AUTOCOMMIT=\u6570\u5b57;\t\t-- \u4f1a\u8bdd\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u7cfb\u7edf\u53d8\u91cf\u7684\u64cd\u4f5c"}),"\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"SET [GLOBAL|SESSION] \u53d8\u91cf\u540d = \u503c;\t\t\t\t\t-- \u9ed8\u8ba4\u662f\u4f1a\u8bdd\nSET @@[(GLOBAL|SESSION).]\u53d8\u91cf\u540d = \u503c;\t\t\t\t-- \u9ed8\u8ba4\u662f\u7cfb\u7edf\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"SHOW [GLOBAL|SESSION] VARIABLES [LIKE '\u53d8\u91cf%'];\t  -- \u9ed8\u8ba4\u67e5\u770b\u4f1a\u8bdd\u5185\u7cfb\u7edf\u53d8\u91cf\u503c\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5de5\u4f5c\u539f\u7406\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u81ea\u52a8\u63d0\u4ea4\uff1a\u5982\u679c\u6ca1\u6709 START TRANSACTION \u663e\u5f0f\u5730\u5f00\u59cb\u4e00\u4e2a\u4e8b\u52a1\uff0c\u90a3\u4e48",(0,i.jsx)(e.strong,{children:"\u6bcf\u6761 SQL \u8bed\u53e5\u90fd\u4f1a\u88ab\u5f53\u505a\u4e00\u4e2a\u4e8b\u52a1\u6267\u884c\u63d0\u4ea4\u64cd\u4f5c"}),"\uff1b\u663e\u5f0f\u5f00\u542f\u4e8b\u52a1\u540e\uff0c\u4f1a\u5728\u672c\u6b21\u4e8b\u52a1\u7ed3\u675f\uff08\u63d0\u4ea4\u6216\u56de\u6eda\uff09\u524d\u6682\u65f6\u5173\u95ed\u81ea\u52a8\u63d0\u4ea4"]}),"\n",(0,i.jsx)(e.li,{children:"\u624b\u52a8\u63d0\u4ea4\uff1a\u4e0d\u9700\u8981\u663e\u5f0f\u7684\u5f00\u542f\u4e8b\u52a1\uff0c\u6240\u6709\u7684 SQL \u8bed\u53e5\u90fd\u5728\u4e00\u4e2a\u4e8b\u52a1\u4e2d\uff0c\u76f4\u5230\u6267\u884c\u4e86\u63d0\u4ea4\u6216\u56de\u6eda\uff0c\u7136\u540e\u8fdb\u5165\u4e0b\u4e00\u4e2a\u4e8b\u52a1"}),"\n",(0,i.jsxs)(e.li,{children:["\u9690\u5f0f\u63d0\u4ea4\uff1a\u5b58\u5728\u4e00\u4e9b\u7279\u6b8a\u7684\u547d\u4ee4\uff0c\u5728\u4e8b\u52a1\u4e2d\u6267\u884c\u4e86\u8fd9\u4e9b\u547d\u4ee4\u4f1a\u9a6c\u4e0a",(0,i.jsx)(e.strong,{children:"\u5f3a\u5236\u6267\u884c COMMIT \u63d0\u4ea4\u4e8b\u52a1"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"DDL \u8bed\u53e5"})," (CREATE/DROP/ALTER)\u3001LOCK TABLES \u8bed\u53e5\u3001LOAD DATA \u5bfc\u5165\u6570\u636e\u8bed\u53e5\u3001\u4e3b\u4ece\u590d\u5236\u8bed\u53e5\u7b49"]}),"\n",(0,i.jsx)(e.li,{children:"\u5f53\u4e00\u4e2a\u4e8b\u52a1\u8fd8\u6ca1\u63d0\u4ea4\u6216\u56de\u6eda\uff0c\u663e\u5f0f\u7684\u5f00\u542f\u4e00\u4e2a\u4e8b\u52a1\u4f1a\u9690\u5f0f\u7684\u63d0\u4ea4\u4e0a\u4e00\u4e2a\u4e8b\u52a1"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u4e8b\u52a1-id",children:"\u4e8b\u52a1 ID"}),"\n",(0,i.jsxs)(e.p,{children:["\u4e8b\u52a1\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u5bf9\u67d0\u4e2a\u8868\u6267\u884c\u4e86",(0,i.jsx)(e.strong,{children:"\u589e\u5220\u6539\u64cd\u4f5c\u6216\u8005\u521b\u5efa\u8868"}),"\uff0c\u5c31\u4f1a\u4e3a\u5f53\u524d\u4e8b\u52a1\u5206\u914d\u4e00\u4e2a\u72ec\u4e00\u65e0\u4e8c\u7684\u4e8b\u52a1 ID\uff08\u5bf9\u4e34\u65f6\u8868\u5e76\u4e0d\u4f1a\u5206\u914d ID\uff09\uff0c\u5982\u679c\u5f53\u524d\u4e8b\u52a1\u6ca1\u6709\u88ab\u5206\u914d ID\uff0c\u9ed8\u8ba4\u662f 0"]}),"\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\uff1a\u53ea\u8bfb\u4e8b\u52a1\u4e0d\u80fd\u5bf9\u666e\u901a\u7684\u8868\u8fdb\u884c\u589e\u5220\u6539\u64cd\u4f5c\uff0c\u4f46\u662f\u53ef\u4ee5\u5bf9\u4e34\u65f6\u8868\u589e\u5220\u6539\uff0c\u8bfb\u5199\u4e8b\u52a1\u53ef\u4ee5\u5bf9\u6570\u636e\u8868\u6267\u884c\u589e\u5220\u6539\u67e5\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1 ID \u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a\u6570\u5b57\uff0c\u670d\u52a1\u5668\u5728\u5185\u5b58\u4e2d\u7ef4\u62a4\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6bcf\u5f53\u9700\u8981\u4e3a\u67d0\u4e2a\u4e8b\u52a1\u5206\u914d ID\uff0c\u5c31\u4f1a\u628a\u5168\u5c40\u53d8\u91cf\u7684\u503c\u8d4b\u503c\u7ed9\u4e8b\u52a1 ID\uff0c\u7136\u540e\u53d8\u91cf\u81ea\u589e 1"}),"\n",(0,i.jsx)(e.li,{children:"\u6bcf\u5f53\u53d8\u91cf\u503c\u4e3a 256 \u7684\u500d\u6570\u65f6\uff0c\u5c31\u5c06\u8be5\u53d8\u91cf\u7684\u503c\u5237\u65b0\u5230\u7cfb\u7edf\u8868\u7a7a\u95f4\u7684 Max Trx ID \u5c5e\u6027\u4e2d\uff0c\u8be5\u5c5e\u6027\u5360 8 \u5b57\u8282"}),"\n",(0,i.jsxs)(e.li,{children:["\u7cfb\u7edf\u518d\u6b21\u542f\u52a8\u540e\uff0c\u4f1a\u8bfb\u53d6\u8868\u7a7a\u95f4\u7684 Max Trx ID \u5c5e\u6027\u5230\u5185\u5b58\uff0c\u52a0\u4e0a 256 \u540e\u8d4b\u503c\u7ed9\u5168\u5c40\u53d8\u91cf\uff0c\u56e0\u4e3a\u5173\u673a\u65f6\u7684\u4e8b\u52a1 ID \u53ef\u80fd\u5e76\u4e0d\u662f 256 \u7684\u500d\u6570\uff0c\u4f1a\u6bd4 Max Trx ID \u5927\uff0c\u6240\u4ee5\u9700\u8981\u52a0\u4e0a 256 \u4fdd\u6301\u4e8b\u52a1 ID \u662f\u4e00\u4e2a",(0,i.jsx)(e.strong,{children:"\u9012\u589e\u7684\u6570\u5b57"})]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u805a\u7c07\u7d22\u5f15"}),"\u7684\u884c\u8bb0\u5f55\u9664\u4e86\u5b8c\u6574\u7684\u6570\u636e\uff0c\u8fd8\u4f1a\u81ea\u52a8\u6dfb\u52a0 trx_id\u3001roll_pointer \u9690\u85cf\u5217\uff0c\u5982\u679c\u8868\u4e2d\u6ca1\u6709\u4e3b\u952e\u5e76\u4e14\u6ca1\u6709\u975e\u7a7a\u552f\u4e00\u7d22\u5f15\uff0c\u4e5f\u4f1a\u6dfb\u52a0\u4e00\u4e2a row_id \u7684\u9690\u85cf\u5217\u4f5c\u4e3a\u805a\u7c07\u7d22\u5f15"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u9694\u79bb\u7ea7\u522b",children:"\u9694\u79bb\u7ea7\u522b"}),"\n",(0,i.jsx)(e.h4,{id:"\u56db\u79cd\u7ea7\u522b",children:"\u56db\u79cd\u7ea7\u522b"}),"\n",(0,i.jsxs)(e.p,{children:["\u4e8b\u52a1\u7684\u9694\u79bb\u7ea7\u522b\uff1a\u591a\u4e2a\u5ba2\u6237\u7aef\u64cd\u4f5c\u65f6\uff0c\u5404\u4e2a\u5ba2\u6237\u7aef\u7684\u4e8b\u52a1\u4e4b\u95f4\u5e94\u8be5\u662f\u9694\u79bb\u7684\uff0c",(0,i.jsx)(e.strong,{children:"\u4e0d\u540c\u7684\u4e8b\u52a1\u4e4b\u95f4\u4e0d\u8be5\u4e92\u76f8\u5f71\u54cd"}),"\uff0c\u800c\u5982\u679c\u591a\u4e2a\u4e8b\u52a1\u64cd\u4f5c\u540c\u4e00\u6279\u6570\u636e\u65f6\uff0c\u5219\u9700\u8981\u8bbe\u7f6e\u4e0d\u540c\u7684\u9694\u79bb\u7ea7\u522b\uff0c\u5426\u5219\u5c31\u4f1a\u4ea7\u751f\u95ee\u9898\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u9694\u79bb\u7ea7\u522b\u5206\u7c7b\uff1a"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u9694\u79bb\u7ea7\u522b"}),(0,i.jsx)(e.th,{children:"\u540d\u79f0"}),(0,i.jsx)(e.th,{children:"\u4f1a\u5f15\u53d1\u7684\u95ee\u9898"}),(0,i.jsx)(e.th,{children:"\u6570\u636e\u5e93\u9ed8\u8ba4\u9694\u79bb\u7ea7\u522b"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Read Uncommitted"}),(0,i.jsx)(e.td,{children:"\u8bfb\u672a\u63d0\u4ea4"}),(0,i.jsx)(e.td,{children:"\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Read Committed"}),(0,i.jsx)(e.td,{children:"\u8bfb\u5df2\u63d0\u4ea4"}),(0,i.jsx)(e.td,{children:"\u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb"}),(0,i.jsx)(e.td,{children:"Oracle / SQL Server"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Repeatable Read"}),(0,i.jsx)(e.td,{children:"\u53ef\u91cd\u590d\u8bfb"}),(0,i.jsx)(e.td,{children:"\u5e7b\u8bfb"}),(0,i.jsx)(e.td,{children:"MySQL"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Serializable"}),(0,i.jsx)(e.td,{children:"\u53ef\u4e32\u884c\u5316"}),(0,i.jsx)(e.td,{children:"\u65e0"}),(0,i.jsx)(e.td,{})]})]})]}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u822c\u6765\u8bf4\uff0c\u9694\u79bb\u7ea7\u522b\u8d8a\u4f4e\uff0c\u7cfb\u7edf\u5f00\u9500\u8d8a\u4f4e\uff0c\u53ef\u652f\u6301\u7684\u5e76\u53d1\u8d8a\u9ad8\uff0c\u4f46\u9694\u79bb\u6027\u4e5f\u8d8a\u5dee"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u810f\u5199 (Dirty Write)\uff1a\u5f53\u4e24\u4e2a\u6216\u591a\u4e2a\u4e8b\u52a1\u9009\u62e9\u540c\u4e00\u884c\uff0c\u6700\u521d\u7684\u4e8b\u52a1\u4fee\u6539\u7684\u503c\u88ab\u540e\u9762\u4e8b\u52a1\u4fee\u6539\u7684\u503c\u8986\u76d6\uff0c\u6240\u6709\u7684\u9694\u79bb\u7ea7\u522b\u90fd\u53ef\u4ee5\u907f\u514d\u810f\u5199\uff08\u53c8\u53eb\u4e22\u5931\u66f4\u65b0\uff09\uff0c\u56e0\u4e3a\u6709\u884c\u9501"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u810f\u8bfb (Dirty Reads)\uff1a\u5728\u4e00\u4e2a\u4e8b\u52a1\u5904\u7406\u8fc7\u7a0b\u4e2d\u8bfb\u53d6\u4e86\u53e6\u4e00\u4e2a",(0,i.jsx)(e.strong,{children:"\u672a\u63d0\u4ea4"}),"\u7684\u4e8b\u52a1\u4e2d\u4fee\u6539\u8fc7\u7684\u6570\u636e"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u4e0d\u53ef\u91cd\u590d\u8bfb (Non-Repeatable Reads)\uff1a\u5728\u4e00\u4e2a\u4e8b\u52a1\u5904\u7406\u8fc7\u7a0b\u4e2d\u8bfb\u53d6\u4e86\u53e6\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u4fee\u6539\u5e76",(0,i.jsx)(e.strong,{children:"\u5df2\u63d0\u4ea4"}),"\u7684\u6570\u636e"]}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\u53ef\u91cd\u590d\u8bfb\u7684\u610f\u601d\u662f\u4e0d\u7ba1\u8bfb\u51e0\u6b21\uff0c\u7ed3\u679c\u90fd\u4e00\u6837\uff0c\u53ef\u4ee5\u91cd\u590d\u7684\u8bfb\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u5feb\u7167\u8bfb\uff0c\u8981\u8bfb\u7684\u6570\u636e\u96c6\u4e0d\u4f1a\u53d1\u751f\u53d8\u5316"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5e7b\u8bfb (Phantom Reads)\uff1a\u5728\u4e8b\u52a1\u4e2d\u6309\u67d0\u4e2a\u6761\u4ef6\u5148\u540e\u4e24\u6b21\u67e5\u8be2\u6570\u636e\u5e93\uff0c\u540e\u4e00\u6b21\u67e5\u8be2\u67e5\u5230\u4e86\u524d\u4e00\u6b21\u67e5\u8be2\u6ca1\u6709\u67e5\u5230\u7684\u884c\uff0c",(0,i.jsx)(e.strong,{children:"\u6570\u636e\u6761\u76ee"}),"\u53d1\u751f\u4e86\u53d8\u5316\u3002\u6bd4\u5982\u67e5\u8be2\u67d0\u6570\u636e\u4e0d\u5b58\u5728\uff0c\u51c6\u5907\u63d2\u5165\u6b64\u8bb0\u5f55\uff0c\u4f46\u6267\u884c\u63d2\u5165\u65f6\u53d1\u73b0\u6b64\u8bb0\u5f55\u5df2\u5b58\u5728\uff0c\u65e0\u6cd5\u63d2\u5165"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u9694\u79bb\u7ea7\u522b\u64cd\u4f5c\u8bed\u6cd5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u6570\u636e\u5e93\u9694\u79bb\u7ea7\u522b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT @@TX_ISOLATION;\t\t\t-- \u4f1a\u8bdd\nSELECT @@GLOBAL.TX_ISOLATION;\t-- \u7cfb\u7edf\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539\u6570\u636e\u5e93\u9694\u79bb\u7ea7\u522b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SET GLOBAL TRANSACTION ISOLATION LEVEL \u7ea7\u522b\u5b57\u7b26\u4e32;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u52a0\u9501\u5206\u6790",children:"\u52a0\u9501\u5206\u6790"}),"\n",(0,i.jsx)(e.p,{children:"InnoDB \u5b58\u50a8\u5f15\u64ce\u652f\u6301\u4e8b\u52a1\uff0c\u6240\u4ee5\u52a0\u9501\u5206\u6790\u662f\u57fa\u4e8e\u8be5\u5b58\u50a8\u5f15\u64ce"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Read Uncommitted \u7ea7\u522b\uff0c\u4efb\u4f55\u64cd\u4f5c\u90fd\u4e0d\u4f1a\u52a0\u9501"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Read Committed \u7ea7\u522b\uff0c\u589e\u5220\u6539\u64cd\u4f5c\u4f1a\u52a0\u5199\u9501\uff08\u884c\u9501\uff09\uff0c\u8bfb\u64cd\u4f5c\u4e0d\u52a0\u9501"}),"\n",(0,i.jsxs)(e.p,{children:["\u5728 Server \u5c42\u8fc7\u6ee4\u6761\u4ef6\u65f6\u53d1\u73b0\u4e0d\u6ee1\u8db3\u7684\u8bb0\u5f55\u4f1a\u8c03\u7528 unlock_row \u65b9\u6cd5\u91ca\u653e\u8be5\u8bb0\u5f55\u7684\u884c\u9501\uff0c\u4fdd\u8bc1\u6700\u540e\u53ea\u6709\u6ee1\u8db3\u6761\u4ef6\u7684\u8bb0\u5f55\u52a0\u9501\uff0c\u4f46\u662f\u626b\u8868\u8fc7\u7a0b\u4e2d\u6bcf\u6761\u8bb0\u5f55\u7684",(0,i.jsx)(e.strong,{children:"\u52a0\u9501\u64cd\u4f5c\u4e0d\u80fd\u7701\u7565"}),"\u3002\u6240\u4ee5\u5bf9\u6570\u636e\u91cf\u5f88\u5927\u7684\u8868\u505a\u6279\u91cf\u4fee\u6539\u65f6\uff0c\u5982\u679c\u65e0\u6cd5\u4f7f\u7528\u76f8\u5e94\u7684\u7d22\u5f15\uff08\u5168\u8868\u626b\u63cf\uff09\uff0c\u5728 Server \u8fc7\u6ee4\u6570\u636e\u65f6\u5c31\u4f1a\u7279\u522b\u6162\uff0c\u51fa\u73b0\u867d\u7136\u6ca1\u6709\u4fee\u6539\u67d0\u4e9b\u884c\u7684\u6570\u636e\uff0c\u4f46\u662f\u8fd8\u662f\u88ab\u9501\u4f4f\u4e86\u7684\u73b0\u8c61\uff08\u9501\u8868\uff09\uff0c\u8fd9\u79cd\u60c5\u51b5\u540c\u6837\u9002\u7528\u4e8e  RR"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["Repeatable Read \u7ea7\u522b\uff0c\u589e\u5220\u6539\u64cd\u4f5c\u4f1a\u52a0\u5199\u9501\uff0c\u8bfb\u64cd\u4f5c\u4e0d\u52a0\u9501\u3002\u56e0\u4e3a\u8bfb\u5199\u9501\u4e0d\u517c\u5bb9\uff0c",(0,i.jsx)(e.strong,{children:"\u52a0\u4e86\u8bfb\u9501\u540e\u5176\u4ed6\u4e8b\u52a1\u5c31\u65e0\u6cd5\u4fee\u6539\u6570\u636e"}),"\uff0c\u5f71\u54cd\u4e86\u5e76\u53d1\u6027\u80fd\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u9694\u79bb\u6027\u548c\u5e76\u53d1\u6027\uff0cMySQL \u901a\u8fc7 MVCC \u89e3\u51b3\u4e86\u8bfb\u5199\u51b2\u7a81\u3002RR \u7ea7\u522b\u4e0b\u7684\u9501\u6709\u5f88\u591a\u79cd\uff0c\u9501\u673a\u5236\u7ae0\u8282\u8be6\u89e3"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Serializable \u7ea7\u522b\uff0c\u8bfb\u52a0\u5171\u4eab\u9501\uff0c\u5199\u52a0\u6392\u4ed6\u9501\uff0c\u8bfb\u5199\u4e92\u65a5\uff0c\u4f7f\u7528\u7684\u60b2\u89c2\u9501\u7684\u7406\u8bba\uff0c\u5b9e\u73b0\u7b80\u5355\uff0c\u6570\u636e\u66f4\u52a0\u5b89\u5168\uff0c\u4f46\u662f\u5e76\u53d1\u80fd\u529b\u975e\u5e38\u5dee"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e32\u884c\u5316\uff1a\u8ba9\u6240\u6709\u4e8b\u52a1\u6309\u987a\u5e8f\u5355\u72ec\u6267\u884c\uff0c\u5199\u64cd\u4f5c\u4f1a\u52a0\u5199\u9501\uff0c\u8bfb\u64cd\u4f5c\u4f1a\u52a0\u8bfb\u9501"}),"\n",(0,i.jsx)(e.li,{children:"\u53ef\u4e32\u884c\u5316\uff1a\u8ba9\u6240\u6709\u64cd\u4f5c\u76f8\u540c\u6570\u636e\u7684\u4e8b\u52a1\u987a\u5e8f\u6267\u884c\uff0c\u901a\u8fc7\u52a0\u9501\u5b9e\u73b0"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://tech.meituan.com/2014/08/20/innodb-lock.html",children:"https://tech.meituan.com/2014/08/20/innodb-lock.html"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u539f\u5b50\u7279\u6027",children:"\u539f\u5b50\u7279\u6027"}),"\n",(0,i.jsx)(e.h4,{id:"\u5b9e\u73b0\u65b9\u5f0f",children:"\u5b9e\u73b0\u65b9\u5f0f"}),"\n",(0,i.jsx)(e.p,{children:"\u539f\u5b50\u6027\u662f\u6307\u4e8b\u52a1\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\uff0c\u4e8b\u52a1\u7684\u64cd\u4f5c\u5982\u679c\u6210\u529f\u5c31\u5fc5\u987b\u8981\u5b8c\u5168\u5e94\u7528\u5230\u6570\u636e\u5e93\uff0c\u5931\u8d25\u5219\u4e0d\u80fd\u5bf9\u6570\u636e\u5e93\u6709\u4efb\u4f55\u5f71\u54cd\u3002\u6bd4\u5982\u4e8b\u52a1\u4e2d\u4e00\u4e2a SQL \u8bed\u53e5\u6267\u884c\u5931\u8d25\uff0c\u5219\u5df2\u6267\u884c\u7684\u8bed\u53e5\u4e5f\u5fc5\u987b\u56de\u6eda\uff0c\u6570\u636e\u5e93\u9000\u56de\u5230\u4e8b\u52a1\u524d\u7684\u72b6\u6001"}),"\n",(0,i.jsx)(e.p,{children:"InnoDB \u5b58\u50a8\u5f15\u64ce\u63d0\u4f9b\u4e86\u4e24\u79cd\u4e8b\u52a1\u65e5\u5fd7\uff1aredo log\uff08\u91cd\u505a\u65e5\u5fd7\uff09\u548c undo log\uff08\u56de\u6eda\u65e5\u5fd7\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"redo log \u7528\u4e8e\u4fdd\u8bc1\u4e8b\u52a1\u6301\u4e45\u6027"}),"\n",(0,i.jsx)(e.li,{children:"undo log \u7528\u4e8e\u4fdd\u8bc1\u4e8b\u52a1\u539f\u5b50\u6027\u548c\u9694\u79bb\u6027"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["undo log \u5c5e\u4e8e",(0,i.jsx)(e.strong,{children:"\u903b\u8f91\u65e5\u5fd7"}),"\uff0c\u6839\u636e\u6bcf\u884c\u64cd\u4f5c\u8fdb\u884c\u8bb0\u5f55\uff0c\u8bb0\u5f55\u4e86 SQL \u6267\u884c\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u7528\u6765\u56de\u6eda\u884c\u8bb0\u5f55\u5230\u67d0\u4e2a\u7248\u672c"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5f53\u4e8b\u52a1\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u4fee\u6539\u65f6\uff0cInnoDB \u4f1a\u5148\u8bb0\u5f55\u5bf9\u5e94\u7684 undo log\uff0c\u5982\u679c\u4e8b\u52a1\u6267\u884c\u5931\u8d25\u6216\u8c03\u7528\u4e86 rollback \u5bfc\u81f4\u4e8b\u52a1\u56de\u6eda\uff0cInnoDB \u4f1a\u6839\u636e undo log \u7684\u5185\u5bb9",(0,i.jsx)(e.strong,{children:"\u505a\u4e0e\u4e4b\u524d\u76f8\u53cd\u7684\u64cd\u4f5c"}),"\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5bf9\u4e8e\u6bcf\u4e2a insert\uff0c\u56de\u6eda\u65f6\u4f1a\u6267\u884c delete"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5bf9\u4e8e\u6bcf\u4e2a delete\uff0c\u56de\u6eda\u65f6\u4f1a\u6267\u884c insert"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5bf9\u4e8e\u6bcf\u4e2a update\uff0c\u56de\u6eda\u65f6\u4f1a\u6267\u884c\u4e00\u4e2a\u76f8\u53cd\u7684 update\uff0c\u628a\u6570\u636e\u4fee\u6539\u56de\u53bb"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://www.cnblogs.com/kismetv/p/10331633.html",children:"https://www.cnblogs.com/kismetv/p/10331633.html"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"dml-\u89e3\u6790",children:"DML \u89e3\u6790"}),"\n",(0,i.jsx)(e.h5,{id:"insert-1",children:"INSERT"}),"\n",(0,i.jsx)(e.p,{children:"\u4e50\u89c2\u63d2\u5165\uff1a\u5f53\u524d\u6570\u636e\u9875\u7684\u5269\u4f59\u7a7a\u95f4\u5145\u8db3\uff0c\u76f4\u63a5\u5c06\u6570\u636e\u8fdb\u884c\u63d2\u5165"}),"\n",(0,i.jsx)(e.p,{children:"\u60b2\u89c2\u63d2\u5165\uff1a\u5f53\u524d\u6570\u636e\u9875\u7684\u5269\u4f59\u7a7a\u95f4\u4e0d\u8db3\uff0c\u9700\u8981\u8fdb\u884c\u9875\u5206\u88c2\uff0c\u7533\u8bf7\u4e00\u4e2a\u65b0\u7684\u9875\u9762\u6765\u63d2\u5165\u6570\u636e\uff0c\u4f1a\u9020\u6210\u66f4\u591a\u7684 redo log\uff0cundo log \u5f71\u54cd\u4e0d\u5927"}),"\n",(0,i.jsxs)(e.p,{children:["\u5f53\u5411\u67d0\u4e2a\u8868\u63d2\u5165\u4e00\u6761\u8bb0\u5f55\uff0c\u5b9e\u9645\u4e0a\u9700\u8981\u5411\u805a\u7c07\u7d22\u5f15\u548c\u6240\u6709\u4e8c\u7ea7\u7d22\u5f15\u90fd\u63d2\u5165\u4e00\u6761\u8bb0\u5f55\uff0c\u4f46\u662f undo log ",(0,i.jsx)(e.strong,{children:"\u53ea\u9488\u5bf9\u805a\u7c07\u7d22\u5f15\u8bb0\u5f55"}),"\uff0c\u5728\u56de\u6eda\u65f6\u4f1a\u6839\u636e\u805a\u7c07\u7d22\u5f15\u53bb\u6240\u6709\u7684\u4e8c\u7ea7\u7d22\u5f15\u8fdb\u884c\u56de\u6eda\u64cd\u4f5c"]}),"\n",(0,i.jsxs)(e.p,{children:["roll_pointer \u662f\u4e00\u4e2a\u6307\u9488\uff0c",(0,i.jsx)(e.strong,{children:"\u6307\u5411\u8bb0\u5f55\u5bf9\u5e94\u7684 undo log \u65e5\u5fd7"}),"\uff0c\u4e00\u6761\u8bb0\u5f55\u5c31\u662f\u4e00\u4e2a\u6570\u636e\u884c\uff0c\u884c\u683c\u5f0f\u4e2d\u7684 roll_pointer \u5c31\u6307\u5411 undo log"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"delete-1",children:"DELETE"}),"\n",(0,i.jsx)(e.p,{children:"\u63d2\u5165\u5230\u9875\u9762\u4e2d\u7684\u8bb0\u5f55\u4f1a\u6839\u636e next_record \u5c5e\u6027\u7ec4\u6210\u4e00\u4e2a\u5355\u5411\u94fe\u8868\uff0c\u8fd9\u4e2a\u94fe\u8868\u79f0\u4e3a\u6b63\u5e38\u94fe\u8868\uff0c\u88ab\u5220\u9664\u7684\u8bb0\u5f55\u4e5f\u4f1a\u901a\u8fc7 next_record \u7ec4\u6210\u4e00\u4e2a\u5783\u573e\u94fe\u8868\uff0c\u8be5\u94fe\u8868\u4e2d\u6240\u5360\u7528\u7684\u5b58\u50a8\u7a7a\u95f4\u53ef\u4ee5\u88ab\u91cd\u65b0\u5229\u7528\uff0c\u5e76\u4e0d\u4f1a\u76f4\u63a5\u6e05\u9664\u6570\u636e"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u9875\u9762 Page Header \u4e2d\uff0cPAGE_FREE \u5c5e\u6027\u6307\u5411\u5783\u573e\u94fe\u8868\u7684\u5934\u8282\u70b9\uff0c\u5220\u9664\u7684\u5de5\u4f5c\u8fc7\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5c06\u8981\u5220\u9664\u7684\u8bb0\u5f55\u7684 delete_flag \u4f4d\u7f6e\u4e3a 1\uff0c\u5176\u4ed6\u4e0d\u505a\u4fee\u6539\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u53eb ",(0,i.jsx)(e.strong,{children:"delete mark"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728\u4e8b\u52a1\u63d0\u4ea4\u524d\uff0cdelete_flag = 1 \u7684\u8bb0\u5f55\u4e00\u76f4\u90fd\u4f1a\u5904\u4e8e\u4e2d\u95f4\u72b6\u6001"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u4e8b\u52a1\u63d0\u4ea4\u540e\uff0c\u6709\u4e13\u95e8\u7684\u7ebf\u7a0b\u5c06 delete_flag = 1 \u7684\u8bb0\u5f55\u4ece\u6b63\u5e38\u94fe\u8868\u79fb\u9664\u5e76\u52a0\u5165\u5783\u573e\u94fe\u8868\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u53eb ",(0,i.jsx)(e.strong,{children:"purge"})]}),"\n",(0,i.jsx)(e.p,{children:"purge \u7ebf\u7a0b\u5728\u6267\u884c\u5220\u9664\u64cd\u4f5c\u65f6\u4f1a\u521b\u5efa\u4e00\u4e2a ReadView\uff0c\u6839\u636e\u4e8b\u52a1\u7684\u53ef\u89c1\u6027\u79fb\u9664\u6570\u636e\uff08\u9694\u79bb\u7279\u6027\u90e8\u5206\u8be6\u89e3\uff09"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u6709\u65b0\u63d2\u5165\u7684\u8bb0\u5f55\u65f6\uff0c\u9996\u5148\u5224\u65ad PAGE_FREE \u6307\u5411\u7684\u5934\u8282\u70b9\u662f\u5426\u8db3\u591f\u5bb9\u7eb3\u65b0\u7eaa\u5f55\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u53ef\u4ee5\u5bb9\u7eb3\u65b0\u7eaa\u5f55\uff0c\u5c31\u4f1a\u76f4\u63a5\u91cd\u7528\u5df2\u5220\u9664\u7684\u8bb0\u5f55\u7684\u5b58\u50a8\u7a7a\u95f4\uff0c\u7136\u540e\u8ba9 PAGE_FREE \u6307\u5411\u5783\u573e\u94fe\u8868\u7684\u4e0b\u4e00\u4e2a\u8282\u70b9"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u4e0d\u80fd\u5bb9\u7eb3\u65b0\u7eaa\u5f55\uff0c\u5c31\u76f4\u63a5\u5411\u9875\u9762\u7533\u8bf7\u65b0\u7684\u7a7a\u95f4\u5b58\u50a8\uff0c\u5e76\u4e0d\u4f1a\u904d\u5386\u5783\u573e\u94fe\u8868"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u91cd\u7528\u5df2\u5220\u9664\u7684\u8bb0\u5f55\u7a7a\u95f4\uff0c\u53ef\u80fd\u4f1a\u9020\u6210\u7a7a\u95f4\u788e\u7247\uff0c\u5f53\u6570\u636e\u9875\u5bb9\u7eb3\u4e0d\u4e86\u4e00\u6761\u8bb0\u5f55\u65f6\uff0c\u4f1a\u5224\u65ad\u5c06\u788e\u7247\u7a7a\u95f4\u52a0\u8d77\u6765\u662f\u5426\u53ef\u4ee5\u5bb9\u7eb3\uff0c\u5224\u65ad\u4e3a\u771f\u5c31\u4f1a\u91cd\u65b0\u7ec4\u7ec7\u9875\u5185\u7684\u8bb0\u5f55\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5f00\u8f9f\u4e00\u4e2a\u4e34\u65f6\u9875\u9762\uff0c\u5c06\u9875\u5185\u8bb0\u5f55\u4e00\u6b21\u63d2\u5165\u5230\u4e34\u65f6\u9875\u9762\uff0c\u6b64\u65f6\u4e34\u65f6\u9875\u9762\u65f6\u6ca1\u6709\u788e\u7247\u7684"}),"\n",(0,i.jsx)(e.li,{children:"\u628a\u4e34\u65f6\u9875\u9762\u7684\u5185\u5bb9\u590d\u5236\u5230\u672c\u9875\uff0c\u8fd9\u6837\u5c31\u89e3\u653e\u51fa\u4e86\u5185\u5b58\u788e\u7247\uff0c\u4f46\u662f\u4f1a\u8017\u8d39\u5f88\u5927\u7684\u6027\u80fd\u8d44\u6e90"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"update-1",children:"UPDATE"}),"\n",(0,i.jsx)(e.p,{children:"\u6267\u884c UPDATE \u8bed\u53e5\uff0c\u5bf9\u4e8e\u66f4\u65b0\u4e3b\u952e\u548c\u4e0d\u66f4\u65b0\u4e3b\u952e\u6709\u4e24\u79cd\u4e0d\u540c\u7684\u5904\u7406\u65b9\u5f0f"}),"\n",(0,i.jsx)(e.p,{children:"\u4e0d\u66f4\u65b0\u4e3b\u952e\u7684\u60c5\u51b5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5c31\u5730\u66f4\u65b0\uff08in-place update\uff09\uff0c\u5982\u679c\u66f4\u65b0\u540e\u7684\u5217\u548c\u66f4\u65b0\u524d\u7684\u5217\u5360\u7528\u7684\u5b58\u50a8\u7a7a\u95f4\u4e00\u6837\u5927\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u5728\u539f\u8bb0\u5f55\u4e0a\u4fee\u6539"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5148\u5220\u9664\u65e7\u7eaa\u5f55\uff0c\u518d\u63d2\u5165\u65b0\u7eaa\u5f55\uff0c\u8fd9\u91cc\u7684\u5220\u9664\u4e0d\u662f delete mark\uff0c\u800c\u662f\u76f4\u63a5\u5c06\u8bb0\u5f55\u52a0\u5165\u5783\u573e\u94fe\u8868\uff0c\u5e76\u4e14\u4fee\u6539\u9875\u9762\u7684\u76f8\u5e94\u7684\u63a7\u5236\u4fe1\u606f\uff0c\u6267\u884c\u5220\u9664\u7684\u7ebf\u7a0b\u4e0d\u662f purge\uff0c\u662f\u6267\u884c\u66f4\u65b0\u7684\u7528\u6237\u7ebf\u7a0b\uff0c\u63d2\u5165\u65b0\u8bb0\u5f55\u65f6\u53ef\u80fd\u9020\u6210\u9875\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4ece\u800c\u5bfc\u81f4\u9875\u5206\u88c2"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u66f4\u65b0\u4e3b\u952e\u7684\u60c5\u51b5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5c06\u65e7\u7eaa\u5f55\u8fdb\u884c delete mark\uff0c\u5728\u66f4\u65b0\u8bed\u53e5\u63d0\u4ea4\u540e\u7531 purge \u7ebf\u7a0b\u79fb\u5165\u5783\u573e\u94fe\u8868"}),"\n",(0,i.jsx)(e.li,{children:"\u6839\u636e\u66f4\u65b0\u7684\u5404\u5217\u7684\u503c\u521b\u5efa\u4e00\u6761\u65b0\u7eaa\u5f55\uff0c\u63d2\u5165\u5230\u805a\u7c07\u7d22\u5f15\u4e2d"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5728\u5bf9\u4e00\u6761\u8bb0\u5f55\u4fee\u6539\u524d\u4f1a",(0,i.jsx)(e.strong,{children:"\u5c06\u8bb0\u5f55\u7684\u9690\u85cf\u5217 trx_id \u548c roll_pointer \u7684\u65e7\u503c\u8bb0\u5f55\u5230\u5f53\u524d undo log \u5bf9\u5e94\u7684\u5c5e\u6027\u4e2d"}),"\uff0c\u8fd9\u6837\u5f53\u524d\u8bb0\u5f55\u7684 roll_pointer \u6307\u5411\u5f53\u524d undo log \u8bb0\u5f55\uff0c\u5f53\u524d undo log \u8bb0\u5f55\u7684 roll_pointer \u6307\u5411\u65e7\u7684 undo log \u8bb0\u5f55\uff0c",(0,i.jsx)(e.strong,{children:"\u5f62\u6210\u4e00\u4e2a\u7248\u672c\u94fe"})]}),"\n",(0,i.jsx)(e.p,{children:"UPDATE\u3001DELETE \u64cd\u4f5c\u4ea7\u751f\u7684 undo \u65e5\u5fd7\u4f1a\u7528\u4e8e\u5176\u4ed6\u4e8b\u52a1\u7684 MVCC \u64cd\u4f5c\uff0c\u6240\u4ee5\u4e0d\u80fd\u7acb\u5373\u5220\u9664\uff0cINSERT \u53ef\u4ee5\u5220\u9664\u7684\u539f\u56e0\u662f MVCC \u662f\u5bf9\u73b0\u6709\u6570\u636e\u7684\u5feb\u7167"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u56de\u6eda\u65e5\u5fd7",children:"\u56de\u6eda\u65e5\u5fd7"}),"\n",(0,i.jsx)(e.p,{children:"undo log \u662f\u91c7\u7528\u6bb5\u7684\u65b9\u5f0f\u6765\u8bb0\u5f55\uff0cRollback Segement \u79f0\u4e3a\u56de\u6eda\u6bb5\uff0c\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a\u7c7b\u578b\u662f Rollback Segement Header \u7684\u9875\u9762"}),"\n",(0,i.jsx)(e.p,{children:"\u6bcf\u4e2a\u56de\u6eda\u6bb5\u4e2d\u6709 1024 \u4e2a undo slot\uff0c\u6bcf\u4e2a slot \u5b58\u653e undo \u94fe\u8868\u9875\u9762\u7684\u5934\u8282\u70b9\u9875\u53f7\uff0c\u6bcf\u4e2a\u94fe\u8868\u5bf9\u5e94\u4e00\u4e2a\u53eb undo log segment \u7684\u6bb5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5728\u4ee5\u524d\u8001\u7248\u672c\uff0c\u53ea\u652f\u6301 1 \u4e2a Rollback Segement\uff0c\u53ea\u80fd\u8bb0\u5f55 1024 \u4e2a undo log segment"}),"\n",(0,i.jsx)(e.li,{children:"MySQL5.5 \u5f00\u59cb\u652f\u6301 128 \u4e2a Rollback Segement\uff0c\u652f\u6301 128*1024 \u4e2a undo \u64cd\u4f5c"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5de5\u4f5c\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\u6267\u884c\u524d\u9700\u8981\u5230\u7cfb\u7edf\u8868\u7a7a\u95f4\u7b2c 5 \u53f7\u9875\u9762\u4e2d\u5206\u914d\u4e00\u4e2a\u56de\u6eda\u6bb5\uff08\u9875\uff09\uff0c\u83b7\u53d6\u4e00\u4e2a Rollback Segement Header \u9875\u9762\u7684\u5730\u5740"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u56de\u6eda\u6bb5\u9875\u9762\u6709 1024 \u4e2a undo slot\uff0c\u9996\u5148\u53bb\u56de\u6eda\u6bb5\u7684\u4e24\u4e2a cached \u94fe\u8868\u83b7\u53d6\u7f13\u5b58\u7684 slot\uff0c\u7f13\u5b58\u4e2d\u6ca1\u6709\u5c31\u5728\u56de\u6eda\u6bb5\u9875\u9762\u4e2d\u627e\u4e00\u4e2a\u53ef\u7528\u7684 undo slot \u5206\u914d\u7ed9\u5f53\u524d\u4e8b\u52a1"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u662f\u7f13\u5b58\u4e2d\u83b7\u53d6\u7684 slot\uff0c\u5219\u8be5 slot \u5bf9\u5e94\u7684 undo log segment \u5df2\u7ecf\u5206\u914d\u4e86\uff0c\u9700\u8981\u91cd\u65b0\u5206\u914d\uff0c\u7136\u540e\u4ece undo log segment \u4e2d\u7533\u8bf7\u4e00\u4e2a\u9875\u9762\u4f5c\u4e3a\u65e5\u5fd7\u94fe\u8868\u7684\u5934\u8282\u70b9\uff0c\u5e76\u586b\u5165\u5bf9\u5e94\u7684 slot \u4e2d"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u6bcf\u4e2a\u4e8b\u52a1 undo \u65e5\u5fd7\u5728\u8bb0\u5f55\u7684\u65f6\u5019",(0,i.jsx)(e.strong,{children:"\u5360\u7528\u4e24\u4e2a undo \u9875\u9762\u7684\u7ec4\u6210\u94fe\u8868"}),"\uff0c\u5206\u522b\u4e3a insert undo \u94fe\u8868\u548c update undo \u94fe\u8868\uff0c\u94fe\u8868\u7684\u5934\u8282\u70b9\u9875\u9762\u4e3a first undo page \u4f1a\u5305\u542b\u4e00\u4e9b\u7ba1\u7406\u4fe1\u606f\uff0c\u5176\u4ed6\u9875\u9762\u4e3a normal undo page"]}),"\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\uff1a\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\u7684\u4e34\u65f6\u8868\u4e5f\u9700\u8981\u4e24\u4e2a undo \u94fe\u8868\uff0c\u4e0d\u548c\u666e\u901a\u8868\u5171\u7528\uff0c\u8fd9\u4e9b\u94fe\u8868\u5e76\u4e0d\u662f\u4e8b\u52a1\u5f00\u59cb\u5c31\u5206\u914d\uff0c\u800c\u662f\u6309\u9700\u5206\u914d"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u9694\u79bb\u7279\u6027",children:"\u9694\u79bb\u7279\u6027"}),"\n",(0,i.jsx)(e.h4,{id:"\u5b9e\u73b0\u65b9\u5f0f-1",children:"\u5b9e\u73b0\u65b9\u5f0f"}),"\n",(0,i.jsx)(e.p,{children:"\u9694\u79bb\u6027\u662f\u6307\uff0c\u4e8b\u52a1\u5185\u90e8\u7684\u64cd\u4f5c\u4e0e\u5176\u4ed6\u4e8b\u52a1\u662f\u9694\u79bb\u7684\uff0c\u591a\u4e2a\u5e76\u53d1\u4e8b\u52a1\u4e4b\u95f4\u8981\u76f8\u4e92\u9694\u79bb\uff0c\u4e0d\u80fd\u4e92\u76f8\u5e72\u6270"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e25\u683c\u7684\u9694\u79bb\u6027\uff0c\u5bf9\u5e94\u4e86\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u4e2d\u7684 serializable\uff0c\u5b9e\u9645\u5e94\u7528\u4e2d\u5bf9\u6027\u80fd\u8003\u8651\u5f88\u5c11\u4f7f\u7528\u53ef\u4e32\u884c\u5316"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u4e0e\u539f\u5b50\u6027\u3001\u6301\u4e45\u6027\u4fa7\u91cd\u4e8e\u7814\u7a76\u4e8b\u52a1\u672c\u8eab\u4e0d\u540c\uff0c\u9694\u79bb\u6027\u7814\u7a76\u7684\u662f",(0,i.jsx)(e.strong,{children:"\u4e0d\u540c\u4e8b\u52a1"}),"\u4e4b\u95f4\u7684\u76f8\u4e92\u5f71\u54cd"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u9694\u79bb\u6027\u8ba9\u5e76\u53d1\u60c5\u5f62\u4e0b\u7684\u4e8b\u52a1\u4e4b\u95f4\u4e92\u4e0d\u5e72\u6270\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e00\u4e2a\u4e8b\u52a1\u7684\u5199\u64cd\u4f5c\u5bf9\u53e6\u4e00\u4e2a\u4e8b\u52a1\u7684\u5199\u64cd\u4f5c\uff08\u5199\u5199\uff09\uff1a\u9501\u673a\u5236\u4fdd\u8bc1\u9694\u79bb\u6027"}),"\n",(0,i.jsx)(e.li,{children:"\u4e00\u4e2a\u4e8b\u52a1\u7684\u5199\u64cd\u4f5c\u5bf9\u53e6\u4e00\u4e2a\u4e8b\u52a1\u7684\u8bfb\u64cd\u4f5c\uff08\u8bfb\u5199\uff09\uff1aMVCC \u4fdd\u8bc1\u9694\u79bb\u6027"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u9501\u673a\u5236\uff1a\u4e8b\u52a1\u5728\u4fee\u6539\u6570\u636e\u4e4b\u524d\uff0c\u9700\u8981\u5148\u83b7\u5f97\u76f8\u5e94\u7684\u9501\uff0c\u83b7\u5f97\u9501\u4e4b\u540e\uff0c\u4e8b\u52a1\u4fbf\u53ef\u4ee5\u4fee\u6539\u6570\u636e\uff1b\u8be5\u4e8b\u52a1\u64cd\u4f5c\u671f\u95f4\uff0c\u8fd9\u90e8\u5206\u6570\u636e\u662f\u9501\u5b9a\u7684\uff0c\u5176\u4ed6\u4e8b\u52a1\u5982\u679c\u9700\u8981\u4fee\u6539\u6570\u636e\uff0c\u9700\u8981\u7b49\u5f85\u5f53\u524d\u4e8b\u52a1\u63d0\u4ea4\u6216\u56de\u6eda\u540e\u91ca\u653e\u9501\uff08\u8be6\u89e3\u89c1\u9501\u673a\u5236\uff09"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5e76\u53d1\u63a7\u5236",children:"\u5e76\u53d1\u63a7\u5236"}),"\n",(0,i.jsxs)(e.p,{children:["MVCC \u5168\u79f0 Multi-Version Concurrency Control\uff0c\u5373\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\uff0c\u7528\u6765",(0,i.jsx)(e.strong,{children:"\u89e3\u51b3\u8bfb\u5199\u51b2\u7a81\u7684\u65e0\u9501\u5e76\u53d1\u63a7\u5236"}),"\uff0c\u53ef\u4ee5\u5728\u53d1\u751f\u8bfb\u5199\u8bf7\u6c42\u51b2\u7a81\u65f6\u4e0d\u7528\u52a0\u9501\u89e3\u51b3\uff0c\u8fd9\u4e2a\u8bfb\u662f\u6307\u7684\u5feb\u7167\u8bfb\uff08\u4e5f\u53eb\u4e00\u81f4\u6027\u8bfb\u6216\u4e00\u81f4\u6027\u65e0\u9501\u8bfb\uff09\uff0c\u800c\u4e0d\u662f\u5f53\u524d\u8bfb\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5feb\u7167\u8bfb\uff1a\u5b9e\u73b0\u57fa\u4e8e MVCC\uff0c\u56e0\u4e3a\u662f\u591a\u7248\u672c\u5e76\u53d1\uff0c\u6240\u4ee5\u5feb\u7167\u8bfb\u8bfb\u5230\u7684\u6570\u636e\u4e0d\u4e00\u5b9a\u662f\u5f53\u524d\u6700\u65b0\u7684\u6570\u636e\uff0c\u6709\u53ef\u80fd\u662f\u5386\u53f2\u7248\u672c\u7684\u6570\u636e"}),"\n",(0,i.jsxs)(e.li,{children:["\u5f53\u524d\u8bfb\uff1a\u53c8\u53eb\u52a0\u9501\u8bfb\uff0c\u8bfb\u53d6\u6570\u636e\u5e93\u8bb0\u5f55\u662f\u5f53\u524d",(0,i.jsx)(e.strong,{children:"\u6700\u65b0\u7684\u7248\u672c"}),"\uff08\u4ea7\u751f\u5e7b\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\uff09\uff0c\u53ef\u4ee5\u5bf9\u8bfb\u53d6\u7684\u6570\u636e\u8fdb\u884c\u52a0\u9501\uff0c\u9632\u6b62\u5176\u4ed6\u4e8b\u52a1\u4fee\u6539\u6570\u636e\uff0c\u662f\u60b2\u89c2\u9501\u7684\u4e00\u79cd\u64cd\u4f5c\uff0c\u8bfb\u5199\u64cd\u4f5c\u52a0\u5171\u4eab\u9501\u6216\u8005\u6392\u4ed6\u9501\u548c\u4e32\u884c\u5316\u4e8b\u52a1\u7684\u9694\u79bb\u7ea7\u522b\u90fd\u662f\u5f53\u524d\u8bfb"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5e93\u5e76\u53d1\u573a\u666f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bfb-\u8bfb\uff1a\u4e0d\u5b58\u5728\u4efb\u4f55\u95ee\u9898\uff0c\u4e5f\u4e0d\u9700\u8981\u5e76\u53d1\u63a7\u5236"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bfb-\u5199\uff1a\u6709\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\uff0c\u53ef\u80fd\u4f1a\u9020\u6210\u4e8b\u52a1\u9694\u79bb\u6027\u95ee\u9898\uff0c\u53ef\u80fd\u9047\u5230\u810f\u8bfb\uff0c\u5e7b\u8bfb\uff0c\u4e0d\u53ef\u91cd\u590d\u8bfb"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5199-\u5199\uff1a\u6709\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\uff0c\u53ef\u80fd\u4f1a\u5b58\u5728\u810f\u5199\uff08\u4e22\u5931\u66f4\u65b0\uff09\u95ee\u9898"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"MVCC \u7684\u4f18\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5728\u5e76\u53d1\u8bfb\u5199\u6570\u636e\u5e93\u65f6\uff0c\u505a\u5230\u5728\u8bfb\u64cd\u4f5c\u65f6\u4e0d\u7528\u963b\u585e\u5199\u64cd\u4f5c\uff0c\u5199\u64cd\u4f5c\u4e5f\u4e0d\u7528\u963b\u585e\u8bfb\u64cd\u4f5c\uff0c\u63d0\u9ad8\u4e86\u5e76\u53d1\u8bfb\u5199\u7684\u6027\u80fd"}),"\n",(0,i.jsx)(e.li,{children:"\u53ef\u4ee5\u89e3\u51b3\u810f\u8bfb\uff0c\u4e0d\u53ef\u91cd\u590d\u8bfb\u7b49\u4e8b\u52a1\u9694\u79bb\u95ee\u9898\uff08\u52a0\u9501\u4e5f\u80fd\u89e3\u51b3\uff09\uff0c\u4f46\u4e0d\u80fd\u89e3\u51b3\u66f4\u65b0\u4e22\u5931\u95ee\u9898\uff08\u5199\u9501\u4f1a\u89e3\u51b3\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u63d0\u9ad8\u8bfb\u5199\u548c\u5199\u5199\u7684\u5e76\u53d1\u6027\u80fd\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"MVCC + \u60b2\u89c2\u9501\uff1aMVCC \u89e3\u51b3\u8bfb\u5199\u51b2\u7a81\uff0c\u60b2\u89c2\u9501\u89e3\u51b3\u5199\u5199\u51b2\u7a81"}),"\n",(0,i.jsx)(e.li,{children:"MVCC + \u4e50\u89c2\u9501\uff1aMVCC \u89e3\u51b3\u8bfb\u5199\u51b2\u7a81\uff0c\u4e50\u89c2\u9501\u89e3\u51b3\u5199\u5199\u51b2\u7a81"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://www.jianshu.com/p/8845ddca3b23",children:"https://www.jianshu.com/p/8845ddca3b23"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5b9e\u73b0\u539f\u7406",children:"\u5b9e\u73b0\u539f\u7406"}),"\n",(0,i.jsx)(e.h5,{id:"\u9690\u85cf\u5b57\u6bb5",children:"\u9690\u85cf\u5b57\u6bb5"}),"\n",(0,i.jsx)(e.p,{children:"\u5b9e\u73b0\u539f\u7406\u4e3b\u8981\u662f\u9690\u85cf\u5b57\u6bb5\uff0cundo\u65e5\u5fd7\uff0cRead View \u6765\u5b9e\u73b0\u7684"}),"\n",(0,i.jsxs)(e.p,{children:["InnoDB \u5b58\u50a8\u5f15\u64ce\uff0c\u6570\u636e\u5e93\u4e2d\u7684",(0,i.jsx)(e.strong,{children:"\u805a\u7c07\u7d22\u5f15"}),"\u6bcf\u884c\u6570\u636e\uff0c\u9664\u4e86\u81ea\u5b9a\u4e49\u7684\u5b57\u6bb5\uff0c\u8fd8\u6709\u6570\u636e\u5e93\u9690\u5f0f\u5b9a\u4e49\u7684\u5b57\u6bb5\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"DB_TRX_ID\uff1a\u6700\u8fd1\u4fee\u6539\u4e8b\u52a1 ID\uff0c\u8bb0\u5f55\u521b\u5efa\u8be5\u6570\u636e\u6216\u6700\u540e\u4e00\u6b21\u4fee\u6539\u8be5\u6570\u636e\u7684\u4e8b\u52a1 ID"}),"\n",(0,i.jsxs)(e.li,{children:["DB_ROLL_PTR\uff1a\u56de\u6eda\u6307\u9488\uff0c",(0,i.jsx)(e.strong,{children:"\u6307\u5411\u8bb0\u5f55\u5bf9\u5e94\u7684 undo log \u65e5\u5fd7"}),"\uff0cundo log \u4e2d\u53c8\u6307\u5411\u4e0a\u4e00\u4e2a\u65e7\u7248\u672c\u7684 undo log"]}),"\n",(0,i.jsxs)(e.li,{children:["DB_ROW_ID\uff1a\u9690\u542b\u7684\u81ea\u589e ID\uff08",(0,i.jsx)(e.strong,{children:"\u9690\u85cf\u4e3b\u952e"}),"\uff09\uff0c\u5982\u679c\u6570\u636e\u8868\u6ca1\u6709\u4e3b\u952e\uff0cInnoDB \u4f1a\u81ea\u52a8\u4ee5 DB_ROW_ID \u4f5c\u4e3a\u805a\u7c07\u7d22\u5f15"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(97663).A+"",width:"1191",height:"147"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u7248\u672c\u94fe",children:"\u7248\u672c\u94fe"}),"\n",(0,i.jsxs)(e.p,{children:["undo log \u662f\u903b\u8f91\u65e5\u5fd7\uff0c\u8bb0\u5f55\u7684\u662f\u6bcf\u4e2a\u4e8b\u52a1\u5bf9\u6570\u636e\u6267\u884c\u7684\u64cd\u4f5c\uff0c\u800c\u4e0d\u662f\u8bb0\u5f55\u7684\u5168\u90e8\u6570\u636e\uff0c\u8981",(0,i.jsx)(e.strong,{children:"\u6839\u636e undo log \u9006\u63a8\u51fa\u4ee5\u5f80\u4e8b\u52a1\u7684\u6570\u636e"})]}),"\n",(0,i.jsx)(e.p,{children:"undo log \u7684\u4f5c\u7528\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4fdd\u8bc1\u4e8b\u52a1\u8fdb\u884c rollback \u65f6\u7684\u539f\u5b50\u6027\u548c\u4e00\u81f4\u6027\uff0c\u5f53\u4e8b\u52a1\u8fdb\u884c\u56de\u6eda\u7684\u65f6\u5019\u53ef\u4ee5\u7528 undo log \u7684\u6570\u636e\u8fdb\u884c\u6062\u590d"}),"\n",(0,i.jsx)(e.li,{children:"\u7528\u4e8e MVCC \u5feb\u7167\u8bfb\uff0c\u901a\u8fc7\u8bfb\u53d6 undo log \u7684\u5386\u53f2\u7248\u672c\u6570\u636e\u53ef\u4ee5\u5b9e\u73b0\u4e0d\u540c\u4e8b\u52a1\u7248\u672c\u53f7\u90fd\u62e5\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u5feb\u7167\u6570\u636e"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"undo log \u4e3b\u8981\u5206\u4e3a\u4e24\u79cd\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"insert undo log\uff1a\u4e8b\u52a1\u5728 insert \u65b0\u8bb0\u5f55\u65f6\u4ea7\u751f\u7684 undo log\uff0c\u53ea\u5728\u4e8b\u52a1\u56de\u6eda\u65f6\u9700\u8981\uff0c\u5e76\u4e14\u5728\u4e8b\u52a1\u63d0\u4ea4\u540e\u53ef\u4ee5\u88ab\u7acb\u5373\u4e22\u5f03"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"update undo log\uff1a\u4e8b\u52a1\u5728\u8fdb\u884c update \u6216 delete \u65f6\u4ea7\u751f\u7684 undo log\uff0c\u5728\u4e8b\u52a1\u56de\u6eda\u65f6\u9700\u8981\uff0c\u5728\u5feb\u7167\u8bfb\u65f6\u4e5f\u9700\u8981\u3002\u4e0d\u80fd\u968f\u610f\u5220\u9664\uff0c\u53ea\u6709\u5728\u5f53\u524d\u8bfb\u6216\u4e8b\u52a1\u56de\u6eda\u4e0d\u6d89\u53ca\u8be5\u65e5\u5fd7\u65f6\uff0c\u5bf9\u5e94\u7684\u65e5\u5fd7\u624d\u4f1a\u88ab purge \u7ebf\u7a0b\u7edf\u4e00\u6e05\u9664"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u6bcf\u6b21\u5bf9\u6570\u636e\u5e93\u8bb0\u5f55\u8fdb\u884c\u6539\u52a8\uff0c\u90fd\u4f1a\u4ea7\u751f\u7684\u65b0\u7248\u672c\u7684 undo log\uff0c\u968f\u7740\u66f4\u65b0\u6b21\u6570\u7684\u589e\u591a\uff0c\u6240\u6709\u7684\u7248\u672c\u90fd\u4f1a\u88ab roll_pointer \u5c5e\u6027\u8fde\u63a5\u6210\u4e00\u4e2a\u94fe\u8868\uff0c\u628a\u8fd9\u4e2a\u94fe\u8868\u79f0\u4e4b\u4e3a",(0,i.jsx)(e.strong,{children:"\u7248\u672c\u94fe"}),"\uff0c\u7248\u672c\u94fe\u7684\u5934\u8282\u70b9\u5c31\u662f\u5f53\u524d\u7684\u6700\u65b0\u7684 undo log\uff0c\u94fe\u5c3e\u5c31\u662f\u6700\u65e9\u7684\u65e7 undo log"]}),"\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\uff1a\u56e0\u4e3a DELETE \u5220\u9664\u8bb0\u5f55\uff0c\u90fd\u662f\u79fb\u52a8\u5230\u5783\u573e\u94fe\u8868\u4e2d\uff0c\u4e0d\u662f\u771f\u6b63\u7684\u5220\u9664\uff0c\u6240\u4ee5\u624d\u53ef\u4ee5\u901a\u8fc7\u7248\u672c\u94fe\u8bbf\u95ee\u539f\u59cb\u6570\u636e"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(40576).A+"",width:"750",height:"429"})}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1aundo \u662f\u903b\u8f91\u65e5\u5fd7\uff0c\u8fd9\u91cc\u53ea\u662f\u76f4\u89c2\u7684\u5c55\u793a\u51fa\u6765"}),"\n",(0,i.jsx)(e.p,{children:"\u5de5\u4f5c\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6709\u4e2a\u4e8b\u52a1\u63d2\u5165 persion \u8868\u4e00\u6761\u65b0\u8bb0\u5f55\uff0cname \u4e3a Jerry\uff0cage \u4e3a 24"}),"\n",(0,i.jsx)(e.li,{children:"\u4e8b\u52a1 1 \u4fee\u6539\u8be5\u884c\u6570\u636e\u65f6\uff0c\u6570\u636e\u5e93\u4f1a\u5148\u5bf9\u8be5\u884c\u52a0\u6392\u4ed6\u9501\uff0c\u7136\u540e\u5148\u8bb0\u5f55 undo log\uff0c\u7136\u540e\u4fee\u6539\u8be5\u884c name \u4e3a Tom\uff0c\u5e76\u4e14\u4fee\u6539\u9690\u85cf\u5b57\u6bb5\u7684\u4e8b\u52a1 ID \u4e3a\u5f53\u524d\u4e8b\u52a1 1 \u7684 ID\uff08\u9ed8\u8ba4\u4e3a 1 \u4e4b\u540e\u9012\u589e\uff09\uff0c\u56de\u6eda\u6307\u9488\u6307\u5411\u62f7\u8d1d\u5230 undo log \u7684\u526f\u672c\u8bb0\u5f55\uff0c\u4e8b\u52a1\u63d0\u4ea4\u540e\uff0c\u91ca\u653e\u9501"}),"\n",(0,i.jsx)(e.li,{children:"\u4ee5\u6b64\u7c7b\u63a8"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u8bfb\u89c6\u56fe",children:"\u8bfb\u89c6\u56fe"}),"\n",(0,i.jsx)(e.p,{children:"Read View \u662f\u4e8b\u52a1\u8fdb\u884c\u8bfb\u6570\u636e\u64cd\u4f5c\u65f6\u4ea7\u751f\u7684\u8bfb\u89c6\u56fe\uff0c\u8be5\u4e8b\u52a1\u6267\u884c\u5feb\u7167\u8bfb\u7684\u90a3\u4e00\u523b\u4f1a\u751f\u6210\u6570\u636e\u5e93\u7cfb\u7edf\u5f53\u524d\u7684\u4e00\u4e2a\u5feb\u7167\uff0c\u8bb0\u5f55\u5e76\u7ef4\u62a4\u7cfb\u7edf\u5f53\u524d\u6d3b\u8dc3\u4e8b\u52a1\u7684 ID\uff0c\u7528\u6765\u505a\u53ef\u89c1\u6027\u5224\u65ad\uff0c\u6839\u636e\u89c6\u56fe\u5224\u65ad\u5f53\u524d\u4e8b\u52a1\u80fd\u591f\u770b\u5230\u54ea\u4e2a\u7248\u672c\u7684\u6570\u636e"}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u8fd9\u91cc\u7684\u5feb\u7167\u5e76\u4e0d\u662f\u628a\u6240\u6709\u7684\u6570\u636e\u62f7\u8d1d\u4e00\u4efd\u526f\u672c\uff0c\u800c\u662f\u7531 undo log \u8bb0\u5f55\u7684\u903b\u8f91\u65e5\u5fd7\uff0c\u6839\u636e\u5e93\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u8ba1\u7b97\u51fa\u5386\u53f2\u6570\u636e"}),"\n",(0,i.jsx)(e.p,{children:"\u5de5\u4f5c\u6d41\u7a0b\uff1a\u5c06\u7248\u672c\u94fe\u7684\u5934\u8282\u70b9\u7684\u4e8b\u52a1 ID\uff08\u6700\u65b0\u6570\u636e\u4e8b\u52a1 ID\uff0c\u5927\u6982\u7387\u4e0d\u662f\u5f53\u524d\u7ebf\u7a0b\uff09DB_TRX_ID \u53d6\u51fa\u6765\uff0c\u4e0e\u7cfb\u7edf\u5f53\u524d\u6d3b\u8dc3\u4e8b\u52a1\u7684 ID \u5bf9\u6bd4\u8fdb\u884c\u53ef\u89c1\u6027\u5206\u6790\uff0c\u4e0d\u53ef\u89c1\u5c31\u901a\u8fc7 DB_ROLL_PTR \u56de\u6eda\u6307\u9488\u53bb\u53d6\u51fa undo log \u4e2d\u7684\u4e0b\u4e00\u4e2a DB_TRX_ID \u6bd4\u8f83\uff0c\u76f4\u5230\u627e\u5230\u6700\u8fd1\u7684\u6ee1\u8db3\u53ef\u89c1\u6027\u7684 DB_TRX_ID\uff0c\u8be5\u4e8b\u52a1 ID \u6240\u5728\u7684\u65e7\u8bb0\u5f55\u5c31\u662f\u5f53\u524d\u4e8b\u52a1\u80fd\u770b\u89c1\u7684\u6700\u65b0\u7684\u8bb0\u5f55"}),"\n",(0,i.jsx)(e.p,{children:"Read View \u51e0\u4e2a\u5c5e\u6027\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"m_ids\uff1a\u751f\u6210 Read View \u65f6\u5f53\u524d\u7cfb\u7edf\u4e2d\u6d3b\u8dc3\u7684\u4e8b\u52a1 id \u5217\u8868\uff08\u672a\u63d0\u4ea4\u7684\u4e8b\u52a1\u96c6\u5408\uff0c\u5f53\u524d\u4e8b\u52a1\u4e5f\u5728\u5176\u4e2d\uff09"}),"\n",(0,i.jsx)(e.li,{children:"min_trx_id\uff1a\u751f\u6210 Read View \u65f6\u5f53\u524d\u7cfb\u7edf\u4e2d\u6d3b\u8dc3\u7684\u6700\u5c0f\u7684\u4e8b\u52a1 id\uff0c\u4e5f\u5c31\u662f m_ids \u4e2d\u7684\u6700\u5c0f\u503c\uff08\u5df2\u63d0\u4ea4\u7684\u4e8b\u52a1\u96c6\u5408\uff09"}),"\n",(0,i.jsx)(e.li,{children:"max_trx_id\uff1a\u751f\u6210 Read View \u65f6\u5f53\u524d\u7cfb\u7edf\u5e94\u8be5\u5206\u914d\u7ed9\u4e0b\u4e00\u4e2a\u4e8b\u52a1\u7684 id \u503c\uff0cm_ids \u4e2d\u7684\u6700\u5927\u503c\u52a0 1\uff08\u672a\u5f00\u59cb\u4e8b\u52a1\uff09"}),"\n",(0,i.jsx)(e.li,{children:"creator_trx_id\uff1a\u751f\u6210\u8be5 Read View \u7684\u4e8b\u52a1\u7684\u4e8b\u52a1 id\uff0c\u5c31\u662f\u5224\u65ad\u8be5 id \u7684\u4e8b\u52a1\u80fd\u8bfb\u5230\u4ec0\u4e48\u6570\u636e"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"creator \u521b\u5efa\u4e00\u4e2a Read View\uff0c\u8fdb\u884c\u53ef\u89c1\u6027\u7b97\u6cd5\u5206\u6790\uff1a\uff08\u89e3\u51b3\u4e86\u8bfb\u672a\u63d0\u4ea4\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"db_trx_id == creator_trx_id\uff1a\u8868\u793a\u8fd9\u4e2a\u6570\u636e\u5c31\u662f\u5f53\u524d\u4e8b\u52a1\u81ea\u5df1\u751f\u6210\u7684\uff0c\u81ea\u5df1\u751f\u6210\u7684\u6570\u636e\u81ea\u5df1\u80af\u5b9a\u80fd\u770b\u89c1\uff0c\u6240\u4ee5\u6b64\u6570\u636e\u5bf9 creator \u662f\u53ef\u89c1\u7684"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"db_trx_id <  min_trx_id\uff1a\u8be5\u7248\u672c\u5bf9\u5e94\u7684\u4e8b\u52a1 ID \u5c0f\u4e8e Read view \u4e2d\u7684\u6700\u5c0f\u6d3b\u8dc3\u4e8b\u52a1 ID\uff0c\u5219\u8fd9\u4e2a\u4e8b\u52a1\u5728\u5f53\u524d\u4e8b\u52a1\u4e4b\u524d\u5c31\u5df2\u7ecf\u88ab\u63d0\u4ea4\u4e86\uff0c\u5bf9 creator \u53ef\u89c1\uff08\u56e0\u4e3a\u6bd4\u5df2\u63d0\u4ea4\u7684\u6700\u5927\u4e8b\u52a1 ID \u5c0f\u7684\u5e76\u4e0d\u4e00\u5b9a\u5df2\u7ecf\u63d0\u4ea4\uff0c\u6240\u4ee5\u5e94\u8be5\u5224\u65ad\u662f\u5426\u5728\u6d3b\u8dc3\u4e8b\u52a1\u5217\u8868\uff09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"db_trx_id >= max_trx_id\uff1a\u8be5\u7248\u672c\u5bf9\u5e94\u7684\u4e8b\u52a1 ID \u5927\u4e8e Read view \u4e2d\u5f53\u524d\u7cfb\u7edf\u7684\u6700\u5927\u4e8b\u52a1 ID\uff0c\u5219\u8bf4\u660e\u8be5\u6570\u636e\u662f\u5728\u5f53\u524d Read view \u521b\u5efa\u4e4b\u540e\u624d\u4ea7\u751f\u7684\uff0c\u5bf9 creator \u4e0d\u53ef\u89c1"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"min_trx_id<= db_trx_id < max_trx_id\uff1a\u5224\u65ad db_trx_id \u662f\u5426\u5728\u6d3b\u8dc3\u4e8b\u52a1\u5217\u8868 m_ids \u4e2d"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5728\u5217\u8868\u4e2d\uff0c\u8bf4\u660e\u8be5\u7248\u672c\u5bf9\u5e94\u7684\u4e8b\u52a1\u6b63\u5728\u8fd0\u884c\uff0c\u6570\u636e\u4e0d\u80fd\u663e\u793a\uff08",(0,i.jsx)(e.strong,{children:"\u4e0d\u80fd\u8bfb\u5230\u672a\u63d0\u4ea4\u7684\u6570\u636e"}),"\uff09"]}),"\n",(0,i.jsxs)(e.li,{children:["\u4e0d\u5728\u5217\u8868\u4e2d\uff0c\u8bf4\u660e\u8be5\u7248\u672c\u5bf9\u5e94\u7684\u4e8b\u52a1\u5df2\u7ecf\u88ab\u63d0\u4ea4\uff0c\u6570\u636e\u53ef\u4ee5\u663e\u793a\uff08",(0,i.jsx)(e.strong,{children:"\u53ef\u4ee5\u8bfb\u5230\u5df2\u7ecf\u63d0\u4ea4\u7684\u6570\u636e"}),"\uff09"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u5de5\u4f5c\u6d41\u7a0b-1",children:"\u5de5\u4f5c\u6d41\u7a0b"}),"\n",(0,i.jsx)(e.p,{children:"\u8868 user \u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"id\t\tname\t\tage\n1\t\t\u5f20\u4e09\t\t   18\t\n"})}),"\n",(0,i.jsx)(e.p,{children:"Transaction 20\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"START TRANSACTION;\t-- \u5f00\u542f\u4e8b\u52a1\nUPDATE user SET name = '\u674e\u56db' WHERE id = 1;\nUPDATE user SET name = '\u738b\u4e94' WHERE id = 1;\n"})}),"\n",(0,i.jsx)(e.p,{children:"Transaction 60\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"START TRANSACTION;\t-- \u5f00\u542f\u4e8b\u52a1\n-- \u64cd\u4f5c\u8868\u7684\u5176\u4ed6\u6570\u636e\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(14242).A+"",width:"893",height:"370"})}),"\n",(0,i.jsx)(e.p,{children:"ID \u4e3a 0 \u7684\u4e8b\u52a1\u521b\u5efa Read View\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"m_ids\uff1a20\u300160"}),"\n",(0,i.jsx)(e.li,{children:"min_trx_id\uff1a20"}),"\n",(0,i.jsx)(e.li,{children:"max_trx_id\uff1a61"}),"\n",(0,i.jsx)(e.li,{children:"creator_trx_id\uff1a0"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(44601).A+"",width:"1657",height:"244"})}),"\n",(0,i.jsx)(e.p,{children:"\u53ea\u6709\u7ea2\u6846\u90e8\u5206\u624d\u590d\u5408\u6761\u4ef6\uff0c\u6240\u4ee5\u53ea\u6709\u5f20\u4e09\u5bf9\u5e94\u7684\u7248\u672c\u7684\u6570\u636e\u53ef\u4ee5\u88ab\u770b\u5230"}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u89c6\u9891\uff1a",(0,i.jsx)(e.a,{href:"https://www.bilibili.com/video/BV1t5411u7Fg",children:"https://www.bilibili.com/video/BV1t5411u7Fg"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u4e8c\u7ea7\u7d22\u5f15",children:"\u4e8c\u7ea7\u7d22\u5f15"}),"\n",(0,i.jsx)(e.p,{children:"\u53ea\u6709\u5728\u805a\u7c07\u7d22\u5f15\u4e2d\u624d\u6709 trx_id \u548c roll_pointer \u7684\u9690\u85cf\u5217\uff0c\u5bf9\u4e8e\u4e8c\u7ea7\u7d22\u5f15\u5224\u65ad\u53ef\u89c1\u6027\u7684\u65b9\u5f0f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e8c\u7ea7\u7d22\u5f15\u9875\u9762\u7684 Page Header \u4e2d\u6709\u4e00\u4e2a PAGE_MAX_TRX_ID \u5c5e\u6027\uff0c\u4ee3\u8868\u4fee\u6539\u5f53\u524d\u9875\u9762\u7684\u6700\u5927\u7684\u4e8b\u52a1 ID\uff0cSELECT \u8bed\u53e5\u8bbf\u95ee\u67d0\u4e2a\u4e8c\u7ea7\u7d22\u5f15\u65f6\u4f1a\u5224\u65ad ReadView \u7684 min_trx_id \u662f\u5426\u5927\u4e8e\u8be5\u5c5e\u6027\uff0c\u5927\u4e8e\u8bf4\u660e\u8be5\u9875\u9762\u7684\u6240\u6709\u5c5e\u6027\u5bf9 ReadView \u53ef\u89c1"}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u5c5e\u6027\u5224\u65ad\u4e0d\u53ef\u89c1\uff0c\u5c31\u9700\u8981\u5229\u7528\u4e8c\u7ea7\u7d22\u5f15\u83b7\u53d6\u4e3b\u952e\u503c\u8fdb\u884c",(0,i.jsx)(e.strong,{children:"\u56de\u8868\u64cd\u4f5c"}),"\uff0c\u5f97\u5230\u805a\u7c07\u7d22\u5f15\u540e\u6309\u7167\u805a\u7c07\u7d22\u5f15\u7684\u53ef\u89c1\u6027\u5224\u65ad\u7684\u65b9\u6cd5\u64cd\u4f5c"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"rc-rr",children:"RC RR"}),"\n",(0,i.jsxs)(e.p,{children:["Read View \u7528\u4e8e\u652f\u6301 RC\uff08Read Committed\uff0c\u8bfb\u5df2\u63d0\u4ea4\uff09\u548c RR\uff08Repeatable Read\uff0c\u53ef\u91cd\u590d\u8bfb\uff09\u9694\u79bb\u7ea7\u522b\u7684\u5b9e\u73b0\uff0c\u6240\u4ee5 ",(0,i.jsx)(e.strong,{children:"SELECT \u5728 RC \u548c RR \u9694\u79bb\u7ea7\u522b\u4f7f\u7528 MVCC \u8bfb\u53d6\u8bb0\u5f55"})]}),"\n",(0,i.jsx)(e.p,{children:"RR\u3001RC \u751f\u6210\u65f6\u673a\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"RC \u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u6bcf\u6b21\u8bfb\u53d6\u6570\u636e\u524d\u90fd\u4f1a\u751f\u6210\u6700\u65b0\u7684 Read View\uff08\u5f53\u524d\u8bfb\uff09"}),"\n",(0,i.jsx)(e.li,{children:"RR \u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u5728\u7b2c\u4e00\u6b21\u6570\u636e\u8bfb\u53d6\u65f6\u624d\u4f1a\u521b\u5efa Read View\uff08\u5feb\u7167\u8bfb\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"RC\u3001RR \u7ea7\u522b\u4e0b\u7684 InnoDB \u5feb\u7167\u8bfb\u533a\u522b"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"RC \u7ea7\u522b\u4e0b\uff0c\u4e8b\u52a1\u4e2d\u6bcf\u6b21\u5feb\u7167\u8bfb\u90fd\u4f1a\u65b0\u751f\u6210\u4e00\u4e2a Read View\uff0c\u8fd9\u5c31\u662f\u5728 RC \u7ea7\u522b\u4e0b\u7684\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u770b\u5230\u522b\u7684\u4e8b\u52a1\u63d0\u4ea4\u7684\u66f4\u65b0\u7684\u539f\u56e0"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["RR \u7ea7\u522b\u4e0b\uff0c\u67d0\u4e2a\u4e8b\u52a1\u7684\u5bf9\u67d0\u6761\u8bb0\u5f55\u7684",(0,i.jsx)(e.strong,{children:"\u7b2c\u4e00\u6b21\u5feb\u7167\u8bfb"}),"\u4f1a\u521b\u5efa\u4e00\u4e2a Read View\uff0c \u5c06\u5f53\u524d\u7cfb\u7edf\u6d3b\u8dc3\u7684\u5176\u4ed6\u4e8b\u52a1\u8bb0\u5f55\u8d77\u6765\uff0c\u6b64\u540e\u5728\u8c03\u7528\u5feb\u7167\u8bfb\u7684\u65f6\u5019\uff0c\u4f7f\u7528\u7684\u662f\u540c\u4e00\u4e2a Read View\uff0c\u6240\u4ee5\u4e00\u4e2a\u4e8b\u52a1\u7684\u67e5\u8be2\u7ed3\u679c\u6bcf\u6b21\u90fd\u662f\u76f8\u540c\u7684"]}),"\n",(0,i.jsxs)(e.p,{children:["RR \u7ea7\u522b\u4e0b\uff0c\u901a\u8fc7 ",(0,i.jsx)(e.code,{children:"START TRANSACTION WITH CONSISTENT SNAPSHOT"})," \u5f00\u542f\u4e8b\u52a1\uff0c\u4f1a\u5728\u6267\u884c\u8be5\u8bed\u53e5\u540e\u7acb\u523b\u751f\u6210\u4e00\u4e2a Read View\uff0c\u4e0d\u662f\u5728\u6267\u884c\u7b2c\u4e00\u6761 SELECT \u8bed\u53e5\u65f6\u751f\u6210\uff08\u6240\u4ee5\u8bf4 ",(0,i.jsx)(e.code,{children:"START TRANSACTION"})," \u5e76\u4e0d\u662f\u4e8b\u52a1\u7684\u8d77\u70b9\uff0c\u6267\u884c\u7b2c\u4e00\u6761\u8bed\u53e5\u624d\u7b97\u8d77\u70b9\uff09"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u5e7b\u8bfb\u95ee\u9898\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5feb\u7167\u8bfb\uff1a\u901a\u8fc7 MVCC \u6765\u8fdb\u884c\u63a7\u5236\u7684\uff0c\u5728\u53ef\u91cd\u590d\u8bfb\u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u666e\u901a\u67e5\u8be2\u662f\u5feb\u7167\u8bfb\uff0c\u662f\u4e0d\u4f1a\u770b\u5230\u522b\u7684\u4e8b\u52a1\u63d2\u5165\u7684\u6570\u636e\u7684\uff0c\u4f46\u662f",(0,i.jsx)(e.strong,{children:"\u5e76\u4e0d\u80fd\u5b8c\u5168\u907f\u514d\u5e7b\u8bfb"})]}),"\n",(0,i.jsxs)(e.p,{children:["\u573a\u666f\uff1aRR \u7ea7\u522b\uff0cT1 \u4e8b\u52a1\u5f00\u542f\uff0c\u521b\u5efa Read View\uff0c\u6b64\u65f6 T2 \u53bb INSERT \u65b0\u7684\u4e00\u884c\u7136\u540e\u63d0\u4ea4\uff0c\u7136\u540e T1 \u53bb UPDATE \u8be5\u884c\u4f1a\u53d1\u73b0\u66f4\u65b0\u6210\u529f\uff0c\u5e76\u4e14\u628a\u8fd9\u6761\u65b0\u8bb0\u5f55\u7684 trx_id \u53d8\u4e3a\u5f53\u524d\u7684\u4e8b\u52a1 id\uff0c\u6240\u4ee5\u5bf9\u5f53\u524d\u4e8b\u52a1\u5c31\u662f\u53ef\u89c1\u7684\u3002\u56e0\u4e3a ",(0,i.jsx)(e.strong,{children:"Read View \u5e76\u4e0d\u80fd\u963b\u6b62\u4e8b\u52a1\u53bb\u66f4\u65b0\u6570\u636e\uff0c\u66f4\u65b0\u6570\u636e\u90fd\u662f\u5148\u8bfb\u540e\u5199\u5e76\u4e14\u662f\u5f53\u524d\u8bfb"}),"\uff0c\u8bfb\u53d6\u5230\u7684\u662f\u6700\u65b0\u7248\u672c\u7684\u6570\u636e"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5f53\u524d\u8bfb\uff1a\u901a\u8fc7 next-key \u9501\uff08\u884c\u9501 + \u95f4\u9699\u9501\uff09\u6765\u89e3\u51b3\u95ee\u9898"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u6301\u4e45\u7279\u6027",children:"\u6301\u4e45\u7279\u6027"}),"\n",(0,i.jsx)(e.h4,{id:"\u5b9e\u73b0\u65b9\u5f0f-2",children:"\u5b9e\u73b0\u65b9\u5f0f"}),"\n",(0,i.jsx)(e.p,{children:"\u6301\u4e45\u6027\u662f\u6307\u4e00\u4e2a\u4e8b\u52a1\u4e00\u65e6\u88ab\u63d0\u4ea4\u4e86\uff0c\u90a3\u4e48\u5bf9\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u6539\u53d8\u5c31\u662f\u6c38\u4e45\u6027\u7684\uff0c\u63a5\u4e0b\u6765\u7684\u5176\u4ed6\u64cd\u4f5c\u6216\u6545\u969c\u4e0d\u5e94\u8be5\u5bf9\u5176\u6709\u4efb\u4f55\u5f71\u54cd\u3002"}),"\n",(0,i.jsx)(e.p,{children:"Buffer Pool \u7684\u4f7f\u7528\u63d0\u9ad8\u4e86\u8bfb\u5199\u6570\u636e\u7684\u6548\u7387\uff0c\u4f46\u662f\u5982\u679c MySQL \u5b95\u673a\uff0c\u6b64\u65f6 Buffer Pool \u4e2d\u4fee\u6539\u7684\u6570\u636e\u8fd8\u6ca1\u6709\u5237\u65b0\u5230\u78c1\u76d8\uff0c\u5c31\u4f1a\u5bfc\u81f4\u6570\u636e\u7684\u4e22\u5931\uff0c\u4e8b\u52a1\u7684\u6301\u4e45\u6027\u65e0\u6cd5\u4fdd\u8bc1\uff0c\u6240\u4ee5\u5f15\u5165\u4e86 redo log \u65e5\u5fd7\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["redo log ",(0,i.jsx)(e.strong,{children:"\u8bb0\u5f55\u6570\u636e\u9875\u7684\u7269\u7406\u4fee\u6539"}),"\uff0c\u800c\u4e0d\u662f\u67d0\u4e00\u884c\u6216\u67d0\u51e0\u884c\u7684\u4fee\u6539\uff0c\u7528\u6765\u6062\u590d\u63d0\u4ea4\u540e\u7684\u6570\u636e\u9875\uff0c\u53ea\u80fd",(0,i.jsx)(e.strong,{children:"\u6062\u590d\u5230\u6700\u540e\u4e00\u6b21\u63d0\u4ea4"}),"\u7684\u4f4d\u7f6e"]}),"\n",(0,i.jsxs)(e.li,{children:["redo log \u91c7\u7528\u7684\u662f WAL\uff08Write-ahead logging\uff0c",(0,i.jsx)(e.strong,{children:"\u9884\u5199\u5f0f\u65e5\u5fd7"}),"\uff09\uff0c\u6240\u6709\u4fee\u6539\u8981\u5148\u5199\u5165\u65e5\u5fd7\uff0c\u518d\u66f4\u65b0\u5230\u78c1\u76d8\uff0c\u4fdd\u8bc1\u4e86\u6570\u636e\u4e0d\u4f1a\u56e0 MySQL \u5b95\u673a\u800c\u4e22\u5931\uff0c\u4ece\u800c\u6ee1\u8db3\u4e86\u6301\u4e45\u6027\u8981\u6c42"]}),"\n",(0,i.jsx)(e.li,{children:"\u7b80\u5355\u7684 redo log \u662f\u7eaf\u7cb9\u7684\u7269\u7406\u65e5\u5fd7\uff0c\u590d\u6742\u7684 redo log \u4f1a\u5b58\u5728\u7269\u7406\u65e5\u5fd7\u548c\u903b\u8f91\u65e5\u5fd7"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5de5\u4f5c\u8fc7\u7a0b\uff1aMySQL \u53d1\u751f\u4e86\u5b95\u673a\uff0cInnoDB \u4f1a\u5224\u65ad\u4e00\u4e2a\u6570\u636e\u9875\u5728\u5d29\u6e83\u6062\u590d\u65f6\u4e22\u5931\u4e86\u66f4\u65b0\uff0c\u5c31\u4f1a\u5c06\u5b83\u8bfb\u5230\u5185\u5b58\uff0c\u7136\u540e\u6839\u636e redo log \u5185\u5bb9\u66f4\u65b0\u5185\u5b58\uff0c\u66f4\u65b0\u5b8c\u6210\u540e\uff0c\u5185\u5b58\u9875\u53d8\u6210\u810f\u9875\uff0c\u7136\u540e\u8fdb\u884c\u5237\u810f"}),"\n",(0,i.jsxs)(e.p,{children:["\u7f13\u51b2\u6c60\u7684",(0,i.jsx)(e.strong,{children:"\u5237\u810f\u7b56\u7565"}),"\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"redo log \u6587\u4ef6\u662f\u56fa\u5b9a\u5927\u5c0f\u7684\uff0c\u5982\u679c\u5199\u6ee1\u4e86\u5c31\u8981\u64e6\u9664\u4ee5\u524d\u7684\u8bb0\u5f55\uff0c\u5728\u64e6\u9664\u4e4b\u524d\u9700\u8981\u628a\u5bf9\u5e94\u7684\u66f4\u65b0\u6301\u4e45\u5316\u5230\u78c1\u76d8\u4e2d"}),"\n",(0,i.jsx)(e.li,{children:"Buffer Pool \u5185\u5b58\u4e0d\u8db3\uff0c\u9700\u8981\u6dd8\u6c70\u90e8\u5206\u6570\u636e\u9875\uff08LRU \u94fe\u8868\u5c3e\u90e8\uff09\uff0c\u5982\u679c\u6dd8\u6c70\u7684\u662f\u810f\u9875\uff0c\u5c31\u8981\u5148\u5c06\u810f\u9875\u5199\u5230\u78c1\u76d8\uff08\u8981\u907f\u514d\u5927\u4e8b\u52a1\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u7cfb\u7edf\u7a7a\u95f2\u65f6\uff0c\u540e\u53f0\u7ebf\u7a0b\u4f1a\u81ea\u52a8\u8fdb\u884c\u5237\u810f\uff08Flush \u94fe\u8868\u90e8\u5206\u5df2\u7ecf\u8be6\u89e3\uff09"}),"\n",(0,i.jsx)(e.li,{children:"MySQL \u6b63\u5e38\u5173\u95ed\u65f6\uff0c\u4f1a\u628a\u5185\u5b58\u7684\u810f\u9875\u90fd\u5237\u65b0\u5230\u78c1\u76d8\u4e0a"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u91cd\u505a\u65e5\u5fd7",children:"\u91cd\u505a\u65e5\u5fd7"}),"\n",(0,i.jsx)(e.h5,{id:"\u65e5\u5fd7\u7f13\u51b2",children:"\u65e5\u5fd7\u7f13\u51b2"}),"\n",(0,i.jsxs)(e.p,{children:["\u670d\u52a1\u5668\u542f\u52a8\u65f6\u4f1a\u5411\u64cd\u4f5c\u7cfb\u7edf\u7533\u8bf7\u4e00\u7247\u8fde\u7eed\u5185\u5b58\u7a7a\u95f4\u4f5c\u4e3a redo log buffer\uff08\u91cd\u505a\u65e5\u5fd7\u7f13\u51b2\u533a\uff09\uff0c\u53ef\u4ee5\u901a\u8fc7 ",(0,i.jsx)(e.code,{children:"innodb_log_buffer_size"})," \u7cfb\u7edf\u53d8\u91cf\u6307\u5b9a redo log buffer \u7684\u5927\u5c0f\uff0c\u9ed8\u8ba4\u662f 16MB"]}),"\n",(0,i.jsx)(e.p,{children:"log buffer \u88ab\u5212\u5206\u4e3a\u82e5\u5e72 redo log block\uff08\u5757\uff0c\u7c7b\u4f3c\u6570\u636e\u9875\u7684\u6982\u5ff5\uff09\uff0c\u6bcf\u4e2a\u9ed8\u8ba4\u5927\u5c0f 512 \u5b57\u8282\uff0c\u6bcf\u4e2a block \u7531 12 \u5b57\u8282\u7684 log block head\u3001496 \u5b57\u8282\u7684 log block body\u30014 \u5b57\u8282\u7684 log block trailer \u7ec4\u6210"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5f53\u6570\u636e\u4fee\u6539\u65f6\uff0c\u5148\u4fee\u6539 Change Buffer \u4e2d\u7684\u6570\u636e\uff0c\u7136\u540e\u5728 redo log buffer \u8bb0\u5f55\u8fd9\u6b21\u64cd\u4f5c\uff0c\u5199\u5165 log buffer \u7684\u8fc7\u7a0b\u662f",(0,i.jsx)(e.strong,{children:"\u987a\u5e8f\u5199\u5165"}),"\u7684\uff08\u5148\u5199\u5165\u524d\u9762\u7684 block\uff0c\u5199\u6ee1\u540e\u7ee7\u7eed\u5199\u4e0b\u4e00\u4e2a\uff09"]}),"\n",(0,i.jsx)(e.li,{children:"log buffer \u4e2d\u6709\u4e00\u4e2a\u6307\u9488 buf_free\uff0c\u6765\u6807\u8bc6\u8be5\u4f4d\u7f6e\u4e4b\u524d\u90fd\u662f\u586b\u6ee1\u7684 block\uff0c\u8be5\u4f4d\u7f6e\u4e4b\u540e\u90fd\u662f\u7a7a\u95f2\u533a\u57df"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u89c4\u5b9a\u5bf9\u5e95\u5c42\u9875\u9762\u7684\u4e00\u6b21\u539f\u5b50\u8bbf\u95ee\u79f0\u4e3a\u4e00\u4e2a Mini-Transaction\uff08MTR\uff09\uff0c\u6bd4\u5982\u5728 B+ \u6811\u4e0a\u63d2\u5165\u4e00\u6761\u6570\u636e\u5c31\u7b97\u4e00\u4e2a MTR"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e00\u4e2a\u4e8b\u52a1\u5305\u542b\u82e5\u5e72\u4e2a MTR\uff0c\u4e00\u4e2a MTR \u5bf9\u5e94\u4e00\u7ec4\u82e5\u5e72\u6761 redo log\uff0c\u4e00\u7ec4 redo log \u662f\u4e0d\u53ef\u5206\u5272\u7684\uff0c\u5728\u8fdb\u884c\u6570\u636e\u6062\u590d\u65f6\u4e5f\u628a\u4e00\u7ec4 redo log \u5f53\u4f5c\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u6574\u4f53\u5904\u7406"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u4e0d\u662f\u6bcf\u751f\u6210\u4e00\u6761 redo \u65e5\u5fd7\u5c31\u5c06\u5176\u63d2\u5165\u5230 log buffer \u4e2d\uff0c\u800c\u662f\u4e00\u4e2a MTR \u7ed3\u675f\u540e",(0,i.jsx)(e.strong,{children:"\u5c06\u4e00\u7ec4 redo \u65e5\u5fd7\u5199\u5165"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["InnoDB \u7684 redo log \u662f",(0,i.jsx)(e.strong,{children:"\u56fa\u5b9a\u5927\u5c0f"}),"\u7684\uff0credo \u65e5\u5fd7\u5728\u78c1\u76d8\u4e2d\u4ee5\u6587\u4ef6\u7ec4\u7684\u5f62\u5f0f\u5b58\u50a8\uff0c\u540c\u4e00\u7ec4\u4e2d\u7684\u6bcf\u4e2a\u6587\u4ef6\u5927\u5c0f\u4e00\u6837\u683c\u5f0f\u4e00\u6837"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"innodb_log_group_home_dir"})," \u4ee3\u8868\u78c1\u76d8\u5b58\u50a8 redo log \u7684\u6587\u4ef6\u76ee\u5f55\uff0c\u9ed8\u8ba4\u662f\u5f53\u524d\u6570\u636e\u76ee\u5f55"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"innodb_log_file_size"})," \u4ee3\u8868\u6587\u4ef6\u5927\u5c0f\uff0c\u9ed8\u8ba4 48M\uff0c",(0,i.jsx)(e.code,{children:"innodb_log_files_in_group"})," \u4ee3\u8868\u6587\u4ef6\u4e2a\u6570\uff0c\u9ed8\u8ba4 2 \u6700\u5927 100\uff0c\u6240\u4ee5\u65e5\u5fd7\u7684\u6587\u4ef6\u5927\u5c0f\u4e3a ",(0,i.jsx)(e.code,{children:"innodb_log_file_size * innodb_log_files_in_group"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"redo \u65e5\u5fd7\u6587\u4ef6\u4e5f\u662f\u7531\u82e5\u5e72\u4e2a 512 \u5b57\u8282\u7684 block \u7ec4\u6210\uff0c\u65e5\u5fd7\u6587\u4ef6\u7684\u524d 2048 \u4e2a\u5b57\u8282\uff08\u524d 4 \u4e2a block\uff09\u7528\u6765\u5b58\u50a8\u4e00\u4e9b\u7ba1\u7406\u4fe1\u606f\uff0c\u4ee5\u540e\u7684\u7528\u6765\u5b58\u50a8 log buffer \u4e2d\u7684 block \u955c\u50cf"}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1ablock \u5e76\u4e0d\u4ee3\u8868\u4e00\u7ec4 redo log\uff0c\u4e00\u7ec4\u65e5\u5fd7\u53ef\u80fd\u5360\u7528\u4e0d\u5230\u4e00\u4e2a block \u6216\u8005\u51e0\u4e2a block\uff0c\u4f9d\u8d56\u4e8e MTR \u7684\u5927\u5c0f"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u65e5\u5fd7\u5237\u76d8",children:"\u65e5\u5fd7\u5237\u76d8"}),"\n",(0,i.jsx)(e.p,{children:"redo log \u9700\u8981\u5728\u4e8b\u52a1\u63d0\u4ea4\u65f6\u5c06\u65e5\u5fd7\u5199\u5165\u78c1\u76d8\uff0c\u4f46\u662f\u6bd4 Buffer Pool \u4fee\u6539\u7684\u6570\u636e\u5199\u5165\u78c1\u76d8\u7684\u901f\u5ea6\u5feb\uff0c\u539f\u56e0\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5237\u810f\u662f\u968f\u673a IO\uff0c\u56e0\u4e3a\u6bcf\u6b21\u4fee\u6539\u7684\u6570\u636e\u4f4d\u7f6e\u968f\u673a\uff1bredo log \u548c binlog \u90fd\u662f",(0,i.jsx)(e.strong,{children:"\u987a\u5e8f\u5199"}),"\uff0c\u78c1\u76d8\u7684\u987a\u5e8f IO \u6bd4\u968f\u673a IO \u901f\u5ea6\u8981\u5feb"]}),"\n",(0,i.jsx)(e.li,{children:"\u5237\u810f\u662f\u4ee5\u6570\u636e\u9875\uff08Page\uff09\u4e3a\u5355\u4f4d\u7684\uff0c\u4e00\u4e2a\u9875\u4e0a\u7684\u4e00\u4e2a\u5c0f\u4fee\u6539\u90fd\u8981\u6574\u9875\u5199\u5165\uff1bredo log \u4e2d\u53ea\u5305\u542b\u771f\u6b63\u9700\u8981\u5199\u5165\u7684\u90e8\u5206\uff0c\u597d\u51e0\u9875\u7684\u6570\u636e\u4fee\u6539\u53ef\u80fd\u53ea\u8bb0\u5f55\u5728\u4e00\u4e2a redo log \u9875\u4e2d\uff0c\u51cf\u5c11\u65e0\u6548 IO"}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7ec4\u63d0\u4ea4\u673a\u5236"}),"\uff0c\u53ef\u4ee5\u5927\u5e45\u5ea6\u964d\u4f4e\u78c1\u76d8\u7684 IO \u6d88\u8017"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["InnoDB \u5f15\u64ce\u4f1a\u5728\u9002\u5f53\u7684\u65f6\u5019\uff0c\u628a\u5185\u5b58\u4e2d redo log buffer \u6301\u4e45\u5316\uff08fsync\uff09\u5230\u78c1\u76d8\uff0c\u5177\u4f53\u7684",(0,i.jsx)(e.strong,{children:"\u5237\u76d8\u7b56\u7565"}),"\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5728\u4e8b\u52a1\u63d0\u4ea4\u65f6\u9700\u8981\u8fdb\u884c\u5237\u76d8\uff0c\u901a\u8fc7\u4fee\u6539\u53c2\u6570 ",(0,i.jsx)(e.code,{children:"innodb_flush_log_at_trx_commit"})," \u8bbe\u7f6e\uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["0\uff1a\u8868\u793a\u5f53\u63d0\u4ea4\u4e8b\u52a1\u65f6\uff0c\u5e76\u4e0d\u5c06\u7f13\u51b2\u533a\u7684 redo \u65e5\u5fd7\u5199\u5165\u78c1\u76d8\uff0c\u800c\u662f\u7b49\u5f85",(0,i.jsx)(e.strong,{children:"\u540e\u53f0\u7ebf\u7a0b\u6bcf\u79d2\u5237\u65b0\u4e00\u6b21"})]}),"\n",(0,i.jsxs)(e.li,{children:["1\uff1a\u5728\u4e8b\u52a1\u63d0\u4ea4\u65f6\u5c06\u7f13\u51b2\u533a\u7684 redo \u65e5\u5fd7",(0,i.jsx)(e.strong,{children:"\u540c\u6b65\u5199\u5165"}),"\u5230\u78c1\u76d8\uff0c\u4fdd\u8bc1\u4e00\u5b9a\u4f1a\u5199\u5165\u6210\u529f\uff08\u9ed8\u8ba4\u503c\uff09"]}),"\n",(0,i.jsx)(e.li,{children:"2\uff1a\u5728\u4e8b\u52a1\u63d0\u4ea4\u65f6\u5c06\u7f13\u51b2\u533a\u7684 redo \u65e5\u5fd7\u5f02\u6b65\u5199\u5165\u5230\u78c1\u76d8\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u63d0\u4ea4\u65f6\u80af\u5b9a\u4f1a\u5199\u5165\uff0c\u53ea\u662f\u6709\u8fd9\u4e2a\u52a8\u4f5c\u3002\u65e5\u5fd7\u5df2\u7ecf\u5728\u64cd\u4f5c\u7cfb\u7edf\u7684\u7f13\u5b58\uff0c\u5982\u679c\u64cd\u4f5c\u7cfb\u7edf\u6ca1\u6709\u5b95\u673a\u800c MySQL \u5b95\u673a\uff0c\u4e5f\u662f\u53ef\u4ee5\u6062\u590d\u6570\u636e\u7684"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5199\u5165 redo log buffer \u7684\u65e5\u5fd7\u8d85\u8fc7\u4e86\u603b\u5bb9\u91cf\u7684\u4e00\u534a\uff0c\u5c31\u4f1a\u5c06\u65e5\u5fd7\u5237\u5165\u5230\u78c1\u76d8\u6587\u4ef6\uff0c\u8fd9\u4f1a\u5f71\u54cd\u6267\u884c\u6548\u7387\uff0c\u6240\u4ee5\u5f00\u53d1\u4e2d\u5e94",(0,i.jsx)(e.strong,{children:"\u907f\u514d\u5927\u4e8b\u52a1"})]}),"\n",(0,i.jsx)(e.li,{children:"\u670d\u52a1\u5668\u5173\u95ed\u65f6"}),"\n",(0,i.jsxs)(e.li,{children:["\u5e76\u884c\u7684\u4e8b\u52a1\u63d0\u4ea4\uff08\u7ec4\u63d0\u4ea4\uff09\u65f6\uff0c\u4f1a\u5c06\u5c06\u5176\u4ed6\u4e8b\u52a1\u7684 redo log \u6301\u4e45\u5316\u5230\u78c1\u76d8\u3002\u5047\u8bbe\u4e8b\u52a1 A \u5df2\u7ecf\u5199\u5165 redo log  buffer \u4e2d\uff0c\u8fd9\u65f6\u53e6\u5916\u4e00\u4e2a\u7ebf\u7a0b\u7684\u4e8b\u52a1 B \u63d0\u4ea4\uff0c\u5982\u679c innodb_flush_log_at_trx_commit \u8bbe\u7f6e\u7684\u662f 1\uff0c\u90a3\u4e48\u4e8b\u52a1 B \u8981\u628a redo log buffer \u91cc\u7684\u65e5\u5fd7\u5168\u90e8\u6301\u4e45\u5316\u5230\u78c1\u76d8\uff0c",(0,i.jsx)(e.strong,{children:"\u56e0\u4e3a\u591a\u4e2a\u4e8b\u52a1\u5171\u7528\u4e00\u4e2a redo log buffer"}),"\uff0c\u6240\u4ee5\u4e00\u6b21 fsync \u53ef\u4ee5\u5237\u76d8\u591a\u4e2a\u4e8b\u52a1\u7684 redo log\uff0c\u63d0\u5347\u4e86\u5e76\u53d1\u91cf"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u670d\u52a1\u5668\u542f\u52a8\u540e redo \u78c1\u76d8\u7a7a\u95f4\u4e0d\u53d8\uff0c\u6240\u4ee5 redo \u78c1\u76d8\u4e2d\u7684\u65e5\u5fd7\u6587\u4ef6\u662f\u88ab",(0,i.jsx)(e.strong,{children:"\u5faa\u73af\u4f7f\u7528"}),"\u7684\uff0c\u91c7\u7528\u5faa\u73af\u5199\u6570\u636e\u7684\u65b9\u5f0f\uff0c\u5199\u5b8c\u5c3e\u90e8\u91cd\u65b0\u5199\u5934\u90e8\uff0c\u6240\u4ee5\u8981\u786e\u4fdd\u5934\u90e8 log \u5bf9\u5e94\u7684\u4fee\u6539\u5df2\u7ecf\u6301\u4e45\u5316\u5230\u78c1\u76d8"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u65e5\u5fd7\u5e8f\u53f7",children:"\u65e5\u5fd7\u5e8f\u53f7"}),"\n",(0,i.jsxs)(e.p,{children:["lsn (log sequence number) \u4ee3\u8868\u5df2\u7ecf\u5199\u5165\u7684 redo \u65e5\u5fd7\u91cf\u3001flushed_to_disk_lsn \u6307\u5237\u65b0\u5230\u78c1\u76d8\u4e2d\u7684 redo \u65e5\u5fd7\u91cf\uff0c\u4e24\u8005\u90fd\u662f",(0,i.jsx)(e.strong,{children:"\u5168\u5c40\u53d8\u91cf"}),"\uff0c\u5982\u679c\u4e24\u8005\u7684\u503c\u76f8\u540c\uff0c\u8bf4\u660e log buffer \u4e2d\u6240\u6709\u7684 redo \u65e5\u5fd7\u90fd\u5df2\u7ecf\u6301\u4e45\u5316\u5230\u78c1\u76d8"]}),"\n",(0,i.jsx)(e.p,{children:"\u5de5\u4f5c\u8fc7\u7a0b\uff1a\u5199\u5165 log buffer \u6570\u636e\u65f6\uff0cbuf_free \u4f1a\u8fdb\u884c\u504f\u79fb\uff0c\u504f\u79fb\u91cf\u5c31\u4f1a\u52a0\u5230 lsn \u4e0a"}),"\n",(0,i.jsx)(e.p,{children:"MTR \u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\u4fee\u6539\u8fc7\u7684\u9875\u5bf9\u5e94\u7684\u63a7\u5236\u5757\u4f1a\u52a0\u5230 Buffer Pool \u7684 flush \u94fe\u8868\u4e2d\uff0c\u94fe\u8868\u4e2d\u810f\u9875\u662f\u6309\u7167\u7b2c\u4e00\u6b21\u4fee\u6539\u7684\u65f6\u95f4\u8fdb\u884c\u6392\u5e8f\u7684\uff08\u5934\u63d2\uff09\uff0c\u63a7\u5236\u5757\u4e2d\u6709\u4e24\u4e2a\u6307\u9488\u7528\u6765\u8bb0\u5f55\u810f\u9875\u88ab\u4fee\u6539\u7684\u65f6\u95f4\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["oldest_modification\uff1a\u7b2c\u4e00\u6b21\u4fee\u6539 Buffer Pool \u4e2d\u67d0\u4e2a\u7f13\u51b2\u9875\u65f6\uff0c\u5c06\u4fee\u6539\u8be5\u9875\u7684 MTR ",(0,i.jsx)(e.strong,{children:"\u5f00\u59cb\u65f6"}),"\u5bf9\u5e94\u7684 lsn \u503c\u5199\u5165\u8fd9\u4e2a\u5c5e\u6027"]}),"\n",(0,i.jsx)(e.li,{children:"newest_modification\uff1a\u6bcf\u6b21\u4fee\u6539\u9875\u9762\uff0c\u90fd\u5c06 MTR \u7ed3\u675f\u65f6\u5168\u5c40\u7684 lsn \u503c\u5199\u5165\u8fd9\u4e2a\u5c5e\u6027\uff0c\u6240\u4ee5\u8be5\u503c\u662f\u8be5\u9875\u9762\u6700\u540e\u4e00\u6b21\u4fee\u6539\u540e\u7684 lsn \u503c"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5168\u5c40\u53d8\u91cf checkpoint_lsn \u8868\u793a",(0,i.jsx)(e.strong,{children:"\u5f53\u524d\u7cfb\u7edf\u53ef\u4ee5\u88ab\u8986\u76d6\u7684 redo \u65e5\u5fd7\u603b\u91cf"}),"\uff0c\u5f53 redo \u65e5\u5fd7\u5bf9\u5e94\u7684\u810f\u9875\u5df2\u7ecf\u88ab\u5237\u65b0\u5230\u78c1\u76d8\u540e\uff0c\u8be5\u6587\u4ef6\u7a7a\u95f4\u5c31\u53ef\u4ee5\u88ab\u8986\u76d6\u91cd\u7528\uff0c\u6b64\u65f6\u6267\u884c\u4e00\u6b21 checkpoint \u6765\u66f4\u65b0 checkpoint_lsn \u7684\u503c\u5b58\u5165\u7ba1\u7406\u4fe1\u606f\uff08\u5237\u810f\u548c\u6267\u884c\u4e00\u6b21 checkpoint \u5e76\u4e0d\u662f\u540c\u4e00\u4e2a\u7ebf\u7a0b\uff09\uff0c\u8be5\u503c\u7684\u589e\u91cf\u5c31\u4ee3\u8868\u78c1\u76d8\u6587\u4ef6\u4e2d\u5f53\u524d\u4f4d\u7f6e\u5411\u540e\u53ef\u4ee5\u88ab\u8986\u76d6\u7684\u6587\u4ef6\u7684\u91cf\uff0c\u6240\u4ee5\u8be5\u503c\u662f\u4e00\u76f4\u589e\u5927\u7684"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"checkpoint"}),"\uff1a\u4ece flush \u94fe\u8868\u5c3e\u90e8\u4e2d\u627e\u51fa\u8fd8\u672a\u5237\u810f\u7684\u9875\u9762\uff0c\u8be5\u9875\u9762\u662f\u5f53\u524d\u7cfb\u7edf\u4e2d\u6700\u65e9\u88ab\u4fee\u6539\u7684\u810f\u9875\uff0c\u8be5\u9875\u9762\u4e4b\u524d\u4ea7\u751f\u7684\u810f\u9875\u90fd\u5df2\u7ecf\u5237\u810f\uff0c\u7136\u540e\u5c06\u8be5\u9875 oldest_modification \u503c\u8d4b\u503c\u7ed9 checkpoint_lsn\uff0c\u56e0\u4e3a lsn \u5c0f\u4e8e\u8be5\u503c\u65f6\u4ea7\u751f\u7684 redo \u65e5\u5fd7\u90fd\u53ef\u4ee5\u88ab\u8986\u76d6\u4e86"]}),"\n",(0,i.jsx)(e.p,{children:"\u4f46\u662f\u5728\u7cfb\u7edf\u5fd9\u788c\u65f6\uff0c\u540e\u53f0\u7ebf\u7a0b\u7684\u5237\u810f\u64cd\u4f5c\u4e0d\u80fd\u5c06\u810f\u9875\u5feb\u901f\u5237\u51fa\uff0c\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u53ca\u65f6\u6267\u884c checkpoint \uff0c\u8fd9\u65f6\u9700\u8981\u7528\u6237\u7ebf\u7a0b\u4ece flush \u94fe\u8868\u4e2d\u628a\u6700\u65e9\u4fee\u6539\u7684\u810f\u9875\u5237\u65b0\u5230\u78c1\u76d8\u4e2d\uff0c\u7136\u540e\u6267\u884c checkpoint"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"write pos ------- checkpoint_lsn // \u4e24\u503c\u4e4b\u95f4\u7684\u90e8\u5206\u8868\u793a\u53ef\u4ee5\u5199\u5165\u7684\u65e5\u5fd7\u91cf\uff0c\u5f53 pos \u8ffd\u8d76\u4e0a lsn \u65f6\u5fc5\u987b\u6267\u884c checkpoint\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u5f53\u524d InnoDB \u5b58\u50a8\u5f15\u64ce\u5404\u79cd lsn \u7684\u503c\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW ENGINE INNODB STATUS\\G\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u5d29\u6e83\u6062\u590d",children:"\u5d29\u6e83\u6062\u590d"}),"\n",(0,i.jsxs)(e.p,{children:["\u6062\u590d\u7684\u8d77\u70b9\uff1a\u5728\u4ece redo \u65e5\u5fd7\u6587\u4ef6\u7ec4\u7684\u7ba1\u7406\u4fe1\u606f\u4e2d\u83b7\u53d6\u6700\u8fd1\u53d1\u751f checkpoint \u7684\u4fe1\u606f\uff0c",(0,i.jsx)(e.strong,{children:"\u4ece checkpoint_lsn \u5bf9\u5e94\u7684\u65e5\u5fd7\u6587\u4ef6\u5f00\u59cb\u6062\u590d"})]}),"\n",(0,i.jsx)(e.p,{children:"\u6062\u590d\u7684\u7ec8\u70b9\uff1a\u626b\u63cf\u65e5\u5fd7\u6587\u4ef6\u7684 block\uff0cblock \u7684\u5934\u90e8\u8bb0\u5f55\u7740\u5f53\u524d block \u4f7f\u7528\u4e86\u591a\u5c11\u5b57\u8282\uff0c\u586b\u6ee1\u7684 block \u603b\u662f 512 \u5b57\u8282\uff0c \u5982\u679c\u67d0\u4e2a block \u4e0d\u662f 512 \u5b57\u8282\uff0c\u8bf4\u660e\u8be5 block \u5c31\u662f\u9700\u8981\u6062\u590d\u7684\u6700\u540e\u4e00\u4e2a block"}),"\n",(0,i.jsx)(e.p,{children:"\u6062\u590d\u7684\u8fc7\u7a0b\uff1a\u6309\u7167 redo log \u4f9d\u6b21\u6267\u884c\u6062\u590d\u6570\u636e\uff0c\u4f18\u5316\u65b9\u5f0f"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4f7f\u7528\u54c8\u5e0c\u8868\uff1a\u6839\u636e redo log \u7684 space id \u548c page number \u5c5e\u6027\u8ba1\u7b97\u51fa\u54c8\u5e0c\u503c\uff0c\u5c06\u5bf9\u540c\u4e00\u9875\u9762\u7684\u4fee\u6539\u653e\u5165\u540c\u4e00\u4e2a\u69fd\u91cc\uff0c\u53ef\u4ee5\u4e00\u6b21\u6027\u5b8c\u6210\u5bf9\u67d0\u9875\u7684\u6062\u590d\uff0c",(0,i.jsx)(e.strong,{children:"\u907f\u514d\u4e86\u968f\u673a IO"})]}),"\n",(0,i.jsx)(e.li,{children:"\u8df3\u8fc7\u5df2\u7ecf\u5237\u65b0\u5230\u78c1\u76d8\u4e2d\u7684\u9875\u9762\uff1a\u6570\u636e\u9875\u7684 File Header \u4e2d\u7684 FILE_PAGE_LSN \u5c5e\u6027\uff08\u7c7b\u4f3c newest_modification\uff09\u8868\u793a\u6700\u8fd1\u4e00\u6b21\u4fee\u6539\u9875\u9762\u65f6\u7684 lsn \u503c\uff0c\u6570\u636e\u9875\u88ab\u5237\u65b0\u5230\u78c1\u76d8\u4e2d\uff0c\u90a3\u4e48\u8be5\u9875 lsn \u5c5e\u6027\u80af\u5b9a\u5927\u4e8e checkpoint_lsn"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u4e66\u7c4d\uff1a",(0,i.jsx)(e.a,{href:"https://book.douban.com/subject/35231266/",children:"https://book.douban.com/subject/35231266/"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5de5\u4f5c\u6d41\u7a0b-2",children:"\u5de5\u4f5c\u6d41\u7a0b"}),"\n",(0,i.jsx)(e.h5,{id:"\u65e5\u5fd7\u5bf9\u6bd4",children:"\u65e5\u5fd7\u5bf9\u6bd4"}),"\n",(0,i.jsxs)(e.p,{children:["MySQL \u4e2d\u8fd8\u5b58\u5728 binlog\uff08\u4e8c\u8fdb\u5236\u65e5\u5fd7\uff09\u4e5f\u53ef\u4ee5\u8bb0\u5f55\u5199\u64cd\u4f5c\u5e76\u7528\u4e8e\u6570\u636e\u7684\u6062\u590d\uff0c",(0,i.jsx)(e.strong,{children:"\u4fdd\u8bc1\u6570\u636e\u4e0d\u4e22\u5931"}),"\uff0c\u4e8c\u8005\u7684\u533a\u522b\u662f\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f5c\u7528\u4e0d\u540c\uff1aredo log \u662f\u7528\u4e8e crash recovery \uff08\u6545\u969c\u6062\u590d\uff09\uff0c\u4fdd\u8bc1 MySQL \u5b95\u673a\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u6301\u4e45\u6027\uff1bbinlog \u662f\u7528\u4e8e point-in-time recovery \u7684\uff0c\u4fdd\u8bc1\u670d\u52a1\u5668\u53ef\u4ee5\u57fa\u4e8e\u65f6\u95f4\u70b9\u6062\u590d\u6570\u636e\uff0c\u6b64\u5916 binlog \u8fd8\u7528\u4e8e\u4e3b\u4ece\u590d\u5236"}),"\n",(0,i.jsx)(e.li,{children:"\u5c42\u6b21\u4e0d\u540c\uff1aredo log \u662f InnoDB \u5b58\u50a8\u5f15\u64ce\u5b9e\u73b0\u7684\uff0c\u800c binlog \u662fMySQL\u7684 Server \u5c42\u5b9e\u73b0\u7684\uff0c\u540c\u65f6\u652f\u6301 InnoDB \u548c\u5176\u4ed6\u5b58\u50a8\u5f15\u64ce"}),"\n",(0,i.jsx)(e.li,{children:"\u5185\u5bb9\u4e0d\u540c\uff1aredo log \u662f\u7269\u7406\u65e5\u5fd7\uff0c\u5185\u5bb9\u57fa\u4e8e\u78c1\u76d8\u7684 Page\uff1bbinlog \u7684\u5185\u5bb9\u662f\u4e8c\u8fdb\u5236\u7684\uff0c\u6839\u636e binlog_format \u53c2\u6570\u7684\u4e0d\u540c\uff0c\u53ef\u80fd\u57fa\u4e8eSQL \u8bed\u53e5\u3001\u57fa\u4e8e\u6570\u636e\u672c\u8eab\u6216\u8005\u4e8c\u8005\u7684\u6df7\u5408\uff08\u65e5\u5fd7\u90e8\u5206\u8be6\u89e3\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u5199\u5165\u65f6\u673a\u4e0d\u540c\uff1abinlog \u5728\u4e8b\u52a1\u63d0\u4ea4\u65f6\u4e00\u6b21\u5199\u5165\uff1bredo log \u7684\u5199\u5165\u65f6\u673a\u76f8\u5bf9\u591a\u5143"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"binlog \u4e3a\u4ec0\u4e48\u4e0d\u652f\u6301\u5d29\u6e83\u6062\u590d\uff1f"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"binlog \u8bb0\u5f55\u7684\u662f\u8bed\u53e5\uff0c\u5e76\u4e0d\u8bb0\u5f55\u6570\u636e\u9875\u7ea7\u7684\u6570\u636e\uff08\u54ea\u4e2a\u9875\u6539\u4e86\u54ea\u4e9b\u5730\u65b9\uff09\uff0c\u6240\u4ee5\u6ca1\u6709\u80fd\u529b\u6062\u590d\u6570\u636e\u9875"}),"\n",(0,i.jsx)(e.li,{children:"binlog \u662f\u8ffd\u52a0\u5199\uff0c\u4fdd\u5b58\u5168\u91cf\u7684\u65e5\u5fd7\uff0c\u6ca1\u6709\u6807\u5fd7\u786e\u5b9a\u4ece\u54ea\u4e2a\u70b9\u5f00\u59cb\u7684\u6570\u636e\u662f\u5df2\u7ecf\u5237\u76d8\u4e86\uff0c\u800c redo log \u53ea\u8981\u5728 checkpoint_lsn \u540e\u9762\u7684\u5c31\u662f\u6ca1\u6709\u5237\u76d8\u7684"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u66f4\u65b0\u8bb0\u5f55",children:"\u66f4\u65b0\u8bb0\u5f55"}),"\n",(0,i.jsx)(e.p,{children:"\u66f4\u65b0\u4e00\u6761\u8bb0\u5f55\u7684\u8fc7\u7a0b\uff1a\u5199\u4e4b\u524d\u4e00\u5b9a\u5148\u8bfb"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728 B+ \u6811\u4e2d\u5b9a\u4f4d\u5230\u8be5\u8bb0\u5f55\uff0c\u5982\u679c\u8be5\u8bb0\u5f55\u6240\u5728\u7684\u9875\u9762\u4e0d\u5728 Buffer Pool \u91cc\uff0c\u5148\u5c06\u5176\u52a0\u8f7d\u8fdb\u5185\u5b58"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u9996\u5148\u66f4\u65b0\u8be5\u8bb0\u5f55\u5bf9\u5e94\u7684\u805a\u7c07\u7d22\u5f15\uff0c\u66f4\u65b0\u805a\u7c07\u7d22\u5f15\u8bb0\u5f55\u65f6\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u66f4\u65b0\u8bb0\u5f55\u524d\u5411 undo \u9875\u9762\u5199 undo \u65e5\u5fd7\uff0c\u7531\u4e8e\u8fd9\u662f\u66f4\u6539\u9875\u9762\uff0c\u6240\u4ee5\u9700\u8981\u8bb0\u5f55\u4e00\u4e0b\u76f8\u5e94\u7684 redo \u65e5\u5fd7"}),"\n",(0,i.jsxs)(e.p,{children:["\u6ce8\u610f\uff1a\u4fee\u6539 undo \u9875\u9762\u4e5f\u662f\u5728",(0,i.jsx)(e.strong,{children:"\u4fee\u6539\u9875\u9762"}),"\uff0c\u4e8b\u52a1\u53ea\u8981\u4fee\u6539\u9875\u9762\u5c31\u9700\u8981\u5148\u8bb0\u5f55\u76f8\u5e94\u7684 redo \u65e5\u5fd7"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u7136\u540e",(0,i.jsx)(e.strong,{children:"\u8bb0\u5f55\u5bf9\u5e94\u7684 redo \u65e5\u5fd7"}),"\uff08\u7b49\u5f85 MTR \u63d0\u4ea4\u540e\u5199\u5165 redo log buffer\uff09\uff0c",(0,i.jsx)(e.strong,{children:"\u6700\u540e\u8fdb\u884c\u771f\u6b63\u7684\u66f4\u65b0\u8bb0\u5f55"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u66f4\u65b0\u5176\u4ed6\u7684\u4e8c\u7ea7\u7d22\u5f15\u8bb0\u5f55\uff0c\u4e0d\u4f1a\u518d\u8bb0\u5f55 undo log\uff0c\u53ea\u8bb0\u5f55 redo log \u5230 buffer \u4e2d"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728\u4e00\u6761\u66f4\u65b0\u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\uff08\u4e5f\u5c31\u662f\u5c06\u6240\u6709\u5f85\u66f4\u65b0\u8bb0\u5f55\u90fd\u66f4\u65b0\u5b8c\u4e86\uff09\uff0c\u5c31\u4f1a\u5f00\u59cb\u8bb0\u5f55\u8be5\u8bed\u53e5\u5bf9\u5e94\u7684 binlog \u65e5\u5fd7\uff0c\u6b64\u65f6\u8bb0\u5f55\u7684 binlog \u5e76\u6ca1\u6709\u5237\u65b0\u5230\u786c\u76d8\u4e0a\uff0c\u8fd8\u5728\u5185\u5b58\u4e2d\uff0c\u5728\u4e8b\u52a1\u63d0\u4ea4\u65f6\u624d\u4f1a\u7edf\u4e00\u5c06\u8be5\u4e8b\u52a1\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u7684\u6240\u6709 binlog \u65e5\u5fd7\u5237\u65b0\u5230\u786c\u76d8"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5047\u8bbe\u8868\u4e2d\u6709\u5b57\u6bb5 id \u548c a\uff0c\u5b58\u5728\u4e00\u6761 ",(0,i.jsx)(e.code,{children:"id = 1, a = 2"})," \u7684\u8bb0\u5f55\uff0c\u6b64\u65f6\u6267\u884c\u66f4\u65b0\u8bed\u53e5\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"update table set a=2 where id=1;\n"})}),"\n",(0,i.jsx)(e.p,{children:"InnoDB \u4f1a\u771f\u6b63\u7684\u53bb\u6267\u884c\u628a\u503c\u4fee\u6539\u6210 (1,2) \u8fd9\u4e2a\u64cd\u4f5c\uff0c\u5148\u52a0\u884c\u9501\uff0c\u5728\u53bb\u66f4\u65b0\uff0c\u5e76\u4e0d\u4f1a\u63d0\u524d\u5224\u65ad\u76f8\u540c\u5c31\u4e0d\u4fee\u6539\u4e86"}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://mp.weixin.qq.com/s/wcJ2KisSaMnfP4nH5NYaQA",children:"https://mp.weixin.qq.com/s/wcJ2KisSaMnfP4nH5NYaQA"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u4e24\u6bb5\u63d0\u4ea4",children:"\u4e24\u6bb5\u63d0\u4ea4"}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u5ba2\u6237\u7aef\u6267\u884c COMMIT \u8bed\u53e5\u6216\u8005\u5728\u81ea\u52a8\u63d0\u4ea4\u7684\u60c5\u51b5\u4e0b\uff0cMySQL \u5185\u90e8\u5f00\u542f\u4e00\u4e2a XA \u4e8b\u52a1\uff0c\u5206\u4e24\u9636\u6bb5\u6765\u5b8c\u6210 XA \u4e8b\u52a1\u7684\u63d0\u4ea4\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"update T set c=c+1 where ID=2;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(65575).A+"",width:"1142",height:"1522"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6d41\u7a0b\u8bf4\u660e\uff1a\u6267\u884c\u5f15\u64ce\u5c06\u8fd9\u884c\u65b0\u6570\u636e\u8bfb\u5165\u5230\u5185\u5b58\u4e2d\uff08Buffer Pool\uff09\u540e\uff0c\u5148\u5c06\u6b64\u6b21\u66f4\u65b0\u64cd\u4f5c\u8bb0\u5f55\u5230 redo log buffer \u91cc\uff0c\u7136\u540e\u66f4\u65b0\u8bb0\u5f55\u3002\u6700\u540e\u5c06 redo log \u5237\u76d8\u540e\u4e8b\u52a1\u5904\u4e8e prepare \u72b6\u6001\uff0c\u6267\u884c\u5668\u4f1a\u751f\u6210\u8fd9\u4e2a\u64cd\u4f5c\u7684 binlog\uff0c\u5e76",(0,i.jsx)(e.strong,{children:"\u628a binlog \u5199\u5165\u78c1\u76d8"}),"\uff0c\u5b8c\u6210\u63d0\u4ea4"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e24\u9636\u6bb5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Prepare \u9636\u6bb5\uff1a\u5b58\u50a8\u5f15\u64ce\u5c06\u8be5\u4e8b\u52a1\u7684 ",(0,i.jsx)(e.strong,{children:"redo \u65e5\u5fd7\u5237\u76d8"}),"\uff0c\u5e76\u4e14\u5c06\u672c\u4e8b\u52a1\u7684\u72b6\u6001\u8bbe\u7f6e\u4e3a PREPARE\uff0c\u4ee3\u8868\u6267\u884c\u5b8c\u6210\u968f\u65f6\u53ef\u4ee5\u63d0\u4ea4\u4e8b\u52a1"]}),"\n",(0,i.jsx)(e.li,{children:"Commit \u9636\u6bb5\uff1a\u5148\u5c06\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684 binlog \u5237\u65b0\u5230\u786c\u76d8\uff0c\u518d\u6267\u884c\u5b58\u50a8\u5f15\u64ce\u7684\u63d0\u4ea4\u5de5\u4f5c\uff0c\u5f15\u64ce\u628a redo log \u6539\u6210\u63d0\u4ea4\u72b6\u6001"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5b58\u50a8\u5f15\u64ce\u5c42\u7684 redo log \u548c server \u5c42\u7684 binlog \u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u4e8b\u52a1\uff0c \u90fd\u53ef\u4ee5\u7528\u4e8e\u8868\u793a\u4e8b\u52a1\u7684\u63d0\u4ea4\u72b6\u6001\uff0c\u800c",(0,i.jsx)(e.strong,{children:"\u4e24\u9636\u6bb5\u63d0\u4ea4\u5c31\u662f\u8ba9\u8fd9\u4e24\u4e2a\u72b6\u6001\u4fdd\u6301\u903b\u8f91\u4e0a\u7684\u4e00\u81f4"}),"\uff0c\u4e5f\u6709\u5229\u4e8e\u4e3b\u4ece\u590d\u5236\uff0c\u66f4\u597d\u7684\u4fdd\u6301\u4e3b\u4ece\u6570\u636e\u7684\u4e00\u81f4\u6027"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u6570\u636e\u6062\u590d",children:"\u6570\u636e\u6062\u590d"}),"\n",(0,i.jsx)(e.p,{children:"\u7cfb\u7edf\u5d29\u6e83\u524d\u6ca1\u6709\u63d0\u4ea4\u7684\u4e8b\u52a1\u7684 redo log \u53ef\u80fd\u5df2\u7ecf\u5237\u76d8\uff08\u5b9a\u65f6\u7ebf\u7a0b\u6216\u8005 checkpoint\uff09\uff0c\u600e\u4e48\u5904\u7406\u5d29\u6e83\u6062\u590d\uff1f"}),"\n",(0,i.jsxs)(e.p,{children:["\u5de5\u4f5c\u6d41\u7a0b\uff1a\u83b7\u53d6 undo \u94fe\u8868\u9996\u8282\u70b9\u9875\u9762\u7684 undo segement header \u4e2d\u7684 TRX_UNDO_STATE \u5c5e\u6027\uff0c\u8868\u793a\u5f53\u524d\u94fe\u8868\u7684\u4e8b\u52a1\u5c5e\u6027\uff0c",(0,i.jsx)(e.strong,{children:"\u4e8b\u52a1\u72b6\u6001\u662f\u6d3b\u8dc3\uff08\u672a\u63d0\u4ea4\uff09\u7684\u5c31\u5168\u90e8\u56de\u6eda"}),"\uff0c\u5982\u679c\u662f PREPARE \u72b6\u6001\uff0c\u5c31\u9700\u8981\u6839\u636e binlog \u7684\u72b6\u6001\u8fdb\u884c\u5224\u65ad\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u5728\u65f6\u523b A \u53d1\u751f\u4e86\u5d29\u6e83\uff08crash\uff09\uff0c\u7531\u4e8e\u6b64\u65f6 binlog \u8fd8\u6ca1\u5b8c\u6210\uff0c\u6240\u4ee5\u9700\u8981\u8fdb\u884c\u56de\u6eda"}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u5728\u65f6\u523b B \u53d1\u751f\u4e86\u5d29\u6e83\uff0credo log \u548c binlog \u6709\u4e00\u4e2a\u5171",(0,i.jsx)(e.strong,{children:"\u540c\u7684\u6570\u636e\u5b57\u6bb5\u53eb XID"}),"\uff0c\u5d29\u6e83\u6062\u590d\u7684\u65f6\u5019\uff0c\u4f1a\u6309\u987a\u5e8f\u626b\u63cf redo log\uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c redo log \u91cc\u9762\u7684\u4e8b\u52a1\u662f\u5b8c\u6574\u7684\uff0c\u4e5f\u5c31\u662f\u5df2\u7ecf\u6709\u4e86 commit \u6807\u8bc6\uff0c\u8bf4\u660e binlog \u4e5f\u5df2\u7ecf\u8bb0\u5f55\u5b8c\u6574\uff0c\u76f4\u63a5\u4ece redo log \u6062\u590d\u6570\u636e"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c redo log \u91cc\u9762\u7684\u4e8b\u52a1\u53ea\u6709 prepare\uff0c\u5c31\u6839\u636e XID \u53bb binlog \u4e2d\u5224\u65ad\u5bf9\u5e94\u7684\u4e8b\u52a1\u662f\u5426\u5b58\u5728\u5e76\u5b8c\u6574\uff0c\u5982\u679c\u5b8c\u6574\u53ef\u4ee5\u6062\u590d\u6570\u636e"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5224\u65ad\u4e00\u4e2a\u4e8b\u52a1\u7684 binlog \u662f\u5426\u5b8c\u6574\u7684\u65b9\u6cd5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"statement \u683c\u5f0f\u7684 binlog\uff0c\u6700\u540e\u4f1a\u6709 COMMIT"}),"\n",(0,i.jsx)(e.li,{children:"row \u683c\u5f0f\u7684 binlog\uff0c\u6700\u540e\u4f1a\u6709\u4e00\u4e2a XID event"}),"\n",(0,i.jsx)(e.li,{children:"MySQL 5.6.2 \u7248\u672c\u4ee5\u540e\uff0c\u5f15\u5165\u4e86 binlog-checksum \u53c2\u6570\u7528\u6765\u9a8c\u8bc1 binlog \u5185\u5bb9\u7684\u6b63\u786e\u6027\uff08\u53ef\u80fd\u65e5\u5fd7\u4e2d\u95f4\u51fa\u9519\uff09"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://time.geekbang.org/column/article/73161",children:"https://time.geekbang.org/column/article/73161"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5237\u810f\u4f18\u5316",children:"\u5237\u810f\u4f18\u5316"}),"\n",(0,i.jsxs)(e.p,{children:["\u7cfb\u7edf\u5728\u8fdb\u884c\u5237\u810f\u65f6\u4f1a\u5360\u7528\u4e00\u90e8\u5206\u7cfb\u7edf\u8d44\u6e90\uff0c\u4f1a\u5f71\u54cd\u7cfb\u7edf\u7684\u6027\u80fd\uff0c",(0,i.jsx)(e.strong,{children:"\u4ea7\u751f\u7cfb\u7edf\u6296\u52a8"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e00\u4e2a\u67e5\u8be2\u8981\u6dd8\u6c70\u7684\u810f\u9875\u4e2a\u6570\u592a\u591a\uff0c\u4f1a\u5bfc\u81f4\u67e5\u8be2\u7684\u54cd\u5e94\u65f6\u95f4\u660e\u663e\u53d8\u957f"}),"\n",(0,i.jsx)(e.li,{children:"\u65e5\u5fd7\u5199\u6ee1\uff0c\u66f4\u65b0\u5168\u90e8\u5835\u4f4f\uff0c\u5199\u6027\u80fd\u8dcc\u4e3a 0\uff0c\u8fd9\u79cd\u60c5\u51b5\u5bf9\u654f\u611f\u4e1a\u52a1\u6765\u8bf4\uff0c\u662f\u4e0d\u80fd\u63a5\u53d7\u7684"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"InnoDB \u5237\u810f\u9875\u7684\u63a7\u5236\u7b56\u7565\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"innodb_io_capacity"})," \u53c2\u6570\u4ee3\u8868\u78c1\u76d8\u7684\u8bfb\u5199\u80fd\u529b\uff0c\u5efa\u8bae\u8bbe\u7f6e\u6210\u78c1\u76d8\u7684 IOPS\uff08\u6bcf\u79d2\u7684 IO \u6b21\u6570\uff09"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5237\u810f\u901f\u5ea6\u53c2\u8003\u4e24\u4e2a\u56e0\u7d20\uff1a\u810f\u9875\u6bd4\u4f8b\u548c redo log \u5199\u76d8\u901f\u5ea6\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u53c2\u6570 ",(0,i.jsx)(e.code,{children:"innodb_max_dirty_pages_pct"})," \u662f\u810f\u9875\u6bd4\u4f8b\u4e0a\u9650\uff0c\u9ed8\u8ba4\u503c\u662f 75%\uff0cInnoDB \u4f1a\u6839\u636e\u5f53\u524d\u7684\u810f\u9875\u6bd4\u4f8b\uff0c\u7b97\u51fa\u4e00\u4e2a\u8303\u56f4\u5728 0 \u5230 100 \u4e4b\u95f4\u7684\u6570\u5b57"]}),"\n",(0,i.jsx)(e.li,{children:"InnoDB \u6bcf\u6b21\u5199\u5165\u7684\u65e5\u5fd7\u90fd\u6709\u4e00\u4e2a\u5e8f\u53f7\uff0c\u5f53\u524d\u5199\u5165\u7684\u5e8f\u53f7\u8ddf checkpoint \u5bf9\u5e94\u7684\u5e8f\u53f7\u4e4b\u95f4\u7684\u5dee\u503c\uff0cInnoDB \u6839\u636e\u5dee\u503c\u7b97\u51fa\u4e00\u4e2a\u8303\u56f4\u5728 0 \u5230 100 \u4e4b\u95f4\u7684\u6570\u5b57"}),"\n",(0,i.jsx)(e.li,{children:"\u4e24\u8005\u8f83\u5927\u7684\u503c\u8bb0\u4e3a R\uff0c\u6267\u884c\u5f15\u64ce\u6309\u7167 innodb_io_capacity \u5b9a\u4e49\u7684\u80fd\u529b\u4e58\u4ee5 R% \u6765\u63a7\u5236\u5237\u810f\u9875\u7684\u901f\u5ea6"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"innodb_flush_neighbors"})," \u53c2\u6570\u7f6e\u4e3a 1 \u4ee3\u8868\u63a7\u5236\u5237\u810f\u65f6\u68c0\u67e5\u76f8\u90bb\u7684\u6570\u636e\u9875\uff0c\u5982\u679c\u4e5f\u662f\u810f\u9875\u5c31\u4e00\u8d77\u5237\u810f\uff0c\u5e76\u68c0\u67e5\u90bb\u5c45\u7684\u90bb\u5c45\uff0c\u8fd9\u4e2a\u884c\u4e3a\u4f1a\u4e00\u76f4\u8513\u5ef6\u76f4\u5230\u4e0d\u662f\u810f\u9875\uff0c\u5728 MySQL 8.0 \u4e2d\u8be5\u503c\u7684\u9ed8\u8ba4\u503c\u662f 0\uff0c\u4e0d\u5efa\u8bae\u5f00\u542f\u6b64\u529f\u80fd"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u4e00\u81f4\u7279\u6027",children:"\u4e00\u81f4\u7279\u6027"}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u81f4\u6027\u662f\u6307\u4e8b\u52a1\u6267\u884c\u524d\u540e\uff0c\u6570\u636e\u5e93\u7684\u5b8c\u6574\u6027\u7ea6\u675f\u6ca1\u6709\u88ab\u7834\u574f\uff0c\u4e8b\u52a1\u6267\u884c\u7684\u524d\u540e\u90fd\u662f\u5408\u6cd5\u7684\u6570\u636e\u72b6\u6001\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5e93\u7684\u5b8c\u6574\u6027\u7ea6\u675f\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a\u5b9e\u4f53\u5b8c\u6574\u6027\uff08\u5982\u884c\u7684\u4e3b\u952e\u5b58\u5728\u4e14\u552f\u4e00\uff09\u3001\u5217\u5b8c\u6574\u6027\uff08\u5982\u5b57\u6bb5\u7684\u7c7b\u578b\u3001\u5927\u5c0f\u3001\u957f\u5ea6\u8981\u7b26\u5408\u8981\u6c42\uff09\u3001\u5916\u952e\u7ea6\u675f\u3001\u7528\u6237\u81ea\u5b9a\u4e49\u5b8c\u6574\u6027\uff08\u5982\u8f6c\u8d26\u524d\u540e\uff0c\u4e24\u4e2a\u8d26\u6237\u4f59\u989d\u7684\u548c\u5e94\u8be5\u4e0d\u53d8\uff09"}),"\n",(0,i.jsx)(e.p,{children:"\u5b9e\u73b0\u4e00\u81f4\u6027\u7684\u63aa\u65bd\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4fdd\u8bc1\u539f\u5b50\u6027\u3001\u6301\u4e45\u6027\u548c\u9694\u79bb\u6027\uff0c\u5982\u679c\u8fd9\u4e9b\u7279\u6027\u65e0\u6cd5\u4fdd\u8bc1\uff0c\u4e8b\u52a1\u7684\u4e00\u81f4\u6027\u4e5f\u65e0\u6cd5\u4fdd\u8bc1"}),"\n",(0,i.jsx)(e.li,{children:"\u6570\u636e\u5e93\u672c\u8eab\u63d0\u4f9b\u4fdd\u969c\uff0c\u4f8b\u5982\u4e0d\u5141\u8bb8\u5411\u6574\u5f62\u5217\u63d2\u5165\u5b57\u7b26\u4e32\u503c\u3001\u5b57\u7b26\u4e32\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7\u5217\u7684\u9650\u5236\u7b49"}),"\n",(0,i.jsx)(e.li,{children:"\u5e94\u7528\u5c42\u9762\u8fdb\u884c\u4fdd\u969c\uff0c\u4f8b\u5982\u5982\u679c\u8f6c\u8d26\u64cd\u4f5c\u53ea\u6263\u9664\u8f6c\u8d26\u8005\u7684\u4f59\u989d\uff0c\u800c\u6ca1\u6709\u589e\u52a0\u63a5\u6536\u8005\u7684\u4f59\u989d\uff0c\u65e0\u8bba\u6570\u636e\u5e93\u5b9e\u73b0\u7684\u591a\u4e48\u5b8c\u7f8e\uff0c\u4e5f\u65e0\u6cd5\u4fdd\u8bc1\u72b6\u6001\u7684\u4e00\u81f4"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u9501\u673a\u5236",children:"\u9501\u673a\u5236"}),"\n",(0,i.jsx)(e.h3,{id:"\u57fa\u672c\u4ecb\u7ecd-8",children:"\u57fa\u672c\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.p,{children:"\u9501\u673a\u5236\uff1a\u6570\u636e\u5e93\u4e3a\u4e86\u4fdd\u8bc1\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0c\u5728\u5171\u4eab\u7684\u8d44\u6e90\u88ab\u5e76\u53d1\u8bbf\u95ee\u65f6\u53d8\u5f97\u5b89\u5168\u6709\u5e8f\u6240\u8bbe\u8ba1\u7684\u4e00\u79cd\u89c4\u5219"}),"\n",(0,i.jsxs)(e.p,{children:["\u5229\u7528 MVCC \u6027\u8d28\u8fdb\u884c\u8bfb\u53d6\u7684\u64cd\u4f5c\u53eb",(0,i.jsx)(e.strong,{children:"\u4e00\u81f4\u6027\u8bfb"}),"\uff0c\u8bfb\u53d6\u6570\u636e\u524d\u52a0\u9501\u7684\u64cd\u4f5c\u53eb",(0,i.jsx)(e.strong,{children:"\u9501\u5b9a\u8bfb"})]}),"\n",(0,i.jsx)(e.p,{children:"\u9501\u7684\u5206\u7c7b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u6309\u64cd\u4f5c\u5206\u7c7b\uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5171\u4eab\u9501\uff1a\u4e5f\u53eb\u8bfb\u9501\u3002\u5bf9\u540c\u4e00\u4efd\u6570\u636e\uff0c\u591a\u4e2a\u4e8b\u52a1\u8bfb\u64cd\u4f5c\u53ef\u4ee5\u540c\u65f6\u52a0\u9501\u800c\u4e0d\u4e92\u76f8\u5f71\u54cd \uff0c\u4f46\u4e0d\u80fd\u4fee\u6539\u6570\u636e"}),"\n",(0,i.jsx)(e.li,{children:"\u6392\u4ed6\u9501\uff1a\u4e5f\u53eb\u5199\u9501\u3002\u5f53\u524d\u7684\u64cd\u4f5c\u6ca1\u6709\u5b8c\u6210\u524d\uff0c\u4f1a\u963b\u65ad\u5176\u4ed6\u64cd\u4f5c\u7684\u8bfb\u53d6\u548c\u5199\u5165"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u6309\u7c92\u5ea6\u5206\u7c7b\uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8868\u7ea7\u9501\uff1a\u4f1a\u9501\u5b9a\u6574\u4e2a\u8868\uff0c\u5f00\u9500\u5c0f\uff0c\u52a0\u9501\u5feb\uff1b\u4e0d\u4f1a\u51fa\u73b0\u6b7b\u9501\uff1b\u9501\u5b9a\u529b\u5ea6\u5927\uff0c\u53d1\u751f\u9501\u51b2\u7a81\u6982\u7387\u9ad8\uff0c\u5e76\u53d1\u5ea6\u6700\u4f4e\uff0c\u504f\u5411 MyISAM"}),"\n",(0,i.jsx)(e.li,{children:"\u884c\u7ea7\u9501\uff1a\u4f1a\u9501\u5b9a\u5f53\u524d\u64cd\u4f5c\u884c\uff0c\u5f00\u9500\u5927\uff0c\u52a0\u9501\u6162\uff1b\u4f1a\u51fa\u73b0\u6b7b\u9501\uff1b\u9501\u5b9a\u529b\u5ea6\u5c0f\uff0c\u53d1\u751f\u9501\u51b2\u7a81\u6982\u7387\u4f4e\uff0c\u5e76\u53d1\u5ea6\u9ad8\uff0c\u504f\u5411 InnoDB"}),"\n",(0,i.jsx)(e.li,{children:"\u9875\u7ea7\u9501\uff1a\u9501\u7684\u529b\u5ea6\u3001\u53d1\u751f\u51b2\u7a81\u7684\u6982\u7387\u548c\u52a0\u9501\u5f00\u9500\u4ecb\u4e8e\u8868\u9501\u548c\u884c\u9501\u4e4b\u95f4\uff0c\u4f1a\u51fa\u73b0\u6b7b\u9501\uff0c\u5e76\u53d1\u6027\u80fd\u4e00\u822c"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u6309\u4f7f\u7528\u65b9\u5f0f\u5206\u7c7b\uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u60b2\u89c2\u9501\uff1a\u6bcf\u6b21\u67e5\u8be2\u6570\u636e\u65f6\u90fd\u8ba4\u4e3a\u522b\u4eba\u4f1a\u4fee\u6539\uff0c\u5f88\u60b2\u89c2\uff0c\u6240\u4ee5\u67e5\u8be2\u65f6\u52a0\u9501"}),"\n",(0,i.jsx)(e.li,{children:"\u4e50\u89c2\u9501\uff1a\u6bcf\u6b21\u67e5\u8be2\u6570\u636e\u65f6\u90fd\u8ba4\u4e3a\u522b\u4eba\u4e0d\u4f1a\u4fee\u6539\uff0c\u5f88\u4e50\u89c2\uff0c\u4f46\u662f\u66f4\u65b0\u65f6\u4f1a\u5224\u65ad\u4e00\u4e0b\u5728\u6b64\u671f\u95f4\u522b\u4eba\u6709\u6ca1\u6709\u53bb\u66f4\u65b0\u8fd9\u4e2a\u6570\u636e"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e0d\u540c\u5b58\u50a8\u5f15\u64ce\u652f\u6301\u7684\u9501"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u5b58\u50a8\u5f15\u64ce"}),(0,i.jsx)(e.th,{children:"\u8868\u7ea7\u9501"}),(0,i.jsx)(e.th,{children:"\u884c\u7ea7\u9501"}),(0,i.jsx)(e.th,{children:"\u9875\u7ea7\u9501"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"MyISAM"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"InnoDB"}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u652f\u6301"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u652f\u6301"})}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"MEMORY"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"BDB"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u4e0d\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u652f\u6301"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4ece\u9501\u7684\u89d2\u5ea6\u6765\u8bf4\uff1a\u8868\u7ea7\u9501\u66f4\u9002\u5408\u4e8e\u4ee5\u67e5\u8be2\u4e3a\u4e3b\uff0c\u53ea\u6709\u5c11\u91cf\u6309\u7d22\u5f15\u6761\u4ef6\u66f4\u65b0\u6570\u636e\u7684\u5e94\u7528\uff0c\u5982 Web \u5e94\u7528\uff1b\u800c\u884c\u7ea7\u9501\u5219\u66f4\u9002\u5408\u4e8e\u6709\u5927\u91cf\u6309\u7d22\u5f15\u6761\u4ef6\u5e76\u53d1\u66f4\u65b0\u5c11\u91cf\u4e0d\u540c\u6570\u636e\uff0c\u540c\u65f6\u53c8\u6709\u5e76\u67e5\u8be2\u7684\u5e94\u7528\uff0c\u5982\u4e00\u4e9b\u5728\u7ebf\u4e8b\u52a1\u5904\u7406\u7cfb\u7edf"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5185\u5b58\u7ed3\u6784",children:"\u5185\u5b58\u7ed3\u6784"}),"\n",(0,i.jsxs)(e.p,{children:["\u5bf9\u4e00\u6761\u8bb0\u5f55\u52a0\u9501\u7684\u672c\u8d28\u5c31\u662f",(0,i.jsx)(e.strong,{children:"\u5728\u5185\u5b58\u4e2d"}),"\u521b\u5efa\u4e00\u4e2a\u9501\u7ed3\u6784\u4e0e\u4e4b\u5173\u8054\uff0c\u7ed3\u6784\u5305\u62ec"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e8b\u52a1\u4fe1\u606f\uff1a\u9501\u5bf9\u5e94\u7684\u4e8b\u52a1\u4fe1\u606f\uff0c\u4e00\u4e2a\u9501\u5c5e\u4e8e\u4e00\u4e2a\u4e8b\u52a1"}),"\n",(0,i.jsx)(e.li,{children:"\u7d22\u5f15\u4fe1\u606f\uff1a\u5bf9\u4e8e\u884c\u7ea7\u9501\uff0c\u9700\u8981\u8bb0\u5f55\u52a0\u9501\u7684\u8bb0\u5f55\u5c5e\u4e8e\u54ea\u4e2a\u7d22\u5f15"}),"\n",(0,i.jsx)(e.li,{children:"\u8868\u9501\u548c\u884c\u9501\u4fe1\u606f\uff1a\u8868\u9501\u8bb0\u5f55\u7740\u9501\u5b9a\u7684\u8868\uff0c\u884c\u9501\u8bb0\u5f55\u4e86 Space ID \u6240\u5728\u8868\u7a7a\u95f4\u3001Page Number \u6240\u5728\u7684\u9875\u53f7\u3001n_bits \u4f7f\u7528\u4e86\u591a\u5c11\u6bd4\u7279"}),"\n",(0,i.jsxs)(e.li,{children:["type_mode\uff1a\u4e00\u4e2a 32 \u6bd4\u7279\u7684\u6570\uff0c\u88ab\u5206\u6210 lock_mode\u3001lock_type\u3001rec_lock_type \u4e09\u4e2a\u90e8\u5206\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"lock_mode\uff1a\u9501\u6a21\u5f0f\uff0c\u8bb0\u5f55\u662f\u5171\u4eab\u9501\u3001\u6392\u4ed6\u9501\u3001\u610f\u5411\u9501\u4e4b\u7c7b"}),"\n",(0,i.jsx)(e.li,{children:"lock_type\uff1a\u4ee3\u8868\u8868\u7ea7\u9501\u8fd8\u662f\u884c\u7ea7\u9501"}),"\n",(0,i.jsx)(e.li,{children:"rec_lock_type\uff1a\u4ee3\u8868\u884c\u9501\u7684\u5177\u4f53\u7c7b\u578b\u548c is_waiting \u5c5e\u6027\uff0cis_waiting = true \u65f6\u8868\u793a\u5f53\u524d\u4e8b\u52a1\u5c1a\u672a\u83b7\u53d6\u5230\u9501\uff0c\u5904\u4e8e\u7b49\u5f85\u72b6\u6001\u3002\u4e8b\u52a1\u83b7\u53d6\u9501\u540e\u7684\u9501\u7ed3\u6784\u662f is_waiting \u4e3a false\uff0c\u91ca\u653e\u9501\u65f6\u4f1a\u68c0\u67e5\u662f\u5426\u4e0e\u5f53\u524d\u8bb0\u5f55\u5173\u8054\u7684\u9501\u7ed3\u6784\uff0c\u5982\u679c\u6709\u5c31\u5524\u9192\u5bf9\u5e94\u4e8b\u52a1\u7684\u7ebf\u7a0b"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u4e2a\u4e8b\u52a1\u53ef\u80fd\u64cd\u4f5c\u591a\u6761\u8bb0\u5f55\uff0c\u4e3a\u4e86\u8282\u7701\u5185\u5b58\uff0c\u6ee1\u8db3\u4e0b\u9762\u6761\u4ef6\u7684\u9501\u4f7f\u7528\u540c\u4e00\u4e2a\u9501\u7ed3\u6784\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5728\u540c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u7684\u52a0\u9501\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.li,{children:"\u88ab\u52a0\u9501\u7684\u8bb0\u5f55\u5728\u540c\u4e00\u4e2a\u9875\u9762\u4e2d"}),"\n",(0,i.jsx)(e.li,{children:"\u52a0\u9501\u7684\u7c7b\u578b\u662f\u4e00\u6837\u7684"}),"\n",(0,i.jsx)(e.li,{children:"\u52a0\u9501\u7684\u72b6\u6001\u662f\u4e00\u6837\u7684"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"server",children:"Server"}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u91cc\u9762\u8868\u7ea7\u522b\u7684\u9501\u6709\u4e24\u79cd\uff1a\u4e00\u79cd\u662f\u8868\u9501\uff0c\u4e00\u79cd\u662f\u5143\u6570\u636e\u9501\uff08meta data lock\uff0cMDL)"}),"\n",(0,i.jsxs)(e.p,{children:["MDL \u53eb\u5143\u6570\u636e\u9501\uff0c\u4e3b\u8981\u7528\u6765\u4fdd\u62a4 MySQL \u5185\u90e8\u5bf9\u8c61\u7684\u5143\u6570\u636e\uff0c\u4fdd\u8bc1\u6570\u636e\u8bfb\u5199\u7684\u6b63\u786e\u6027\uff0c",(0,i.jsx)(e.strong,{children:"\u5f53\u5bf9\u4e00\u4e2a\u8868\u505a\u589e\u5220\u6539\u67e5\u7684\u65f6\u5019\uff0c\u52a0 MDL \u8bfb\u9501\uff1b\u5f53\u8981\u5bf9\u8868\u505a\u7ed3\u6784\u53d8\u66f4\u64cd\u4f5c DDL \u7684\u65f6\u5019\uff0c\u52a0 MDL \u5199\u9501"}),"\uff0c\u4e24\u79cd\u9501\u4e0d\u76f8\u4e92\u517c\u5bb9\uff0c\u6240\u4ee5\u53ef\u4ee5\u4fdd\u8bc1 DDL\u3001DML\u3001DQL \u64cd\u4f5c\u7684\u5b89\u5168"]}),"\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\uff1aDDL \u64cd\u4f5c\u6267\u884c\u524d\u4f1a\u9690\u5f0f\u63d0\u4ea4\u5f53\u524d\u4f1a\u8bdd\u7684\u4e8b\u52a1\uff0c\u56e0\u4e3a DDL \u4e00\u822c\u4f1a\u5728\u82e5\u5e72\u4e2a\u7279\u6b8a\u4e8b\u52a1\u4e2d\u5b8c\u6210\uff0c\u5f00\u542f\u7279\u6b8a\u4e8b\u52a1\u524d\u9700\u8981\u63d0\u4ea4\u5230\u5176\u4ed6\u4e8b\u52a1"}),"\n",(0,i.jsx)(e.p,{children:"MDL \u9501\u7684\u7279\u6027\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"MDL \u9501\u4e0d\u9700\u8981\u663e\u5f0f\u4f7f\u7528\uff0c\u5728\u8bbf\u95ee\u4e00\u4e2a\u8868\u7684\u65f6\u5019\u4f1a\u88ab\u81ea\u52a8\u52a0\u4e0a\uff0c\u5728\u4e8b\u52a1\u5f00\u59cb\u65f6\u7533\u8bf7\uff0c\u6574\u4e2a\u4e8b\u52a1\u63d0\u4ea4\u540e\u91ca\u653e\uff08\u6267\u884c\u5b8c\u5355\u6761\u8bed\u53e5\u4e0d\u91ca\u653e\uff09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"MDL \u9501\u662f\u5728 Server \u4e2d\u5b9e\u73b0\uff0c\u4e0d\u662f InnoDB \u5b58\u50a8\u5f15\u64ce\u5c42\u80fd\u76f4\u63a5\u5b9e\u73b0\u7684\u9501"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"MDL \u9501\u8fd8\u80fd\u5b9e\u73b0\u5176\u4ed6\u7c92\u5ea6\u7ea7\u522b\u7684\u9501\uff0c\u6bd4\u5982\u5168\u5c40\u9501\u3001\u5e93\u7ea7\u522b\u7684\u9501\u3001\u8868\u7a7a\u95f4\u7ea7\u522b\u7684\u9501"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"FLUSH TABLES WITH READ LOCK \u7b80\u79f0\uff08FTWRL\uff09\uff0c\u5168\u5c40\u8bfb\u9501\uff0c\u8ba9\u6574\u4e2a\u5e93\u5904\u4e8e\u53ea\u8bfb\u72b6\u6001\uff0cDDL DML \u90fd\u88ab\u963b\u585e\uff0c\u5de5\u4f5c\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e0a\u5168\u5c40\u8bfb\u9501\uff08lock_global_read_lock\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u6e05\u7406\u8868\u7f13\u5b58\uff08close_cached_tables\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u4e0a\u5168\u5c40 COMMIT \u9501\uff08make_global_read_lock_block_commit\uff09"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u8be5\u547d\u4ee4\u4e3b\u8981\u7528\u4e8e\u5907\u4efd\u5de5\u5177\u505a",(0,i.jsx)(e.strong,{children:"\u4e00\u81f4\u6027\u5907\u4efd"}),"\uff0c\u7531\u4e8e FTWRL \u9700\u8981\u6301\u6709\u4e24\u628a\u5168\u5c40\u7684 MDL \u9501\uff0c\u5e76\u4e14\u8fd8\u8981\u5173\u95ed\u6240\u6709\u8868\u5bf9\u8c61\uff0c\u56e0\u6b64\u6740\u4f24\u6027\u5f88\u5927"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"myisam-1",children:"MyISAM"}),"\n",(0,i.jsx)(e.h4,{id:"\u8868\u7ea7\u9501",children:"\u8868\u7ea7\u9501"}),"\n",(0,i.jsx)(e.p,{children:"MyISAM \u5b58\u50a8\u5f15\u64ce\u53ea\u652f\u6301\u8868\u9501\uff0c\u8fd9\u4e5f\u662f MySQL \u5f00\u59cb\u51e0\u4e2a\u7248\u672c\u4e2d\u552f\u4e00\u652f\u6301\u7684\u9501\u7c7b\u578b"}),"\n",(0,i.jsxs)(e.p,{children:["MyISAM \u5f15\u64ce\u5728\u6267\u884c\u67e5\u8be2\u8bed\u53e5\u4e4b\u524d\uff0c\u4f1a",(0,i.jsx)(e.strong,{children:"\u81ea\u52a8"}),"\u7ed9\u6d89\u53ca\u5230\u7684\u6240\u6709\u8868\u52a0\u8bfb\u9501\uff0c\u5728\u6267\u884c\u589e\u5220\u6539\u4e4b\u524d\uff0c\u4f1a",(0,i.jsx)(e.strong,{children:"\u81ea\u52a8"}),"\u7ed9\u6d89\u53ca\u7684\u8868\u52a0\u5199\u9501\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5e76\u4e0d\u9700\u8981\u7528\u6237\u5e72\u9884\uff0c\u6240\u4ee5\u7528\u6237\u4e00\u822c\u4e0d\u9700\u8981\u76f4\u63a5\u7528 LOCK TABLE \u547d\u4ee4\u7ed9 MyISAM \u8868\u663e\u5f0f\u52a0\u9501"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u52a0\u9501\u547d\u4ee4\uff1a\uff08\u5bf9 InnoDB \u5b58\u50a8\u5f15\u64ce\u4e5f\u9002\u7528\uff09"}),"\n",(0,i.jsx)(e.p,{children:"\u8bfb\u9501\uff1a\u6240\u6709\u8fde\u63a5\u53ea\u80fd\u8bfb\u53d6\u6570\u636e\uff0c\u4e0d\u80fd\u4fee\u6539"}),"\n",(0,i.jsx)(e.p,{children:"\u5199\u9501\uff1a\u5176\u4ed6\u8fde\u63a5\u4e0d\u80fd\u67e5\u8be2\u548c\u4fee\u6539\u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u8bfb\u9501\nLOCK TABLE table_name READ;\n\n-- \u5199\u9501\nLOCK TABLE table_name WRITE;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u89e3\u9501\u547d\u4ee4\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u5c06\u5f53\u524d\u4f1a\u8bdd\u6240\u6709\u7684\u8868\u8fdb\u884c\u89e3\u9501\nUNLOCK TABLES;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u9501\u7684\u517c\u5bb9\u6027\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5bf9 MyISAM \u8868\u7684\u8bfb\u64cd\u4f5c\uff0c\u4e0d\u4f1a\u963b\u585e\u5176\u4ed6\u7528\u6237\u5bf9\u540c\u4e00\u8868\u7684\u8bfb\u8bf7\u6c42\uff0c\u4f46\u4f1a\u963b\u585e\u5bf9\u540c\u4e00\u8868\u7684\u5199\u8bf7\u6c42"}),"\n",(0,i.jsx)(e.li,{children:"\u5bf9 MyISAM \u8868\u7684\u5199\u64cd\u4f5c\uff0c\u5219\u4f1a\u963b\u585e\u5176\u4ed6\u7528\u6237\u5bf9\u540c\u4e00\u8868\u7684\u8bfb\u548c\u5199\u64cd\u4f5c"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-MyISAM \u9501\u7684\u517c\u5bb9\u6027.png)"}),"\n",(0,i.jsxs)(e.p,{children:["\u9501\u8c03\u5ea6\uff1a",(0,i.jsx)(e.strong,{children:"MyISAM \u7684\u8bfb\u5199\u9501\u8c03\u5ea6\u662f\u5199\u4f18\u5148"}),"\uff0c\u56e0\u4e3a\u5199\u9501\u540e\u5176\u4ed6\u7ebf\u7a0b\u4e0d\u80fd\u505a\u4efb\u4f55\u64cd\u4f5c\uff0c\u5927\u91cf\u7684\u66f4\u65b0\u4f1a\u4f7f\u67e5\u8be2\u5f88\u96be\u5f97\u5230\u9501\uff0c\u4ece\u800c\u9020\u6210\u6c38\u8fdc\u963b\u585e\uff0c\u6240\u4ee5 MyISAM \u4e0d\u9002\u5408\u505a\u5199\u4e3a\u4e3b\u7684\u8868\u7684\u5b58\u50a8\u5f15\u64ce"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u9501\u64cd\u4f5c",children:"\u9501\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.h5,{id:"\u8bfb\u9501",children:"\u8bfb\u9501"}),"\n",(0,i.jsx)(e.p,{children:"\u4e24\u4e2a\u5ba2\u6237\u7aef\u64cd\u4f5c Client 1\u548c Client 2\uff0c\u7b80\u5316\u4e3a C1\u3001C2"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u51c6\u5907\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE TABLE `tb_book` (\n  `id` INT(11) AUTO_INCREMENT,\n  `name` VARCHAR(50) DEFAULT NULL,\n  `publish_time` DATE DEFAULT NULL,\n  `status` CHAR(1) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=MYISAM DEFAULT CHARSET=utf8 ;\n\nINSERT INTO tb_book (id, NAME, publish_time, STATUS) VALUES(NULL,'java\u7f16\u7a0b\u601d\u60f3','2088-08-01','1');\nINSERT INTO tb_book (id, NAME, publish_time, STATUS) VALUES(NULL,'mysql\u7f16\u7a0b\u601d\u60f3','2088-08-08','0');\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"C1\u3001C2 \u52a0\u8bfb\u9501\uff0c\u540c\u65f6\u67e5\u8be2\u53ef\u4ee5\u6b63\u5e38\u67e5\u8be2\u51fa\u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"LOCK TABLE tb_book READ;\t-- C1\u3001C2\nSELECT * FROM tb_book;\t\t-- C1\u3001C2\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-MyISAM \u8bfb\u95011.png)"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"C1 \u52a0\u8bfb\u9501\uff0cC1\u3001C2 \u67e5\u8be2\u672a\u9501\u5b9a\u7684\u8868\uff0cC1 \u62a5\u9519\uff0cC2 \u6b63\u5e38\u67e5\u8be2"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"LOCK TABLE tb_book READ;\t-- C1\nSELECT * FROM tb_user;\t\t-- C1\u3001C2\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-MyISAM \u8bfb\u95012.png)"}),"\n",(0,i.jsx)(e.p,{children:"C1\u3001C2 \u6267\u884c\u63d2\u5165\u64cd\u4f5c\uff0cC1 \u62a5\u9519\uff0cC2 \u7b49\u5f85\u83b7\u53d6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"INSERT INTO tb_book VALUES(NULL,'Spring\u9ad8\u7ea7','2088-01-01','1');\t-- C1\u3001C2\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-MyISAM \u8bfb\u95013.png)"}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u5728 C1 \u4e2d\u91ca\u653e\u9501\u6307\u4ee4 UNLOCK TABLES\uff0cC2 \u4e2d\u7684 INSERT \u8bed\u53e5\u7acb\u5373\u6267\u884c"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u5199\u9501",children:"\u5199\u9501"}),"\n",(0,i.jsx)(e.p,{children:"\u4e24\u4e2a\u5ba2\u6237\u7aef\u64cd\u4f5c Client 1\u548c Client 2\uff0c\u7b80\u5316\u4e3a C1\u3001C2"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"C1 \u52a0\u5199\u9501\uff0cC1\u3001C2\u67e5\u8be2\u8868\uff0cC1 \u6b63\u5e38\u67e5\u8be2\uff0cC2 \u9700\u8981\u7b49\u5f85"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"LOCK TABLE tb_book WRITE;\t-- C1\nSELECT * FROM tb_book;\t\t-- C1\u3001C2\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-MyISAM \u5199\u95011.png)"}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u5728 C1 \u4e2d\u91ca\u653e\u9501\u6307\u4ee4 UNLOCK TABLES\uff0cC2 \u4e2d\u7684 SELECT \u8bed\u53e5\u7acb\u5373\u6267\u884c"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"C1\u3001C2 \u540c\u65f6\u52a0\u5199\u9501"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"LOCK TABLE tb_book WRITE;\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-MyISAM \u5199\u95012.png)"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"C1 \u52a0\u5199\u9501\uff0cC1\u3001C2\u67e5\u8be2\u672a\u9501\u5b9a\u7684\u8868\uff0cC1 \u62a5\u9519\uff0cC2 \u6b63\u5e38\u67e5\u8be2"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u9501\u72b6\u6001",children:"\u9501\u72b6\u6001"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u9501\u7ade\u4e89\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW OPEN TABLES;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(72022).A+"",width:"905",height:"88"})}),"\n",(0,i.jsx)(e.p,{children:"In_user\uff1a\u8868\u5f53\u524d\u88ab\u67e5\u8be2\u4f7f\u7528\u7684\u6b21\u6570\uff0c\u5982\u679c\u8be5\u6570\u4e3a\u96f6\uff0c\u5219\u8868\u662f\u6253\u5f00\u7684\uff0c\u4f46\u662f\u5f53\u524d\u6ca1\u6709\u88ab\u4f7f\u7528"}),"\n",(0,i.jsx)(e.p,{children:"Name_locked\uff1a\u8868\u540d\u79f0\u662f\u5426\u88ab\u9501\u5b9a\uff0c\u540d\u79f0\u9501\u5b9a\u7528\u4e8e\u53d6\u6d88\u8868\u6216\u5bf9\u8868\u8fdb\u884c\u91cd\u547d\u540d\u7b49\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"LOCK TABLE tb_book READ;\t-- \u6267\u884c\u547d\u4ee4\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(53645).A+"",width:"905",height:"92"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u9501\u72b6\u6001\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW STATUS LIKE 'Table_locks%';\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-MyISAM \u9501\u72b6\u6001.png)"}),"\n",(0,i.jsx)(e.p,{children:"Table_locks_immediate\uff1a\u6307\u7684\u662f\u80fd\u7acb\u5373\u83b7\u5f97\u8868\u7ea7\u9501\u7684\u6b21\u6570\uff0c\u6bcf\u7acb\u5373\u83b7\u53d6\u9501\uff0c\u503c\u52a0 1"}),"\n",(0,i.jsx)(e.p,{children:"Table_locks_waited\uff1a\u6307\u7684\u662f\u4e0d\u80fd\u7acb\u5373\u83b7\u53d6\u8868\u7ea7\u9501\u800c\u9700\u8981\u7b49\u5f85\u7684\u6b21\u6570\uff0c\u6bcf\u7b49\u5f85\u4e00\u6b21\uff0c\u8be5\u503c\u52a0 1\uff0c\u6b64\u503c\u9ad8\u8bf4\u660e\u5b58\u5728\u7740\u8f83\u4e3a\u4e25\u91cd\u7684\u8868\u7ea7\u9501\u4e89\u7528\u60c5\u51b5"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"innodb-1",children:"InnoDB"}),"\n",(0,i.jsx)(e.h4,{id:"\u884c\u7ea7\u9501",children:"\u884c\u7ea7\u9501"}),"\n",(0,i.jsx)(e.h5,{id:"\u8bb0\u5f55\u9501",children:"\u8bb0\u5f55\u9501"}),"\n",(0,i.jsxs)(e.p,{children:["InnoDB \u4e0e MyISAM \u7684\u6700\u5927\u4e0d\u540c\u6709\u4e24\u70b9\uff1a\u4e00\u662f\u652f\u6301\u4e8b\u52a1\uff1b\u4e8c\u662f\u91c7\u7528\u4e86\u884c\u7ea7\u9501\uff0c",(0,i.jsx)(e.strong,{children:"InnoDB \u540c\u65f6\u652f\u6301\u8868\u9501\u548c\u884c\u9501"})]}),"\n",(0,i.jsx)(e.p,{children:"\u884c\u7ea7\u9501\uff0c\u4e5f\u79f0\u4e3a\u8bb0\u5f55\u9501\uff08Record Lock\uff09\uff0cInnoDB  \u5b9e\u73b0\u4e86\u4ee5\u4e0b\u4e24\u79cd\u7c7b\u578b\u7684\u884c\u9501\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5171\u4eab\u9501 (S)\uff1a\u53c8\u79f0\u4e3a\u8bfb\u9501\uff0c\u7b80\u79f0 S \u9501\uff0c\u591a\u4e2a\u4e8b\u52a1\u5bf9\u4e8e\u540c\u4e00\u6570\u636e\u53ef\u4ee5\u5171\u4eab\u4e00\u628a\u9501\uff0c\u90fd\u80fd\u8bbf\u95ee\u5230\u6570\u636e\uff0c\u4f46\u662f\u53ea\u80fd\u8bfb\u4e0d\u80fd\u4fee\u6539"}),"\n",(0,i.jsx)(e.li,{children:"\u6392\u4ed6\u9501 (X)\uff1a\u53c8\u79f0\u4e3a\u5199\u9501\uff0c\u7b80\u79f0 X \u9501\uff0c\u4e0d\u80fd\u4e0e\u5176\u4ed6\u9501\u5e76\u5b58\uff0c\u83b7\u53d6\u6392\u4ed6\u9501\u7684\u4e8b\u52a1\u662f\u53ef\u4ee5\u5bf9\u6570\u636e\u8bfb\u53d6\u548c\u4fee\u6539"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["RR \u9694\u79bb\u754c\u522b\u4e0b\uff0c\u5bf9\u4e8e UPDATE\u3001DELETE \u548c INSERT \u8bed\u53e5\uff0cInnoDB \u4f1a",(0,i.jsx)(e.strong,{children:"\u81ea\u52a8\u7ed9\u6d89\u53ca\u6570\u636e\u96c6\u52a0\u6392\u4ed6\u9501"}),"\uff08\u884c\u9501\uff09\uff0c\u5728 commit \u65f6\u81ea\u52a8\u91ca\u653e\uff1b\u5bf9\u4e8e\u666e\u901a SELECT \u8bed\u53e5\uff0c\u4e0d\u4f1a\u52a0\u4efb\u4f55\u9501\uff08\u53ea\u662f\u9488\u5bf9 InnoDB \u5c42\u6765\u8bf4\u7684\uff0c\u56e0\u4e3a\u5728 Server \u5c42\u4f1a",(0,i.jsx)(e.strong,{children:"\u52a0 MDL \u8bfb\u9501"}),"\uff09\uff0c\u901a\u8fc7 MVCC \u9632\u6b62\u5e76\u53d1\u51b2\u7a81"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5728\u4e8b\u52a1\u4e2d\u52a0\u7684\u9501\uff0c\u5e76\u4e0d\u662f\u4e0d\u9700\u8981\u4e86\u5c31\u91ca\u653e\uff0c\u800c\u662f\u5728\u4e8b\u52a1\u4e2d\u6b62\u6216\u63d0\u4ea4\u65f6\u81ea\u52a8\u91ca\u653e\uff0c\u8fd9\u4e2a\u5c31\u662f",(0,i.jsx)(e.strong,{children:"\u4e24\u9636\u6bb5\u9501\u534f\u8bae"}),"\u3002\u6240\u4ee5\u4e00\u822c\u5c06\u66f4\u65b0\u5171\u4eab\u8d44\u6e90\uff08\u5e76\u53d1\u9ad8\uff09\u7684 SQL \u653e\u5230\u4e8b\u52a1\u7684\u6700\u540e\u6267\u884c\uff0c\u53ef\u4ee5\u8ba9\u5176\u4ed6\u7ebf\u7a0b\u5c3d\u91cf\u7684\u51cf\u5c11\u7b49\u5f85\u65f6\u95f4"]}),"\n",(0,i.jsx)(e.p,{children:"\u9501\u7684\u517c\u5bb9\u6027\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5171\u4eab\u9501\u548c\u5171\u4eab\u9501     \u517c\u5bb9"}),"\n",(0,i.jsx)(e.li,{children:"\u5171\u4eab\u9501\u548c\u6392\u4ed6\u9501     \u51b2\u7a81"}),"\n",(0,i.jsx)(e.li,{children:"\u6392\u4ed6\u9501\u548c\u6392\u4ed6\u9501     \u51b2\u7a81"}),"\n",(0,i.jsx)(e.li,{children:"\u6392\u4ed6\u9501\u548c\u5171\u4eab\u9501     \u51b2\u7a81"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u663e\u5f0f\u7ed9\u6570\u636e\u96c6\u52a0\u5171\u4eab\u9501\u6216\u6392\u4ed6\u9501\uff1a",(0,i.jsx)(e.strong,{children:"\u52a0\u9501\u8bfb\u5c31\u662f\u5f53\u524d\u8bfb\uff0c\u8bfb\u53d6\u7684\u662f\u6700\u65b0\u6570\u636e"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM table_name WHERE ... LOCK IN SHARE MODE\t-- \u5171\u4eab\u9501\nSELECT * FROM table_name WHERE ... FOR UPDATE\t\t\t-- \u6392\u4ed6\u9501\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6ce8\u610f\uff1a",(0,i.jsx)(e.strong,{children:"\u9501\u9ed8\u8ba4\u4f1a\u9501\u805a\u7c07\u7d22\u5f15\uff08\u9501\u5c31\u662f\u52a0\u5728\u7d22\u5f15\u4e0a\uff09"}),"\uff0c\u4f46\u662f\u5f53\u4f7f\u7528\u8986\u76d6\u7d22\u5f15\u65f6\uff0c\u52a0\u5171\u4eab\u9501\u53ea\u9501\u4e8c\u7ea7\u7d22\u5f15\uff0c\u4e0d\u9501\u805a\u7c07\u7d22\u5f15"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u9501\u64cd\u4f5c-1",children:"\u9501\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"\u4e24\u4e2a\u5ba2\u6237\u7aef\u64cd\u4f5c Client 1\u548c Client 2\uff0c\u7b80\u5316\u4e3a C1\u3001C2"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u73af\u5883\u51c6\u5907"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE TABLE test_innodb_lock(\n\tid INT(11),\n\tname VARCHAR(16),\n\tsex VARCHAR(1)\n)ENGINE = INNODB DEFAULT CHARSET=utf8;\n\nINSERT INTO test_innodb_lock VALUES(1,'100','1');\n-- ..........\n\nCREATE INDEX idx_test_innodb_lock_id ON test_innodb_lock(id);\nCREATE INDEX idx_test_innodb_lock_name ON test_innodb_lock(name);\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5173\u95ed\u81ea\u52a8\u63d0\u4ea4\u529f\u80fd\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SET AUTOCOMMIT=0;\t-- C1\u3001C2\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6b63\u5e38\u67e5\u8be2\u6570\u636e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM test_innodb_lock;\t-- C1\u3001C2\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2 id \u4e3a 3 \u7684\u6570\u636e\uff0c\u6b63\u5e38\u67e5\u8be2\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM test_innodb_lock WHERE id=3;\t-- C1\u3001C2\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-InnoDB \u9501\u64cd\u4f5c1.png)"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"C1 \u66f4\u65b0 id \u4e3a 3 \u7684\u6570\u636e\uff0c\u4f46\u4e0d\u63d0\u4ea4\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"UPDATE test_innodb_lock SET name='300' WHERE id=3;\t-- C1\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-InnoDB \u9501\u64cd\u4f5c2.png)"}),"\n",(0,i.jsx)(e.p,{children:"C2 \u67e5\u8be2\u4e0d\u5230 C1 \u4fee\u6539\u7684\u6570\u636e\uff0c\u56e0\u4e3a\u9694\u79bb\u754c\u522b\u4e3a REPEATABLE READ\uff0cC1 \u63d0\u4ea4\u4e8b\u52a1\uff0cC2 \u67e5\u8be2\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"COMMIT;\t-- C1\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-InnoDB \u9501\u64cd\u4f5c3.png)"}),"\n",(0,i.jsx)(e.p,{children:"\u63d0\u4ea4\u540e\u4ecd\u7136\u67e5\u8be2\u4e0d\u5230 C1 \u4fee\u6539\u7684\u6570\u636e\uff0c\u56e0\u4e3a\u9694\u79bb\u7ea7\u522b\u53ef\u4ee5\u9632\u6b62\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\uff0c\u6240\u4ee5 C2 \u9700\u8981\u63d0\u4ea4\u624d\u53ef\u4ee5\u67e5\u8be2\u5230\u5176\u4ed6\u4e8b\u52a1\u5bf9\u6570\u636e\u7684\u4fee\u6539\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"COMMIT;\t-- C2\nSELECT * FROM test_innodb_lock WHERE id=3;\t-- C2\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-InnoDB \u9501\u64cd\u4f5c4.png)"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"C1 \u66f4\u65b0 id \u4e3a 3 \u7684\u6570\u636e\uff0c\u4f46\u4e0d\u63d0\u4ea4\uff0cC2 \u4e5f\u66f4\u65b0 id \u4e3a 3 \u7684\u6570\u636e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"UPDATE test_innodb_lock SET name='3' WHERE id=3;\t-- C1\nUPDATE test_innodb_lock SET name='30' WHERE id=3;\t-- C2\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-InnoDB \u9501\u64cd\u4f5c5.png)"}),"\n",(0,i.jsx)(e.p,{children:"\u5f53 C1 \u63d0\u4ea4\uff0cC2 \u76f4\u63a5\u89e3\u9664\u963b\u585e\uff0c\u76f4\u63a5\u66f4\u65b0"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u64cd\u4f5c\u4e0d\u540c\u884c\u7684\u6570\u636e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"UPDATE test_innodb_lock SET name='10' WHERE id=1;\t-- C1\nUPDATE test_innodb_lock SET name='30' WHERE id=3;\t-- C2\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-InnoDB \u9501\u64cd\u4f5c6.png)"}),"\n",(0,i.jsx)(e.p,{children:"\u7531\u4e8e C1\u3001C2 \u64cd\u4f5c\u7684\u4e0d\u540c\u884c\uff0c\u83b7\u53d6\u4e0d\u540c\u7684\u884c\u9501\uff0c\u6240\u4ee5\u90fd\u53ef\u4ee5\u6b63\u5e38\u83b7\u53d6\u884c\u9501"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u9501\u5206\u7c7b",children:"\u9501\u5206\u7c7b"}),"\n",(0,i.jsx)(e.h5,{id:"\u95f4\u9699\u9501",children:"\u95f4\u9699\u9501"}),"\n",(0,i.jsxs)(e.p,{children:["InnoDB \u4f1a\u5bf9\u95f4\u9699\uff08GAP\uff09\u8fdb\u884c\u52a0\u9501\uff0c\u5c31\u662f\u95f4\u9699\u9501 \uff08RR \u9694\u79bb\u7ea7\u522b\u4e0b\u624d\u6709\u8be5\u9501\uff09\u3002\u95f4\u9699\u9501\u4e4b\u95f4\u4e0d\u5b58\u5728\u51b2\u7a81\u5173\u7cfb\uff0c",(0,i.jsx)(e.strong,{children:"\u591a\u4e2a\u4e8b\u52a1\u53ef\u4ee5\u540c\u65f6\u5bf9\u4e00\u4e2a\u95f4\u9699\u52a0\u9501"}),"\uff0c\u4f46\u662f\u95f4\u9699\u9501\u4f1a\u963b\u6b62\u5f80\u8fd9\u4e2a\u95f4\u9699\u4e2d\u63d2\u5165\u4e00\u4e2a\u8bb0\u5f55\u7684\u64cd\u4f5c"]}),"\n",(0,i.jsx)(e.p,{children:"InnoDB \u52a0\u9501\u7684\u57fa\u672c\u5355\u4f4d\u662f next-key lock\uff0c\u8be5\u9501\u662f\u884c\u9501\u548c gap lock \u7684\u7ec4\u5408\uff08X or S \u9501\uff09\uff0c\u4f46\u662f\u52a0\u9501\u8fc7\u7a0b\u662f\u5206\u4e3a\u95f4\u9699\u9501\u548c\u884c\u9501\u4e24\u6bb5\u6267\u884c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u53ef\u4ee5",(0,i.jsx)(e.strong,{children:"\u4fdd\u62a4\u5f53\u524d\u8bb0\u5f55\u548c\u524d\u9762\u7684\u95f4\u9699"}),"\uff0c\u9075\u5faa\u5de6\u5f00\u53f3\u95ed\u539f\u5219\uff0c\u5355\u7eaf\u7684\u95f4\u9699\u9501\u662f\u5de6\u5f00\u53f3\u5f00"]}),"\n",(0,i.jsx)(e.li,{children:"\u5047\u8bbe\u6709 10\u300111\u300113\uff0c\u90a3\u4e48\u53ef\u80fd\u7684\u95f4\u9699\u9501\u5305\u62ec\uff1a(\u8d1f\u65e0\u7a77,10]\u3001(10,11]\u3001(11,13]\u3001(13,\u6b63\u65e0\u7a77)"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u51e0\u79cd\u7d22\u5f15\u7684\u52a0\u9501\u60c5\u51b5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u552f\u4e00\u7d22\u5f15\u52a0\u9501\u5728\u503c\u5b58\u5728\u65f6\u662f\u884c\u9501\uff0cnext-key lock \u4f1a\u9000\u5316\u4e3a\u884c\u9501\uff0c\u503c\u4e0d\u5b58\u5728\u4f1a\u53d8\u6210\u95f4\u9699\u9501"}),"\n",(0,i.jsx)(e.li,{children:"\u666e\u901a\u7d22\u5f15\u52a0\u9501\u4f1a\u7ee7\u7eed\u5411\u53f3\u904d\u5386\u5230\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u503c\u4e3a\u6b62\uff0cnext-key lock \u9000\u5316\u4e3a\u95f4\u9699\u9501"}),"\n",(0,i.jsx)(e.li,{children:"\u8303\u56f4\u67e5\u8be2\u65e0\u8bba\u662f\u5426\u662f\u552f\u4e00\u7d22\u5f15\uff0c\u90fd\u9700\u8981\u8bbf\u95ee\u5230\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u7b2c\u4e00\u4e2a\u503c\u4e3a\u6b62"}),"\n",(0,i.jsx)(e.li,{children:"\u5bf9\u4e8e\u8054\u5408\u7d22\u5f15\u4e14\u662f\u552f\u4e00\u7d22\u5f15\uff0c\u5982\u679c where \u6761\u4ef6\u53ea\u5305\u62ec\u8054\u5408\u7d22\u5f15\u7684\u4e00\u90e8\u5206\uff0c\u90a3\u4e48\u4f1a\u52a0\u95f4\u9699\u9501"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u95f4\u9699\u9501\u4f18\u70b9\uff1aRR \u7ea7\u522b\u4e0b\u95f4\u9699\u9501\u53ef\u4ee5",(0,i.jsx)(e.strong,{children:"\u89e3\u51b3\u4e8b\u52a1\u7684\u4e00\u90e8\u5206\u7684\u5e7b\u8bfb\u95ee\u9898"}),"\uff0c\u901a\u8fc7\u5bf9\u95f4\u9699\u52a0\u9501\uff0c\u53ef\u4ee5\u9632\u6b62\u8bfb\u53d6\u8fc7\u7a0b\u4e2d\u6570\u636e\u6761\u76ee\u53d1\u751f\u53d8\u5316\u3002\u4e00\u90e8\u5206\u7684\u610f\u601d\u662f\u4e0d\u4f1a\u5bf9\u5168\u90e8\u95f4\u9699\u52a0\u9501\uff0c\u53ea\u80fd\u52a0\u9501\u4e00\u90e8\u5206\u7684\u95f4\u9699"]}),"\n",(0,i.jsx)(e.p,{children:"\u95f4\u9699\u9501\u5371\u5bb3\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5f53\u9501\u5b9a\u4e00\u4e2a\u8303\u56f4\u7684\u952e\u503c\u540e\uff0c\u5373\u4f7f\u67d0\u4e9b\u4e0d\u5b58\u5728\u7684\u952e\u503c\u4e5f\u4f1a\u88ab\u65e0\u8f9c\u7684\u9501\u5b9a\uff0c\u9020\u6210\u5728\u9501\u5b9a\u7684\u65f6\u5019\u65e0\u6cd5\u63d2\u5165\u9501\u5b9a\u952e\u503c\u8303\u56f4\u5185\u7684\u4efb\u4f55\u6570\u636e\uff0c\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\u8fd9\u53ef\u80fd\u4f1a\u5bf9\u6027\u80fd\u9020\u6210\u5f88\u5927\u7684\u5371\u5bb3\uff0c\u5f71\u54cd\u5e76\u53d1\u5ea6"}),"\n",(0,i.jsxs)(e.li,{children:["\u4e8b\u52a1 A B \u540c\u65f6\u9501\u4f4f\u4e00\u4e2a\u95f4\u9699\u540e\uff0cA \u5f80\u5f53\u524d\u95f4\u9699\u63d2\u5165\u6570\u636e\u65f6\u4f1a\u88ab B \u7684\u95f4\u9699\u9501\u963b\u585e\uff0cB \u4e5f\u6267\u884c\u63d2\u5165\u95f4\u9699\u6570\u636e\u7684\u64cd\u4f5c\u65f6\u5c31\u4f1a",(0,i.jsx)(e.strong,{children:"\u4ea7\u751f\u6b7b\u9501"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u73b0\u573a\u6f14\u793a\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5173\u95ed\u81ea\u52a8\u63d0\u4ea4\u529f\u80fd\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SET AUTOCOMMIT=0;\t-- C1\u3001C2\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u6570\u636e\u8868\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM test_innodb_lock;\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-InnoDB \u95f4\u9699\u95011.png)"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"C1 \u6839\u636e id \u8303\u56f4\u66f4\u65b0\u6570\u636e\uff0cC2 \u63d2\u5165\u6570\u636e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"UPDATE test_innodb_lock SET name='8888' WHERE id < 4;\t-- C1\nINSERT INTO test_innodb_lock VALUES(2,'200','2');\t\t-- C2\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-InnoDB \u95f4\u9699\u95012.png)"}),"\n",(0,i.jsx)(e.p,{children:"\u51fa\u73b0\u95f4\u9699\u9501\uff0cC2 \u88ab\u963b\u585e\uff0c\u7b49\u5f85 C1 \u63d0\u4ea4\u4e8b\u52a1\u540e\u624d\u80fd\u66f4\u65b0"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u610f\u5411\u9501",children:"\u610f\u5411\u9501"}),"\n",(0,i.jsx)(e.p,{children:"InnoDB \u4e3a\u4e86\u652f\u6301\u591a\u7c92\u5ea6\u7684\u52a0\u9501\uff0c\u5141\u8bb8\u884c\u9501\u548c\u8868\u9501\u540c\u65f6\u5b58\u5728\uff0c\u652f\u6301\u5728\u4e0d\u540c\u7c92\u5ea6\u4e0a\u7684\u52a0\u9501\u64cd\u4f5c\uff0cInnoDB \u589e\u52a0\u4e86\u610f\u5411\u9501\uff08Intention Lock\uff09"}),"\n",(0,i.jsx)(e.p,{children:"\u610f\u5411\u9501\u662f\u5c06\u9501\u5b9a\u7684\u5bf9\u8c61\u5206\u4e3a\u591a\u4e2a\u5c42\u6b21\uff0c\u610f\u5411\u9501\u610f\u5473\u7740\u4e8b\u52a1\u5e0c\u671b\u5728\u66f4\u7ec6\u7c92\u5ea6\u4e0a\u8fdb\u884c\u52a0\u9501\uff0c\u610f\u5411\u9501\u5206\u4e3a\u4e24\u79cd\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u610f\u5411\u5171\u4eab\u9501\uff08IS\uff09\uff1a\u4e8b\u52a1\u6709\u610f\u5411\u5bf9\u8868\u52a0\u5171\u4eab\u9501"}),"\n",(0,i.jsx)(e.li,{children:"\u610f\u5411\u6392\u4ed6\u9501\uff08IX\uff09\uff1a\u4e8b\u52a1\u6709\u610f\u5411\u5bf9\u8868\u52a0\u6392\u4ed6\u9501"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"IX\uff0cIS \u662f\u8868\u7ea7\u9501"}),"\uff0c\u4e0d\u4f1a\u548c\u884c\u7ea7\u7684 X\uff0cS \u9501\u53d1\u751f\u51b2\u7a81\uff0c\u610f\u5411\u9501\u662f\u5728\u52a0\u8868\u7ea7\u9501\u4e4b\u524d\u6dfb\u52a0\uff0c\u4e3a\u4e86\u5728\u52a0\u8868\u7ea7\u9501\u65f6\u53ef\u4ee5\u5feb\u901f\u5224\u65ad\u8868\u4e2d\u662f\u5426\u6709\u8bb0\u5f55\u88ab\u4e0a\u9501\uff0c\u6bd4\u5982\u5411\u4e00\u4e2a\u8868\u6dfb\u52a0\u8868\u7ea7 X \u9501\u7684\u65f6\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6ca1\u6709\u610f\u5411\u9501\uff0c\u5219\u9700\u8981\u904d\u5386\u6574\u4e2a\u8868\u5224\u65ad\u662f\u5426\u6709\u9501\u5b9a\u7684\u8bb0\u5f55"}),"\n",(0,i.jsx)(e.li,{children:"\u6709\u4e86\u610f\u5411\u9501\uff0c\u9996\u5148\u5224\u65ad\u662f\u5426\u5b58\u5728\u610f\u5411\u9501\uff0c\u7136\u540e\u5224\u65ad\u8be5\u610f\u5411\u9501\u4e0e\u5373\u5c06\u6dfb\u52a0\u7684\u8868\u7ea7\u9501\u662f\u5426\u517c\u5bb9\u5373\u53ef\uff0c\u56e0\u4e3a\u610f\u5411\u9501\u7684\u5b58\u5728\u4ee3\u8868\u6709\u8868\u7ea7\u9501\u7684\u5b58\u5728\u6216\u8005\u5373\u5c06\u6709\u8868\u7ea7\u9501\u7684\u5b58\u5728"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u517c\u5bb9\u6027\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(98028).A+"",width:"690",height:"190"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u63d2\u5165\u610f\u5411\u9501"})," Insert Intention Lock \u662f\u5728\u63d2\u5165\u4e00\u884c\u8bb0\u5f55\u64cd\u4f5c\u4e4b\u524d\u8bbe\u7f6e\u7684\u4e00\u79cd\u95f4\u9699\u9501\uff0c\u662f\u884c\u7ea7\u9501"]}),"\n",(0,i.jsx)(e.p,{children:"\u63d2\u5165\u610f\u5411\u9501\u91ca\u653e\u4e86\u4e00\u79cd\u63d2\u5165\u4fe1\u53f7\uff0c\u5373\u591a\u4e2a\u4e8b\u52a1\u5728\u76f8\u540c\u7684\u7d22\u5f15\u95f4\u9699\u63d2\u5165\u65f6\u5982\u679c\u4e0d\u662f\u63d2\u5165\u76f8\u540c\u7684\u95f4\u9699\u4f4d\u7f6e\u5c31\u4e0d\u9700\u8981\u4e92\u76f8\u7b49\u5f85\u3002\u5047\u8bbe\u67d0\u5217\u6709\u7d22\u5f15\uff0c\u53ea\u8981\u4e24\u4e2a\u4e8b\u52a1\u63d2\u5165\u4f4d\u7f6e\u4e0d\u540c\uff0c\u5982\u4e8b\u52a1 A \u63d2\u5165 3\uff0c\u4e8b\u52a1 B \u63d2\u5165 4\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u540c\u65f6\u63d2\u5165"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u81ea\u589e\u9501",children:"\u81ea\u589e\u9501"}),"\n",(0,i.jsx)(e.p,{children:"\u7cfb\u7edf\u4f1a\u81ea\u52a8\u7ed9 AUTO_INCREMENT \u4fee\u9970\u7684\u5217\u8fdb\u884c\u9012\u589e\u8d4b\u503c\uff0c\u5b9e\u73b0\u65b9\u5f0f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"AUTO_INC \u9501\uff1a\u8868\u7ea7\u9501\uff0c\u6267\u884c\u63d2\u5165\u8bed\u53e5\u65f6\u4f1a\u81ea\u52a8\u6dfb\u52a0\uff0c\u5728\u8be5\u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\u91ca\u653e\uff0c\u5e76\u4e0d\u662f\u4e8b\u52a1\u7ed3\u675f"}),"\n",(0,i.jsx)(e.li,{children:"\u8f7b\u91cf\u7ea7\u9501\uff1a\u4e3a\u63d2\u5165\u8bed\u53e5\u751f\u6210 AUTO_INCREMENT \u4fee\u9970\u7684\u5217\u65f6\u83b7\u53d6\u8be5\u9501\uff0c\u751f\u6210\u4ee5\u540e\u91ca\u653e\u6389\uff0c\u4e0d\u9700\u8981\u7b49\u5230\u63d2\u5165\u8bed\u53e5\u6267\u884c\u5b8c\u540e\u91ca\u653e"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u7cfb\u7edf\u53d8\u91cf ",(0,i.jsx)(e.code,{children:"innodb_autoinc_lock_mode"})," \u63a7\u5236\u91c7\u53d6\u54ea\u79cd\u65b9\u5f0f\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"0\uff1a\u5168\u90e8\u91c7\u7528 AUTO_INC \u9501"}),"\n",(0,i.jsx)(e.li,{children:"1\uff1a\u5168\u90e8\u91c7\u7528\u8f7b\u91cf\u7ea7\u9501"}),"\n",(0,i.jsx)(e.li,{children:"2\uff1a\u6df7\u5408\u4f7f\u7528\uff0c\u5728\u63d2\u5165\u8bb0\u5f55\u7684\u6570\u91cf\u786e\u5b9a\u65f6\u91c7\u7528\u8f7b\u91cf\u7ea7\u9501\uff0c\u4e0d\u786e\u5b9a\u65f6\u91c7\u7528 AUTO_INC \u9501"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u9690\u5f0f\u9501",children:"\u9690\u5f0f\u9501"}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u822c\u60c5\u51b5\u4e0b INSERT \u8bed\u53e5\u662f\u4e0d\u9700\u8981\u5728\u5185\u5b58\u4e2d\u751f\u6210\u9501\u7ed3\u6784\u7684\uff0c\u4f1a\u8fdb\u884c\u9690\u5f0f\u7684\u52a0\u9501\uff0c\u4fdd\u62a4\u7684\u662f\u63d2\u5165\u540e\u7684\u5b89\u5168"}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u5982\u679c\u63d2\u5165\u7684\u95f4\u9699\u88ab\u5176\u4ed6\u4e8b\u52a1\u52a0\u4e86\u95f4\u9699\u9501\uff0c\u6b64\u6b21\u63d2\u5165\u4f1a\u88ab\u963b\u585e\uff0c\u5e76\u5728\u8be5\u95f4\u9699\u63d2\u5165\u4e00\u4e2a\u63d2\u5165\u610f\u5411\u9501"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u805a\u7c07\u7d22\u5f15\uff1a\u7d22\u5f15\u8bb0\u5f55\u6709 trx_id \u9690\u85cf\u5217\uff0c\u8868\u793a\u6700\u540e\u6539\u52a8\u8be5\u8bb0\u5f55\u7684\u4e8b\u52a1 id\uff0c\u63d2\u5165\u6570\u636e\u540e\u4e8b\u52a1 id \u5c31\u662f\u5f53\u524d\u4e8b\u52a1\u3002\u5176\u4ed6\u4e8b\u52a1\u60f3\u83b7\u53d6\u8be5\u8bb0\u5f55\u7684\u9501\u65f6\u4f1a\u5224\u65ad\u5f53\u524d\u8bb0\u5f55\u7684\u4e8b\u52a1 id \u662f\u5426\u662f\u6d3b\u8dc3\u7684\uff0c\u5982\u679c\u4e0d\u662f\u5c31\u53ef\u4ee5\u6b63\u5e38\u52a0\u9501\uff1b\u5982\u679c\u662f\u5c31\u521b\u5efa\u4e00\u4e2a X \u7684\u9501\u7ed3\u6784\uff0c\u8be5\u9501\u7684 is_waiting \u662f false\uff0c\u4e3a\u81ea\u5df1\u7684\u4e8b\u52a1\u521b\u5efa\u4e00\u4e2a\u9501\u7ed3\u6784\uff0cis_waiting \u662f true\uff08\u7c7b\u4f3c Java \u4e2d\u7684\u9501\u5347\u7ea7\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u4e8c\u7ea7\u7d22\u5f15\uff1a\u83b7\u53d6\u6570\u636e\u9875 Page Header \u4e2d\u7684 PAGE_MAX_TRX_ID \u5c5e\u6027\uff0c\u4ee3\u8868\u4fee\u6539\u5f53\u524d\u9875\u9762\u7684\u6700\u5927\u7684\u4e8b\u52a1 ID\uff0c\u5982\u679c\u5c0f\u4e8e\u5f53\u524d\u6d3b\u8dc3\u7684\u6700\u5c0f\u4e8b\u52a1 id\uff0c\u5c31\u8bc1\u660e\u63d2\u5165\u8be5\u6570\u636e\u7684\u4e8b\u52a1\u5df2\u7ecf\u63d0\u4ea4\uff0c\u5426\u5219\u5c31\u9700\u8981\u83b7\u53d6\u5230\u4e3b\u952e\u503c\u8fdb\u884c\u56de\u8868\u64cd\u4f5c"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u9690\u5f0f\u9501\u8d77\u5230\u4e86\u5ef6\u8fdf\u751f\u6210\u9501\u7684\u6548\u679c\uff0c\u5982\u679c\u5176\u4ed6\u4e8b\u52a1\u4e0e\u9690\u5f0f\u9501\u6ca1\u6709\u51b2\u7a81\uff0c\u5c31\u53ef\u4ee5\u907f\u514d\u9501\u7ed3\u6784\u7684\u751f\u6210\uff0c\u8282\u7701\u4e86\u5185\u5b58\u8d44\u6e90"}),"\n",(0,i.jsx)(e.p,{children:"INSERT \u5728\u4e24\u79cd\u60c5\u51b5\u4e0b\u4f1a\u751f\u6210\u9501\u7ed3\u6784\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u91cd\u590d\u952e\uff1a\u5728\u63d2\u5165\u4e3b\u952e\u6216\u552f\u4e00\u4e8c\u7ea7\u7d22\u5f15\u65f6\u9047\u5230\u91cd\u590d\u7684\u952e\u503c\u4f1a\u62a5\u9519\uff0c\u5728\u62a5\u9519\u524d\u9700\u8981\u5bf9\u5bf9\u5e94\u7684\u805a\u7c07\u7d22\u5f15\u8fdb\u884c\u52a0\u9501"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9694\u79bb\u7ea7\u522b <= Read Uncommitted\uff0c\u52a0 S \u578b Record Lock"}),"\n",(0,i.jsx)(e.li,{children:"\u9694\u79bb\u7ea7\u522b >= Repeatable Read\uff0c\u52a0 S \u578b next_key \u9501"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5916\u952e\u68c0\u67e5\uff1a\u5982\u679c\u5f85\u63d2\u5165\u7684\u8bb0\u5f55\u5728\u7236\u8868\u4e2d\u53ef\u4ee5\u627e\u5230\uff0c\u4f1a\u5bf9\u7236\u8868\u7684\u8bb0\u5f55\u52a0 S \u578b Record Lock\u3002\u5982\u679c\u5f85\u63d2\u5165\u7684\u8bb0\u5f55\u5728\u7236\u8868\u4e2d\u627e\u4e0d\u5230"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9694\u79bb\u7ea7\u522b <= Read Committed\uff0c\u4e0d\u52a0\u9501"}),"\n",(0,i.jsx)(e.li,{children:"\u9694\u79bb\u7ea7\u522b >= Repeatable Read\uff0c\u52a0\u95f4\u9699\u9501"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u9501\u4f18\u5316",children:"\u9501\u4f18\u5316"}),"\n",(0,i.jsx)(e.h5,{id:"\u4f18\u5316\u9501",children:"\u4f18\u5316\u9501"}),"\n",(0,i.jsx)(e.p,{children:"InnoDB \u5b58\u50a8\u5f15\u64ce\u5b9e\u73b0\u4e86\u884c\u7ea7\u9501\u5b9a\uff0c\u867d\u7136\u5728\u9501\u5b9a\u673a\u5236\u7684\u5b9e\u73b0\u65b9\u9762\u5e26\u6765\u4e86\u6027\u80fd\u635f\u8017\u53ef\u80fd\u6bd4\u8868\u9501\u4f1a\u66f4\u9ad8\uff0c\u4f46\u662f\u5728\u6574\u4f53\u5e76\u53d1\u5904\u7406\u80fd\u529b\u65b9\u9762\u8981\u8fdc\u8fdc\u4f18\u4e8e MyISAM \u7684\u8868\u9501\uff0c\u5f53\u7cfb\u7edf\u5e76\u53d1\u91cf\u8f83\u9ad8\u7684\u65f6\u5019\uff0cInnoDB \u7684\u6574\u4f53\u6027\u80fd\u8fdc\u8fdc\u597d\u4e8e MyISAM"}),"\n",(0,i.jsx)(e.p,{children:"\u4f46\u662f\u4f7f\u7528\u4e0d\u5f53\u53ef\u80fd\u4f1a\u8ba9 InnoDB \u7684\u6574\u4f53\u6027\u80fd\u8868\u73b0\u4e0d\u4ec5\u4e0d\u80fd\u6bd4 MyISAM \u9ad8\uff0c\u751a\u81f3\u53ef\u80fd\u4f1a\u66f4\u5dee"}),"\n",(0,i.jsx)(e.p,{children:"\u4f18\u5316\u5efa\u8bae\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5c3d\u53ef\u80fd\u8ba9\u6240\u6709\u6570\u636e\u68c0\u7d22\u90fd\u80fd\u901a\u8fc7\u7d22\u5f15\u6765\u5b8c\u6210\uff0c\u907f\u514d\u65e0\u7d22\u5f15\u884c\u9501\u5347\u7ea7\u4e3a\u8868\u9501"}),"\n",(0,i.jsx)(e.li,{children:"\u5408\u7406\u8bbe\u8ba1\u7d22\u5f15\uff0c\u5c3d\u91cf\u7f29\u5c0f\u9501\u7684\u8303\u56f4"}),"\n",(0,i.jsx)(e.li,{children:"\u5c3d\u53ef\u80fd\u51cf\u5c11\u7d22\u5f15\u6761\u4ef6\u53ca\u7d22\u5f15\u8303\u56f4\uff0c\u907f\u514d\u95f4\u9699\u9501"}),"\n",(0,i.jsx)(e.li,{children:"\u5c3d\u91cf\u63a7\u5236\u4e8b\u52a1\u5927\u5c0f\uff0c\u51cf\u5c11\u9501\u5b9a\u8d44\u6e90\u91cf\u548c\u65f6\u95f4\u957f\u5ea6"}),"\n",(0,i.jsx)(e.li,{children:"\u5c3d\u53ef\u4f7f\u7528\u4f4e\u7ea7\u522b\u4e8b\u52a1\u9694\u79bb\uff08\u9700\u8981\u4e1a\u52a1\u5c42\u9762\u6ee1\u8db3\u9700\u6c42\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u9501\u5347\u7ea7",children:"\u9501\u5347\u7ea7"}),"\n",(0,i.jsxs)(e.p,{children:["\u7d22\u5f15\u5931\u6548\u9020\u6210",(0,i.jsx)(e.strong,{children:"\u884c\u9501\u5347\u7ea7\u4e3a\u8868\u9501"}),"\uff0c\u4e0d\u901a\u8fc7\u7d22\u5f15\u68c0\u7d22\u6570\u636e\uff0c\u5168\u5c40\u626b\u63cf\u7684\u8fc7\u7a0b\u4e2d InnoDB \u4f1a\u5c06\u5bf9\u8868\u4e2d\u7684\u6240\u6709\u8bb0\u5f55\u52a0\u9501\uff0c\u5b9e\u9645\u6548\u679c\u548c",(0,i.jsx)(e.strong,{children:"\u8868\u9501"}),"\u4e00\u6837\uff0c\u5b9e\u9645\u5f00\u53d1\u8fc7\u7a0b\u5e94\u907f\u514d\u51fa\u73b0\u7d22\u5f15\u5931\u6548\u7684\u72b6\u51b5"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u5f53\u524d\u8868\u7684\u7d22\u5f15\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW INDEX FROM test_innodb_lock;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5173\u95ed\u81ea\u52a8\u63d0\u4ea4\u529f\u80fd\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SET AUTOCOMMIT=0;\t-- C1\u3001C2\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u66f4\u65b0\u8bed\u53e5\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"UPDATE test_innodb_lock SET sex='2' WHERE name=10;\t-- C1\nUPDATE test_innodb_lock SET sex='2' WHERE id=3;\t\t-- C2\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-InnoDB \u9501\u5347\u7ea7.png)"}),"\n",(0,i.jsx)(e.p,{children:"\u7d22\u5f15\u5931\u6548\uff1a\u6267\u884c\u66f4\u65b0\u65f6 name \u5b57\u6bb5\u4e3a varchar \u7c7b\u578b\uff0c\u9020\u6210\u7d22\u5f15\u5931\u6548\uff0c\u6700\u7ec8\u884c\u9501\u53d8\u4e3a\u8868\u9501"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u6b7b\u9501",children:"\u6b7b\u9501"}),"\n",(0,i.jsx)(e.p,{children:"\u4e0d\u540c\u4e8b\u52a1\u7531\u4e8e\u4e92\u76f8\u6301\u6709\u5bf9\u65b9\u9700\u8981\u7684\u9501\u800c\u5bfc\u81f4\u4e8b\u52a1\u90fd\u65e0\u6cd5\u7ee7\u7eed\u6267\u884c\u7684\u60c5\u51b5\u79f0\u4e3a\u6b7b\u9501"}),"\n",(0,i.jsx)(e.p,{children:"\u6b7b\u9501\u60c5\u51b5\uff1a\u7ebf\u7a0b A \u4fee\u6539\u4e86 id = 1 \u7684\u6570\u636e\uff0c\u8bf7\u6c42\u4fee\u6539 id = 2 \u7684\u6570\u636e\uff0c\u7ebf\u7a0b B \u4fee\u6539\u4e86 id = 2 \u7684\u6570\u636e\uff0c\u8bf7\u6c42\u4fee\u6539 id = 1 \u7684\u6570\u636e\uff0c\u4ea7\u751f\u6b7b\u9501"}),"\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u7b56\u7565\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u76f4\u63a5\u8fdb\u5165\u7b49\u5f85\u76f4\u5230\u8d85\u65f6\uff0c\u8d85\u65f6\u65f6\u95f4\u53ef\u4ee5\u901a\u8fc7\u53c2\u6570 innodb_lock_wait_timeout \u6765\u8bbe\u7f6e\uff0c\u9ed8\u8ba4 50 \u79d2\uff0c\u4f46\u662f\u65f6\u95f4\u7684\u8bbe\u7f6e\u4e0d\u597d\u63a7\u5236\uff0c\u8d85\u65f6\u53ef\u80fd\u4e0d\u662f\u56e0\u4e3a\u6b7b\u9501\uff0c\u800c\u662f\u56e0\u4e3a\u4e8b\u52a1\u5904\u7406\u6bd4\u8f83\u6162\uff0c\u6240\u4ee5\u4e00\u822c\u4e0d\u91c7\u53d6\u8be5\u65b9\u5f0f"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u4e3b\u52a8\u6b7b\u9501\u68c0\u6d4b\uff0c\u53d1\u73b0\u6b7b\u9501\u540e",(0,i.jsx)(e.strong,{children:"\u4e3b\u52a8\u56de\u6eda\u6b7b\u9501\u94fe\u6761\u4e2d\u8f83\u5c0f\u7684\u4e00\u4e2a\u4e8b\u52a1"}),"\uff0c\u8ba9\u5176\u4ed6\u4e8b\u52a1\u5f97\u4ee5\u7ee7\u7eed\u6267\u884c\uff0c\u5c06\u53c2\u6570 ",(0,i.jsx)(e.code,{children:"innodb_deadlock_detect"})," \u8bbe\u7f6e\u4e3a on\uff0c\u8868\u793a\u5f00\u542f\u8be5\u529f\u80fd\uff08\u4e8b\u52a1\u8f83\u5c0f\u7684\u610f\u601d\u5c31\u662f\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d\u63d2\u5165\u3001\u5220\u9664\u3001\u66f4\u65b0\u7684\u8bb0\u5f55\u6761\u6570\uff09"]}),"\n",(0,i.jsx)(e.p,{children:"\u6b7b\u9501\u68c0\u6d4b\u5e76\u4e0d\u662f\u6bcf\u4e2a\u8bed\u53e5\u90fd\u8981\u68c0\u6d4b\uff0c\u53ea\u6709\u5728\u52a0\u9501\u8bbf\u95ee\u7684\u884c\u4e0a\u5df2\u7ecf\u6709\u9501\u65f6\uff0c\u5f53\u524d\u4e8b\u52a1\u88ab\u963b\u585e\u4e86\u624d\u4f1a\u68c0\u6d4b\uff0c\u4e5f\u662f\u4ece\u5f53\u524d\u4e8b\u52a1\u5f00\u59cb\u8fdb\u884c\u68c0\u6d4b"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u901a\u8fc7\u6267\u884c ",(0,i.jsx)(e.code,{children:"SHOW ENGINE INNODB STATUS"})," \u53ef\u4ee5\u67e5\u770b\u6700\u8fd1\u53d1\u751f\u7684\u4e00\u6b21\u6b7b\u5faa\u73af\uff0c\u5168\u5c40\u7cfb\u7edf\u53d8\u91cf ",(0,i.jsx)(e.code,{children:"innodb_print_all_deadlocks"})," \u8bbe\u7f6e\u4e3a on\uff0c\u5c31\u53ef\u4ee5\u5c06\u6bcf\u4e2a\u6b7b\u9501\u4fe1\u606f\u90fd\u8bb0\u5f55\u5728 MySQL \u9519\u8bef\u65e5\u5fd7\u4e2d"]}),"\n",(0,i.jsxs)(e.p,{children:["\u6b7b\u9501\u4e00\u822c\u662f\u884c\u7ea7\u9501\uff0c\u5f53\u8868\u9501\u53d1\u751f\u6b7b\u9501\u65f6\uff0c\u4f1a\u5728\u4e8b\u52a1\u4e2d\u8bbf\u95ee\u5176\u4ed6\u8868\u65f6",(0,i.jsx)(e.strong,{children:"\u76f4\u63a5\u62a5\u9519"}),"\uff0c\u7834\u574f\u4e86\u6301\u6709\u5e76\u7b49\u5f85\u7684\u6b7b\u9501\u6761\u4ef6"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u9501\u72b6\u6001-1",children:"\u9501\u72b6\u6001"}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u9501\u4fe1\u606f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW STATUS LIKE 'innodb_row_lock%';\n"})}),"\n",(0,i.jsx)(e.p,{children:"![](./images/MySQL-InnoDB \u9501\u4e89\u7528.png)"}),"\n",(0,i.jsx)(e.p,{children:"\u53c2\u6570\u8bf4\u660e\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Innodb_row_lock_current_waits\uff1a\u5f53\u524d\u6b63\u5728\u7b49\u5f85\u9501\u5b9a\u7684\u6570\u91cf"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Innodb_row_lock_time\uff1a\u4ece\u7cfb\u7edf\u542f\u52a8\u5230\u73b0\u5728\u9501\u5b9a\u603b\u65f6\u95f4\u957f\u5ea6"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Innodb_row_lock_time_avg\uff1a\u6bcf\u6b21\u7b49\u5f85\u6240\u82b1\u5e73\u5747\u65f6\u957f"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Innodb_row_lock_time_max\uff1a\u4ece\u7cfb\u7edf\u542f\u52a8\u5230\u73b0\u5728\u7b49\u5f85\u6700\u957f\u7684\u4e00\u6b21\u6240\u82b1\u7684\u65f6\u95f4"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Innodb_row_lock_waits\uff1a\u7cfb\u7edf\u542f\u52a8\u540e\u5230\u73b0\u5728\u603b\u5171\u7b49\u5f85\u7684\u6b21\u6570"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u7b49\u5f85\u7684\u6b21\u6570\u5f88\u9ad8\uff0c\u800c\u4e14\u6bcf\u6b21\u7b49\u5f85\u7684\u65f6\u957f\u4e5f\u4e0d\u77ed\u7684\u65f6\u5019\uff0c\u5c31\u9700\u8981\u5206\u6790\u7cfb\u7edf\u4e2d\u4e3a\u4ec0\u4e48\u4f1a\u6709\u5982\u6b64\u591a\u7684\u7b49\u5f85\uff0c\u7136\u540e\u6839\u636e\u5206\u6790\u7ed3\u679c\u5236\u5b9a\u4f18\u5316\u8ba1\u5212"}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u9501\u72b6\u6001\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM information_schema.innodb_locks;\t#\u9501\u7684\u6982\u51b5\nSHOW ENGINE INNODB STATUS\\G; #InnoDB\u6574\u4f53\u72b6\u6001\uff0c\u5176\u4e2d\u5305\u62ec\u9501\u7684\u60c5\u51b5\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(54323).A+"",width:"511",height:"136"})}),"\n",(0,i.jsx)(e.p,{children:"lock_id \u662f\u9501 id\uff1block_trx_id \u4e3a\u4e8b\u52a1 id\uff1block_mode \u4e3a X \u4ee3\u8868\u6392\u5b83\u9501\uff08\u5199\u9501\uff09\uff1block_type \u4e3a RECORD \u4ee3\u8868\u9501\u4e3a\u884c\u9501\uff08\u8bb0\u5f55\u9501\uff09"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u4e50\u89c2\u9501",children:"\u4e50\u89c2\u9501"}),"\n",(0,i.jsx)(e.p,{children:"\u60b2\u89c2\u9501\uff1a\u5728\u6574\u4e2a\u6570\u636e\u5904\u7406\u8fc7\u7a0b\u4e2d\uff0c\u5c06\u6570\u636e\u5904\u4e8e\u9501\u5b9a\u72b6\u6001\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u4e8b\u52a1\u7684\u9694\u79bb\u6027\uff0c\u5c31\u9700\u8981\u4e00\u81f4\u6027\u9501\u5b9a\u8bfb\u3002\u8bfb\u53d6\u6570\u636e\u65f6\u7ed9\u52a0\u9501\uff0c\u5176\u5b83\u4e8b\u52a1\u65e0\u6cd5\u4fee\u6539\u8fd9\u4e9b\u6570\u636e\uff0c\u4fee\u6539\u5220\u9664\u6570\u636e\u65f6\u4e5f\u52a0\u9501\uff0c\u5176\u5b83\u4e8b\u52a1\u540c\u6837\u65e0\u6cd5\u8bfb\u53d6\u8fd9\u4e9b\u6570\u636e"}),"\n",(0,i.jsx)(e.p,{children:"\u60b2\u89c2\u9501\u548c\u4e50\u89c2\u9501\u4f7f\u7528\u524d\u63d0\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5bf9\u4e8e\u8bfb\u7684\u64cd\u4f5c\u8fdc\u591a\u4e8e\u5199\u7684\u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u4e00\u4e2a\u66f4\u65b0\u64cd\u4f5c\u52a0\u9501\u4f1a\u963b\u585e\u6240\u6709\u7684\u8bfb\u53d6\u64cd\u4f5c\uff0c\u964d\u4f4e\u4e86\u541e\u5410\u91cf\uff0c\u6700\u540e\u9700\u8981\u91ca\u653e\u9501\uff0c\u9501\u662f\u9700\u8981\u4e00\u4e9b\u5f00\u9500\u7684\uff0c\u8fd9\u65f6\u5019\u53ef\u4ee5\u9009\u62e9\u4e50\u89c2\u9501"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u662f\u8bfb\u5199\u6bd4\u4f8b\u5dee\u8ddd\u4e0d\u662f\u975e\u5e38\u5927\u6216\u8005\u7cfb\u7edf\u6ca1\u6709\u54cd\u5e94\u4e0d\u53ca\u65f6\uff0c\u541e\u5410\u91cf\u74f6\u9888\u7684\u95ee\u9898\uff0c\u90a3\u5c31\u4e0d\u8981\u53bb\u4f7f\u7528\u4e50\u89c2\u9501\uff0c\u5b83\u589e\u52a0\u4e86\u590d\u6742\u5ea6\uff0c\u4e5f\u5e26\u6765\u4e86\u4e1a\u52a1\u989d\u5916\u7684\u98ce\u9669\uff0c\u8fd9\u65f6\u5019\u53ef\u4ee5\u9009\u62e9\u60b2\u89c2\u9501"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e50\u89c2\u9501\u7684\u5b9e\u73b0\u65b9\u5f0f\uff1a\u5c31\u662f CAS\uff0c\u6bd4\u8f83\u5e76\u4ea4\u6362"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7248\u672c\u53f7"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7ed9\u6570\u636e\u8868\u4e2d\u6dfb\u52a0\u4e00\u4e2a version \u5217\uff0c\u6bcf\u6b21\u66f4\u65b0\u540e\u90fd\u5c06\u8fd9\u4e2a\u5217\u7684\u503c\u52a0 1"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u5c06\u7248\u672c\u53f7\u8bfb\u53d6\u51fa\u6765\uff0c\u5728\u6267\u884c\u66f4\u65b0\u7684\u65f6\u5019\uff0c\u6bd4\u8f83\u7248\u672c\u53f7"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u76f8\u540c\u5219\u6267\u884c\u66f4\u65b0\uff0c\u5982\u679c\u4e0d\u76f8\u540c\uff0c\u8bf4\u660e\u6b64\u6761\u6570\u636e\u5df2\u7ecf\u53d1\u751f\u4e86\u53d8\u5316"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7528\u6237\u81ea\u884c\u6839\u636e\u8fd9\u4e2a\u901a\u77e5\u6765\u51b3\u5b9a\u600e\u4e48\u5904\u7406\uff0c\u6bd4\u5982\u91cd\u65b0\u5f00\u59cb\u4e00\u904d\uff0c\u6216\u8005\u653e\u5f03\u672c\u6b21\u66f4\u65b0"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u521b\u5efacity\u8868\nCREATE TABLE city(\n\tid INT PRIMARY KEY AUTO_INCREMENT,  -- \u57ce\u5e02id\n\tNAME VARCHAR(20),                   -- \u57ce\u5e02\u540d\u79f0\n\tVERSION INT                         -- \u7248\u672c\u53f7\n);\n\n-- \u6dfb\u52a0\u6570\u636e\nINSERT INTO city VALUES (NULL,'\u5317\u4eac',1),(NULL,'\u4e0a\u6d77',1),(NULL,'\u5e7f\u5dde',1),(NULL,'\u6df1\u5733',1);\n\n-- \u4fee\u6539\u5317\u4eac\u4e3a\u5317\u4eac\u5e02\n-- 1.\u67e5\u8be2\u5317\u4eac\u7684version\nSELECT VERSION FROM city WHERE NAME='\u5317\u4eac';\n-- 2.\u4fee\u6539\u5317\u4eac\u4e3a\u5317\u4eac\u5e02\uff0c\u7248\u672c\u53f7+1\u3002\u5e76\u5bf9\u6bd4\u7248\u672c\u53f7\nUPDATE city SET NAME='\u5317\u4eac\u5e02',VERSION=VERSION+1 WHERE NAME='\u5317\u4eac' AND VERSION=1;\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u65f6\u95f4\u6233"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u548c\u7248\u672c\u53f7\u65b9\u5f0f\u57fa\u672c\u4e00\u6837\uff0c\u7ed9\u6570\u636e\u8868\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u5217\uff0c\u540d\u79f0\u65e0\u6240\u8c13\uff0c\u6570\u636e\u7c7b\u578b\u9700\u8981\u662f ",(0,i.jsx)(e.strong,{children:"timestamp"})]}),"\n",(0,i.jsx)(e.li,{children:"\u6bcf\u6b21\u66f4\u65b0\u540e\u90fd\u5c06\u6700\u65b0\u65f6\u95f4\u63d2\u5165\u5230\u6b64\u5217"}),"\n",(0,i.jsx)(e.li,{children:"\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u5c06\u65f6\u95f4\u8bfb\u53d6\u51fa\u6765\uff0c\u5728\u6267\u884c\u66f4\u65b0\u7684\u65f6\u5019\uff0c\u6bd4\u8f83\u65f6\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u76f8\u540c\u5219\u6267\u884c\u66f4\u65b0\uff0c\u5982\u679c\u4e0d\u76f8\u540c\uff0c\u8bf4\u660e\u6b64\u6761\u6570\u636e\u5df2\u7ecf\u53d1\u751f\u4e86\u53d8\u5316"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u4e50\u89c2\u9501\u7684\u5f02\u5e38\u60c5\u51b5\uff1a\u5982\u679c version \u88ab\u5176\u4ed6\u4e8b\u52a1\u62a2\u5148\u66f4\u65b0\uff0c\u5219\u5728\u5f53\u524d\u4e8b\u52a1\u4e2d\u66f4\u65b0\u5931\u8d25\uff0ctrx_id \u6ca1\u6709\u53d8\u6210\u5f53\u524d\u4e8b\u52a1\u7684 ID\uff0c\u5f53\u524d\u4e8b\u52a1\u518d\u6b21\u67e5\u8be2\u8fd8\u662f\u65e7\u503c\uff0c\u5c31\u4f1a\u51fa\u73b0",(0,i.jsx)(e.strong,{children:"\u503c\u6ca1\u53d8\u4f46\u662f\u66f4\u65b0\u4e0d\u4e86"}),"\u7684\u73b0\u8c61\uff08anomaly\uff09"]}),"\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6848\uff1a\u6bcf\u6b21 CAS \u66f4\u65b0\u4e0d\u7ba1\u6210\u529f\u5931\u8d25\uff0c\u5c31\u7ed3\u675f\u5f53\u524d\u4e8b\u52a1\uff1b\u5982\u679c\u5931\u8d25\u5219\u91cd\u65b0\u8d77\u4e00\u4e2a\u4e8b\u52a1\u8fdb\u884c\u67e5\u8be2\u66f4\u65b0"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u4e3b\u4ece",children:"\u4e3b\u4ece"}),"\n",(0,i.jsx)(e.h3,{id:"\u57fa\u672c\u4ecb\u7ecd-9",children:"\u57fa\u672c\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u4ece\u590d\u5236\u662f\u6307\u5c06\u4e3b\u6570\u636e\u5e93\u7684 DDL \u548c DML \u64cd\u4f5c\u901a\u8fc7\u4e8c\u8fdb\u5236\u65e5\u5fd7\u4f20\u5230\u4ece\u5e93\u670d\u52a1\u5668\u4e2d\uff0c\u7136\u540e\u5728\u4ece\u5e93\u4e0a\u5bf9\u8fd9\u4e9b\u65e5\u5fd7\u91cd\u65b0\u6267\u884c\uff08\u4e5f\u53eb\u91cd\u505a\uff09\uff0c\u4ece\u800c\u4f7f\u5f97\u4ece\u5e93\u548c\u4e3b\u5e93\u7684\u6570\u636e\u4fdd\u6301\u540c\u6b65"}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u652f\u6301\u4e00\u53f0\u4e3b\u5e93\u540c\u65f6\u5411\u591a\u53f0\u4ece\u5e93\u8fdb\u884c\u590d\u5236\uff0c\u4ece\u5e93\u540c\u65f6\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u5176\u4ed6\u4ece\u670d\u52a1\u5668\u7684\u4e3b\u5e93\uff0c\u5b9e\u73b0\u94fe\u72b6\u590d\u5236"}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u590d\u5236\u7684\u4f18\u70b9\u4e3b\u8981\u5305\u542b\u4ee5\u4e0b\u4e09\u4e2a\u65b9\u9762\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e3b\u5e93\u51fa\u73b0\u95ee\u9898\uff0c\u53ef\u4ee5\u5feb\u901f\u5207\u6362\u5230\u4ece\u5e93\u63d0\u4f9b\u670d\u52a1"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u53ef\u4ee5\u5728\u4ece\u5e93\u4e0a\u6267\u884c\u67e5\u8be2\u64cd\u4f5c\uff0c\u4ece\u4e3b\u5e93\u4e2d\u66f4\u65b0\uff0c\u5b9e\u73b0\u8bfb\u5199\u5206\u79bb"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u53ef\u4ee5\u5728\u4ece\u5e93\u4e2d\u6267\u884c\u5907\u4efd\uff0c\u4ee5\u907f\u514d\u5907\u4efd\u671f\u95f4\u5f71\u54cd\u4e3b\u5e93\u7684\u670d\u52a1\uff08\u5907\u4efd\u65f6\u4f1a\u52a0\u5168\u5c40\u8bfb\u9501\uff09"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u4e3b\u4ece\u590d\u5236",children:"\u4e3b\u4ece\u590d\u5236"}),"\n",(0,i.jsx)(e.h4,{id:"\u4e3b\u4ece\u7ed3\u6784",children:"\u4e3b\u4ece\u7ed3\u6784"}),"\n",(0,i.jsxs)(e.p,{children:["MySQL \u7684\u4e3b\u4ece\u4e4b\u95f4\u7ef4\u6301\u4e86\u4e00\u4e2a",(0,i.jsx)(e.strong,{children:"\u957f\u8fde\u63a5"}),"\u3002\u4e3b\u5e93\u5185\u90e8\u6709\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u4e13\u95e8\u7528\u4e8e\u670d\u52a1\u4ece\u5e93\u7684\u957f\u8fde\u63a5\uff0c\u8fde\u63a5\u8fc7\u7a0b\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ece\u5e93\u6267\u884c change master \u547d\u4ee4\uff0c\u8bbe\u7f6e\u4e3b\u5e93\u7684 IP\u3001\u7aef\u53e3\u3001\u7528\u6237\u540d\u3001\u5bc6\u7801\u4ee5\u53ca\u8981\u4ece\u54ea\u4e2a\u4f4d\u7f6e\u5f00\u59cb\u8bf7\u6c42 binlog\uff0c\u8fd9\u4e2a\u4f4d\u7f6e\u5305\u542b\u6587\u4ef6\u540d\u548c\u65e5\u5fd7\u504f\u79fb\u91cf"}),"\n",(0,i.jsx)(e.li,{children:"\u4ece\u5e93\u6267\u884c start slave \u547d\u4ee4\uff0c\u8fd9\u65f6\u4ece\u5e93\u4f1a\u542f\u52a8\u4e24\u4e2a\u7ebf\u7a0b\uff0c\u5c31\u662f\u56fe\u4e2d\u7684 io_thread \u548c sql_thread\uff0c\u5176\u4e2d io_thread \u8d1f\u8d23\u4e0e\u4e3b\u5e93\u5efa\u7acb\u8fde\u63a5"}),"\n",(0,i.jsx)(e.li,{children:"\u4e3b\u5e93\u6821\u9a8c\u5b8c\u7528\u6237\u540d\u3001\u5bc6\u7801\u540e\uff0c\u5f00\u59cb\u6309\u7167\u4ece\u4f20\u8fc7\u6765\u7684\u4f4d\u7f6e\uff0c\u4ece\u672c\u5730\u8bfb\u53d6 binlog \u53d1\u7ed9\u4ece\u5e93\uff0c\u5f00\u59cb\u4e3b\u4ece\u590d\u5236"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u4ece\u590d\u5236\u539f\u7406\u56fe\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(43778).A+"",width:"506",height:"339"})}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u4ece\u590d\u5236\u4e3b\u8981\u4f9d\u8d56\u7684\u662f binlog\uff0cMySQL \u9ed8\u8ba4\u662f\u5f02\u6b65\u590d\u5236\uff0c\u9700\u8981\u4e09\u4e2a\u7ebf\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"binlog thread\uff1a\u5728\u4e3b\u5e93\u4e8b\u52a1\u63d0\u4ea4\u65f6\uff0c\u628a\u6570\u636e\u53d8\u66f4\u8bb0\u5f55\u5728\u65e5\u5fd7\u6587\u4ef6 binlog \u4e2d\uff0c\u5e76\u901a\u77e5 slave \u6709\u6570\u636e\u66f4\u65b0"}),"\n",(0,i.jsxs)(e.li,{children:["I/O thread\uff1a\u8d1f\u8d23\u4ece\u4e3b\u670d\u52a1\u5668\u4e0a",(0,i.jsx)(e.strong,{children:"\u62c9\u53d6\u4e8c\u8fdb\u5236\u65e5\u5fd7"}),"\uff0c\u5e76\u5c06 binlog \u65e5\u5fd7\u5185\u5bb9\u4f9d\u6b21\u5199\u5230 relay log \u4e2d\u8f6c\u65e5\u5fd7\u7684\u6700\u672b\u7aef\uff0c\u5e76\u5c06\u65b0\u7684 binlog \u6587\u4ef6\u540d\u548c offset \u8bb0\u5f55\u5230 master-info \u6587\u4ef6\u4e2d\uff0c\u4ee5\u4fbf\u4e0b\u4e00\u6b21\u8bfb\u53d6\u65e5\u5fd7\u65f6\u4ece\u6307\u5b9a binlog \u65e5\u5fd7\u6587\u4ef6\u53ca\u4f4d\u7f6e\u5f00\u59cb\u8bfb\u53d6\u65b0\u7684 binlog \u65e5\u5fd7\u5185\u5bb9"]}),"\n",(0,i.jsx)(e.li,{children:"SQL thread\uff1a\u76d1\u6d4b\u672c\u5730 relay log \u4e2d\u65b0\u589e\u4e86\u65e5\u5fd7\u5185\u5bb9\uff0c\u8bfb\u53d6\u4e2d\u7ee7\u65e5\u5fd7\u5e76\u91cd\u505a\u5176\u4e2d\u7684 SQL \u8bed\u53e5\uff0c\u4ece\u5e93\u5728 relay-log.info \u4e2d\u8bb0\u5f55\u5f53\u524d\u5e94\u7528\u4e2d\u7ee7\u65e5\u5fd7\u7684\u6587\u4ef6\u540d\u548c\u4f4d\u70b9\u4ee5\u4fbf\u4e0b\u4e00\u6b21\u6267\u884c"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u540c\u6b65\u4e0e\u5f02\u6b65\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5f02\u6b65\u590d\u5236\u6709\u6570\u636e\u4e22\u5931\u98ce\u9669\uff0c\u4f8b\u5982\u6570\u636e\u8fd8\u672a\u540c\u6b65\u5230\u4ece\u5e93\uff0c\u4e3b\u5e93\u5c31\u7ed9\u5ba2\u6237\u7aef\u54cd\u5e94\uff0c\u7136\u540e\u4e3b\u5e93\u6302\u4e86\uff0c\u6b64\u65f6\u4ece\u5e93\u664b\u5347\u4e3a\u4e3b\u5e93\u7684\u8bdd\u6570\u636e\u662f\u7f3a\u5931\u7684"}),"\n",(0,i.jsx)(e.li,{children:"\u540c\u6b65\u590d\u5236\uff0c\u4e3b\u5e93\u9700\u8981\u5c06 binlog \u590d\u5236\u5230\u6240\u6709\u4ece\u5e93\uff0c\u7b49\u6240\u6709\u4ece\u5e93\u54cd\u5e94\u4e86\u4e4b\u540e\u4e3b\u5e93\u624d\u8fdb\u884c\u5176\u4ed6\u903b\u8f91\uff0c\u8fd9\u6837\u7684\u8bdd\u6027\u80fd\u5f88\u5dee\uff0c\u4e00\u822c\u4e0d\u4f1a\u9009\u62e9"}),"\n",(0,i.jsx)(e.li,{children:"MySQL 5.7 \u4e4b\u540e\u51fa\u73b0\u4e86\u534a\u540c\u6b65\u590d\u5236\uff0c\u6709\u53c2\u6570\u53ef\u4ee5\u9009\u62e9\u6210\u529f\u540c\u6b65\u51e0\u4e2a\u4ece\u5e93\u5c31\u8fd4\u56de\u54cd\u5e94"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u4e3b\u4e3b\u7ed3\u6784",children:"\u4e3b\u4e3b\u7ed3\u6784"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u4e3b\u7ed3\u6784\u5c31\u662f\u4e24\u4e2a\u6570\u636e\u5e93\u4e4b\u95f4\u603b\u662f\u4e92\u4e3a\u4e3b\u4ece\u5173\u7cfb\uff0c\u8fd9\u6837\u5728\u5207\u6362\u7684\u65f6\u5019\u5c31\u4e0d\u7528\u518d\u4fee\u6539\u4e3b\u4ece\u5173\u7cfb"}),"\n",(0,i.jsx)(e.p,{children:"\u5faa\u73af\u590d\u5236\uff1a\u5728\u5e93 A \u4e0a\u66f4\u65b0\u4e86\u4e00\u6761\u8bed\u53e5\uff0c\u7136\u540e\u628a\u751f\u6210\u7684 binlog \u53d1\u7ed9\u5e93 B\uff0c\u5e93 B \u6267\u884c\u5b8c\u8fd9\u6761\u66f4\u65b0\u8bed\u53e5\u540e\u4e5f\u4f1a\u751f\u6210 binlog\uff0c\u4f1a\u518d\u53d1\u7ed9 A"}),"\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6cd5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e24\u4e2a\u5e93\u7684 server id \u5fc5\u987b\u4e0d\u540c\uff0c\u5982\u679c\u76f8\u540c\u5219\u5b83\u4eec\u4e4b\u95f4\u4e0d\u80fd\u8bbe\u5b9a\u4e3a\u4e3b\u4e3b\u5173\u7cfb"}),"\n",(0,i.jsx)(e.li,{children:"\u4e00\u4e2a\u5e93\u63a5\u5230 binlog \u5e76\u5728\u91cd\u653e\u7684\u8fc7\u7a0b\u4e2d\uff0c\u751f\u6210\u4e0e\u539f binlog \u7684 server id \u76f8\u540c\u7684\u65b0\u7684 binlog"}),"\n",(0,i.jsx)(e.li,{children:"\u6bcf\u4e2a\u5e93\u5728\u6536\u5230\u4ece\u4e3b\u5e93\u53d1\u8fc7\u6765\u7684\u65e5\u5fd7\u540e\uff0c\u5148\u5224\u65ad server id\uff0c\u5982\u679c\u8ddf\u81ea\u5df1\u7684\u76f8\u540c\uff0c\u8868\u793a\u8fd9\u4e2a\u65e5\u5fd7\u662f\u81ea\u5df1\u751f\u6210\u7684\uff0c\u5c31\u76f4\u63a5\u4e22\u5f03\u8fd9\u4e2a\u65e5\u5fd7"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u4e3b\u4ece\u5ef6\u8fdf",children:"\u4e3b\u4ece\u5ef6\u8fdf"}),"\n",(0,i.jsx)(e.h4,{id:"\u5ef6\u8fdf\u539f\u56e0",children:"\u5ef6\u8fdf\u539f\u56e0"}),"\n",(0,i.jsx)(e.p,{children:"\u6b63\u5e38\u60c5\u51b5\u4e3b\u5e93\u6267\u884c\u66f4\u65b0\u751f\u6210\u7684\u6240\u6709 binlog\uff0c\u90fd\u53ef\u4ee5\u4f20\u5230\u4ece\u5e93\u5e76\u88ab\u6b63\u786e\u5730\u6267\u884c\uff0c\u4ece\u5e93\u5c31\u80fd\u8fbe\u5230\u8ddf\u4e3b\u5e93\u4e00\u81f4\u7684\u72b6\u6001\uff0c\u8fd9\u5c31\u662f\u6700\u7ec8\u4e00\u81f4\u6027"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u4ece\u5ef6\u8fdf\u662f\u4e3b\u4ece\u4e4b\u95f4\u662f\u5b58\u5728\u4e00\u5b9a\u65f6\u95f4\u7684\u6570\u636e\u4e0d\u4e00\u81f4\uff0c\u5c31\u662f\u540c\u4e00\u4e2a\u4e8b\u52a1\u5728\u4ece\u5e93\u6267\u884c\u5b8c\u6210\u7684\u65f6\u95f4\u548c\u4e3b\u5e93\u6267\u884c\u5b8c\u6210\u7684\u65f6\u95f4\u7684\u5dee\u503c\uff0c\u5373 T2-T1"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e3b\u5e93 A \u6267\u884c\u5b8c\u6210\u4e00\u4e2a\u4e8b\u52a1\uff0c\u5199\u5165 binlog\uff0c\u8be5\u65f6\u523b\u8bb0\u4e3a T1"}),"\n",(0,i.jsx)(e.li,{children:"\u65e5\u5fd7\u4f20\u7ed9\u4ece\u5e93 B\uff0c\u4ece\u5e93 B \u6267\u884c\u5b8c\u8fd9\u4e2a\u4e8b\u52a1\uff0c\u8be5\u65f6\u523b\u8bb0\u4e3a T2"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u901a\u8fc7\u5728\u4ece\u5e93\u6267\u884c ",(0,i.jsx)(e.code,{children:"show slave status"})," \u547d\u4ee4\uff0c\u8fd4\u56de\u7ed3\u679c\u4f1a\u663e\u793a seconds_behind_master \u8868\u793a\u5f53\u524d\u4ece\u5e93\u5ef6\u8fdf\u4e86\u591a\u5c11\u79d2"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6bcf\u4e00\u4e2a\u4e8b\u52a1\u7684 binlog \u90fd\u6709\u4e00\u4e2a\u65f6\u95f4\u5b57\u6bb5\uff0c\u7528\u4e8e\u8bb0\u5f55\u4e3b\u5e93\u4e0a\u5199\u5165\u7684\u65f6\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"\u4ece\u5e93\u53d6\u51fa\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u4e8b\u52a1\u7684\u65f6\u95f4\u5b57\u6bb5\uff0c\u8ddf\u7cfb\u7edf\u7684\u65f6\u95f4\u8fdb\u884c\u76f8\u51cf\uff0c\u5f97\u5230\u7684\u5c31\u662f seconds_behind_master"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u4ece\u5ef6\u8fdf\u7684\u539f\u56e0\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ece\u5e93\u7684\u673a\u5668\u6027\u80fd\u6bd4\u4e3b\u5e93\u7684\u5dee\uff0c\u5bfc\u81f4\u4ece\u5e93\u7684\u590d\u5236\u80fd\u529b\u5f31"}),"\n",(0,i.jsx)(e.li,{children:"\u4ece\u5e93\u7684\u67e5\u8be2\u538b\u529b\u5927\uff0c\u5efa\u7acb\u4e00\u4e3b\u591a\u4ece\u7684\u7ed3\u6784"}),"\n",(0,i.jsx)(e.li,{children:"\u5927\u4e8b\u52a1\u7684\u6267\u884c\uff0c\u4e3b\u5e93\u5fc5\u987b\u8981\u7b49\u5230\u4e8b\u52a1\u5b8c\u6210\u4e4b\u540e\u624d\u4f1a\u5199\u5165 binlog\uff0c\u5bfc\u81f4\u4ece\u8282\u70b9\u51fa\u73b0\u5e94\u7528 binlog \u5ef6\u8fdf"}),"\n",(0,i.jsx)(e.li,{children:"\u4e3b\u5e93\u7684 DDL\uff0c\u4ece\u5e93\u4e0e\u4e3b\u5e93\u7684 DDL \u540c\u6b65\u662f\u4e32\u884c\u8fdb\u884c\uff0cDDL \u5728\u4e3b\u5e93\u6267\u884c\u65f6\u95f4\u5f88\u957f\uff0c\u90a3\u4e48\u4ece\u5e93\u4e5f\u4f1a\u6d88\u8017\u540c\u6837\u7684\u65f6\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"\u9501\u51b2\u7a81\u95ee\u9898\u4e5f\u53ef\u80fd\u5bfc\u81f4\u4ece\u8282\u70b9\u7684 SQL \u7ebf\u7a0b\u6267\u884c\u6162"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u4e3b\u4ece\u540c\u6b65\u95ee\u9898\u6c38\u8fdc\u90fd\u662f",(0,i.jsx)(e.strong,{children:"\u4e00\u81f4\u6027\u548c\u6027\u80fd\u7684\u6743\u8861"}),"\uff0c\u9700\u8981\u6839\u636e\u5b9e\u9645\u7684\u5e94\u7528\u573a\u666f\uff0c\u53ef\u4ee5\u91c7\u53d6\u4e0b\u9762\u7684\u529e\u6cd5\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f18\u5316 SQL\uff0c\u907f\u514d\u6162 SQL\uff0c\u51cf\u5c11\u6279\u91cf\u64cd\u4f5c"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u964d\u4f4e\u591a\u7ebf\u7a0b\u5927\u4e8b\u52a1\u5e76\u53d1\u7684\u6982\u7387\uff0c\u4f18\u5316\u4e1a\u52a1\u903b\u8f91"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u4e1a\u52a1\u4e2d\u5927\u591a\u6570\u60c5\u51b5\u67e5\u8be2\u64cd\u4f5c\u8981\u6bd4\u66f4\u65b0\u64cd\u4f5c\u66f4\u591a\uff0c\u642d\u5efa",(0,i.jsx)(e.strong,{children:"\u4e00\u4e3b\u591a\u4ece"}),"\u7ed3\u6784\uff0c\u8ba9\u8fd9\u4e9b\u4ece\u5e93\u6765\u5206\u62c5\u8bfb\u7684\u538b\u529b"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5c3d\u91cf\u91c7\u7528\u77ed\u7684\u94fe\u8def\uff0c\u4e3b\u5e93\u548c\u4ece\u5e93\u670d\u52a1\u5668\u7684\u8ddd\u79bb\u5c3d\u91cf\u8981\u77ed\uff0c\u63d0\u5347\u7aef\u53e3\u5e26\u5bbd\uff0c\u51cf\u5c11 binlog \u4f20\u8f93\u7684\u7f51\u7edc\u5ef6\u65f6"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b9e\u65f6\u6027\u8981\u6c42\u9ad8\u7684\u4e1a\u52a1\u8bfb\u5f3a\u5236\u8d70\u4e3b\u5e93\uff0c\u4ece\u5e93\u53ea\u505a\u5907\u4efd"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5e76\u884c\u590d\u5236",children:"\u5e76\u884c\u590d\u5236"}),"\n",(0,i.jsx)(e.h5,{id:"mysql56",children:"MySQL5.6"}),"\n",(0,i.jsx)(e.p,{children:"\u9ad8\u5e76\u53d1\u60c5\u51b5\u4e0b\uff0c\u4e3b\u5e93\u7684\u4f1a\u4ea7\u751f\u5927\u91cf\u7684 binlog\uff0c\u5728\u4ece\u5e93\u4e2d\u6709\u4e24\u4e2a\u7ebf\u7a0b IO Thread \u548c SQL Thread \u5355\u7ebf\u7a0b\u6267\u884c\uff0c\u4f1a\u5bfc\u81f4\u4e3b\u5e93\u5ef6\u8fdf\u53d8\u5927\u3002\u4e3a\u4e86\u6539\u5584\u590d\u5236\u5ef6\u8fdf\u95ee\u9898\uff0cMySQL 5.6 \u7248\u672c\u589e\u52a0\u4e86\u5e76\u884c\u590d\u5236\u529f\u80fd\uff0c\u4ee5\u91c7\u7528\u591a\u7ebf\u7a0b\u673a\u5236\u6765\u4fc3\u8fdb\u6267\u884c"}),"\n",(0,i.jsxs)(e.p,{children:["coordinator \u5c31\u662f\u539f\u6765\u7684 SQL Thread\uff0c\u5e76\u884c\u590d\u5236\u4e2d\u5b83\u4e0d\u518d\u76f4\u63a5\u66f4\u65b0\u6570\u636e\uff0c",(0,i.jsx)(e.strong,{children:"\u53ea\u8d1f\u8d23\u8bfb\u53d6\u4e2d\u8f6c\u65e5\u5fd7\u548c\u5206\u53d1\u4e8b\u52a1"}),"\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7ebf\u7a0b\u5206\u914d\u5b8c\u6210\u5e76\u4e0d\u662f\u7acb\u5373\u6267\u884c\uff0c\u4e3a\u4e86\u9632\u6b62\u9020\u6210\u66f4\u65b0\u8986\u76d6\uff0c\u66f4\u65b0\u540c\u4e00 DB \u7684\u4e24\u4e2a\u4e8b\u52a1\u5fc5\u987b\u88ab\u5206\u53d1\u5230\u540c\u4e00\u4e2a\u5de5\u4f5c\u7ebf\u7a0b"}),"\n",(0,i.jsx)(e.li,{children:"\u540c\u4e00\u4e2a\u4e8b\u52a1\u4e0d\u80fd\u88ab\u62c6\u5f00\uff0c\u5fc5\u987b\u653e\u5230\u540c\u4e00\u4e2a\u5de5\u4f5c\u7ebf\u7a0b"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"MySQL 5.6 \u7248\u672c\u7684\u7b56\u7565\uff1a\u6bcf\u4e2a\u7ebf\u7a0b\u5bf9\u5e94\u4e00\u4e2a hash \u8868\uff0c\u7528\u4e8e\u4fdd\u5b58\u5f53\u524d\u8fd9\u4e2a\u7ebf\u7a0b\u7684\u6267\u884c\u961f\u5217\u91cc\u7684\u4e8b\u52a1\u6240\u6d89\u53ca\u7684\u8868\uff0chash \u8868\u7684 key \u662f\u6570\u636e\u5e93\u540d\uff0cvalue \u662f\u4e00\u4e2a\u6570\u5b57\uff0c\u8868\u793a\u961f\u5217\u4e2d\u6709\u591a\u5c11\u4e2a\u4e8b\u52a1\u4fee\u6539\u8fd9\u4e2a\u5e93\uff0c\u9002\u7528\u4e8e\u4e3b\u5e93\u4e0a\u6709\u591a\u4e2a DB \u7684\u60c5\u51b5"}),"\n",(0,i.jsxs)(e.p,{children:["\u6bcf\u4e2a\u4e8b\u52a1\u5728\u5206\u53d1\u7684\u65f6\u5019\uff0c\u8ddf\u7ebf\u7a0b\u7684",(0,i.jsx)(e.strong,{children:"\u51b2\u7a81"}),"\uff08\u4e8b\u52a1\u64cd\u4f5c\u7684\u662f\u540c\u4e00\u4e2a\u5e93\uff09\u5173\u7cfb\u5305\u62ec\u4ee5\u4e0b\u4e09\u79cd\u60c5\u51b5\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u8ddf\u6240\u6709\u7ebf\u7a0b\u90fd\u4e0d\u51b2\u7a81\uff0ccoordinator \u7ebf\u7a0b\u5c31\u4f1a\u628a\u8fd9\u4e2a\u4e8b\u52a1\u5206\u914d\u7ed9\u6700\u7a7a\u95f2\u7684\u7ebf\u7a0b"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u53ea\u8ddf\u4e00\u4e2a\u7ebf\u7a0b\u51b2\u7a81\uff0ccoordinator \u7ebf\u7a0b\u5c31\u4f1a\u628a\u8fd9\u4e2a\u4e8b\u52a1\u5206\u914d\u7ed9\u8fd9\u4e2a\u5b58\u5728\u51b2\u7a81\u5173\u7cfb\u7684\u7ebf\u7a0b"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u8ddf\u591a\u4e8e\u4e00\u4e2a\u7ebf\u7a0b\u51b2\u7a81\uff0ccoordinator \u7ebf\u7a0b\u5c31\u8fdb\u5165\u7b49\u5f85\u72b6\u6001\uff0c\u76f4\u5230\u548c\u8fd9\u4e2a\u4e8b\u52a1\u5b58\u5728\u51b2\u7a81\u5173\u7cfb\u7684\u7ebf\u7a0b\u53ea\u5269\u4e0b 1 \u4e2a"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4f18\u7f3a\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6784\u9020 hash \u503c\u7684\u65f6\u5019\u5f88\u5feb\uff0c\u53ea\u9700\u8981\u5e93\u540d\uff0c\u800c\u4e14\u4e00\u4e2a\u5b9e\u4f8b\u4e0a DB \u6570\u4e5f\u4e0d\u4f1a\u5f88\u591a\uff0c\u4e0d\u4f1a\u51fa\u73b0\u9700\u8981\u6784\u9020\u5f88\u591a\u9879\u7684\u60c5\u51b5"}),"\n",(0,i.jsx)(e.li,{children:"\u4e0d\u8981\u6c42 binlog \u7684\u683c\u5f0f\uff0cstatement \u683c\u5f0f\u7684 binlog \u4e5f\u53ef\u4ee5\u5f88\u5bb9\u6613\u62ff\u5230\u5e93\u540d\uff08\u65e5\u5fd7\u7ae0\u8282\u8be6\u89e3\u4e86 binlog\uff09"}),"\n",(0,i.jsxs)(e.li,{children:["\u4e3b\u5e93\u4e0a\u7684\u8868\u90fd\u653e\u5728\u540c\u4e00\u4e2a DB \u91cc\u9762\uff0c\u8fd9\u4e2a\u7b56\u7565\u5c31\u6ca1\u6709\u6548\u679c\u4e86\uff1b\u6216\u8005\u4e0d\u540c DB \u7684\u70ed\u70b9\u4e0d\u540c\uff0c\u6bd4\u5982\u4e00\u4e2a\u662f\u4e1a\u52a1\u903b\u8f91\u5e93\uff0c\u4e00\u4e2a\u662f\u7cfb\u7edf\u914d\u7f6e\u5e93\uff0c\u90a3\u4e5f\u8d77\u4e0d\u5230\u5e76\u884c\u7684\u6548\u679c\uff0c\u9700\u8981",(0,i.jsx)(e.strong,{children:"\u628a\u76f8\u540c\u70ed\u5ea6\u7684\u8868\u5747\u5300\u5206\u5230\u8fd9\u4e9b\u4e0d\u540c\u7684 DB \u4e2d"}),"\uff0c\u624d\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u7b56\u7565"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"mysql57",children:"MySQL5.7"}),"\n",(0,i.jsx)(e.p,{children:"MySQL 5.7 \u7531\u53c2\u6570 slave-parallel-type \u6765\u63a7\u5236\u5e76\u884c\u590d\u5236\u7b56\u7565\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u914d\u7f6e\u4e3a DATABASE\uff0c\u8868\u793a\u4f7f\u7528 MySQL 5.6 \u7248\u672c\u7684",(0,i.jsx)(e.strong,{children:"\u6309\u5e93\uff08DB\uff09\u5e76\u884c\u7b56\u7565"})]}),"\n",(0,i.jsxs)(e.li,{children:["\u914d\u7f6e\u4e3a LOGICAL_CLOCK\uff0c\u8868\u793a\u7684",(0,i.jsx)(e.strong,{children:"\u6309\u63d0\u4ea4\u72b6\u6001\u5e76\u884c"}),"\u6267\u884c"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6309\u63d0\u4ea4\u72b6\u6001\u5e76\u884c\u590d\u5236\u7b56\u7565\u7684\u601d\u60f3\u662f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6240\u6709\u5904\u4e8e commit \u72b6\u6001\u7684\u4e8b\u52a1\u53ef\u4ee5\u5e76\u884c\u6267\u884c\uff1b\u540c\u65f6\u5904\u4e8e prepare \u72b6\u6001\u7684\u4e8b\u52a1\uff0c\u5728\u4ece\u5e93\u6267\u884c\u65f6\u662f\u53ef\u4ee5\u5e76\u884c\u7684"}),"\n",(0,i.jsx)(e.li,{children:"\u5904\u4e8e prepare \u72b6\u6001\u7684\u4e8b\u52a1\uff0c\u4e0e\u5904\u4e8e commit \u72b6\u6001\u7684\u4e8b\u52a1\u4e4b\u95f4\uff0c\u5728\u4ece\u5e93\u6267\u884c\u65f6\u4e5f\u662f\u53ef\u4ee5\u5e76\u884c\u7684"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"MySQL 5.7.22 \u7248\u672c\u91cc\uff0cMySQL \u589e\u52a0\u4e86\u4e00\u4e2a\u65b0\u7684\u5e76\u884c\u590d\u5236\u7b56\u7565\uff0c\u57fa\u4e8e WRITESET \u7684\u5e76\u884c\u590d\u5236\uff0c\u65b0\u589e\u4e86\u4e00\u4e2a\u53c2\u6570 binlog-transaction-dependency-tracking\uff0c\u7528\u6765\u63a7\u5236\u662f\u5426\u542f\u7528\u8fd9\u4e2a\u65b0\u7b56\u7565\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"COMMIT_ORDER\uff1a\u8868\u793a\u6839\u636e\u540c\u65f6\u8fdb\u5165 prepare \u548c commit \u6765\u5224\u65ad\u662f\u5426\u53ef\u4ee5\u5e76\u884c\u7684\u7b56\u7565"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["WRITESET\uff1a\u8868\u793a\u7684\u662f\u5bf9\u4e8e\u6bcf\u4e2a\u4e8b\u52a1\u6d89\u53ca\u66f4\u65b0\u7684\u6bcf\u4e00\u884c\uff0c\u8ba1\u7b97\u51fa\u8fd9\u4e00\u884c\u7684 hash \u503c\uff0c\u7ec4\u6210\u8be5\u4e8b\u52a1\u7684 writeset \u96c6\u5408\uff0c\u5982\u679c\u4e24\u4e2a\u4e8b\u52a1\u6ca1\u6709\u64cd\u4f5c\u76f8\u540c\u7684\u884c\uff0c\u4e5f\u5c31\u662f\u8bf4\u5b83\u4eec\u7684 writeset \u6ca1\u6709\u4ea4\u96c6\uff0c\u5c31\u53ef\u4ee5\u5e76\u884c\uff08",(0,i.jsx)(e.strong,{children:"\u6309\u884c\u5e76\u884c"}),"\uff09"]}),"\n",(0,i.jsxs)(e.p,{children:["\u4e3a\u4e86\u552f\u4e00\u6807\u8bc6\uff0c\u8fd9\u4e2a hash \u8868\u7684\u503c\u662f\u901a\u8fc7 ",(0,i.jsx)(e.code,{children:"\u5e93\u540d + \u8868\u540d + \u7d22\u5f15\u540d + \u503c"}),"\uff08\u8868\u793a\u7684\u662f\u67d0\u4e00\u884c\uff09\u8ba1\u7b97\u51fa\u6765\u7684"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"WRITESET_SESSION\uff1a\u662f\u5728 WRITESET \u7684\u57fa\u7840\u4e0a\u591a\u4e86\u4e00\u4e2a\u7ea6\u675f\uff0c\u5373\u5728\u4e3b\u5e93\u4e0a\u540c\u4e00\u4e2a\u7ebf\u7a0b\u5148\u540e\u6267\u884c\u7684\u4e24\u4e2a\u4e8b\u52a1\uff0c\u5728\u5907\u5e93\u6267\u884c\u7684\u65f6\u5019\uff0c\u8981\u4fdd\u8bc1\u76f8\u540c\u7684\u5148\u540e\u987a\u5e8f"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"MySQL 5.7.22 \u6309\u884c\u5e76\u53d1\u7684\u4f18\u52bf\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"writeset \u662f\u5728\u4e3b\u5e93\u751f\u6210\u540e\u76f4\u63a5\u5199\u5165\u5230 binlog \u91cc\u9762\u7684\uff0c\u8fd9\u6837\u5728\u5907\u5e93\u6267\u884c\u7684\u65f6\u5019\uff0c\u4e0d\u9700\u8981\u89e3\u6790 binlog \u5185\u5bb9\uff0c\u8282\u7701\u4e86\u8ba1\u7b97\u91cf"}),"\n",(0,i.jsx)(e.li,{children:"\u4e0d\u9700\u8981\u628a\u6574\u4e2a\u4e8b\u52a1\u7684 binlog \u90fd\u626b\u4e00\u904d\u624d\u80fd\u51b3\u5b9a\u5206\u53d1\u5230\u54ea\u4e2a\u7ebf\u7a0b\uff0c\u66f4\u7701\u5185\u5b58"}),"\n",(0,i.jsx)(e.li,{children:"\u4ece\u5e93\u7684\u5206\u53d1\u7b56\u7565\u4e0d\u4f9d\u8d56\u4e8e binlog \u5185\u5bb9\uff0c\u6240\u4ee5 binlog \u662f statement \u683c\u5f0f\u4e5f\u53ef\u4ee5\uff0c\u66f4\u8282\u7ea6\u5185\u5b58\uff08\u56e0\u4e3a row \u624d\u8bb0\u5f55\u66f4\u6539\u7684\u884c\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"MySQL 5.7.22 \u7684\u5e76\u884c\u590d\u5236\u7b56\u7565\u5728\u901a\u7528\u6027\u4e0a\u662f\u6709\u4fdd\u8bc1\u7684\uff0c\u4f46\u662f\u5bf9\u4e8e\u8868\u4e0a\u6ca1\u4e3b\u952e\u3001\u552f\u4e00\u548c\u5916\u952e\u7ea6\u675f\u7684\u573a\u666f\uff0cWRITESET \u7b56\u7565\u4e5f\u662f\u6ca1\u6cd5\u5e76\u884c\u7684\uff0c\u4e5f\u4f1a\u6682\u65f6\u9000\u5316\u4e3a\u5355\u7ebf\u7a0b\u6a21\u578b"}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://time.geekbang.org/column/article/77083",children:"https://time.geekbang.org/column/article/77083"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u8bfb\u5199\u5206\u79bb",children:"\u8bfb\u5199\u5206\u79bb"}),"\n",(0,i.jsx)(e.h4,{id:"\u8bfb\u5199\u5ef6\u8fdf",children:"\u8bfb\u5199\u5ef6\u8fdf"}),"\n",(0,i.jsx)(e.p,{children:"\u8bfb\u5199\u5206\u79bb\uff1a\u53ef\u4ee5\u964d\u4f4e\u4e3b\u5e93\u7684\u8bbf\u95ee\u538b\u529b\uff0c\u63d0\u9ad8\u7cfb\u7edf\u7684\u5e76\u53d1\u80fd\u529b"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e3b\u5e93\u4e0d\u5efa\u67e5\u8be2\u7684\u7d22\u5f15\uff0c\u4ece\u5e93\u5efa\u67e5\u8be2\u7684\u7d22\u5f15\u3002\u56e0\u4e3a\u7d22\u5f15\u9700\u8981\u7ef4\u62a4\u7684\uff0c\u6bd4\u5982\u63d2\u5165\u4e00\u6761\u6570\u636e\uff0c\u4e0d\u4ec5\u8981\u5728\u805a\u7c07\u7d22\u5f15\u4e0a\u9762\u63d2\u5165\uff0c\u5bf9\u5e94\u7684\u4e8c\u7ea7\u7d22\u5f15\u4e5f\u5f97\u63d2\u5165"}),"\n",(0,i.jsx)(e.li,{children:"\u5c06\u8bfb\u64cd\u4f5c\u5206\u5230\u4ece\u5e93\u4e86\u4e4b\u540e\uff0c\u53ef\u4ee5\u5728\u4e3b\u5e93\u628a\u67e5\u8be2\u8981\u7528\u7684\u7d22\u5f15\u5220\u4e86\uff0c\u51cf\u5c11\u5199\u64cd\u4f5c\u5bf9\u4e3b\u5e93\u7684\u5f71\u54cd"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8bfb\u5199\u5206\u79bb\u4ea7\u751f\u4e86\u8bfb\u5199\u5ef6\u8fdf\uff0c\u9020\u6210\u6570\u636e\u7684\u4e0d\u4e00\u81f4\u6027\u3002\u5047\u5982\u5ba2\u6237\u7aef\u6267\u884c\u5b8c\u4e00\u4e2a\u66f4\u65b0\u4e8b\u52a1\u540e\u9a6c\u4e0a\u53d1\u8d77\u67e5\u8be2\uff0c\u5982\u679c\u67e5\u8be2\u9009\u62e9\u7684\u662f\u4ece\u5e93\u7684\u8bdd\uff0c\u53ef\u80fd\u8bfb\u5230\u7684\u8fd8\u662f\u4ee5\u524d\u7684\u6570\u636e\uff0c\u53eb\u8fc7\u671f\u8bfb"}),"\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6848\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5f3a\u5236\u5c06\u5199\u4e4b\u540e",(0,i.jsx)(e.strong,{children:"\u7acb\u523b\u8bfb\u7684\u64cd\u4f5c\u8f6c\u79fb\u5230\u4e3b\u5e93"}),"\uff0c\u6bd4\u5982\u521a\u6ce8\u518c\u7684\u7528\u6237\uff0c\u76f4\u63a5\u767b\u5f55\u4ece\u5e93\u67e5\u8be2\u53ef\u80fd\u67e5\u8be2\u4e0d\u5230\uff0c\u5148\u8d70\u4e3b\u5e93\u767b\u5f55"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u4e8c\u6b21\u67e5\u8be2"}),"\uff0c\u5982\u679c\u4ece\u5e93\u67e5\u4e0d\u5230\u6570\u636e\uff0c\u5219\u518d\u53bb\u4e3b\u5e93\u67e5\u4e00\u904d\uff0c\u7531 API \u5c01\u88c5\uff0c\u6bd4\u8f83\u7b80\u5355\uff0c\u4f46\u5bfc\u81f4\u4e3b\u5e93\u538b\u529b\u5927"]}),"\n",(0,i.jsxs)(e.li,{children:["\u66f4\u65b0\u4e3b\u5e93\u540e\uff0c\u8bfb\u4ece\u5e93\u4e4b\u524d\u5148 sleep \u4e00\u4e0b\uff0c\u7c7b\u4f3c\u4e8e\u6267\u884c\u4e00\u6761 ",(0,i.jsx)(e.code,{children:"select sleep(1)"})," \u547d\u4ee4\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u4e3b\u5907\u5ef6\u8fdf\u5728 1 \u79d2\u4e4b\u5185"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u786e\u4fdd\u673a\u5236",children:"\u786e\u4fdd\u673a\u5236"}),"\n",(0,i.jsx)(e.h5,{id:"\u65e0\u5ef6\u8fdf",children:"\u65e0\u5ef6\u8fdf"}),"\n",(0,i.jsx)(e.p,{children:"\u786e\u4fdd\u4e3b\u5907\u65e0\u5ef6\u8fdf\u7684\u65b9\u6cd5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6bcf\u6b21\u4ece\u5e93\u6267\u884c\u67e5\u8be2\u8bf7\u6c42\u524d\uff0c\u5148\u5224\u65ad seconds_behind_master \u662f\u5426\u5df2\u7ecf\u7b49\u4e8e 0\uff0c\u5982\u679c\u4e0d\u7b49\u4e8e\u90a3\u5c31\u7b49\u5230\u53c2\u6570\u53d8\u4e3a 0 \u6267\u884c\u67e5\u8be2\u8bf7\u6c42"}),"\n",(0,i.jsx)(e.li,{children:"\u5bf9\u6bd4\u4f4d\u70b9\uff0cMaster_Log_File \u548c Read_Master_Log_Pos \u8868\u793a\u7684\u662f\u8bfb\u5230\u7684\u4e3b\u5e93\u7684\u6700\u65b0\u4f4d\u70b9\uff0cRelay_Master_Log_File \u548c Exec_Master_Log_Pos \u8868\u793a\u7684\u662f\u5907\u5e93\u6267\u884c\u7684\u6700\u65b0\u4f4d\u70b9\uff0c\u8fd9\u4e24\u7ec4\u503c\u5b8c\u5168\u76f8\u540c\u5c31\u8bf4\u660e\u63a5\u6536\u5230\u7684\u65e5\u5fd7\u5df2\u7ecf\u540c\u6b65\u5b8c\u6210"}),"\n",(0,i.jsx)(e.li,{children:"\u5bf9\u6bd4 GTID \u96c6\u5408\uff0cRetrieved_Gtid_Set \u662f\u5907\u5e93\u6536\u5230\u7684\u6240\u6709\u65e5\u5fd7\u7684 GTID \u96c6\u5408\uff0cExecuted_Gtid_Set \u662f\u5907\u5e93\u6240\u6709\u5df2\u7ecf\u6267\u884c\u5b8c\u6210\u7684 GTID \u96c6\u5408\uff0c\u5982\u679c\u8fd9\u4e24\u4e2a\u96c6\u5408\u76f8\u540c\u4e5f\u8868\u793a\u5907\u5e93\u63a5\u6536\u5230\u7684\u65e5\u5fd7\u90fd\u5df2\u7ecf\u540c\u6b65\u5b8c\u6210"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u534a\u540c\u6b65",children:"\u534a\u540c\u6b65"}),"\n",(0,i.jsx)(e.p,{children:"\u534a\u540c\u6b65\u590d\u5236\u5c31\u662f semi-sync replication\uff0c\u9002\u7528\u4e8e\u4e00\u4e3b\u4e00\u5907\u7684\u573a\u666f\uff0c\u5de5\u4f5c\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e8b\u52a1\u63d0\u4ea4\u7684\u65f6\u5019\uff0c\u4e3b\u5e93\u628a binlog \u53d1\u7ed9\u4ece\u5e93"}),"\n",(0,i.jsx)(e.li,{children:"\u4ece\u5e93\u6536\u5230 binlog \u4ee5\u540e\uff0c\u53d1\u56de\u7ed9\u4e3b\u5e93\u4e00\u4e2a ack\uff0c\u8868\u793a\u6536\u5230\u4e86"}),"\n",(0,i.jsx)(e.li,{children:"\u4e3b\u5e93\u6536\u5230\u8fd9\u4e2a ack \u4ee5\u540e\uff0c\u624d\u80fd\u7ed9\u5ba2\u6237\u7aef\u8fd4\u56de\u4e8b\u52a1\u5b8c\u6210\u7684\u786e\u8ba4"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u4e00\u4e3b\u591a\u4ece\u573a\u666f\u4e2d\uff0c\u4e3b\u5e93\u53ea\u8981\u7b49\u5230\u4e00\u4e2a\u4ece\u5e93\u7684 ack\uff0c\u5c31\u5f00\u59cb\u7ed9\u5ba2\u6237\u7aef\u8fd4\u56de\u786e\u8ba4\uff0c\u8fd9\u65f6\u5728\u4ece\u5e93\u4e0a\u6267\u884c\u67e5\u8be2\u8bf7\u6c42\uff0c\u6709\u4e24\u79cd\u60c5\u51b5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u67e5\u8be2\u662f\u843d\u5728\u8fd9\u4e2a\u54cd\u5e94\u4e86 ack \u7684\u4ece\u5e93\u4e0a\uff0c\u662f\u80fd\u591f\u786e\u4fdd\u8bfb\u5230\u6700\u65b0\u6570\u636e"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u67e5\u8be2\u843d\u5230\u5176\u4ed6\u4ece\u5e93\u4e0a\uff0c\u5b83\u4eec\u53ef\u80fd\u8fd8\u6ca1\u6709\u6536\u5230\u6700\u65b0\u7684\u65e5\u5fd7\uff0c\u5c31\u4f1a\u4ea7\u751f\u8fc7\u671f\u8bfb\u7684\u95ee\u9898"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u4e1a\u52a1\u66f4\u65b0\u7684\u9ad8\u5cf0\u671f\uff0c\u4e3b\u5e93\u7684\u4f4d\u70b9\u6216\u8005 GTID \u96c6\u5408\u66f4\u65b0\u5f88\u5feb\uff0c\u5bfc\u81f4\u4ece\u5e93\u6765\u4e0d\u53ca\u5904\u7406\uff0c\u90a3\u4e48\u4e24\u4e2a\u4f4d\u70b9\u7b49\u503c\u5224\u65ad\u5c31\u4f1a\u4e00\u76f4\u4e0d\u6210\u7acb\uff0c\u5f88\u53ef\u80fd\u51fa\u73b0\u4ece\u5e93\u4e0a\u8fdf\u8fdf\u65e0\u6cd5\u54cd\u5e94\u67e5\u8be2\u8bf7\u6c42\u7684\u60c5\u51b5"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u7b49\u4f4d\u70b9",children:"\u7b49\u4f4d\u70b9"}),"\n",(0,i.jsxs)(e.p,{children:["\u5728",(0,i.jsx)(e.strong,{children:"\u4ece\u5e93\u6267\u884c\u5224\u65ad\u4f4d\u70b9"}),"\u7684\u547d\u4ee4\uff0c\u53c2\u6570 file \u548c pos \u6307\u7684\u662f\u4e3b\u5e93\u4e0a\u7684\u6587\u4ef6\u540d\u548c\u4f4d\u7f6e\uff0ctimeout \u53ef\u9009\uff0c\u8bbe\u7f6e\u4e3a\u6b63\u6574\u6570 N \u8868\u793a\u6700\u591a\u7b49\u5f85 N \u79d2"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT master_pos_wait(file, pos[, timeout]);\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u547d\u4ee4\u6b63\u5e38\u8fd4\u56de\u7684\u7ed3\u679c\u662f\u4e00\u4e2a\u6b63\u6574\u6570 M\uff0c\u8868\u793a\u4ece\u547d\u4ee4\u5f00\u59cb\u6267\u884c\uff0c\u5230\u5e94\u7528\u5b8c file \u548c pos \u8868\u793a\u7684 binlog \u4f4d\u7f6e\uff0c\u6267\u884c\u4e86\u591a\u5c11\u4e8b\u52a1"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u6267\u884c\u671f\u95f4\uff0c\u5907\u5e93\u540c\u6b65\u7ebf\u7a0b\u53d1\u751f\u5f02\u5e38\uff0c\u5219\u8fd4\u56de NULL"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u7b49\u5f85\u8d85\u8fc7 N \u79d2\uff0c\u5c31\u8fd4\u56de -1"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u521a\u5f00\u59cb\u6267\u884c\u7684\u65f6\u5019\uff0c\u5c31\u53d1\u73b0\u5df2\u7ecf\u6267\u884c\u8fc7\u8fd9\u4e2a\u4f4d\u7f6e\u4e86\uff0c\u5219\u8fd4\u56de 0"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5de5\u4f5c\u6d41\u7a0b\uff1a\u5148\u6267\u884c trx1\uff0c\u518d\u6267\u884c\u4e00\u4e2a\u67e5\u8be2\u8bf7\u6c42\u7684\u903b\u8f91\uff0c\u8981",(0,i.jsx)(e.strong,{children:"\u4fdd\u8bc1\u80fd\u591f\u67e5\u5230\u6b63\u786e\u7684\u6570\u636e"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["trx1 \u4e8b\u52a1\u66f4\u65b0\u5b8c\u6210\u540e\uff0c\u9a6c\u4e0a\u6267\u884c ",(0,i.jsx)(e.code,{children:"show master status"})," \u5f97\u5230\u5f53\u524d\u4e3b\u5e93\u6267\u884c\u5230\u7684 File \u548c Position"]}),"\n",(0,i.jsx)(e.li,{children:"\u9009\u5b9a\u4e00\u4e2a\u4ece\u5e93\u6267\u884c\u5224\u65ad\u4f4d\u70b9\u8bed\u53e5\uff0c\u5982\u679c\u8fd4\u56de\u503c\u662f >=0 \u7684\u6b63\u6574\u6570\uff0c\u8bf4\u660e\u4ece\u5e93\u5df2\u7ecf\u540c\u6b65\u5b8c\u4e8b\u52a1\uff0c\u53ef\u4ee5\u5728\u8fd9\u4e2a\u4ece\u5e93\u6267\u884c\u67e5\u8be2\u8bed\u53e5"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u51fa\u73b0\u5176\u4ed6\u60c5\u51b5\uff0c\u9700\u8981\u5230\u4e3b\u5e93\u6267\u884c\u67e5\u8be2\u8bed\u53e5"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u5982\u679c\u6240\u6709\u7684\u4ece\u5e93\u90fd\u5ef6\u8fdf\u8d85\u8fc7 timeout \u79d2\uff0c\u67e5\u8be2\u538b\u529b\u5c31\u90fd\u8dd1\u5230\u4e3b\u5e93\u4e0a\uff0c\u6240\u4ee5\u9700\u8981\u8fdb\u884c\u6743\u8861"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u7b49gtid",children:"\u7b49GTID"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5e93\u5f00\u542f\u4e86 GTID \u6a21\u5f0f\uff0cMySQL \u63d0\u4f9b\u4e86\u5224\u65ad GTID \u7684\u547d\u4ee4"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT wait_for_executed_gtid_set(gtid_set [, timeout])\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7b49\u5f85\u76f4\u5230\u8fd9\u4e2a\u5e93\u6267\u884c\u7684\u4e8b\u52a1\u4e2d\u5305\u542b\u4f20\u5165\u7684 gtid_set\uff0c\u8fd4\u56de 0"}),"\n",(0,i.jsx)(e.li,{children:"\u8d85\u65f6\u8fd4\u56de 1"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5de5\u4f5c\u6d41\u7a0b\uff1a\u5148\u6267\u884c trx1\uff0c\u518d\u6267\u884c\u4e00\u4e2a\u67e5\u8be2\u8bf7\u6c42\u7684\u903b\u8f91\uff0c\u8981\u4fdd\u8bc1\u80fd\u591f\u67e5\u5230\u6b63\u786e\u7684\u6570\u636e"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"trx1 \u4e8b\u52a1\u66f4\u65b0\u5b8c\u6210\u540e\uff0c\u4ece\u8fd4\u56de\u5305\u76f4\u63a5\u83b7\u53d6\u8fd9\u4e2a\u4e8b\u52a1\u7684 GTID\uff0c\u8bb0\u4e3a gtid"}),"\n",(0,i.jsx)(e.li,{children:"\u9009\u5b9a\u4e00\u4e2a\u4ece\u5e93\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u5982\u679c\u8fd4\u56de\u503c\u662f 0\uff0c\u5219\u5728\u8fd9\u4e2a\u4ece\u5e93\u6267\u884c\u67e5\u8be2\u8bed\u53e5\uff0c\u5426\u5219\u5230\u4e3b\u5e93\u6267\u884c\u67e5\u8be2\u8bed\u53e5"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5bf9\u6bd4\u7b49\u5f85\u4f4d\u70b9\u65b9\u6cd5\uff0c\u51cf\u5c11\u4e86\u4e00\u6b21 ",(0,i.jsx)(e.code,{children:"show master status"})," \u7684\u65b9\u6cd5\uff0c\u5c06\u53c2\u6570 session_track_gtids \u8bbe\u7f6e\u4e3a OWN_GTID\uff0c\u7136\u540e\u901a\u8fc7 API \u63a5\u53e3 mysql_session_track_get_first \u4ece\u8fd4\u56de\u5305\u89e3\u6790\u51fa GTID \u7684\u503c\u5373\u53ef"]}),"\n",(0,i.jsx)(e.p,{children:"\u603b\u7ed3\uff1a\u6240\u6709\u7684\u7b49\u5f85\u65e0\u5ef6\u8fdf\u7684\u65b9\u6cd5\uff0c\u90fd\u9700\u8981\u6839\u636e\u5177\u4f53\u7684\u4e1a\u52a1\u573a\u666f\u53bb\u5224\u65ad\u5b9e\u65bd"}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://time.geekbang.org/column/article/77636",children:"https://time.geekbang.org/column/article/77636"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u8d1f\u8f7d\u5747\u8861",children:"\u8d1f\u8f7d\u5747\u8861"}),"\n",(0,i.jsx)(e.p,{children:"\u8d1f\u8f7d\u5747\u8861\u662f\u5e94\u7528\u4e2d\u4f7f\u7528\u975e\u5e38\u666e\u904d\u7684\u4e00\u79cd\u4f18\u5316\u65b9\u6cd5\uff0c\u673a\u5236\u5c31\u662f\u5229\u7528\u67d0\u79cd\u5747\u8861\u7b97\u6cd5\uff0c\u5c06\u56fa\u5b9a\u7684\u8d1f\u8f7d\u91cf\u5206\u5e03\u5230\u4e0d\u540c\u7684\u670d\u52a1\u5668\u4e0a\uff0c\u4ee5\u6b64\u6765\u964d\u4f4e\u5355\u53f0\u670d\u52a1\u5668\u7684\u8d1f\u8f7d\uff0c\u8fbe\u5230\u4f18\u5316\u7684\u6548\u679c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5206\u6d41\u67e5\u8be2\uff1a\u901a\u8fc7 MySQL \u7684\u4e3b\u4ece\u590d\u5236\uff0c\u5b9e\u73b0\u8bfb\u5199\u5206\u79bb\uff0c\u4f7f\u589e\u5220\u6539\u64cd\u4f5c\u8d70\u4e3b\u8282\u70b9\uff0c\u67e5\u8be2\u64cd\u4f5c\u8d70\u4ece\u8282\u70b9\uff0c\u4ece\u800c\u53ef\u4ee5\u964d\u4f4e\u5355\u53f0\u670d\u52a1\u5668\u7684\u8bfb\u5199\u538b\u529b"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(81209).A+"",width:"584",height:"423"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u67b6\u6784\uff1a\u9002\u5408\u5927\u6570\u636e\u91cf\u3001\u8d1f\u8f7d\u9ad8\u7684\u60c5\u51b5\uff0c\u5177\u6709\u826f\u597d\u7684\u62d3\u5c55\u6027\u548c\u9ad8\u53ef\u7528\u6027\u3002\u901a\u8fc7\u5728\u591a\u53f0\u670d\u52a1\u5668\u4e4b\u95f4\u5206\u5e03\u6570\u636e\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5728\u591a\u53f0\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u8d1f\u8f7d\u5747\u8861\uff0c\u63d0\u9ad8\u8bbf\u95ee\u6548\u7387"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u4e3b\u4ece\u642d\u5efa",children:"\u4e3b\u4ece\u642d\u5efa"}),"\n",(0,i.jsx)(e.h4,{id:"master",children:"master"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728master \u7684\u914d\u7f6e\u6587\u4ef6\uff08/etc/mysql/my.cnf\uff09\u4e2d\uff0c\u914d\u7f6e\u5982\u4e0b\u5185\u5bb9\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"#mysql \u670d\u52a1ID,\u4fdd\u8bc1\u6574\u4e2a\u96c6\u7fa4\u73af\u5883\u4e2d\u552f\u4e00\nserver-id=1\n\n#mysql binlog \u65e5\u5fd7\u7684\u5b58\u50a8\u8def\u5f84\u548c\u6587\u4ef6\u540d\nlog-bin=/var/lib/mysql/mysqlbin\n\n#\u9519\u8bef\u65e5\u5fd7,\u9ed8\u8ba4\u5df2\u7ecf\u5f00\u542f\n#log-err\n\n#mysql\u7684\u5b89\u88c5\u76ee\u5f55\n#basedir\n\n#mysql\u7684\u4e34\u65f6\u76ee\u5f55\n#tmpdir\n\n#mysql\u7684\u6570\u636e\u5b58\u653e\u76ee\u5f55\n#datadir\n\n#\u662f\u5426\u53ea\u8bfb,1 \u4ee3\u8868\u53ea\u8bfb, 0 \u4ee3\u8868\u8bfb\u5199\nread-only=0\n\n#\u5ffd\u7565\u7684\u6570\u636e, \u6307\u4e0d\u9700\u8981\u540c\u6b65\u7684\u6570\u636e\u5e93\nbinlog-ignore-db=mysql\n\n#\u6307\u5b9a\u540c\u6b65\u7684\u6570\u636e\u5e93\n#binlog-do-db=db01\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\uff0c\u9700\u8981\u91cd\u542f MySQL"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u540c\u6b65\u6570\u636e\u7684\u8d26\u6237\uff0c\u5e76\u4e14\u8fdb\u884c\u6388\u6743\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"GRANT REPLICATION SLAVE ON *.* TO 'seazean'@'192.168.0.137' IDENTIFIED BY '123456';\nFLUSH PRIVILEGES;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b master \u72b6\u6001\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW MASTER STATUS;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(5642).A+"",width:"846",height:"134"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"File\uff1a\u4ece\u54ea\u4e2a\u65e5\u5fd7\u6587\u4ef6\u5f00\u59cb\u63a8\u9001\u65e5\u5fd7\u6587\u4ef6"}),"\n",(0,i.jsx)(e.li,{children:"Position\uff1a\u4ece\u54ea\u4e2a\u4f4d\u7f6e\u5f00\u59cb\u63a8\u9001\u65e5\u5fd7"}),"\n",(0,i.jsx)(e.li,{children:"Binlog_Ignore_DB\uff1a\u6307\u5b9a\u4e0d\u9700\u8981\u540c\u6b65\u7684\u6570\u636e\u5e93"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"slave",children:"slave"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728 slave \u7aef\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u914d\u7f6e\u5982\u4e0b\u5185\u5bb9\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"#mysql\u670d\u52a1\u7aefID,\u552f\u4e00\nserver-id=2\n\n#\u6307\u5b9abinlog\u65e5\u5fd7\nlog-bin=/var/lib/mysql/mysqlbin\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\uff0c\u9700\u8981\u91cd\u542f MySQL"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6307\u5b9a\u5f53\u524d\u4ece\u5e93\u5bf9\u5e94\u7684\u4e3b\u5e93\u7684IP\u5730\u5740\u3001\u7528\u6237\u540d\u3001\u5bc6\u7801\uff0c\u4ece\u54ea\u4e2a\u65e5\u5fd7\u6587\u4ef6\u5f00\u59cb\u7684\u90a3\u4e2a\u4f4d\u7f6e\u5f00\u59cb\u540c\u6b65\u63a8\u9001\u65e5\u5fd7"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CHANGE MASTER TO MASTER_HOST= '192.168.0.138', MASTER_USER='seazean', MASTER_PASSWORD='seazean', MASTER_LOG_FILE='mysqlbin.000001', MASTER_LOG_POS=413;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5f00\u542f\u540c\u6b65\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"START SLAVE;\nSHOW SLAVE STATUS;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u505c\u6b62\u540c\u6b65\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"STOP SLAVE;\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u9a8c\u8bc1",children:"\u9a8c\u8bc1"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728\u4e3b\u5e93\u4e2d\u521b\u5efa\u6570\u636e\u5e93\uff0c\u521b\u5efa\u8868\u5e76\u63d2\u5165\u6570\u636e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"CREATE DATABASE db01;\nUSE db01;\nCREATE TABLE user(\n\tid INT(11) NOT NULL AUTO_INCREMENT,\n\tname VARCHAR(50) NOT NULL,\n\tsex VARCHAR(1),\n\tPRIMARY KEY (id)\n)ENGINE=INNODB DEFAULT CHARSET=utf8;\n\nINSERT INTO user(id,NAME,sex) VALUES(NULL,'Tom','1');\nINSERT INTO user(id,NAME,sex) VALUES(NULL,'Trigger','0');\nINSERT INTO user(id,NAME,sex) VALUES(NULL,'Dawn','1');\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728\u4ece\u5e93\u4e2d\u67e5\u8be2\u6570\u636e\uff0c\u8fdb\u884c\u9a8c\u8bc1\uff1a"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u4ece\u5e93\u4e2d\uff0c\u53ef\u4ee5\u67e5\u770b\u5230\u521a\u624d\u521b\u5efa\u7684\u6570\u636e\u5e93\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(90035).A+"",width:"1059",height:"206"})}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u8be5\u6570\u636e\u5e93\u4e2d\uff0c\u67e5\u8be2\u8868\u4e2d\u7684\u6570\u636e\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(95876).A+"",width:"1057",height:"183"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u4e3b\u4ece\u5207\u6362",children:"\u4e3b\u4ece\u5207\u6362"}),"\n",(0,i.jsx)(e.h4,{id:"\u6b63\u5e38\u5207\u6362",children:"\u6b63\u5e38\u5207\u6362"}),"\n",(0,i.jsx)(e.p,{children:"\u6b63\u5e38\u5207\u6362\u6b65\u9aa4\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5728\u5f00\u59cb\u5207\u6362\u4e4b\u524d\u5148\u5bf9\u4e3b\u5e93\u8fdb\u884c\u9501\u8868 ",(0,i.jsx)(e.code,{children:"flush tables with read lock"}),"\uff0c\u7136\u540e\u7b49\u5f85\u6240\u6709\u8bed\u53e5\u6267\u884c\u5b8c\u6210\uff0c\u5207\u6362\u5b8c\u6210\u540e\u53ef\u4ee5\u91ca\u653e\u9501"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u68c0\u67e5 slave \u540c\u6b65\u72b6\u6001\uff0c\u5728 slave \u6267\u884c ",(0,i.jsx)(e.code,{children:"show processlist"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u505c\u6b62 slave io \u7ebf\u7a0b\uff0c\u6267\u884c\u547d\u4ee4 ",(0,i.jsx)(e.code,{children:"STOP SLAVE IO_THREAD"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u63d0\u5347 slave \u4e3a master"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"Stop slave;\nReset master;\nReset slave all;\nset global read_only=off;\t-- \u8bbe\u7f6e\u4e3a\u53ef\u66f4\u65b0\u72b6\u6001\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5c06\u539f\u6765 master \u53d8\u4e3a slave\uff08\u53c2\u8003\u642d\u5efa\u6d41\u7a0b\u4e2d\u7684 slave \u65b9\u6cd5\uff09"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u53ef\u9760\u6027\u4f18\u5148\u7b56\u7565"}),"\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5224\u65ad\u5907\u5e93 B \u73b0\u5728\u7684 seconds_behind_master\uff0c\u5982\u679c\u5c0f\u4e8e\u67d0\u4e2a\u503c\uff08\u6bd4\u5982 5 \u79d2\uff09\u7ee7\u7eed\u4e0b\u4e00\u6b65\uff0c\u5426\u5219\u6301\u7eed\u91cd\u8bd5\u8fd9\u4e00\u6b65"}),"\n",(0,i.jsx)(e.li,{children:"\u628a\u4e3b\u5e93 A \u6539\u6210\u53ea\u8bfb\u72b6\u6001\uff0c\u5373\u628a readonly \u8bbe\u7f6e\u4e3a true"}),"\n",(0,i.jsx)(e.li,{children:"\u5224\u65ad\u5907\u5e93 B \u7684 seconds_behind_master \u7684\u503c\uff0c\u76f4\u5230\u8fd9\u4e2a\u503c\u53d8\u6210 0 \u4e3a\u6b62\uff08\u8be5\u6b65\u9aa4\u6bd4\u8f83\u8017\u65f6\uff0c\u6240\u4ee5\u6b65\u9aa4 1 \u4e2d\u8981\u5c3d\u91cf\u7b49\u5f85\u8be5\u503c\u53d8\u5c0f\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u628a\u5907\u5e93 B \u6539\u6210\u53ef\u8bfb\u5199\u72b6\u6001\uff0c\u4e5f\u5c31\u662f\u628a readonly \u8bbe\u7f6e\u4e3a false"}),"\n",(0,i.jsx)(e.li,{children:"\u628a\u4e1a\u52a1\u8bf7\u6c42\u5207\u5230\u5907\u5e93 B"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u53ef\u7528\u6027\u4f18\u5148\u7b56\u7565\uff1a\u5148\u505a\u6700\u540e\u4e24\u6b65\uff0c\u4f1a\u9020\u6210\u4e3b\u5907\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898"}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://time.geekbang.org/column/article/76795",children:"https://time.geekbang.org/column/article/76795"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5065\u5eb7\u68c0\u6d4b",children:"\u5065\u5eb7\u68c0\u6d4b"}),"\n",(0,i.jsxs)(e.p,{children:["\u4e3b\u5e93\u53d1\u751f\u6545\u969c\u540e\u4ece\u5e93\u4f1a\u4e0a\u4f4d\uff0c",(0,i.jsx)(e.strong,{children:"\u5176\u4ed6\u4ece\u5e93\u6307\u5411\u65b0\u7684\u4e3b\u5e93"}),"\uff0c\u6240\u4ee5\u9700\u8981\u4e00\u4e2a\u5065\u5eb7\u68c0\u6d4b\u7684\u673a\u5236\u6765\u5224\u65ad\u4e3b\u5e93\u662f\u5426\u5b95\u673a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"select 1 \u5224\u65ad\uff0c\u4f46\u662f\u9ad8\u5e76\u53d1\u4e0b\u68c0\u6d4b\u4e0d\u51fa\u7ebf\u7a0b\u7684\u9501\u7b49\u5f85\u7684\u963b\u585e\u95ee\u9898"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8868\u5224\u65ad\uff0c\u5728\u7cfb\u7edf\u5e93\uff08mysql \u5e93\uff09\u91cc\u521b\u5efa\u4e00\u4e2a\u8868\uff0c\u6bd4\u5982\u547d\u540d\u4e3a health_check\uff0c\u91cc\u9762\u53ea\u653e\u4e00\u884c\u6570\u636e\uff0c\u7136\u540e\u5b9a\u671f\u6267\u884c\u3002\u4f46\u662f\u5f53 binlog \u6240\u5728\u78c1\u76d8\u7684\u7a7a\u95f4\u5360\u7528\u7387\u8fbe\u5230 100%\uff0c\u6240\u6709\u7684\u66f4\u65b0\u548c\u4e8b\u52a1\u63d0\u4ea4\u8bed\u53e5\u90fd\u88ab\u963b\u585e\uff0c\u67e5\u8be2\u8bed\u53e5\u53ef\u4ee5\u7ee7\u7eed\u8fd0\u884c"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u66f4\u65b0\u5224\u65ad\uff0c\u5728\u5065\u5eb7\u68c0\u6d4b\u8868\u4e2d\u653e\u4e00\u4e2a timestamp \u5b57\u6bb5\uff0c\u7528\u6765\u8868\u793a\u6700\u540e\u4e00\u6b21\u6267\u884c\u68c0\u6d4b\u7684\u65f6\u95f4"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"UPDATE mysql.health_check SET t_modified=now();\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8282\u70b9\u53ef\u7528\u6027\u7684\u68c0\u6d4b\u90fd\u5e94\u8be5\u5305\u542b\u4e3b\u5e93\u548c\u5907\u5e93\uff0c\u4e3a\u4e86\u8ba9\u4e3b\u5907\u4e4b\u95f4\u7684\u66f4\u65b0\u4e0d\u4ea7\u751f\u51b2\u7a81\uff0c\u53ef\u4ee5\u5728 mysql.health_check \u8868\u4e0a\u5b58\u5165\u591a\u884c\u6570\u636e\uff0c\u5e76\u7528\u4e3b\u5907\u7684 server_id \u505a\u4e3b\u952e\uff0c\u4fdd\u8bc1\u4e3b\u3001\u5907\u5e93\u5404\u81ea\u7684\u68c0\u6d4b\u547d\u4ee4\u4e0d\u4f1a\u53d1\u751f\u51b2\u7a81"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u4e8e\u4f4d\u70b9",children:"\u57fa\u4e8e\u4f4d\u70b9"}),"\n",(0,i.jsxs)(e.p,{children:["\u4e3b\u5e93\u4e0a\u4f4d\u540e\uff0c\u4ece\u5e93 B \u6267\u884c CHANGE MASTER TO \u547d\u4ee4\uff0c\u6307\u5b9a MASTER_LOG_FILE\u3001MASTER_LOG_POS \u8868\u793a\u4ece\u65b0\u4e3b\u5e93 A \u7684\u54ea\u4e2a\u6587\u4ef6\u7684\u54ea\u4e2a\u4f4d\u70b9\u5f00\u59cb\u540c\u6b65\uff0c\u8fd9\u4e2a\u4f4d\u7f6e\u5c31\u662f",(0,i.jsx)(e.strong,{children:"\u540c\u6b65\u4f4d\u70b9"}),"\uff0c\u5bf9\u5e94\u4e3b\u5e93\u7684\u6587\u4ef6\u540d\u548c\u65e5\u5fd7\u504f\u79fb\u91cf"]}),"\n",(0,i.jsx)(e.p,{children:"\u5bfb\u627e\u4f4d\u70b9\u9700\u8981\u627e\u4e00\u4e2a\u7a0d\u5fae\u5f80\u524d\u7684\uff0c\u7136\u540e\u518d\u901a\u8fc7\u5224\u65ad\u8df3\u8fc7\u90a3\u4e9b\u5728\u4ece\u5e93 B \u4e0a\u5df2\u7ecf\u6267\u884c\u8fc7\u7684\u4e8b\u52a1\uff0c\u83b7\u53d6\u4f4d\u70b9\u65b9\u6cd5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7b49\u5f85\u65b0\u4e3b\u5e93 A \u628a\u4e2d\u8f6c\u65e5\u5fd7\uff08relay log\uff09\u5168\u90e8\u540c\u6b65\u5b8c\u6210"}),"\n",(0,i.jsx)(e.li,{children:"\u5728 A \u4e0a\u6267\u884c show master status \u547d\u4ee4\uff0c\u5f97\u5230\u5f53\u524d A \u4e0a\u6700\u65b0\u7684 File \u548c Position"}),"\n",(0,i.jsx)(e.li,{children:"\u53d6\u539f\u4e3b\u5e93\u6545\u969c\u7684\u65f6\u523b T\uff0c\u7528 mysqlbinlog \u5de5\u5177\u89e3\u6790\u65b0\u4e3b\u5e93 A \u7684 File\uff0c\u5f97\u5230 T \u65f6\u523b\u7684\u4f4d\u70b9"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u5e38\u60c5\u51b5\u4e0b\u8be5\u503c\u5e76\u4e0d\u51c6\u786e\uff0c\u5728\u5207\u6362\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u53d1\u751f\u9519\u8bef\uff0c\u6240\u4ee5\u8981\u5148\u4e3b\u52a8\u8df3\u8fc7\u8fd9\u4e9b\u9519\u8bef\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5207\u6362\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u4f1a\u91cd\u590d\u6267\u884c\u4e00\u4e2a\u4e8b\u52a1\uff0c\u6240\u4ee5\u9700\u8981\u4e3b\u52a8\u8df3\u8fc7\u6240\u6709\u91cd\u590d\u7684\u4e8b\u52a1"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SET GLOBAL sql_slave_skip_counter=1;\nSTART SLAVE;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bbe\u7f6e slave_skip_errors \u53c2\u6570\uff0c\u76f4\u63a5\u8bbe\u7f6e\u8df3\u8fc7\u6307\u5b9a\u7684\u9519\u8bef\uff0c\u4fdd\u8bc1\u4e3b\u4ece\u5207\u6362\u7684\u6b63\u5e38\u8fdb\u884c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"1062 \u9519\u8bef\u662f\u63d2\u5165\u6570\u636e\u65f6\u552f\u4e00\u952e\u51b2\u7a81"}),"\n",(0,i.jsx)(e.li,{children:"1032 \u9519\u8bef\u662f\u5220\u9664\u6570\u636e\u65f6\u627e\u4e0d\u5230\u884c"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8be5\u65b9\u6cd5\u9488\u5bf9\u7684\u662f\u4e3b\u5907\u5207\u6362\u65f6\uff0c\u7531\u4e8e\u627e\u4e0d\u5230\u7cbe\u786e\u7684\u540c\u6b65\u4f4d\u70b9\uff0c\u53ea\u80fd\u91c7\u7528\u8fd9\u79cd\u65b9\u6cd5\u6765\u521b\u5efa\u4ece\u5e93\u548c\u65b0\u4e3b\u5e93\u7684\u4e3b\u5907\u5173\u7cfb\u3002\u7b49\u5230\u4e3b\u5907\u95f4\u7684\u540c\u6b65\u5173\u7cfb\u5efa\u7acb\u5b8c\u6210\u5e76\u7a33\u5b9a\u6267\u884c\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u8fd8\u9700\u8981\u628a\u8fd9\u4e2a\u53c2\u6570\u8bbe\u7f6e\u4e3a\u7a7a\uff0c\u4ee5\u514d\u771f\u7684\u51fa\u73b0\u4e86\u4e3b\u4ece\u6570\u636e\u4e0d\u4e00\u81f4\u4e5f\u8df3\u8fc7\u4e86"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u4e8egtid",children:"\u57fa\u4e8eGTID"}),"\n",(0,i.jsx)(e.h5,{id:"gtid",children:"GTID"}),"\n",(0,i.jsxs)(e.p,{children:["GTID \u7684\u5168\u79f0\u662f Global Transaction Identifier\uff0c\u5168\u5c40\u4e8b\u52a1 ID\uff0c\u662f\u4e00\u4e2a\u4e8b\u52a1",(0,i.jsx)(e.strong,{children:"\u5728\u63d0\u4ea4\u65f6\u751f\u6210"}),"\u7684\uff0c\u662f\u8fd9\u4e2a\u4e8b\u52a1\u7684\u552f\u4e00\u6807\u8bc6\uff0c\u7ec4\u6210\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"GTID=source_id:transaction_id\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"source_id\uff1a\u662f\u4e00\u4e2a\u5b9e\u4f8b\u7b2c\u4e00\u6b21\u542f\u52a8\u65f6\u81ea\u52a8\u751f\u6210\u7684\uff0c\u662f\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684\u503c"}),"\n",(0,i.jsx)(e.li,{children:"transaction_id\uff1a\u521d\u59cb\u503c\u662f 1\uff0c\u6bcf\u6b21\u63d0\u4ea4\u4e8b\u52a1\u7684\u65f6\u5019\u5206\u914d\u7ed9\u8fd9\u4e2a\u4e8b\u52a1\uff0c\u5e76\u52a0 1\uff0c\u662f\u8fde\u7eed\u7684\uff08\u533a\u5206\u4e8b\u52a1 ID\uff0c\u4e8b\u52a1 ID \u662f\u5728\u6267\u884c\u65f6\u751f\u6210\uff09"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u542f\u52a8 MySQL \u5b9e\u4f8b\u65f6\uff0c\u52a0\u4e0a\u53c2\u6570 ",(0,i.jsx)(e.code,{children:"gtid_mode=on"})," \u548c ",(0,i.jsx)(e.code,{children:"enforce_gtid_consistency=on"})," \u5c31\u53ef\u4ee5\u542f\u52a8 GTID \u6a21\u5f0f\uff0c\u6bcf\u4e2a\u4e8b\u52a1\u90fd\u4f1a\u548c\u4e00\u4e2a GTID \u4e00\u4e00\u5bf9\u5e94\uff0c\u6bcf\u4e2a MySQL \u5b9e\u4f8b\u90fd\u7ef4\u62a4\u4e86\u4e00\u4e2a GTID \u96c6\u5408\uff0c\u7528\u6765\u5b58\u50a8\u5f53\u524d\u5b9e\u4f8b",(0,i.jsx)(e.strong,{children:"\u6267\u884c\u8fc7\u7684\u6240\u6709\u4e8b\u52a1"})]}),"\n",(0,i.jsx)(e.p,{children:"GTID \u6709\u4e24\u79cd\u751f\u6210\u65b9\u5f0f\uff0c\u4f7f\u7528\u54ea\u79cd\u65b9\u5f0f\u53d6\u51b3\u4e8e session \u53d8\u91cf gtid_next\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"gtid_next=automatic"}),"\uff1a\u4f7f\u7528\u9ed8\u8ba4\u503c\uff0c\u628a source_id:transaction_id \uff08\u9012\u589e\uff09\u5206\u914d\u7ed9\u8fd9\u4e2a\u4e8b\u52a1\uff0c\u7136\u540e\u52a0\u5165\u672c\u5b9e\u4f8b\u7684 GTID \u96c6\u5408"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"@@SESSION.GTID_NEXT = 'source_id:transaction_id';\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"gtid_next=GTID"}),"\uff1a\u6307\u5b9a\u7684 GTID \u7684\u503c\uff0c\u5982\u679c\u8be5\u503c\u5df2\u7ecf\u5b58\u5728\u4e8e\u5b9e\u4f8b\u7684 GTID \u96c6\u5408\u4e2d\uff0c\u63a5\u4e0b\u6765\u6267\u884c\u7684\u4e8b\u52a1\u4f1a\u76f4\u63a5\u88ab\u7cfb\u7edf\u5ffd\u7565\uff1b\u53cd\u4e4b\u5c31\u5c06\u8be5\u503c\u5206\u914d\u7ed9\u63a5\u4e0b\u6765\u8981\u6267\u884c\u7684\u4e8b\u52a1\uff0c\u7cfb\u7edf\u4e0d\u9700\u8981\u7ed9\u8fd9\u4e2a\u4e8b\u52a1\u751f\u6210\u65b0\u7684 GTID\uff0c\u4e5f\u4e0d\u7528\u52a0 1"]}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u4e00\u4e2a GTID \u53ea\u80fd\u7ed9\u4e00\u4e2a\u4e8b\u52a1\u4f7f\u7528\uff0c\u6240\u4ee5\u6267\u884c\u4e0b\u4e00\u4e2a\u4e8b\u52a1\uff0c\u8981\u628a gtid_next \u8bbe\u7f6e\u6210\u53e6\u5916\u4e00\u4e2a GTID \u6216\u8005 automatic"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e1a\u52a1\u573a\u666f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e3b\u5e93 X \u548c\u4ece\u5e93 Y \u6267\u884c\u4e00\u6761\u76f8\u540c\u7684\u6307\u4ee4\u540e\u8fdb\u884c\u4e8b\u52a1\u540c\u6b65"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"INSERT INTO t VALUES(1,1);\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5f53 Y \u540c\u6b65 X \u65f6\uff0c\u4f1a\u51fa\u73b0\u4e3b\u952e\u51b2\u7a81\uff0c\u5bfc\u81f4\u5b9e\u4f8b X \u7684\u540c\u6b65\u7ebf\u7a0b\u505c\u6b62\uff0c\u89e3\u51b3\u65b9\u6cd5\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SET gtid_next='(\u8fd9\u91cc\u662f\u4e3b\u5e93 X \u7684 GTID \u503c)';\nBEGIN;\nCOMMIT;\nSET gtid_next=automatic;\nSTART SLAVE;\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u524d\u4e09\u6761\u8bed\u53e5\u901a\u8fc7",(0,i.jsx)(e.strong,{children:"\u63d0\u4ea4\u4e00\u4e2a\u7a7a\u4e8b\u52a1"}),"\uff0c\u628a X \u7684 GTID \u52a0\u5230\u5b9e\u4f8b Y \u7684 GTID \u96c6\u5408\u4e2d\uff0c\u5b9e\u4f8b Y \u5c31\u4f1a\u76f4\u63a5\u8df3\u8fc7\u8fd9\u4e2a\u4e8b\u52a1"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u5207\u6362",children:"\u5207\u6362"}),"\n",(0,i.jsxs)(e.p,{children:["\u5728 GTID \u6a21\u5f0f\u4e0b\uff0cCHANGE MASTER TO \u4e0d\u9700\u8981\u6307\u5b9a\u65e5\u5fd7\u540d\u548c\u65e5\u5fd7\u504f\u79fb\u91cf\uff0c\u6307\u5b9a ",(0,i.jsx)(e.code,{children:"master_auto_position=1"})," \u4ee3\u8868\u4f7f\u7528 GTID \u6a21\u5f0f"]}),"\n",(0,i.jsx)(e.p,{children:"\u65b0\u4e3b\u5e93\u5b9e\u4f8b A \u7684 GTID \u96c6\u5408\u8bb0\u4e3a set_a\uff0c\u4ece\u5e93\u5b9e\u4f8b B \u7684 GTID \u96c6\u5408\u8bb0\u4e3a set_b\uff0c\u4e3b\u5907\u5207\u6362\u903b\u8f91\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5b9e\u4f8b B \u6307\u5b9a\u4e3b\u5e93 A\uff0c\u57fa\u4e8e\u4e3b\u5907\u534f\u8bae\u5efa\u7acb\u8fde\u63a5\uff0c\u5b9e\u4f8b B \u5e76\u628a set_b \u53d1\u7ed9\u4e3b\u5e93 A"}),"\n",(0,i.jsxs)(e.li,{children:["\u5b9e\u4f8b A \u7b97\u51fa set_a \u4e0e set_b \u7684\u5dee\u96c6\uff0c\u5c31\u662f\u6240\u6709\u5b58\u5728\u4e8e set_a \u4f46\u4e0d\u5b58\u5728\u4e8e set_b \u7684 GTID \u7684\u96c6\u5408\uff0c\u5224\u65ad A \u672c\u5730\u662f\u5426\u5305\u542b\u4e86\u8fd9\u4e2a",(0,i.jsx)(e.strong,{children:"\u5dee\u96c6"}),"\u9700\u8981\u7684\u6240\u6709 binlog \u4e8b\u52a1\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u4e0d\u5305\u542b\uff0c\u8868\u793a A \u5df2\u7ecf\u628a\u5b9e\u4f8b B \u9700\u8981\u7684 binlog \u7ed9\u5220\u6389\u4e86\uff0c\u76f4\u63a5\u8fd4\u56de\u9519\u8bef"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u786e\u8ba4\u5168\u90e8\u5305\u542b\uff0cA \u4ece\u81ea\u5df1\u7684 binlog \u6587\u4ef6\u91cc\u9762\uff0c\u627e\u51fa\u7b2c\u4e00\u4e2a\u4e0d\u5728 set_b \u7684\u4e8b\u52a1\uff0c\u53d1\u7ed9 B"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u5b9e\u4f8b A \u4e4b\u540e\u5c31\u4ece\u8fd9\u4e2a\u4e8b\u52a1\u5f00\u59cb\uff0c\u5f80\u540e\u8bfb\u6587\u4ef6\uff0c\u6309\u987a\u5e8f\u53d6 binlog \u53d1\u7ed9 B \u53bb\u6267\u884c"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://time.geekbang.org/column/article/77427",children:"https://time.geekbang.org/column/article/77427"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u65e5\u5fd7",children:"\u65e5\u5fd7"}),"\n",(0,i.jsx)(e.h3,{id:"\u65e5\u5fd7\u5206\u7c7b",children:"\u65e5\u5fd7\u5206\u7c7b"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u4efb\u4f55\u4e00\u79cd\u6570\u636e\u5e93\u4e2d\uff0c\u90fd\u4f1a\u6709\u5404\u79cd\u5404\u6837\u7684\u65e5\u5fd7\uff0c\u8bb0\u5f55\u7740\u6570\u636e\u5e93\u5de5\u4f5c\u7684\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6570\u636e\u5e93\u7ba1\u7406\u5458\u8ffd\u8e2a\u6570\u636e\u5e93\u66fe\u7ecf\u53d1\u751f\u8fc7\u7684\u5404\u79cd\u4e8b\u4ef6"}),"\n",(0,i.jsx)(e.p,{children:"MySQL\u65e5\u5fd7\u4e3b\u8981\u5305\u62ec\u516d\u79cd\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u91cd\u505a\u65e5\u5fd7\uff08redo log\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u56de\u6eda\u65e5\u5fd7\uff08undo log\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u5f52\u6863\u65e5\u5fd7\uff08binlog\uff09\uff08\u4e8c\u8fdb\u5236\u65e5\u5fd7\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u9519\u8bef\u65e5\u5fd7\uff08errorlog\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u6162\u67e5\u8be2\u65e5\u5fd7\uff08slow query log\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u4e00\u822c\u67e5\u8be2\u65e5\u5fd7\uff08general log\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u4e2d\u7ee7\u65e5\u5fd7\uff08relay log\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u9519\u8bef\u65e5\u5fd7",children:"\u9519\u8bef\u65e5\u5fd7"}),"\n",(0,i.jsx)(e.p,{children:"\u9519\u8bef\u65e5\u5fd7\u662f MySQL \u4e2d\u6700\u91cd\u8981\u7684\u65e5\u5fd7\u4e4b\u4e00\uff0c\u8bb0\u5f55\u4e86\u5f53 mysqld \u542f\u52a8\u548c\u505c\u6b62\u65f6\uff0c\u4ee5\u53ca\u670d\u52a1\u5668\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u53d1\u751f\u4efb\u4f55\u4e25\u91cd\u9519\u8bef\u65f6\u7684\u76f8\u5173\u4fe1\u606f\u3002\u5f53\u6570\u636e\u5e93\u51fa\u73b0\u4efb\u4f55\u6545\u969c\u5bfc\u81f4\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u65f6\uff0c\u53ef\u4ee5\u9996\u5148\u67e5\u770b\u6b64\u65e5\u5fd7"}),"\n",(0,i.jsxs)(e.p,{children:["\u8be5\u65e5\u5fd7\u662f\u9ed8\u8ba4\u5f00\u542f\u7684\uff0c\u9ed8\u8ba4\u4f4d\u7f6e\u662f\uff1a",(0,i.jsx)(e.code,{children:"/var/log/mysql/error.log"})]}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u6307\u4ee4\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SHOW VARIABLES LIKE 'log_error%';\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u65e5\u5fd7\u5185\u5bb9\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"tail -f /var/log/mysql/error.log\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5f52\u6863\u65e5\u5fd7",children:"\u5f52\u6863\u65e5\u5fd7"}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u4ecb\u7ecd-10",children:"\u57fa\u672c\u4ecb\u7ecd"}),"\n",(0,i.jsxs)(e.p,{children:["\u5f52\u6863\u65e5\u5fd7\uff08BINLOG\uff09\u4e5f\u53eb\u4e8c\u8fdb\u5236\u65e5\u5fd7\uff0c\u662f\u56e0\u4e3a\u91c7\u7528\u4e8c\u8fdb\u5236\u8fdb\u884c\u5b58\u50a8\uff0c\u8bb0\u5f55\u4e86\u6240\u6709\u7684 DDL\uff08\u6570\u636e\u5b9a\u4e49\u8bed\u8a00\uff09\u8bed\u53e5\u548c DML\uff08\u6570\u636e\u64cd\u4f5c\u8bed\u8a00\uff09\u8bed\u53e5\uff0c\u4f46",(0,i.jsx)(e.strong,{children:"\u4e0d\u5305\u62ec\u6570\u636e\u67e5\u8be2\u8bed\u53e5\uff0c\u5728\u4e8b\u52a1\u63d0\u4ea4\u524d\u7684\u6700\u540e\u9636\u6bb5\u5199\u5165"})]}),"\n",(0,i.jsxs)(e.p,{children:["\u4f5c\u7528\uff1a",(0,i.jsx)(e.strong,{children:"\u707e\u96be\u65f6\u7684\u6570\u636e\u6062\u590d\u548c MySQL \u7684\u4e3b\u4ece\u590d\u5236"})]}),"\n",(0,i.jsx)(e.p,{children:"\u5f52\u6863\u65e5\u5fd7\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u662f\u6ca1\u6709\u5f00\u542f\u7684\uff0c\u9700\u8981\u5728 MySQL \u914d\u7f6e\u6587\u4ef6\u4e2d\u5f00\u542f\uff0c\u5e76\u914d\u7f6e MySQL \u65e5\u5fd7\u7684\u683c\u5f0f\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"cd /etc/mysql\nvim my.cnf\n\n# \u914d\u7f6e\u5f00\u542fbinlog\u65e5\u5fd7\uff0c \u65e5\u5fd7\u7684\u6587\u4ef6\u524d\u7f00\u4e3a mysqlbin -----\x3e \u751f\u6210\u7684\u6587\u4ef6\u540d\u5982: mysqlbin.000001\nlog_bin=mysqlbin\n# \u914d\u7f6e\u4e8c\u8fdb\u5236\u65e5\u5fd7\u7684\u683c\u5f0f\nbinlog_format=STATEMENT\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u65e5\u5fd7\u5b58\u653e\u4f4d\u7f6e\uff1a\u914d\u7f6e\u65f6\u7ed9\u5b9a\u4e86\u6587\u4ef6\u540d\u4f46\u662f\u6ca1\u6709\u6307\u5b9a\u8def\u5f84\uff0c\u65e5\u5fd7\u9ed8\u8ba4\u5199\u5165MySQL \u7684\u6570\u636e\u76ee\u5f55"}),"\n",(0,i.jsx)(e.p,{children:"\u65e5\u5fd7\u683c\u5f0f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["STATEMENT\uff1a\u8be5\u65e5\u5fd7\u683c\u5f0f\u5728\u65e5\u5fd7\u6587\u4ef6\u4e2d\u8bb0\u5f55\u7684\u90fd\u662f ",(0,i.jsx)(e.strong,{children:"SQL \u8bed\u53e5"}),"\uff0c\u6bcf\u4e00\u6761\u5bf9\u6570\u636e\u8fdb\u884c\u4fee\u6539\u7684 SQL \u90fd\u4f1a\u8bb0\u5f55\u5728\u65e5\u5fd7\u6587\u4ef6\u4e2d\uff0c\u901a\u8fc7 mysqlbinlog \u5de5\u5177\uff0c\u53ef\u4ee5\u67e5\u770b\u5230\u6bcf\u6761\u8bed\u53e5\u7684\u6587\u672c\u3002\u4e3b\u4ece\u590d\u5236\u65f6\uff0c\u4ece\u5e93\u4f1a\u5c06\u65e5\u5fd7\u89e3\u6790\u4e3a\u539f\u8bed\u53e5\uff0c\u5e76\u5728\u4ece\u5e93\u91cd\u65b0\u6267\u884c\u4e00\u904d"]}),"\n",(0,i.jsx)(e.p,{children:"\u7f3a\u70b9\uff1a\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e3b\u5907\u4e0d\u4e00\u81f4\uff0c\u56e0\u4e3a\u8bb0\u5f55\u7684 SQL \u5728\u4e0d\u540c\u7684\u73af\u5883\u4e2d\u53ef\u80fd\u9009\u62e9\u7684\u7d22\u5f15\u4e0d\u540c\uff0c\u5bfc\u81f4\u7ed3\u679c\u4e0d\u540c"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["ROW\uff1a\u8be5\u65e5\u5fd7\u683c\u5f0f\u5728\u65e5\u5fd7\u6587\u4ef6\u4e2d\u8bb0\u5f55\u7684\u662f\u6bcf\u4e00\u884c\u7684",(0,i.jsx)(e.strong,{children:"\u6570\u636e\u53d8\u66f4"}),"\uff0c\u800c\u4e0d\u662f\u8bb0\u5f55 SQL \u8bed\u53e5\u3002\u6bd4\u5982\u6267\u884c SQL \u8bed\u53e5 ",(0,i.jsx)(e.code,{children:"update tb_book set status='1'"}),"\uff0c\u5982\u679c\u662f STATEMENT\uff0c\u5728\u65e5\u5fd7\u4e2d\u4f1a\u8bb0\u5f55\u4e00\u884c SQL \u8bed\u53e5\uff1b \u5982\u679c\u662f ROW\uff0c\u7531\u4e8e\u662f\u5bf9\u5168\u8868\u8fdb\u884c\u66f4\u65b0\uff0c\u5c31\u662f\u6bcf\u4e00\u884c\u8bb0\u5f55\u90fd\u4f1a\u53d1\u751f\u53d8\u66f4\uff0cROW \u683c\u5f0f\u7684\u65e5\u5fd7\u4e2d\u4f1a\u8bb0\u5f55\u6bcf\u4e00\u884c\u7684\u6570\u636e\u53d8\u66f4"]}),"\n",(0,i.jsx)(e.p,{children:"\u7f3a\u70b9\uff1a\u8bb0\u5f55\u7684\u6570\u636e\u6bd4\u8f83\u591a\uff0c\u5360\u7528\u5f88\u591a\u7684\u5b58\u50a8\u7a7a\u95f4"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"MIXED\uff1a\u8fd9\u662f MySQL \u9ed8\u8ba4\u7684\u65e5\u5fd7\u683c\u5f0f\uff0c\u6df7\u5408\u4e86STATEMENT \u548c ROW \u4e24\u79cd\u683c\u5f0f\uff0cMIXED \u683c\u5f0f\u80fd\u5c3d\u91cf\u5229\u7528\u4e24\u79cd\u6a21\u5f0f\u7684\u4f18\u70b9\uff0c\u800c\u907f\u5f00\u5b83\u4eec\u7684\u7f3a\u70b9"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u65e5\u5fd7\u5237\u76d8-1",children:"\u65e5\u5fd7\u5237\u76d8"}),"\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5148\u5c06\u65e5\u5fd7\u5199\uff08write\uff09\u5230 binlog cache\uff0c\u4e8b\u52a1\u63d0\u4ea4\u65f6\u518d\u628a binlog cache \u5199\uff08fsync\uff09\u5230 binlog \u6587\u4ef6\u4e2d\uff0c\u4e00\u4e2a\u4e8b\u52a1\u7684 binlog \u662f\u4e0d\u80fd\u88ab\u62c6\u5f00\u7684\uff0c\u6240\u4ee5\u4e0d\u8bba\u8fd9\u4e2a\u4e8b\u52a1\u591a\u5927\u4e5f\u8981\u786e\u4fdd\u4e00\u6b21\u6027\u5199\u5165"}),"\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\u63d0\u4ea4\u65f6\u6267\u884c\u5668\u628a binlog cache \u91cc\u7684\u5b8c\u6574\u4e8b\u52a1\u5199\u5165\u5230 binlog \u4e2d\uff0c\u5e76\u6e05\u7a7a binlog cache"}),"\n",(0,i.jsx)(e.p,{children:"write \u548c fsync \u7684\u65f6\u673a\u7531\u53c2\u6570 sync_binlog \u63a7\u5236\u7684\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"sync_binlog=0\uff1a\u8868\u793a\u6bcf\u6b21\u63d0\u4ea4\u4e8b\u52a1\u90fd\u53ea write\uff0c\u4e0d fsync"}),"\n",(0,i.jsx)(e.li,{children:"sync_binlog=1\uff1a\u8868\u793a\u6bcf\u6b21\u63d0\u4ea4\u4e8b\u52a1\u90fd\u4f1a\u6267\u884c fsync"}),"\n",(0,i.jsx)(e.li,{children:"sync_binlog=N(N>1)\uff1a\u8868\u793a\u6bcf\u6b21\u63d0\u4ea4\u4e8b\u52a1\u90fd write\uff0c\u4f46\u7d2f\u79ef N \u4e2a\u4e8b\u52a1\u540e\u624d fsync\uff0c\u4f46\u662f\u5982\u679c\u4e3b\u673a\u53d1\u751f\u5f02\u5e38\u91cd\u542f\uff0c\u4f1a\u4e22\u5931\u6700\u8fd1 N \u4e2a\u4e8b\u52a1\u7684 binlog \u65e5\u5fd7"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u65e5\u5fd7\u8bfb\u53d6",children:"\u65e5\u5fd7\u8bfb\u53d6"}),"\n",(0,i.jsx)(e.p,{children:"\u65e5\u5fd7\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e\uff1a/var/lib/mysql"}),"\n",(0,i.jsx)(e.p,{children:"\u7531\u4e8e\u65e5\u5fd7\u4ee5\u4e8c\u8fdb\u5236\u65b9\u5f0f\u5b58\u50a8\uff0c\u4e0d\u80fd\u76f4\u63a5\u8bfb\u53d6\uff0c\u9700\u8981\u7528 mysqlbinlog \u5de5\u5177\u6765\u67e5\u770b\uff0c\u8bed\u6cd5\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"mysqlbinlog log-file;\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b STATEMENT \u683c\u5f0f\u65e5\u5fd7\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u63d2\u5165\u8bed\u53e5\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"INSERT INTO tb_book VALUES(NULL,'Lucene','2088-05-01','0');\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"cd /var/lib/mysql"}),"\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"-rw-r-----  1 mysql mysql      177 5\u6708  23 21:08 mysqlbin.000001\n-rw-r-----  1 mysql mysql       18 5\u6708  23 21:04 mysqlbin.index\n"})}),"\n",(0,i.jsx)(e.p,{children:"mysqlbin.index\uff1a\u8be5\u6587\u4ef6\u662f\u65e5\u5fd7\u7d22\u5f15\u6587\u4ef6 \uff0c \u8bb0\u5f55\u65e5\u5fd7\u7684\u6587\u4ef6\u540d\uff1b"}),"\n",(0,i.jsx)(e.p,{children:"mysqlbing.000001\uff1a\u65e5\u5fd7\u6587\u4ef6"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u65e5\u5fd7\u5185\u5bb9\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"mysqlbinlog mysqlbing.000001;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(12743).A+"",width:"1059",height:"548"})}),"\n",(0,i.jsx)(e.p,{children:"\u65e5\u5fd7\u7ed3\u5c3e\u6709 COMMIT"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b ROW \u683c\u5f0f\u65e5\u5fd7\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539\u914d\u7f6e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"# \u914d\u7f6e\u4e8c\u8fdb\u5236\u65e5\u5fd7\u7684\u683c\u5f0f\nbinlog_format=ROW\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u63d2\u5165\u6570\u636e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"INSERT INTO tb_book VALUES(NULL,'SpringCloud\u5b9e\u6218','2088-05-05','0');\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u65e5\u5fd7\u5185\u5bb9\uff1a\u65e5\u5fd7\u683c\u5f0f ROW\uff0c\u76f4\u63a5\u67e5\u770b\u6570\u636e\u662f\u4e71\u7801\uff0c\u53ef\u4ee5\u5728 mysqlbinlog \u540e\u9762\u52a0\u4e0a\u53c2\u6570 -vv"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"mysqlbinlog -vv mysqlbin.000002\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(92684).A+"",width:"1169",height:"386"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u65e5\u5fd7\u5220\u9664",children:"\u65e5\u5fd7\u5220\u9664"}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u4e8e\u6bd4\u8f83\u7e41\u5fd9\u7684\u7cfb\u7edf\uff0c\u751f\u6210\u65e5\u5fd7\u91cf\u5927\uff0c\u8fd9\u4e9b\u65e5\u5fd7\u5982\u679c\u957f\u65f6\u95f4\u4e0d\u6e05\u9664\uff0c\u5c06\u4f1a\u5360\u7528\u5927\u91cf\u7684\u78c1\u76d8\u7a7a\u95f4\uff0c\u9700\u8981\u5220\u9664\u65e5\u5fd7"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Reset Master \u6307\u4ee4\u5220\u9664\u5168\u90e8 binlog \u65e5\u5fd7\uff0c\u5220\u9664\u4e4b\u540e\uff0c\u65e5\u5fd7\u7f16\u53f7\u5c06\u4ece xxxx.000001\u91cd\u65b0\u5f00\u59cb"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"Reset Master\t-- MySQL\u6307\u4ee4\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u6267\u884c\u6307\u4ee4 ",(0,i.jsx)(e.code,{children:"PURGE MASTER LOGS TO 'mysqlbin.***"}),"\uff0c\u8be5\u547d\u4ee4\u5c06\u5220\u9664 ",(0,i.jsx)(e.code,{children:" ***"})," \u7f16\u53f7\u4e4b\u524d\u7684\u6240\u6709\u65e5\u5fd7"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u6267\u884c\u6307\u4ee4 ",(0,i.jsx)(e.code,{children:"PURGE MASTER LOGS BEFORE 'yyyy-mm-dd hh:mm:ss'"})," \uff0c\u8be5\u547d\u4ee4\u5c06\u5220\u9664\u65e5\u5fd7\u4e3a ",(0,i.jsx)(e.code,{children:"yyyy-mm-dd hh:mm:ss"})," \u4e4b\u524d\u4ea7\u751f\u7684\u65e5\u5fd7"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u8bbe\u7f6e\u53c2\u6570 ",(0,i.jsx)(e.code,{children:"--expire_logs_days=#"}),"\uff0c\u6b64\u53c2\u6570\u7684\u542b\u4e49\u662f\u8bbe\u7f6e\u65e5\u5fd7\u7684\u8fc7\u671f\u5929\u6570\uff0c\u8fc7\u4e86\u6307\u5b9a\u7684\u5929\u6570\u540e\u65e5\u5fd7\u5c06\u4f1a\u88ab\u81ea\u52a8\u5220\u9664\uff0c\u8fd9\u6837\u505a\u6709\u5229\u4e8e\u51cf\u5c11\u7ba1\u7406\u65e5\u5fd7\u7684\u5de5\u4f5c\u91cf\uff0c\u914d\u7f6e my.cnf \u6587\u4ef6\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"log_bin=mysqlbin\nbinlog_format=ROW\n--expire_logs_days=3\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6570\u636e\u6062\u590d-1",children:"\u6570\u636e\u6062\u590d"}),"\n",(0,i.jsx)(e.p,{children:"\u8bef\u5220\u5e93\u6216\u8005\u8868\u65f6\uff0c\u9700\u8981\u6839\u636e binlog \u8fdb\u884c\u6570\u636e\u6062\u590d"}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u822c\u60c5\u51b5\u4e0b\u6570\u636e\u5e93\u6709\u5b9a\u65f6\u7684\u5168\u91cf\u5907\u4efd\uff0c\u5047\u5982\u6bcf\u5929 0 \u70b9\u5b9a\u65f6\u5907\u4efd\uff0c12 \u70b9\u8bef\u5220\u4e86\u5e93\uff0c\u6062\u590d\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53d6\u6700\u8fd1\u4e00\u6b21\u5168\u91cf\u5907\u4efd\uff0c\u7528\u5907\u4efd\u6062\u590d\u51fa\u4e00\u4e2a\u4e34\u65f6\u5e93"}),"\n",(0,i.jsx)(e.li,{children:"\u4ece\u65e5\u5fd7\u6587\u4ef6\u4e2d\u53d6\u51fa\u51cc\u6668 0 \u70b9\u4e4b\u540e\u7684\u65e5\u5fd7"}),"\n",(0,i.jsx)(e.li,{children:"\u628a\u9664\u4e86\u8bef\u5220\u9664\u6570\u636e\u7684\u8bed\u53e5\u5916\u65e5\u5fd7\uff0c\u5168\u90e8\u5e94\u7528\u5230\u4e34\u65f6\u5e93"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8df3\u8fc7\u8bef\u5220\u9664\u8bed\u53e5\u65e5\u5fd7\u7684\u65b9\u6cd5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u539f\u5b9e\u4f8b\u6ca1\u6709\u4f7f\u7528 GTID \u6a21\u5f0f\uff0c\u53ea\u80fd\u5728\u5e94\u7528\u5230\u5305\u542b 12 \u70b9\u7684 binlog \u6587\u4ef6\u7684\u65f6\u5019\uff0c\u5148\u7528 \u2013stop-position \u53c2\u6570\u6267\u884c\u5230\u8bef\u64cd\u4f5c\u4e4b\u524d\u7684\u65e5\u5fd7\uff0c\u7136\u540e\u518d\u7528 \u2013start-position \u4ece\u8bef\u64cd\u4f5c\u4e4b\u540e\u7684\u65e5\u5fd7\u7ee7\u7eed\u6267\u884c"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u5b9e\u4f8b\u4f7f\u7528\u4e86 GTID \u6a21\u5f0f\uff0c\u5047\u8bbe\u8bef\u64cd\u4f5c\u547d\u4ee4\u7684 GTID \u662f gtid1\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u63d0\u4ea4\u4e00\u4e2a\u7a7a\u4e8b\u52a1\u5148\u5c06\u8fd9\u4e2a GTID \u52a0\u5230\u4e34\u65f6\u5b9e\u4f8b\u7684 GTID \u96c6\u5408\uff0c\u4e4b\u540e\u6309\u987a\u5e8f\u6267\u884c binlog \u7684\u65f6\u5c31\u4f1a\u81ea\u52a8\u8df3\u8fc7\u8bef\u64cd\u4f5c\u7684\u8bed\u53e5"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u67e5\u8be2\u65e5\u5fd7",children:"\u67e5\u8be2\u65e5\u5fd7"}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u65e5\u5fd7\u4e2d\u8bb0\u5f55\u4e86\u5ba2\u6237\u7aef\u7684\u6240\u6709\u64cd\u4f5c\u8bed\u53e5\uff0c\u800c\u4e8c\u8fdb\u5236\u65e5\u5fd7\u4e0d\u5305\u542b\u67e5\u8be2\u6570\u636e\u7684 SQL \u8bed\u53e5"}),"\n",(0,i.jsx)(e.p,{children:"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u67e5\u8be2\u65e5\u5fd7\u662f\u672a\u5f00\u542f\u7684\u3002\u5982\u679c\u9700\u8981\u5f00\u542f\u67e5\u8be2\u65e5\u5fd7\uff0c\u914d\u7f6e my.cnf\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"# \u8be5\u9009\u9879\u7528\u6765\u5f00\u542f\u67e5\u8be2\u65e5\u5fd7\uff0c\u53ef\u9009\u503c0\u6216\u80051\uff0c0\u4ee3\u8868\u5173\u95ed\uff0c1\u4ee3\u8868\u5f00\u542f \ngeneral_log=1\n# \u8bbe\u7f6e\u65e5\u5fd7\u7684\u6587\u4ef6\u540d\uff0c\u5982\u679c\u6ca1\u6709\u6307\u5b9a\uff0c\u9ed8\u8ba4\u7684\u6587\u4ef6\u540d\u4e3ahost_name.log\uff0c\u5b58\u653e\u5728/var/lib/mysql\ngeneral_log_file=mysql_query.log\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u914d\u7f6e\u5b8c\u6bd5\u4e4b\u540e\uff0c\u5728\u6570\u636e\u5e93\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM tb_book;\nSELECT * FROM tb_book WHERE id = 1;\nUPDATE tb_book SET name = 'lucene\u5165\u95e8\u6307\u5357' WHERE id = 5;\nSELECT * FROM tb_book WHERE id < 8\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\uff0c \u518d\u6b21\u6765\u67e5\u8be2\u65e5\u5fd7\u6587\u4ef6\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(2706).A+"",width:"1054",height:"289"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u6162\u65e5\u5fd7",children:"\u6162\u65e5\u5fd7"}),"\n",(0,i.jsx)(e.p,{children:"\u6162\u67e5\u8be2\u65e5\u5fd7\u8bb0\u5f55\u6240\u6709\u6267\u884c\u65f6\u95f4\u8d85\u8fc7 long_query_time \u5e76\u4e14\u626b\u63cf\u8bb0\u5f55\u6570\u4e0d\u5c0f\u4e8e min_examined_row_limit \u7684\u6240\u6709\u7684 SQL \u8bed\u53e5\u7684\u65e5\u5fd7long_query_time \u9ed8\u8ba4\u4e3a 10 \u79d2\uff0c\u6700\u5c0f\u4e3a 0\uff0c \u7cbe\u5ea6\u5230\u5fae\u79d2"}),"\n",(0,i.jsxs)(e.p,{children:["\u6162\u67e5\u8be2\u65e5\u5fd7\u9ed8\u8ba4\u662f\u5173\u95ed\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e24\u4e2a\u53c2\u6570\u6765\u63a7\u5236\u6162\u67e5\u8be2\u65e5\u5fd7\uff0c\u914d\u7f6e\u6587\u4ef6 ",(0,i.jsx)(e.code,{children:"/etc/mysql/my.cnf"}),"\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"# \u8be5\u53c2\u6570\u7528\u6765\u63a7\u5236\u6162\u67e5\u8be2\u65e5\u5fd7\u662f\u5426\u5f00\u542f\uff0c\u53ef\u9009\u503c0\u6216\u80051\uff0c0\u4ee3\u8868\u5173\u95ed\uff0c1\u4ee3\u8868\u5f00\u542f \nslow_query_log=1 \n\n# \u8be5\u53c2\u6570\u7528\u6765\u6307\u5b9a\u6162\u67e5\u8be2\u65e5\u5fd7\u7684\u6587\u4ef6\u540d\uff0c\u5b58\u653e\u5728 /var/lib/mysql\nslow_query_log_file=slow_query.log\n\n# \u8be5\u9009\u9879\u7528\u6765\u914d\u7f6e\u67e5\u8be2\u7684\u65f6\u95f4\u9650\u5236\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u65f6\u95f4\u5c06\u8ba4\u4e3a\u503c\u6162\u67e5\u8be2\uff0c\u5c06\u9700\u8981\u8fdb\u884c\u65e5\u5fd7\u8bb0\u5f55\uff0c\u9ed8\u8ba410s\nlong_query_time=10\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u65e5\u5fd7\u8bfb\u53d6\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u76f4\u63a5\u901a\u8fc7 cat \u6307\u4ee4\u67e5\u8be2\u8be5\u65e5\u5fd7\u6587\u4ef6\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"cat slow_query.log\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(19997).A+"",width:"1059",height:"147"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u6162\u67e5\u8be2\u65e5\u5fd7\u5185\u5bb9\u5f88\u591a\uff0c\u76f4\u63a5\u67e5\u770b\u6587\u4ef6\u6bd4\u8f83\u7e41\u7410\uff0c\u53ef\u4ee5\u501f\u52a9 mysql \u81ea\u5e26\u7684 mysqldumpslow \u5de5\u5177\u5bf9\u6162\u67e5\u8be2\u65e5\u5fd7\u8fdb\u884c\u5206\u7c7b\u6c47\u603b\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"mysqldumpslow slow_query.log\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(38790).A+"",width:"1057",height:"104"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u8303\u5f0f",children:"\u8303\u5f0f"}),"\n",(0,i.jsx)(e.h3,{id:"\u7b2c\u4e00\u8303\u5f0f",children:"\u7b2c\u4e00\u8303\u5f0f"}),"\n",(0,i.jsxs)(e.p,{children:["\u5efa\u7acb\u79d1\u5b66\u7684\uff0c",(0,i.jsx)(e.strong,{children:"\u89c4\u8303\u7684\u6570\u636e\u8868"}),"\u5c31\u9700\u8981\u6ee1\u8db3\u4e00\u4e9b\u89c4\u5219\u6765\u4f18\u5316\u6570\u636e\u7684\u8bbe\u8ba1\u548c\u5b58\u50a8\uff0c\u8fd9\u4e9b\u89c4\u5219\u5c31\u79f0\u4e3a\u8303\u5f0f"]}),"\n",(0,i.jsxs)(e.p,{children:["**1NF\uff1a**\u6570\u636e\u5e93\u8868\u7684\u6bcf\u4e00\u5217\u90fd\u662f\u4e0d\u53ef\u5206\u5272\u7684\u539f\u5b50\u6570\u636e\u9879\uff0c\u4e0d\u80fd\u662f\u96c6\u5408\u3001\u6570\u7ec4\u7b49\u975e\u539f\u5b50\u6570\u636e\u9879\u3002\u5373\u8868\u4e2d\u7684\u67d0\u4e2a\u5217\u6709\u591a\u4e2a\u503c\u65f6\uff0c\u5fc5\u987b\u62c6\u5206\u4e3a\u4e0d\u540c\u7684\u5217\u3002\u7b80\u800c\u8a00\u4e4b\uff0c",(0,i.jsx)(e.strong,{children:"\u7b2c\u4e00\u8303\u5f0f\u6bcf\u4e00\u5217\u4e0d\u53ef\u518d\u62c6\u5206\uff0c\u79f0\u4e3a\u539f\u5b50\u6027"})]}),"\n",(0,i.jsx)(e.p,{children:"\u57fa\u672c\u8868\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(25338).A+"",width:"655",height:"355"})}),"\n",(0,i.jsx)(e.p,{children:"\u7b2c\u4e00\u8303\u5f0f\u8868\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(81626).A+"",width:"823",height:"459"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u7b2c\u4e8c\u8303\u5f0f",children:"\u7b2c\u4e8c\u8303\u5f0f"}),"\n",(0,i.jsxs)(e.p,{children:["**2NF\uff1a**\u5728\u6ee1\u8db3\u7b2c\u4e00\u8303\u5f0f\u7684\u57fa\u7840\u4e0a\uff0c\u975e\u4e3b\u5c5e\u6027\u5b8c\u5168\u4f9d\u8d56\u4e8e\u4e3b\u7801\uff08\u4e3b\u5173\u952e\u5b57\u3001\u4e3b\u952e\uff09\uff0c\u6d88\u9664\u975e\u4e3b\u5c5e\u6027\u5bf9\u4e3b\u7801\u7684\u90e8\u5206\u51fd\u6570\u4f9d\u8d56\u3002\u7b80\u800c\u8a00\u4e4b\uff0c",(0,i.jsx)(e.strong,{children:"\u8868\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5b57\u6bb5 \uff08\u6240\u6709\u5217\uff09\u90fd\u5b8c\u5168\u4f9d\u8d56\u4e8e\u4e3b\u952e\uff0c\u8bb0\u5f55\u7684\u552f\u4e00\u6027"})]}),"\n",(0,i.jsx)(e.p,{children:"\u4f5c\u7528\uff1a\u9075\u5b88\u7b2c\u4e8c\u8303\u5f0f\u51cf\u5c11\u6570\u636e\u5197\u4f59\uff0c\u901a\u8fc7\u4e3b\u952e\u533a\u5206\u76f8\u540c\u6570\u636e\u3002"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\u51fd\u6570\u4f9d\u8d56\uff1aA \u2192 B\uff0c\u5982\u679c\u901a\u8fc7 A \u5c5e\u6027(\u5c5e\u6027\u7ec4)\u7684\u503c\uff0c\u53ef\u4ee5\u786e\u5b9a\u552f\u4e00 B \u5c5e\u6027\u7684\u503c\uff0c\u5219\u79f0 B \u4f9d\u8d56\u4e8e A\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5b66\u53f7 \u2192 \u59d3\u540d\uff1b(\u5b66\u53f7\uff0c\u8bfe\u7a0b\u540d\u79f0) \u2192 \u5206\u6570"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5b8c\u5168\u51fd\u6570\u4f9d\u8d56\uff1aA \u2192 B\uff0c\u5982\u679cA\u662f\u4e00\u4e2a\u5c5e\u6027\u7ec4\uff0c\u5219 B \u5c5e\u6027\u503c\u7684\u786e\u5b9a\u9700\u8981\u4f9d\u8d56\u4e8e A \u5c5e\u6027\u7ec4\u7684\u6240\u6709\u5c5e\u6027\u503c\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"(\u5b66\u53f7\uff0c\u8bfe\u7a0b\u540d\u79f0) \u2192 \u5206\u6570"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u90e8\u5206\u51fd\u6570\u4f9d\u8d56\uff1aA \u2192 B\uff0c\u5982\u679c A \u662f\u4e00\u4e2a\u5c5e\u6027\u7ec4\uff0c\u5219 B \u5c5e\u6027\u503c\u7684\u786e\u5b9a\u53ea\u9700\u8981\u4f9d\u8d56\u4e8e A \u5c5e\u6027\u7ec4\u7684\u67d0\u4e9b\u5c5e\u6027\u503c\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"(\u5b66\u53f7\uff0c\u8bfe\u7a0b\u540d\u79f0) \u2192 \u59d3\u540d"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u4f20\u9012\u51fd\u6570\u4f9d\u8d56\uff1aA \u2192 B\uff0cB \u2192 C\uff0c\u5982\u679c\u901a\u8fc7A\u5c5e\u6027(\u5c5e\u6027\u7ec4)\u7684\u503c\uff0c\u53ef\u4ee5\u786e\u5b9a\u552f\u4e00 B \u5c5e\u6027\u7684\u503c\uff0c\u5728\u901a\u8fc7 B \u5c5e\u6027(\u5c5e\u6027\u7ec4)\u7684\u503c\uff0c\u53ef\u4ee5\u786e\u5b9a\u552f\u4e00 C \u5c5e\u6027\u7684\u503c\uff0c\u5219\u79f0 C \u4f20\u9012\u51fd\u6570\u4f9d\u8d56\u4e8e A\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5b66\u53f7 \u2192 \u7cfb\u540d\uff0c\u7cfb\u540d \u2192 \u7cfb\u4e3b\u4efb"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u7801\uff1a\u5982\u679c\u5728\u4e00\u5f20\u8868\u4e2d\uff0c\u4e00\u4e2a\u5c5e\u6027\u6216\u5c5e\u6027\u7ec4\uff0c\u88ab\u5176\u4ed6\u6240\u6709\u5c5e\u6027\u6240\u5b8c\u5168\u4f9d\u8d56\uff0c\u5219\u79f0\u8fd9\u4e2a\u5c5e\u6027(\u5c5e\u6027\u7ec4)\u4e3a\u8be5\u8868\u7684\u7801\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8be5\u8868\u4e2d\u7684\u7801\uff1a(\u5b66\u53f7\uff0c\u8bfe\u7a0b\u540d\u79f0)"}),"\n",(0,i.jsx)(e.li,{children:"\u4e3b\u5c5e\u6027\uff1a\u7801\u5c5e\u6027\u7ec4\u4e2d\u7684\u6240\u6709\u5c5e\u6027"}),"\n",(0,i.jsx)(e.li,{children:"\u975e\u4e3b\u5c5e\u6027\uff1a\u9664\u7801\u5c5e\u6027\u7ec4\u4ee5\u5916\u7684\u5c5e\u6027"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(84318).A+"",width:"1054",height:"365"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u7b2c\u4e09\u8303\u5f0f",children:"\u7b2c\u4e09\u8303\u5f0f"}),"\n",(0,i.jsxs)(e.p,{children:["**3NF\uff1a**\u5728\u6ee1\u8db3\u7b2c\u4e8c\u8303\u5f0f\u7684\u57fa\u7840\u4e0a\uff0c\u8868\u4e2d\u7684\u4efb\u4f55\u5c5e\u6027\u4e0d\u4f9d\u8d56\u4e8e\u5176\u5b83\u975e\u4e3b\u5c5e\u6027\uff0c\u6d88\u9664\u4f20\u9012\u4f9d\u8d56\u3002\u7b80\u800c\u8a00\u4e4b\uff0c",(0,i.jsx)(e.strong,{children:"\u975e\u4e3b\u952e\u90fd\u76f4\u63a5\u4f9d\u8d56\u4e8e\u4e3b\u952e\uff0c\u800c\u4e0d\u662f\u901a\u8fc7\u5176\u5b83\u7684\u952e\u6765\u95f4\u63a5\u4f9d\u8d56\u4e8e\u4e3b\u952e"}),"\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u4f5c\u7528\uff1a\u53ef\u4ee5\u901a\u8fc7\u4e3b\u952e id \u533a\u5206\u76f8\u540c\u6570\u636e\uff0c\u4fee\u6539\u6570\u636e\u7684\u65f6\u5019\u53ea\u9700\u8981\u4fee\u6539\u4e00\u5f20\u8868\uff08\u65b9\u4fbf\u4fee\u6539\uff09\uff0c\u53cd\u4e4b\u9700\u8981\u4fee\u6539\u591a\u8868\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(93931).A+"",width:"784",height:"389"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(16818).A+"",width:"886",height:"132"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h1,{id:"redis",children:"Redis"}),"\n",(0,i.jsx)(e.h2,{id:"nosql",children:"NoSQL"}),"\n",(0,i.jsx)(e.h3,{id:"\u6982\u8ff0",children:"\u6982\u8ff0"}),"\n",(0,i.jsx)(e.p,{children:"NoSQL\uff08Not-Only SQL\uff09\uff1a\u6cdb\u6307\u975e\u5173\u7cfb\u578b\u7684\u6570\u636e\u5e93\uff0c\u4f5c\u4e3a\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u8865\u5145"}),"\n",(0,i.jsx)(e.p,{children:"MySQL \u652f\u6301 ACID \u7279\u6027\uff0c\u4fdd\u8bc1\u53ef\u9760\u6027\u548c\u6301\u4e45\u6027\uff0c\u8bfb\u53d6\u6027\u80fd\u4e0d\u9ad8\uff0c\u56e0\u6b64\u9700\u8981\u7f13\u5b58\u7684\u6765\u51cf\u7f13\u6570\u636e\u5e93\u7684\u8bbf\u95ee\u538b\u529b"}),"\n",(0,i.jsx)(e.p,{children:"\u4f5c\u7528\uff1a\u5e94\u5bf9\u57fa\u4e8e\u6d77\u91cf\u7528\u6237\u548c\u6d77\u91cf\u6570\u636e\u524d\u63d0\u4e0b\u7684\u6570\u636e\u5904\u7406\u95ee\u9898"}),"\n",(0,i.jsx)(e.p,{children:"\u7279\u5f81\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53ef\u6269\u5bb9\uff0c\u53ef\u4f38\u7f29\uff0cSQL \u6570\u636e\u5173\u7cfb\u8fc7\u4e8e\u590d\u6742\uff0cNosql \u4e0d\u5b58\u5173\u7cfb\uff0c\u53ea\u5b58\u6570\u636e"}),"\n",(0,i.jsx)(e.li,{children:"\u5927\u6570\u636e\u91cf\u4e0b\u9ad8\u6027\u80fd\uff0c\u6570\u636e\u4e0d\u5b58\u53d6\u5728\u78c1\u76d8 IO\uff0c\u5b58\u53d6\u5728\u5185\u5b58"}),"\n",(0,i.jsx)(e.li,{children:"\u7075\u6d3b\u7684\u6570\u636e\u6a21\u578b\uff0c\u8bbe\u8ba1\u4e86\u4e00\u4e9b\u6570\u636e\u5b58\u50a8\u683c\u5f0f\uff0c\u80fd\u4fdd\u8bc1\u6548\u7387\u4e0a\u7684\u63d0\u9ad8"}),"\n",(0,i.jsx)(e.li,{children:"\u9ad8\u53ef\u7528\uff0c\u96c6\u7fa4"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5e38\u89c1\u7684 NoSQL\uff1aRedis\u3001memcache\u3001HBase\u3001MongoDB"}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u4e66\u7c4d\uff1a",(0,i.jsx)(e.a,{href:"https://book.douban.com/subject/25900156/",children:"https://book.douban.com/subject/25900156/"})]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u89c6\u9891\uff1a",(0,i.jsx)(e.a,{href:"https://www.bilibili.com/video/BV1CJ411m7Gc",children:"https://www.bilibili.com/video/BV1CJ411m7Gc"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"redis-1",children:"Redis"}),"\n",(0,i.jsx)(e.p,{children:"Redis (REmote DIctionary Server) \uff1a\u7528 C \u8bed\u8a00\u5f00\u53d1\u7684\u4e00\u4e2a\u5f00\u6e90\u7684\u9ad8\u6027\u80fd\u952e\u503c\u5bf9\uff08key-value\uff09\u6570\u636e\u5e93"}),"\n",(0,i.jsx)(e.p,{children:"\u7279\u5f81\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u6570\u636e\u95f4\u6ca1\u6709\u5fc5\u7136\u7684\u5173\u8054\u5173\u7cfb\uff0c",(0,i.jsx)(e.strong,{children:"\u4e0d\u5b58\u5173\u7cfb\uff0c\u53ea\u5b58\u6570\u636e"})]}),"\n",(0,i.jsxs)(e.li,{children:["\u6570\u636e",(0,i.jsx)(e.strong,{children:"\u5b58\u50a8\u5728\u5185\u5b58"}),"\uff0c\u5b58\u53d6\u901f\u5ea6\u5feb\uff0c\u89e3\u51b3\u4e86\u78c1\u76d8 IO \u901f\u5ea6\u6162\u7684\u95ee\u9898"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5185\u90e8\u91c7\u7528",(0,i.jsx)(e.strong,{children:"\u5355\u7ebf\u7a0b"}),"\u673a\u5236\u8fdb\u884c\u5de5\u4f5c"]}),"\n",(0,i.jsx)(e.li,{children:"\u9ad8\u6027\u80fd\uff0c\u5b98\u65b9\u6d4b\u8bd5\u6570\u636e\uff0c50 \u4e2a\u5e76\u53d1\u6267\u884c 100000 \u4e2a\u8bf7\u6c42\uff0c\u8bfb\u7684\u901f\u5ea6\u662f 110000 \u6b21/s\uff0c\u5199\u7684\u901f\u5ea6\u662f 81000 \u6b21/s"}),"\n",(0,i.jsxs)(e.li,{children:["\u591a\u6570\u636e\u7c7b\u578b\u652f\u6301\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5b57\u7b26\u4e32\u7c7b\u578b\uff1astring\uff08String\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u5217\u8868\u7c7b\u578b\uff1alist\uff08LinkedList\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u6563\u5217\u7c7b\u578b\uff1ahash\uff08HashMap\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u96c6\u5408\u7c7b\u578b\uff1aset\uff08HashSet\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u6709\u5e8f\u96c6\u5408\u7c7b\u578b\uff1azset/sorted_set\uff08TreeSet\uff09"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u652f\u6301\u6301\u4e45\u5316\uff0c\u53ef\u4ee5\u8fdb\u884c\u6570\u636e\u707e\u96be\u6062\u590d"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5b89\u88c5\u542f\u52a8",children:"\u5b89\u88c5\u542f\u52a8"}),"\n",(0,i.jsx)(e.p,{children:"\u5b89\u88c5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Redis 5.0 \u88ab\u5305\u542b\u5728\u9ed8\u8ba4\u7684 Ubuntu 20.04 \u8f6f\u4ef6\u6e90\u4e2d"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"sudo apt update\nsudo apt install redis-server\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u68c0\u67e5 Redis \u72b6\u6001"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"sudo systemctl status redis-server\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u542f\u52a8\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u542f\u52a8\u670d\u52a1\u5668\u2014\u2014\u53c2\u6570\u542f\u52a8"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis-server [--port port]\n#redis-server --port 6379\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u542f\u52a8\u670d\u52a1\u5668\u2014\u2014\u914d\u7f6e\u6587\u4ef6\u542f\u52a8"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis-server config_file_name\n#redis-server /etc/redis/conf/redis-6397.conf\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u542f\u52a8\u5ba2\u6237\u7aef\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis-cli [-h host] [-p port]\n#redis-cli -h 192.168.2.185 -p 6397\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u670d\u52a1\u5668\u542f\u52a8\u6307\u5b9a\u7aef\u53e3\u4f7f\u7528\u7684\u662f--port\uff0c\u5ba2\u6237\u7aef\u542f\u52a8\u6307\u5b9a\u7aef\u53e3\u4f7f\u7528\u7684\u662f-p"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u57fa\u672c\u914d\u7f6e",children:"\u57fa\u672c\u914d\u7f6e"}),"\n",(0,i.jsx)(e.h4,{id:"\u7cfb\u7edf\u76ee\u5f55",children:"\u7cfb\u7edf\u76ee\u5f55"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u6587\u4ef6\u7ed3\u6784"}),"\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u914d\u7f6e\u6587\u4ef6\u5b58\u50a8\u76ee\u5f55"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"mkdir conf\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u670d\u52a1\u5668\u6587\u4ef6\u5b58\u50a8\u76ee\u5f55\uff08\u5305\u542b\u65e5\u5fd7\u3001\u6570\u636e\u3001\u4e34\u65f6\u914d\u7f6e\u6587\u4ef6\u7b49\uff09"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"mkdir data\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u521b\u5efa\u914d\u7f6e\u6587\u4ef6\u526f\u672c\u653e\u5165 conf \u76ee\u5f55\uff0cUbuntu \u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6 redis.conf \u5728\u76ee\u5f55 ",(0,i.jsx)(e.code,{children:"/etc/redis"})," \u4e2d"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'cat redis.conf | grep -v "#" | grep -v "^$" -> /conf/redis-6379.conf\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u53bb\u9664\u914d\u7f6e\u6587\u4ef6\u7684\u6ce8\u91ca\u548c\u7a7a\u683c\uff0c\u8f93\u51fa\u5230\u65b0\u7684\u6587\u4ef6\uff0c\u547d\u4ee4\u65b9\u5f0f\u91c7\u7528 redis-port.conf"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u670d\u52a1\u5668",children:"\u670d\u52a1\u5668"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bbe\u7f6e\u670d\u52a1\u5668\u4ee5\u5b88\u62a4\u8fdb\u7a0b\u7684\u65b9\u5f0f\u8fd0\u884c\uff0c\u5173\u95ed\u540e\u670d\u52a1\u5668\u63a7\u5236\u53f0\u4e2d\u5c06\u6253\u5370\u670d\u52a1\u5668\u8fd0\u884c\u4fe1\u606f\uff08\u540c\u65e5\u5fd7\u5185\u5bb9\u76f8\u540c\uff09\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"daemonize yes|no\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7ed1\u5b9a\u4e3b\u673a\u5730\u5740\uff0c\u7ed1\u5b9a\u672c\u5730IP\u5730\u5740\uff0c\u5426\u5219SSH\u65e0\u6cd5\u8bbf\u95ee\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"bind ip\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u53e3\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"port port\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bbe\u7f6e\u670d\u52a1\u5668\u6587\u4ef6\u4fdd\u5b58\u5730\u5740\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"dir path\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bbe\u7f6e\u6570\u636e\u5e93\u7684\u6570\u91cf\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"databases 16\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u591a\u670d\u52a1\u5668\u5feb\u6377\u914d\u7f6e\uff1a"}),"\n",(0,i.jsx)(e.p,{children:"\u5bfc\u5165\u5e76\u52a0\u8f7d\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u4fe1\u606f\uff0c\u7528\u4e8e\u5feb\u901f\u521b\u5efa redis \u516c\u5171\u914d\u7f6e\u8f83\u591a\u7684 redis \u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\uff0c\u4fbf\u4e8e\u7ef4\u62a4"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"include /path/conf_name.conf\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5ba2\u6237\u7aef",children:"\u5ba2\u6237\u7aef"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u5141\u8bb8\u5ba2\u6237\u7aef\u8fde\u63a5\u6700\u5927\u6570\u91cf\uff0c\u9ed8\u8ba4 0\uff0c\u8868\u793a\u65e0\u9650\u5236\uff0c\u5f53\u5ba2\u6237\u7aef\u8fde\u63a5\u5230\u8fbe\u4e0a\u9650\u540e\uff0cRedis \u4f1a\u62d2\u7edd\u65b0\u7684\u8fde\u63a5\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"maxclients count\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5ba2\u6237\u7aef\u95f2\u7f6e\u7b49\u5f85\u6700\u5927\u65f6\u957f\uff0c\u8fbe\u5230\u6700\u5927\u503c\u540e\u5173\u95ed\u5bf9\u5e94\u8fde\u63a5\uff0c\u5982\u9700\u5173\u95ed\u8be5\u529f\u80fd\uff0c\u8bbe\u7f6e\u4e3a 0\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"timeout seconds\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u65e5\u5fd7\u914d\u7f6e",children:"\u65e5\u5fd7\u914d\u7f6e"}),"\n",(0,i.jsx)(e.p,{children:"\u8bbe\u7f6e\u65e5\u5fd7\u8bb0\u5f55"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bbe\u7f6e\u670d\u52a1\u5668\u4ee5\u6307\u5b9a\u65e5\u5fd7\u8bb0\u5f55\u7ea7\u522b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"loglevel debug|verbose|notice|warning\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u65e5\u5fd7\u8bb0\u5f55\u6587\u4ef6\u540d"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"logfile filename\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u65e5\u5fd7\u7ea7\u522b\u5f00\u53d1\u671f\u8bbe\u7f6e\u4e3a verbose \u5373\u53ef\uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u914d\u7f6e\u4e3a notice\uff0c\u7b80\u5316\u65e5\u5fd7\u8f93\u51fa\u91cf\uff0c\u964d\u4f4e\u5199\u65e5\u5fd7 IO \u7684\u9891\u5ea6"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u914d\u7f6e\u6587\u4ef6\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'bind 192.168.2.185\nport 6379\n#timeout 0\ndaemonize no\nlogfile /etc/redis/data/redis-6379.log\ndir /etc/redis/data\ndbfilename "dump-6379.rdb"\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u6307\u4ee4",children:"\u57fa\u672c\u6307\u4ee4"}),"\n",(0,i.jsx)(e.p,{children:"\u5e2e\u52a9\u4fe1\u606f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u83b7\u53d6\u547d\u4ee4\u5e2e\u52a9\u6587\u6863"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"help [command]\n#help set\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u83b7\u53d6\u7ec4\u4e2d\u6240\u6709\u547d\u4ee4\u4fe1\u606f\u540d\u79f0"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"help [@group-name]\n#help @string\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u9000\u51fa\u670d\u52a1"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u9000\u51fa\u5ba2\u6237\u7aef\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"quit\nexit\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u9000\u51fa\u5ba2\u6237\u7aef\u670d\u52a1\u5668\u5feb\u6377\u952e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"Ctrl+C\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u6570\u636e\u5e93-2",children:"\u6570\u636e\u5e93"}),"\n",(0,i.jsx)(e.h3,{id:"\u670d\u52a1\u5668-1",children:"\u670d\u52a1\u5668"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u670d\u52a1\u5668\u5c06\u6240\u6709\u6570\u636e\u5e93\u4fdd\u5b58\u5728",(0,i.jsx)(e.strong,{children:"\u670d\u52a1\u5668\u72b6\u6001 redisServer \u7ed3\u6784"}),"\u7684 db \u6570\u7ec4\u4e2d\uff0c\u6570\u7ec4\u7684\u6bcf\u4e00\u9879\u90fd\u662f redisDb \u7ed3\u6784\uff0c\u4ee3\u8868\u4e00\u4e2a\u6570\u636e\u5e93\uff0c\u6bcf\u4e2a\u6570\u636e\u5e93\u4e4b\u95f4\u76f8\u4e92\u72ec\u7acb\uff0c**\u5171\u7528 **Redis \u5185\u5b58\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u3002\u5728\u521d\u59cb\u5316\u670d\u52a1\u5668\u65f6\uff0c\u6839\u636e dbnum \u5c5e\u6027\u51b3\u5b9a\u521b\u5efa\u6570\u636e\u5e93\u7684\u6570\u91cf\uff0c\u8be5\u5c5e\u6027\u7531\u670d\u52a1\u5668\u914d\u7f6e\u7684 database \u9009\u9879\u51b3\u5b9a\uff0c\u9ed8\u8ba4 16"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n    // \u4fdd\u5b58\u670d\u52a1\u5668\u6240\u6709\u7684\u6570\u636e\u5e93\n    redisDB *db;\n    \n    // \u670d\u52a1\u5668\u6570\u636e\u5e93\u7684\u6570\u91cf\n    int dbnum;\n};\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(65085).A+"",width:"906",height:"321"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u5728\u670d\u52a1\u5668\u5185\u90e8"}),"\uff0c\u5ba2\u6237\u7aef\u72b6\u6001 redisClient \u7ed3\u6784\u7684 db \u5c5e\u6027\u8bb0\u5f55\u4e86\u76ee\u6807\u6570\u636e\u5e93\uff0c\u662f\u4e00\u4e2a\u6307\u5411 redisDb \u7ed3\u6784\u7684\u6307\u9488"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisClient {\n    // \u8bb0\u5f55\u5ba2\u6237\u7aef\u6b63\u5728\u4f7f\u7528\u7684\u6570\u636e\u5e93\uff0c\u6307\u5411 redisServer.db \u6570\u7ec4\u4e2d\u7684\u67d0\u4e00\u4e2a db\n    redisDB *db;\n};\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6bcf\u4e2a Redis \u5ba2\u6237\u7aef\u90fd\u6709\u76ee\u6807\u6570\u636e\u5e93\uff0c\u6267\u884c\u6570\u636e\u5e93\u8bfb\u5199\u547d\u4ee4\u65f6\u76ee\u6807\u6570\u636e\u5e93\u5c31\u4f1a\u6210\u4e3a\u8fd9\u4e9b\u547d\u4ee4\u7684\u64cd\u4f5c\u5bf9\u8c61\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b Redis \u5ba2\u6237\u7aef\u7684\u76ee\u6807\u6570\u636e\u5e93\u4e3a 0 \u53f7\u6570\u636e\u5e93\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u6267\u884c SELECT \u547d\u4ee4\u5207\u6362\u76ee\u6807\u6570\u636e\u5e93\uff0c\u539f\u7406\u662f\u901a\u8fc7\u4fee\u6539 redisClient.db \u6307\u9488\u6307\u5411\u670d\u52a1\u5668\u4e2d\u4e0d\u540c\u6570\u636e\u5e93"}),"\n",(0,i.jsx)(e.p,{children:"\u547d\u4ee4\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"select index\t#\u5207\u6362\u6570\u636e\u5e93\uff0cindex\u4ece0-15\u53d6\u503c\nmove key db\t\t#\u6570\u636e\u79fb\u52a8\u5230\u6307\u5b9a\u6570\u636e\u5e93\uff0cdb\u662f\u6570\u636e\u5e93\u7f16\u53f7\nping\t\t\t#\u6d4b\u8bd5\u6570\u636e\u5e93\u662f\u5426\u8fde\u63a5\u6b63\u5e38\uff0c\u8fd4\u56dePONG\necho message\t#\u63a7\u5236\u53f0\u8f93\u51fa\u4fe1\u606f\n"})}),"\n",(0,i.jsx)(e.p,{children:"Redis \u6ca1\u6709\u53ef\u4ee5\u8fd4\u56de\u5ba2\u6237\u7aef\u76ee\u6807\u6570\u636e\u5e93\u7684\u547d\u4ee4\uff0c\u4f46\u662f redis-cli \u5ba2\u6237\u7aef\u65c1\u8fb9\u4f1a\u63d0\u793a\u5f53\u524d\u6240\u4f7f\u7528\u7684\u76ee\u6807\u6570\u636e\u5e93"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis> SELECT 1 \nOK \nredis[1]>\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u952e\u7a7a\u95f4",children:"\u952e\u7a7a\u95f4"}),"\n",(0,i.jsx)(e.h4,{id:"key-space",children:"key space"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u662f\u4e00\u4e2a\u952e\u503c\u5bf9\uff08key-value pair\uff09\u6570\u636e\u5e93\u670d\u52a1\u5668\uff0c\u6bcf\u4e2a\u6570\u636e\u5e93\u90fd\u7531\u4e00\u4e2a redisDb \u7ed3\u6784\u8868\u793a\uff0credisDb.dict ",(0,i.jsx)(e.strong,{children:"\u5b57\u5178\u4e2d\u4fdd\u5b58\u4e86\u6570\u636e\u5e93\u7684\u6240\u6709\u952e\u503c\u5bf9"}),"\uff0c\u5c06\u8fd9\u4e2a\u5b57\u5178\u79f0\u4e3a\u952e\u7a7a\u95f4\uff08key space\uff09"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct redisDB {\n    // \u6570\u636e\u5e93\u952e\u7a7a\u95f4\uff0c\u4fdd\u5b58\u6240\u6709\u952e\u503c\u5bf9\n    dict *dict\n} redisDB;\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u952e\u7a7a\u95f4\u548c\u7528\u6237\u6240\u89c1\u7684\u6570\u636e\u5e93\u662f\u76f4\u63a5\u5bf9\u5e94\u7684\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u952e\u7a7a\u95f4\u7684\u952e\u5c31\u662f\u6570\u636e\u5e93\u7684\u952e\uff0c\u6bcf\u4e2a\u952e\u90fd\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u5bf9\u8c61"}),"\n",(0,i.jsx)(e.li,{children:"\u952e\u7a7a\u95f4\u7684\u503c\u5c31\u662f\u6570\u636e\u5e93\u7684\u503c\uff0c\u6bcf\u4e2a\u503c\u53ef\u4ee5\u662f\u4efb\u610f\u4e00\u79cd Redis \u5bf9\u8c61"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(73413).A+"",width:"1352",height:"676"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5f53\u4f7f\u7528 Redis \u547d\u4ee4\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u8bfb\u5199\u65f6\uff0c\u670d\u52a1\u5668\u4e0d\u4ec5\u4f1a\u5bf9\u952e\u7a7a\u95f4\u6267\u884c\u6307\u5b9a\u7684\u8bfb\u5199\u64cd\u4f5c\uff0c\u8fd8\u4f1a",(0,i.jsx)(e.strong,{children:"\u8fdb\u884c\u4e00\u4e9b\u7ef4\u62a4\u64cd\u4f5c"}),"\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5728\u8bfb\u53d6\u4e00\u4e2a\u952e\u540e\uff08\u8bfb\u64cd\u4f5c\u548c\u5199\u64cd\u4f5c\u90fd\u8981\u5bf9\u952e\u8fdb\u884c\u8bfb\u53d6\uff09\uff0c\u670d\u52a1\u5668\u4f1a\u6839\u636e\u952e\u662f\u5426\u5b58\u5728\u6765\u66f4\u65b0\u670d\u52a1\u5668\u7684\u952e\u7a7a\u95f4\u547d\u4e2d hit \u6b21\u6570\u6216\u952e\u7a7a\u95f4\u4e0d\u547d\u4e2d miss \u6b21\u6570\uff0c\u8fd9\u4e24\u4e2a\u503c\u53ef\u4ee5\u5728 ",(0,i.jsx)(e.code,{children:"INFO stats"})," \u547d\u4ee4\u7684 keyspace_hits \u5c5e\u6027\u548c keyspace_misses \u5c5e\u6027\u4e2d\u67e5\u770b"]}),"\n",(0,i.jsxs)(e.li,{children:["\u66f4\u65b0\u952e\u7684 LRU\uff08\u6700\u540e\u4f7f\u7528\uff09\u65f6\u95f4\uff0c\u8be5\u503c\u53ef\u4ee5\u7528\u4e8e\u8ba1\u7b97\u952e\u7684\u95f2\u7f6e\u65f6\u95f4\uff0c\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"OBJECT idletime key"})," \u67e5\u770b\u952e key \u7684\u95f2\u7f6e\u65f6\u95f4"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u5728\u8bfb\u53d6\u4e00\u4e2a\u952e\u65f6\u53d1\u73b0\u8be5\u952e\u5df2\u7ecf\u8fc7\u671f\uff0c\u670d\u52a1\u5668\u4f1a",(0,i.jsx)(e.strong,{children:"\u5148\u5220\u9664\u8fc7\u671f\u952e"}),"\uff0c\u518d\u6267\u884c\u5176\u4ed6\u64cd\u4f5c"]}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u5ba2\u6237\u7aef\u4f7f\u7528 WATCH \u547d\u4ee4\u76d1\u89c6\u4e86\u67d0\u4e2a\u952e\uff0c\u90a3\u4e48\u670d\u52a1\u5668\u5728\u5bf9\u88ab\u76d1\u89c6\u7684\u952e\u8fdb\u884c\u4fee\u6539\u4e4b\u540e\uff0c\u4f1a\u5c06\u8fd9\u4e2a\u952e\u6807\u8bb0\u4e3a\u810f\uff08dirty\uff09\uff0c\u4ece\u800c\u8ba9\u4e8b\u52a1\u6ce8\u610f\u5230\u8fd9\u4e2a\u952e\u5df2\u7ecf\u88ab\u4fee\u6539\u8fc7"}),"\n",(0,i.jsx)(e.li,{children:"\u670d\u52a1\u5668\u6bcf\u6b21\u4fee\u6539\u4e00\u4e2a\u952e\u4e4b\u540e\uff0c\u90fd\u4f1a\u5bf9 dirty \u952e\u8ba1\u6570\u5668\u7684\u503c\u589e1\uff0c\u8be5\u8ba1\u6570\u5668\u4f1a\u89e6\u53d1\u670d\u52a1\u5668\u7684\u6301\u4e45\u5316\u4ee5\u53ca\u590d\u5236\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u670d\u52a1\u5668\u5f00\u542f\u4e86\u6570\u636e\u5e93\u901a\u77e5\u529f\u80fd\uff0c\u90a3\u4e48\u5728\u5bf9\u952e\u8fdb\u884c\u4fee\u6539\u4e4b\u540e\uff0c\u670d\u52a1\u5668\u5c06\u6309\u914d\u7f6e\u53d1\u9001\u76f8\u5e94\u7684\u6570\u636e\u5e93\u901a\u77e5"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u8bfb\u5199\u6307\u4ee4",children:"\u8bfb\u5199\u6307\u4ee4"}),"\n",(0,i.jsx)(e.p,{children:"\u5e38\u89c1\u952e\u64cd\u4f5c\u6307\u4ee4\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u589e\u52a0\u6307\u4ee4"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"set key value\t\t\t\t#\u6dfb\u52a0\u4e00\u4e2a\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u952e\u503c\u5bf9\n\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u6307\u4ee4"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"del key\t\t\t\t\t\t#\u5220\u9664\u6307\u5b9akey\nunlink key   \t\t\t\t#\u975e\u963b\u585e\u5220\u9664key\uff0c\u771f\u6b63\u7684\u5220\u9664\u4f1a\u5728\u540e\u7eed\u5f02\u6b65\u64cd\u4f5c\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u66f4\u65b0\u6307\u4ee4"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"rename key newkey\t\t\t#\u6539\u540d\nrenamenx key newkey\t\t\t#\u6539\u540d\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u503c\u5f97\u66f4\u65b0\u9700\u8981\u53c2\u770b\u5177\u4f53\u5f97 Redis \u5bf9\u8c61\u5f97\u64cd\u4f5c\u65b9\u5f0f\uff0c\u6bd4\u5982\u5b57\u7b26\u4e32\u5bf9\u8c61\u6267\u884c ",(0,i.jsx)(e.code,{children:"SET key value"})," \u5c31\u53ef\u4ee5\u5b8c\u6210\u4fee\u6539"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u6307\u4ee4"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"exists key\t\t\t\t\t#\u83b7\u53d6key\u662f\u5426\u5b58\u5728\nrandomkey\t\t\t\t\t#\u968f\u673a\u8fd4\u56de\u4e00\u4e2a\u952e\nkeys pattern\t\t\t\t#\u67e5\u8be2key\n"})}),"\n",(0,i.jsxs)(e.p,{children:["KEYS \u547d\u4ee4\u9700\u8981",(0,i.jsx)(e.strong,{children:"\u904d\u5386\u5b58\u50a8\u7684\u952e\u503c\u5bf9"}),"\uff0c\u64cd\u4f5c\u5ef6\u65f6\u9ad8\uff0c\u4e00\u822c\u4e0d\u88ab\u5efa\u8bae\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u4e2d"]}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u6a21\u5f0f\u89c4\u5219\uff1a* \u5339\u914d\u4efb\u610f\u6570\u91cf\u7684\u4efb\u610f\u7b26\u53f7\u3001? \u914d\u5408\u4e00\u4e2a\u4efb\u610f\u7b26\u53f7\u3001[] \u5339\u914d\u4e00\u4e2a\u6307\u5b9a\u7b26\u53f7"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"keys *\t\t\t\t\t\t#\u67e5\u8be2\u6240\u6709key\nkeys aa*\t\t\t\t\t#\u67e5\u8be2\u6240\u6709\u4ee5aa\u5f00\u5934\nkeys *bb\t\t\t\t\t#\u67e5\u8be2\u6240\u6709\u4ee5bb\u7ed3\u5c3e\nkeys ??cc\t\t\t\t\t#\u67e5\u8be2\u6240\u6709\u524d\u9762\u4e24\u4e2a\u5b57\u7b26\u4efb\u610f\uff0c\u540e\u9762\u4ee5cc\u7ed3\u5c3e \nkeys user:?\t\t\t\t\t#\u67e5\u8be2\u6240\u6709\u4ee5user:\u5f00\u5934\uff0c\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\u4efb\u610f\nkeys u[st]er:1\t\t\t\t#\u67e5\u8be2\u6240\u6709\u4ee5u\u5f00\u5934\uff0c\u4ee5er:1\u7ed3\u5c3e\uff0c\u4e2d\u95f4\u5305\u542b\u4e00\u4e2a\u5b57\u6bcd\uff0cs\u6216t\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5176\u4ed6\u6307\u4ee4"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"type key\t\t\t\t\t#\u83b7\u53d6key\u7684\u7c7b\u578b\ndbsize\t\t\t\t\t\t#\u83b7\u53d6\u5f53\u524d\u6570\u636e\u5e93\u7684\u6570\u636e\u603b\u91cf\uff0c\u5373key\u7684\u4e2a\u6570\nflushdb\t\t\t\t\t\t#\u6e05\u9664\u5f53\u524d\u6570\u636e\u5e93\u7684\u6240\u6709\u6570\u636e(\u614e\u7528)\nflushall\t\t\t\t\t#\u6e05\u9664\u6240\u6709\u6570\u636e(\u614e\u7528)\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u6267\u884c FLUSHDB \u8fd9\u6837\u7684\u5371\u9669\u547d\u4ee4\u4e4b\u524d\uff0c\u6700\u597d\u5148\u6267\u884c\u4e00\u4e2a SELECT \u547d\u4ee4\uff0c\u4fdd\u8bc1\u5f53\u524d\u6240\u64cd\u4f5c\u7684\u6570\u636e\u5e93\u662f\u76ee\u6807\u6570\u636e\u5e93"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u65f6\u6548\u8bbe\u7f6e",children:"\u65f6\u6548\u8bbe\u7f6e"}),"\n",(0,i.jsx)(e.p,{children:"\u5ba2\u6237\u7aef\u53ef\u4ee5\u4ee5\u79d2\u6216\u6beb\u79d2\u7684\u7cbe\u5ea6\u4e3a\u6570\u636e\u5e93\u4e2d\u7684\u67d0\u4e2a\u952e\u8bbe\u7f6e\u751f\u5b58\u65f6\u95f4\uff08TimeTo Live, TTL\uff09\uff0c\u5728\u7ecf\u8fc7\u6307\u5b9a\u65f6\u95f4\u4e4b\u540e\uff0c\u670d\u52a1\u5668\u5c31\u4f1a\u81ea\u52a8\u5220\u9664\u751f\u5b58\u65f6\u95f4\u4e3a 0 \u7684\u952e\uff1b\u4e5f\u53ef\u4ee5\u4ee5 UNIX \u65f6\u95f4\u6233\u7684\u65b9\u5f0f\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\uff08expire time\uff09\uff0c\u5f53\u952e\u7684\u8fc7\u671f\u65f6\u95f4\u5230\u8fbe\uff0c\u670d\u52a1\u5668\u4f1a\u81ea\u52a8\u5220\u9664\u8fd9\u4e2a\u952e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"expire key seconds\t\t\t#\u4e3a\u6307\u5b9akey\u8bbe\u7f6e\u751f\u5b58\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2\npexpire key milliseconds\t#\u4e3a\u6307\u5b9akey\u8bbe\u7f6e\u751f\u5b58\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\nexpireat key timestamp\t\t#\u4e3a\u6307\u5b9akey\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u65f6\u95f4\u6233\npexpireat key mil-timestamp\t#\u4e3a\u6307\u5b9akey\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u65f6\u95f4\u6233\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5b9e\u9645\u4e0a EXPIRE\u3001EXPIRE\u3001EXPIREAT \u4e09\u4e2a\u547d\u4ee4",(0,i.jsx)(e.strong,{children:"\u5e95\u5c42\u90fd\u662f\u8f6c\u6362\u4e3a PEXPIREAT \u547d\u4ee4"}),"\u6765\u5b9e\u73b0\u7684"]}),"\n",(0,i.jsx)(e.li,{children:"SETEX \u547d\u4ee4\u53ef\u4ee5\u5728\u8bbe\u7f6e\u4e00\u4e2a\u5b57\u7b26\u4e32\u952e\u7684\u540c\u65f6\u4e3a\u952e\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\uff0c\u4f46\u662f\u8be5\u547d\u4ee4\u662f\u4e00\u4e2a\u7c7b\u578b\u9650\u5b9a\u547d\u4ee4"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"redisDb \u7ed3\u6784\u7684 expires \u5b57\u5178\u4fdd\u5b58\u4e86\u6570\u636e\u5e93\u4e2d\u6240\u6709\u952e\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u5b57\u5178\u79f0\u4e3a\u8fc7\u671f\u5b57\u5178\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u952e\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u6307\u5411\u952e\u7a7a\u95f4\u4e2d\u7684\u67d0\u4e2a\u952e\u5bf9\u8c61\uff08\u590d\u7528\u952e\u7a7a\u95f4\u7684\u5bf9\u8c61\uff0c\u4e0d\u4f1a\u4ea7\u751f\u5185\u5b58\u6d6a\u8d39\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u503c\u662f\u4e00\u4e2a long long \u7c7b\u578b\u7684\u6574\u6570\uff0c\u4fdd\u5b58\u4e86\u952e\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u662f\u4e00\u4e2a\u6beb\u79d2\u7cbe\u5ea6\u7684 UNIX \u65f6\u95f4\u6233"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct redisDB {\n    // \u8fc7\u671f\u5b57\u5178\uff0c\u4fdd\u5b58\u6240\u6709\u952e\u7684\u8fc7\u671f\u65f6\u95f4\n    dict *expires\n} redisDB;\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5ba2\u6237\u7aef\u6267\u884c PEXPIREAT \u547d\u4ee4\uff0c\u670d\u52a1\u5668\u4f1a\u5728\u6570\u636e\u5e93\u7684\u8fc7\u671f\u5b57\u5178\u4e2d\u5173\u8054\u7ed9\u5b9a\u7684\u6570\u636e\u5e93\u952e\u548c\u8fc7\u671f\u65f6\u95f4\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"def PEXPIREAT(key, expire_time_in_ms):\n\t# \u5982\u679c\u7ed9\u5b9a\u7684\u952e\u4e0d\u5b58\u5728\u4e8e\u952e\u7a7a\u95f4\uff0c\u90a3\u4e48\u4e0d\u80fd\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\n\tif key not in redisDb.dict:\n\t\treturn 0\n\t\t\n\t# \u5728\u8fc7\u671f\u5b57\u5178\u4e2d\u5173\u8054\u952e\u548c\u8fc7\u671f\u65f6\u95f4\n\tredisDB.expires[key] = expire_time_in_ms\n\t\n\t# \u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e\u6210\u529f\n\treturn 1\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u65f6\u6548\u72b6\u6001",children:"\u65f6\u6548\u72b6\u6001"}),"\n",(0,i.jsx)(e.p,{children:"TTL \u548c PTTL \u547d\u4ee4\u901a\u8fc7\u8ba1\u7b97\u952e\u7684\u8fc7\u671f\u65f6\u95f4\u548c\u5f53\u524d\u65f6\u95f4\u4e4b\u95f4\u7684\u5dee\uff0c\u8fd4\u56de\u8fd9\u4e2a\u952e\u7684\u5269\u4f59\u751f\u5b58\u65f6\u95f4"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8fd4\u56de\u6b63\u6570\u4ee3\u8868\u8be5\u6570\u636e\u5728\u5185\u5b58\u4e2d\u8fd8\u80fd\u5b58\u6d3b\u7684\u65f6\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"\u8fd4\u56de -1 \u4ee3\u8868\u6c38\u4e45\u6027\uff0c\u8fd4\u56de -2 \u4ee3\u8868\u952e\u4e0d\u5b58\u5728"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"ttl key\t\t\t#\u83b7\u53d6key\u7684\u5269\u4f59\u65f6\u95f4\uff0c\u6bcf\u6b21\u83b7\u53d6\u4f1a\u81ea\u52a8\u53d8\u5316(\u51cf\u5c0f)\uff0c\u7c7b\u4f3c\u4e8e\u5012\u8ba1\u65f6\npttl key\t\t#\u83b7\u53d6key\u7684\u5269\u4f59\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u6beb\u79d2\uff0c\u6bcf\u6b21\u83b7\u53d6\u4f1a\u81ea\u52a8\u53d8\u5316(\u51cf\u5c0f)\n"})}),"\n",(0,i.jsx)(e.p,{children:"PERSIST \u662f PEXPIREAT \u547d\u4ee4\u7684\u53cd\u64cd\u4f5c\uff0c\u5728\u8fc7\u671f\u5b57\u5178\u4e2d\u67e5\u627e\u7ed9\u5b9a\u7684\u952e\uff0c\u5e76\u89e3\u9664\u952e\u548c\u503c\uff08\u8fc7\u671f\u65f6\u95f4\uff09\u5728\u8fc7\u671f\u5b57\u5178\u4e2d\u7684\u5173\u8054"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"persist key\t\t#\u5207\u6362key\u4ece\u65f6\u6548\u6027\u8f6c\u6362\u4e3a\u6c38\u4e45\u6027\n"})}),"\n",(0,i.jsx)(e.p,{children:"Redis \u901a\u8fc7\u8fc7\u671f\u5b57\u5178\u53ef\u4ee5\u68c0\u67e5\u4e00\u4e2a\u7ed9\u5b9a\u952e\u662f\u5426\u8fc7\u671f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u68c0\u67e5\u7ed9\u5b9a\u952e\u662f\u5426\u5b58\u5728\u4e8e\u8fc7\u671f\u5b57\u5178\uff1a\u5982\u679c\u5b58\u5728\uff0c\u90a3\u4e48\u53d6\u5f97\u952e\u7684\u8fc7\u671f\u65f6\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"\u68c0\u67e5\u5f53\u524d UNIX \u65f6\u95f4\u6233\u662f\u5426\u5927\u4e8e\u952e\u7684\u8fc7\u671f\u65f6\u95f4\uff1a\u5982\u679c\u662f\u90a3\u4e48\u952e\u5df2\u7ecf\u8fc7\u671f\uff0c\u5426\u5219\u952e\u672a\u8fc7\u671f"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8865\u5145\uff1aAOF\u3001RDB \u548c\u590d\u5236\u529f\u80fd\u5bf9\u8fc7\u671f\u952e\u7684\u5904\u7406"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["RDB \uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u751f\u6210 RDB \u6587\u4ef6\uff0c\u7a0b\u5e8f\u4f1a\u5bf9\u6570\u636e\u5e93\u4e2d\u7684\u952e\u8fdb\u884c\u68c0\u67e5\uff0c\u5df2\u8fc7\u671f\u7684\u952e\u4e0d\u4f1a\u88ab\u4fdd\u5b58\u5230\u65b0\u521b\u5efa\u7684 RDB \u6587\u4ef6\u4e2d"}),"\n",(0,i.jsx)(e.li,{children:"\u8f7d\u5165 RDB \u6587\u4ef6\uff0c\u5982\u679c\u670d\u52a1\u5668\u4ee5\u4e3b\u670d\u52a1\u5668\u6a21\u5f0f\u8fd0\u884c\uff0c\u90a3\u4e48\u5728\u8f7d\u5165\u65f6\u4f1a\u5bf9\u952e\u8fdb\u884c\u68c0\u67e5\uff0c\u8fc7\u671f\u952e\u4f1a\u88ab\u5ffd\u7565\uff1b\u5982\u679c\u670d\u52a1\u5668\u4ee5\u4ece\u670d\u52a1\u5668\u6a21\u5f0f\u8fd0\u884c\uff0c\u4f1a\u8f7d\u5165\u6240\u6709\u952e\uff0c\u5305\u62ec\u8fc7\u671f\u952e\uff0c\u4f46\u662f\u4e3b\u4ece\u670d\u52a1\u5668\u8fdb\u884c\u6570\u636e\u540c\u6b65\u65f6\u5c31\u4f1a\u5220\u9664\u8fd9\u4e9b\u952e"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["AOF\uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5199\u5165 AOF \u6587\u4ef6\uff0c\u5982\u679c\u6570\u636e\u5e93\u4e2d\u7684\u67d0\u4e2a\u952e\u5df2\u7ecf\u8fc7\u671f\uff0c\u4f46\u8fd8\u6ca1\u6709\u88ab\u5220\u9664\uff0c\u90a3\u4e48 AOF \u6587\u4ef6\u4e0d\u4f1a\u56e0\u4e3a\u8fd9\u4e2a\u8fc7\u671f\u952e\u800c\u4ea7\u751f\u4efb\u4f55\u5f71\u54cd\uff1b\u5f53\u8be5\u8fc7\u671f\u952e\u88ab\u5220\u9664\uff0c\u7a0b\u5e8f\u4f1a\u5411 AOF \u6587\u4ef6\u8ffd\u52a0\u4e00\u6761 DEL \u547d\u4ee4\uff0c\u663e\u5f0f\u7684\u5220\u9664\u8be5\u952e"}),"\n",(0,i.jsx)(e.li,{children:"AOF \u91cd\u5199\uff0c\u4f1a\u5bf9\u6570\u636e\u5e93\u4e2d\u7684\u952e\u8fdb\u884c\u68c0\u67e5\uff0c\u5ffd\u7565\u5df2\u7ecf\u8fc7\u671f\u7684\u952e"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u590d\u5236\uff1a\u5f53\u670d\u52a1\u5668\u8fd0\u884c\u5728\u590d\u5236\u6a21\u5f0f\u4e0b\u65f6\uff0c\u4ece\u670d\u52a1\u5668\u7684\u8fc7\u671f\u952e\u5220\u9664\u52a8\u4f5c\u7531\u4e3b\u670d\u52a1\u5668\u63a7\u5236\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e3b\u670d\u52a1\u5668\u5728\u5220\u9664\u4e00\u4e2a\u8fc7\u671f\u952e\u4e4b\u540e\uff0c\u4f1a\u663e\u5f0f\u5730\u5411\u6240\u6709\u4ece\u670d\u52a1\u5668\u53d1\u9001\u4e00\u4e2a DEL \u547d\u4ee4\uff0c\u544a\u77e5\u4ece\u670d\u52a1\u5668\u5220\u9664\u8fd9\u4e2a\u8fc7\u671f\u952e"}),"\n",(0,i.jsx)(e.li,{children:"\u4ece\u670d\u52a1\u5668\u5728\u6267\u884c\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u8bfb\u547d\u4ee4\u65f6\uff0c\u5373\u4f7f\u78b0\u5230\u8fc7\u671f\u952e\u4e5f\u4e0d\u4f1a\u5c06\u8fc7\u671f\u952e\u5220\u9664\uff0c\u4f1a\u5f53\u4f5c\u672a\u8fc7\u671f\u952e\u5904\u7406\uff0c\u53ea\u6709\u5728\u63a5\u5230\u4e3b\u670d\u52a1\u5668\u53d1\u6765\u7684 DEL \u547d\u4ee4\u4e4b\u540e\uff0c\u624d\u4f1a\u5220\u9664\u8fc7\u671f\u952e\uff08\u6570\u636e\u4e0d\u4e00\u81f4\uff09"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u8fc7\u671f\u5220\u9664",children:"\u8fc7\u671f\u5220\u9664"}),"\n",(0,i.jsx)(e.h4,{id:"\u5220\u9664\u7b56\u7565",children:"\u5220\u9664\u7b56\u7565"}),"\n",(0,i.jsxs)(e.p,{children:["\u5220\u9664\u7b56\u7565\u5c31\u662f",(0,i.jsx)(e.strong,{children:"\u9488\u5bf9\u5df2\u8fc7\u671f\u6570\u636e\u7684\u5904\u7406\u7b56\u7565"}),"\uff0c\u5df2\u8fc7\u671f\u7684\u6570\u636e\u4e0d\u4e00\u5b9a\u88ab\u7acb\u5373\u5220\u9664\uff0c\u5728\u4e0d\u540c\u7684\u573a\u666f\u4e0b\u4f7f\u7528\u4e0d\u540c\u7684\u5220\u9664\u65b9\u5f0f\u4f1a\u6709\u4e0d\u540c\u6548\u679c\uff0c\u5728\u5185\u5b58\u5360\u7528\u4e0e CPU \u5360\u7528\u4e4b\u95f4\u5bfb\u627e\u4e00\u79cd\u5e73\u8861\uff0c\u987e\u6b64\u5931\u5f7c\u90fd\u4f1a\u9020\u6210\u6574\u4f53 Redis \u6027\u80fd\u7684\u4e0b\u964d\uff0c\u751a\u81f3\u5f15\u53d1\u670d\u52a1\u5668\u5b95\u673a\u6216\u5185\u5b58\u6cc4\u9732"]}),"\n",(0,i.jsx)(e.p,{children:"\u9488\u5bf9\u8fc7\u671f\u6570\u636e\u6709\u4e09\u79cd\u5220\u9664\u7b56\u7565\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5b9a\u65f6\u5220\u9664"}),"\n",(0,i.jsx)(e.li,{children:"\u60f0\u6027\u5220\u9664\uff08\u88ab\u52a8\u5220\u9664\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u5b9a\u671f\u5220\u9664"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Redis \u91c7\u7528\u60f0\u6027\u5220\u9664\u548c\u5b9a\u671f\u5220\u9664\u7b56\u7565\u7684\u7ed3\u5408\u4f7f\u7528"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5b9a\u65f6\u5220\u9664",children:"\u5b9a\u65f6\u5220\u9664"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u8bbe\u7f6e\u952e\u7684\u8fc7\u671f\u65f6\u95f4\u7684\u540c\u65f6\uff0c\u521b\u5efa\u4e00\u4e2a\u5b9a\u65f6\u5668\uff08timer\uff09\uff0c\u8ba9\u5b9a\u65f6\u5668\u5728\u952e\u7684\u8fc7\u671f\u65f6\u95f4\u5230\u8fbe\u65f6\uff0c\u7acb\u5373\u6267\u884c\u5bf9\u952e\u7684\u5220\u9664\u64cd\u4f5c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f18\u70b9\uff1a\u8282\u7ea6\u5185\u5b58\uff0c\u5230\u65f6\u5c31\u5220\u9664\uff0c\u5feb\u901f\u91ca\u653e\u6389\u4e0d\u5fc5\u8981\u7684\u5185\u5b58\u5360\u7528"}),"\n",(0,i.jsx)(e.li,{children:"\u7f3a\u70b9\uff1a\u5bf9 CPU \u4e0d\u53cb\u597d\uff0c\u65e0\u8bba CPU \u6b64\u65f6\u8d1f\u8f7d\u591a\u9ad8\u5747\u5360\u7528 CPU\uff0c\u4f1a\u5f71\u54cd Redis \u670d\u52a1\u5668\u54cd\u5e94\u65f6\u95f4\u548c\u6307\u4ee4\u541e\u5410\u91cf"}),"\n",(0,i.jsx)(e.li,{children:"\u603b\u7ed3\uff1a\u7528\u5904\u7406\u5668\u6027\u80fd\u6362\u53d6\u5b58\u50a8\u7a7a\u95f4\uff08\u62ff\u65f6\u95f4\u6362\u7a7a\u95f4\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u4e00\u4e2a\u5b9a\u65f6\u5668\u9700\u8981\u7528\u5230 Redis \u670d\u52a1\u5668\u4e2d\u7684\u65f6\u95f4\u4e8b\u4ef6\uff0c\u800c\u65f6\u95f4\u4e8b\u4ef6\u7684\u5b9e\u73b0\u65b9\u5f0f\u662f\u65e0\u5e8f\u94fe\u8868\uff0c\u67e5\u627e\u4e00\u4e2a\u4e8b\u4ef6\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(N)\uff0c\u5e76\u4e0d\u80fd\u9ad8\u6548\u5730\u5904\u7406\u5927\u91cf\u65f6\u95f4\u4e8b\u4ef6\uff0c\u6240\u4ee5\u91c7\u7528\u8fd9\u79cd\u65b9\u5f0f\u5e76\u4e0d\u73b0\u5b9e"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u60f0\u6027\u5220\u9664",children:"\u60f0\u6027\u5220\u9664"}),"\n",(0,i.jsxs)(e.p,{children:["\u6570\u636e\u5230\u8fbe\u8fc7\u671f\u65f6\u95f4\u4e0d\u505a\u5904\u7406\uff0c\u7b49\u4e0b\u6b21\u8bbf\u95ee\u5230\u8be5\u6570\u636e\u65f6\u6267\u884c ",(0,i.jsx)(e.strong,{children:"expireIfNeeded()"})," \u5224\u65ad\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u8f93\u5165\u952e\u5df2\u7ecf\u8fc7\u671f\uff0c\u90a3\u4e48 expireIfNeeded \u51fd\u6570\u5c06\u8f93\u5165\u952e\u4ece\u6570\u636e\u5e93\u4e2d\u5220\u9664\uff0c\u63a5\u7740\u8bbf\u95ee\u5c31\u4f1a\u8fd4\u56de\u7a7a"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u8f93\u5165\u952e\u672a\u8fc7\u671f\uff0c\u90a3\u4e48 expireIfNeeded \u51fd\u6570\u4e0d\u505a\u52a8\u4f5c"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6240\u6709\u7684 Redis \u8bfb\u5199\u547d\u4ee4\u5728\u6267\u884c\u524d\u90fd\u4f1a\u8c03\u7528 expireIfNeeded \u51fd\u6570\u8fdb\u884c\u68c0\u67e5\uff0c\u8be5\u51fd\u6570\u5c31\u50cf\u4e00\u4e2a\u8fc7\u6ee4\u5668\uff0c\u5728\u547d\u4ee4\u771f\u6b63\u6267\u884c\u4e4b\u524d\u8fc7\u6ee4\u6389\u8fc7\u671f\u952e"}),"\n",(0,i.jsx)(e.p,{children:"\u60f0\u6027\u5220\u9664\u7684\u7279\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f18\u70b9\uff1a\u8282\u7ea6 CPU \u6027\u80fd\uff0c\u5220\u9664\u7684\u76ee\u6807\u4ec5\u9650\u4e8e\u5f53\u524d\u5904\u7406\u7684\u952e\uff0c\u4e0d\u4f1a\u5728\u5220\u9664\u5176\u4ed6\u65e0\u5173\u7684\u8fc7\u671f\u952e\u4e0a\u82b1\u8d39\u4efb\u4f55 CPU \u65f6\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"\u7f3a\u70b9\uff1a\u5185\u5b58\u538b\u529b\u5f88\u5927\uff0c\u51fa\u73b0\u957f\u671f\u5360\u7528\u5185\u5b58\u7684\u6570\u636e\uff0c\u5982\u679c\u8fc7\u671f\u952e\u6c38\u8fdc\u4e0d\u88ab\u8bbf\u95ee\uff0c\u8fd9\u79cd\u60c5\u51b5\u76f8\u5f53\u4e8e\u5185\u5b58\u6cc4\u6f0f"}),"\n",(0,i.jsx)(e.li,{children:"\u603b\u7ed3\uff1a\u7528\u5b58\u50a8\u7a7a\u95f4\u6362\u53d6\u5904\u7406\u5668\u6027\u80fd\uff08\u62ff\u7a7a\u95f4\u6362\u65f6\u95f4\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5b9a\u671f\u5220\u9664",children:"\u5b9a\u671f\u5220\u9664"}),"\n",(0,i.jsx)(e.p,{children:"\u5b9a\u671f\u5220\u9664\u7b56\u7565\u662f\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u6267\u884c\u4e00\u6b21\u5220\u9664\u8fc7\u671f\u952e\u64cd\u4f5c\uff0c\u5e76\u901a\u8fc7\u9650\u5236\u5220\u9664\u64cd\u4f5c\u6267\u884c\u7684\u65f6\u957f\u548c\u9891\u7387\u6765\u51cf\u5c11\u5220\u9664\u64cd\u4f5c\u5bf9 CPU \u65f6\u95f4\u7684\u5f71\u54cd"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u5220\u9664\u64cd\u4f5c\u6267\u884c\u5f97\u592a\u9891\u7e41\uff0c\u6216\u8005\u6267\u884c\u65f6\u95f4\u592a\u957f\uff0c\u5c31\u4f1a\u9000\u5316\u6210\u5b9a\u65f6\u5220\u9664\u7b56\u7565\uff0c\u5c06 CPU \u65f6\u95f4\u8fc7\u591a\u5730\u6d88\u8017\u5728\u5220\u9664\u8fc7\u671f\u952e\u4e0a"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u5220\u9664\u64cd\u4f5c\u6267\u884c\u5f97\u592a\u5c11\uff0c\u6216\u8005\u6267\u884c\u65f6\u95f4\u592a\u77ed\uff0c\u5b9a\u671f\u5220\u9664\u7b56\u7565\u53c8\u4f1a\u548c\u60f0\u6027\u5220\u9664\u7b56\u7565\u4e00\u6837\uff0c\u51fa\u73b0\u6d6a\u8d39\u5185\u5b58\u7684\u60c5\u51b5"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5b9a\u671f\u5220\u9664\u662f",(0,i.jsx)(e.strong,{children:"\u5468\u671f\u6027\u8f6e\u8be2 Redis \u5e93\u4e2d\u7684\u65f6\u6548\u6027"}),"\u6570\u636e\uff0c\u4ece\u8fc7\u671f\u5b57\u5178\u4e2d\u968f\u673a\u62bd\u53d6\u4e00\u90e8\u5206\u952e\u68c0\u67e5\uff0c\u5229\u7528\u8fc7\u671f\u6570\u636e\u5360\u6bd4\u7684\u65b9\u5f0f\u63a7\u5236\u5220\u9664\u9891\u5ea6"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["Redis \u542f\u52a8\u670d\u52a1\u5668\u521d\u59cb\u5316\u65f6\uff0c\u8bfb\u53d6\u914d\u7f6e server.hz \u7684\u503c\uff0c\u9ed8\u8ba4\u4e3a 10\uff0c\u6267\u884c\u6307\u4ee4 info server \u53ef\u4ee5\u67e5\u770b\uff0c\u6bcf\u79d2\u949f\u6267\u884c server.hz \u6b21 ",(0,i.jsx)(e.code,{children:"serverCron() \u2192 activeExpireCycle()"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"activeExpireCycle() \u5bf9\u67d0\u4e2a\u6570\u636e\u5e93\u4e2d\u7684\u6bcf\u4e2a expires \u8fdb\u884c\u68c0\u6d4b\uff0c\u5de5\u4f5c\u6a21\u5f0f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8f6e\u8be2\u6bcf\u4e2a\u6570\u636e\u5e93\uff0c\u4ece\u6570\u636e\u5e93\u4e2d\u53d6\u51fa\u4e00\u5b9a\u6570\u91cf\u7684\u968f\u673a\u952e\u8fdb\u884c\u68c0\u67e5\uff0c\u5e76\u5220\u9664\u5176\u4e2d\u7684\u8fc7\u671f\u952e\uff0c\u5982\u679c\u8fc7\u671f key \u7684\u6bd4\u4f8b\u8d85\u8fc7\u4e86 25%\uff0c\u5219\u7ee7\u7eed\u91cd\u590d\u6b64\u8fc7\u7a0b\uff0c\u76f4\u5230\u8fc7\u671f key \u7684\u6bd4\u4f8b\u4e0b\u964d\u5230 25% \u4ee5\u4e0b\uff0c\u6216\u8005\u8fd9\u6b21\u4efb\u52a1\u7684\u6267\u884c\u8017\u65f6\u8d85\u8fc7\u4e86 25 \u6beb\u79d2"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5168\u5c40\u53d8\u91cf current_db \u7528\u4e8e\u8bb0\u5f55 activeExpireCycle() \u7684\u68c0\u67e5\u8fdb\u5ea6\uff08\u54ea\u4e00\u4e2a\u6570\u636e\u5e93\uff09\uff0c\u4e0b\u4e00\u6b21\u8c03\u7528\u65f6\u63a5\u7740\u8be5\u8fdb\u5ea6\u5904\u7406"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u968f\u7740\u51fd\u6570\u7684\u4e0d\u65ad\u6267\u884c\uff0c\u670d\u52a1\u5668\u4e2d\u7684\u6240\u6709\u6570\u636e\u5e93\u90fd\u4f1a\u88ab\u68c0\u67e5\u4e00\u904d\uff0c\u8fd9\u65f6\u5c06 current_db \u91cd\u7f6e\u4e3a 0\uff0c\u7136\u540e\u518d\u6b21\u5f00\u59cb\u65b0\u4e00\u8f6e\u7684\u68c0\u67e5"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5b9a\u671f\u5220\u9664\u7279\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"CPU \u6027\u80fd\u5360\u7528\u8bbe\u7f6e\u6709\u5cf0\u503c\uff0c\u68c0\u6d4b\u9891\u5ea6\u53ef\u81ea\u5b9a\u4e49\u8bbe\u7f6e"}),"\n",(0,i.jsxs)(e.li,{children:["\u5185\u5b58\u538b\u529b\u4e0d\u662f\u5f88\u5927\uff0c\u957f\u671f\u5360\u7528\u5185\u5b58\u7684",(0,i.jsx)(e.strong,{children:"\u51b7\u6570\u636e\u4f1a\u88ab\u6301\u7eed\u6e05\u7406"})]}),"\n",(0,i.jsx)(e.li,{children:"\u5468\u671f\u6027\u62bd\u67e5\u5b58\u50a8\u7a7a\u95f4\uff08\u968f\u673a\u62bd\u67e5\uff0c\u91cd\u70b9\u62bd\u67e5\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u6570\u636e\u6dd8\u6c70",children:"\u6570\u636e\u6dd8\u6c70"}),"\n",(0,i.jsx)(e.h4,{id:"\u9010\u51fa\u7b97\u6cd5",children:"\u9010\u51fa\u7b97\u6cd5"}),"\n",(0,i.jsxs)(e.p,{children:["\u6570\u636e\u6dd8\u6c70\u7b56\u7565\uff1a\u5f53\u65b0\u6570\u636e\u8fdb\u5165 Redis \u65f6\uff0c\u5728\u6267\u884c\u6bcf\u4e00\u4e2a\u547d\u4ee4\u524d\uff0c\u4f1a\u8c03\u7528 ",(0,i.jsx)(e.strong,{children:"freeMemoryIfNeeded()"})," \u68c0\u6d4b\u5185\u5b58\u662f\u5426\u5145\u8db3\u3002\u5982\u679c\u5185\u5b58\u4e0d\u6ee1\u8db3\u65b0\u52a0\u5165\u6570\u636e\u7684\u6700\u4f4e\u5b58\u50a8\u8981\u6c42\uff0cRedis \u8981\u4e34\u65f6\u5220\u9664\u4e00\u4e9b\u6570\u636e\u4e3a\u5f53\u524d\u6307\u4ee4\u6e05\u7406\u5b58\u50a8\u7a7a\u95f4\uff0c\u6e05\u7406\u6570\u636e\u7684\u7b56\u7565\u79f0\u4e3a",(0,i.jsx)(e.strong,{children:"\u9010\u51fa\u7b97\u6cd5"})]}),"\n",(0,i.jsxs)(e.p,{children:["\u9010\u51fa\u6570\u636e\u7684\u8fc7\u7a0b\u4e0d\u662f 100% \u80fd\u591f\u6e05\u7406\u51fa\u8db3\u591f\u7684\u53ef\u4f7f\u7528\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5982\u679c\u4e0d\u6210\u529f\u5219\u53cd\u590d\u6267\u884c\uff0c\u5f53\u5bf9\u6240\u6709\u6570\u636e\u5c1d\u8bd5\u5b8c\u6bd5\uff0c\u5982\u4e0d\u80fd\u8fbe\u5230\u5185\u5b58\u6e05\u7406\u7684\u8981\u6c42\uff0c",(0,i.jsx)(e.strong,{children:"\u51fa\u73b0 Redis \u5185\u5b58\u6253\u6ee1\u5f02\u5e38"}),"\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"(error) OOM command not allowed when used memory >'maxmemory'\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u7b56\u7565\u914d\u7f6e",children:"\u7b56\u7565\u914d\u7f6e"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u5982\u679c\u4e0d\u8bbe\u7f6e\u6700\u5927\u5185\u5b58\u5927\u5c0f\u6216\u8005\u8bbe\u7f6e\u6700\u5927\u5185\u5b58\u5927\u5c0f\u4e3a 0\uff0c\u5728 64 \u4f4d\u64cd\u4f5c\u7cfb\u7edf\u4e0b\u4e0d\u9650\u5236\u5185\u5b58\u5927\u5c0f\uff0c\u5728 32 \u4f4d\u64cd\u4f5c\u7cfb\u7edf\u9ed8\u8ba4\u4e3a 3GB \u5185\u5b58\uff0c\u4e00\u822c\u63a8\u8350\u8bbe\u7f6e Redis \u5185\u5b58\u4e3a\u6700\u5927\u7269\u7406\u5185\u5b58\u7684\u56db\u5206\u4e4b\u4e09"}),"\n",(0,i.jsx)(e.p,{children:"\u5185\u5b58\u914d\u7f6e\u65b9\u5f0f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u4fee\u6539\u6587\u4ef6\u914d\u7f6e\uff08\u6c38\u4e45\u751f\u6548\uff09\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 maxmemory \u5b57\u6bb5\uff0c\u5355\u4f4d\u4e3a\u5b57\u8282"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u547d\u4ee4\u4fee\u6539\uff08\u91cd\u542f\u5931\u6548\uff09\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"config set maxmemory 104857600"}),"\uff1a\u8bbe\u7f6e Redis \u6700\u5927\u5360\u7528\u5185\u5b58\u4e3a 100MB"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"config get maxmemory"}),"\uff1a\u83b7\u53d6 Redis \u6700\u5927\u5360\u7528\u5185\u5b58"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"info"})," \uff1a\u53ef\u4ee5\u67e5\u770b Redis \u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c",(0,i.jsx)(e.code,{children:"used_memory_human"})," \u5b57\u6bb5\u8868\u793a\u5b9e\u9645\u5df2\u7ecf\u5360\u7528\u7684\u5185\u5b58\uff0c",(0,i.jsx)(e.code,{children:"maxmemory"})," \u8868\u793a\u6700\u5927\u5360\u7528\u5185\u5b58"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5f71\u54cd\u6570\u636e\u6dd8\u6c70\u7684\u76f8\u5173\u914d\u7f6e\u5982\u4e0b\uff0c\u914d\u7f6e conf \u6587\u4ef6\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6bcf\u6b21\u9009\u53d6\u5f85\u5220\u9664\u6570\u636e\u7684\u4e2a\u6570\uff0c\u91c7\u7528\u968f\u673a\u83b7\u53d6\u6570\u636e\u7684\u65b9\u5f0f\u4f5c\u4e3a\u5f85\u68c0\u6d4b\u5220\u9664\u6570\u636e\uff0c\u9632\u6b62\u5168\u5e93\u626b\u63cf\uff0c\u5bfc\u81f4\u4e25\u91cd\u7684\u6027\u80fd\u6d88\u8017\uff0c\u964d\u4f4e\u8bfb\u5199\u6027\u80fd"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"maxmemory-samples count\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8fbe\u5230\u6700\u5927\u5185\u5b58\u540e\u7684\uff0c\u5bf9\u88ab\u6311\u9009\u51fa\u6765\u7684\u6570\u636e\u8fdb\u884c\u5220\u9664\u7684\u7b56\u7565"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"maxmemory-policy policy\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5220\u9664\u7684\u7b56\u7565 policy\uff1a3 \u7c7b 8 \u79cd"}),"\n",(0,i.jsx)(e.p,{children:"\u7b2c\u4e00\u7c7b\uff1a\u68c0\u6d4b\u6613\u5931\u6570\u636e\uff08\u53ef\u80fd\u4f1a\u8fc7\u671f\u7684\u6570\u636e\u96c6 server.db[i].expires\uff09\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"volatile-lru\t# \u5bf9\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684 key \u9009\u62e9\u6700\u8fd1\u6700\u4e45\u672a\u4f7f\u7528\u4f7f\u7528\u7684\u6570\u636e\u6dd8\u6c70\nvolatile-lfu\t# \u5bf9\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684 key \u9009\u62e9\u6700\u8fd1\u4f7f\u7528\u6b21\u6570\u6700\u5c11\u7684\u6570\u636e\u6dd8\u6c70\nvolatile-ttl\t# \u5bf9\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684 key \u9009\u62e9\u5c06\u8981\u8fc7\u671f\u7684\u6570\u636e\u6dd8\u6c70\nvolatile-random\t# \u5bf9\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684 key \u9009\u62e9\u4efb\u610f\u6570\u636e\u6dd8\u6c70\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u7b2c\u4e8c\u7c7b\uff1a\u68c0\u6d4b\u5168\u5e93\u6570\u636e\uff08\u6240\u6709\u6570\u636e\u96c6 server.db[i].dict \uff09\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"allkeys-lru\t\t# \u5bf9\u6240\u6709 key \u9009\u62e9\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684\u6570\u636e\u6dd8\u6c70\nallkeLyRs-lfu\t# \u5bf9\u6240\u6709 key \u9009\u62e9\u6700\u8fd1\u4f7f\u7528\u6b21\u6570\u6700\u5c11\u7684\u6570\u636e\u6dd8\u6c70\nallkeys-random\t# \u5bf9\u6240\u6709 key \u9009\u62e9\u4efb\u610f\u6570\u636e\u6dd8\u6c70\uff0c\u76f8\u5f53\u4e8e\u968f\u673a\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u7b2c\u4e09\u7c7b\uff1a\u653e\u5f03\u6570\u636e\u9a71\u9010"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"no-enviction\t#\u7981\u6b62\u9a71\u9010\u6570\u636e(redis4.0\u4e2d\u9ed8\u8ba4\u7b56\u7565)\uff0c\u4f1a\u5f15\u53d1OOM(Out Of Memory)\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u6dd8\u6c70\u7b56\u7565\u914d\u7f6e\u4f9d\u636e\uff1a\u4f7f\u7528 INFO \u547d\u4ee4\u8f93\u51fa\u76d1\u63a7\u4fe1\u606f\uff0c\u67e5\u8be2\u7f13\u5b58 hit \u548c miss \u7684\u6b21\u6570\uff0c\u6839\u636e\u9700\u6c42\u8c03\u4f18 Redis \u914d\u7f6e"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u6392\u5e8f\u673a\u5236",children:"\u6392\u5e8f\u673a\u5236"}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u4ecb\u7ecd-11",children:"\u57fa\u672c\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u7684 SORT \u547d\u4ee4\u53ef\u4ee5\u5bf9\u5217\u8868\u952e\u3001\u96c6\u5408\u952e\u6216\u8005\u6709\u5e8f\u96c6\u5408\u952e\u7684\u503c\u8fdb\u884c\u6392\u5e8f\uff0c\u5e76\u4e0d\u66f4\u6539\u96c6\u5408\u4e2d\u7684\u6570\u636e\u4f4d\u7f6e\uff0c\u53ea\u662f\u67e5\u8be2"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"SORT key [ASC/DESC]\t\t\t#\u5bf9key\u4e2d\u6570\u636e\u6392\u5e8f\uff0c\u9ed8\u8ba4\u5bf9\u6570\u5b57\u6392\u5e8f\uff0c\u5e76\u4e0d\u66f4\u6539\u96c6\u5408\u4e2d\u7684\u6570\u636e\u4f4d\u7f6e\uff0c\u53ea\u662f\u67e5\u8be2\nSORT key ALPHA\t\t\t\t#\u5bf9key\u4e2d\u5b57\u6bcd\u6392\u5e8f\uff0c\u6309\u7167\u5b57\u5178\u5e8f\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"sort",children:"SORT"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"SORT <key>"})," \u547d\u4ee4\u53ef\u4ee5\u5bf9\u4e00\u4e2a\u5305\u542b\u6570\u5b57\u503c\u7684\u952e key \u8fdb\u884c\u6392\u5e8f"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5047\u8bbe ",(0,i.jsx)(e.code,{children:"RPUSH numbers 3 1 2"}),"\uff0c\u6267\u884c ",(0,i.jsx)(e.code,{children:"SORT numbers"})," \u7684\u8be6\u7ec6\u6b65\u9aa4\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u4e00\u4e2a\u548c key \u5217\u8868\u957f\u5ea6\u76f8\u540c\u7684\u6570\u7ec4\uff0c\u6570\u7ec4\u6bcf\u9879\u90fd\u662f redisSortObject \u7ed3\u6784"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct redisSortObject {\n    // \u88ab\u6392\u5e8f\u952e\u7684\u503c\n    robj *obj;\n    \n    // \u6743\u91cd\n    union {\n        // \u6392\u5e8f\u6570\u5b57\u503c\u65f6\u4f7f\u7528\n        double score;\n        // \u6392\u5e8f\u5e26\u6709 BY \u9009\u9879\u7684\u5b57\u7b26\u4e32\n        robj *cmpobj;\n    } u;\n}\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u904d\u5386\u6570\u7ec4\uff0c\u5c06\u5404\u4e2a\u6570\u7ec4\u9879\u7684 obj \u6307\u9488\u5206\u522b\u6307\u5411 numbers \u5217\u8868\u7684\u5404\u4e2a\u9879"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u904d\u5386\u6570\u7ec4\uff0c\u5c06 obj \u6307\u9488\u6240\u6307\u5411\u7684\u5217\u8868\u9879\u8f6c\u6362\u6210\u4e00\u4e2a double \u7c7b\u578b\u7684\u6d6e\u70b9\u6570\uff0c\u5e76\u5c06\u6d6e\u70b9\u6570\u4fdd\u5b58\u5728\u5bf9\u5e94\u6570\u7ec4\u9879\u7684 u.score \u5c5e\u6027\u91cc"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u6839\u636e\u6570\u7ec4\u9879 u.score \u5c5e\u6027\u7684\u503c\uff0c\u5bf9\u6570\u7ec4\u8fdb\u884c\u6570\u5b57\u503c\u6392\u5e8f\uff0c\u6392\u5e8f\u540e\u7684\u6570\u7ec4\u9879\u6309 u.score \u5c5e\u6027\u7684\u503c",(0,i.jsx)(e.strong,{children:"\u4ece\u5c0f\u5230\u5927\u6392\u5217"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u904d\u5386\u6570\u7ec4\uff0c\u5c06\u5404\u4e2a\u6570\u7ec4\u9879\u7684 obj \u6307\u9488\u6240\u6307\u5411\u7684\u503c\u4f5c\u4e3a\u6392\u5e8f\u7ed3\u679c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u7a0b\u5e8f\u9996\u5148\u8bbf\u95ee\u6570\u7ec4\u7684\u7d22\u5f15 0\uff0c\u4f9d\u6b21\u5411\u540e\u8bbf\u95ee"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(10927).A+"",width:"1316",height:"755"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5bf9\u4e8e ",(0,i.jsx)(e.code,{children:"SORT key [ASC/DESC]"})," \u51fd\u6570\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5728\u6267\u884c\u5347\u5e8f\u6392\u5e8f\u65f6\uff0c\u6392\u5e8f\u7b97\u6cd5\u4f7f\u7528\u7684\u5bf9\u6bd4\u51fd\u6570\u4ea7\u751f\u5347\u5e8f\u5bf9\u6bd4\u7ed3\u679c"}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u6267\u884c\u964d\u5e8f\u6392\u5e8f\u65f6\uff0c\u6392\u5e8f\u7b97\u6cd5\u4f7f\u7528\u7684\u5bf9\u6bd4\u51fd\u6570\u4ea7\u751f\u964d\u5e8f\u5bf9\u6bd4\u7ed3\u679c"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"by",children:"BY"}),"\n",(0,i.jsx)(e.p,{children:"SORT \u547d\u4ee4\u9ed8\u8ba4\u4f7f\u7528\u88ab\u6392\u5e8f\u952e\u4e2d\u5305\u542b\u7684\u5143\u7d20\u4f5c\u4e3a\u6392\u5e8f\u7684\u6743\u91cd\uff0c\u5143\u7d20\u672c\u8eab\u51b3\u5b9a\u4e86\u5143\u7d20\u5728\u6392\u5e8f\u4e4b\u540e\u6240\u5904\u7684\u4f4d\u7f6e\uff0c\u901a\u8fc7\u4f7f\u7528 BY \u9009\u9879\uff0cSORT \u547d\u4ee4\u53ef\u4ee5\u6307\u5b9a\u67d0\u4e9b\u5b57\u7b26\u4e32\u952e\uff0c\u6216\u8005\u67d0\u4e2a\u54c8\u5e0c\u952e\u6240\u5305\u542b\u7684\u67d0\u4e9b\u57df\uff08field\uff09\u6765\u4f5c\u4e3a\u5143\u7d20\u7684\u6743\u91cd\uff0c\u5bf9\u4e00\u4e2a\u952e\u8fdb\u884c\u6392\u5e8f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"SORT <key> BY <pattern>\t\t\t# \u6570\u503c\nSORT <key> BY <pattern> ALPHA\t# \u5b57\u7b26\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'redis> SADD fruits "apple" "banana" "cherry" \n(integer) 3\nredis> SORT fruits ALPHA\n1)\t"apple"\n2)\t"banana"\n3)\t"cherry"\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'redis> MSET apple-price 8 banana-price 5.5 cherry-price 7 \nOK\n# \u4f7f\u7528\u6c34\u679c\u7684\u4ef7\u94b1\u8fdb\u884c\u6392\u5e8f\nredis> SORT fruits BY *-price\n1)\t"banana"\n2)\t"cherry"\n3)\t"apple"\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u5b9e\u73b0\u539f\u7406\uff1a\u6392\u5e8f\u65f6\u7684 u.score \u5c5e\u6027\u5c31\u4f1a\u88ab\u8bbe\u7f6e\u4e3a\u5bf9\u5e94\u7684\u6743\u91cd"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"limit",children:"LIMIT"}),"\n",(0,i.jsx)(e.p,{children:"SORT \u547d\u4ee4\u9ed8\u8ba4\u4f1a\u5c06\u6392\u5e8f\u540e\u7684\u6240\u6709\u5143\u7d20\u90fd\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u901a\u8fc7 LIMIT \u9009\u9879\u53ef\u4ee5\u8ba9 SORT \u547d\u4ee4\u53ea\u8fd4\u56de\u5176\u4e2d\u4e00\u90e8\u5206\u5df2\u6392\u5e8f\u7684\u5143\u7d20"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"LIMIT <offset> <count>\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"offset \u53c2\u6570\u8868\u793a\u8981\u8df3\u8fc7\u7684\u5df2\u6392\u5e8f\u5143\u7d20\u6570\u91cf"}),"\n",(0,i.jsx)(e.li,{children:"count \u53c2\u6570\u8868\u793a\u8df3\u8fc7\u7ed9\u5b9a\u6570\u91cf\u7684\u5143\u7d20\u540e\uff0c\u8981\u8fd4\u56de\u7684\u5df2\u6392\u5e8f\u5143\u7d20\u6570\u91cf"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'# \u5bf9\u5e94 a b c d e f  g\nredis> SORT alphabet ALPHA LIMIT 2 3\n1) \t"c"\n2) \t"d"\n3) \t"e"\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u5b9e\u73b0\u539f\u7406\uff1a\u5728\u6392\u5e8f\u540e\u7684 redisSortObject \u7ed3\u6784\u6570\u7ec4\u4e2d\uff0c\u5c06\u6307\u9488\u79fb\u52a8\u5230\u6570\u7ec4\u7684\u7d22\u5f15 2 \u4e0a\uff0c\u4f9d\u6b21\u8bbf\u95ee array[2]\u3001array[3]\u3001array[4] \u8fd9 3 \u4e2a\u6570\u7ec4\u9879\uff0c\u5e76\u5c06\u6570\u7ec4\u9879\u7684 obj \u6307\u9488\u6240\u6307\u5411\u7684\u5143\u7d20\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"get",children:"GET"}),"\n",(0,i.jsx)(e.p,{children:"SORT \u547d\u4ee4\u9ed8\u8ba4\u5728\u5bf9\u952e\u8fdb\u884c\u6392\u5e8f\u540e\uff0c\u8fd4\u56de\u88ab\u6392\u5e8f\u952e\u672c\u8eab\u6240\u5305\u542b\u7684\u5143\u7d20\uff0c\u901a\u8fc7\u4f7f\u7528 GET \u9009\u9879\uff0c \u53ef\u4ee5\u5728\u5bf9\u952e\u8fdb\u884c\u6392\u5e8f\u540e\uff0c\u6839\u636e\u88ab\u6392\u5e8f\u7684\u5143\u7d20\u4ee5\u53ca GET \u9009\u9879\u6240\u6307\u5b9a\u7684\u6a21\u5f0f\uff0c\u67e5\u627e\u5e76\u8fd4\u56de\u67d0\u4e9b\u952e\u7684\u503c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"SORT <key> GET <pattern>\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'redis> SADD students "tom" "jack" "sea"\n#\u8bbe\u7f6e\u5168\u540d\nredis> SET tom-name "Tom Li" \nOK \nredis> SET jack-name "Jack Wang" \nOK \nredis> SET sea-name "Sea Zhang"\nOK \n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'redis> SORT students ALPHA GET *-name\n1)\t"Jack Wang"\n2)\t"Sea Zhang"\n3) \t"Tom Li"\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u5b9e\u73b0\u539f\u7406\uff1a\u5bf9 students \u8fdb\u884c\u6392\u5e8f\u540e\uff0c\u5bf9\u4e8e jack \u5143\u7d20\u548c *-name \u6a21\u5f0f\uff0c\u67e5\u627e\u7a0b\u5e8f\u8fd4\u56de\u952e jack-name\uff0c\u7136\u540e\u83b7\u53d6 jack-name \u952e\u5bf9\u5e94\u7684\u503c"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"store",children:"STORE"}),"\n",(0,i.jsx)(e.p,{children:"SORT \u547d\u4ee4\u9ed8\u8ba4\u53ea\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u6392\u5e8f\u7ed3\u679c\uff0c\u800c\u4e0d\u4fdd\u5b58\u6392\u5e8f\u7ed3\u679c\uff0c\u901a\u8fc7\u4f7f\u7528 STORE \u9009\u9879\u53ef\u4ee5\u5c06\u6392\u5e8f\u7ed3\u679c\u4fdd\u5b58\u5728\u6307\u5b9a\u7684\u952e\u91cc\u9762"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"SORT <key> STORE <sort_key>\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'redis> SADD students "tom" "jack" "sea"\n(integer) 3 \nredis> SORT students ALPHA STORE sorted_students \n(integer) 3 \n'})}),"\n",(0,i.jsx)(e.p,{children:"\u5b9e\u73b0\u539f\u7406\uff1a\u6392\u5e8f\u540e\uff0c\u68c0\u67e5 sorted_students \u952e\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u5b58\u5728\u5c31\u5220\u9664\u8be5\u952e\uff0c\u8bbe\u7f6e sorted_students \u4e3a\u7a7a\u767d\u7684\u5217\u8868\u952e\uff0c\u904d\u5386\u6392\u5e8f\u6570\u7ec4\u5c06\u5143\u7d20\u4f9d\u6b21\u653e\u5165"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6267\u884c\u987a\u5e8f",children:"\u6267\u884c\u987a\u5e8f"}),"\n",(0,i.jsx)(e.p,{children:"\u8c03\u7528 SORT \u547d\u4ee4\uff0c\u9664\u4e86 GET \u9009\u9879\u4e4b\u5916\uff0c\u6539\u53d8\u5176\u4ed6\u9009\u9879\u7684\u6446\u653e\u987a\u5e8f\u5e76\u4e0d\u4f1a\u5f71\u54cd\u547d\u4ee4\u6267\u884c\u9009\u9879\u7684\u987a\u5e8f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"SORT <key> ALPHA [ASC/DESC] BY <by-pattern> LIMIT <offset> <count> GET <get-pattern> STORE <store_key>\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u987a\u5e8f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6392\u5e8f\uff1a\u547d\u4ee4\u4f1a\u4f7f\u7528 ALPHA \u3001ASC \u6216 DESC\u3001BY \u8fd9\u51e0\u4e2a\u9009\u9879\uff0c\u5bf9\u8f93\u5165\u952e\u8fdb\u884c\u6392\u5e8f\uff0c\u5e76\u5f97\u5230\u4e00\u4e2a\u6392\u5e8f\u7ed3\u679c\u96c6"}),"\n",(0,i.jsx)(e.li,{children:"\u9650\u5236\u6392\u5e8f\u7ed3\u679c\u96c6\u7684\u957f\u5ea6\uff1a\u4f7f\u7528 LIMIT \u9009\u9879\uff0c\u5bf9\u6392\u5e8f\u7ed3\u679c\u96c6\u7684\u957f\u5ea6\u8fdb\u884c\u9650\u5236"}),"\n",(0,i.jsx)(e.li,{children:"\u83b7\u53d6\u5916\u90e8\u952e\uff1a\u6839\u636e\u6392\u5e8f\u7ed3\u679c\u96c6\u4e2d\u7684\u5143\u7d20\u4ee5\u53ca GET \u9009\u9879\u6307\u5b9a\u7684\u6a21\u5f0f\uff0c\u67e5\u627e\u5e76\u83b7\u53d6\u6307\u5b9a\u952e\u7684\u503c\uff0c\u5e76\u7528\u8fd9\u4e9b\u503c\u6765\u4f5c\u4e3a\u65b0\u7684\u6392\u5e8f\u7ed3\u679c\u96c6"}),"\n",(0,i.jsx)(e.li,{children:"\u4fdd\u5b58\u6392\u5e8f\u7ed3\u679c\u96c6\uff1a\u4f7f\u7528 STORE \u9009\u9879\uff0c\u5c06\u6392\u5e8f\u7ed3\u679c\u96c6\u4fdd\u5b58\u5230\u6307\u5b9a\u7684\u952e\u4e0a\u9762\u53bb"}),"\n",(0,i.jsx)(e.li,{children:"\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u6392\u5e8f\u7ed3\u679c\u96c6\uff1a\u6700\u540e\u4e00\u6b65\u547d\u4ee4\u904d\u5386\u6392\u5e8f\u7ed3\u679c\u96c6\uff0c\u5e76\u4f9d\u6b21\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u6392\u5e8f\u7ed3\u679c\u96c6\u4e2d\u7684\u5143\u7d20"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u901a\u77e5\u673a\u5236",children:"\u901a\u77e5\u673a\u5236"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5e93\u901a\u77e5\u662f\u53ef\u4ee5\u8ba9\u5ba2\u6237\u7aef\u901a\u8fc7\u8ba2\u9605\u7ed9\u5b9a\u7684\u9891\u9053\u6216\u8005\u6a21\u5f0f\uff0c\u6765\u83b7\u77e5\u6570\u636e\u5e93\u4e2d\u952e\u7684\u53d8\u5316\uff0c\u4ee5\u53ca\u6570\u636e\u5e93\u4e2d\u547d\u4ee4\u7684\u6267\u884c\u60c5\u51b5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5173\u6ce8\u67d0\u4e2a\u952e\u6267\u884c\u4e86\u4ec0\u4e48\u547d\u4ee4\u7684\u901a\u77e5\u79f0\u4e3a\u952e\u7a7a\u95f4\u901a\u77e5\uff08key-space notification\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u5173\u6ce8\u67d0\u4e2a\u547d\u4ee4\u88ab\u4ec0\u4e48\u952e\u6267\u884c\u7684\u901a\u77e5\u79f0\u4e3a\u952e\u4e8b\u4ef6\u901a\u77e5\uff08key-event notification\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u56fe\u793a\u8ba2\u9605 0 \u53f7\u6570\u636e\u5e93 message \u952e\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(64238).A+"",width:"1161",height:"590"})}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u914d\u7f6e\u7684 notify-keyspace-events \u9009\u9879\u51b3\u5b9a\u4e86\u670d\u52a1\u5668\u6240\u53d1\u9001\u901a\u77e5\u7684\u7c7b\u578b"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"AKE \u4ee3\u8868\u670d\u52a1\u5668\u53d1\u9001\u6240\u6709\u7c7b\u578b\u7684\u952e\u7a7a\u95f4\u901a\u77e5\u548c\u952e\u4e8b\u4ef6\u901a\u77e5"}),"\n",(0,i.jsx)(e.li,{children:"AK \u4ee3\u8868\u670d\u52a1\u5668\u53d1\u9001\u6240\u6709\u7c7b\u578b\u7684\u952e\u7a7a\u95f4\u901a\u77e5"}),"\n",(0,i.jsx)(e.li,{children:"AE \u4ee3\u8868\u670d\u52a1\u5668\u53d1\u9001\u6240\u6709\u7c7b\u578b\u7684\u952e\u4e8b\u4ef6\u901a\u77e5"}),"\n",(0,i.jsx)(e.li,{children:"K$ \u4ee3\u8868\u670d\u52a1\u5668\u53ea\u53d1\u9001\u548c\u5b57\u7b26\u4e32\u952e\u6709\u5173\u7684\u952e\u7a7a\u95f4\u901a\u77e5"}),"\n",(0,i.jsx)(e.li,{children:"EL \u4ee3\u8868\u670d\u52a1\u5668\u53ea\u53d1\u9001\u548c\u5217\u8868\u952e\u6709\u5173\u7684\u952e\u4e8b\u4ef6\u901a\u77e5"}),"\n",(0,i.jsx)(e.li,{children:"....."}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u53d1\u9001\u6570\u636e\u5e93\u901a\u77e5\u7684\u529f\u80fd\u662f\u7531 notifyKeyspaceEvent \u51fd\u6570\u5b9e\u73b0\u7684\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u7ed9\u5b9a\u7684\u901a\u77e5\u7c7b\u578b type \u4e0d\u662f\u670d\u52a1\u5668\u5141\u8bb8\u53d1\u9001\u7684\u901a\u77e5\u7c7b\u578b\uff0c\u90a3\u4e48\u51fd\u6570\u4f1a\u76f4\u63a5\u8fd4\u56de"}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u7ed9\u5b9a\u7684\u901a\u77e5\u662f\u670d\u52a1\u5668\u5141\u8bb8\u53d1\u9001\u7684\u901a\u77e5\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u68c0\u6d4b\u670d\u52a1\u5668\u662f\u5426\u5141\u8bb8\u53d1\u9001\u952e\u7a7a\u95f4\u901a\u77e5\uff0c\u5141\u8bb8\u5c31\u4f1a\u6784\u5efa\u5e76\u53d1\u9001\u4e8b\u4ef6\u901a\u77e5"}),"\n",(0,i.jsx)(e.li,{children:"\u68c0\u6d4b\u670d\u52a1\u5668\u662f\u5426\u5141\u8bb8\u53d1\u9001\u952e\u4e8b\u4ef6\u901a\u77e5\uff0c\u5141\u8bb8\u5c31\u4f1a\u6784\u5efa\u5e76\u53d1\u9001\u4e8b\u4ef6\u901a\u77e5"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u4f53\u7cfb\u67b6\u6784-1",children:"\u4f53\u7cfb\u67b6\u6784"}),"\n",(0,i.jsx)(e.h3,{id:"\u4e8b\u4ef6\u9a71\u52a8",children:"\u4e8b\u4ef6\u9a71\u52a8"}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u4ecb\u7ecd-12",children:"\u57fa\u672c\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u670d\u52a1\u5668\u662f\u4e00\u4e2a\u4e8b\u4ef6\u9a71\u52a8\u7a0b\u5e8f\uff0c\u670d\u52a1\u5668\u9700\u8981\u5904\u7406\u4e24\u7c7b\u4e8b\u4ef6"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6587\u4ef6\u4e8b\u4ef6 (file event)\uff1a\u670d\u52a1\u5668\u901a\u8fc7\u5957\u63a5\u5b57\u4e0e\u5ba2\u6237\u7aef\uff08\u6216\u5176\u4ed6 Redis \u670d\u52a1\u5668\uff09\u8fdb\u884c\u8fde\u63a5\uff0c\u800c\u6587\u4ef6\u4e8b\u4ef6\u5c31\u662f\u670d\u52a1\u5668\u5bf9\u5957\u63a5\u5b57\u64cd\u4f5c\u7684\u62bd\u8c61\u3002\u670d\u52a1\u5668\u4e0e\u5ba2\u6237\u7aef\u7684\u901a\u4fe1\u4f1a\u4ea7\u751f\u76f8\u5e94\u7684\u6587\u4ef6\u4e8b\u4ef6\uff0c\u670d\u52a1\u5668\u901a\u8fc7\u76d1\u542c\u5e76\u5904\u7406\u8fd9\u4e9b\u4e8b\u4ef6\u5b8c\u6210\u4e00\u7cfb\u5217\u7f51\u7edc\u901a\u4fe1\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.li,{children:"\u65f6\u95f4\u4e8b\u4ef6 (time event)\uff1aRedis \u670d\u52a1\u5668\u4e2d\u7684\u4e00\u4e9b\u64cd\u4f5c\uff08\u6bd4\u5982 serverCron \u51fd\u6570\uff09\u9700\u8981\u5728\u6307\u5b9a\u65f6\u95f4\u6267\u884c\uff0c\u800c\u65f6\u95f4\u4e8b\u4ef6\u5c31\u662f\u670d\u52a1\u5668\u5bf9\u8fd9\u7c7b\u5b9a\u65f6\u64cd\u4f5c\u7684\u62bd\u8c61"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6587\u4ef6\u4e8b\u4ef6",children:"\u6587\u4ef6\u4e8b\u4ef6"}),"\n",(0,i.jsx)(e.h5,{id:"\u57fa\u672c\u7ec4\u6210",children:"\u57fa\u672c\u7ec4\u6210"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u57fa\u4e8e Reactor \u6a21\u5f0f\u5f00\u53d1\u4e86\u7f51\u7edc\u4e8b\u4ef6\u5904\u7406\u5668\uff0c\u8fd9\u4e2a\u5904\u7406\u5668\u88ab\u79f0\u4e3a\u6587\u4ef6\u4e8b\u4ef6\u5904\u7406\u5668 (file event handler)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528 I/O \u591a\u8def\u590d\u7528 (multiplexing) \u7a0b\u5e8f\u6765\u540c\u65f6\u76d1\u542c\u591a\u4e2a\u5957\u63a5\u5b57\uff0c\u5e76\u6839\u636e\u5957\u63a5\u5b57\u6267\u884c\u7684\u4efb\u52a1\u6765\u4e3a\u5957\u63a5\u5b57\u5173\u8054\u4e0d\u540c\u7684\u4e8b\u4ef6\u5904\u7406\u5668"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5f53\u88ab\u76d1\u542c\u7684\u5957\u63a5\u5b57\u51c6\u5907\u597d\u6267\u884c\u8fde\u63a5\u5e94\u7b54 (accept)\u3001 \u8bfb\u53d6 (read)\u3001 \u5199\u5165 (write)\u3001 \u5173\u95ed (close) \u7b49\u64cd\u4f5c\u65f6\uff0c\u4e0e\u64cd\u4f5c\u76f8\u5bf9\u5e94\u7684\u6587\u4ef6\u4e8b\u4ef6\u5c31\u4f1a\u4ea7\u751f\uff0c\u8fd9\u65f6\u6587\u4ef6\u4e8b\u4ef6\u5206\u6d3e\u5668\u4f1a\u8c03\u7528\u5957\u63a5\u5b57\u5173\u8054\u597d\u7684\u4e8b\u4ef6\u5904\u7406\u5668\u6765\u5904\u7406\u4e8b\u4ef6"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u6587\u4ef6\u4e8b\u4ef6\u5904\u7406\u5668",(0,i.jsx)(e.strong,{children:"\u4ee5\u5355\u7ebf\u7a0b\u65b9\u5f0f\u8fd0\u884c"}),"\uff0c\u4f46\u901a\u8fc7\u4f7f\u7528  I/O \u591a\u8def\u590d\u7528\u7a0b\u5e8f\u6765\u76d1\u542c\u591a\u4e2a\u5957\u63a5\u5b57\uff0c \u65e2\u5b9e\u73b0\u4e86\u9ad8\u6027\u80fd\u7684\u7f51\u7edc\u901a\u4fe1\u6a21\u578b\uff0c\u53c8\u53ef\u4ee5\u5f88\u597d\u5730\u4e0e Redis \u670d\u52a1\u5668\u4e2d\u5176\u4ed6\u540c\u6837\u4ee5\u5355\u7ebf\u7a0b\u65b9\u5f0f\u8fd0\u884c\u7684\u6a21\u5757\u8fdb\u884c\u5bf9\u63a5\uff0c\u4fdd\u6301\u4e86 Redis \u5185\u90e8\u5355\u7ebf\u7a0b\u8bbe\u8ba1\u7684\u7b80\u5355\u6027"]}),"\n",(0,i.jsx)(e.p,{children:"\u6587\u4ef6\u4e8b\u4ef6\u5904\u7406\u5668\u7684\u7ec4\u6210\u7ed3\u6784\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(88330).A+"",width:"1028",height:"347"})}),"\n",(0,i.jsxs)(e.p,{children:["I/O \u591a\u8def\u590d\u7528\u7a0b\u5e8f\u5c06\u6240\u6709\u4ea7\u751f\u4e8b\u4ef6\u7684\u5957\u63a5\u5b57\u5904\u7406\u8bf7\u6c42\u653e\u5165\u4e00\u4e2a",(0,i.jsx)(e.strong,{children:"\u5355\u7ebf\u7a0b\u7684\u6267\u884c\u961f\u5217"}),"\u4e2d\uff0c\u901a\u8fc7\u961f\u5217\u6709\u5e8f\u3001\u540c\u6b65\u7684\u5411\u6587\u4ef6\u4e8b\u4ef6\u5206\u6d3e\u5668\u4f20\u9001\u5957\u63a5\u5b57\uff0c\u4e0a\u4e00\u4e2a\u5957\u63a5\u5b57\u4ea7\u751f\u7684\u4e8b\u4ef6\u5904\u7406\u5b8c\u540e\uff0c\u624d\u4f1a\u7ee7\u7eed\u5411\u5206\u6d3e\u5668\u4f20\u9001\u4e0b\u4e00\u4e2a"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(46818).A+"",width:"1175",height:"153"})}),"\n",(0,i.jsx)(e.p,{children:"Redis \u5355\u7ebf\u7a0b\u4e5f\u80fd\u9ad8\u6548\u7684\u539f\u56e0\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7eaf\u5185\u5b58\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.li,{children:"\u6838\u5fc3\u662f\u57fa\u4e8e\u975e\u963b\u585e\u7684 IO \u591a\u8def\u590d\u7528\u673a\u5236\uff0c\u5355\u7ebf\u7a0b\u53ef\u4ee5\u9ad8\u6548\u5904\u7406\u591a\u4e2a\u8bf7\u6c42"}),"\n",(0,i.jsx)(e.li,{children:"\u5e95\u5c42\u4f7f\u7528 C \u8bed\u8a00\u5b9e\u73b0\uff0cC \u8bed\u8a00\u5b9e\u73b0\u7684\u7a0b\u5e8f\u8ddd\u79bb\u64cd\u4f5c\u7cfb\u7edf\u66f4\u8fd1\uff0c\u6267\u884c\u901f\u5ea6\u76f8\u5bf9\u4f1a\u66f4\u5feb"}),"\n",(0,i.jsxs)(e.li,{children:["\u5355\u7ebf\u7a0b\u540c\u65f6\u4e5f",(0,i.jsx)(e.strong,{children:"\u907f\u514d\u4e86\u591a\u7ebf\u7a0b\u7684\u4e0a\u4e0b\u6587\u9891\u7e41\u5207\u6362\u95ee\u9898"}),"\uff0c\u9884\u9632\u4e86\u591a\u7ebf\u7a0b\u53ef\u80fd\u4ea7\u751f\u7684\u7ade\u4e89\u95ee\u9898"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u591a\u8def\u590d\u7528",children:"\u591a\u8def\u590d\u7528"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u7684 I/O \u591a\u8def\u590d\u7528\u7a0b\u5e8f\u7684\u6240\u6709\u529f\u80fd\u90fd\u662f\u901a\u8fc7\u5305\u88c5\u5e38\u89c1\u7684 select \u3001epoll\u3001 evport \u548c kqueue \u8fd9\u4e9b\u51fd\u6570\u5e93\u6765\u5b9e\u73b0\u7684\uff0cRedis \u5728 I/O \u591a\u8def\u590d\u7528\u7a0b\u5e8f\u7684\u5b9e\u73b0\u6e90\u7801\u4e2d\u7528 #include \u5b8f\u5b9a\u4e49\u4e86\u76f8\u5e94\u7684\u89c4\u5219\uff0c\u7f16\u8bd1\u65f6\u81ea\u52a8\u9009\u62e9\u7cfb\u7edf\u4e2d",(0,i.jsx)(e.strong,{children:"\u6027\u80fd\u6700\u9ad8\u7684\u591a\u8def\u590d\u7528\u51fd\u6570"}),"\u6765\u4f5c\u4e3a\u5e95\u5c42\u5b9e\u73b0"]}),"\n",(0,i.jsx)(e.p,{children:"I/O \u591a\u8def\u590d\u7528\u7a0b\u5e8f\u76d1\u542c\u591a\u4e2a\u5957\u63a5\u5b57\u7684 AE_READABLE \u4e8b\u4ef6\u548c AE_WRITABLE \u4e8b\u4ef6\uff0c\u8fd9\u4e24\u7c7b\u4e8b\u4ef6\u548c\u5957\u63a5\u5b57\u64cd\u4f5c\u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5f53\u5957\u63a5\u5b57\u53d8\u5f97",(0,i.jsx)(e.strong,{children:"\u53ef\u8bfb"}),"\u65f6\uff08\u5ba2\u6237\u7aef\u5bf9\u5957\u63a5\u5b57\u6267\u884c write \u64cd\u4f5c\u6216\u8005 close \u64cd\u4f5c\uff09\uff0c\u6216\u8005\u6709\u65b0\u7684",(0,i.jsx)(e.strong,{children:"\u53ef\u5e94\u7b54"}),"\uff08acceptable\uff09\u5957\u63a5\u5b57\u51fa\u73b0\u65f6\uff08\u5ba2\u6237\u7aef\u5bf9\u670d\u52a1\u5668\u7684\u76d1\u542c\u5957\u63a5\u5b57\u6267\u884c connect \u8fde\u63a5\u64cd\u4f5c\uff09\uff0c\u5957\u63a5\u5b57\u4ea7\u751f AE_READABLE \u4e8b\u4ef6"]}),"\n",(0,i.jsx)(e.li,{children:"\u5f53\u5957\u63a5\u5b57\u53d8\u5f97\u53ef\u5199\u65f6\uff08\u5ba2\u6237\u7aef\u5bf9\u5957\u63a5\u5b57\u6267\u884c read \u64cd\u4f5c\uff0c\u5bf9\u4e8e\u670d\u52a1\u5668\u6765\u8bf4\u5c31\u662f\u53ef\u4ee5\u5199\u4e86\uff09\uff0c\u5957\u63a5\u5b57\u4ea7\u751f AE_WRITABLE \u4e8b\u4ef6"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"I/O \u591a\u8def\u590d\u7528\u7a0b\u5e8f\u5141\u8bb8\u670d\u52a1\u5668\u540c\u65f6\u76d1\u542c\u5957\u63a5\u5b57\u7684 AE_READABLE \u548c AE_WRITABLE \u4e8b\u4ef6\uff0c \u5982\u679c\u4e00\u4e2a\u5957\u63a5\u5b57\u540c\u65f6\u4ea7\u751f\u4e86\u8fd9\u4e24\u79cd\u4e8b\u4ef6\uff0c\u90a3\u4e48\u6587\u4ef6\u4e8b\u4ef6\u5206\u6d3e\u5668\u4f1a\u4f18\u5148\u5904\u7406 AE_READABLE  \u4e8b\u4ef6\uff0c \u7b49 AE_READABLE \u4e8b\u4ef6\u5904\u7406\u5b8c\u4e4b\u540e\u624d\u5904\u7406 AE_WRITABLE \u4e8b\u4ef6"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u5904\u7406\u5668",children:"\u5904\u7406\u5668"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u4e3a\u6587\u4ef6\u4e8b\u4ef6\u7f16\u5199\u4e86\u591a\u4e2a\u5904\u7406\u5668\uff0c\u8fd9\u4e9b\u4e8b\u4ef6\u5904\u7406\u5668\u5206\u522b\u7528\u4e8e\u5b9e\u73b0\u4e0d\u540c\u7684\u7f51\u7edc\u901a\u4fe1\u9700\u6c42\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8fde\u63a5\u5e94\u7b54\u5904\u7406\u5668\uff0c\u7528\u4e8e\u5bf9\u8fde\u63a5\u670d\u52a1\u5668\u7684\u5404\u4e2a\u5ba2\u6237\u7aef\u8fdb\u884c\u5e94\u7b54\uff0cRedis \u670d\u52a1\u5668\u521d\u59cb\u5316\u65f6\u5c06\u8be5\u5904\u7406\u5668\u4e0e AE_READABLE \u4e8b\u4ef6\u5173\u8054"}),"\n",(0,i.jsx)(e.li,{children:"\u547d\u4ee4\u8bf7\u6c42\u5904\u7406\u5668\uff0c\u7528\u4e8e\u63a5\u6536\u5ba2\u6237\u7aef\u4f20\u6765\u7684\u547d\u4ee4\u8bf7\u6c42\uff0c\u6267\u884c\u5957\u63a5\u5b57\u7684\u8bfb\u5165\u64cd\u4f5c\uff0c\u4e0e AE_READABLE \u4e8b\u4ef6\u5173\u8054"}),"\n",(0,i.jsx)(e.li,{children:"\u547d\u4ee4\u56de\u590d\u5904\u7406\u5668\uff0c\u7528\u4e8e\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u547d\u4ee4\u7684\u6267\u884c\u7ed3\u679c\uff0c\u6267\u884c\u5957\u63a5\u5b57\u7684\u5199\u5165\u64cd\u4f5c\uff0c\u4e0e AE_WRITABLE \u4e8b\u4ef6\u5173\u8054"}),"\n",(0,i.jsx)(e.li,{children:"\u590d\u5236\u5904\u7406\u5668\uff0c\u5f53\u4e3b\u670d\u52a1\u5668\u548c\u4ece\u670d\u52a1\u5668\u8fdb\u884c\u590d\u5236\u64cd\u4f5c\u65f6\uff0c\u4e3b\u4ece\u670d\u52a1\u5668\u90fd\u9700\u8981\u5173\u8054\u8be5\u5904\u7406\u5668"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Redis \u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u8fdb\u884c\u8fde\u63a5\u5e76\u53d1\u9001\u547d\u4ee4\u7684\u6574\u4e2a\u8fc7\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Redis \u670d\u52a1\u5668\u6b63\u5728\u8fd0\u4f5c\u76d1\u542c\u5957\u63a5\u5b57\u7684 AE_READABLE \u4e8b\u4ef6\uff0c\u5173\u8054\u8fde\u63a5\u5e94\u7b54\u5904\u7406\u5668"}),"\n",(0,i.jsxs)(e.li,{children:["\u5f53 Redis \u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u8d77\u8fde\u63a5\uff0c\u76d1\u542c\u5957\u63a5\u5b57\u5c06\u4ea7\u751f AE_READABLE \u4e8b\u4ef6\uff0c\u89e6\u53d1\u8fde\u63a5\u5e94\u7b54\u5904\u7406\u5668\u6267\u884c\uff0c\u5bf9\u5ba2\u6237\u7aef\u7684\u8fde\u63a5\u8bf7\u6c42\u8fdb\u884c\u5e94\u7b54\uff0c\u521b\u5efa\u5ba2\u6237\u7aef\u5957\u63a5\u5b57\u4ee5\u53ca\u5ba2\u6237\u7aef\u72b6\u6001\uff0c\u5e76\u5c06\u5ba2\u6237\u7aef\u5957\u63a5\u5b57\u7684 ",(0,i.jsx)(e.strong,{children:"AE_READABLE \u4e8b\u4ef6\u4e0e\u547d\u4ee4\u8bf7\u6c42\u5904\u7406\u5668"}),"\u8fdb\u884c\u5173\u8054"]}),"\n",(0,i.jsx)(e.li,{children:"\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u9001\u547d\u4ee4\u8bf7\u6c42\uff0c\u5ba2\u6237\u7aef\u5957\u63a5\u5b57\u4ea7\u751f AE_READABLE \u4e8b\u4ef6\uff0c\u5f15\u53d1\u547d\u4ee4\u8bf7\u6c42\u5904\u7406\u5668\u6267\u884c\uff0c\u8bfb\u53d6\u5ba2\u6237\u7aef\u7684\u547d\u4ee4\u5185\u5bb9\u4f20\u7ed9\u76f8\u5173\u7a0b\u5e8f\u53bb\u6267\u884c"}),"\n",(0,i.jsxs)(e.li,{children:["\u6267\u884c\u547d\u4ee4\u4f1a\u4ea7\u751f\u76f8\u5e94\u7684\u547d\u4ee4\u56de\u590d\uff0c\u4e3a\u4e86\u5c06\u8fd9\u4e9b\u547d\u4ee4\u56de\u590d\u4f20\u9001\u56de\u5ba2\u6237\u7aef\uff0c\u670d\u52a1\u5668\u4f1a\u5c06\u5ba2\u6237\u7aef\u5957\u63a5\u5b57\u7684 ",(0,i.jsx)(e.strong,{children:"AE_WRITABLE \u4e8b\u4ef6\u4e0e\u547d\u4ee4\u56de\u590d\u5904\u7406\u5668"}),"\u8fdb\u884c\u5173\u8054"]}),"\n",(0,i.jsx)(e.li,{children:"\u5f53\u5ba2\u6237\u7aef\u5c1d\u8bd5\u8bfb\u53d6\u547d\u4ee4\u56de\u590d\u65f6\uff0c\u5ba2\u6237\u7aef\u5957\u63a5\u5b57\u4ea7\u751f AE_WRITABLE \u4e8b\u4ef6\uff0c\u89e6\u53d1\u547d\u4ee4\u56de\u590d\u5904\u7406\u5668\u6267\u884c\uff0c\u5728\u547d\u4ee4\u56de\u590d\u5168\u90e8\u5199\u5165\u5957\u63a5\u5b57\u540e\uff0c\u670d\u52a1\u5668\u5c31\u4f1a\u89e3\u9664\u5ba2\u6237\u7aef\u5957\u63a5\u5b57\u7684 AE_WRITABLE \u4e8b\u4ef6\u4e0e\u547d\u4ee4\u56de\u590d\u5904\u7406\u5668\u4e4b\u95f4\u7684\u5173\u8054"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u65f6\u95f4\u4e8b\u4ef6",children:"\u65f6\u95f4\u4e8b\u4ef6"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u7684\u65f6\u95f4\u4e8b\u4ef6\u5206\u4e3a\u4ee5\u4e0b\u4e24\u7c7b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5b9a\u65f6\u4e8b\u4ef6\uff1a\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u4e4b\u540e\u6267\u884c\u4e00\u6b21\uff08Redis \u4e2d\u6682\u65f6\u672a\u4f7f\u7528\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u5468\u671f\u4e8b\u4ef6\uff1a\u6bcf\u9694\u6307\u5b9a\u65f6\u95f4\u5c31\u6267\u884c\u4e00\u6b21"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u4e2a\u65f6\u95f4\u4e8b\u4ef6\u4e3b\u8981\u7531\u4ee5\u4e0b\u4e09\u4e2a\u5c5e\u6027\u7ec4\u6210\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"id\uff1a\u670d\u52a1\u5668\u4e3a\u65f6\u95f4\u4e8b\u4ef6\u521b\u5efa\u7684\u5168\u5c40\u552f\u4e00 ID\uff08\u6807\u8bc6\u53f7\uff09\uff0c\u4ece\u5c0f\u5230\u5927\u987a\u5e8f\u9012\u589e\uff0c\u65b0\u4e8b\u4ef6\u7684 ID \u6bd4\u65e7\u4e8b\u4ef6\u7684 ID \u53f7\u8981\u5927"}),"\n",(0,i.jsx)(e.li,{children:"when\uff1a\u6beb\u79d2\u7cbe\u5ea6\u7684 UNIX \u65f6\u95f4\u6233\uff0c\u8bb0\u5f55\u4e86\u65f6\u95f4\u4e8b\u4ef6\u7684\u5230\u8fbe\uff08arrive\uff09\u65f6\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"timeProc\uff1a\u65f6\u95f4\u4e8b\u4ef6\u5904\u7406\u5668\uff0c\u5f53\u65f6\u95f4\u4e8b\u4ef6\u5230\u8fbe\u65f6\uff0c\u670d\u52a1\u5668\u5c31\u4f1a\u8c03\u7528\u76f8\u5e94\u7684\u5904\u7406\u5668\u6765\u5904\u7406\u4e8b\u4ef6"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u65f6\u95f4\u4e8b\u4ef6\u662f\u5b9a\u65f6\u4e8b\u4ef6\u8fd8\u662f\u5468\u671f\u6027\u4e8b\u4ef6\u53d6\u51b3\u4e8e\u65f6\u95f4\u4e8b\u4ef6\u5904\u7406\u5668\u7684\u8fd4\u56de\u503c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5b9a\u65f6\u4e8b\u4ef6\uff1a\u4e8b\u4ef6\u5904\u7406\u5668\u8fd4\u56de AE_NOMORE\uff0c\u8be5\u4e8b\u4ef6\u5728\u5230\u8fbe\u4e00\u6b21\u540e\u5c31\u4f1a\u88ab\u5220\u9664"}),"\n",(0,i.jsx)(e.li,{children:"\u5468\u671f\u4e8b\u4ef6\uff1a\u4e8b\u4ef6\u5904\u7406\u5668\u8fd4\u56de\u975e AE_NOMORE \u7684\u6574\u6570\u503c\uff0c\u670d\u52a1\u5668\u6839\u636e\u8be5\u503c\u5bf9\u4e8b\u4ef6\u7684 when \u5c5e\u6027\u66f4\u65b0\uff0c\u8ba9\u8be5\u4e8b\u4ef6\u5728\u4e00\u6bb5\u65f6\u95f4\u540e\u518d\u6b21\u4ea4\u4ed8"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u670d\u52a1\u5668\u5c06\u6240\u6709\u65f6\u95f4\u4e8b\u4ef6\u90fd\u653e\u5728\u4e00\u4e2a",(0,i.jsx)(e.strong,{children:"\u65e0\u5e8f\u94fe\u8868"}),"\u4e2d\uff0c\u65b0\u7684\u65f6\u95f4\u4e8b\u4ef6\u63d2\u5165\u5230\u94fe\u8868\u7684\u8868\u5934\uff1a"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(61179).A+"",width:"1172",height:"373"})}),"\n",(0,i.jsx)(e.p,{children:"\u65e0\u5e8f\u94fe\u8868\u6307\u662f\u94fe\u8868\u4e0d\u6309 when \u5c5e\u6027\u7684\u5927\u5c0f\u6392\u5e8f\uff0c\u6bcf\u5f53\u65f6\u95f4\u4e8b\u4ef6\u6267\u884c\u5668\u8fd0\u884c\u65f6\u5c31\u5fc5\u987b\u904d\u5386\u6574\u4e2a\u94fe\u8868\uff0c\u67e5\u627e\u6240\u6709\u5df2\u5230\u8fbe\u7684\u65f6\u95f4\u4e8b\u4ef6\uff0c\u5e76\u8c03\u7528\u76f8\u5e94\u7684\u4e8b\u4ef6\u5904\u7406\u5668\u5904\u7406"}),"\n",(0,i.jsxs)(e.p,{children:["\u65e0\u5e8f\u94fe\u8868\u5e76\u4e0d\u5f71\u54cd\u65f6\u95f4\u4e8b\u4ef6\u5904\u7406\u5668\u7684\u6027\u80fd\uff0c\u56e0\u4e3a\u6b63\u5e38\u6a21\u5f0f\u4e0b\u7684 Redis \u670d\u52a1\u5668",(0,i.jsx)(e.strong,{children:"\u53ea\u4f7f\u7528 serverCron \u4e00\u4e2a\u65f6\u95f4\u4e8b\u4ef6"}),"\uff0c\u5728 benchmark \u6a21\u5f0f\u4e0b\u670d\u52a1\u5668\u4e5f\u53ea\u4f7f\u7528\u4e24\u4e2a\u65f6\u95f4\u4e8b\u4ef6\uff0c\u6240\u4ee5\u65e0\u5e8f\u94fe\u8868\u4e0d\u4f1a\u5f71\u54cd\u670d\u52a1\u5668\u7684\u6027\u80fd\uff0c\u51e0\u4e4e\u53ef\u4ee5\u6309\u7167\u4e00\u4e2a\u6307\u9488\u5904\u7406"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u4e8b\u4ef6\u8c03\u5ea6",children:"\u4e8b\u4ef6\u8c03\u5ea6"}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u4e2d\u540c\u65f6\u5b58\u5728\u6587\u4ef6\u4e8b\u4ef6\u548c\u65f6\u95f4\u4e8b\u4ef6\u4e24\u79cd\u4e8b\u4ef6\u7c7b\u578b\uff0c\u8c03\u5ea6\u4f2a\u4ee3\u7801\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"# \u4e8b\u4ef6\u8c03\u5ea6\u4f2a\u4ee3\u7801\ndef aeProcessEvents():\n\t# \u83b7\u53d6\u5230\u8fbe\u65f6\u95f4\u79bb\u5f53\u524d\u65f6\u95f4\u6700\u63a5\u8fd1\u7684\u65f6\u95f4\u4e8b\u4ef6 \n    time_event = aeSearchNearestTime()\n    \n    # \u8ba1\u7b97\u6700\u63a5\u8fd1\u7684\u65f6\u95f4\u4e8b\u4ef6\u8ddd\u79bb\u5230\u8fbe\u8fd8\u6709\u591a\u5c11\u4eb3\u79d2\n    remaind_ms = time_event.when - unix_ts_now()\n    # \u5982\u679c\u4e8b\u4ef6\u5df2\u5230\u8fbe\uff0c\u90a3\u4e48 remaind_ms \u7684\u503c\u53ef\u80fd\u4e3a\u8d1f\u6570\uff0c\u8bbe\u7f6e\u4e3a 0\n    if remaind_ms < 0:\n        remaind_ms = 0\n\t\n    # \u6839\u636e remaind_ms \u7684\u503c\uff0c\u521b\u5efa timeval \u7ed3\u6784\n\ttimeval = create_timeval_with_ms(remaind_ms) \n    # \u3010\u963b\u585e\u5e76\u7b49\u5f85\u6587\u4ef6\u4e8b\u4ef6\u3011\u4ea7\u751f\uff0c\u6700\u5927\u963b\u585e\u65f6\u95f4\u7531\u4f20\u5165\u7684timeval\u7ed3\u6784\u51b3\u5b9a\uff0cremaind_ms\u7684\u503c\u4e3a0\u65f6\u8c03\u7528\u540e\u9a6c\u4e0a\u8fd4\u56de\uff0c\u4e0d\u963b\u585e\n    aeApiPoll(timeval)\n    \n    # \u5904\u7406\u6240\u6709\u5df2\u4ea7\u751f\u7684\u6587\u4ef6\u4e8b\u4ef6\n\tprocessFileEvents() \n\t# \u5904\u7406\u6240\u6709\u5df2\u5230\u8fbe\u7684\u65f6\u95f4\u4e8b\u4ef6\n\tprocessTimeEvents()\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4e8b\u4ef6\u7684\u8c03\u5ea6\u548c\u6267\u884c\u89c4\u5219\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"aeApiPoll \u51fd\u6570\u7684\u6700\u5927\u963b\u585e\u65f6\u95f4\u7531\u5230\u8fbe\u65f6\u95f4\u6700\u63a5\u8fd1\u5f53\u524d\u65f6\u95f4\u7684\u65f6\u95f4\u4e8b\u4ef6\u51b3\u5b9a\uff0c\u53ef\u4ee5\u907f\u514d\u670d\u52a1\u5668\u5bf9\u65f6\u95f4\u4e8b\u4ef6\u8fdb\u884c\u9891\u7e41\u7684\u8f6e\u8be2\uff08\u5fd9\u7b49\u5f85\uff09\uff0c\u4e5f\u53ef\u4ee5\u786e\u4fdd aeApiPoll \u51fd\u6570\u4e0d\u4f1a\u963b\u585e\u8fc7\u957f\u65f6\u95f4"}),"\n",(0,i.jsxs)(e.li,{children:["\u5bf9\u6587\u4ef6\u4e8b\u4ef6\u548c\u65f6\u95f4\u4e8b\u4ef6\u7684\u5904\u7406\u90fd\u662f",(0,i.jsx)(e.strong,{children:"\u540c\u6b65\u3001\u6709\u5e8f\u3001\u539f\u5b50\u5730\u6267\u884c"}),"\uff0c\u670d\u52a1\u5668\u4e0d\u4f1a\u4e2d\u9014\u4e2d\u65ad\u4e8b\u4ef6\u5904\u7406\uff0c\u4e5f\u4e0d\u4f1a\u5bf9\u4e8b\u4ef6\u8fdb\u884c\u62a2\u5360\uff0c\u6240\u4ee5\u4e24\u79cd\u5904\u7406\u5668\u90fd\u8981\u5c3d\u53ef\u5730\u51cf\u5c11\u7a0b\u5e8f\u7684\u963b\u585e\u65f6\u95f4\uff0c\u5e76\u5728\u6709\u9700\u8981\u65f6",(0,i.jsx)(e.strong,{children:"\u4e3b\u52a8\u8ba9\u51fa\u6267\u884c\u6743"}),"\uff0c\u4ece\u800c\u964d\u4f4e\u4e8b\u4ef6\u9965\u997f\u7684\u53ef\u80fd\u6027\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u547d\u4ee4\u56de\u590d\u5904\u7406\u5668\u5728\u5199\u5165\u5b57\u8282\u6570\u8d85\u8fc7\u4e86\u67d0\u4e2a\u9884\u8bbe\u5e38\u91cf\uff0c\u5c31\u4f1a\u4e3b\u52a8\u7528 break \u8df3\u51fa\u5199\u5165\u5faa\u73af\uff0c\u5c06\u4f59\u4e0b\u7684\u6570\u636e\u7559\u5230\u4e0b\u6b21\u518d\u5199"}),"\n",(0,i.jsx)(e.li,{children:"\u65f6\u95f4\u4e8b\u4ef6\u4e5f\u4f1a\u5c06\u975e\u5e38\u8017\u65f6\u7684\u6301\u4e45\u5316\u64cd\u4f5c\u653e\u5230\u5b50\u7ebf\u7a0b\u6216\u8005\u5b50\u8fdb\u7a0b\u6267\u884c"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u65f6\u95f4\u4e8b\u4ef6\u5728\u6587\u4ef6\u4e8b\u4ef6\u4e4b\u540e\u6267\u884c\uff0c\u5e76\u4e14\u4e8b\u4ef6\u4e4b\u95f4\u4e0d\u4f1a\u51fa\u73b0\u62a2\u5360\uff0c\u6240\u4ee5\u65f6\u95f4\u4e8b\u4ef6\u7684\u5b9e\u9645\u5904\u7406\u65f6\u95f4\u901a\u5e38\u4f1a\u6bd4\u8bbe\u5b9a\u7684\u5230\u8fbe\u65f6\u95f4\u7a0d\u665a"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u591a\u7ebf\u7a0b",children:"\u591a\u7ebf\u7a0b"}),"\n",(0,i.jsxs)(e.p,{children:["Redis6.0 \u5f15\u5165\u591a\u7ebf\u7a0b\u4e3b\u8981\u662f\u4e3a\u4e86\u63d0\u9ad8\u7f51\u7edc IO \u8bfb\u5199\u6027\u80fd\uff0c\u56e0\u4e3a\u8fd9\u662f Redis \u7684\u4e00\u4e2a\u6027\u80fd\u74f6\u9888\uff08Redis \u7684\u74f6\u9888\u4e3b\u8981\u53d7\u9650\u4e8e\u5185\u5b58\u548c\u7f51\u7edc\uff09\uff0c\u591a\u7ebf\u7a0b\u53ea\u662f\u7528\u6765",(0,i.jsx)(e.strong,{children:"\u5904\u7406\u7f51\u7edc\u6570\u636e\u7684\u8bfb\u5199\u548c\u534f\u8bae\u89e3\u6790"}),"\uff0c \u6267\u884c\u547d\u4ee4\u4ecd\u7136\u662f\u5355\u7ebf\u7a0b\u987a\u5e8f\u6267\u884c\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u62c5\u5fc3\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["Redis6.0 \u7684\u591a\u7ebf\u7a0b\u9ed8\u8ba4\u662f\u7981\u7528\u7684\uff0c\u53ea\u4f7f\u7528\u4e3b\u7ebf\u7a0b\u3002\u5982\u9700\u5f00\u542f\u9700\u8981\u4fee\u6539 redis \u914d\u7f6e\u6587\u4ef6 ",(0,i.jsx)(e.code,{children:"redis.conf"})," \uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"io-threads-do-reads yesCopy to clipboardErrorCopied\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5f00\u542f\u591a\u7ebf\u7a0b\u540e\uff0c\u8fd8\u9700\u8981\u8bbe\u7f6e\u7ebf\u7a0b\u6570\uff0c\u5426\u5219\u662f\u4e0d\u751f\u6548\u7684\uff0c\u540c\u6837\u9700\u8981\u4fee\u6539 redis \u914d\u7f6e\u6587\u4ef6 :"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"io-threads 4 #\u5b98\u7f51\u5efa\u8bae4\u6838\u7684\u673a\u5668\u5efa\u8bae\u8bbe\u7f6e\u4e3a2\u62163\u4e2a\u7ebf\u7a0b\uff0c8\u6838\u7684\u5efa\u8bae\u8bbe\u7f6e\u4e3a6\u4e2a\u7ebf\u7a0b\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(87020).A+"",width:"959",height:"465"})}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://mp.weixin.qq.com/s/dqmiR0ECf4lB6Y2OyK-dyA",children:"https://mp.weixin.qq.com/s/dqmiR0ECf4lB6Y2OyK-dyA"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5ba2\u6237\u7aef-1",children:"\u5ba2\u6237\u7aef"}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u4ecb\u7ecd-13",children:"\u57fa\u672c\u4ecb\u7ecd"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u670d\u52a1\u5668\u662f\u5178\u578b\u7684\u4e00\u5bf9\u591a\u7a0b\u5e8f\uff0c\u4e00\u4e2a\u670d\u52a1\u5668\u53ef\u4ee5\u4e0e\u591a\u4e2a\u5ba2\u6237\u7aef\u5efa\u7acb\u7f51\u7edc\u8fde\u63a5\uff0c\u670d\u52a1\u5668\u5bf9\u6bcf\u4e2a\u8fde\u63a5\u7684\u5ba2\u6237\u7aef\u5efa\u7acb\u4e86\u76f8\u5e94\u7684 redisClient \u7ed3\u6784\uff08\u5ba2\u6237\u7aef\u72b6\u6001\uff0c",(0,i.jsx)(e.strong,{children:"\u5728\u670d\u52a1\u5668\u7aef\u7684\u5b58\u50a8\u7ed3\u6784"}),"\uff09\uff0c\u4fdd\u5b58\u4e86\u5ba2\u6237\u7aef\u5f53\u524d\u7684\u72b6\u6001\u4fe1\u606f\uff0c\u4ee5\u53ca\u6267\u884c\u76f8\u5173\u529f\u80fd\u65f6\u9700\u8981\u7528\u5230\u7684\u6570\u636e\u7ed3\u6784"]}),"\n",(0,i.jsx)(e.p,{children:"Redis \u670d\u52a1\u5668\u72b6\u6001\u7ed3\u6784\u7684 clients \u5c5e\u6027\u662f\u4e00\u4e2a\u94fe\u8868\uff0c\u8fd9\u4e2a\u94fe\u8868\u4fdd\u5b58\u4e86\u6240\u6709\u4e0e\u670d\u52a1\u5668\u8fde\u63a5\u7684\u5ba2\u6237\u7aef\u7684\u72b6\u6001\u7ed3\u6784\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n    // \u4e00\u4e2a\u94fe\u8868\uff0c\u4fdd\u5b58\u4e86\u6240\u6709\u5ba2\u6237\u7aef\u72b6\u6001\n    list *clients;\n    \n    //...\n};\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(75890).A+"",width:"1175",height:"196"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6570\u636e\u7ed3\u6784-1",children:"\u6570\u636e\u7ed3\u6784"}),"\n",(0,i.jsx)(e.h5,{id:"redisclient",children:"redisClient"}),"\n",(0,i.jsx)(e.p,{children:"\u5ba2\u6237\u7aef\u7684\u6570\u636e\u7ed3\u6784\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct redisClient {\n    //...\n    \n    // \u5957\u63a5\u5b57\n    int fd;\n    // \u540d\u5b57\n    robj *name;\n    // \u6807\u5fd7\n    int flags;\n    \n    // \u8f93\u5165\u7f13\u51b2\u533a\n    sds querybuf;\n    // \u8f93\u51fa\u7f13\u51b2\u533a buf \u6570\u7ec4\n    char buf[REDIS_REPLY_CHUNK_BYTES];\n    // \u8bb0\u5f55\u4e86 buf \u6570\u7ec4\u76ee\u524d\u5df2\u4f7f\u7528\u7684\u5b57\u8282\u6570\u91cf\n    int bufpos; \n    // \u53ef\u53d8\u5927\u5c0f\u7684\u8f93\u51fa\u7f13\u51b2\u533a\uff0c\u94fe\u8868 + \u5b57\u7b26\u4e32\u5bf9\u8c61\n    list *reply;\n    \n    // \u547d\u4ee4\u6570\u7ec4\n    rboj **argv;\n    // \u547d\u4ee4\u6570\u7ec4\u7684\u957f\u5ea6\n   \tint argc;\n    // \u547d\u4ee4\u7684\u4fe1\u606f\n    struct redisCommand  *cmd;\n    \n    // \u662f\u5426\u901a\u8fc7\u8eab\u4efd\u9a8c\u8bc1\n    int authenticated;\n    \n    // \u521b\u5efa\u5ba2\u6237\u7aef\u7684\u65f6\u95f4\n    time_t ctime;\n    // \u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u6700\u540e\u4e00\u6b21\u8fdb\u884c\u4ea4\u4e92\u7684\u65f6\u95f4\n    time_t lastinteraction;\n    // \u8f93\u51fa\u7f13\u51b2\u533a\u7b2c\u4e00\u6b21\u5230\u8fbe\u8f6f\u6027\u9650\u5236 (soft limit) \u7684\u65f6\u95f4\n    time_t obuf_soft_limit_reached_time;\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5ba2\u6237\u7aef\u72b6\u6001\u5305\u62ec\u4e24\u7c7b\u5c5e\u6027"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e00\u7c7b\u662f\u6bd4\u8f83\u901a\u7528\u7684\u5c5e\u6027\uff0c\u8fd9\u4e9b\u5c5e\u6027\u5f88\u5c11\u4e0e\u7279\u5b9a\u529f\u80fd\u76f8\u5173\uff0c\u65e0\u8bba\u5ba2\u6237\u7aef\u6267\u884c\u7684\u662f\u4ec0\u4e48\u5de5\u4f5c\uff0c\u90fd\u8981\u7528\u5230\u8fd9\u4e9b\u5c5e\u6027"}),"\n",(0,i.jsx)(e.li,{children:"\u53e6\u4e00\u7c7b\u662f\u548c\u7279\u5b9a\u529f\u80fd\u76f8\u5173\u7684\u5c5e\u6027\uff0c\u6bd4\u5982\u64cd\u4f5c\u6570\u636e\u5e93\u65f6\u7528\u5230\u7684 db \u5c5e\u6027\u548c dict id \u5c5e\u6027\uff0c\u6267\u884c\u4e8b\u52a1\u65f6\u7528\u5230\u7684 mstate \u5c5e\u6027\uff0c\u4ee5\u53ca\u6267\u884c WATCH \u547d\u4ee4\u65f6\u7528\u5230\u7684 watched_keys \u5c5e\u6027\u7b49\uff0c\u4ee3\u7801\u4e2d\u6ca1\u6709\u5217\u51fa"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u5957\u63a5\u5b57",children:"\u5957\u63a5\u5b57"}),"\n",(0,i.jsx)(e.p,{children:"\u5ba2\u6237\u7aef\u72b6\u6001\u7684 fd \u5c5e\u6027\u8bb0\u5f55\u4e86\u5ba2\u6237\u7aef\u6b63\u5728\u4f7f\u7528\u7684\u5957\u63a5\u5b57\u63cf\u8ff0\u7b26\uff0c\u6839\u636e\u5ba2\u6237\u7aef\u7c7b\u578b\u7684\u4e0d\u540c\uff0cfd \u5c5e\u6027\u7684\u503c\u53ef\u4ee5\u662f -1 \u6216\u8005\u5927\u4e8e -1 \u7684\u6574\u6570\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f2a\u5ba2\u6237\u7aef (fake client) \u7684 fd \u5c5e\u6027\u7684\u503c\u4e3a -1\uff0c\u547d\u4ee4\u8bf7\u6c42\u6765\u6e90\u4e8e AOF \u6587\u4ef6\u6216\u8005 Lua \u811a\u672c\uff0c\u800c\u4e0d\u662f\u7f51\u7edc\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u5957\u63a5\u5b57\u8fde\u63a5"}),"\n",(0,i.jsx)(e.li,{children:"\u666e\u901a\u5ba2\u6237\u7aef\u7684 fd \u5c5e\u6027\u7684\u503c\u4e3a\u5927\u4e8e -1 \u7684\u6574\u6570\uff0c\u56e0\u4e3a\u5408\u6cd5\u7684\u5957\u63a5\u5b57\u63cf\u8ff0\u7b26\u4e0d\u80fd\u662f -1"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u6267\u884c ",(0,i.jsx)(e.code,{children:"CLIENT list"})," \u547d\u4ee4\u53ef\u4ee5\u5217\u51fa\u76ee\u524d\u6240\u6709\u8fde\u63a5\u5230\u670d\u52a1\u5668\u7684\u666e\u901a\u5ba2\u6237\u7aef\uff0c\u4e0d\u5305\u62ec\u4f2a\u5ba2\u6237\u7aef"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u540d\u5b57",children:"\u540d\u5b57"}),"\n",(0,i.jsxs)(e.p,{children:["\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e00\u4e2a\u8fde\u63a5\u5230\u670d\u52a1\u5668\u7684\u5ba2\u6237\u7aef\u662f\u6ca1\u6709\u540d\u5b57\u7684\uff0c\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"CLIENT setname"})," \u547d\u4ee4\u53ef\u4ee5\u4e3a\u5ba2\u6237\u7aef\u8bbe\u7f6e\u4e00\u4e2a\u540d\u5b57"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u6807\u5fd7",children:"\u6807\u5fd7"}),"\n",(0,i.jsx)(e.p,{children:"\u5ba2\u6237\u7aef\u7684\u6807\u5fd7\u5c5e\u6027 flags \u8bb0\u5f55\u4e86\u5ba2\u6237\u7aef\u7684\u89d2\u8272\u4ee5\u53ca\u5ba2\u6237\u7aef\u76ee\u524d\u6240\u5904\u7684\u72b6\u6001\uff0c\u6bcf\u4e2a\u6807\u5fd7\u4f7f\u7528\u4e00\u4e2a\u5e38\u91cf\u8868\u793a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["flags \u7684\u503c\u53ef\u4ee5\u662f\u5355\u4e2a\u6807\u5fd7\uff1a",(0,i.jsx)(e.code,{children:"flags = <flag> "})]}),"\n",(0,i.jsxs)(e.li,{children:["flags \u7684\u503c\u53ef\u4ee5\u662f\u591a\u4e2a\u6807\u5fd7\u7684\u4e8c\u8fdb\u5236\uff1a",(0,i.jsx)(e.code,{children:"flags = <flagl> | <flag2> | ... "})]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u4e00\u90e8\u5206\u6807\u5fd7\u8bb0\u5f55",(0,i.jsx)(e.strong,{children:"\u5ba2\u6237\u7aef\u7684\u89d2\u8272"}),"\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"REDIS_MASTER \u8868\u793a\u5ba2\u6237\u7aef\u662f\u4e00\u4e2a\u4ece\u670d\u52a1\u5668\uff0cREDIS_SLAVE \u8868\u793a\u5ba2\u6237\u7aef\u662f\u4e00\u4e2a\u4ece\u670d\u52a1\u5668\uff0c\u5728\u4e3b\u4ece\u590d\u5236\u65f6\u4f7f\u7528"}),"\n",(0,i.jsx)(e.li,{children:"REDIS_PRE_PSYNC \u8868\u793a\u5ba2\u6237\u7aef\u662f\u4e00\u4e2a\u7248\u672c\u4f4e\u4e8e Redis2.8 \u7684\u4ece\u670d\u52a1\u5668\uff0c\u4e3b\u670d\u52a1\u5668\u4e0d\u80fd\u4f7f\u7528 PSYNC \u547d\u4ee4\u4e0e\u8be5\u4ece\u670d\u52a1\u5668\u8fdb\u884c\u540c\u6b65\uff0c\u8fd9\u4e2a\u6807\u5fd7\u53ea\u80fd\u5728 REDIS_ SLAVE \u6807\u5fd7\u5904\u4e8e\u6253\u5f00\u72b6\u6001\u65f6\u4f7f\u7528"}),"\n",(0,i.jsx)(e.li,{children:"REDIS_LUA_CLIENT \u8868\u793a\u5ba2\u6237\u7aef\u662f\u4e13\u95e8\u7528\u4e8e\u5904\u7406 Lua \u811a\u672c\u91cc\u9762\u5305\u542b\u7684 Redis \u547d\u4ee4\u7684\u4f2a\u5ba2\u6237\u7aef"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u4e00\u90e8\u5206\u6807\u5fd7\u8bb0\u5f55\u76ee\u524d",(0,i.jsx)(e.strong,{children:"\u5ba2\u6237\u7aef\u6240\u5904\u7684\u72b6\u6001"}),"\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"REDIS_UNIX_SOCKET \u8868\u793a\u670d\u52a1\u5668\u4f7f\u7528 UNIX \u5957\u63a5\u5b57\u6765\u8fde\u63a5\u5ba2\u6237\u7aef"}),"\n",(0,i.jsx)(e.li,{children:"REDIS_BLOCKED \u8868\u793a\u5ba2\u6237\u7aef\u6b63\u5728\u88ab BRPOP\u3001BLPOP \u7b49\u547d\u4ee4\u963b\u585e"}),"\n",(0,i.jsx)(e.li,{children:"REDIS_UNBLOCKED \u8868\u793a\u5ba2\u6237\u7aef\u5df2\u7ecf\u4ece REDIS_BLOCKED \u6240\u8868\u793a\u7684\u963b\u585e\u72b6\u6001\u8131\u79bb\uff0c\u5728 REDIS_BLOCKED \u6807\u5fd7\u6253\u5f00\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528"}),"\n",(0,i.jsx)(e.li,{children:"REDIS_MULTI \u6807\u5fd7\u8868\u793a\u5ba2\u6237\u7aef\u6b63\u5728\u6267\u884c\u4e8b\u52a1"}),"\n",(0,i.jsx)(e.li,{children:"REDIS_DIRTY_CAS \u8868\u793a\u4e8b\u52a1\u4f7f\u7528 WATCH \u547d\u4ee4\u76d1\u89c6\u7684\u6570\u636e\u5e93\u952e\u5df2\u7ecf\u88ab\u4fee\u6539"}),"\n",(0,i.jsx)(e.li,{children:"....."}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u7f13\u51b2\u533a",children:"\u7f13\u51b2\u533a"}),"\n",(0,i.jsxs)(e.p,{children:["\u5ba2\u6237\u7aef\u72b6\u6001\u7684\u8f93\u5165\u7f13\u51b2\u533a\u7528\u4e8e\u4fdd\u5b58\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u547d\u4ee4\u8bf7\u6c42\uff0c\u8f93\u5165\u7f13\u51b2\u533a\u7684\u5927\u5c0f\u4f1a\u6839\u636e\u8f93\u5165\u5185\u5bb9\u52a8\u6001\u5730\u7f29\u5c0f\u6216\u8005\u6269\u5927\uff0c\u4f46\u6700\u5927\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7 1GB\uff0c\u5426\u5219\u670d\u52a1\u5668\u5c06\u5173\u95ed\u8fd9\u4e2a\u5ba2\u6237\u7aef\uff0c\u6bd4\u5982\u6267\u884c ",(0,i.jsx)(e.code,{children:"SET key value "}),"\uff0c\u90a3\u4e48\u7f13\u51b2\u533a querybuf \u7684\u5185\u5bb9\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"*3\\r\\n$3\\r\\nSET\\r\\n$3\\r\\nkey\\r\\n$5\\r\\nvalue\\r\\n # \n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8f93\u51fa\u7f13\u51b2\u533a\u662f\u670d\u52a1\u5668\u7528\u4e8e\u4fdd\u5b58\u6267\u884c\u5ba2\u6237\u7aef\u547d\u4ee4\u6240\u5f97\u7684\u547d\u4ee4\u56de\u590d\uff0c\u6bcf\u4e2a\u5ba2\u6237\u7aef\u90fd\u6709\u4e24\u4e2a\u8f93\u51fa\u7f13\u51b2\u533a\u53ef\u7528\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e00\u4e2a\u662f\u56fa\u5b9a\u5927\u5c0f\u7684\u7f13\u51b2\u533a\uff0c\u4fdd\u5b58\u957f\u5ea6\u6bd4\u8f83\u5c0f\u7684\u56de\u590d\uff0c\u6bd4\u5982 OK\u3001\u7b80\u77ed\u7684\u5b57\u7b26\u4e32\u503c\u3001\u6574\u6570\u503c\u3001\u9519\u8bef\u56de\u590d\u7b49"}),"\n",(0,i.jsx)(e.li,{children:"\u4e00\u4e2a\u662f\u53ef\u53d8\u5927\u5c0f\u7684\u7f13\u51b2\u533a\uff0c\u4fdd\u5b58\u90a3\u4e9b\u957f\u5ea6\u6bd4\u8f83\u5927\u7684\u56de\u590d\uff0c \u6bd4\u5982\u4e00\u4e2a\u975e\u5e38\u957f\u7684\u5b57\u7b26\u4e32\u503c\u6216\u8005\u4e00\u4e2a\u5305\u542b\u4e86\u5f88\u591a\u5143\u7d20\u7684\u96c6\u5408\u7b49"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"buf \u662f\u4e00\u4e2a\u5927\u5c0f\u4e3a REDIS_REPLY_CHUNK_BYTES (\u5e38\u91cf\u9ed8\u8ba4 16*1024 = 16KB) \u5b57\u8282\u7684\u5b57\u8282\u6570\u7ec4\uff0cbufpos \u5c5e\u6027\u8bb0\u5f55\u4e86 buf \u6570\u7ec4\u76ee\u524d\u5df2\u4f7f\u7528\u7684\u5b57\u8282\u6570\u91cf\uff0c\u5f53 buf \u6570\u7ec4\u7684\u7a7a\u95f4\u5df2\u7ecf\u7528\u5b8c\u6216\u8005\u56de\u590d\u6570\u636e\u592a\u5927\u65e0\u6cd5\u653e\u8fdb buf \u6570\u7ec4\u91cc\uff0c\u670d\u52a1\u5668\u5c31\u4f1a\u5f00\u59cb\u4f7f\u7528\u53ef\u53d8\u5927\u5c0f\u7684\u7f13\u51b2\u533a"}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u4f7f\u7528 reply \u94fe\u8868\u8fde\u63a5\u591a\u4e2a\u5b57\u7b26\u4e32\u5bf9\u8c61\uff0c\u53ef\u4ee5\u4e3a\u5ba2\u6237\u7aef\u4fdd\u5b58\u4e00\u4e2a\u975e\u5e38\u957f\u7684\u547d\u4ee4\u56de\u590d\uff0c\u800c\u4e0d\u5fc5\u53d7\u5230\u56fa\u5b9a\u5927\u5c0f\u7f13\u51b2\u533a 16KB \u5927\u5c0f\u7684\u9650\u5236"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(17225).A+"",width:"1081",height:"177"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u547d\u4ee4",children:"\u547d\u4ee4"}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u5bf9 querybuf \u4e2d\u7684\u547d\u4ee4\u8bf7\u6c42\u7684\u5185\u5bb9\u8fdb\u884c\u5206\u6790\uff0c\u5f97\u51fa\u7684\u547d\u4ee4\u53c2\u6570\u4ee5\u53ca\u53c2\u6570\u7684\u6570\u91cf\u5206\u522b\u4fdd\u5b58\u5230\u5ba2\u6237\u7aef\u72b6\u6001\u7684 argv \u548c argc \u5c5e\u6027"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"argv \u5c5e\u6027\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u6570\u7ec4\u4e2d\u7684\u6bcf\u9879\u90fd\u662f\u5b57\u7b26\u4e32\u5bf9\u8c61\uff0c\u5176\u4e2d argv[0] \u662f\u8981\u6267\u884c\u7684\u547d\u4ee4\uff0c\u800c\u4e4b\u540e\u7684\u5176\u4ed6\u9879\u5219\u662f\u547d\u4ee4\u7684\u53c2\u6570"}),"\n",(0,i.jsx)(e.li,{children:"argc \u5c5e\u6027\u8d1f\u8d23\u8bb0\u5f55 argv \u6570\u7ec4\u7684\u957f\u5ea6"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(77961).A+"",width:"985",height:"283"})}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u5c06\u6839\u636e\u9879 argv[0] \u7684\u503c\uff0c\u5728\u547d\u4ee4\u8868\u4e2d\u67e5\u627e\u547d\u4ee4\u6240\u5bf9\u5e94\u7684\u547d\u4ee4\u7684 redisCommand\uff0c\u5c06\u5ba2\u6237\u7aef\u72b6\u6001\u7684 cmd \u6307\u5411\u8be5\u7ed3\u6784"}),"\n",(0,i.jsx)(e.p,{children:"\u547d\u4ee4\u8868\u662f\u4e00\u4e2a\u5b57\u5178\u7ed3\u6784\uff0c\u952e\u662f SDS \u7ed3\u6784\u4fdd\u5b58\u547d\u4ee4\u7684\u540d\u5b57\uff1b\u503c\u662f\u547d\u4ee4\u6240\u5bf9\u5e94\u7684 redisCommand \u7ed3\u6784\uff0c\u4fdd\u5b58\u4e86\u547d\u4ee4\u7684\u5b9e\u73b0\u51fd\u6570\u3001\u547d\u4ee4\u6807\u5fd7\u3001 \u547d\u4ee4\u5e94\u8be5\u7ed9\u5b9a\u7684\u53c2\u6570\u4e2a\u6570\u3001\u547d\u4ee4\u7684\u603b\u6267\u884c\u6b21\u6570\u548c\u603b\u6d88\u8017\u65f6\u957f\u7b49\u7edf\u8ba1\u4fe1\u606f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(59424).A+"",width:"1273",height:"422"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u9a8c\u8bc1-1",children:"\u9a8c\u8bc1"}),"\n",(0,i.jsx)(e.p,{children:"\u5ba2\u6237\u7aef\u72b6\u6001\u7684 authenticated \u5c5e\u6027\u7528\u4e8e\u8bb0\u5f55\u5ba2\u6237\u7aef\u662f\u5426\u901a\u8fc7\u4e86\u8eab\u4efd\u9a8c\u8bc1"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"authenticated \u503c\u4e3a 0\uff0c\u8868\u793a\u5ba2\u6237\u7aef\u672a\u901a\u8fc7\u8eab\u4efd\u9a8c\u8bc1"}),"\n",(0,i.jsx)(e.li,{children:"authenticated \u503c\u4e3a 1\uff0c\u8868\u793a\u5ba2\u6237\u7aef\u5df2\u901a\u8fc7\u8eab\u4efd\u9a8c\u8bc1"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u5ba2\u6237\u7aef authenticated = 0 \u65f6\uff0c\u9664\u4e86 AUTH \u547d\u4ee4\u4e4b\u5916\uff0c \u5ba2\u6237\u7aef\u53d1\u9001\u7684\u6240\u6709\u5176\u4ed6\u547d\u4ee4\u90fd\u4f1a\u88ab\u670d\u52a1\u5668\u62d2\u7edd\u6267\u884c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis> PING \n(error) NOAUTH Authentication required.\nredis> AUTH 123321 \nOK\nredis> PING \nPONG \n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u65f6\u95f4",children:"\u65f6\u95f4"}),"\n",(0,i.jsxs)(e.p,{children:["ctime \u5c5e\u6027\u8bb0\u5f55\u4e86\u521b\u5efa\u5ba2\u6237\u7aef\u7684\u65f6\u95f4\uff0c\u8fd9\u4e2a\u65f6\u95f4\u53ef\u4ee5\u7528\u6765\u8ba1\u7b97\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u5df2\u7ecf\u8fde\u63a5\u4e86\u591a\u5c11\u79d2\uff0c",(0,i.jsx)(e.code,{children:"CLIENT list"})," \u547d\u4ee4\u7684 age \u57df\u8bb0\u5f55\u4e86\u8fd9\u4e2a\u79d2\u6570"]}),"\n",(0,i.jsxs)(e.p,{children:["lastinteraction \u5c5e\u6027\u8bb0\u5f55\u4e86\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u6700\u540e\u4e00\u6b21\u8fdb\u884c\u4e92\u52a8 (interaction) \u7684\u65f6\u95f4\uff0c\u4e92\u52a8\u53ef\u4ee5\u662f\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u9001\u547d\u4ee4\u8bf7\u6c42\uff0c\u4e5f\u53ef\u4ee5\u662f\u670d\u52a1\u5668\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u547d\u4ee4\u56de\u590d\u3002\u8be5\u5c5e\u6027\u53ef\u4ee5\u7528\u6765\u8ba1\u7b97\u5ba2\u6237\u7aef\u7684\u7a7a\u8f6c (idle) \u65f6\u957f\uff0c \u5c31\u662f\u8ddd\u79bb\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u6700\u540e\u4e00\u6b21\u8fdb\u884c\u4e92\u52a8\u5df2\u7ecf\u8fc7\u53bb\u4e86\u591a\u5c11\u79d2\uff0c",(0,i.jsx)(e.code,{children:"CLIENT list"})," \u547d\u4ee4\u7684 idle \u57df\u8bb0\u5f55\u4e86\u8fd9\u4e2a\u79d2\u6570"]}),"\n",(0,i.jsxs)(e.p,{children:["obuf_soft_limit_reached_time \u5c5e\u6027\u8bb0\u5f55\u4e86",(0,i.jsx)(e.strong,{children:"\u8f93\u51fa\u7f13\u51b2\u533a\u7b2c\u4e00\u6b21\u5230\u8fbe\u8f6f\u6027\u9650\u5236"})," (soft limit) \u7684\u65f6\u95f4"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u751f\u547d\u5468\u671f",children:"\u751f\u547d\u5468\u671f"}),"\n",(0,i.jsx)(e.h5,{id:"\u521b\u5efa",children:"\u521b\u5efa"}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u4f7f\u7528\u4e0d\u540c\u7684\u65b9\u5f0f\u6765\u521b\u5efa\u548c\u5173\u95ed\u4e0d\u540c\u7c7b\u578b\u7684\u5ba2\u6237\u7aef"}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u5ba2\u6237\u7aef\u662f\u901a\u8fc7\u7f51\u7edc\u8fde\u63a5\u4e0e\u670d\u52a1\u5668\u8fdb\u884c\u8fde\u63a5\u7684\u666e\u901a\u5ba2\u6237\u7aef\uff0c\u90a3\u4e48\u5728\u5ba2\u6237\u7aef\u4f7f\u7528 connect \u51fd\u6570\u8fde\u63a5\u5230\u670d\u52a1\u5668\u65f6\uff0c\u670d\u52a1\u5668\u5c31\u4f1a\u8c03\u7528\u8fde\u63a5\u5e94\u7b54\u5904\u7406\u5668\u4e3a\u5ba2\u6237\u7aef\u521b\u5efa\u76f8\u5e94\u7684\u5ba2\u6237\u7aef\u72b6\u6001\uff0c\u5e76\u5c06\u8fd9\u4e2a\u65b0\u7684\u5ba2\u6237\u7aef\u72b6\u6001\u6dfb\u52a0\u5230\u670d\u52a1\u5668\u72b6\u6001\u7ed3\u6784 clients \u94fe\u8868\u7684\u672b\u5c3e"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(75890).A+"",width:"1175",height:"196"})}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u4f1a\u5728\u521d\u59cb\u5316\u65f6\u521b\u5efa\u8d1f\u8d23\u6267\u884c Lua \u811a\u672c\u4e2d\u5305\u542b\u7684 Redis \u547d\u4ee4\u7684\u4f2a\u5ba2\u6237\u7aef\uff0c\u5e76\u5c06\u4f2a\u5ba2\u6237\u7aef\u5173\u8054\u5728\u670d\u52a1\u5668\u72b6\u6001\u7684 lua_client \u5c5e\u6027"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n    // \u4fdd\u5b58\u4f2a\u5ba2\u6237\u7aef\n    redisClient *lua_client\uff1b\n    \n    //...\n};\n"})}),"\n",(0,i.jsx)(e.p,{children:"lua_client \u4f2a\u5ba2\u6237\u7aef\u5728\u670d\u52a1\u5668\u8fd0\u884c\u7684\u6574\u4e2a\u751f\u547d\u5468\u671f\u4f1a\u4e00\u76f4\u5b58\u5728\uff0c\u53ea\u6709\u670d\u52a1\u5668\u88ab\u5173\u95ed\u65f6\uff0c\u8fd9\u4e2a\u5ba2\u6237\u7aef\u624d\u4f1a\u88ab\u5173\u95ed"}),"\n",(0,i.jsx)(e.p,{children:"\u8f7d\u5165 AOF \u6587\u4ef6\u65f6\uff0c \u670d\u52a1\u5668\u4f1a\u521b\u5efa\u7528\u4e8e\u6267\u884c AOF \u6587\u4ef6\u5305\u542b\u7684 Redis \u547d\u4ee4\u7684\u4f2a\u5ba2\u6237\u7aef\uff0c\u5e76\u5728\u8f7d\u5165\u5b8c\u6210\u4e4b\u540e\uff0c\u5173\u95ed\u8fd9\u4e2a\u4f2a\u5ba2\u6237\u7aef"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u5173\u95ed",children:"\u5173\u95ed"}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u4e2a\u666e\u901a\u5ba2\u6237\u7aef\u53ef\u4ee5\u56e0\u4e3a\u591a\u79cd\u539f\u56e0\u800c\u88ab\u5173\u95ed\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5ba2\u6237\u7aef\u8fdb\u7a0b\u9000\u51fa\u6216\u8005\u88ab\u6740\u6b7b\uff0c\u90a3\u4e48\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u7f51\u7edc\u8fde\u63a5\u5c06\u88ab\u5173\u95ed\uff0c\u4ece\u800c\u9020\u6210\u5ba2\u6237\u7aef\u88ab\u5173\u95ed"}),"\n",(0,i.jsxs)(e.li,{children:["\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u9001\u4e86\u5e26\u6709\u4e0d\u7b26\u5408\u534f\u8bae\u683c\u5f0f\u7684\u547d\u4ee4\u8bf7\u6c42\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5ba2\u6237\u7aef\u4f1a",(0,i.jsx)(e.strong,{children:"\u88ab\u670d\u52a1\u5668\u5173\u95ed"})]}),"\n",(0,i.jsxs)(e.li,{children:["\u5ba2\u6237\u7aef\u662f ",(0,i.jsx)(e.code,{children:"CLIENT KILL"})," \u547d\u4ee4\u7684\u76ee\u6807"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u7528\u6237\u4e3a\u670d\u52a1\u5668\u8bbe\u7f6e\u4e86 timeout \u914d\u7f6e\u9009\u9879\uff0c\u90a3\u4e48\u5f53\u5ba2\u6237\u7aef\u7684\u7a7a\u8f6c\u65f6\u95f4\u8d85\u8fc7\u8be5\u503c\u65f6\u5c06\u88ab\u5173\u95ed\uff0c\u7279\u6b8a\u60c5\u51b5\u4e0d\u4f1a\u88ab\u5173\u95ed\uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5ba2\u6237\u7aef\u662f\u4e3b\u670d\u52a1\u5668\uff08REDIS_MASTER \uff09\u6216\u8005\u4ece\u670d\u52a1\u5668\uff08\u6253\u5f00\u4e86 REDIS_SLAVE \u6807\u5fd7\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u6b63\u5728\u88ab BLPOP \u7b49\u547d\u4ee4\u963b\u585e\uff08REDIS_BLOCKED\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u6b63\u5728\u6267\u884c SUBSCRIBE\u3001PSUBSCRIBE \u7b49\u8ba2\u9605\u547d\u4ee4"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u547d\u4ee4\u8bf7\u6c42\u7684\u5927\u5c0f\u8d85\u8fc7\u4e86\u8f93\u5165\u7f13\u51b2\u533a\u7684\u9650\u5236\u5927\u5c0f\uff08\u9ed8\u8ba4\u4e3a 1GB\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u7684\u547d\u4ee4\u56de\u590d\u7684\u5927\u5c0f\u8d85\u8fc7\u4e86\u8f93\u51fa\u7f13\u51b2\u533a\u7684\u9650\u5236\u5927\u5c0f"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u7406\u8bba\u4e0a\u6765\u8bf4\uff0c\u53ef\u53d8\u7f13\u51b2\u533a\u53ef\u4ee5\u4fdd\u5b58\u4efb\u610f\u957f\u7684\u547d\u4ee4\u56de\u590d\uff0c\u4f46\u662f\u4e3a\u4e86\u56de\u590d\u8fc7\u5927\u5360\u7528\u8fc7\u591a\u7684\u670d\u52a1\u5668\u8d44\u6e90\uff0c\u670d\u52a1\u5668\u4f1a\u65f6\u523b\u68c0\u67e5\u5ba2\u6237\u7aef\u7684\u8f93\u51fa\u7f13\u51b2\u533a\u7684\u5927\u5c0f\uff0c\u5e76\u5728\u7f13\u51b2\u533a\u7684\u5927\u5c0f\u8d85\u51fa\u8303\u56f4\u65f6\uff0c\u6267\u884c\u76f8\u5e94\u7684\u9650\u5236\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u786c\u6027\u9650\u5236 (hard limit)\uff1a\u8f93\u51fa\u7f13\u51b2\u533a\u7684\u5927\u5c0f\u8d85\u8fc7\u4e86\u786c\u6027\u9650\u5236\u6240\u8bbe\u7f6e\u7684\u5927\u5c0f\uff0c\u90a3\u4e48\u670d\u52a1\u5668\u4f1a\u5173\u95ed\u5ba2\u6237\u7aef\uff08serverCron \u51fd\u6570\u4e2d\u6267\u884c\uff09\uff0c\u79ef\u5b58\u5728\u8f93\u51fa\u7f13\u51b2\u533a\u4e2d\u7684\u6240\u6709\u5185\u5bb9\u4f1a\u88ab",(0,i.jsx)(e.strong,{children:"\u76f4\u63a5\u91ca\u653e"}),"\uff0c\u4e0d\u4f1a\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef"]}),"\n",(0,i.jsxs)(e.li,{children:["\u8f6f\u6027\u9650\u5236 (soft limit)\uff1a\u8f93\u51fa\u7f13\u51b2\u533a\u7684\u5927\u5c0f\u8d85\u8fc7\u4e86\u8f6f\u6027\u9650\u5236\u6240\u8bbe\u7f6e\u7684\u5927\u5c0f\uff0c\u5c0f\u4e8e\u786c\u6027\u9650\u5236\u7684\u5927\u5c0f\uff0c\u670d\u52a1\u5668\u7684\u64cd\u4f5c\uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7528\u5c5e\u6027 obuf_soft_limit_reached_time \u8bb0\u5f55\u4e0b\u5ba2\u6237\u7aef\u5230\u8fbe\u8f6f\u6027\u9650\u5236\u7684\u8d77\u59cb\u65f6\u95f4\uff0c\u7ee7\u7eed\u76d1\u89c6\u5ba2\u6237\u7aef"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u8f93\u51fa\u7f13\u51b2\u533a\u7684\u5927\u5c0f\u4e00\u76f4\u8d85\u51fa\u8f6f\u6027\u9650\u5236\uff0c\u5e76\u4e14\u6301\u7eed\u65f6\u95f4\u8d85\u8fc7\u670d\u52a1\u5668\u8bbe\u5b9a\u7684\u65f6\u957f\uff0c\u90a3\u4e48\u670d\u52a1\u5668\u5c06\u5173\u95ed\u5ba2\u6237\u7aef"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u5728\u6307\u5b9a\u65f6\u95f4\u5185\u4e0d\u518d\u8d85\u51fa\u8f6f\u6027\u9650\u5236\uff0c\u90a3\u4e48\u5ba2\u6237\u7aef\u5c31\u4e0d\u4f1a\u88ab\u5173\u95ed\uff0c\u5e76\u4e14 o_s_l_r_t \u5c5e\u6027\u6e05\u96f6"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528 client-output-buffer-limit \u9009\u9879\u53ef\u4ee5\u4e3a\u666e\u901a\u5ba2\u6237\u7aef\u3001\u4ece\u670d\u52a1\u5668\u5ba2\u6237\u7aef\u3001\u6267\u884c\u53d1\u5e03\u4e0e\u8ba2\u9605\u529f\u80fd\u7684\u5ba2\u6237\u7aef\u5206\u522b\u8bbe\u7f6e\u4e0d\u540c\u7684\u8f6f\u6027\u9650\u5236\u548c\u786c\u6027\u9650\u5236\uff0c\u683c\u5f0f\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"client-output-buffer-limit <class> <hard limit> <soft limit> <soft seconds>\n\nclient-output-buffer-limit normal 0 0 0 \nclient-output-buffer-limit slave 256mb 64mb 60 \nclient-output-buffer-limit pubsub 32mb 8mb 60\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7b2c\u4e00\u884c\uff1a\u5c06\u666e\u901a\u5ba2\u6237\u7aef\u7684\u786c\u6027\u9650\u5236\u548c\u8f6f\u6027\u9650\u5236\u90fd\u8bbe\u7f6e\u4e3a 0\uff0c\u8868\u793a\u4e0d\u9650\u5236\u5ba2\u6237\u7aef\u7684\u8f93\u51fa\u7f13\u51b2\u533a\u5927\u5c0f"}),"\n",(0,i.jsx)(e.li,{children:"\u7b2c\u4e8c\u884c\uff1a\u5c06\u4ece\u670d\u52a1\u5668\u5ba2\u6237\u7aef\u7684\u786c\u6027\u9650\u5236\u8bbe\u7f6e\u4e3a 256MB\uff0c\u8f6f\u6027\u9650\u5236\u8bbe\u7f6e\u4e3a 64MB\uff0c\u8f6f\u6027\u9650\u5236\u7684\u65f6\u957f\u4e3a 60 \u79d2"}),"\n",(0,i.jsx)(e.li,{children:"\u7b2c\u4e09\u884c\uff1a\u5c06\u6267\u884c\u53d1\u5e03\u4e0e\u8ba2\u9605\u529f\u80fd\u7684\u5ba2\u6237\u7aef\u7684\u786c\u6027\u9650\u5236\u8bbe\u7f6e\u4e3a 32MB\uff0c\u8f6f\u6027\u9650\u5236\u8bbe\u7f6e\u4e3a 8MB\uff0c\u8f6f\u6027\u9650\u5236\u7684\u65f6\u957f\u4e3a 60 \u79d2"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u670d\u52a1\u5668-2",children:"\u670d\u52a1\u5668"}),"\n",(0,i.jsx)(e.h4,{id:"\u6267\u884c\u6d41\u7a0b-1",children:"\u6267\u884c\u6d41\u7a0b"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u670d\u52a1\u5668\u4e0e\u591a\u4e2a\u5ba2\u6237\u7aef\u5efa\u7acb\u7f51\u7edc\u8fde\u63a5\uff0c\u5904\u7406\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u547d\u4ee4\u8bf7\u6c42\uff0c\u5728\u6570\u636e\u5e93\u4e2d\u4fdd\u5b58\u5ba2\u6237\u7aef\u6267\u884c\u547d\u4ee4\u6240\u4ea7\u751f\u7684\u6570\u636e\uff0c\u5e76\u901a\u8fc7\u8d44\u6e90\u7ba1\u7406\u6765\u7ef4\u6301\u670d\u52a1\u5668\u81ea\u8eab\u7684\u8fd0\u8f6c\uff0c\u6240\u4ee5\u4e00\u4e2a\u547d\u4ee4\u8bf7\u6c42\u4ece\u53d1\u9001\u5230\u83b7\u5f97\u56de\u590d\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u9700\u8981\u5b8c\u6210\u4e00\u7cfb\u5217\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.h5,{id:"\u547d\u4ee4\u8bf7\u6c42",children:"\u547d\u4ee4\u8bf7\u6c42"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u670d\u52a1\u5668\u7684\u547d\u4ee4\u8bf7\u6c42\u6765\u81ea Redis \u5ba2\u6237\u7aef\uff0c\u5f53\u7528\u6237\u5728\u5ba2\u6237\u7aef\u4e2d\u952e\u5165\u4e00\u4e2a\u547d\u4ee4\u8bf7\u6c42\u65f6\uff0c\u5ba2\u6237\u7aef\u4f1a\u5c06\u8fd9\u4e2a\u547d\u4ee4\u8bf7\u6c42\u8f6c\u6362\u6210\u534f\u8bae\u683c\u5f0f\uff0c\u901a\u8fc7\u8fde\u63a5\u5230\u670d\u52a1\u5668\u7684\u5957\u63a5\u5b57\uff0c\u5c06\u534f\u8bae\u683c\u5f0f\u7684\u547d\u4ee4\u8bf7\u6c42\u53d1\u9001\u7ed9\u670d\u52a1\u5668"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"SET KEY VALUE ->\t# \u547d\u4ee4\n*3\\r\\nS3\\r\\nSET\\r\\n$3\\r\\nKEY\\r\\n$5\\r\\nVALUE\\r\\n\t# \u534f\u8bae\u683c\u5f0f\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5f53\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u8fde\u63a5\u5957\u63a5\u5b57\u56e0\u4e3a\u5ba2\u6237\u7aef\u7684\u5199\u5165\u800c\u53d8\u5f97\u53ef\u8bfb\uff0c\u670d\u52a1\u5668\u8c03\u7528",(0,i.jsx)(e.strong,{children:"\u547d\u4ee4\u8bf7\u6c42\u5904\u7406\u5668"}),"\u6765\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8bfb\u53d6\u5957\u63a5\u5b57\u4e2d\u534f\u8bae\u683c\u5f0f\u7684\u547d\u4ee4\u8bf7\u6c42\uff0c\u5e76\u5c06\u5176\u4fdd\u5b58\u5230\u5ba2\u6237\u7aef\u72b6\u6001\u7684\u8f93\u5165\u7f13\u51b2\u533a\u91cc\u9762"}),"\n",(0,i.jsx)(e.li,{children:"\u5bf9\u8f93\u5165\u7f13\u51b2\u533a\u4e2d\u7684\u547d\u4ee4\u8bf7\u6c42\u8fdb\u884c\u5206\u6790\uff0c\u63d0\u53d6\u51fa\u547d\u4ee4\u8bf7\u6c42\u4e2d\u5305\u542b\u7684\u547d\u4ee4\u53c2\u6570\u4ee5\u53ca\u547d\u4ee4\u53c2\u6570\u7684\u4e2a\u6570\uff0c\u7136\u540e\u5206\u522b\u5c06\u53c2\u6570\u548c\u53c2\u6570\u4e2a\u6570\u4fdd\u5b58\u5230\u5ba2\u6237\u7aef\u72b6\u6001\u7684 argv \u5c5e\u6027\u548c argc \u5c5e\u6027\u91cc"}),"\n",(0,i.jsx)(e.li,{children:"\u8c03\u7528\u547d\u4ee4\u6267\u884c\u5668\uff0c\u6267\u884c\u5ba2\u6237\u7aef\u6307\u5b9a\u7684\u547d\u4ee4"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6700\u540e\u5ba2\u6237\u7aef\u63a5\u6536\u5230\u534f\u8bae\u683c\u5f0f\u7684\u547d\u4ee4\u56de\u590d\u4e4b\u540e\uff0c\u4f1a\u5c06\u8fd9\u4e9b\u56de\u590d\u8f6c\u6362\u6210\u7528\u6237\u53ef\u8bfb\u7684\u683c\u5f0f\u6253\u5370\u7ed9\u7528\u6237\u89c2\u770b\uff0c\u81f3\u6b64\u6574\u4f53\u6d41\u7a0b\u7ed3\u675f"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u547d\u4ee4\u6267\u884c",children:"\u547d\u4ee4\u6267\u884c"}),"\n",(0,i.jsx)(e.p,{children:"\u547d\u4ee4\u6267\u884c\u5668\u5f00\u59cb\u5bf9\u547d\u4ee4\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u67e5\u627e\u547d\u4ee4\uff1a\u9996\u5148\u6839\u636e\u5ba2\u6237\u7aef\u72b6\u6001\u7684 argv[0] \u53c2\u6570\uff0c\u5728",(0,i.jsx)(e.strong,{children:"\u547d\u4ee4\u8868 (command table)"})," \u4e2d\u67e5\u627e\u53c2\u6570\u6240\u6307\u5b9a\u7684\u547d\u4ee4\uff0c\u5e76\u5c06\u627e\u5230\u7684\u547d\u4ee4\u4fdd\u5b58\u5230\u5ba2\u6237\u7aef\u72b6\u6001\u7684 cmd \u5c5e\u6027\u91cc\u9762\uff0c\u662f\u4e00\u4e2a redisCommand \u7ed3\u6784"]}),"\n",(0,i.jsx)(e.p,{children:"\u547d\u4ee4\u67e5\u627e\u7b97\u6cd5\u4e0e\u5b57\u6bcd\u7684\u5927\u5c0f\u5199\u65e0\u5173\uff0c\u6240\u4ee5\u547d\u4ee4\u540d\u5b57\u7684\u5927\u5c0f\u5199\u4e0d\u5f71\u54cd\u547d\u4ee4\u8868\u7684\u67e5\u627e\u7ed3\u679c"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u9884\u5907\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u68c0\u67e5\u5ba2\u6237\u7aef\u72b6\u6001\u7684 cmd \u6307\u9488\u662f\u5426\u6307\u5411 NULL\uff0c\u6839\u636e redisCommand \u68c0\u67e5\u8bf7\u6c42\u53c2\u6570\u7684\u6570\u91cf\u662f\u5426\u6b63\u786e"}),"\n",(0,i.jsx)(e.li,{children:"\u68c0\u67e5\u5ba2\u6237\u7aef\u662f\u5426\u901a\u8fc7\u8eab\u4efd\u9a8c\u8bc1"}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u670d\u52a1\u5668\u6253\u5f00\u4e86 maxmemory \u529f\u80fd\uff0c\u6267\u884c\u547d\u4ee4\u4e4b\u524d\u8981\u5148\u68c0\u67e5\u670d\u52a1\u5668\u7684\u5185\u5b58\u5360\u7528\uff0c\u5728\u6709\u9700\u8981\u65f6\u8fdb\u884c\u5185\u5b58\u56de\u6536\uff08",(0,i.jsx)(e.strong,{children:"\u9010\u51fa\u7b97\u6cd5"}),"\uff09"]}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u670d\u52a1\u5668\u4e0a\u4e00\u6b21\u6267\u884c BGSAVE \u547d\u4ee4\u51fa\u9519\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u6253\u5f00\u4e86 stop-writes-on-bgsave-error \u529f\u80fd\uff0c\u90a3\u4e48\u5982\u679c\u672c\u6b21\u6267\u884c\u7684\u662f\u5199\u547d\u4ee4\uff0c\u670d\u52a1\u4f1a\u62d2\u7edd\u6267\u884c\uff0c\u5e76\u8fd4\u56de\u9519\u8bef"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u5ba2\u6237\u7aef\u5f53\u524d\u6b63\u5728\u7528 SUBSCRIBE \u6216 PSUBSCRIBE \u547d\u4ee4\u8ba2\u9605\u9891\u9053\uff0c\u90a3\u4e48\u670d\u52a1\u5668\u4f1a\u62d2\u7edd\u9664\u4e86 SUBSCRIBE\u3001SUBSCRIBE\u3001 UNSUBSCRIBE\u3001PUNSUBSCRIBE \u4e4b\u5916\u7684\u5176\u4ed6\u547d\u4ee4"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u670d\u52a1\u5668\u6b63\u5728\u8fdb\u884c\u8f7d\u5165\u6570\u636e\uff0c\u53ea\u6709 sflags \u5e26\u6709 1 \u6807\u8bc6\uff08\u6bd4\u5982 INFO\u3001SHUTDOWN\u3001PUBLISH\u7b49\uff09\u7684\u547d\u4ee4\u624d\u4f1a\u88ab\u6267\u884c"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u670d\u52a1\u5668\u6267\u884c Lua \u811a\u672c\u800c\u8d85\u65f6\u5e76\u8fdb\u5165\u963b\u585e\u72b6\u6001\uff0c\u90a3\u4e48\u53ea\u4f1a\u6267\u884c\u5ba2\u6237\u7aef\u53d1\u6765\u7684 SHUTDOWN nosave \u548c SCRIPT KILL \u547d\u4ee4"}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u5ba2\u6237\u7aef\u6b63\u5728\u6267\u884c\u4e8b\u52a1\uff0c\u90a3\u4e48\u670d\u52a1\u5668\u53ea\u4f1a\u6267\u884c\u5ba2\u6237\u7aef\u53d1\u6765\u7684 EXEC\u3001DISCARD\u3001MULTI\u3001WATCH \u56db\u4e2a\u547d\u4ee4\uff0c\u5176\u4ed6\u547d\u4ee4\u90fd\u4f1a\u88ab",(0,i.jsx)(e.strong,{children:"\u653e\u8fdb\u4e8b\u52a1\u961f\u5217"}),"\u4e2d"]}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u670d\u52a1\u5668\u6253\u5f00\u4e86\u76d1\u89c6\u5668\u529f\u80fd\uff0c\u90a3\u4e48\u4f1a\u5c06\u8981\u6267\u884c\u7684\u547d\u4ee4\u548c\u53c2\u6570\u7b49\u4fe1\u606f\u53d1\u9001\u7ed9\u76d1\u89c6\u5668"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u8c03\u7528\u547d\u4ee4\u7684\u5b9e\u73b0\u51fd\u6570\uff1a\u88ab\u8c03\u7528\u7684\u51fd\u6570\u4f1a\u6267\u884c\u6307\u5b9a\u7684\u64cd\u4f5c\u5e76\u4ea7\u751f\u76f8\u5e94\u7684\u547d\u4ee4\u56de\u590d\uff0c\u56de\u590d\u4f1a\u88ab\u4fdd\u5b58\u5728\u5ba2\u6237\u7aef\u72b6\u6001\u7684\u8f93\u51fa\u7f13\u51b2\u533a\u91cc\u9762\uff08buf \u548c reply \u5c5e\u6027\uff09\uff0c\u7136\u540e\u5b9e\u73b0\u51fd\u6570\u8fd8\u4f1a",(0,i.jsx)(e.strong,{children:"\u4e3a\u5ba2\u6237\u7aef\u7684\u5957\u63a5\u5b57\u5173\u8054\u547d\u4ee4\u56de\u590d\u5904\u7406\u5668"}),"\uff0c\u8fd9\u4e2a\u5904\u7406\u5668\u8d1f\u8d23\u5c06\u547d\u4ee4\u56de\u590d\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u540e\u7eed\u5de5\u4f5c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u670d\u52a1\u5668\u5f00\u542f\u4e86\u6162\u67e5\u8be2\u65e5\u5fd7\u529f\u80fd\uff0c\u90a3\u4e48\u6162\u67e5\u8be2\u65e5\u5fd7\u6a21\u5757\u4f1a\u68c0\u67e5\u662f\u5426\u9700\u8981\u4e3a\u521a\u521a\u6267\u884c\u5b8c\u7684\u547d\u4ee4\u8bf7\u6c42\u6dfb\u52a0\u4e00\u6761\u65b0\u7684\u6162\u67e5\u8be2\u65e5\u5fd7"}),"\n",(0,i.jsx)(e.li,{children:"\u6839\u636e\u6267\u884c\u547d\u4ee4\u6240\u8017\u8d39\u7684\u65f6\u957f\uff0c\u66f4\u65b0\u547d\u4ee4\u7684 redisCommand \u7ed3\u6784\u7684 milliseconds \u5c5e\u6027\uff0c\u5e76\u5c06\u547d\u4ee4 calls \u8ba1\u6570\u5668\u7684\u503c\u589e\u4e00"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u670d\u52a1\u5668\u5f00\u542f\u4e86 AOF \u6301\u4e45\u5316\u529f\u80fd\uff0c\u90a3\u4e48 AOF \u6301\u4e45\u5316\u6a21\u5757\u4f1a\u5c06\u6267\u884c\u7684\u547d\u4ee4\u8bf7\u6c42\u5199\u5165\u5230 AOF \u7f13\u51b2\u533a\u91cc\u9762"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u6709\u5176\u4ed6\u4ece\u670d\u52a1\u5668\u6b63\u5728\u590d\u5236\u5f53\u524d\u8fd9\u4e2a\u670d\u52a1\u5668\uff0c\u90a3\u4e48\u670d\u52a1\u5668\u4f1a\u5c06\u6267\u884c\u7684\u547d\u4ee4\u4f20\u64ad\u7ed9\u6240\u6709\u4ece\u670d\u52a1\u5668"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5c06\u547d\u4ee4\u56de\u590d\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\uff1a\u5ba2\u6237\u7aef",(0,i.jsx)(e.strong,{children:"\u5957\u63a5\u5b57\u53d8\u4e3a\u53ef\u5199\u72b6\u6001"}),"\u65f6\uff0c\u670d\u52a1\u5668\u5c31\u4f1a\u6267\u884c\u547d\u4ee4\u56de\u590d\u5904\u7406\u5668\uff0c\u5c06\u5ba2\u6237\u7aef\u8f93\u51fa\u7f13\u51b2\u533a\u4e2d\u7684\u547d\u4ee4\u56de\u590d\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\uff0c\u53d1\u9001\u5b8c\u6bd5\u4e4b\u540e\u56de\u590d\u5904\u7406\u5668\u4f1a\u6e05\u7a7a\u5ba2\u6237\u7aef\u72b6\u6001\u7684\u8f93\u51fa\u7f13\u51b2\u533a\uff0c\u4e3a\u5904\u7406\u4e0b\u4e00\u4e2a\u547d\u4ee4\u8bf7\u6c42\u505a\u597d\u51c6\u5907"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"command",children:"Command"}),"\n",(0,i.jsx)(e.p,{children:"\u6bcf\u4e2a redisCommand \u7ed3\u6784\u8bb0\u5f55\u4e86\u4e00\u4e2aRedis \u547d\u4ee4\u7684\u5b9e\u73b0\u4fe1\u606f\uff0c\u4e3b\u8981\u5c5e\u6027"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:'struct redisCommand {\n    // \u547d\u4ee4\u7684\u540d\u5b57\uff0c\u6bd4\u5982"set"\n    char *name;\n    \n    // \u51fd\u6570\u6307\u9488\uff0c\u6307\u5411\u547d\u4ee4\u7684\u5b9e\u73b0\u51fd\u6570\uff0c\u6bd4\u5982setCommand\n    // redisCommandProc \u7c7b\u578b\u7684\u5b9a\u4e49\u4e3a typedef void redisCommandProc(redisClient *c)\n    redisCommandProc *proc;\n    \n    // \u547d\u4ee4\u53c2\u6570\u7684\u4e2a\u6570\uff0c\u7528\u4e8e\u68c0\u67e5\u547d\u4ee4\u8bf7\u6c42\u7684\u683c\u5f0f\u662f\u5426\u6b63\u786e\u3002\u5982\u679c\u8fd9\u4e2a\u503c\u4e3a\u8d1f\u6570-N, \u90a3\u4e48\u8868\u793a\u53c2\u6570\u7684\u6570\u91cf\u5927\u4e8e\u7b49\u4e8eN\u3002\n    // \u6ce8\u610f\u547d\u4ee4\u7684\u540d\u5b57\u672c\u8eab\u4e5f\u662f\u4e00\u4e2a\u53c2\u6570\uff0c\u6bd4\u5982 SET msg "hello"\uff0c\u547d\u4ee4\u7684\u53c2\u6570\u662f"SET"\u3001"msg"\u3001"hello" \u4e09\u4e2a\n\tint arity;\n    \n    // \u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u6807\u8bc6\u503c\uff0c\u8fd9\u4e2a\u503c\u8bb0\u5f55\u4e86\u547d\u4ee4\u7684\u5c5e\u6027\uff0c\uff0c\n    // \u6bd4\u5982\u8fd9\u4e2a\u547d\u4ee4\u662f\u5199\u547d\u4ee4\u8fd8\u662f\u8bfb\u547d\u4ee4\uff0c\u8fd9\u4e2a\u547d\u4ee4\u662f\u5426\u5141\u8bb8\u5728\u8f7d\u5165\u6570\u636e\u65f6\u4f7f\u7528\uff0c\u662f\u5426\u5141\u8bb8\u5728Lua\u811a\u672c\u4e2d\u4f7f\u7528\u7b49\u7b49\n    char *sflags;\n    \n    // \u5bf9sflags\u6807\u8bc6\u8fdb\u884c\u5206\u6790\u5f97\u51fa\u7684\u4e8c\u8fdb\u5236\u6807\u8bc6\uff0c\u7531\u7a0b\u5e8f\u81ea\u52a8\u751f\u6210\u3002\u670d\u52a1\u5668\u5bf9\u547d\u4ee4\u6807\u8bc6\u8fdb\u884c\u68c0\u67e5\u65f6\u4f7f\u7528\u7684\u90fd\u662f flags \u5c5e\u6027\n    // \u800c\u4e0d\u662fsflags\u5c5e\u6027\uff0c\u56e0\u4e3a\u5bf9\u4e8c\u8fdb\u5236\u6807\u8bc6\u7684\u68c0\u67e5\u53ef\u4ee5\u65b9\u4fbf\u5730\u901a\u8fc7& ^ ~ \u7b49\u64cd\u4f5c\u6765\u5b8c\u6210\n    int flags;\n    \n    // \u670d\u52a1\u5668\u603b\u5171\u6267\u884c\u4e86\u591a\u5c11\u6b21\u8fd9\u4e2a\u547d\u4ee4\n    long long calls;\n    \n    // \u670d\u52a1\u5668\u6267\u884c\u8fd9\u4e2a\u547d\u4ee4\u6240\u8017\u8d39\u7684\u603b\u65f6\u957f\n    long long milliseconds;\n};\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"servercron",children:"serverCron"}),"\n",(0,i.jsx)(e.h5,{id:"\u57fa\u672c\u4ecb\u7ecd-14",children:"\u57fa\u672c\u4ecb\u7ecd"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u670d\u52a1\u5668\u4ee5\u5468\u671f\u6027\u4e8b\u4ef6\u7684\u65b9\u5f0f\u6765\u8fd0\u884c serverCron \u51fd\u6570\uff0c\u670d\u52a1\u5668\u521d\u59cb\u5316\u65f6\u8bfb\u53d6\u914d\u7f6e server.hz \u7684\u503c\uff0c\u9ed8\u8ba4\u4e3a 10\uff0c\u4ee3\u8868\u6bcf\u79d2\u949f\u6267\u884c 10 \u6b21\uff0c\u5373",(0,i.jsx)(e.strong,{children:"\u6bcf\u9694 100 \u6beb\u79d2\u6267\u884c\u4e00\u6b21"}),"\uff0c\u6267\u884c\u6307\u4ee4 info server \u53ef\u4ee5\u67e5\u770b"]}),"\n",(0,i.jsx)(e.p,{children:"serverCron \u51fd\u6570\u8d1f\u8d23\u5b9a\u671f\u5bf9\u81ea\u8eab\u7684\u8d44\u6e90\u548c\u72b6\u6001\u8fdb\u884c\u68c0\u67e5\u548c\u8c03\u6574\uff0c\u4ece\u800c\u786e\u4fdd\u670d\u52a1\u5668\u53ef\u4ee5\u957f\u671f\u3001\u7a33\u5b9a\u5730\u8fd0\u884c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u66f4\u65b0\u670d\u52a1\u5668\u7684\u5404\u7c7b\u7edf\u8ba1\u4fe1\u606f\uff0c\u6bd4\u5982\u65f6\u95f4\u3001\u5185\u5b58\u5360\u7528\u3001 \u6570\u636e\u5e93\u5360\u7528\u60c5\u51b5\u7b49"}),"\n",(0,i.jsx)(e.li,{children:"\u6e05\u7406\u6570\u636e\u5e93\u4e2d\u7684\u8fc7\u671f\u952e\u503c\u5bf9"}),"\n",(0,i.jsx)(e.li,{children:"\u5173\u95ed\u548c\u6e05\u7406\u8fde\u63a5\u5931\u6548\u7684\u5ba2\u6237\u7aef"}),"\n",(0,i.jsx)(e.li,{children:"\u8fdb\u884c AOF \u6216 RDB \u6301\u4e45\u5316\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u670d\u52a1\u5668\u662f\u4e3b\u670d\u52a1\u5668\uff0c\u90a3\u4e48\u5bf9\u4ece\u670d\u52a1\u5668\u8fdb\u884c\u5b9a\u671f\u540c\u6b65"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u5904\u4e8e\u96c6\u7fa4\u6a21\u5f0f\uff0c\u5bf9\u96c6\u7fa4\u8fdb\u884c\u5b9a\u671f\u540c\u6b65\u548c\u8fde\u63a5\u6d4b\u8bd5"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u65f6\u95f4\u7f13\u5b58",children:"\u65f6\u95f4\u7f13\u5b58"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u670d\u52a1\u5668\u4e2d\u6709\u5f88\u591a\u529f\u80fd\u9700\u8981\u83b7\u53d6\u7cfb\u7edf\u7684\u5f53\u524d\u65f6\u95f4\uff0c\u800c\u6bcf\u6b21\u83b7\u53d6\u7cfb\u7edf\u7684\u5f53\u524d\u65f6\u95f4\u90fd\u9700\u8981\u6267\u884c\u4e00\u6b21\u7cfb\u7edf\u8c03\u7528\uff0c\u4e3a\u4e86\u51cf\u5c11\u7cfb\u7edf\u8c03\u7528\u7684\u6267\u884c\u6b21\u6570\uff0c\u670d\u52a1\u5668\u72b6\u6001\u4e2d\u7684 unixtime \u5c5e\u6027\u548c mstime \u5c5e\u6027\u88ab\u7528\u4f5c\u5f53\u524d\u65f6\u95f4\u7684\u7f13\u5b58"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n    // \u4fdd\u5b58\u4e86\u79d2\u7ea7\u7cbe\u5ea6\u7684\u7cfb\u7edf\u5f53\u524dUNIX\u65f6\u95f4\u6233\n    time_t unixtime;\n\t// \u4fdd\u5b58\u4e86\u6beb\u79d2\u7ea7\u7cbe\u5ea6\u7684\u7cfb\u7edf\u5f53\u524dUNIX\u65f6\u95f4\u6233 \n    long long mstime;\n    \n};\n"})}),"\n",(0,i.jsx)(e.p,{children:"serverCron \u51fd\u6570\u9ed8\u8ba4\u4ee5\u6bcf 100 \u6beb\u79d2\u4e00\u6b21\u7684\u9891\u7387\u66f4\u65b0\u4e24\u4e2a\u5c5e\u6027\uff0c\u6240\u4ee5\u5c5e\u6027\u8bb0\u5f55\u7684\u65f6\u95f4\u7684\u7cbe\u786e\u5ea6\u5e76\u4e0d\u9ad8"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u670d\u52a1\u5668\u53ea\u4f1a\u5728\u6253\u5370\u65e5\u5fd7\u3001\u66f4\u65b0\u670d\u52a1\u5668\u7684 LRU \u65f6\u949f\u3001\u51b3\u5b9a\u662f\u5426\u6267\u884c\u6301\u4e45\u5316\u4efb\u52a1\u3001\u8ba1\u7b97\u670d\u52a1\u5668\u4e0a\u7ebf\u65f6\u95f4\uff08uptime\uff09\u8fd9\u7c7b\u5bf9\u65f6\u95f4\u7cbe\u786e\u5ea6\u8981\u6c42\u4e0d\u9ad8\u7684\u529f\u80fd\u4e0a"}),"\n",(0,i.jsx)(e.li,{children:"\u5bf9\u4e8e\u4e3a\u952e\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\u3001\u6dfb\u52a0\u6162\u67e5\u8be2\u65e5\u5fd7\u8fd9\u79cd\u9700\u8981\u9ad8\u7cbe\u786e\u5ea6\u65f6\u95f4\u7684\u529f\u80fd\u6765\u8bf4\uff0c\u670d\u52a1\u5668\u8fd8\u662f\u4f1a\u518d\u6b21\u6267\u884c\u7cfb\u7edf\u8c03\u7528\uff0c\u4ece\u800c\u83b7\u5f97\u6700\u51c6\u786e\u7684\u7cfb\u7edf\u5f53\u524d\u65f6\u95f4"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"lru-\u65f6\u949f",children:"LRU \u65f6\u949f"}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u72b6\u6001\u4e2d\u7684 lruclock \u5c5e\u6027\u4fdd\u5b58\u4e86\u670d\u52a1\u5668\u7684 LRU \u65f6\u949f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n    // \u9ed8\u8ba4\u6bcf10\u79d2\u66f4\u65b0\u4e00\u6b21\u7684\u65f6\u949f\u7f13\u5b58\uff0c\u7528\u4e8e\u8ba1\u7b97\u952e\u7684\u7a7a\u8f6c(idle)\u65f6\u957f\u3002 \n    unsigned lruclock:22; \n};\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6bcf\u4e2a Redis \u5bf9\u8c61\u90fd\u4f1a\u6709\u4e00\u4e2a lru \u5c5e\u6027\uff0c \u8fd9\u4e2a lru \u5c5e\u6027\u4fdd\u5b58\u4e86\u5bf9\u8c61\u6700\u540e\u4e00\u6b21\u88ab\u547d\u4ee4\u8bbf\u95ee\u7684\u65f6\u95f4"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct redisObiect {\n\tunsigned lru:22; \n} robj;\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u670d\u52a1\u5668\u8981\u8ba1\u7b97\u4e00\u4e2a\u6570\u636e\u5e93\u952e\u7684\u7a7a\u8f6c\u65f6\u95f4\uff08\u5373\u6570\u636e\u5e93\u952e\u5bf9\u5e94\u7684\u503c\u5bf9\u8c61\u7684\u7a7a\u8f6c\u65f6\u95f4\uff09\uff0c\u7a0b\u5e8f\u4f1a\u7528\u670d\u52a1\u5668\u7684 lruclock \u5c5e\u6027\u8bb0\u5f55\u7684\u65f6\u95f4\u51cf\u53bb\u5bf9\u8c61\u7684 lru \u5c5e\u6027\u8bb0\u5f55\u7684\u65f6\u95f4"}),"\n",(0,i.jsx)(e.p,{children:"serverCron \u51fd\u6570\u9ed8\u8ba4\u4ee5\u6bcf 100 \u6beb\u79d2\u4e00\u6b21\u7684\u9891\u7387\u66f4\u65b0\u8fd9\u4e2a\u5c5e\u6027\uff0c\u6240\u4ee5\u5f97\u51fa\u7684\u7a7a\u8f6c\u65f6\u95f4\u4e5f\u662f\u6a21\u7cca\u7684"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u547d\u4ee4\u6b21\u6570",children:"\u547d\u4ee4\u6b21\u6570"}),"\n",(0,i.jsxs)(e.p,{children:["serverCron \u4e2d\u7684 trackOperationsPerSecond \u51fd\u6570\u4ee5\u6bcf 100 \u6beb\u79d2\u4e00\u6b21\u7684\u9891\u7387\u6267\u884c\uff0c\u51fd\u6570\u529f\u80fd\u662f\u4ee5",(0,i.jsx)(e.strong,{children:"\u62bd\u6837\u8ba1\u7b97"}),"\u7684\u65b9\u5f0f\uff0c\u4f30\u7b97\u5e76\u8bb0\u5f55\u670d\u52a1\u5668\u5728\u6700\u8fd1\u4e00\u79d2\u949f\u5904\u7406\u7684\u547d\u4ee4\u8bf7\u6c42\u6570\u91cf\uff0c\u8fd9\u4e2a\u503c\u53ef\u4ee5\u901a\u8fc7 INFO status \u547d\u4ee4\u7684 instantaneous_ops_per_sec \u57df\u67e5\u770b\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis> INFO stats\n# Stats \ninstantaneous_ops_per_sec:6\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6839\u636e\u4e0a\u4e00\u6b21\u62bd\u6837\u65f6\u95f4 ops_sec_last_sample_time \u548c\u5f53\u524d\u7cfb\u7edf\u65f6\u95f4\uff0c\u4ee5\u53ca\u4e0a\u4e00\u6b21\u5df2\u6267\u884c\u7684\u547d\u4ee4\u6570 ops_sec_last_sample_ops \u548c\u670d\u52a1\u5668\u5f53\u524d\u5df2\u7ecf\u6267\u884c\u7684\u547d\u4ee4\u6570\uff0c\u8ba1\u7b97\u51fa\u4e24\u6b21\u51fd\u6570\u8c03\u7528\u671f\u95f4\uff0c\u670d\u52a1\u5668\u5e73\u5747\u6bcf\u6beb\u79d2\u5904\u7406\u4e86\u591a\u5c11\u4e2a\u547d\u4ee4\u8bf7\u6c42\uff0c\u8be5\u503c\u4e58\u4ee5 1000 \u5f97\u5230\u6bcf\u79d2\u5185\u7684\u6267\u884c\u547d\u4ee4\u7684\u4f30\u8ba1\u503c\uff0c\u653e\u5165 ops_sec_samples \u73af\u5f62\u6570\u7ec4\u91cc"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n    // \u4e0a\u4e00\u6b21\u8fdb\u884c\u62bd\u6837\u7684\u65f6\u95f4\n\tlong long ops_sec_last_sample_time;\n    // \u4e0a\u4e00\u6b21\u62bd\u6837\u65f6\uff0c\u670d\u52a1\u5668\u5df2\u6267\u884c\u547d\u4ee4\u7684\u6570\u91cf \n    long long ops_sec_last_sample_ops;\n    // REDIS_OPS_SEC_SAMPLES \u5927\u5c0f\uff08\u9ed8\u8ba4\u503c\u4e3a16)\u7684\u73af\u5f62\u6570\u7ec4\uff0c\u6570\u7ec4\u7684\u6bcf\u4e00\u9879\u8bb0\u5f55\u4e00\u6b21\u7684\u62bd\u6837\u7ed3\u679c\n    long long ops_sec_samples[REDIS_OPS_SEC_SAMPLES];\n    // ops_sec_samples\u6570\u7ec4\u7684\u7d22\u5f15\u503c\uff0c\u6bcf\u6b21\u62bd\u6837\u540e\u5c06\u503c\u81ea\u589e\u4e00\uff0c\u503c\u4e3a16\u65f6\u91cd\u7f6e\u4e3a0\uff0c\u8ba9\u6570\u7ec4\u6210\u4e3a\u4e00\u4e2a\u73af\u5f62\u6570\u7ec4\n    int ops_sec_idx;\n};\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u5185\u5b58\u5cf0\u503c",children:"\u5185\u5b58\u5cf0\u503c"}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u72b6\u6001\u91cc\u7684 stat_peak_memory \u5c5e\u6027\u8bb0\u5f55\u4e86\u670d\u52a1\u5668\u5185\u5b58\u5cf0\u503c\u5927\u5c0f\uff0c\u5faa\u73af\u51fd\u6570\u6bcf\u6b21\u6267\u884c\u65f6\u90fd\u4f1a\u67e5\u770b\u670d\u52a1\u5668\u5f53\u524d\u4f7f\u7528\u7684\u5185\u5b58\u6570\u91cf\uff0c\u5e76\u4e0e stat_peak_memory \u4fdd\u5b58\u7684\u6570\u503c\u8fdb\u884c\u6bd4\u8f83\uff0c\u8bbe\u7f6e\u4e3a\u8f83\u5927\u7684\u503c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n    // \u5df2\u4f7f\u7528\u5185\u5b58\u5cf0\u503c\n    size_t stat_peak_memory;\n};\n"})}),"\n",(0,i.jsx)(e.p,{children:"INFO memory \u547d\u4ee4\u7684 used_memory_peak \u548c used_memory_peak_human \u4e24\u4e2a\u57df\u5206\u522b\u4ee5\u4e24\u79cd\u683c\u5f0f\u8bb0\u5f55\u4e86\u670d\u52a1\u5668\u7684\u5185\u5b58\u5cf0\u503c\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis> INFO memory \n# Memory \n...\nused_memory_peak:501824 \nused_memory_peak_human:490.06K\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"sigterm",children:"SIGTERM"}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u542f\u52a8\u65f6\uff0cRedis \u4f1a\u4e3a\u670d\u52a1\u5668\u8fdb\u7a0b\u7684 SIGTERM \u4fe1\u53f7\u5173\u8054\u5904\u7406\u5668 sigtermHandler \u51fd\u6570\uff0c\u8be5\u4fe1\u53f7\u5904\u7406\u5668\u8d1f\u8d23\u5728\u670d\u52a1\u5668\u63a5\u5230 SIGTERM \u4fe1\u53f7\u65f6\uff0c\u6253\u5f00\u670d\u52a1\u5668\u72b6\u6001\u7684 shutdown_asap \u6807\u8bc6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n    // \u5173\u95ed\u670d\u52a1\u5668\u7684\u6807\u8bc6\uff1a\u503c\u4e3a1\u65f6\u5173\u95ed\u670d\u52a1\u5668\uff0c\u503c\u4e3a0\u65f6\u4e0d\u505a\u64cd\u4f5c\n    int shutdown_asap;\n};\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6bcf\u6b21 serverCron \u51fd\u6570\u8fd0\u884c\u65f6\uff0c\u7a0b\u5e8f\u90fd\u4f1a\u5bf9\u670d\u52a1\u5668\u72b6\u6001\u7684 shutdown_asap \u5c5e\u6027\u8fdb\u884c\u68c0\u67e5\uff0c\u5e76\u6839\u636e\u5c5e\u6027\u7684\u503c\u51b3\u5b9a\u662f\u5426\u5173\u95ed\u670d\u52a1\u5668"}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u5728\u63a5\u5230 SIGTERM \u4fe1\u53f7\u4e4b\u540e\uff0c\u5173\u95ed\u670d\u52a1\u5668\u5e76\u6253\u5370\u76f8\u5173\u65e5\u5fd7\u7684\u8fc7\u7a0b\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"[6794 | signal handler] (1384435690) Received SIGTERM, scheduling shutdown ... \n[6794] 14 Nov 21:28:10.108 # User requested shutdown ... \n[6794] 14 Nov 21:28:10.108 * Saving the final RDB snapshot before exiting. \n[6794) 14 Nov 21:28:10.161 * DB saved on disk \n[6794) 14 Nov 21:28:10.161 # Redisis now ready to exit, bye bye ... \n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u7ba1\u7406\u8d44\u6e90",children:"\u7ba1\u7406\u8d44\u6e90"}),"\n",(0,i.jsx)(e.p,{children:"serverCron \u51fd\u6570\u6bcf\u6b21\u6267\u884c\u90fd\u4f1a\u8c03\u7528 clientsCron \u548c databasesCron \u51fd\u6570\uff0c\u8fdb\u884c\u7ba1\u7406\u5ba2\u6237\u7aef\u8d44\u6e90\u548c\u6570\u636e\u5e93\u8d44\u6e90"}),"\n",(0,i.jsx)(e.p,{children:"clientsCron \u51fd\u6570\u5bf9\u4e00\u5b9a\u6570\u91cf\u7684\u5ba2\u6237\u7aef\u8fdb\u884c\u4ee5\u4e0b\u4e24\u4e2a\u68c0\u67e5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u8fde\u63a5\u5df3\u7ecf\u8d85\u65f6\uff08\u5f88\u957f\u4e00\u6bb5\u65f6\u95f4\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u6ca1\u6709\u4e92\u52a8\uff09\uff0c\u90a3\u4e48\u7a0b\u5e8f\u91ca\u653e\u8fd9\u4e2a\u5ba2\u6237\u7aef"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u5ba2\u6237\u7aef\u5728\u4e0a\u4e00\u6b21\u6267\u884c\u547d\u4ee4\u8bf7\u6c42\u4e4b\u540e\uff0c\u8f93\u5165\u7f13\u51b2\u533a\u7684\u5927\u5c0f\u8d85\u8fc7\u4e86\u4e00\u5b9a\u7684\u957f\u5ea6\uff0c\u90a3\u4e48\u7a0b\u5e8f\u4f1a\u91ca\u653e\u5ba2\u6237\u7aef\u5f53\u524d\u7684\u8f93\u5165\u7f13\u51b2\u533a\uff0c\u5e76\u91cd\u65b0\u521b\u5efa\u4e00\u4e2a\u9ed8\u8ba4\u5927\u5c0f\u7684\u8f93\u5165\u7f13\u51b2\u533a\uff0c\u4ece\u800c\u9632\u6b62\u5ba2\u6237\u7aef\u7684\u8f93\u5165\u7f13\u51b2\u533a\u8017\u8d39\u4e86\u8fc7\u591a\u7684\u5185\u5b58"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"databasesCron \u51fd\u6570\u4f1a\u5bf9\u670d\u52a1\u5668\u4e2d\u7684\u4e00\u90e8\u5206\u6570\u636e\u5e93\u8fdb\u884c\u68c0\u67e5\uff0c\u5220\u9664\u5176\u4e2d\u7684\u8fc7\u671f\u952e\uff0c\u5e76\u5728\u6709\u9700\u8981\u65f6\u5bf9\u5b57\u5178\u8fdb\u884c\u6536\u7f29\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u6301\u4e45\u72b6\u6001",children:"\u6301\u4e45\u72b6\u6001"}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u72b6\u6001\u4e2d\u8bb0\u5f55\u6267\u884c BGSAVE \u547d\u4ee4\u548c BGREWRITEAOF \u547d\u4ee4\u7684\u5b50\u8fdb\u7a0b\u7684 ID"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n    // \u8bb0\u5f55\u6267\u884cBGSAVE\u547d\u4ee4\u7684\u5b50\u8fdb\u7a0b\u7684ID\uff0c\u5982\u679c\u670d\u52a1\u5668\u6ca1\u6709\u5728\u6267\u884cBGSAVE\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5c5e\u6027\u7684\u503c\u4e3a-1\n    pid_t rdb_child_pid;\n    // \u8bb0\u5f55\u6267\u884cBGREWRITEAOF\u547d\u4ee4\u7684\u5b50\u8fdb\u7a0b\u7684ID\uff0c\u5982\u679c\u670d\u52a1\u5668\u6ca1\u6709\u5728\u6267\u884c\u90a3\u4e48\u8fd9\u4e2a\u5c5e\u6027\u7684\u503c\u4e3a-1\n    pid_t aof_child_pid\n};\n"})}),"\n",(0,i.jsx)(e.p,{children:"serverCron \u51fd\u6570\u6267\u884c\u65f6\uff0c\u4f1a\u68c0\u67e5\u4e24\u4e2a\u5c5e\u6027\u7684\u503c\uff0c\u53ea\u8981\u5176\u4e2d\u4e00\u4e2a\u5c5e\u6027\u7684\u503c\u4e0d\u4e3a -1\uff0c\u7a0b\u5e8f\u5c31\u4f1a\u6267\u884c\u4e00\u6b21 wait3 \u51fd\u6570\uff0c\u68c0\u67e5\u5b50\u8fdb\u7a0b\u662f\u5426\u6709\u4fe1\u53f7\u53d1\u6765\u670d\u52a1\u5668\u8fdb\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u6709\u4fe1\u53f7\u5230\u8fbe\uff0c\u90a3\u4e48\u8868\u793a\u65b0\u7684 RDB \u6587\u4ef6\u5df2\u7ecf\u751f\u6210\u6216\u8005 AOF \u91cd\u5199\u5b8c\u6bd5\uff0c\u670d\u52a1\u5668\u9700\u8981\u8fdb\u884c\u76f8\u5e94\u547d\u4ee4\u7684\u540e\u7eed\u64cd\u4f5c\uff0c\u6bd4\u5982\u7528\u65b0\u7684 RDB \u6587\u4ef6\u66ff\u6362\u73b0\u6709\u7684 RDB \u6587\u4ef6\uff0c\u7528\u91cd\u5199\u540e\u7684 AOF \u6587\u4ef6\u66ff\u6362\u73b0\u6709\u7684 AOF \u6587\u4ef6"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u6ca1\u6709\u4fe1\u53f7\u5230\u8fbe\uff0c\u90a3\u4e48\u8868\u793a\u6301\u4e45\u5316\u64cd\u4f5c\u672a\u5b8c\u6210\uff0c\u7a0b\u5e8f\u4e0d\u505a\u52a8\u4f5c"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u4e24\u4e2a\u5c5e\u6027\u7684\u503c\u90fd\u4e3a -1\uff0c\u8868\u793a\u670d\u52a1\u5668\u6ca1\u6709\u8fdb\u884c\u6301\u4e45\u5316\u64cd\u4f5c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u662f\u5426\u6709 BGREWRITEAOF \u88ab\u5ef6\u8fdf\uff0c\u7136\u540e\u6267\u884c AOF \u540e\u53f0\u91cd\u5199"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u670d\u52a1\u5668\u7684\u81ea\u52a8\u4fdd\u5b58\u6761\u4ef6\u662f\u5426\u5df2\u7ecf\u88ab\u6ee1\u8db3\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u6ca1\u6709\u5728\u8fdb\u884c\u6301\u4e45\u5316\uff0c\u5c31\u5f00\u59cb\u4e00\u6b21\u65b0\u7684 BGSAVE \u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"\u56e0\u4e3a\u6761\u4ef6 1 \u53ef\u80fd\u4f1a\u5f15\u53d1\u4e00\u6b21 AOF\uff0c\u6240\u4ee5\u5728\u8fd9\u4e2a\u68c0\u67e5\u4e2d\u4f1a\u518d\u6b21\u786e\u8ba4\u670d\u52a1\u5668\u662f\u5426\u5df2\u7ecf\u5728\u6267\u884c\u6301\u4e45\u5316\u64cd\u4f5c"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u68c0\u67e5\u670d\u52a1\u5668\u8bbe\u7f6e\u7684 AOF \u91cd\u5199\u6761\u4ef6\u662f\u5426\u6ee1\u8db3\uff0c\u6761\u4ef6\u6ee1\u8db3\u5e76\u4e14\u670d\u52a1\u5668\u6ca1\u6709\u8fdb\u884c\u6301\u4e45\u5316\uff0c\u5c31\u8fdb\u884c\u4e00\u6b21 AOF \u91cd\u5199"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u670d\u52a1\u5668\u5f00\u542f\u4e86 AOF \u6301\u4e45\u5316\u529f\u80fd\uff0c\u5e76\u4e14 AOF \u7f13\u51b2\u533a\u91cc\u8fd8\u6709\u5f85\u5199\u5165\u7684\u6570\u636e\uff0c \u90a3\u4e48 serverCron \u51fd\u6570\u4f1a\u8c03\u7528\u76f8\u5e94\u7684\u7a0b\u5e8f\uff0c\u5c06 AOF \u7f13\u51b2\u533a\u4e2d\u7684\u5185\u5bb9\u5199\u5165\u5230 AOF \u6587\u4ef6\u91cc"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u5ef6\u8fdf\u6267\u884c",children:"\u5ef6\u8fdf\u6267\u884c"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u670d\u52a1\u5668\u6267\u884c BGSAVE \u547d\u4ee4\u7684\u671f\u95f4\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u53d1\u9001 BGREWRITEAOF \u547d\u4ee4\uff0c\u90a3\u4e48\u670d\u52a1\u5668\u4f1a\u5c06 BGREWRITEAOF \u547d\u4ee4\u7684\u6267\u884c\u65f6\u95f4\u5ef6\u8fdf\u5230 BGSAVE \u547d\u4ee4\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\uff0c\u7528\u670d\u52a1\u5668\u72b6\u6001\u7684 aof_rewrite_scheduled \u5c5e\u6027\u6807\u8bc6\u5ef6\u8fdf\u4e0e\u5426"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n    // \u5982\u679c\u503c\u4e3a1\uff0c\u90a3\u4e48\u8868\u793a\u6709 BGREWRITEAOF\u547d\u4ee4\u88ab\u5ef6\u8fdf\u4e86\n    int aof_rewrite_scheduled;\n};\n"})}),"\n",(0,i.jsx)(e.p,{children:"serverCron \u51fd\u6570\u4f1a\u68c0\u67e5 BGSAVE \u6216\u8005 BGREWRITEAOF \u547d\u4ee4\u662f\u5426\u6b63\u5728\u6267\u884c\uff0c\u5982\u679c\u8fd9\u4e24\u4e2a\u547d\u4ee4\u90fd\u6ca1\u5728\u6267\u884c\uff0c\u5e76\u4e14 aof_rewrite_scheduled \u5c5e\u6027\u7684\u503c\u4e3a 1\uff0c\u90a3\u4e48\u670d\u52a1\u5668\u5c31\u4f1a\u6267\u884c\u4e4b\u524d\u88ab\u63a8\u5ef6\u7684 BGREWRITEAOF \u547d\u4ee4"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u6267\u884c\u6b21\u6570",children:"\u6267\u884c\u6b21\u6570"}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u72b6\u6001\u7684 cronloops \u5c5e\u6027\u8bb0\u5f55\u4e86 serverCron \u51fd\u6570\u6267\u884c\u7684\u6b21\u6570"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n    // serverCron \u51fd\u6570\u6bcf\u6267\u884c\u4e00\u6b21\uff0c\u8fd9\u4e2a\u5c5e\u6027\u7684\u503c\u5c31\u589e 1\n    int cronloops;\n};\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u7f13\u51b2\u9650\u5236",children:"\u7f13\u51b2\u9650\u5236"}),"\n",(0,i.jsxs)(e.p,{children:["\u670d\u52a1\u5668\u4f1a\u5173\u95ed\u90a3\u4e9b\u8f93\u5165\u6216\u8005\u8f93\u51fa",(0,i.jsx)(e.strong,{children:"\u7f13\u51b2\u533a\u5927\u5c0f\u8d85\u51fa\u9650\u5236"}),"\u7684\u5ba2\u6237\u7aef"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u521d\u59cb\u5316",children:"\u521d\u59cb\u5316"}),"\n",(0,i.jsx)(e.h5,{id:"\u521d\u59cb\u7ed3\u6784",children:"\u521d\u59cb\u7ed3\u6784"}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u4e2a Redis \u670d\u52a1\u5668\u4ece\u542f\u52a8\u5230\u80fd\u591f\u63a5\u53d7\u5ba2\u6237\u7aef\u7684\u547d\u4ee4\u8bf7\u6c42\uff0c\u9700\u8981\u7ecf\u8fc7\u4e00\u7cfb\u5217\u7684\u521d\u59cb\u5316\u548c\u8bbe\u7f6e\u8fc7\u7a0b"}),"\n",(0,i.jsx)(e.p,{children:"\u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u4e00\u4e2a redisServer \u7c7b\u578b\u7684\u5b9e\u4f8b\u53d8\u91cf server \u4f5c\u4e3a\u670d\u52a1\u5668\u7684\u72b6\u6001\uff0c\u5e76\u4e3a\u7ed3\u6784\u4e2d\u7684\u5404\u4e2a\u5c5e\u6027\u8bbe\u7f6e\u9ed8\u8ba4\u503c\uff0c\u7531 initServerConfig \u51fd\u6570\u8fdb\u884c\u521d\u59cb\u5316\u4e00\u822c\u5c5e\u6027\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8bbe\u7f6e\u670d\u52a1\u5668\u7684\u8fd0\u884c ID\u3001\u9ed8\u8ba4\u8fd0\u884c\u9891\u7387\u3001\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\u3001\u9ed8\u8ba4\u7aef\u53e3\u53f7\u3001\u9ed8\u8ba4 RDB \u6301\u4e45\u5316\u6761\u4ef6\u548c AOF \u6301\u4e45\u5316\u6761\u4ef6"}),"\n",(0,i.jsx)(e.li,{children:"\u521d\u59cb\u5316\u670d\u52a1\u5668\u7684 LRU \u65f6\u949f\uff0c\u521b\u5efa\u547d\u4ee4\u8868"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u7b2c\u4e8c\u6b65\uff1a\u8f7d\u5165\u914d\u7f6e\u9009\u9879\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u7ed9\u5b9a\u914d\u7f6e\u53c2\u6570\u6216\u8005\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\uff0c\u5bf9 server \u53d8\u91cf\u76f8\u5173\u5c5e\u6027\u7684\u9ed8\u8ba4\u503c\u8fdb\u884c\u4fee\u6539"}),"\n",(0,i.jsxs)(e.p,{children:["\u7b2c\u4e09\u6b65\uff1a\u521d\u59cb\u5316\u670d\u52a1\u5668\u6570\u636e\u7ed3\u6784\uff08\u9664\u4e86\u547d\u4ee4\u8868\u4e4b\u5916\uff09\uff0c\u56e0\u4e3a\u670d\u52a1\u5668",(0,i.jsx)(e.strong,{children:"\u5fc5\u987b\u5148\u8f7d\u5165\u7528\u6237\u6307\u5b9a\u7684\u914d\u7f6e\u9009\u9879\u624d\u80fd\u6b63\u786e\u5730\u5bf9\u6570\u636e\u7ed3\u6784\u8fdb\u884c\u521d\u59cb\u5316"}),"\uff0c\u6240\u4ee5\u8f7d\u5165\u914d\u7f6e\u5b8c\u6210\u540e\u624d\u8fdb\u6027\u6570\u636e\u7ed3\u6784\u7684\u521d\u59cb\u5316\uff0c\u670d\u52a1\u5668\u5c06\u8c03\u7528 initServer \u51fd\u6570\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"server.clients \u94fe\u8868\uff0c\u8bb0\u5f55\u4e86\u7684\u5ba2\u6237\u7aef\u7684\u72b6\u6001\u7ed3\u6784\uff1bserver.db \u6570\u7ec4\uff0c\u5305\u542b\u4e86\u670d\u52a1\u5668\u7684\u6240\u6709\u6570\u636e\u5e93"}),"\n",(0,i.jsx)(e.li,{children:"\u7528\u4e8e\u4fdd\u5b58\u9891\u9053\u8ba2\u9605\u4fe1\u606f\u7684 server.pubsub_channels \u5b57\u5178\uff0c \u4ee5\u53ca\u4fdd\u5b58\u6a21\u5f0f\u8ba2\u9605\u4fe1\u606f\u7684 server.pubsub_patterns \u94fe\u8868"}),"\n",(0,i.jsx)(e.li,{children:"\u7528\u4e8e\u6267\u884c Lua \u811a\u672c\u7684 Lua \u73af\u5883 server.lua"}),"\n",(0,i.jsx)(e.li,{children:"\u4fdd\u5b58\u6162\u67e5\u8be2\u65e5\u5fd7\u7684 server.slowlog \u5c5e\u6027"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"initServer \u8fd8\u8fdb\u884c\u4e86\u975e\u5e38\u91cd\u8981\u7684\u8bbe\u7f6e\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e3a\u670d\u52a1\u5668\u8bbe\u7f6e\u8fdb\u7a0b\u4fe1\u53f7\u5904\u7406\u5668"}),"\n",(0,i.jsxs)(e.li,{children:["\u521b\u5efa\u5171\u4eab\u5bf9\u8c61\uff0c\u5305\u542b OK\u3001ERR\u3001",(0,i.jsx)(e.strong,{children:"\u6574\u6570 1 \u5230 10000 \u7684\u5b57\u7b26\u4e32\u5bf9\u8c61"}),"\u7b49"]}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.strong,{children:"\u6253\u5f00\u670d\u52a1\u5668\u7684\u76d1\u542c\u7aef\u53e3"})}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u4e3a serverCron \u51fd\u6570\u521b\u5efa\u65f6\u95f4\u4e8b\u4ef6"}),"\uff0c \u7b49\u5f85\u670d\u52a1\u5668\u6b63\u5f0f\u8fd0\u884c\u65f6\u6267\u884c serverCron \u51fd\u6570"]}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c AOF \u6301\u4e45\u5316\u529f\u80fd\u5df2\u7ecf\u6253\u5f00\uff0c\u90a3\u4e48\u6253\u5f00\u73b0\u6709\u7684 AOF \u6587\u4ef6\uff0c\u5982\u679c AOF \u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u90a3\u4e48\u521b\u5efa\u5e76\u6253\u5f00\u4e00\u4e2a\u65b0\u7684 AOF \u6587\u4ef6 \uff0c\u4e3a AOF \u5199\u5165\u505a\u597d\u51c6\u5907"}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u521d\u59cb\u5316\u670d\u52a1\u5668\u7684\u540e\u53f0 I/O \u6a21\u5757"}),"\uff08BIO\uff09, \u4e3a\u5c06\u6765\u7684 I/O \u64cd\u4f5c\u505a\u597d\u51c6\u5907"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5f53 initServer \u51fd\u6570\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\uff0c \u670d\u52a1\u5668\u5c06\u7528 ASCII \u5b57\u7b26\u5728\u65e5\u5fd7\u4e2d\u6253\u5370\u51fa Redis \u7684\u56fe\u6807\uff0c \u4ee5\u53ca Redis \u7684\u7248\u672c\u53f7\u4fe1\u606f"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u8fd8\u539f\u72b6\u6001",children:"\u8fd8\u539f\u72b6\u6001"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u5b8c\u6210\u4e86\u5bf9\u670d\u52a1\u5668\u72b6\u6001\u7684\u521d\u59cb\u5316\u4e4b\u540e\uff0c\u670d\u52a1\u5668\u9700\u8981\u8f7d\u5165RDB\u6587\u4ef6\u6216\u8005AOF \u6587\u4ef6\uff0c \u5e76\u6839\u636e\u6587\u4ef6\u8bb0\u5f55\u7684\u5185\u5bb9\u6765\u8fd8\u539f\u670d\u52a1\u5668\u7684\u6570\u636e\u5e93\u72b6\u6001\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u670d\u52a1\u5668\u542f\u7528\u4e86 AOF \u6301\u4e45\u5316\u529f\u80fd\uff0c\u90a3\u4e48\u670d\u52a1\u5668\u4f7f\u7528 AOF \u6587\u4ef6\u6765\u8fd8\u539f\u6570\u636e\u5e93\u72b6\u6001"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u670d\u52a1\u5668\u6ca1\u6709\u542f\u7528 AOF \u6301\u4e45\u5316\u529f\u80fd\uff0c\u90a3\u4e48\u670d\u52a1\u5668\u4f7f\u7528 RDB \u6587\u4ef6\u6765\u8fd8\u539f\u6570\u636e\u5e93\u72b6\u6001"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u670d\u52a1\u5668\u5b8c\u6210\u6570\u636e\u5e93\u72b6\u6001\u8fd8\u539f\u5de5\u4f5c\u4e4b\u540e\uff0c\u670d\u52a1\u5668\u5c06\u5728\u65e5\u5fd7\u4e2d\u6253\u5370\u51fa\u8f7d\u5165\u6587\u4ef6\u5e76\u8fd8\u539f\u6570\u636e\u5e93\u72b6\u6001\u6240\u8017\u8d39\u7684\u65f6\u957f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"[7171] 22 Nov 22:43:49.084 * DB loaded from disk: 0.071 seconds \n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u9a71\u52a8\u5faa\u73af",children:"\u9a71\u52a8\u5faa\u73af"}),"\n",(0,i.jsxs)(e.p,{children:["\u5728\u521d\u59cb\u5316\u7684\u6700\u540e\u4e00\u6b65\uff0c\u670d\u52a1\u5668\u5c06\u6253\u5370\u51fa\u4ee5\u4e0b\u65e5\u5fd7\uff0c\u5e76\u5f00\u59cb",(0,i.jsx)(e.strong,{children:"\u6267\u884c\u670d\u52a1\u5668\u7684\u4e8b\u4ef6\u5faa\u73af"}),"\uff08loop\uff09"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"[7171] 22 Nov 22:43:49.084 * The server is now ready to accept connections on pert 6379\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u73b0\u5728\u5f00\u59cb\u53ef\u4ee5\u63a5\u53d7\u5ba2\u6237\u7aef\u7684\u8fde\u63a5\u8bf7\u6c42\uff0c\u5e76\u5904\u7406\u5ba2\u6237\u7aef\u53d1\u6765\u7684\u547d\u4ee4\u8bf7\u6c42\u4e86"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u6162\u65e5\u5fd7-1",children:"\u6162\u65e5\u5fd7"}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u4ecb\u7ecd-15",children:"\u57fa\u672c\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u7684\u6162\u67e5\u8be2\u65e5\u5fd7\u529f\u80fd\u7528\u4e8e\u8bb0\u5f55\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u7ed9\u5b9a\u65f6\u957f\u7684\u547d\u4ee4\u8bf7\u6c42\uff0c\u901a\u8fc7\u4ea7\u751f\u7684\u65e5\u5fd7\u6765\u76d1\u89c6\u548c\u4f18\u5316\u67e5\u8be2\u901f\u5ea6"}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u914d\u7f6e\u6709\u4e24\u4e2a\u548c\u6162\u67e5\u8be2\u65e5\u5fd7\u76f8\u5173\u7684\u9009\u9879\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"slowlog-log-slower-than \u9009\u9879\u6307\u5b9a\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u591a\u5c11\u5fae\u79d2\u7684\u547d\u4ee4\u8bf7\u6c42\u4f1a\u88ab\u8bb0\u5f55\u5230\u65e5\u5fd7\u4e0a"}),"\n",(0,i.jsx)(e.li,{children:"slowlog-max-len \u9009\u9879\u6307\u5b9a\u670d\u52a1\u5668\u6700\u591a\u4fdd\u5b58\u591a\u5c11\u6761\u6162\u67e5\u8be2\u65e5\u5fd7"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u4f7f\u7528\u5148\u8fdb\u5148\u51fa FIFO \u7684\u65b9\u5f0f\u4fdd\u5b58\u591a\u6761\u6162\u67e5\u8be2\u65e5\u5fd7\uff0c\u5f53\u670d\u52a1\u5668\u5b58\u50a8\u7684\u6162\u67e5\u8be2\u65e5\u5fd7\u6570\u91cf\u7b49\u4e8e slowlog-max-len \u9009\u9879\u7684\u503c\u65f6\uff0c\u5728\u6dfb\u52a0\u4e00\u6761\u65b0\u7684\u6162\u67e5\u8be2\u65e5\u5fd7\u4e4b\u524d\uff0c\u4f1a\u5148\u5c06\u6700\u65e7\u7684\u4e00\u6761\u6162\u67e5\u8be2\u65e5\u5fd7\u5220\u9664"}),"\n",(0,i.jsx)(e.p,{children:"\u914d\u7f6e\u9009\u9879\u53ef\u4ee5\u901a\u8fc7 CONFIG SET option value \u547d\u4ee4\u8fdb\u884c\u8bbe\u7f6e"}),"\n",(0,i.jsx)(e.p,{children:"\u5e38\u7528\u547d\u4ee4\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"SLOWLOG GET [n]\t# \u67e5\u770b n \u6761\u670d\u52a1\u5668\u4fdd\u5b58\u7684\u6162\u65e5\u5fd7\nSLOWLOG LEN\t\t# \u67e5\u770b\u65e5\u5fd7\u6570\u91cf\nSLOWLOG RESET\t# \u6e05\u9664\u6240\u6709\u6162\u67e5\u8be2\u65e5\u5fd7\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u65e5\u5fd7\u4fdd\u5b58",children:"\u65e5\u5fd7\u4fdd\u5b58"}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u72b6\u6001\u4e2d\u5305\u542b\u4e86\u6162\u67e5\u8be2\u65e5\u5fd7\u529f\u80fd\u6709\u5173\u7684\u5c5e\u6027\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n\t// \u4e0b\u4e00\u6761\u6162\u67e5\u8be2\u65e5\u5fd7\u7684ID\n\tlong long slowlog_entry_id;\n    \n\t// \u4fdd\u5b58\u4e86\u6240\u6709\u6162\u67e5\u8be2\u65e5\u5fd7\u7684\u94fe\u8868\n\tlist *slowlog;\n    \n\t// \u670d\u52a1\u5668\u914d\u7f6e\u9009\u9879\u7684\u503c \n    long long slowlog-log-slower-than;\n\t// \u670d\u52a1\u5668\u914d\u7f6e\u9009\u9879\u7684\u503c\n\tunsigned long slowlog_max_len;\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"slowlog_entry_id \u5c5e\u6027\u7684\u521d\u59cb\u503c\u4e3a 0\uff0c\u6bcf\u5f53\u521b\u5efa\u4e00\u6761\u65b0\u7684\u6162\u67e5\u8be2\u65e5\u5fd7\u65f6\uff0c\u8fd9\u4e2a\u5c5e\u6027\u5c31\u4f1a\u7528\u4f5c\u65b0\u65e5\u5fd7\u7684 id \u503c\uff0c\u4e4b\u540e\u8be5\u5c5e\u6027\u589e\u4e00"}),"\n",(0,i.jsx)(e.p,{children:"slowlog \u94fe\u8868\u4fdd\u5b58\u4e86\u670d\u52a1\u5668\u4e2d\u7684\u6240\u6709\u6162\u67e5\u8be2\u65e5\u5fd7\uff0c\u94fe\u8868\u4e2d\u7684\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a slowlogEntry \u7ed3\u6784\uff0c \u4ee3\u8868\u4e00\u6761\u6162\u67e5\u8be2\u65e5\u5fd7\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct slowlogEntry {\n    // \u552f\u4e00\u6807\u8bc6\u7b26\n    long long id;\n   \t// \u547d\u4ee4\u6267\u884c\u65f6\u7684\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3aUNIX\u65f6\u95f4\u6233\n    time_t time;\n\t// \u6267\u884c\u547d\u4ee4\u6d88\u8017\u7684\u65f6\u95f4\uff0c\u4ee5\u5fae\u79d2\u4e3a\u5355\u4f4d \n    long long duration;\n\t// \u547d\u4ee4\u4e0e\u547d\u4ee4\u53c2\u6570\n\trobj **argv;\n\t// \u547d\u4ee4\u4e0e\u547d\u4ee4\u53c2\u6570\u7684\u6570\u91cf\n\tint argc;\n}\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6dfb\u52a0\u65e5\u5fd7",children:"\u6dfb\u52a0\u65e5\u5fd7"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u6bcf\u6b21\u6267\u884c\u547d\u4ee4\u7684\u524d\u540e\uff0c\u7a0b\u5e8f\u90fd\u4f1a\u8bb0\u5f55\u5fae\u79d2\u683c\u5f0f\u7684\u5f53\u524d UNIX \u65f6\u95f4\u6233\uff0c\u4e24\u4e2a\u65f6\u95f4\u4e4b\u5dee\u5c31\u662f\u6267\u884c\u547d\u4ee4\u6240\u8017\u8d39\u7684\u65f6\u957f\uff0c\u51fd\u6570\u4f1a\u68c0\u67e5\u547d\u4ee4\u7684\u6267\u884c\u65f6\u957f\u662f\u5426\u8d85\u8fc7 slowlog-log-slower-than \u9009\u9879\u6240\u8bbe\u7f6e\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u662f\u7684\u8bdd\uff0c\u5c31\u4e3a\u547d\u4ee4\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u65e5\u5fd7\uff0c\u5e76\u5c06\u65b0\u65e5\u5fd7\u6dfb\u52a0\u5230 slowlog \u94fe\u8868\u7684\u8868\u5934"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u68c0\u67e5\u6162\u67e5\u8be2\u65e5\u5fd7\u7684\u957f\u5ea6\u662f\u5426\u8d85\u8fc7 slowlog-max-len \u9009\u9879\u6240\u8bbe\u7f6e\u7684\u957f\u5ea6\uff0c\u5982\u679c\u662f\u5c06\u591a\u51fa\u6765\u7684\u65e5\u5fd7\u4ece slowlog \u94fe\u8868\u4e2d\u5220\u9664\u6389"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5c06 redisServer. slowlog_entry_id \u7684\u503c\u589e 1"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u6570\u636e\u7ed3\u6784-2",children:"\u6570\u636e\u7ed3\u6784"}),"\n",(0,i.jsx)(e.h3,{id:"\u5b57\u7b26\u4e32",children:"\u5b57\u7b26\u4e32"}),"\n",(0,i.jsx)(e.h4,{id:"sds",children:"SDS"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u6784\u5efa\u4e86\u7b80\u5355\u52a8\u6001\u5b57\u7b26\u4e32\uff08SDS\uff09\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4f5c\u4e3a Redis \u7684\u9ed8\u8ba4\u5b57\u7b26\u4e32\u8868\u793a\uff0c\u5305\u542b\u5b57\u7b26\u4e32\u7684\u952e\u503c\u5bf9\u5728\u5e95\u5c42\u90fd\u662f\u7531 SDS \u5b9e\u73b0"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct sdshdr {\n    // \u8bb0\u5f55buf\u6570\u7ec4\u4e2d\u5df2\u4f7f\u7528\u5b57\u8282\u7684\u6570\u91cf\uff0c\u7b49\u4e8e SDS \u6240\u4fdd\u5b58\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\n    int len;\n    \n\t// \u8bb0\u5f55buf\u6570\u7ec4\u4e2d\u672a\u4f7f\u7528\u5b57\u8282\u7684\u6570\u91cf\n    int free;\n    \n    // \u3010\u5b57\u8282\u3011\u6570\u7ec4\uff0c\u7528\u4e8e\u4fdd\u5b58\u5b57\u7b26\u4e32\uff08\u4e0d\u662f\u5b57\u7b26\u6570\u7ec4\uff09\n    char buf[];\n};\n"})}),"\n",(0,i.jsxs)(e.p,{children:["SDS \u9075\u5faa C \u5b57\u7b26\u4e32",(0,i.jsx)(e.strong,{children:"\u4ee5\u7a7a\u5b57\u7b26\u7ed3\u5c3e"}),"\u7684\u60ef\u4f8b\uff0c\u4fdd\u5b58\u7a7a\u5b57\u7b26\u7684 1 \u5b57\u8282\u4e0d\u8ba1\u7b97\u5728 len \u5c5e\u6027\uff0cSDS \u4f1a\u81ea\u52a8\u4e3a\u7a7a\u5b57\u7b26\u5206\u914d\u989d\u5916\u7684 1 \u5b57\u8282\u7a7a\u95f4\u548c\u6dfb\u52a0\u7a7a\u5b57\u7b26\u5230\u5b57\u7b26\u4e32\u672b\u5c3e\uff0c\u6240\u4ee5\u7a7a\u5b57\u7b26\u5bf9\u4e8e SDS \u7684\u4f7f\u7528\u8005\u6765\u8bf4\u662f\u5b8c\u5168\u900f\u660e\u7684"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(54592).A+"",width:"730",height:"197"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5bf9\u6bd4",children:"\u5bf9\u6bd4"}),"\n",(0,i.jsx)(e.p,{children:"\u5e38\u6570\u590d\u6742\u5ea6\u83b7\u53d6\u5b57\u7b26\u4e32\u957f\u5ea6\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"C \u5b57\u7b26\u4e32\u4e0d\u8bb0\u5f55\u81ea\u8eab\u7684\u957f\u5ea6\uff0c\u83b7\u53d6\u65f6\u9700\u8981\u904d\u5386\u6574\u4e2a\u5b57\u7b26\u4e32\uff0c\u9047\u5230\u7a7a\u5b57\u7b26\u4e32\u4e3a\u6b62\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(N)"}),"\n",(0,i.jsx)(e.li,{children:"SDS \u83b7\u53d6\u5b57\u7b26\u4e32\u957f\u5ea6\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(1)\uff0c\u8bbe\u7f6e\u548c\u66f4\u65b0 SDS \u957f\u5ea6\u7531\u51fd\u6570\u5e95\u5c42\u81ea\u52a8\u5b8c\u6210"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u675c\u7edd\u7f13\u51b2\u533a\u6ea2\u51fa\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"C \u5b57\u7b26\u4e32\u8c03\u7528 strcat \u51fd\u6570\u62fc\u63a5\u5b57\u7b26\u4e32\u65f6\uff0c\u5982\u679c\u5b57\u7b26\u4e32\u5185\u5b58\u4e0d\u591f\u5bb9\u7eb3\u76ee\u6807\u5b57\u7b26\u4e32\uff0c\u5c31\u4f1a\u9020\u6210\u7f13\u51b2\u533a\u6ea2\u51fa\uff08Buffer Overflow\uff09"}),"\n",(0,i.jsxs)(e.p,{children:["s1 \u548c s2 \u662f\u5185\u5b58\u4e2d\u76f8\u90bb\u7684\u5b57\u7b26\u4e32\uff0c\u6267\u884c ",(0,i.jsx)(e.code,{children:'strcat(s1, " Cluster")'}),"\uff08\u6709\u7a7a\u683c\uff09\uff1a"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(2423).A+"",width:"1031",height:"212"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"SDS \u7a7a\u95f4\u5206\u914d\u7b56\u7565\uff1a\u5f53\u5bf9 SDS \u8fdb\u884c\u4fee\u6539\u65f6\uff0c\u9996\u5148\u68c0\u67e5 SDS \u7684\u7a7a\u95f4\u662f\u5426\u6ee1\u8db3\u4fee\u6539\u6240\u9700\u7684\u8981\u6c42\uff0c \u5982\u679c\u4e0d\u6ee1\u8db3\u4f1a\u81ea\u52a8\u5c06 SDS \u7684\u7a7a\u95f4\u6269\u5c55\u81f3\u6267\u884c\u4fee\u6539\u6240\u9700\u7684\u5927\u5c0f\uff0c\u7136\u540e\u6267\u884c\u5b9e\u9645\u7684\u4fee\u6539\u64cd\u4f5c\uff0c \u907f\u514d\u4e86\u7f13\u51b2\u533a\u6ea2\u51fa\u7684\u95ee\u9898"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e8c\u8fdb\u5236\u5b89\u5168\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"C \u5b57\u7b26\u4e32\u4e2d\u7684\u5b57\u7b26\u5fc5\u987b\u7b26\u5408\u67d0\u79cd\u7f16\u7801\uff08\u6bd4\u5982 ASCII\uff09\u65b9\u5f0f\uff0c\u9664\u4e86\u5b57\u7b26\u4e32\u672b\u5c3e\u4ee5\u5916\u5176\u4ed6\u4f4d\u7f6e\u4e0d\u80fd\u5305\u542b\u7a7a\u5b57\u7b26\uff0c\u5426\u5219\u4f1a\u88ab\u8bef\u8ba4\u4e3a\u662f\u5b57\u7b26\u4e32\u7684\u7ed3\u5c3e\uff0c\u6240\u4ee5\u53ea\u80fd\u4fdd\u5b58\u6587\u672c\u6570\u636e"}),"\n",(0,i.jsxs)(e.li,{children:["SDS \u7684 API \u90fd\u662f\u4e8c\u8fdb\u5236\u5b89\u5168\u7684\uff0c\u4f7f\u7528\u5b57\u8282\u6570\u7ec4 buf \u4fdd\u5b58\u4e00\u7cfb\u5217\u7684\u4e8c\u8fdb\u5236\u6570\u636e\uff0c",(0,i.jsx)(e.strong,{children:"\u4f7f\u7528 len \u5c5e\u6027\u6765\u5224\u65ad\u6570\u636e\u7684\u7ed3\u5c3e"}),"\uff0c\u6240\u4ee5\u53ef\u4ee5\u4fdd\u5b58\u56fe\u7247\u3001\u89c6\u9891\u3001\u538b\u7f29\u6587\u4ef6\u7b49\u4e8c\u8fdb\u5236\u6570\u636e"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u517c\u5bb9 C \u5b57\u7b26\u4e32\u7684\u51fd\u6570\uff1aSDS \u4f1a\u5728\u4e3a buf \u6570\u7ec4\u5206\u914d\u7a7a\u95f4\u65f6\u591a\u5206\u914d\u4e00\u4e2a\u5b57\u8282\u6765\u4fdd\u5b58\u7a7a\u5b57\u7b26\uff0c\u6240\u4ee5\u53ef\u4ee5\u91cd\u7528\u4e00\u90e8\u5206 C \u5b57\u7b26\u4e32\u51fd\u6570\u5e93\u7684\u51fd\u6570"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5185\u5b58",children:"\u5185\u5b58"}),"\n",(0,i.jsxs)(e.p,{children:["C \u5b57\u7b26\u4e32",(0,i.jsx)(e.strong,{children:"\u6bcf\u6b21"}),"\u589e\u957f\u6216\u8005\u7f29\u77ed\u90fd\u4f1a\u8fdb\u884c\u4e00\u6b21\u5185\u5b58\u91cd\u5206\u914d\uff0c\u62fc\u63a5\u64cd\u4f5c\u901a\u8fc7\u91cd\u5206\u914d\u6269\u5c55\u5e95\u5c42\u6570\u7ec4\u7a7a\u95f4\uff0c\u622a\u65ad\u64cd\u4f5c\u901a\u8fc7\u91cd\u5206\u914d\u91ca\u653e\u4e0d\u4f7f\u7528\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u9632\u6b62\u51fa\u73b0\u5185\u5b58\u6cc4\u9732"]}),"\n",(0,i.jsx)(e.p,{children:"SDS \u901a\u8fc7\u672a\u4f7f\u7528\u7a7a\u95f4\u89e3\u9664\u4e86\u5b57\u7b26\u4e32\u957f\u5ea6\u548c\u5e95\u5c42\u6570\u7ec4\u957f\u5ea6\u4e4b\u95f4\u7684\u5173\u8054\uff0c\u5728 SDS \u4e2d buf \u6570\u7ec4\u7684\u957f\u5ea6\u4e0d\u4e00\u5b9a\u5c31\u662f\u5b57\u7b26\u6570\u91cf\u52a0\u4e00\uff0c \u6570\u7ec4\u91cc\u9762\u53ef\u4ee5\u5305\u542b\u672a\u4f7f\u7528\u7684\u5b57\u8282\uff0c\u5b57\u8282\u7684\u6570\u91cf\u7531 free \u5c5e\u6027\u8bb0\u5f55"}),"\n",(0,i.jsxs)(e.p,{children:["\u5185\u5b58\u91cd\u5206\u914d\u6d89\u53ca\u590d\u6742\u7684\u7b97\u6cd5\uff0c\u9700\u8981\u6267\u884c",(0,i.jsx)(e.strong,{children:"\u7cfb\u7edf\u8c03\u7528"}),"\uff0c\u662f\u4e00\u4e2a\u6bd4\u8f83\u8017\u65f6\u7684\u64cd\u4f5c\uff0cSDS \u7684\u4e24\u79cd\u4f18\u5316\u7b56\u7565\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7a7a\u95f4\u9884\u5206\u914d\uff1a\u5f53 SDS \u9700\u8981\u8fdb\u884c\u7a7a\u95f4\u6269\u5c55\u65f6\uff0c\u7a0b\u5e8f\u4e0d\u4ec5\u4f1a\u4e3a SDS \u5206\u914d\u4fee\u6539\u6240\u5fc5\u9700\u7684\u7a7a\u95f4\uff0c \u8fd8\u4f1a\u4e3a SDS \u5206\u914d\u989d\u5916\u7684\u672a\u4f7f\u7528\u7a7a\u95f4"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5bf9 SDS \u4fee\u6539\u4e4b\u540e\uff0cSDS \u7684\u957f\u5ea6\uff08len \u5c5e\u6027\uff09\u5c0f\u4e8e 1MB\uff0c\u7a0b\u5e8f\u5206\u914d\u548c len \u5c5e\u6027\u540c\u6837\u5927\u5c0f\u7684\u672a\u4f7f\u7528\u7a7a\u95f4\uff0c\u6b64\u65f6 len \u548c free \u76f8\u7b49"}),"\n",(0,i.jsxs)(e.p,{children:["s \u4e3a Redis\uff0c\u6267\u884c ",(0,i.jsx)(e.code,{children:'sdscat(s, " Cluster")'})," \u540e\uff0clen \u53d8\u4e3a 13 \u5b57\u8282\uff0c\u6240\u4ee5\u4e5f\u5206\u914d\u4e86 13 \u5b57\u8282\u7684 free \u7a7a\u95f4\uff0c\u603b\u957f\u5ea6\u53d8\u4e3a 27 \u5b57\u8282\uff08\u989d\u5916\u7684\u4e00\u5b57\u8282\u4fdd\u5b58\u7a7a\u5b57\u7b26\uff0c13 + 13 + 1 = 27\uff09"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(77064).A+"",width:"1114",height:"200"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5bf9 SDS \u4fee\u6539\u4e4b\u540e\uff0cSDS \u7684\u957f\u5ea6\u5927\u4e8e\u7b49\u4e8e 1MB\uff0c\u7a0b\u5e8f\u4f1a\u5206\u914d 1MB \u7684\u672a\u4f7f\u7528\u7a7a\u95f4"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5728\u6269\u5c55 SDS \u7a7a\u95f4\u524d\uff0cAPI \u4f1a\u5148\u68c0\u67e5 free \u7a7a\u95f4\u662f\u5426\u8db3\u591f\uff0c\u5982\u679c\u8db3\u591f\u5c31\u65e0\u9700\u6267\u884c\u5185\u5b58\u91cd\u5206\u914d\uff0c\u6240\u4ee5\u901a\u8fc7\u9884\u5206\u914d\u7b56\u7565\uff0cSDS \u5c06\u8fde\u7eed\u589e\u957f N \u6b21\u5b57\u7b26\u4e32\u6240\u9700\u5185\u5b58\u7684\u91cd\u5206\u914d\u6b21\u6570\u4ece",(0,i.jsx)(e.strong,{children:"\u5fc5\u5b9a N \u6b21\u964d\u4f4e\u4e3a\u6700\u591a N \u6b21"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u60f0\u6027\u7a7a\u95f4\u91ca\u653e\uff1a\u5f53 SDS \u7f29\u77ed\u5b57\u7b26\u4e32\u65f6\uff0c\u7a0b\u5e8f\u5e76\u4e0d\u7acb\u5373\u4f7f\u7528\u5185\u5b58\u91cd\u5206\u914d\u6765\u56de\u6536\u7f29\u77ed\u540e\u591a\u51fa\u6765\u7684\u5b57\u8282\uff0c\u800c\u662f\u4f7f\u7528 free \u5c5e\u6027\u5c06\u8fd9\u4e9b\u5b57\u8282\u7684\u6570\u91cf\u8bb0\u5f55\u8d77\u6765\uff0c\u5e76\u7b49\u5f85\u5c06\u6765\u590d\u7528"}),"\n",(0,i.jsx)(e.p,{children:"SDS \u63d0\u4f9b\u4e86\u76f8\u5e94\u7684 API \u6765\u771f\u6b63\u91ca\u653e SDS \u7684\u672a\u4f7f\u7528\u7a7a\u95f4\uff0c\u6240\u4ee5\u4e0d\u7528\u62c5\u5fc3\u7a7a\u95f4\u60f0\u6027\u91ca\u653e\u7b56\u7565\u9020\u6210\u7684\u5185\u5b58\u6d6a\u8d39\u95ee\u9898"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u94fe\u8868",children:"\u94fe\u8868"}),"\n",(0,i.jsx)(e.p,{children:"\u94fe\u8868\u63d0\u4f9b\u4e86\u9ad8\u6548\u7684\u8282\u70b9\u91cd\u6392\u80fd\u529b\uff0cC \u8bed\u8a00\u5e76\u6ca1\u6709\u5185\u7f6e\u8fd9\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u6240\u4ee5 Redis \u6784\u5efa\u4e86\u94fe\u8868\u6570\u636e\u7c7b\u578b"}),"\n",(0,i.jsx)(e.p,{children:"\u94fe\u8868\u8282\u70b9\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct listNode {\n    // \u524d\u7f6e\u8282\u70b9\n    struct listNode *prev;\n    \n    // \u540e\u7f6e\u8282\u70b9\n    struct listNode *next;\n    \n    // \u8282\u70b9\u7684\u503c\n    void *value\n} listNode;\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u591a\u4e2a listNode \u901a\u8fc7 prev \u548c next \u6307\u9488\u7ec4\u6210",(0,i.jsx)(e.strong,{children:"\u53cc\u7aef\u94fe\u8868"}),"\uff1a"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(92871).A+"",width:"1003",height:"114"})}),"\n",(0,i.jsx)(e.p,{children:"list \u94fe\u8868\u7ed3\u6784\uff1a\u63d0\u4f9b\u4e86\u8868\u5934\u6307\u9488 head \u3001\u8868\u5c3e\u6307\u9488 tail \u4ee5\u53ca\u94fe\u8868\u957f\u5ea6\u8ba1\u6570\u5668 len"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct list {\n    // \u8868\u5934\u8282\u70b9\n    listNode *head;\n    // \u8868\u5c3e\u8282\u70b9\n    listNode *tail;\n    \n    // \u94fe\u8868\u6240\u5305\u542b\u7684\u8282\u70b9\u6570\u91cf\n    unsigned long len;\n    \n    // \u8282\u70b9\u503c\u590d\u5236\u51fd\u6570\uff0c\u7528\u4e8e\u590d\u5236\u94fe\u8868\u8282\u70b9\u6240\u4fdd\u5b58\u7684\u503c\n    void *(*dup) (void *ptr);\n    // \u8282\u70b9\u503c\u91ca\u653e\u51fd\u6570\uff0c\u7528\u4e8e\u91ca\u653e\u94fe\u8868\u8282\u70b9\u6240\u4fdd\u5b58\u7684\u503c\n    void (*free) (void *ptr);\n    // \u8282\u70b9\u503c\u5bf9\u6bd4\u51fd\u6570\uff0c\u7528\u4e8e\u5bf9\u6bd4\u94fe\u8868\u8282\u70b9\u6240\u4fdd\u5b58\u7684\u503c\u548c\u53e6\u4e00\u4e2a\u8f93\u5165\u503c\u662f\u5426\u76f8\u7b49\n    int (*match) (void *ptr, void *key);\n} list;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(9704).A+"",width:"1063",height:"285"})}),"\n",(0,i.jsx)(e.p,{children:"Redis \u94fe\u8868\u7684\u7279\u6027\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53cc\u7aef\uff1a\u94fe\u8868\u8282\u70b9\u5e26\u6709 prev \u548c next \u6307\u9488\uff0c\u83b7\u53d6\u67d0\u4e2a\u8282\u70b9\u7684\u524d\u7f6e\u8282\u70b9\u548c\u540e\u7f6e\u8282\u70b9\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662f O(1)"}),"\n",(0,i.jsx)(e.li,{children:"\u65e0\u73af\uff1a\u8868\u5934\u8282\u70b9\u7684 prev \u6307\u9488\u548c\u8868\u5c3e\u8282\u70b9\u7684 next \u6307\u9488\u90fd\u6307\u5411 NULL\uff0c\u5bf9\u94fe\u8868\u7684\u8bbf\u95ee\u4ee5 NULL \u4e3a\u7ec8\u70b9"}),"\n",(0,i.jsx)(e.li,{children:"\u5e26\u8868\u5934\u6307\u9488\u548c\u8868\u5c3e\u6307\u9488\uff1a \u901a\u8fc7 list \u7ed3\u6784\u7684 head \u6307\u9488\u548c tail \u6307\u9488\uff0c\u83b7\u53d6\u94fe\u8868\u7684\u8868\u5934\u8282\u70b9\u548c\u8868\u5c3e\u8282\u70b9\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(1)"}),"\n",(0,i.jsx)(e.li,{children:"\u5e26\u94fe\u8868\u957f\u5ea6\u8ba1\u6570\u5668\uff1a\u4f7f\u7528 len \u5c5e\u6027\u6765\u5bf9 list \u6301\u6709\u7684\u94fe\u8868\u8282\u70b9\u8fdb\u884c\u8ba1\u6570\uff0c\u83b7\u53d6\u94fe\u8868\u4e2d\u8282\u70b9\u6570\u91cf\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(1)"}),"\n",(0,i.jsxs)(e.li,{children:["\u591a\u6001\uff1a\u94fe\u8868\u8282\u70b9\u4f7f\u7528 void * \u6307\u9488\u6765\u4fdd\u5b58\u8282\u70b9\u503c\uff0c \u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7 dup\u3001free \u3001match \u4e09\u4e2a\u5c5e\u6027\u4e3a\u8282\u70b9\u503c\u8bbe\u7f6e\u7c7b\u578b\u7279\u5b9a\u51fd\u6570\uff0c\u6240\u4ee5\u94fe\u8868\u53ef\u4ee5\u4fdd\u5b58\u5404\u79cd",(0,i.jsx)(e.strong,{children:"\u4e0d\u540c\u7c7b\u578b\u7684\u503c"})]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5b57\u5178",children:"\u5b57\u5178"}),"\n",(0,i.jsx)(e.h4,{id:"\u54c8\u5e0c\u8868",children:"\u54c8\u5e0c\u8868"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u5b57\u5178\u4f7f\u7528\u7684\u54c8\u5e0c\u8868\u7ed3\u6784\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct dictht {\n    // \u54c8\u5e0c\u8868\u6570\u7ec4\uff0c\u6570\u7ec4\u4e2d\u6bcf\u4e2a\u5143\u7d20\u6307\u5411 dictEntry \u7ed3\u6784\n\tdictEntry **table;\n    \n\t// \u54c8\u5e0c\u8868\u5927\u5c0f\uff0c\u6570\u7ec4\u7684\u957f\u5ea6\n\tunsigned long size;\n    \n\t// \u54c8\u5e0c\u8868\u5927\u5c0f\u63a9\u7801\uff0c\u7528\u4e8e\u8ba1\u7b97\u7d22\u5f15\u503c\uff0c\u603b\u662f\u7b49\u4e8e \u3010size-1\u3011\n\tunsigned long sizemask;\n    \n\t// \u8be5\u54c8\u5e0c\u8868\u5df2\u6709\u8282\u70b9\u7684\u6570\u91cf \n\tunsigned long used;\n} dictht;\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u54c8\u5e0c\u8868\u8282\u70b9\u7ed3\u6784\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct dictEntry {\n    // \u952e\n\tvoid *key;\n    \n\t// \u503c\uff0c\u53ef\u4ee5\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u6216\u8005\u6574\u6570\n\tunion {\n        void *val;\t// \u6307\u9488\n        uint64_t u64;\n        int64_t s64;\n    }\n    \n\t// \u6307\u5411\u4e0b\u4e2a\u54c8\u5e0c\u8868\u8282\u70b9\uff0c\u5f62\u6210\u94fe\u8868\uff0c\u7528\u6765\u89e3\u51b3\u51b2\u7a81\u95ee\u9898\n    struct dictEntry *next;\n} dictEntry;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(5280).A+"",width:"1151",height:"309"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5b57\u5178\u7ed3\u6784",children:"\u5b57\u5178\u7ed3\u6784"}),"\n",(0,i.jsx)(e.p,{children:"\u5b57\u5178\uff0c\u53c8\u79f0\u4e3a\u7b26\u53f7\u8868\u3001\u5173\u8054\u6570\u7ec4\u3001\u6620\u5c04\uff08Map\uff09\uff0c\u7528\u4e8e\u4fdd\u5b58\u952e\u503c\u5bf9\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5b57\u5178\u4e2d\u7684\u6bcf\u4e2a\u952e\u90fd\u662f\u72ec\u4e00\u65e0\u4e8c\u7684\u3002\u5e95\u5c42\u91c7\u7528\u54c8\u5e0c\u8868\u5b9e\u73b0\uff0c\u4e00\u4e2a\u54c8\u5e0c\u8868\u5305\u542b\u591a\u4e2a\u54c8\u5e0c\u8868\u8282\u70b9\uff0c\u6bcf\u4e2a\u8282\u70b9\u4fdd\u5b58\u4e00\u4e2a\u952e\u503c\u5bf9"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct dict {\n    // \u7c7b\u578b\u7279\u5b9a\u51fd\u6570\n    dictType *type;\n    \n    // \u79c1\u6709\u6570\u636e\n    void *privdata;\n    \n    // \u54c8\u5e0c\u8868\uff0c\u6570\u7ec4\u4e2d\u7684\u6bcf\u4e2a\u9879\u90fd\u662f\u4e00\u4e2adictht\u54c8\u5e0c\u8868\uff0c\n    // \u4e00\u822c\u60c5\u51b5\u4e0b\u5b57\u5178\u53ea\u4f7f\u7528 ht[0] \u54c8\u5e0c\u8868\uff0c ht[1] \u54c8\u5e0c\u8868\u53ea\u4f1a\u5728\u5bf9 ht[0] \u54c8\u5e0c\u8868\u8fdb\u884c rehash \u65f6\u4f7f\u7528\n    dictht ht[2];\n    \n    // rehash \u7d22\u5f15\uff0c\u5f53 rehash \u4e0d\u5728\u8fdb\u884c\u65f6\uff0c\u503c\u4e3a -1\n    int rehashidx;\n} dict;\n"})}),"\n",(0,i.jsx)(e.p,{children:"type \u5c5e\u6027\u548c privdata \u5c5e\u6027\u662f\u9488\u5bf9\u4e0d\u540c\u7c7b\u578b\u7684\u952e\u503c\u5bf9\uff0c \u4e3a\u521b\u5efa\u591a\u6001\u5b57\u5178\u800c\u8bbe\u7f6e\u7684\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"type \u5c5e\u6027\u662f\u6307\u5411 dictType \u7ed3\u6784\u7684\u6307\u9488\uff0c \u6bcf\u4e2a dictType \u7ed3\u6784\u4fdd\u5b58\u4e86\u4e00\u7c07\u7528\u4e8e\u64cd\u4f5c\u7279\u5b9a\u7c7b\u578b\u952e\u503c\u5bf9\u7684\u51fd\u6570\uff0c Redis \u4f1a\u4e3a\u7528\u9014\u4e0d\u540c\u7684\u5b57\u5178\u8bbe\u7f6e\u4e0d\u540c\u7684\u7c7b\u578b\u7279\u5b9a\u51fd\u6570"}),"\n",(0,i.jsx)(e.li,{children:"privdata \u5c5e\u6027\u4fdd\u5b58\u4e86\u9700\u8981\u4f20\u7ed9\u90a3\u4e9b\u7c7b\u578b\u7279\u5b9a\u51fd\u6570\u7684\u53ef\u9009\u53c2\u6570"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(35207).A+"",width:"1215",height:"564"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u54c8\u5e0c\u51b2\u7a81",children:"\u54c8\u5e0c\u51b2\u7a81"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u4f7f\u7528 MurmurHash \u7b97\u6cd5\u6765\u8ba1\u7b97\u952e\u7684\u54c8\u5e0c\u503c\uff0c\u8fd9\u79cd\u7b97\u6cd5\u7684\u4f18\u70b9\u5728\u4e8e\uff0c\u5373\u4f7f\u8f93\u5165\u7684\u952e\u662f\u6709\u89c4\u5f8b\u7684\uff0c\u7b97\u6cd5\u4ecd\u80fd\u7ed9\u51fa\u4e00\u4e2a\u5f88\u597d\u7684\u968f\u673a\u5206\u5e03\u6027\uff0c\u5e76\u4e14\u7b97\u6cd5\u7684\u8ba1\u7b97\u901f\u5ea6\u4e5f\u975e\u5e38\u5feb"}),"\n",(0,i.jsx)(e.p,{children:"\u5c06\u4e00\u4e2a\u65b0\u7684\u952e\u503c\u5bf9\u6dfb\u52a0\u5230\u5b57\u5178\u91cc\uff0c\u9700\u8981\u5148\u6839\u636e\u952e key \u8ba1\u7b97\u51fa\u54c8\u5e0c\u503c\uff0c\u7136\u540e\u8fdb\u884c\u53d6\u6a21\u8fd0\u7b97\uff08\u53d6\u4f59\uff09\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"index = hash & dict->ht[x].sizemask\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u6709\u4e24\u4e2a\u6216\u4ee5\u4e0a\u6570\u91cf\u7684\u952e\u88ab\u5206\u914d\u5230\u4e86\u54c8\u5e0c\u8868\u6570\u7ec4\u7684\u540c\u4e00\u4e2a\u7d22\u5f15\u4e0a\u65f6\uff0c\u5c31\u79f0\u8fd9\u4e9b\u952e\u53d1\u751f\u4e86\u54c8\u5e0c\u51b2\u7a81\uff08collision\uff09"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u7684\u54c8\u5e0c\u8868\u4f7f\u7528\u94fe\u5730\u5740\u6cd5\uff08separate chaining\uff09\u6765\u89e3\u51b3\u952e\u54c8\u5e0c\u51b2\u7a81\uff0c \u6bcf\u4e2a\u54c8\u5e0c\u8868\u8282\u70b9\u90fd\u6709\u4e00\u4e2a next \u6307\u9488\uff0c\u591a\u4e2a\u8282\u70b9\u901a\u8fc7 next \u6307\u9488\u6784\u6210\u4e00\u4e2a\u5355\u5411\u94fe\u8868\uff0c\u88ab\u5206\u914d\u5230\u540c\u4e00\u4e2a\u7d22\u5f15\u4e0a\u7684\u591a\u4e2a\u8282\u70b9\u53ef\u4ee5\u7528\u8fd9\u4e2a\u5355\u5411\u94fe\u8868\u8fde\u63a5\u8d77\u6765\uff0c\u8fd9\u5c31\u89e3\u51b3\u4e86\u952e\u51b2\u7a81\u7684\u95ee\u9898"}),"\n",(0,i.jsxs)(e.p,{children:["dictEntry \u8282\u70b9\u7ec4\u6210\u7684\u94fe\u8868\u6ca1\u6709\u6307\u5411\u94fe\u8868\u8868\u5c3e\u7684\u6307\u9488\uff0c\u4e3a\u4e86\u901f\u5ea6\u8003\u8651\uff0c\u7a0b\u5e8f\u603b\u662f\u5c06\u65b0\u8282\u70b9\u6dfb\u52a0\u5230\u94fe\u8868\u7684\u8868\u5934\u4f4d\u7f6e\uff08",(0,i.jsx)(e.strong,{children:"\u5934\u63d2\u6cd5"}),"\uff09\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(1)"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(7390).A+"",width:"1013",height:"335"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u8d1f\u8f7d\u56e0\u5b50",children:"\u8d1f\u8f7d\u56e0\u5b50"}),"\n",(0,i.jsxs)(e.p,{children:["\u8d1f\u8f7d\u56e0\u5b50\u7684\u8ba1\u7b97\u65b9\u5f0f\uff1a\u54c8\u5e0c\u8868\u4e2d\u7684",(0,i.jsx)(e.strong,{children:"\u8282\u70b9\u6570\u91cf"})," / \u54c8\u5e0c\u8868\u7684\u5927\u5c0f\uff08",(0,i.jsx)(e.strong,{children:"\u957f\u5ea6"}),"\uff09"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"load_factor = ht[0].used / ht[0].size\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4e3a\u4e86\u8ba9\u54c8\u5e0c\u8868\u7684\u8d1f\u8f7d\u56e0\u5b50\uff08load factor\uff09\u7ef4\u6301\u5728\u4e00\u4e2a\u5408\u7406\u7684\u8303\u56f4\u4e4b\u5185\uff0c\u5f53\u54c8\u5e0c\u8868\u4fdd\u5b58\u7684\u952e\u503c\u5bf9\u6570\u91cf\u592a\u591a\u6216\u8005\u592a\u5c11\u65f6 \uff0c\u7a0b\u5e8f\u4f1a\u81ea\u52a8\u5bf9\u54c8\u5e0c\u8868\u7684\u5927\u5c0f\u8fdb\u884c\u76f8\u5e94\u7684\u6269\u5c55\u6216\u8005\u6536\u7f29"}),"\n",(0,i.jsx)(e.p,{children:"\u54c8\u5e0c\u8868\u6267\u884c\u6269\u5bb9\u7684\u6761\u4ef6\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u6ca1\u6709\u6267\u884c BGSAVE \u6216\u8005 BGREWRITEAOF \u547d\u4ee4\uff0c\u54c8\u5e0c\u8868\u7684\u8d1f\u8f7d\u56e0\u5b50\u5927\u4e8e\u7b49\u4e8e 1"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u6b63\u5728\u6267\u884c BGSAVE \u6216\u8005 BGREWRITEAOF \u547d\u4ee4\uff0c\u54c8\u5e0c\u8868\u7684\u8d1f\u8f7d\u56e0\u5b50\u5927\u4e8e\u7b49\u4e8e 5"}),"\n",(0,i.jsx)(e.p,{children:"\u539f\u56e0\uff1a\u6267\u884c\u8be5\u547d\u4ee4\u7684\u8fc7\u7a0b\u4e2d\uff0cRedis \u9700\u8981\u521b\u5efa\u5f53\u524d\u670d\u52a1\u5668\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b\uff0c\u800c\u5927\u591a\u6570\u64cd\u4f5c\u7cfb\u7edf\u90fd\u91c7\u7528\u5199\u65f6\u590d\u5236\uff08copy-on\xad-write\uff09\u6280\u672f\u6765\u4f18\u5316\u5b50\u8fdb\u7a0b\u7684\u4f7f\u7528\u6548\u7387\uff0c\u901a\u8fc7\u63d0\u9ad8\u6267\u884c\u6269\u5c55\u64cd\u4f5c\u7684\u8d1f\u8f7d\u56e0\u5b50\uff0c\u5c3d\u53ef\u80fd\u5730\u907f\u514d\u5728\u5b50\u8fdb\u7a0b\u5b58\u5728\u671f\u95f4\u8fdb\u884c\u54c8\u5e0c\u8868\u6269\u5c55\u64cd\u4f5c\uff0c\u53ef\u4ee5\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u5185\u5b58\u5199\u5165\u64cd\u4f5c\uff0c\u6700\u5927\u9650\u5ea6\u5730\u8282\u7ea6\u5185\u5b58"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u54c8\u5e0c\u8868\u6267\u884c\u6536\u7f29\u7684\u6761\u4ef6\uff1a\u8d1f\u8f7d\u56e0\u5b50\u5c0f\u4e8e 0.1\uff08\u81ea\u52a8\u6267\u884c\uff0cservreCron \u4e2d\u68c0\u6d4b\uff09"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u91cd\u65b0\u6563\u5217",children:"\u91cd\u65b0\u6563\u5217"}),"\n",(0,i.jsx)(e.p,{children:"\u6269\u5c55\u548c\u6536\u7f29\u54c8\u5e0c\u8868\u7684\u64cd\u4f5c\u901a\u8fc7 rehash\uff08\u91cd\u65b0\u6563\u5217\uff09\u6765\u5b8c\u6210\uff0c\u6b65\u9aa4\u5982\u4e0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4e3a\u5b57\u5178\u7684 ht[1] \u54c8\u5e0c\u8868\u5206\u914d\u7a7a\u95f4\uff0c\u7a7a\u95f4\u5927\u5c0f\u7684\u5206\u914d\u60c5\u51b5\uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u6267\u884c\u7684\u662f\u6269\u5c55\u64cd\u4f5c\uff0cht[1] \u7684\u5927\u5c0f\u4e3a\u7b2c\u4e00\u4e2a\u5927\u4e8e\u7b49\u4e8e ",(0,i.jsx)(e.span,{className:"katex",children:(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"h"}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,i.jsx)(e.span,{className:"mopen",children:"["}),(0,i.jsx)(e.span,{className:"mord",children:"0"}),(0,i.jsx)(e.span,{className:"mclose",children:"]"}),(0,i.jsx)(e.span,{className:"mord",children:"."}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"u"}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"se"}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"\u2217"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,i.jsx)(e.span,{className:"mord",children:"2"})]})]})})," \u7684 ",(0,i.jsx)(e.span,{className:"katex",children:(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6644em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord",children:"2"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsx)(e.span,{className:"vlist-t",children:(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.6644em"},children:(0,i.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"n"})})]})})})})})]})]})})})]}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u6267\u884c\u7684\u662f\u6536\u7f29\u64cd\u4f5c\uff0cht[1] \u7684\u5927\u5c0f\u4e3a\u7b2c\u4e00\u4e2a\u5927\u4e8e\u7b49\u4e8e ",(0,i.jsx)(e.span,{className:"katex",children:(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"h"}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,i.jsx)(e.span,{className:"mopen",children:"["}),(0,i.jsx)(e.span,{className:"mord",children:"0"}),(0,i.jsx)(e.span,{className:"mclose",children:"]"}),(0,i.jsx)(e.span,{className:"mord",children:"."}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"u"}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"se"}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"d"})]})})})," \u7684 ",(0,i.jsx)(e.span,{className:"katex",children:(0,i.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"0.6644em"}}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord",children:"2"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsx)(e.span,{className:"vlist-t",children:(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.6644em"},children:(0,i.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"n"})})]})})})})})]})]})})})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u5c06\u4fdd\u5b58\u5728 ht[0] \u4e2d\u6240\u6709\u7684\u952e\u503c\u5bf9\u91cd\u65b0\u8ba1\u7b97\u54c8\u5e0c\u503c\u548c\u7d22\u5f15\u503c\uff0c\u8fc1\u79fb\u5230 ht[1] \u4e0a"}),"\n",(0,i.jsx)(e.li,{children:"\u5f53 ht[0] \u5305\u542b\u7684\u6240\u6709\u952e\u503c\u5bf9\u90fd\u8fc1\u79fb\u5230\u4e86 ht[1] \u4e4b\u540e\uff08ht[0] \u53d8\u4e3a\u7a7a\u8868\uff09\uff0c\u91ca\u653e ht[0]\uff0c\u5c06 ht[1] \u8bbe\u7f6e\u4e3a ht[0]\uff0c\u5e76\u5728 ht[1] \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7a7a\u767d\u54c8\u5e0c\u8868\uff0c\u4e3a\u4e0b\u4e00\u6b21 rehash \u505a\u51c6\u5907"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u54c8\u5e0c\u8868\u91cc\u4fdd\u5b58\u7684\u952e\u503c\u5bf9\u6570\u91cf\u5f88\u5c11\uff0crehash \u5c31\u53ef\u4ee5\u5728\u77ac\u95f4\u5b8c\u6210\uff0c\u4f46\u662f\u5982\u679c\u54c8\u5e0c\u8868\u91cc\u6570\u636e\u5f88\u591a\uff0c\u90a3\u4e48\u8981\u4e00\u6b21\u6027\u5c06\u8fd9\u4e9b\u952e\u503c\u5bf9\u5168\u90e8 rehash \u5230 ht[1] \u9700\u8981\u5927\u91cf\u8ba1\u7b97\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u670d\u52a1\u5668\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u505c\u6b62\u670d\u52a1"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u5bf9 rehash \u505a\u4e86\u4f18\u5316\uff0c\u4f7f rehash \u7684\u52a8\u4f5c\u5e76\u4e0d\u662f\u4e00\u6b21\u6027\u3001\u96c6\u4e2d\u5f0f\u7684\u5b8c\u6210\uff0c\u800c\u662f\u5206\u591a\u6b21\uff0c\u6e10\u8fdb\u5f0f\u7684\u5b8c\u6210\uff0c\u53c8\u53eb",(0,i.jsx)(e.strong,{children:"\u6e10\u8fdb\u5f0f rehash"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e3a ht[1] \u5206\u914d\u7a7a\u95f4\uff0c\u6b64\u65f6\u5b57\u5178\u540c\u65f6\u6301\u6709 ht[0] \u548c ht[1] \u4e24\u4e2a\u54c8\u5e0c\u8868"}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u5b57\u5178\u4e2d\u7ef4\u62a4\u4e86\u4e00\u4e2a\u7d22\u5f15\u8ba1\u6570\u5668\u53d8\u91cf rehashidx\uff0c\u5e76\u5c06\u53d8\u91cf\u7684\u503c\u8bbe\u4e3a 0\uff0c\u8868\u793a rehash \u6b63\u5f0f\u5f00\u59cb"}),"\n",(0,i.jsxs)(e.li,{children:["\u5728 rehash \u8fdb\u884c\u671f\u95f4\uff0c\u6bcf\u6b21\u5bf9\u5b57\u5178\u6267\u884c\u589e\u5220\u6539\u67e5\u64cd\u4f5c\u65f6\uff0c\u7a0b\u5e8f\u9664\u4e86\u6267\u884c\u6307\u5b9a\u7684\u64cd\u4f5c\u4ee5\u5916\uff0c\u8fd8\u4f1a\u987a\u5e26\u5c06 ht[0] \u54c8\u5e0c\u8868\u5728 rehashidx \u7d22\u5f15\u4e0a\u7684\u6240\u6709\u952e\u503c\u5bf9 rehash \u5230 ht[1]\uff0crehash \u5b8c\u6210\u4e4b\u540e",(0,i.jsx)(e.strong,{children:"\u5c06 rehashidx \u5c5e\u6027\u7684\u503c\u589e\u4e00"})]}),"\n",(0,i.jsx)(e.li,{children:"\u968f\u7740\u5b57\u5178\u64cd\u4f5c\u7684\u4e0d\u65ad\u6267\u884c\uff0c\u6700\u7ec8\u5728\u67d0\u4e2a\u65f6\u95f4\u70b9 ht[0] \u7684\u6240\u6709\u952e\u503c\u5bf9\u90fd\u88ab rehash \u81f3 ht[1]\uff0c\u5c06 rehashidx \u5c5e\u6027\u7684\u503c\u8bbe\u4e3a -1"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u6e10\u8fdb\u5f0f rehash \u91c7\u7528",(0,i.jsx)(e.strong,{children:"\u5206\u800c\u6cbb\u4e4b"}),"\u7684\u65b9\u5f0f\uff0c\u5c06 rehash \u952e\u503c\u5bf9\u6240\u9700\u7684\u8ba1\u7b97\u5de5\u4f5c\u5747\u644a\u5230\u5bf9\u5b57\u5178\u7684\u6bcf\u4e2a\u6dfb\u52a0\u3001\u5220\u9664\u3001\u67e5\u627e\u548c\u66f4\u65b0\u64cd\u4f5c\u4e0a\uff0c\u4ece\u800c\u907f\u514d\u4e86\u96c6\u4e2d\u5f0f rehash \u5e26\u6765\u7684\u5e9e\u5927\u8ba1\u7b97\u91cf"]}),"\n",(0,i.jsx)(e.p,{children:"\u6e10\u8fdb\u5f0f rehash \u671f\u95f4\u7684\u54c8\u5e0c\u8868\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5b57\u5178\u7684\u67e5\u627e\u3001\u5220\u9664\u3001\u66f4\u65b0\u64cd\u4f5c\u4f1a\u5728\u4e24\u4e2a\u54c8\u5e0c\u8868\u4e0a\u8fdb\u884c\uff0c\u6bd4\u5982\u67e5\u627e\u4e00\u4e2a\u952e\u4f1a\u5148\u5728 ht[0] \u4e0a\u67e5\u627e\uff0c\u67e5\u627e\u4e0d\u5230\u5c31\u53bb ht[1] \u7ee7\u7eed\u67e5\u627e"}),"\n",(0,i.jsx)(e.li,{children:"\u5b57\u5178\u7684\u6dfb\u52a0\u64cd\u4f5c\u4f1a\u76f4\u63a5\u5728 ht[1] \u4e0a\u6dfb\u52a0\uff0c\u4e0d\u5728 ht[0] \u4e0a\u8fdb\u884c\u4efb\u4f55\u6dfb\u52a0"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u8df3\u8dc3\u8868",children:"\u8df3\u8dc3\u8868"}),"\n",(0,i.jsx)(e.h4,{id:"\u5e95\u5c42\u7ed3\u6784",children:"\u5e95\u5c42\u7ed3\u6784"}),"\n",(0,i.jsxs)(e.p,{children:["\u8df3\u8dc3\u8868\uff08skiplist\uff09\u662f\u4e00\u79cd\u6709\u5e8f\uff08",(0,i.jsx)(e.strong,{children:"\u9ed8\u8ba4\u5347\u5e8f"}),"\uff09\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5728\u94fe\u8868\u7684\u57fa\u7840\u4e0a",(0,i.jsx)(e.strong,{children:"\u589e\u52a0\u4e86\u591a\u7ea7\u7d22\u5f15\u4ee5\u63d0\u5347\u67e5\u627e\u7684\u6548\u7387"}),"\uff0c\u7d22\u5f15\u662f\u5360\u5185\u5b58\u7684\uff0c\u6240\u4ee5\u662f\u4e00\u4e2a",(0,i.jsx)(e.strong,{children:"\u7a7a\u95f4\u6362\u65f6\u95f4"}),"\u7684\u65b9\u6848\uff0c\u8df3\u8868\u5e73\u5747 O(logN)\u3001\u6700\u574f O(N) \u590d\u6742\u5ea6\u7684\u8282\u70b9\u67e5\u627e\uff0c\u6548\u7387\u4e0e\u5e73\u8861\u6811\u76f8\u5f53\u4f46\u662f\u5b9e\u73b0\u66f4\u7b80\u5355"]}),"\n",(0,i.jsx)(e.p,{children:"\u539f\u59cb\u94fe\u8868\u4e2d\u5b58\u50a8\u7684\u6709\u53ef\u80fd\u662f\u5f88\u5927\u7684\u5bf9\u8c61\uff0c\u800c\u7d22\u5f15\u7ed3\u70b9\u53ea\u9700\u8981\u5b58\u50a8\u5173\u952e\u503c\u548c\u51e0\u4e2a\u6307\u9488\uff0c\u5e76\u4e0d\u9700\u8981\u5b58\u50a8\u5bf9\u8c61\uff0c\u56e0\u6b64\u5f53\u8282\u70b9\u672c\u8eab\u6bd4\u8f83\u5927\u6216\u8005\u5143\u7d20\u6570\u91cf\u6bd4\u8f83\u591a\u7684\u65f6\u5019\uff0c\u5176\u4f18\u52bf\u53ef\u4ee5\u88ab\u653e\u5927\uff0c\u800c\u7f3a\u70b9\uff08\u5360\u5185\u5b58\uff09\u5219\u53ef\u4ee5\u5ffd\u7565"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u53ea\u5728\u4e24\u4e2a\u5730\u65b9\u5e94\u7528\u4e86\u8df3\u8dc3\u8868\uff0c\u4e00\u4e2a\u662f\u5b9e\u73b0\u6709\u5e8f\u96c6\u5408\u952e\uff0c\u53e6\u4e00\u4e2a\u662f\u5728\u96c6\u7fa4\u8282\u70b9\u4e2d\u7528\u4f5c\u5185\u90e8\u6570\u636e\u7ed3\u6784"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct zskiplist {\n    // \u8868\u5934\u8282\u70b9\u548c\u8868\u5c3e\u8282\u70b9\uff0cO(1) \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5b9a\u4f4d\u5934\u5c3e\u8282\u70b9\n    struct skiplistNode *head, *tail;\n    \n    // \u8868\u7684\u957f\u5ea6\uff0c\u4e5f\u5c31\u662f\u8868\u5185\u7684\u8282\u70b9\u6570\u91cf (\u8868\u5934\u8282\u70b9\u4e0d\u8ba1\u7b97\u5728\u5185)\n    unsigned long length;\n    \n    // \u8868\u4e2d\u5c42\u6570\u6700\u5927\u7684\u8282\u70b9\u7684\u5c42\u6570 (\u8868\u5934\u8282\u70b9\u7684\u5c42\u9ad8\u4e0d\u8ba1\u7b97\u5728\u5185)\n    int level\n} zskiplist;\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct zskiplistNode {\n    // \u5c42\n    struct zskiplistLevel {\n        // \u524d\u8fdb\u6307\u9488\n        struct zskiplistNode *forward;\n        // \u8de8\u5ea6\n        unsigned int span;\n    } level[];\n    \n    // \u540e\u9000\u6307\u9488\n    struct zskiplistNode *backward;\n    \n    // \u5206\u503c\n    double score;\n    \n    // \u6210\u5458\u5bf9\u8c61\n    robj *obj;\n} zskiplistNode;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(80251).A+"",width:"1299",height:"440"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5c5e\u6027\u5206\u6790",children:"\u5c5e\u6027\u5206\u6790"}),"\n",(0,i.jsxs)(e.p,{children:["\u5c42\uff1alevel \u6570\u7ec4\u5305\u542b\u591a\u4e2a\u5143\u7d20\uff0c\u6bcf\u4e2a\u5143\u7d20\u5305\u542b\u6307\u5411\u5176\u4ed6\u8282\u70b9\u7684\u6307\u9488\u3002\u6839\u636e\u5e55\u6b21\u5b9a\u5f8b\uff08power law\uff0c\u8d8a\u5927\u7684\u6570\u51fa\u73b0\u7684\u6982\u7387\u8d8a\u5c0f\uff09",(0,i.jsx)(e.strong,{children:"\u968f\u673a"}),"\u751f\u6210\u4e00\u4e2a\u4ecb\u4e8e 1 \u548c 32 \u4e4b\u95f4\u7684\u503c\uff08Redis5 \u4e4b\u540e\u6700\u5927\u4e3a 64\uff09\u4f5c\u4e3a level \u6570\u7ec4\u7684\u5927\u5c0f\uff0c\u8fd9\u4e2a\u5927\u5c0f\u5c31\u662f\u5c42\u7684\u9ad8\u5ea6\uff0c\u8282\u70b9\u7684\u7b2c\u4e00\u5c42\u662f level[0] = L1"]}),"\n",(0,i.jsxs)(e.p,{children:["\u524d\u8fdb\u6307\u9488\uff1aforward \u7528\u4e8e\u4ece\u8868\u5934\u5230\u8868\u5c3e\u65b9\u5411",(0,i.jsx)(e.strong,{children:"\u6b63\u5e8f\uff08\u5347\u5e8f\uff09\u904d\u5386\u8282\u70b9"}),"\uff0c\u9047\u5230 NULL \u505c\u6b62\u904d\u5386"]}),"\n",(0,i.jsx)(e.p,{children:"\u8de8\u5ea6\uff1aspan \u7528\u4e8e\u8bb0\u5f55\u4e24\u4e2a\u8282\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\u7528\u6765\u8ba1\u7b97\u6392\u4f4d\uff08rank\uff09\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e24\u4e2a\u8282\u70b9\u4e4b\u95f4\u7684\u8de8\u5ea6\u8d8a\u5927\u76f8\u8ddd\u7684\u5c31\u8d8a\u8fdc\uff0c\u6307\u5411 NULL \u7684\u6240\u6709\u524d\u8fdb\u6307\u9488\u7684\u8de8\u5ea6\u90fd\u4e3a 0"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5728\u67e5\u627e\u67d0\u4e2a\u8282\u70b9\u7684\u8fc7\u7a0b\u4e2d\uff0c",(0,i.jsx)(e.strong,{children:"\u5c06\u6cbf\u9014\u8bbf\u95ee\u8fc7\u7684\u6240\u6709\u5c42\u7684\u8de8\u5ea6\u7d2f\u8ba1\u8d77\u6765\uff0c\u7ed3\u679c\u5c31\u662f\u76ee\u6807\u8282\u70b9\u5728\u8df3\u8dc3\u8868\u4e2d\u7684\u6392\u4f4d"}),"\uff0c\u6309\u7167\u4e0a\u56fe\u6240\u793a\uff1a"]}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u627e\u5206\u503c\u4e3a 3.0 \u7684\u8282\u70b9\uff0c\u6cbf\u9014\u7ecf\u5386\u7684\u5c42\uff1a\u67e5\u627e\u7684\u8fc7\u7a0b\u53ea\u7ecf\u8fc7\u4e86\u4e00\u4e2a\u5c42\uff0c\u5e76\u4e14\u5c42\u7684\u8de8\u5ea6\u4e3a 3\uff0c\u6240\u4ee5\u76ee\u6807\u8282\u70b9\u5728\u8df3\u8dc3\u8868\u4e2d\u7684\u6392\u4f4d\u4e3a 3"}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u627e\u5206\u503c\u4e3a 2.0 \u7684\u8282\u70b9\uff0c\u6cbf\u9014\u7ecf\u5386\u7684\u5c42\uff1a\u7ecf\u8fc7\u4e86\u4e24\u4e2a\u8de8\u5ea6\u4e3a 1 \u7684\u8282\u70b9\uff0c\u56e0\u6b64\u53ef\u4ee5\u8ba1\u7b97\u51fa\u76ee\u6807\u8282\u70b9\u5728\u8df3\u8dc3\u8868\u4e2d\u7684\u6392\u4f4d\u4e3a 2"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u540e\u9000\u6307\u9488\uff1abackward \u7528\u4e8e\u4ece\u8868\u5c3e\u5230\u8868\u5934\u65b9\u5411",(0,i.jsx)(e.strong,{children:"\u9006\u5e8f\uff08\u964d\u5e8f\uff09\u904d\u5386\u8282\u70b9"})]}),"\n",(0,i.jsx)(e.p,{children:"\u5206\u503c\uff1ascore \u5c5e\u6027\u4e00\u4e2a double \u7c7b\u578b\u7684\u6d6e\u70b9\u6570\uff0c\u8df3\u8dc3\u8868\u4e2d\u7684\u6240\u6709\u8282\u70b9\u90fd\u6309\u5206\u503c\u4ece\u5c0f\u5230\u5927\u6765\u6392\u5e8f"}),"\n",(0,i.jsxs)(e.p,{children:["\u6210\u5458\u5bf9\u8c61\uff1aobj \u5c5e\u6027\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u6307\u5411\u4e00\u4e2a SDS \u5b57\u7b26\u4e32\u5bf9\u8c61\u3002\u540c\u4e00\u4e2a\u8df3\u8dc3\u8868\u4e2d\uff0c\u5404\u4e2a\u8282\u70b9\u4fdd\u5b58\u7684",(0,i.jsx)(e.strong,{children:"\u6210\u5458\u5bf9\u8c61\u5fc5\u987b\u662f\u552f\u4e00\u7684"}),"\uff0c\u4f46\u662f\u591a\u4e2a\u8282\u70b9\u4fdd\u5b58\u7684\u5206\u503c\u53ef\u4ee5\u662f\u76f8\u540c\u7684\uff0c\u5206\u503c\u76f8\u540c\u7684\u8282\u70b9\u5c06\u6309\u7167\u6210\u5458\u5bf9\u8c61\u5728\u5b57\u5178\u5e8f\u4e2d\u7684\u5927\u5c0f\u6765\u8fdb\u884c\u6392\u5e8f\uff08\u4ece\u5c0f\u5230\u5927\uff09"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e2a\u4eba\u7b14\u8bb0\uff1aJUC \u2192 \u5e76\u53d1\u5305 \u2192 ConcurrentSkipListMap \u8be6\u89e3\u8df3\u8dc3\u8868"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u6574\u6570\u96c6\u5408",children:"\u6574\u6570\u96c6\u5408"}),"\n",(0,i.jsx)(e.h4,{id:"\u5e95\u5c42\u7ed3\u6784-1",children:"\u5e95\u5c42\u7ed3\u6784"}),"\n",(0,i.jsx)(e.p,{children:"\u6574\u6570\u96c6\u5408\uff08intset\uff09\u662f\u7528\u4e8e\u4fdd\u5b58\u6574\u6570\u503c\u7684\u96c6\u5408\u6570\u636e\u7ed3\u6784\uff0c\u662f Redis \u96c6\u5408\u952e\u7684\u5e95\u5c42\u5b9e\u73b0\u4e4b\u4e00"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct intset {\n\t// \u7f16\u7801\u65b9\u5f0f\n\tuint32_t encoding;\n    \n\t// \u96c6\u5408\u5305\u542b\u7684\u5143\u7d20\u6570\u91cf\uff0c\u4e5f\u5c31\u662f contents \u6570\u7ec4\u7684\u957f\u5ea6\n\tuint32_t length;\n    \n\t// \u4fdd\u5b58\u5143\u7d20\u7684\u6570\u7ec4\n    int8_t contents[];\n} intset;\n"})}),"\n",(0,i.jsx)(e.p,{children:"encoding \u53d6\u503c\u4e3a\u4e09\u79cd\uff1aINTSET_ENC_INT16\u3001INTSET_ENC_INT32\u3001INTSET_ENC_INT64"}),"\n",(0,i.jsxs)(e.p,{children:["\u6574\u6570\u96c6\u5408\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f contents \u6570\u7ec4\u7684\u4e00\u4e2a\u6570\u7ec4\u9879\uff08item\uff09\uff0c\u5728\u6570\u7ec4\u4e2d\u6309\u503c\u7684\u5927\u5c0f\u4ece\u5c0f\u5230\u5927",(0,i.jsx)(e.strong,{children:"\u6709\u5e8f\u6392\u5217"}),"\uff0c\u5e76\u4e14\u6570\u7ec4\u4e2d",(0,i.jsx)(e.strong,{children:"\u4e0d\u5305\u542b\u4efb\u4f55\u91cd\u590d\u9879"}),"\u3002\u867d\u7136 contents \u5c5e\u6027\u58f0\u660e\u4e3a int8_t \u7c7b\u578b\uff0c\u4f46\u5b9e\u9645\u4e0a\u6570\u7ec4\u5e76\u4e0d\u4fdd\u5b58\u4efb\u4f55 int8_t \u7c7b\u578b\u7684\u503c\uff0c \u771f\u6b63\u7c7b\u578b\u53d6\u51b3\u4e8e encoding \u5c5e\u6027"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(78748).A+"",width:"836",height:"288"})}),"\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\uff1a\u5e95\u5c42\u5b58\u50a8\u7ed3\u6784\u662f\u6570\u7ec4\uff0c\u6240\u4ee5\u4e3a\u4e86\u4fdd\u8bc1\u6709\u5e8f\u6027\u548c\u4e0d\u91cd\u590d\u6027\uff0c\u6bcf\u6b21\u6dfb\u52a0\u4e00\u4e2a\u5143\u7d20\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f O(N)"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u7c7b\u578b\u5347\u7ea7",children:"\u7c7b\u578b\u5347\u7ea7"}),"\n",(0,i.jsx)(e.p,{children:"\u6574\u6570\u96c6\u5408\u6dfb\u52a0\u7684\u65b0\u5143\u7d20\u7684\u7c7b\u578b\u6bd4\u96c6\u5408\u73b0\u6709\u6240\u6709\u5143\u7d20\u7684\u7c7b\u578b\u90fd\u8981\u957f\u65f6\uff0c\u9700\u8981\u5148\u8fdb\u884c\u5347\u7ea7\uff08upgrade\uff09\uff0c\u5347\u7ea7\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6839\u636e\u65b0\u5143\u7d20\u7684\u7c7b\u578b\u957f\u5ea6\u4ee5\u53ca\u96c6\u5408\u5143\u7d20\u7684\u6570\u91cf\uff08\u5305\u62ec\u65b0\u5143\u7d20\u5728\u5185\uff09\uff0c\u6269\u5c55\u6574\u6570\u96c6\u5408\u5e95\u5c42\u6570\u7ec4\u7684\u7a7a\u95f4\u5927\u5c0f"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5c06\u5e95\u5c42\u6570\u7ec4\u73b0\u6709\u7684\u6240\u6709\u5143\u7d20\u90fd\u8f6c\u6362\u6210\u4e0e\u65b0\u5143\u7d20\u76f8\u540c\u7684\u7c7b\u578b\uff0c\u5e76\u5c06\u8f6c\u6362\u540e\u7684\u5143\u7d20\u653e\u5165\u6b63\u786e\u7684\u4f4d\u7f6e\uff0c\u653e\u7f6e\u8fc7\u7a0b\u4fdd\u8bc1\u6570\u7ec4\u7684\u6709\u5e8f\u6027"}),"\n",(0,i.jsx)(e.p,{children:"\u56fe\u793a 32 * 4 = 128 \u4f4d\uff0c\u9996\u5148\u5c06 3 \u653e\u5165\u7d22\u5f15 2\uff0864 \u4f4d - 95 \u4f4d\uff09\uff0c\u7136\u540e\u5c06 2 \u653e\u7f6e\u7d22\u5f15 1\uff0c\u5c06 1 \u653e\u7f6e\u5728\u7d22\u5f15 0\uff0c\u4ece\u540e\u5411\u524d\u4f9d\u6b21\u653e\u7f6e\u5728\u5bf9\u5e94\u7684\u533a\u95f4\uff0c\u6700\u540e\u653e\u7f6e 65535 \u5143\u7d20\u5230\u7d22\u5f15 3\uff0896 \u4f4d- 127 \u4f4d\uff09\uff0c\u4fee\u6539 length \u5c5e\u6027\u4e3a 4"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5c06\u65b0\u5143\u7d20\u6dfb\u52a0\u5230\u5e95\u5c42\u6570\u7ec4\u91cc"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(27958).A+"",width:"1260",height:"297"})}),"\n",(0,i.jsx)(e.p,{children:"\u6bcf\u6b21\u5411\u6574\u6570\u96c6\u5408\u6dfb\u52a0\u65b0\u5143\u7d20\u90fd\u53ef\u80fd\u4f1a\u5f15\u8d77\u5347\u7ea7\uff0c\u800c\u6bcf\u6b21\u5347\u7ea7\u90fd\u9700\u8981\u5bf9\u5e95\u5c42\u6570\u7ec4\u4e2d\u7684\u6240\u6709\u5143\u7d20\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\uff0c\u6240\u4ee5\u5411\u6574\u6570\u96c6\u5408\u6dfb\u52a0\u65b0\u5143\u7d20\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(N)"}),"\n",(0,i.jsx)(e.p,{children:"\u5f15\u53d1\u5347\u7ea7\u7684\u65b0\u5143\u7d20\u7684\u957f\u5ea6\u603b\u662f\u6bd4\u6574\u6570\u96c6\u5408\u73b0\u6709\u6240\u6709\u5143\u7d20\u7684\u957f\u5ea6\u90fd\u5927\uff0c\u6240\u4ee5\u8fd9\u4e2a\u65b0\u5143\u7d20\u7684\u503c\u8981\u4e48\u5c31\u5927\u4e8e\u6240\u6709\u73b0\u6709\u5143\u7d20\uff0c\u8981\u4e48\u5c31\u5c0f\u4e8e\u6240\u6709\u73b0\u6709\u5143\u7d20\uff0c\u5347\u7ea7\u4e4b\u540e\u65b0\u5143\u7d20\u7684\u6446\u653e\u4f4d\u7f6e\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5728\u65b0\u5143\u7d20\u5c0f\u4e8e\u6240\u6709\u73b0\u6709\u5143\u7d20\u7684\u60c5\u51b5\u4e0b\uff0c\u65b0\u5143\u7d20\u4f1a\u88ab\u653e\u7f6e\u5728\u5e95\u5c42\u6570\u7ec4\u7684\u6700\u5f00\u5934\uff08\u7d22\u5f15 0\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u65b0\u5143\u7d20\u5927\u4e8e\u6240\u6709\u73b0\u6709\u5143\u7d20\u7684\u60c5\u51b5\u4e0b\uff0c\u65b0\u5143\u7d20\u4f1a\u88ab\u653e\u7f6e\u5728\u5e95\u5c42\u6570\u7ec4\u7684\u6700\u672b\u5c3e\uff08\u7d22\u5f15 length-1\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6574\u6570\u96c6\u5408\u5347\u7ea7\u7b56\u7565\u7684\u4f18\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u63d0\u5347\u6574\u6570\u96c6\u5408\u7684\u7075\u6d3b\u6027\uff1aC \u8bed\u8a00\u662f\u9759\u6001\u7c7b\u578b\u8bed\u8a00\uff0c\u4e3a\u4e86\u907f\u514d\u7c7b\u578b\u9519\u8bef\u901a\u5e38\u4e0d\u4f1a\u5c06\u4e24\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u503c\u653e\u5728\u540c\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u91cc\u9762\uff0c\u6574\u6570\u96c6\u5408\u53ef\u4ee5\u81ea\u52a8\u5347\u7ea7\u5e95\u5c42\u6570\u7ec4\u6765\u9002\u5e94\u65b0\u5143\u7d20\uff0c\u6240\u4ee5\u53ef\u4ee5\u968f\u610f\u7684\u6dfb\u52a0\u6574\u6570"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8282\u7ea6\u5185\u5b58\uff1a\u8981\u8ba9\u6570\u7ec4\u53ef\u4ee5\u540c\u65f6\u4fdd\u5b58 int16\u3001int32\u3001int64 \u4e09\u79cd\u7c7b\u578b\u7684\u503c\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 int64_t \u7c7b\u578b\u7684\u6570\u7ec4\u4f5c\u4e3a\u6574\u6570\u96c6\u5408\u7684\u5e95\u5c42\u5b9e\u73b0\uff0c\u4f46\u662f\u4f1a\u9020\u6210\u5185\u5b58\u6d6a\u8d39\uff0c\u6574\u6570\u96c6\u5408\u53ef\u4ee5\u786e\u4fdd\u5347\u7ea7\u64cd\u4f5c\u53ea\u4f1a\u5728\u6709\u9700\u8981\u7684\u65f6\u5019\u8fdb\u884c\uff0c\u5c3d\u91cf\u8282\u7701\u5185\u5b58"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u6574\u6570\u96c6\u5408",(0,i.jsx)(e.strong,{children:"\u4e0d\u652f\u6301\u964d\u7ea7\u64cd\u4f5c"}),"\uff0c\u4e00\u65e6\u5bf9\u6570\u7ec4\u8fdb\u884c\u4e86\u5347\u7ea7\uff0c\u7f16\u7801\u5c31\u4f1a\u4e00\u76f4\u4fdd\u6301\u5347\u7ea7\u540e\u7684\u72b6\u6001"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u538b\u7f29\u5217\u8868",children:"\u538b\u7f29\u5217\u8868"}),"\n",(0,i.jsx)(e.h4,{id:"\u5e95\u5c42\u7ed3\u6784-2",children:"\u5e95\u5c42\u7ed3\u6784"}),"\n",(0,i.jsx)(e.p,{children:"\u538b\u7f29\u5217\u8868\uff08ziplist\uff09\u662f Redis \u4e3a\u4e86\u8282\u7ea6\u5185\u5b58\u800c\u5f00\u53d1\u7684\uff0c\u662f\u5217\u8868\u952e\u548c\u54c8\u5e0c\u952e\u7684\u5e95\u5c42\u5b9e\u73b0\u4e4b\u4e00\u3002\u662f\u7531\u4e00\u7cfb\u5217\u7279\u6b8a\u7f16\u7801\u7684\u8fde\u7eed\u5185\u5b58\u5757\u7ec4\u6210\u7684\u987a\u5e8f\u578b\uff08sequential\uff09\u6570\u636e\u7ed3\u6784\uff0c\u4e00\u4e2a\u538b\u7f29\u5217\u8868\u53ef\u4ee5\u5305\u542b\u4efb\u610f\u591a\u4e2a\u8282\u70b9\uff08entry\uff09\uff0c\u6bcf\u4e2a\u8282\u70b9\u53ef\u4ee5\u4fdd\u5b58\u4e00\u4e2a\u5b57\u8282\u6570\u7ec4\u6216\u8005\u4e00\u4e2a\u6574\u6570\u503c"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(40071).A+"",width:"1232",height:"85"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"zlbytes\uff1auint32_t \u7c7b\u578b 4 \u5b57\u8282\uff0c\u8bb0\u5f55\u6574\u4e2a\u538b\u7f29\u5217\u8868\u5360\u7528\u7684\u5185\u5b58\u5b57\u8282\u6570\uff0c\u5728\u5bf9\u538b\u7f29\u5217\u8868\u8fdb\u884c\u5185\u5b58\u91cd\u5206\u914d\u6216\u8005\u8ba1\u7b97 zlend \u7684\u4f4d\u7f6e\u65f6\u4f7f\u7528"}),"\n",(0,i.jsx)(e.li,{children:"zltail\uff1auint32_t \u7c7b\u578b 4 \u5b57\u8282\uff0c\u8bb0\u5f55\u538b\u7f29\u5217\u8868\u8868\u5c3e\u8282\u70b9\u8ddd\u79bb\u8d77\u59cb\u5730\u5740\u6709\u591a\u5c11\u5b57\u8282\uff0c\u901a\u8fc7\u8fd9\u4e2a\u504f\u79fb\u91cf\u7a0b\u5e8f\u65e0\u987b\u904d\u5386\u6574\u4e2a\u538b\u7f29\u5217\u8868\u5c31\u53ef\u4ee5\u786e\u5b9a\u8868\u5c3e\u8282\u70b9\u7684\u5730\u5740"}),"\n",(0,i.jsx)(e.li,{children:"zllen\uff1auint16_t \u7c7b\u578b 2 \u5b57\u8282\uff0c\u8bb0\u5f55\u4e86\u538b\u7f29\u5217\u8868\u5305\u542b\u7684\u8282\u70b9\u6570\u91cf\uff0c\u5f53\u8be5\u5c5e\u6027\u7684\u503c\u5c0f\u4e8e UINT16_MAX (65535) \u65f6\uff0c\u8be5\u503c\u5c31\u662f\u538b\u7f29\u5217\u8868\u4e2d\u8282\u70b9\u7684\u6570\u91cf\uff1b\u5f53\u8fd9\u4e2a\u503c\u7b49\u4e8e UINT16_MAX \u65f6\u8282\u70b9\u7684\u771f\u5b9e\u6570\u91cf\u9700\u8981\u904d\u5386\u6574\u4e2a\u538b\u7f29\u5217\u8868\u624d\u80fd\u8ba1\u7b97\u5f97\u51fa"}),"\n",(0,i.jsxs)(e.li,{children:["entryX\uff1a\u5217\u8868\u8282\u70b9\uff0c\u538b\u7f29\u5217\u8868\u4e2d\u7684\u5404\u4e2a\u8282\u70b9\uff0c",(0,i.jsx)(e.strong,{children:"\u8282\u70b9\u7684\u957f\u5ea6\u7531\u8282\u70b9\u4fdd\u5b58\u7684\u5185\u5bb9\u51b3\u5b9a"})]}),"\n",(0,i.jsx)(e.li,{children:"zlend\uff1auint8_t \u7c7b\u578b 1 \u5b57\u8282\uff0c\u662f\u4e00\u4e2a\u7279\u6b8a\u503c 0xFF (255)\uff0c\u7528\u4e8e\u6807\u8bb0\u538b\u7f29\u5217\u8868\u7684\u672b\u7aef"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(16466).A+"",width:"1353",height:"166"})}),"\n",(0,i.jsx)(e.p,{children:"\u5217\u8868 zlbytes \u5c5e\u6027\u7684\u503c\u4e3a 0x50 (\u5341\u8fdb\u5236 80)\uff0c\u8868\u793a\u538b\u7f29\u5217\u8868\u7684\u603b\u957f\u4e3a 80 \u5b57\u8282\uff0c\u5217\u8868 zltail \u5c5e\u6027\u7684\u503c\u4e3a 0x3c (\u5341\u8fdb\u5236 60)\uff0c\u5047\u8bbe\u8868\u7684\u8d77\u59cb\u5730\u5740\u4e3a p\uff0c\u8ba1\u7b97\u5f97\u51fa\u8868\u5c3e\u8282\u70b9 entry3 \u7684\u5730\u5740 p + 60"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5217\u8868\u8282\u70b9",children:"\u5217\u8868\u8282\u70b9"}),"\n",(0,i.jsx)(e.p,{children:"\u5217\u8868\u8282\u70b9 entry \u7684\u6570\u636e\u7ed3\u6784\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(65240).A+"",width:"762",height:"86"})}),"\n",(0,i.jsxs)(e.p,{children:["previous_entry_length\uff1a\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u8bb0\u5f55\u4e86\u538b\u7f29\u5217\u8868\u4e2d\u524d\u4e00\u4e2a\u8282\u70b9\u7684\u957f\u5ea6\uff0c\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u6307\u9488\u8fd0\u7b97\uff0c\u6839\u636e\u5f53\u524d\u8282\u70b9\u7684\u8d77\u59cb\u5730\u5740\u6765\u8ba1\u7b97\u51fa\u524d\u4e00\u4e2a\u8282\u70b9\u7684\u8d77\u59cb\u5730\u5740\uff0c\u5b8c\u6210",(0,i.jsx)(e.strong,{children:"\u4ece\u8868\u5c3e\u5411\u8868\u5934\u904d\u5386"}),"\u64cd\u4f5c"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u524d\u4e00\u8282\u70b9\u7684\u957f\u5ea6\u5c0f\u4e8e 254 \u5b57\u8282\uff0c\u8be5\u5c5e\u6027\u7684\u957f\u5ea6\u4e3a 1 \u5b57\u8282\uff0c\u524d\u4e00\u8282\u70b9\u7684\u957f\u5ea6\u5c31\u4fdd\u5b58\u5728\u8fd9\u4e00\u4e2a\u5b57\u8282\u91cc"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u524d\u4e00\u8282\u70b9\u7684\u957f\u5ea6\u5927\u4e8e\u7b49\u4e8e 254 \u5b57\u8282\uff0c\u8be5\u5c5e\u6027\u7684\u957f\u5ea6\u4e3a 5 \u5b57\u8282\uff0c\u5176\u4e2d\u7b2c\u4e00\u5b57\u8282\u4f1a\u88ab\u8bbe\u7f6e\u4e3a 0xFE\uff08\u5341\u8fdb\u5236 254\uff09\uff0c\u4e4b\u540e\u7684\u56db\u4e2a\u5b57\u8282\u5219\u7528\u4e8e\u4fdd\u5b58\u524d\u4e00\u8282\u70b9\u7684\u957f\u5ea6"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"encoding\uff1a\u8bb0\u5f55\u4e86\u8282\u70b9\u7684 content \u5c5e\u6027\u6240\u4fdd\u5b58\u7684\u6570\u636e\u7c7b\u578b\u548c\u957f\u5ea6"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u957f\u5ea6\u4e3a 1 \u5b57\u8282\u30012 \u5b57\u8282\u6216\u8005 5 \u5b57\u8282"}),"\uff0c\u503c\u7684\u6700\u9ad8\u4f4d\u4e3a 00\u300101 \u6216\u8005 10 \u7684\u662f\u5b57\u8282\u6570\u7ec4\u7f16\u7801\uff0c\u6570\u7ec4\u7684\u957f\u5ea6\u7531\u7f16\u7801\u9664\u53bb\u6700\u9ad8\u4e24\u4f4d\u4e4b\u540e\u7684\u5176\u4ed6\u4f4d\u8bb0\u5f55\uff0c\u4e0b\u5212\u7ebf ",(0,i.jsx)(e.code,{children:"_"})," \u8868\u793a\u7559\u7a7a\uff0c\u800c ",(0,i.jsx)(e.code,{children:"b"}),"\u3001",(0,i.jsx)(e.code,{children:"x"})," \u7b49\u53d8\u91cf\u5219\u4ee3\u8868\u5b9e\u9645\u7684\u4e8c\u8fdb\u5236\u6570\u636e"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(64651).A+"",width:"1391",height:"259"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u957f\u5ea6\u4e3a 1 \u5b57\u8282\uff0c\u503c\u7684\u6700\u9ad8\u4f4d\u4e3a 11 \u7684\u662f\u6574\u6570\u7f16\u7801\uff0c\u6574\u6570\u503c\u7684\u7c7b\u578b\u548c\u957f\u5ea6\u7531\u7f16\u7801\u9664\u53bb\u6700\u9ad8\u4e24\u4f4d\u4e4b\u540e\u7684\u5176\u4ed6\u4f4d\u8bb0\u5f55"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(84272).A+"",width:"1374",height:"394"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"content\uff1a\u6bcf\u4e2a\u538b\u7f29\u5217\u8868\u8282\u70b9\u53ef\u4ee5\u4fdd\u5b58\u4e00\u4e2a\u5b57\u8282\u6570\u7ec4\u6216\u8005\u4e00\u4e2a\u6574\u6570\u503c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b57\u8282\u6570\u7ec4\u53ef\u4ee5\u662f\u4ee5\u4e0b\u4e09\u79cd\u957f\u5ea6\u7684\u5176\u4e2d\u4e00\u79cd\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u957f\u5ea6\u5c0f\u4e8e\u7b49\u4e8e ",(0,i.jsx)(e.span,{className:"katex",children:(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1.0641em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord",children:"63"}),(0,i.jsx)(e.span,{className:"mopen",children:"("}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord",children:"2"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsx)(e.span,{className:"vlist-t",children:(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.8141em"},children:(0,i.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mtight",children:"6"})})]})})})})})]}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord",children:"1"}),(0,i.jsx)(e.span,{className:"mclose",children:")"})]})]})})," \u5b57\u8282\u7684\u5b57\u8282\u6570\u7ec4"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u957f\u5ea6\u5c0f\u4e8e\u7b49\u4e8e ",(0,i.jsx)(e.span,{className:"katex",children:(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1.0641em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord",children:"16383"}),(0,i.jsx)(e.span,{className:"mopen",children:"("}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord",children:"2"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsx)(e.span,{className:"vlist-t",children:(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.8141em"},children:(0,i.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mtight",children:(0,i.jsx)(e.span,{className:"mord mtight",children:"14"})})})]})})})})})]}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord",children:"1"}),(0,i.jsx)(e.span,{className:"mclose",children:")"})]})]})})," \u5b57\u8282\u7684\u5b57\u8282\u6570\u7ec4"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u957f\u5ea6\u5c0f\u4e8e\u7b49\u4e8e ",(0,i.jsx)(e.span,{className:"katex",children:(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1.0641em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord",children:"4294967295"}),(0,i.jsx)(e.span,{className:"mopen",children:"("}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord",children:"2"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsx)(e.span,{className:"vlist-t",children:(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.8141em"},children:(0,i.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(e.span,{className:"mord mtight",children:(0,i.jsx)(e.span,{className:"mord mtight",children:"32"})})})]})})})})})]}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mord",children:"1"}),(0,i.jsx)(e.span,{className:"mclose",children:")"})]})]})})," \u5b57\u8282\u7684\u5b57\u8282\u6570\u7ec4"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6574\u6570\u503c\u5219\u53ef\u4ee5\u662f\u4ee5\u4e0b\u516d\u79cd\u957f\u5ea6\u7684\u5176\u4e2d\u4e00\u79cd\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"4 \u4f4d\u957f\uff0c\u4ecb\u4e8e 0 \u81f3 12 \u4e4b\u95f4\u7684\u65e0\u7b26\u53f7\u6574\u6570"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"1 \u5b57\u8282\u957f\u7684\u6709\u7b26\u53f7\u6574\u6570"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"3 \u5b57\u8282\u957f\u7684\u6709\u7b26\u53f7\u6574\u6570"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"int16_t \u7c7b\u578b\u6574\u6570"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"int32_t \u7c7b\u578b\u6574\u6570"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"int64_t \u7c7b\u578b\u6574\u6570"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u8fde\u9501\u66f4\u65b0",children:"\u8fde\u9501\u66f4\u65b0"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u5c06\u5728\u7279\u6b8a\u60c5\u51b5\u4e0b\u4ea7\u751f\u7684\u8fde\u7eed\u591a\u6b21\u7a7a\u95f4\u6269\u5c55\u64cd\u4f5c\u79f0\u4e4b\u4e3a\u8fde\u9501\u66f4\u65b0\uff08cascade update\uff09"}),"\n",(0,i.jsx)(e.p,{children:"\u5047\u8bbe\u5728\u4e00\u4e2a\u538b\u7f29\u5217\u8868\u4e2d\uff0c\u6709\u591a\u4e2a\u8fde\u7eed\u7684\u3001\u957f\u5ea6\u4ecb\u4e8e 250 \u5230 253 \u5b57\u8282\u4e4b\u95f4\u7684\u8282\u70b9 e1 \u81f3 eN\u3002\u5c06\u4e00\u4e2a\u957f\u5ea6\u5927\u4e8e\u7b49\u4e8e 254 \u5b57\u8282\u7684\u65b0\u8282\u70b9 new \u8bbe\u7f6e\u4e3a\u538b\u7f29\u5217\u8868\u7684\u5934\u8282\u70b9\uff0cnew \u5c31\u6210\u4e3a e1 \u7684\u524d\u7f6e\u8282\u70b9\u3002e1 \u7684 previous_entry_length \u5c5e\u6027\u4ec5\u4e3a 1 \u5b57\u8282\uff0c\u65e0\u6cd5\u4fdd\u5b58\u65b0\u8282\u70b9 new \u7684\u957f\u5ea6\uff0c\u6240\u4ee5\u8981\u5bf9\u538b\u7f29\u5217\u8868\u6267\u884c\u7a7a\u95f4\u91cd\u5206\u914d\u64cd\u4f5c\uff0c\u5e76\u5c06 e1 \u8282\u70b9\u7684 previous_entry_length \u5c5e\u6027\u4ece 1 \u5b57\u8282\u957f\u6269\u5c55\u4e3a 5 \u5b57\u8282\u957f\u3002\u7531\u4e8e e1 \u539f\u672c\u7684\u957f\u5ea6\u4ecb\u4e8e 250 \u81f3 253 \u5b57\u8282\u4e4b\u95f4\uff0c\u6240\u4ee5\u6269\u5c55\u540e e1 \u7684\u957f\u5ea6\u5c31\u53d8\u6210\u4e86 254 \u81f3 257 \u5b57\u8282\u4e4b\u95f4\uff0c\u5bfc\u81f4 e2 \u7684  previous_entry_length \u5c5e\u6027\u65e0\u6cd5\u4fdd\u5b58 e1 \u7684\u957f\u5ea6\uff0c\u7a0b\u5e8f\u9700\u8981\u4e0d\u65ad\u5730\u5bf9\u538b\u7f29\u5217\u8868\u6267\u884c\u7a7a\u95f4\u91cd\u5206\u914d\u64cd\u4f5c\uff0c\u76f4\u5230 eN \u4e3a\u6b62"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(32435).A+"",width:"1151",height:"245"})}),"\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u8282\u70b9\u4e5f\u53ef\u80fd\u4f1a\u5f15\u53d1\u8fde\u9501\u66f4\u65b0\uff0cbig.length >= 254\uff0csmall.length < 254\uff0c\u5220\u9664 small \u8282\u70b9"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(57944).A+"",width:"1063",height:"131"})}),"\n",(0,i.jsx)(e.p,{children:"\u8fde\u9501\u66f4\u65b0\u5728\u6700\u574f\u60c5\u51b5\u4e0b\u9700\u8981\u5bf9\u538b\u7f29\u5217\u8868\u6267\u884c N \u6b21\u7a7a\u95f4\u91cd\u5206\u914d\uff0c\u6bcf\u6b21\u91cd\u5206\u914d\u7684\u6700\u574f\u590d\u6742\u5ea6\u4e3a O(N)\uff0c\u6240\u4ee5\u8fde\u9501\u66f4\u65b0\u7684\u6700\u574f\u590d\u6742\u5ea6\u4e3a O(N^2)"}),"\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\uff1a\u5c3d\u7ba1\u8fde\u9501\u66f4\u65b0\u7684\u590d\u6742\u5ea6\u8f83\u9ad8\uff0c\u4f46\u51fa\u73b0\u7684\u8bb0\u5f55\u662f\u975e\u5e38\u4f4e\u7684\uff0c\u5373\u4f7f\u51fa\u73b0\u53ea\u8981\u88ab\u66f4\u65b0\u7684\u8282\u70b9\u6570\u91cf\u4e0d\u591a\uff0c\u5c31\u4e0d\u4f1a\u5bf9\u6027\u80fd\u9020\u6210\u5f71\u54cd"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u6570\u636e\u7c7b\u578b",children:"\u6570\u636e\u7c7b\u578b"}),"\n",(0,i.jsx)(e.h3,{id:"redisobj",children:"redisObj"}),"\n",(0,i.jsx)(e.h4,{id:"\u5bf9\u8c61\u7cfb\u7edf",children:"\u5bf9\u8c61\u7cfb\u7edf"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u4f7f\u7528\u5bf9\u8c61\u6765\u8868\u793a\u6570\u636e\u5e93\u4e2d\u7684\u952e\u548c\u503c\uff0c\u5f53\u5728 Redis \u6570\u636e\u5e93\u4e2d\u65b0\u521b\u5efa\u4e00\u4e2a\u952e\u503c\u5bf9\u65f6\u81f3\u5c11\u4f1a\u521b\u5efa\u4e24\u4e2a\u5bf9\u8c61\uff0c\u4e00\u4e2a\u5bf9\u8c61\u7528\u4f5c\u952e\u503c\u5bf9\u7684\u952e\uff08",(0,i.jsx)(e.strong,{children:"\u952e\u5bf9\u8c61"}),"\uff09\uff0c\u53e6\u4e00\u4e2a\u5bf9\u8c61\u7528\u4f5c\u952e\u503c\u5bf9\u7684\u503c\uff08",(0,i.jsx)(e.strong,{children:"\u503c\u5bf9\u8c61"}),"\uff09"]}),"\n",(0,i.jsx)(e.p,{children:"Redis \u4e2d\u5bf9\u8c61\u7531\u4e00\u4e2a redisObject \u7ed3\u6784\u8868\u793a\uff0c\u8be5\u7ed3\u6784\u4e2d\u548c\u4fdd\u5b58\u6570\u636e\u6709\u5173\u7684\u4e09\u4e2a\u5c5e\u6027\u5206\u522b\u662f type\u3001 encoding\u3001ptr\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct redisObiect {\n\t// \u7c7b\u578b\n\tunsigned type:4;\n\t// \u7f16\u7801\n\tunsigned encoding:4;\n\t// \u6307\u5411\u5e95\u5c42\u6570\u636e\u7ed3\u6784\u7684\u6307\u9488\n\tvoid *ptr;\n    \n    // ....\n} robj;\n"})}),"\n",(0,i.jsx)(e.p,{children:"Redis \u5e76\u6ca1\u6709\u76f4\u63a5\u4f7f\u7528\u6570\u636e\u7ed3\u6784\u6765\u5b9e\u73b0\u952e\u503c\u5bf9\u6570\u636e\u5e93\uff0c\u800c\u662f\u57fa\u4e8e\u8fd9\u4e9b\u6570\u636e\u7ed3\u6784\u521b\u5efa\u4e86\u4e00\u4e2a\u5bf9\u8c61\u7cfb\u7edf\uff0c\u5305\u542b\u5b57\u7b26\u4e32\u5bf9\u8c61\u3001\u5217\u8868\u5bf9\u8c61\u3001\u54c8\u5e0c\u5bf9\u8c61\u3001\u96c6\u5408\u5bf9\u8c61\u548c\u6709\u5e8f\u96c6\u5408\u5bf9\u8c61\u8fd9\u4e94\u79cd\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u800c\u6bcf\u79cd\u5bf9\u8c61\u53c8\u901a\u8fc7\u4e0d\u540c\u7684\u7f16\u7801\u6620\u5c04\u5230\u4e0d\u540c\u7684\u5e95\u5c42\u6570\u636e\u7ed3\u6784"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u662f\u4e00\u4e2a Map \u7c7b\u578b\uff0c\u5176\u4e2d\u6240\u6709\u7684\u6570\u636e\u90fd\u662f\u91c7\u7528 key : value \u7684\u5f62\u5f0f\u5b58\u50a8\uff0c",(0,i.jsx)(e.strong,{children:"\u952e\u5bf9\u8c61\u90fd\u662f\u5b57\u7b26\u4e32\u5bf9\u8c61"}),"\uff0c\u800c\u503c\u5bf9\u8c61\u6709\u4e94\u79cd\u57fa\u672c\u7c7b\u578b\u548c\u4e09\u79cd\u9ad8\u7ea7\u7c7b\u578b\u5bf9\u8c61"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(77923).A+"",width:"1397",height:"596"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5bf9\u4e00\u4e2a\u6570\u636e\u5e93\u952e\u6267\u884c TYPE \u547d\u4ee4\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4e3a\u6570\u636e\u5e93\u952e\u5bf9\u5e94\u7684\u503c\u5bf9\u8c61\u7684\u7c7b\u578b\uff0c\u800c\u4e0d\u662f\u952e\u5bf9\u8c61\u7684\u7c7b\u578b"}),"\n",(0,i.jsx)(e.li,{children:"\u5bf9\u4e00\u4e2a\u6570\u636e\u5e93\u952e\u6267\u884c OBJECT ENCODING \u547d\u4ee4\uff0c\u67e5\u770b\u6570\u636e\u5e93\u952e\u5bf9\u5e94\u7684\u503c\u5bf9\u8c61\u7684\u7f16\u7801"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u547d\u4ee4\u591a\u6001",children:"\u547d\u4ee4\u591a\u6001"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u4e2d\u7528\u4e8e\u64cd\u4f5c\u952e\u7684\u547d\u4ee4\u5206\u4e3a\u4e24\u79cd\u7c7b\u578b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e00\u79cd\u547d\u4ee4\u53ef\u4ee5\u5bf9\u4efb\u4f55\u7c7b\u578b\u7684\u952e\u6267\u884c\uff0c\u6bd4\u5982\u8bf4 DEL \u3001EXPIRE\u3001RENAME\u3001 TYPE \u7b49\uff08\u57fa\u4e8e\u7c7b\u578b\u7684\u591a\u6001\uff09"}),"\n",(0,i.jsxs)(e.li,{children:["\u53ea\u80fd\u5bf9\u7279\u5b9a\u7c7b\u578b\u7684\u952e\u6267\u884c\uff0c\u6bd4\u5982 SET \u53ea\u80fd\u5bf9\u5b57\u7b26\u4e32\u952e\u6267\u884c\u3001HSET \u5bf9\u54c8\u5e0c\u952e\u6267\u884c\u3001SADD \u5bf9\u96c6\u5408\u952e\u6267\u884c\uff0c\u5982\u679c\u7c7b\u578b\u6b65\u5339\u914d\u4f1a\u62a5\u7c7b\u578b\u9519\u8bef\uff1a ",(0,i.jsx)(e.code,{children:"(error) WRONGTYPE Operation against a key holding the wrong kind of value"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Redis \u4e3a\u4e86\u786e\u4fdd\u53ea\u6709\u6307\u5b9a\u7c7b\u578b\u7684\u952e\u53ef\u4ee5\u6267\u884c\u67d0\u4e9b\u7279\u5b9a\u7684\u547d\u4ee4\uff0c\u5728\u6267\u884c\u7c7b\u578b\u7279\u5b9a\u7684\u547d\u4ee4\u4e4b\u524d\uff0c\u5148\u901a\u8fc7\u503c\u5bf9\u8c61 redisObject \u7ed3\u6784 type \u5c5e\u6027\u68c0\u67e5\u64cd\u4f5c\u7c7b\u578b\u662f\u5426\u6b63\u786e\uff0c\u7136\u540e\u518d\u51b3\u5b9a\u662f\u5426\u6267\u884c\u6307\u5b9a\u7684\u547d\u4ee4"}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u4e8e\u591a\u6001\u547d\u4ee4\uff0c\u6bd4\u5982\u5217\u8868\u5bf9\u8c61\u6709 ziplist \u548c linkedlist \u4e24\u79cd\u5b9e\u73b0\u65b9\u5f0f\uff0c\u901a\u8fc7 redisObject \u7ed3\u6784 encoding \u5c5e\u6027\u786e\u5b9a\u5177\u4f53\u7684\u7f16\u7801\u7c7b\u578b\uff0c\u5e95\u5c42\u8c03\u7528\u5bf9\u5e94\u7684 API \u5b9e\u73b0\u5177\u4f53\u7684\u64cd\u4f5c\uff08\u57fa\u4e8e\u7f16\u7801\u7684\u591a\u6001\uff09"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5185\u5b58\u56de\u6536",children:"\u5185\u5b58\u56de\u6536"}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u8c61\u7684\u6574\u4e2a\u751f\u547d\u5468\u671f\u53ef\u4ee5\u5212\u5206\u4e3a\u521b\u5efa\u5bf9\u8c61\u3001 \u64cd\u4f5c\u5bf9\u8c61\u3001 \u91ca\u653e\u5bf9\u8c61\u4e09\u4e2a\u9636\u6bb5"}),"\n",(0,i.jsx)(e.p,{children:"C \u8bed\u8a00\u6ca1\u6709\u81ea\u52a8\u56de\u6536\u5185\u5b58\u7684\u529f\u80fd\uff0c\u6240\u4ee5 Redis \u5728\u5bf9\u8c61\u7cfb\u7edf\u4e2d\u6784\u5efa\u4e86\u5f15\u7528\u8ba1\u6570\uff08reference counting\uff09\u6280\u672f\u5b9e\u73b0\u7684\u5185\u5b58\u56de\u6536\u673a\u5236\uff0c\u7a0b\u5e8f\u53ef\u4ee5\u8ddf\u8e2a\u5bf9\u8c61\u7684\u5f15\u7528\u8ba1\u6570\u4fe1\u606f\uff0c\u5728\u9002\u5f53\u7684\u65f6\u5019\u81ea\u52a8\u91ca\u653e\u5bf9\u8c61\u5e76\u8fdb\u884c\u5185\u5b58\u56de\u6536"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct redisObiect {\n\t// \u5f15\u7528\u8ba1\u6570\n\tint refcount;\n} robj;\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u8c61\u7684\u5f15\u7528\u8ba1\u6570\u4fe1\u606f\u4f1a\u968f\u7740\u5bf9\u8c61\u7684\u4f7f\u7528\u72b6\u6001\u800c\u4e0d\u65ad\u53d8\u5316\uff0c\u521b\u5efa\u65f6\u5f15\u7528\u8ba1\u6570 refcount \u521d\u59cb\u5316\u4e3a 1\uff0c\u6bcf\u6b21\u88ab\u4e00\u4e2a\u65b0\u7a0b\u5e8f\u4f7f\u7528\u65f6\u5f15\u7528\u8ba1\u6570\u52a0 1\uff0c\u5f53\u5bf9\u8c61\u4e0d\u518d\u88ab\u4e00\u4e2a\u7a0b\u5e8f\u4f7f\u7528\u65f6\u5f15\u7528\u8ba1\u6570\u503c\u4f1a\u88ab\u51cf 1\uff0c\u5f53\u5bf9\u8c61\u7684\u5f15\u7528\u8ba1\u6570\u503c\u53d8\u4e3a 0 \u65f6\uff0c\u5bf9\u8c61\u6240\u5360\u7528\u7684\u5185\u5b58\u4f1a\u88ab\u91ca\u653e"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5bf9\u8c61\u5171\u4eab",children:"\u5bf9\u8c61\u5171\u4eab"}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u8c61\u7684\u5f15\u7528\u8ba1\u6570\u5c5e\u6027\u5e26\u6709\u5bf9\u8c61\u5171\u4eab\u7684\u4f5c\u7528\uff0c\u5171\u4eab\u5bf9\u8c61\u673a\u5236\u66f4\u8282\u7ea6\u5185\u5b58\uff0c\u6570\u636e\u5e93\u4e2d\u4fdd\u5b58\u7684\u76f8\u540c\u503c\u5bf9\u8c61\u8d8a\u591a\uff0c\u8282\u7ea6\u7684\u5185\u5b58\u5c31\u8d8a\u591a"}),"\n",(0,i.jsx)(e.p,{children:"\u8ba9\u591a\u4e2a\u952e\u5171\u4eab\u4e00\u4e2a\u5bf9\u8c61\u7684\u6b65\u9aa4\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5c06\u6570\u636e\u5e93\u952e\u7684\u503c\u6307\u9488\u6307\u5411\u4e00\u4e2a\u73b0\u6709\u7684\u503c\u5bf9\u8c61"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5c06\u88ab\u5171\u4eab\u7684\u503c\u5bf9\u8c61\u7684\u5f15\u7528\u8ba1\u6570\u589e\u4e00"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(15524).A+"",width:"523",height:"257"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u5728\u521d\u59cb\u5316\u670d\u52a1\u5668\u65f6\u521b\u5efa\u4e00\u4e07\u4e2a\uff08\u914d\u7f6e\u6587\u4ef6\u53ef\u4ee5\u4fee\u6539\uff09\u5b57\u7b26\u4e32\u5bf9\u8c61\uff0c\u5305\u542b\u4e86",(0,i.jsx)(e.strong,{children:"\u4ece 0 \u5230 9999 \u7684\u6240\u6709\u6574\u6570\u503c"}),"\uff0c\u5f53\u670d\u52a1\u5668\u9700\u8981\u7528\u5230\u503c\u4e3a 0 \u5230 9999 \u7684\u5b57\u7b26\u4e32\u5bf9\u8c61\u65f6\uff0c\u670d\u52a1\u5668\u5c31\u4f1a\u4f7f\u7528\u8fd9\u4e9b\u5171\u4eab\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u65b0\u521b\u5efa\u5bf9\u8c61"]}),"\n",(0,i.jsx)(e.p,{children:"\u6bd4\u5982\u521b\u5efa\u4e00\u4e2a\u503c\u4e3a 100 \u7684\u952e A\uff0c\u5e76\u4f7f\u7528 OBJECT REFCOUNT \u547d\u4ee4\u67e5\u770b\u952e A \u7684\u503c\u5bf9\u8c61\u7684\u5f15\u7528\u8ba1\u6570\uff0c\u4f1a\u53d1\u73b0\u503c\u5bf9\u8c61\u7684\u5f15\u7528\u8ba1\u6570\u4e3a 2\uff0c\u5f15\u7528\u8fd9\u4e2a\u503c\u5bf9\u8c61\u7684\u4e24\u4e2a\u7a0b\u5e8f\u5206\u522b\u662f\u6301\u6709\u8fd9\u4e2a\u503c\u5bf9\u8c61\u7684\u670d\u52a1\u5668\u7a0b\u5e8f\uff0c\u4ee5\u53ca\u5171\u4eab\u8fd9\u4e2a\u503c\u5bf9\u8c61\u7684\u952e A"}),"\n",(0,i.jsx)(e.p,{children:"\u5171\u4eab\u5bf9\u8c61\u5728\u5d4c\u5957\u4e86\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684\u5bf9\u8c61\uff08linkedlist \u7f16\u7801\u7684\u5217\u8868\u3001hashtable \u7f16\u7801\u7684\u54c8\u5e0c\u3001zset \u7f16\u7801\u7684\u6709\u5e8f\u96c6\u5408\uff09\u4e2d\u4e5f\u80fd\u4f7f\u7528"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u4e0d\u5171\u4eab\u5305\u542b\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684\u539f\u56e0\uff1a\u9a8c\u8bc1\u5171\u4eab\u5bf9\u8c61\u548c\u76ee\u6807\u5bf9\u8c61\u662f\u5426\u76f8\u540c\u7684\u590d\u6742\u5ea6\u8d8a\u9ad8\uff0c\u6d88\u8017\u7684 CPU \u65f6\u95f4\u4e5f\u4f1a\u8d8a\u591a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6574\u6570\u503c\u7684\u5b57\u7b26\u4e32\u5bf9\u8c61\uff0c \u9a8c\u8bc1\u64cd\u4f5c\u7684\u590d\u6742\u5ea6\u4e3a O(1)"}),"\n",(0,i.jsx)(e.li,{children:"\u5b57\u7b26\u4e32\u503c\u7684\u5b57\u7b26\u4e32\u5bf9\u8c61\uff0c \u9a8c\u8bc1\u64cd\u4f5c\u7684\u590d\u6742\u5ea6\u4e3a O(N)"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u5171\u4eab\u5bf9\u8c61\u662f\u5305\u542b\u4e86\u591a\u4e2a\u503c\uff08\u6216\u8005\u5bf9\u8c61\u7684\uff09\u5bf9\u8c61\uff0c\u6bd4\u5982\u5217\u8868\u5bf9\u8c61\u6216\u8005\u54c8\u5e0c\u5bf9\u8c61\uff0c\u9a8c\u8bc1\u64cd\u4f5c\u7684\u590d\u6742\u5ea6\u4e3a O(N^2)"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u7a7a\u8f6c\u65f6\u957f",children:"\u7a7a\u8f6c\u65f6\u957f"}),"\n",(0,i.jsx)(e.p,{children:"redisObject \u7ed3\u6784\u5305\u542b\u4e00\u4e2a lru \u5c5e\u6027\uff0c\u8be5\u5c5e\u6027\u8bb0\u5f55\u4e86\u5bf9\u8c61\u6700\u540e\u4e00\u6b21\u88ab\u547d\u4ee4\u7a0b\u5e8f\u8bbf\u95ee\u7684\u65f6\u95f4"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct redisObiect {\n\tunsigned lru:22; \n} robj;\n"})}),"\n",(0,i.jsx)(e.p,{children:"OBJECT IDLETIME \u547d\u4ee4\u53ef\u4ee5\u6253\u5370\u51fa\u7ed9\u5b9a\u952e\u7684\u7a7a\u8f6c\u65f6\u957f\uff0c\u8be5\u503c\u5c31\u662f\u901a\u8fc7\u5c06\u5f53\u524d\u65f6\u95f4\u51cf\u53bb\u952e\u7684\u503c\u5bf9\u8c61\u7684 lru \u65f6\u95f4\u8ba1\u7b97\u5f97\u51fa\u7684\uff0c\u8fd9\u4e2a\u547d\u4ee4\u5728\u8bbf\u95ee\u952e\u7684\u503c\u5bf9\u8c61\u65f6\uff0c\u4e0d\u4f1a\u4fee\u6539\u503c\u5bf9\u8c61\u7684 lru \u5c5e\u6027"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'redis> OBJECT IDLETIME msg\n(integer) 10\n# \u7b49\u5f85\u4e00\u5206\u949f\nredis> OBJECT IDLETIME msg\n(integer) 70\n# \u8bbf\u95ee msg\nredis> GET msg\n"hello world"\n# \u952e\u5904\u4e8e\u6d3b\u8dc3\u72b6\u6001\uff0c\u7a7a\u8f6c\u65f6\u957f\u4e3a 0\nredis> OBJECT IDLETIME msg\n(integer) 0\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u7a7a\u8f6c\u65f6\u957f\u7684\u4f5c\u7528\uff1a\u5982\u679c\u670d\u52a1\u5668\u5f00\u542f maxmemory \u9009\u9879\uff0c\u5e76\u4e14\u56de\u6536\u5185\u5b58\u7684\u7b97\u6cd5\u4e3a volatile-lru \u6216\u8005 allkeys-lru\uff0c\u90a3\u4e48\u5f53\u670d\u52a1\u5668\u5360\u7528\u7684\u5185\u5b58\u6570\u8d85\u8fc7\u4e86 maxmemory \u6240\u8bbe\u7f6e\u7684\u4e0a\u9650\u503c\u65f6\uff0c\u7a7a\u8f6c\u65f6\u957f\u8f83\u9ad8\u7684\u90a3\u90e8\u5206\u952e\u4f1a\u4f18\u5148\u88ab\u670d\u52a1\u5668\u91ca\u653e\uff0c\u4ece\u800c\u56de\u6536\u5185\u5b58\uff08LRU \u7b97\u6cd5\uff09"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"string",children:"string"}),"\n",(0,i.jsx)(e.h4,{id:"\u7b80\u4ecb-1",children:"\u7b80\u4ecb"}),"\n",(0,i.jsx)(e.p,{children:"\u5b58\u50a8\u7684\u6570\u636e\uff1a\u5355\u4e2a\u6570\u636e\uff0c\u6700\u7b80\u5355\u7684\u6570\u636e\u5b58\u50a8\u7c7b\u578b\uff0c\u4e5f\u662f\u6700\u5e38\u7528\u7684\u6570\u636e\u5b58\u50a8\u7c7b\u578b\uff0c\u5b9e\u8d28\u4e0a\u662f\u5b58\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0cstring \u7c7b\u578b\u662f\u4e8c\u8fdb\u5236\u5b89\u5168\u7684\uff0c\u53ef\u4ee5\u5305\u542b\u4efb\u4f55\u6570\u636e\uff0c\u6bd4\u5982\u56fe\u7247\u6216\u8005\u5e8f\u5217\u5316\u7684\u5bf9\u8c61"}),"\n",(0,i.jsx)(e.p,{children:"\u5b58\u50a8\u6570\u636e\u7684\u683c\u5f0f\uff1a\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\u4fdd\u5b58\u4e00\u4e2a\u6570\u636e\uff0c\u6bcf\u4e00\u4e2a\u7a7a\u95f4\u4e2d\u53ea\u80fd\u4fdd\u5b58\u4e00\u4e2a\u5b57\u7b26\u4e32\u4fe1\u606f"}),"\n",(0,i.jsx)(e.p,{children:"\u5b58\u50a8\u5185\u5bb9\uff1a\u901a\u5e38\u4f7f\u7528\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u5b57\u7b26\u4e32\u4ee5\u6574\u6570\u7684\u5f62\u5f0f\u5c55\u793a\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u6570\u5b57\u64cd\u4f5c\u4f7f\u7528"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(6644).A+"",width:"556",height:"171"})}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u6240\u6709\u64cd\u4f5c\u90fd\u662f",(0,i.jsx)(e.strong,{children:"\u539f\u5b50\u6027"}),"\u7684\uff0c\u91c7\u7528",(0,i.jsx)(e.strong,{children:"\u5355\u7ebf\u7a0b"}),"\u673a\u5236\uff0c\u547d\u4ee4\u662f\u5355\u4e2a\u987a\u5e8f\u6267\u884c\uff0c\u65e0\u9700\u8003\u8651\u5e76\u53d1\u5e26\u6765\u5f71\u54cd\uff0c\u539f\u5b50\u6027\u5c31\u662f\u6709\u4e00\u4e2a\u5931\u8d25\u5219\u90fd\u5931\u8d25"]}),"\n",(0,i.jsx)(e.p,{children:"\u5b57\u7b26\u4e32\u5bf9\u8c61\u53ef\u4ee5\u662f int\u3001raw\u3001embstr \u4e09\u79cd\u5b9e\u73b0\u65b9\u5f0f"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u64cd\u4f5c",children:"\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"\u6307\u4ee4\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"set key value\t\t\t#\u6dfb\u52a0/\u4fee\u6539\u6570\u636e\u6dfb\u52a0/\u4fee\u6539\u6570\u636e\ndel key\t\t\t\t\t#\u5220\u9664\u6570\u636e\nsetnx key value\t\t\t#\u5224\u5b9a\u6027\u6dfb\u52a0\u6570\u636e\uff0c\u952e\u503c\u4e3a\u7a7a\u5219\u8bbe\u6dfb\u52a0\nmset k1 v1 k2 v2...\t\t#\u6dfb\u52a0/\u4fee\u6539\u591a\u4e2a\u6570\u636e\uff0cm\uff1aMultiple\nappend key value\t\t#\u8ffd\u52a0\u4fe1\u606f\u5230\u539f\u59cb\u4fe1\u606f\u540e\u90e8\uff08\u5982\u679c\u539f\u59cb\u4fe1\u606f\u5b58\u5728\u5c31\u8ffd\u52a0\uff0c\u5426\u5219\u65b0\u5efa\uff09\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"get key\t\t\t\t\t#\u83b7\u53d6\u6570\u636e\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u8fd4\u56de\u7a7a\uff08nil\uff09\nmget key1 key2...\t\t#\u83b7\u53d6\u591a\u4e2a\u6570\u636e\nstrlen key\t\t\t\t#\u83b7\u53d6\u6570\u636e\u5b57\u7b26\u4e2a\u6570\uff08\u5b57\u7b26\u4e32\u957f\u5ea6\uff09\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bbe\u7f6e\u6570\u503c\u6570\u636e\u589e\u52a0/\u51cf\u5c11\u6307\u5b9a\u8303\u56f4\u7684\u503c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"incr key\t\t\t\t\t#key++\nincrby key increment\t\t#key+increment\nincrbyfloat key increment\t#\u5bf9\u5c0f\u6570\u64cd\u4f5c\ndecr key\t\t\t\t\t#key--\ndecrby key increment\t\t#key-increment\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bbe\u7f6e\u6570\u636e\u5177\u6709\u6307\u5b9a\u7684\u751f\u547d\u5468\u671f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"setex key seconds value  \t\t#\u8bbe\u7f6ekey-value\u5b58\u6d3b\u65f6\u95f4\uff0cseconds\u5355\u4f4d\u662f\u79d2\npsetex key milliseconds value\t#\u6beb\u79d2\u7ea7\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\u4e8b\u9879\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u64cd\u4f5c\u4e0d\u6210\u529f\u7684\u53cd\u9988\u4e0e\u6570\u636e\u6b63\u5e38\u64cd\u4f5c\u4e4b\u95f4\u7684\u5dee\u5f02"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8868\u793a\u8fd0\u884c\u7ed3\u679c\u662f\u5426\u6210\u529f"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"(integer) 0  \u2192 false \uff0c\u5931\u8d25"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"(integer) 1  \u2192 true\uff0c\u6210\u529f"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8868\u793a\u8fd0\u884c\u7ed3\u679c\u503c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"(integer) 3  \u2192 3 \u4e2a"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"(integer) 1  \u2192 1 \u4e2a"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u672a\u83b7\u53d6\u5230\u65f6\uff0c\u5bf9\u5e94\u7684\u6570\u636e\u4e3a\uff08nil\uff09\uff0c\u7b49\u540c\u4e8enull"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u6570\u636e\u6700\u5927\u5b58\u50a8\u91cf"}),"\uff1a512MB"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["string \u5728 Redis \u5185\u90e8\u5b58\u50a8\u9ed8\u8ba4\u5c31\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5f53\u9047\u5230\u589e\u51cf\u7c7b\u64cd\u4f5c incr\uff0cdecr \u65f6",(0,i.jsx)(e.strong,{children:"\u4f1a\u8f6c\u6210\u6570\u503c\u578b"}),"\u8fdb\u884c\u8ba1\u7b97"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6309\u6570\u503c\u8fdb\u884c\u64cd\u4f5c\u7684\u6570\u636e\uff0c\u5982\u679c\u539f\u59cb\u6570\u636e\u4e0d\u80fd\u8f6c\u6210\u6570\u503c\uff0c\u6216\u8d85\u8d8a\u4e86Redis \u6570\u503c\u4e0a\u9650\u8303\u56f4\uff0c\u5c06\u62a5\u9519\n9223372036854775807\uff08java \u4e2d Long \u578b\u6570\u636e\u6700\u5927\u503c\uff0cLong.MAX_VALUE\uff09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Redis \u53ef\u7528\u4e8e\u63a7\u5236\u6570\u636e\u5e93\u8868\u4e3b\u952e ID\uff0c\u4e3a\u6570\u636e\u5e93\u8868\u4e3b\u952e\u63d0\u4f9b\u751f\u6210\u7b56\u7565\uff0c\u4fdd\u969c\u6570\u636e\u5e93\u8868\u7684\u4e3b\u952e\u552f\u4e00\u6027"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5355\u6570\u636e\u548c\u591a\u6570\u636e\u7684\u9009\u62e9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5355\u6570\u636e\u6267\u884c 3 \u6761\u6307\u4ee4\u7684\u8fc7\u7a0b\uff1a3 \u6b21\u53d1\u9001 + 3 \u6b21\u5904\u7406 + 3 \u6b21\u8fd4\u56de"}),"\n",(0,i.jsx)(e.li,{children:"\u591a\u6570\u636e\u6267\u884c 1 \u6761\u6307\u4ee4\u7684\u8fc7\u7a0b\uff1a1 \u6b21\u53d1\u9001 + 3 \u6b21\u5904\u7406 + 1 \u6b21\u8fd4\u56de\uff08\u53d1\u9001\u548c\u8fd4\u56de\u7684\u4e8b\u4ef6\u7565\u9ad8\u4e8e\u5355\u6570\u636e\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(83461).A+"",width:"2114",height:"1022"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5b9e\u73b0",children:"\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.p,{children:"\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684\u7f16\u7801\u53ef\u4ee5\u662f int\u3001raw\u3001embstr \u4e09\u79cd"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["int\uff1a\u5b57\u7b26\u4e32\u5bf9\u8c61\u4fdd\u5b58\u7684\u662f",(0,i.jsx)(e.strong,{children:"\u6574\u6570\u503c"}),"\uff0c\u5e76\u4e14\u6574\u6570\u503c\u53ef\u4ee5\u7528 long \u7c7b\u578b\u6765\u8868\u793a\uff0c\u90a3\u4e48\u5bf9\u8c61\u4f1a\u5c06\u6574\u6570\u503c\u4fdd\u5b58\u5728\u5b57\u7b26\u4e32\u5bf9\u8c61\u7ed3\u6784\u7684 ptr \u5c5e\u6027\u9762\uff08\u5c06 void * \u8f6c\u6362\u6210 long)\uff0c\u5e76\u5c06\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684\u7f16\u7801\u8bbe\u7f6e\u4e3a int\uff08\u6d6e\u70b9\u6570\u7528\u53e6\u5916\u4e24\u79cd\u65b9\u5f0f\uff09"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(77821).A+"",width:"547",height:"284"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"raw\uff1a\u5b57\u7b26\u4e32\u5bf9\u8c61\u4fdd\u5b58\u7684\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u503c\uff0c\u5e76\u4e14\u503c\u7684\u957f\u5ea6\u5927\u4e8e 39 \u5b57\u8282\uff0c\u90a3\u4e48\u5bf9\u8c61\u5c06\u4f7f\u7528\u7b80\u5355\u52a8\u6001\u5b57\u7b26\u4e32\uff08SDS\uff09\u6765\u4fdd\u5b58\u8be5\u503c\uff0c\u5e76\u5c06\u5bf9\u8c61\u7684\u7f16\u7801\u8bbe\u7f6e\u4e3a raw"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(32132).A+"",width:"1380",height:"300"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"embstr\uff1a\u5b57\u7b26\u4e32\u5bf9\u8c61\u4fdd\u5b58\u7684\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u503c\uff0c\u5e76\u4e14\u503c\u7684\u957f\u5ea6\u5c0f\u4e8e\u7b49\u4e8e 39 \u5b57\u8282\uff0c\u90a3\u4e48\u5bf9\u8c61\u5c06\u4f7f\u7528 embstr \u7f16\u7801\u7684\u65b9\u5f0f\u6765\u4fdd\u5b58\u8fd9\u4e2a\u5b57\u7b26\u4e32\u503c\uff0c\u5e76\u5c06\u5bf9\u8c61\u7684\u7f16\u7801\u8bbe\u7f6e\u4e3a embstr"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(37359).A+"",width:"1372",height:"171"})}),"\n",(0,i.jsxs)(e.p,{children:["\u4e0a\u56fe\u6240\u793a\uff0cembstr \u4e0e raw \u90fd\u4f7f\u7528\u4e86 redisObject \u548c sdshdr \u6765\u8868\u793a\u5b57\u7b26\u4e32\u5bf9\u8c61\uff0c\u4f46\u662f raw \u9700\u8981\u8c03\u7528\u4e24\u6b21\u5185\u5b58\u5206\u914d\u51fd\u6570\u5206\u522b\u521b\u5efa\u4e24\u79cd\u7ed3\u6784\uff0cembstr \u53ea\u9700\u8981\u4e00\u6b21\u5185\u5b58\u5206\u914d\u6765\u5206\u914d\u4e00\u5757",(0,i.jsx)(e.strong,{children:"\u8fde\u7eed\u7684\u7a7a\u95f4"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"embstr \u662f\u7528\u4e8e\u4fdd\u5b58\u77ed\u5b57\u7b26\u4e32\u7684\u4e00\u79cd\u7f16\u7801\u65b9\u5f0f\uff0c\u5bf9\u6bd4 raw \u7684\u4f18\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5185\u5b58\u5206\u914d\u6b21\u6570\u4ece\u4e24\u6b21\u964d\u4f4e\u4e3a\u4e00\u6b21\uff0c\u540c\u6837\u91ca\u653e\u5185\u5b58\u7684\u6b21\u6570\u4e5f\u4ece\u4e24\u6b21\u53d8\u4e3a\u4e00\u6b21"}),"\n",(0,i.jsx)(e.li,{children:"embstr \u7f16\u7801\u7684\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684\u6570\u636e\u90fd\u4fdd\u5b58\u5728\u540c\u4e00\u5757\u8fde\u7eed\u5185\u5b58\uff0c\u6240\u4ee5\u6bd4 raw \u7f16\u7801\u80fd\u591f\u66f4\u597d\u5730\u5229\u7528\u7f13\u5b58\u4f18\u52bf\uff08\u5c40\u90e8\u6027\u539f\u7406\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"int \u548c embstr \u7f16\u7801\u7684\u5b57\u7b26\u4e32\u5bf9\u8c61\u5728\u6761\u4ef6\u6ee1\u8db3\u7684\u60c5\u51b5\u4e0b\uff0c\u4f1a\u88ab\u8f6c\u6362\u4e3a raw \u7f16\u7801\u7684\u5b57\u7b26\u4e32\u5bf9\u8c61\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"int \u7f16\u7801\u7684\u6574\u6570\u503c\uff0c\u6267\u884c APPEND \u547d\u4ee4\u8ffd\u52a0\u4e00\u4e2a\u5b57\u7b26\u4e32\u503c\uff0c\u5148\u5c06\u6574\u6570\u503c\u8f6c\u4e3a\u5b57\u7b26\u4e32\u7136\u540e\u8ffd\u52a0\uff0c\u6700\u540e\u5f97\u5230\u4e00\u4e2a raw \u7f16\u7801\u7684\u5bf9\u8c61"}),"\n",(0,i.jsxs)(e.li,{children:["Redis \u6ca1\u6709\u4e3a embstr \u7f16\u7801\u7684\u5b57\u7b26\u4e32\u5bf9\u8c61\u7f16\u5199\u4efb\u4f55\u76f8\u5e94\u7684\u4fee\u6539\u7a0b\u5e8f\uff0c\u6240\u4ee5 embstr \u5bf9\u8c61\u5b9e\u9645\u4e0a",(0,i.jsx)(e.strong,{children:"\u662f\u53ea\u8bfb\u7684"}),"\uff0c\u6267\u884c\u4fee\u6539\u547d\u4ee4\u4f1a\u5c06\u5bf9\u8c61\u7684\u7f16\u7801\u4ece embstr \u8f6c\u6362\u6210 raw\uff0c\u64cd\u4f5c\u5b8c\u6210\u540e\u5f97\u5230\u4e00\u4e2a raw \u7f16\u7801\u7684\u5bf9\u8c61"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u7a0b\u5e8f\u4f1a\u5c06\u5b57\u7b26\u4e32\u5bf9\u8c61\u91cc\u9762\u7684\u5b57\u7b26\u4e32\u503c\u8f6c\u6362\u56de\u6d6e\u70b9\u6570\u503c\uff0c\u6267\u884c\u67d0\u4e9b\u64cd\u4f5c\u540e\u518d\u5c06\u6d6e\u70b9\u6570\u503c\u8f6c\u6362\u56de\u5b57\u7b26\u4e32\u503c\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'redis> SET pi 3.14 \nOK \nredis> OBJECT ENCODING pi\n"embstr" \nredis> INCRBYFLOAT pi 2.0 # \u8f6c\u4e3a\u6d6e\u70b9\u6570\u6267\u884c\u589e\u52a0\u7684\u64cd\u4f5c\n"5. 14" \nredis> OBJECT ENCODING pi \n"embstr" \n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5e94\u7528",children:"\u5e94\u7528"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u9875\u9ad8\u9891\u8bbf\u95ee\u4fe1\u606f\u663e\u793a\u63a7\u5236\uff0c\u4f8b\u5982\u65b0\u6d6a\u5fae\u535a\u5927 V \u4e3b\u9875\u663e\u793a\u7c89\u4e1d\u6570\u4e0e\u5fae\u535a\u6570\u91cf"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728 Redis \u4e2d\u4e3a\u5927 V \u7528\u6237\u8bbe\u5b9a\u7528\u6237\u4fe1\u606f\uff0c\u4ee5\u7528\u6237\u4e3b\u952e\u548c\u5c5e\u6027\u503c\u4f5c\u4e3a key\uff0c\u540e\u53f0\u8bbe\u5b9a\u5b9a\u65f6\u5237\u65b0\u7b56\u7565"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"set user:id:3506728370:fans 12210947\nset user:id:3506728370:blogs 6164\nset user:id:3506728370:focuses 83\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528 JSON \u683c\u5f0f\u4fdd\u5b58\u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'user:id:3506728370 \u2192 {"fans":12210947,"blogs":6164,"focuses":83}\n'})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"key\u7684\u8bbe\u7f6e\u7ea6\u5b9a\uff1a\u8868\u540d : \u4e3b\u952e\u540d : \u4e3b\u952e\u503c : \u5b57\u6bb5\u540d"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u8868\u540d"}),(0,i.jsx)(e.th,{children:"\u4e3b\u952e\u540d"}),(0,i.jsx)(e.th,{children:"\u4e3b\u952e\u503c"}),(0,i.jsx)(e.th,{children:"\u5b57\u6bb5\u540d"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"order"}),(0,i.jsx)(e.td,{children:"id"}),(0,i.jsx)(e.td,{children:"29437595"}),(0,i.jsx)(e.td,{children:"name"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"equip"}),(0,i.jsx)(e.td,{children:"id"}),(0,i.jsx)(e.td,{children:"390472345"}),(0,i.jsx)(e.td,{children:"type"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"news"}),(0,i.jsx)(e.td,{children:"id"}),(0,i.jsx)(e.td,{children:"202004150"}),(0,i.jsx)(e.td,{children:"title"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"hash",children:"hash"}),"\n",(0,i.jsx)(e.h4,{id:"\u7b80\u4ecb-2",children:"\u7b80\u4ecb"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5b58\u50a8\u9700\u6c42\uff1a\u5bf9\u4e00\u7cfb\u5217\u5b58\u50a8\u7684\u6570\u636e\u8fdb\u884c\u7f16\u7ec4\uff0c\u65b9\u4fbf\u7ba1\u7406\uff0c\u5178\u578b\u5e94\u7528\u5b58\u50a8\u5bf9\u8c61\u4fe1\u606f"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5b58\u50a8\u7ed3\u6784\uff1a\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\u4fdd\u5b58\u591a\u4e2a\u952e\u503c\u5bf9\u6570\u636e"}),"\n",(0,i.jsxs)(e.p,{children:["hash \u7c7b\u578b\uff1a\u5e95\u5c42\u4f7f\u7528",(0,i.jsx)(e.strong,{children:"\u54c8\u5e0c\u8868"}),"\u7ed3\u6784\u5b9e\u73b0\u6570\u636e\u5b58\u50a8"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(80635).A+"",width:"1182",height:"722"})}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u4e2d\u7684 hash \u7c7b\u4f3c\u4e8e Java \u4e2d\u7684  ",(0,i.jsx)(e.code,{children:"Map<String, Map<Object,object>>"}),"\uff0c\u5de6\u8fb9\u662f key\uff0c\u53f3\u8fb9\u662f\u503c\uff0c\u4e2d\u95f4\u53eb field \u5b57\u6bb5\uff0c\u672c\u8d28\u4e0a ",(0,i.jsx)(e.strong,{children:"hash \u5b58\u4e86\u4e00\u4e2a key-value \u7684\u5b58\u50a8\u7a7a\u95f4"})]}),"\n",(0,i.jsx)(e.p,{children:"hash \u662f\u6307\u7684\u4e00\u4e2a\u6570\u636e\u7c7b\u578b\uff0c\u5e76\u4e0d\u662f\u4e00\u4e2a\u6570\u636e"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c field \u6570\u91cf\u8f83\u5c11\uff0c\u5b58\u50a8\u7ed3\u6784\u4f18\u5316\u4e3a",(0,i.jsx)(e.strong,{children:"\u538b\u7f29\u5217\u8868\u7ed3\u6784"}),"\uff08\u6709\u5e8f\uff09"]}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c field \u6570\u91cf\u8f83\u591a\uff0c\u5b58\u50a8\u7ed3\u6784\u4f7f\u7528 HashMap \u7ed3\u6784\uff08\u65e0\u5e8f\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u64cd\u4f5c-1",children:"\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"\u6307\u4ee4\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"hset key field value\t\t#\u6dfb\u52a0/\u4fee\u6539\u6570\u636e\nhdel key field1 [field2]\t#\u5220\u9664\u6570\u636e\uff0c[]\u4ee3\u8868\u53ef\u9009\nhsetnx key field value\t\t#\u8bbe\u7f6efield\u7684\u503c\uff0c\u5982\u679c\u8be5field\u5b58\u5728\u5219\u4e0d\u505a\u4efb\u4f55\u64cd\u4f5c\nhmset key f1 v1 f2 v2...\t#\u6dfb\u52a0/\u4fee\u6539\u591a\u4e2a\u6570\u636e\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"hget key field\t\t\t\t#\u83b7\u53d6\u6307\u5b9afield\u5bf9\u5e94\u6570\u636e\nhgetall key\t\t\t\t\t#\u83b7\u53d6\u6307\u5b9akey\u6240\u6709\u6570\u636e\nhmget key field1 field2...\t#\u83b7\u53d6\u591a\u4e2a\u6570\u636e\nhexists key field\t\t\t#\u83b7\u53d6\u54c8\u5e0c\u8868\u4e2d\u662f\u5426\u5b58\u5728\u6307\u5b9a\u7684\u5b57\u6bb5\nhlen key\t\t\t\t\t#\u83b7\u53d6\u54c8\u5e0c\u8868\u4e2d\u5b57\u6bb5\u7684\u6570\u91cf\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u83b7\u53d6\u54c8\u5e0c\u8868\u4e2d\u6240\u6709\u7684\u5b57\u6bb5\u540d\u6216\u5b57\u6bb5\u503c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"hkeys key\t\t\t\t\t#\u83b7\u53d6\u6240\u6709\u7684field\t\nhvals key\t\t\t\t\t#\u83b7\u53d6\u6240\u6709\u7684value\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bbe\u7f6e\u6307\u5b9a\u5b57\u6bb5\u7684\u6570\u503c\u6570\u636e\u589e\u52a0\u6307\u5b9a\u8303\u56f4\u7684\u503c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"hincrby key field increment\t\t#\u6307\u5b9a\u5b57\u6bb5\u7684\u6570\u503c\u6570\u636e\u589e\u52a0\u6307\u5b9a\u7684\u503c\uff0cincrement\u4e3a\u8d1f\u6570\u5219\u51cf\u5c11\nhincrbyfloat key field increment#\u64cd\u4f5c\u5c0f\u6570\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"hash \u7c7b\u578b\u4e2d value \u53ea\u80fd\u5b58\u50a8\u5b57\u7b26\u4e32\uff0c\u4e0d\u5141\u8bb8\u5b58\u50a8\u5176\u4ed6\u6570\u636e\u7c7b\u578b\uff0c\u4e0d\u5b58\u5728\u5d4c\u5957\u73b0\u8c61\uff0c\u5982\u679c\u6570\u636e\u672a\u83b7\u53d6\u5230\uff0c\u5bf9\u5e94\u7684\u503c\u4e3a\uff08nil\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u6bcf\u4e2a hash \u53ef\u4ee5\u5b58\u50a8 2^32 - 1 \u4e2a\u952e\u503c\u5bf9"}),"\n",(0,i.jsx)(e.li,{children:"hash \u7c7b\u578b\u548c\u5bf9\u8c61\u7684\u6570\u636e\u5b58\u50a8\u5f62\u5f0f\u76f8\u4f3c\uff0c\u5e76\u4e14\u53ef\u4ee5\u7075\u6d3b\u6dfb\u52a0\u5220\u9664\u5bf9\u8c61\u5c5e\u6027\u3002\u4f46 hash \u8bbe\u8ba1\u521d\u8877\u4e0d\u662f\u4e3a\u4e86\u5b58\u50a8\u5927\u91cf\u5bf9\u8c61\u800c\u8bbe\u8ba1\u7684\uff0c\u4e0d\u53ef\u6ee5\u7528\uff0c\u4e0d\u53ef\u5c06 hash \u4f5c\u4e3a\u5bf9\u8c61\u5217\u8868\u4f7f\u7528"}),"\n",(0,i.jsx)(e.li,{children:"hgetall \u64cd\u4f5c\u53ef\u4ee5\u83b7\u53d6\u5168\u90e8\u5c5e\u6027\uff0c\u5982\u679c\u5185\u90e8 field \u8fc7\u591a\uff0c\u904d\u5386\u6574\u4f53\u6570\u636e\u6548\u7387\u5c31\u5f88\u4f1a\u4f4e\uff0c\u6709\u53ef\u80fd\u6210\u4e3a\u6570\u636e\u8bbf\u95ee\u74f6\u9888"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5b9e\u73b0-1",children:"\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.p,{children:"\u54c8\u5e0c\u5bf9\u8c61\u7684\u5185\u90e8\u7f16\u7801\u6709\u4e24\u79cd\uff1aziplist\uff08\u538b\u7f29\u5217\u8868\uff09\u3001hashtable\uff08\u54c8\u5e0c\u8868\u3001\u5b57\u5178\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u538b\u7f29\u5217\u8868\u5b9e\u73b0\u54c8\u5e0c\u5bf9\u8c61\uff1a\u540c\u4e00\u952e\u503c\u5bf9\u7684\u8282\u70b9\u603b\u662f\u6328\u5728\u4e00\u8d77\uff0c\u4fdd\u5b58\u952e\u7684\u8282\u70b9\u5728\u524d\uff0c\u4fdd\u5b58\u503c\u7684\u8282\u70b9\u5728\u540e"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(26859).A+"",width:"1346",height:"173"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b57\u5178\u5b9e\u73b0\u54c8\u5e0c\u5bf9\u8c61\uff1a\u5b57\u5178\u7684\u6bcf\u4e00\u4e2a\u952e\u90fd\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u5bf9\u8c61\uff0c\u6bcf\u4e2a\u503c\u4e5f\u662f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(51940).A+"",width:"893",height:"541"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u5b58\u50a8\u7684\u6570\u636e\u91cf\u6bd4\u8f83\u5c0f\u7684\u60c5\u51b5\u4e0b\uff0cRedis \u624d\u4f7f\u7528\u538b\u7f29\u5217\u8868\u6765\u5b9e\u73b0\u5b57\u5178\u7c7b\u578b\uff0c\u5177\u4f53\u9700\u8981\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5f53\u952e\u503c\u5bf9\u6570\u91cf\u5c0f\u4e8e hash-max-ziplist-entries \u914d\u7f6e\uff08\u9ed8\u8ba4 512 \u4e2a\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u6240\u6709\u952e\u548c\u503c\u7684\u957f\u5ea6\u90fd\u5c0f\u4e8e hash-max-ziplist-value \u914d\u7f6e\uff08\u9ed8\u8ba4 64 \u5b57\u8282\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4ee5\u4e0a\u4e24\u4e2a\u6761\u4ef6\u7684\u4e0a\u9650\u503c\u662f\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u7684\uff0c\u5f53\u4e24\u4e2a\u6761\u4ef6\u7684\u4efb\u610f\u4e00\u4e2a\u4e0d\u80fd\u88ab\u6ee1\u8db3\u65f6\uff0c\u5bf9\u8c61\u7684\u7f16\u7801\u8f6c\u6362\u64cd\u4f5c\u5c31\u4f1a\u88ab\u6267\u884c"}),"\n",(0,i.jsx)(e.p,{children:"ziplist \u4f7f\u7528\u66f4\u52a0\u7d27\u51d1\u7684\u7ed3\u6784\u5b9e\u73b0\u591a\u4e2a\u5143\u7d20\u7684\u8fde\u7eed\u5b58\u50a8\uff0c\u6240\u4ee5\u5728\u8282\u7701\u5185\u5b58\u65b9\u9762\u6bd4 hashtable \u66f4\u52a0\u4f18\u79c0\uff0c\u5f53 ziplist \u65e0\u6cd5\u6ee1\u8db3\u54c8\u5e0c\u7c7b\u578b\u65f6\uff0cRedis \u4f1a\u4f7f\u7528 hashtable \u4f5c\u4e3a\u54c8\u5e0c\u7684\u5185\u90e8\u5b9e\u73b0\uff0c\u56e0\u4e3a\u6b64\u65f6 ziplist \u7684\u8bfb\u5199\u6548\u7387\u4f1a\u4e0b\u964d\uff0c\u800c hashtable \u7684\u8bfb\u5199\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(1)"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5e94\u7528-1",children:"\u5e94\u7528"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'user:id:3506728370 \u2192 {"name":"\u6625\u665a","fans":12210862,"blogs":83}\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u4e8e\u4ee5\u4e0a\u6570\u636e\uff0c\u4f7f\u7528\u5355\u6761\u53bb\u5b58\u7684\u8bdd\uff0c\u5b58\u7684\u6761\u6570\u4f1a\u5f88\u591a\u3002\u4f46\u5982\u679c\u7528 json \u683c\u5f0f\uff0c\u5b58\u4e00\u6761\u6570\u636e\u5c31\u591f\u4e86\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u5047\u5982\u73b0\u5728\u7c89\u4e1d\u6570\u91cf\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u8981\u628a\u6574\u4e2a\u503c\u90fd\u6539\u53d8\uff0c\u4f46\u662f\u7528\u5355\u6761\u5b58\u5c31\u4e0d\u5b58\u5728\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ea\u9700\u8981\u6539\u5176\u4e2d\u4e00\u4e2a\u5c31\u53ef\u4ee5"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(49100).A+"",width:"1540",height:"525"})}),"\n",(0,i.jsx)(e.p,{children:"\u53ef\u4ee5\u5b9e\u73b0\u8d2d\u7269\u8f66\u7684\u529f\u80fd\uff0ckey \u5bf9\u5e94\u7740\u6bcf\u4e2a\u7528\u6237\uff0c\u5b58\u50a8\u7a7a\u95f4\u5b58\u50a8\u8d2d\u7269\u8f66\u7684\u4fe1\u606f"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"list",children:"list"}),"\n",(0,i.jsx)(e.h4,{id:"\u7b80\u4ecb-3",children:"\u7b80\u4ecb"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5b58\u50a8\u9700\u6c42\uff1a\u5b58\u50a8\u591a\u4e2a\u6570\u636e\uff0c\u5e76\u5bf9\u6570\u636e\u8fdb\u5165\u5b58\u50a8\u7a7a\u95f4\u7684\u987a\u5e8f\u8fdb\u884c\u533a\u5206"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5b58\u50a8\u7ed3\u6784\uff1a\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\u4fdd\u5b58\u591a\u4e2a\u6570\u636e\uff0c\u4e14\u901a\u8fc7\u6570\u636e\u53ef\u4ee5\u4f53\u73b0\u8fdb\u5165\u987a\u5e8f\uff0c\u5141\u8bb8\u91cd\u590d\u5143\u7d20"}),"\n",(0,i.jsxs)(e.p,{children:["list \u7c7b\u578b\uff1a\u4fdd\u5b58\u591a\u4e2a\u6570\u636e\uff0c\u5e95\u5c42\u4f7f\u7528",(0,i.jsx)(e.strong,{children:"\u53cc\u5411\u94fe\u8868"}),"\u5b58\u50a8\u7ed3\u6784\u5b9e\u73b0\uff0c\u7c7b\u4f3c\u4e8e LinkedList"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(15259).A+"",width:"1782",height:"779"})}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u4e24\u7aef\u90fd\u80fd\u5b58\u53d6\u6570\u636e\u7684\u8bdd\uff0c\u8fd9\u5c31\u662f\u53cc\u7aef\u961f\u5217\uff0c\u5982\u679c\u53ea\u80fd\u4ece\u4e00\u7aef\u8fdb\u4e00\u7aef\u51fa\uff0c\u8fd9\u4e2a\u6a21\u578b\u53eb\u6808"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u64cd\u4f5c-2",children:"\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"\u6307\u4ee4\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"lpush key value1 [value2]...#\u4ece\u5de6\u8fb9\u6dfb\u52a0/\u4fee\u6539\u6570\u636e(\u8868\u5934)\nrpush key value1 [value2]...#\u4ece\u53f3\u8fb9\u6dfb\u52a0/\u4fee\u6539\u6570\u636e(\u8868\u5c3e)\nlpop key\t\t\t\t\t#\u4ece\u5de6\u8fb9\u83b7\u53d6\u5e76\u79fb\u9664\u7b2c\u4e00\u4e2a\u6570\u636e\uff0c\u7c7b\u4f3c\u4e8e\u51fa\u6808/\u51fa\u961f\nrpop key\t\t\t\t\t#\u4ece\u53f3\u8fb9\u83b7\u53d6\u5e76\u79fb\u9664\u7b2c\u4e00\u4e2a\u6570\u636e\nlrem key count value\t\t#\u5220\u9664\u6307\u5b9a\u6570\u636e\uff0ccount=2\u5220\u96642\u4e2a\uff0c\u8be5value\u53ef\u80fd\u6709\u591a\u4e2a(\u91cd\u590d\u6570\u636e)\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"lrange key start stop\t\t#\u4ece\u5de6\u8fb9\u904d\u5386\u6570\u636e\u5e76\u6307\u5b9a\u5f00\u59cb\u548c\u7ed3\u675f\u7d22\u5f15\uff0c0\u662f\u7b2c\u4e00\u4e2a\u7d22\u5f15\uff0c-1\u662f\u7ec8\u7d22\u5f15\nlindex key index\t\t\t#\u83b7\u53d6\u6307\u5b9a\u7d22\u5f15\u6570\u636e\uff0c\u6ca1\u6709\u5219\u4e3anil\uff0c\u6ca1\u6709\u7d22\u5f15\u8d8a\u754c\nllen key\t\t\t\t\t#list\u4e2d\u6570\u636e\u957f\u5ea6/\u4e2a\u6570\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u89c4\u5b9a\u65f6\u95f4\u5185\u83b7\u53d6\u5e76\u79fb\u9664\u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"b\t\t\t\t\t\t\t#\u4ee3\u8868\u963b\u585e\nblpop key1 [key2] timeout\t#\u5728\u6307\u5b9a\u65f6\u95f4\u5185\u83b7\u53d6\u6307\u5b9akey(\u53ef\u4ee5\u591a\u4e2a)\u7684\u6570\u636e\uff0c\u8d85\u65f6\u5219\u4e3a(nil)\n\t\t\t\t\t\t\t#\u53ef\u4ee5\u4ece\u5176\u4ed6\u5ba2\u6237\u7aef\u5199\u6570\u636e\uff0c\u5f53\u524d\u5ba2\u6237\u7aef\u963b\u585e\u8bfb\u53d6\u6570\u636e\nbrpop key1 [key2] timeout\t#\u4ece\u53f3\u8fb9\u64cd\u4f5c\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u590d\u5236\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"brpoplpush source destination timeout\t#\u4ecesource\u83b7\u53d6\u6570\u636e\u653e\u5165destination\uff0c\u5047\u5982\u5728\u6307\u5b9a\u65f6\u95f4\u5185\u6ca1\u6709\u4efb\u4f55\u5143\u7d20\u88ab\u5f39\u51fa\uff0c\u5219\u8fd4\u56de\u4e00\u4e2anil\u548c\u7b49\u5f85\u65f6\u957f\u3002\u53cd\u4e4b\uff0c\u8fd4\u56de\u4e00\u4e2a\u542b\u6709\u4e24\u4e2a\u5143\u7d20\u7684\u5217\u8868\uff0c\u7b2c\u4e00\u4e2a\u5143\u7d20\u662f\u88ab\u5f39\u51fa\u5143\u7d20\u7684\u503c\uff0c\u7b2c\u4e8c\u4e2a\u5143\u7d20\u662f\u7b49\u5f85\u65f6\u957f\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"list \u4e2d\u4fdd\u5b58\u7684\u6570\u636e\u90fd\u662f string \u7c7b\u578b\u7684\uff0c\u6570\u636e\u603b\u5bb9\u91cf\u662f\u6709\u9650\u7684\uff0c\u6700\u591a 2^32 - 1 \u4e2a\u5143\u7d20\uff084294967295\uff09"}),"\n",(0,i.jsx)(e.li,{children:"list \u5177\u6709\u7d22\u5f15\u7684\u6982\u5ff5\uff0c\u4f46\u64cd\u4f5c\u6570\u636e\u65f6\u901a\u5e38\u4ee5\u961f\u5217\u7684\u5f62\u5f0f\u8fdb\u884c\u5165\u961f\u51fa\u961f\uff0c\u6216\u4ee5\u6808\u7684\u5f62\u5f0f\u8fdb\u884c\u5165\u6808\u51fa\u6808"}),"\n",(0,i.jsx)(e.li,{children:"\u83b7\u53d6\u5168\u90e8\u6570\u636e\u64cd\u4f5c\u7ed3\u675f\u7d22\u5f15\u8bbe\u7f6e\u4e3a -1"}),"\n",(0,i.jsx)(e.li,{children:"list \u53ef\u4ee5\u5bf9\u6570\u636e\u8fdb\u884c\u5206\u9875\u64cd\u4f5c\uff0c\u901a\u5e38\u7b2c\u4e00\u9875\u7684\u4fe1\u606f\u6765\u81ea\u4e8e list\uff0c\u7b2c 2 \u9875\u53ca\u66f4\u591a\u7684\u4fe1\u606f\u901a\u8fc7\u6570\u636e\u5e93\u7684\u5f62\u5f0f\u52a0\u8f7d"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5b9e\u73b0-2",children:"\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.p,{children:"\u5728 Redis3.2 \u7248\u672c\u4ee5\u524d\u5217\u8868\u5bf9\u8c61\u7684\u5185\u90e8\u7f16\u7801\u6709\u4e24\u79cd\uff1aziplist\uff08\u538b\u7f29\u5217\u8868\uff09\u548c linkedlist\uff08\u94fe\u8868\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u538b\u7f29\u5217\u8868\u5b9e\u73b0\u7684\u5217\u8868\u5bf9\u8c61\uff1aPUSH 1\u3001three\u30015 \u4e09\u4e2a\u5143\u7d20"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(96484).A+"",width:"1287",height:"318"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u94fe\u8868\u5b9e\u73b0\u7684\u5217\u8868\u5bf9\u8c61\uff1a\u4e3a\u4e86\u7b80\u5316\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684\u8868\u793a\uff0c\u4f7f\u7528\u4e86 StringObject \u7684\u7ed3\u6784\uff0c\u5e95\u5c42\u5176\u5b9e\u662f sdshdr \u7ed3\u6784"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(91410).A+"",width:"1370",height:"294"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5217\u8868\u4e2d\u5b58\u50a8\u7684\u6570\u636e\u91cf\u6bd4\u8f83\u5c0f\u7684\u65f6\u5019\uff0c\u5217\u8868\u5c31\u4f1a\u4f7f\u7528\u4e00\u5757\u8fde\u7eed\u7684\u5185\u5b58\u5b58\u50a8\uff0c\u91c7\u7528\u538b\u7f29\u5217\u8868\u7684\u65b9\u5f0f\u5b9e\u73b0\u7684\u6761\u4ef6\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5217\u8868\u5bf9\u8c61\u4fdd\u5b58\u7684\u6240\u6709\u5b57\u7b26\u4e32\u5143\u7d20\u7684\u957f\u5ea6\u90fd\u5c0f\u4e8e 64 \u5b57\u8282"}),"\n",(0,i.jsx)(e.li,{children:"\u5217\u8868\u5bf9\u8c61\u4fdd\u5b58\u7684\u5143\u7d20\u6570\u91cf\u5c0f\u4e8e 512 \u4e2a"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4ee5\u4e0a\u4e24\u4e2a\u6761\u4ef6\u7684\u4e0a\u9650\u503c\u662f\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u7684\uff0c\u5f53\u4e24\u4e2a\u6761\u4ef6\u7684\u4efb\u610f\u4e00\u4e2a\u4e0d\u80fd\u88ab\u6ee1\u8db3\u65f6\uff0c\u5bf9\u8c61\u7684\u7f16\u7801\u8f6c\u6362\u64cd\u4f5c\u5c31\u4f1a\u88ab\u6267\u884c"}),"\n",(0,i.jsx)(e.p,{children:"\u5728 Redis3.2 \u7248\u672c \u4ee5\u540e\u5bf9\u5217\u8868\u6570\u636e\u7ed3\u6784\u8fdb\u884c\u4e86\u6539\u9020\uff0c\u4f7f\u7528 **quicklist\uff08\u5feb\u901f\u5217\u8868\uff09**\u4ee3\u66ff\u4e86 linkedlist\uff0cquicklist \u5b9e\u9645\u4e0a\u662f ziplist \u548c linkedlist \u7684\u6df7\u5408\u4f53\uff0c\u5c06 linkedlist \u6309\u6bb5\u5207\u5206\uff0c\u6bcf\u4e00\u6bb5\u4f7f\u7528 ziplist \u6765\u7d27\u51d1\u5b58\u50a8\uff0c\u591a\u4e2a ziplist \u4e4b\u95f4\u4f7f\u7528\u53cc\u5411\u6307\u9488\u4e32\u63a5\u8d77\u6765\uff0c\u65e2\u6ee1\u8db3\u4e86\u5feb\u901f\u7684\u63d2\u5165\u5220\u9664\u6027\u80fd\uff0c\u53c8\u4e0d\u4f1a\u51fa\u73b0\u592a\u5927\u7684\u7a7a\u95f4\u5197\u4f59"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(49222).A+"",width:"994",height:"560"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5e94\u7528-2",children:"\u5e94\u7528"}),"\n",(0,i.jsx)(e.p,{children:"\u4f01\u4e1a\u8fd0\u8425\u8fc7\u7a0b\u4e2d\uff0c\u7cfb\u7edf\u5c06\u4ea7\u751f\u51fa\u5927\u91cf\u7684\u8fd0\u8425\u6570\u636e\uff0c\u5982\u4f55\u4fdd\u969c\u591a\u53f0\u670d\u52a1\u5668\u64cd\u4f5c\u65e5\u5fd7\u7684\u7edf\u4e00\u987a\u5e8f\u8f93\u51fa\uff1f"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f9d\u8d56 list \u7684\u6570\u636e\u5177\u6709\u987a\u5e8f\u7684\u7279\u5f81\u5bf9\u4fe1\u606f\u8fdb\u884c\u7ba1\u7406\uff0c\u53f3\u8fdb\u5de6\u67e5\u6216\u8005\u5de6\u8fd1\u5de6\u67e5"}),"\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u961f\u5217\u6a21\u578b\u89e3\u51b3\u591a\u8def\u4fe1\u606f\u6c47\u603b\u5408\u5e76\u7684\u95ee\u9898"}),"\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u6808\u6a21\u578b\u89e3\u51b3\u6700\u65b0\u6d88\u606f\u7684\u95ee\u9898"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5fae\u4fe1\u6587\u7ae0\u8ba2\u9605\u516c\u4f17\u53f7\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u6bd4\u5982\u8ba2\u9605\u4e86\u4e24\u4e2a\u516c\u4f17\u53f7\uff0c\u5b83\u4eec\u53d1\u5e03\u4e86\u4e24\u7bc7\u6587\u7ae0\uff0c\u6587\u7ae0 ID \u5206\u522b\u4e3a 666 \u548c 888\uff0c\u53ef\u4ee5\u901a\u8fc7\u6267\u884c ",(0,i.jsx)(e.code,{children:"LPUSH key 666 888"})," \u547d\u4ee4\u63a8\u9001\u7ed9\u6211"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"set",children:"set"}),"\n",(0,i.jsx)(e.h4,{id:"\u7b80\u4ecb-4",children:"\u7b80\u4ecb"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5b58\u50a8\u9700\u6c42\uff1a\u5b58\u50a8\u5927\u91cf\u7684\u6570\u636e\uff0c\u5728\u67e5\u8be2\u65b9\u9762\u63d0\u4f9b\u66f4\u9ad8\u7684\u6548\u7387"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5b58\u50a8\u7ed3\u6784\uff1a\u80fd\u591f\u4fdd\u5b58\u5927\u91cf\u7684\u6570\u636e\uff0c\u9ad8\u6548\u7684\u5185\u90e8\u5b58\u50a8\u673a\u5236\uff0c\u4fbf\u4e8e\u67e5\u8be2"}),"\n",(0,i.jsxs)(e.p,{children:["set \u7c7b\u578b\uff1a\u4e0e hash \u5b58\u50a8\u7ed3\u6784\u54c8\u5e0c\u8868\u5b8c\u5168\u76f8\u540c\uff0c\u53ea\u662f\u4ec5\u5b58\u50a8\u952e\u4e0d\u5b58\u50a8\u503c\uff08nil\uff09\uff0c\u6240\u4ee5\u6dfb\u52a0\uff0c\u5220\u9664\uff0c\u67e5\u627e\u7684\u590d\u6742\u5ea6\u90fd\u662f O(1)\uff0c\u5e76\u4e14",(0,i.jsx)(e.strong,{children:"\u503c\u662f\u4e0d\u5141\u8bb8\u91cd\u590d\u4e14\u65e0\u5e8f\u7684"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(99321).A+"",width:"1280",height:"774"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u64cd\u4f5c-3",children:"\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"\u6307\u4ee4\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"sadd key member1 [member2]\t#\u6dfb\u52a0\u6570\u636e\nsrem key member1 [member2]\t#\u5220\u9664\u6570\u636e\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"smembers key\t\t\t\t#\u83b7\u53d6\u5168\u90e8\u6570\u636e\nscard key\t\t\t\t\t#\u83b7\u53d6\u96c6\u5408\u6570\u636e\u603b\u91cf\nsismember key member\t\t#\u5224\u65ad\u96c6\u5408\u4e2d\u662f\u5426\u5305\u542b\u6307\u5b9a\u6570\u636e\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u968f\u673a\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"spop key [count]\t\t\t#\u968f\u673a\u83b7\u53d6\u96c6\u4e2d\u7684\u67d0\u4e2a\u6570\u636e\u5e76\u5c06\u8be5\u6570\u636e\u79fb\u9664\u96c6\u5408\nsrandmember key [count]\t\t#\u968f\u673a\u83b7\u53d6\u96c6\u5408\u4e2d\u6307\u5b9a(\u6570\u91cf)\u7684\u6570\u636e\n\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u96c6\u5408\u7684\u4ea4\u3001\u5e76\u3001\u5dee"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"sinter key1 [key2...]  \t\t\t\t\t#\u4e24\u4e2a\u96c6\u5408\u7684\u4ea4\u96c6\uff0c\u4e0d\u5b58\u5728\u4e3a(empty list or set)\nsunion key1 [key2...]  \t\t\t\t\t#\u4e24\u4e2a\u96c6\u5408\u7684\u5e76\u96c6\nsdiff key1 [key2...]\t\t\t\t\t#\u4e24\u4e2a\u96c6\u5408\u7684\u5dee\u96c6\n\nsinterstore destination key1 [key2...]\t#\u4e24\u4e2a\u96c6\u5408\u7684\u4ea4\u96c6\u5e76\u5b58\u50a8\u5230\u6307\u5b9a\u96c6\u5408\u4e2d\nsunionstore destination key1 [key2...]\t#\u4e24\u4e2a\u96c6\u5408\u7684\u5e76\u96c6\u5e76\u5b58\u50a8\u5230\u6307\u5b9a\u96c6\u5408\u4e2d\nsdiffstore destination key1 [key2...]\t#\u4e24\u4e2a\u96c6\u5408\u7684\u5dee\u96c6\u5e76\u5b58\u50a8\u5230\u6307\u5b9a\u96c6\u5408\u4e2d\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u590d\u5236"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"smove source destination member\t\t\t#\u5c06\u6307\u5b9a\u6570\u636e\u4ece\u539f\u59cb\u96c6\u5408\u4e2d\u79fb\u52a8\u5230\u76ee\u6807\u96c6\u5408\u4e2d\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"set \u7c7b\u578b\u4e0d\u5141\u8bb8\u6570\u636e\u91cd\u590d\uff0c\u5982\u679c\u6dfb\u52a0\u7684\u6570\u636e\u5728 set \u4e2d\u5df2\u7ecf\u5b58\u5728\uff0c\u5c06\u53ea\u4fdd\u7559\u4e00\u4efd"}),"\n",(0,i.jsx)(e.li,{children:"set \u867d\u7136\u4e0e hash \u7684\u5b58\u50a8\u7ed3\u6784\u76f8\u540c\uff0c\u4f46\u662f\u65e0\u6cd5\u542f\u7528 hash \u4e2d\u5b58\u50a8\u503c\u7684\u7a7a\u95f4"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5b9e\u73b0-3",children:"\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.p,{children:"\u96c6\u5408\u5bf9\u8c61\u7684\u5185\u90e8\u7f16\u7801\u6709\u4e24\u79cd\uff1aintset\uff08\u6574\u6570\u96c6\u5408\uff09\u3001hashtable\uff08\u54c8\u5e0c\u8868\u3001\u5b57\u5178\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6574\u6570\u96c6\u5408\u5b9e\u73b0\u7684\u96c6\u5408\u5bf9\u8c61\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(95043).A+"",width:"1030",height:"299"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b57\u5178\u5b9e\u73b0\u7684\u96c6\u5408\u5bf9\u8c61\uff1a\u952e\u503c\u5bf9\u7684\u503c\u4e3a NULL"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(25926).A+"",width:"846",height:"329"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u96c6\u5408\u5bf9\u8c61\u53ef\u4ee5\u540c\u65f6\u6ee1\u8db3\u4ee5\u4e0b\u4e24\u4e2a\u6761\u4ef6\u65f6\uff0c\u5bf9\u8c61\u4f7f\u7528 intset \u7f16\u7801\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u90fd\u662f\u6574\u6570\u503c"}),"\n",(0,i.jsx)(e.li,{children:"\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u6570\u91cf\u5c0f\u4e8e set-maxintset-entries\u914d\u7f6e\uff08\u9ed8\u8ba4 512 \u4e2a\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4ee5\u4e0a\u4e24\u4e2a\u6761\u4ef6\u7684\u4e0a\u9650\u503c\u662f\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u7684"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5e94\u7528-3",children:"\u5e94\u7528"}),"\n",(0,i.jsx)(e.p,{children:"\u5e94\u7528\u573a\u666f\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u9ed1\u540d\u5355\uff1a\u8d44\u8baf\u7c7b\u4fe1\u606f\u7c7b\u7f51\u7ad9\u8ffd\u6c42\u9ad8\u8bbf\u95ee\u91cf\uff0c\u4f46\u662f\u7531\u4e8e\u5176\u4fe1\u606f\u7684\u4ef7\u503c\uff0c\u5f80\u5f80\u5bb9\u6613\u88ab\u4e0d\u6cd5\u5206\u5b50\u5229\u7528\uff0c\u901a\u8fc7\u722c\u866b\u6280\u672f\uff0c\u5feb\u901f\u83b7\u53d6\u4fe1\u606f\uff0c\u4e2a\u522b\u7279\u79cd\u884c\u4e1a\u7f51\u7ad9\u4fe1\u606f\u901a\u8fc7\u722c\u866b\u83b7\u53d6\u5206\u6790\u540e\uff0c\u53ef\u4ee5\u8f6c\u6362\u6210\u5546\u4e1a\u673a\u5bc6\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u722c\u866b\u4e0d\u4e00\u5b9a\u505a\u6467\u6bc1\u6027\u7684\u5de5\u4f5c\uff0c\u6709\u4e9b\u5c0f\u578b\u7f51\u7ad9\u9700\u8981\u722c\u866b\u4e3a\u5176\u5e26\u6765\u4e00\u4e9b\u6d41\u91cf\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u767d\u540d\u5355\uff1a\u5bf9\u4e8e\u5b89\u5168\u6027\u66f4\u9ad8\u7684\u5e94\u7528\u8bbf\u95ee\uff0c\u4ec5\u4ec5\u9760\u9ed1\u540d\u5355\u662f\u4e0d\u80fd\u89e3\u51b3\u5b89\u5168\u95ee\u9898\u7684\uff0c\u6b64\u65f6\u9700\u8981\u8bbe\u5b9a\u53ef\u8bbf\u95ee\u7684\u7528\u6237\u7fa4\u4f53\uff0c \u4f9d\u8d56\u767d\u540d\u5355\u505a\u66f4\u4e3a\u82db\u523b\u7684\u8bbf\u95ee\u9a8c\u8bc1"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u968f\u673a\u64cd\u4f5c\u53ef\u4ee5\u5b9e\u73b0\u62bd\u5956\u529f\u80fd"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u96c6\u5408\u7684\u4ea4\u5e76\u8865\u53ef\u4ee5\u5b9e\u73b0\u5fae\u535a\u5171\u540c\u5173\u6ce8\u7684\u67e5\u770b\uff0c\u53ef\u4ee5\u6839\u636e\u5171\u540c\u5173\u6ce8\u6216\u8005\u5171\u540c\u559c\u6b22\u63a8\u8350\u76f8\u5173\u5185\u5bb9"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"zset",children:"zset"}),"\n",(0,i.jsx)(e.h4,{id:"\u7b80\u4ecb-5",children:"\u7b80\u4ecb"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5b58\u50a8\u9700\u6c42\uff1a\u6570\u636e\u6392\u5e8f\u6709\u5229\u4e8e\u6570\u636e\u7684\u6709\u6548\u5c55\u793a\uff0c\u9700\u8981\u63d0\u4f9b\u4e00\u79cd\u53ef\u4ee5\u6839\u636e\u81ea\u8eab\u7279\u5f81\u8fdb\u884c\u6392\u5e8f\u7684\u65b9\u5f0f"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5b58\u50a8\u7ed3\u6784\uff1a\u65b0\u7684\u5b58\u50a8\u6a21\u578b\uff0c\u53ef\u4ee5\u4fdd\u5b58\u53ef\u6392\u5e8f\u7684\u6570\u636e"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u64cd\u4f5c-4",children:"\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"\u6307\u4ee4\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"zadd key score1 member1 [score2 member2]\t#\u6dfb\u52a0\u6570\u636e\nzrem key member [member ...]\t\t\t\t#\u5220\u9664\u6570\u636e\nzremrangebyrank key start stop \t\t\t\t#\u5220\u9664\u6307\u5b9a\u7d22\u5f15\u8303\u56f4\u7684\u6570\u636e\nzremrangebyscore key min max\t\t\t\t#\u5220\u9664\u6307\u5b9a\u5206\u6570\u533a\u95f4\u5185\u7684\u6570\u636e\nzscore key member\t\t\t\t\t\t\t#\u83b7\u53d6\u6307\u5b9a\u503c\u7684\u5206\u6570\nzincrby key increment member\t\t\t\t#\u6307\u5b9a\u503c\u7684\u5206\u6570\u589e\u52a0increment\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"zrange key start stop [WITHSCORES]\t\t#\u83b7\u53d6\u6307\u5b9a\u8303\u56f4\u7684\u6570\u636e\uff0c\u5347\u5e8f\uff0cWITHSCORES \u4ee3\u8868\u663e\u793a\u5206\u6570\nzrevrange key start stop [WITHSCORES]\t#\u83b7\u53d6\u6307\u5b9a\u8303\u56f4\u7684\u6570\u636e\uff0c\u964d\u5e8f\n\nzrangebyscore key min max [WITHSCORES] [LIMIT offset count]\t#\u6309\u6761\u4ef6\u83b7\u53d6\u6570\u636e\uff0c\u4ece\u5c0f\u5230\u5927\nzrevrangebyscore key max min [WITHSCORES] [...]\t\t\t\t#\u4ece\u5927\u5230\u5c0f\n\nzcard key\t\t\t\t\t\t\t\t\t\t#\u83b7\u53d6\u96c6\u5408\u6570\u636e\u7684\u603b\u91cf\nzcount key min max\t\t\t\t\t\t\t\t#\u83b7\u53d6\u6307\u5b9a\u5206\u6570\u533a\u95f4\u5185\u7684\u6570\u636e\u603b\u91cf\nzrank key member\t\t\t\t\t\t\t\t#\u83b7\u53d6\u6570\u636e\u5bf9\u5e94\u7684\u7d22\u5f15\uff08\u6392\u540d\uff09\u5347\u5e8f\nzrevrank key member\t\t\t\t\t\t\t\t#\u83b7\u53d6\u6570\u636e\u5bf9\u5e94\u7684\u7d22\u5f15\uff08\u6392\u540d\uff09\u964d\u5e8f\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"min \u4e0e max \u7528\u4e8e\u9650\u5b9a\u641c\u7d22\u67e5\u8be2\u7684\u6761\u4ef6"}),"\n",(0,i.jsx)(e.li,{children:"start \u4e0e stop \u7528\u4e8e\u9650\u5b9a\u67e5\u8be2\u8303\u56f4\uff0c\u4f5c\u7528\u4e8e\u7d22\u5f15\uff0c\u8868\u793a\u5f00\u59cb\u548c\u7ed3\u675f\u7d22\u5f15"}),"\n",(0,i.jsx)(e.li,{children:"offset \u4e0e count \u7528\u4e8e\u9650\u5b9a\u67e5\u8be2\u8303\u56f4\uff0c\u4f5c\u7528\u4e8e\u67e5\u8be2\u7ed3\u679c\uff0c\u8868\u793a\u5f00\u59cb\u4f4d\u7f6e\u548c\u6570\u636e\u603b\u91cf"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u96c6\u5408\u7684\u4ea4\u3001\u5e76\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"zinterstore destination numkeys key [key ...]\t#\u4e24\u4e2a\u96c6\u5408\u7684\u4ea4\u96c6\u5e76\u5b58\u50a8\u5230\u6307\u5b9a\u96c6\u5408\u4e2d\nzunionstore destination numkeys key [key ...]\t#\u4e24\u4e2a\u96c6\u5408\u7684\u5e76\u96c6\u5e76\u5b58\u50a8\u5230\u6307\u5b9a\u96c6\u5408\u4e2d\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\u4e8b\u9879\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"score \u4fdd\u5b58\u7684\u6570\u636e\u5b58\u50a8\u7a7a\u95f4\u662f 64 \u4f4d\uff0c\u5982\u679c\u662f\u6574\u6570\u8303\u56f4\u662f -9007199254740992~9007199254740992"}),"\n",(0,i.jsx)(e.li,{children:"score \u4fdd\u5b58\u7684\u6570\u636e\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u53cc\u7cbe\u5ea6\u7684 double \u503c\uff0c\u57fa\u4e8e\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570\u7684\u7279\u5f81\u53ef\u80fd\u4f1a\u4e22\u5931\u7cbe\u5ea6\uff0c\u614e\u91cd\u4f7f\u7528"}),"\n",(0,i.jsx)(e.li,{children:"sorted_set \u5e95\u5c42\u5b58\u50a8\u8fd8\u662f\u57fa\u4e8e set \u7ed3\u6784\u7684\uff0c\u56e0\u6b64\u6570\u636e\u4e0d\u80fd\u91cd\u590d\uff0c\u5982\u679c\u91cd\u590d\u6dfb\u52a0\u76f8\u540c\u7684\u6570\u636e\uff0cscore \u503c\u5c06\u88ab\u53cd\u590d\u8986\u76d6\uff0c\u4fdd\u7559\u6700\u540e\u4e00\u6b21\u4fee\u6539\u7684\u7ed3\u679c"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5b9e\u73b0-4",children:"\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.p,{children:"\u6709\u5e8f\u96c6\u5408\u5bf9\u8c61\u7684\u5185\u90e8\u7f16\u7801\u6709\u4e24\u79cd\uff1aziplist\uff08\u538b\u7f29\u5217\u8868\uff09\u548c skiplist\uff08\u8df3\u8dc3\u8868\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u538b\u7f29\u5217\u8868\u5b9e\u73b0\u6709\u5e8f\u96c6\u5408\u5bf9\u8c61\uff1aziplist \u672c\u8eab\u662f\u6709\u5e8f\u3001\u4e0d\u53ef\u91cd\u590d\u7684\uff0c\u7b26\u5408\u6709\u5e8f\u96c6\u5408\u7684\u7279\u6027"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(25053).A+"",width:"1238",height:"162"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u8df3\u8dc3\u8868\u5b9e\u73b0\u6709\u5e8f\u96c6\u5408\u5bf9\u8c61\uff1a",(0,i.jsx)(e.strong,{children:"\u5e95\u5c42\u662f zset \u7ed3\u6784\uff0czset \u540c\u65f6\u5305\u542b\u5b57\u5178\u548c\u8df3\u8dc3\u8868\u7684\u7ed3\u6784"}),"\uff0c\u56fe\u793a\u5b57\u5178\u548c\u8df3\u8dc3\u8868\u4e2d\u91cd\u590d\u5c55\u793a\u4e86\u5404\u4e2a\u5143\u7d20\u7684\u6210\u5458\u548c\u5206\u503c\uff0c\u4f46\u5b9e\u9645\u4e0a\u4e24\u8005\u4f1a",(0,i.jsx)(e.strong,{children:"\u901a\u8fc7\u6307\u9488\u6765\u5171\u4eab\u76f8\u540c\u5143\u7d20\u7684\u6210\u5458\u548c\u5206\u503c"}),"\uff0c\u4e0d\u4f1a\u4ea7\u751f\u7a7a\u95f4\u6d6a\u8d39"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct zset {\n    zskiplist *zsl;\n    dict *dict;\n} zset;\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(52236).A+"",width:"1463",height:"746"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u5b57\u5178\u52a0\u8df3\u8dc3\u8868\u7684\u4f18\u52bf\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5b57\u5178\u4e3a\u6709\u5e8f\u96c6\u5408\u521b\u5efa\u4e86\u4e00\u4e2a",(0,i.jsx)(e.strong,{children:"\u4ece\u6210\u5458\u5230\u5206\u503c\u7684\u6620\u5c04"}),"\uff0c\u7528 O(1) \u590d\u6742\u5ea6\u67e5\u627e\u7ed9\u5b9a\u6210\u5458\u7684\u5206\u503c"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6392\u5e8f\u64cd\u4f5c\u4f7f\u7528\u8df3\u8dc3\u8868\u5b8c\u6210"}),"\uff0c\u8282\u7701\u6bcf\u6b21\u91cd\u65b0\u6392\u5e8f\u5e26\u6765\u7684\u65f6\u95f4\u6210\u672c\u548c\u7a7a\u95f4\u6210\u672c"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528 ziplist \u683c\u5f0f\u5b58\u50a8\u9700\u8981\u6ee1\u8db3\u4ee5\u4e0b\u4e24\u4e2a\u6761\u4ef6\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6709\u5e8f\u96c6\u5408\u4fdd\u5b58\u7684\u5143\u7d20\u4e2a\u6570\u8981\u5c0f\u4e8e 128 \u4e2a\uff1b"}),"\n",(0,i.jsx)(e.li,{children:"\u6709\u5e8f\u96c6\u5408\u4fdd\u5b58\u7684\u6240\u6709\u5143\u7d20\u5927\u5c0f\u90fd\u5c0f\u4e8e 64 \u5b57\u8282"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u5143\u7d20\u6bd4\u8f83\u591a\u65f6\uff0c\u6b64\u65f6 ziplist \u7684\u8bfb\u5199\u6548\u7387\u4f1a\u4e0b\u964d\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662f O(n)\uff0c\u8df3\u8868\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f O(logn)"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3a\u4ec0\u4e48\u7528\u8df3\u8868\u800c\u4e0d\u7528\u5e73\u8861\u6811\uff1f"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5728\u505a\u8303\u56f4\u67e5\u627e\u7684\u65f6\u5019\uff0c\u8df3\u8868\u64cd\u4f5c\u7b80\u5355\uff08\u524d\u8fdb\u6307\u9488\u6216\u540e\u9000\u6307\u9488\uff09\uff0c\u5e73\u8861\u6811\u9700\u8981\u56de\u65cb\u67e5\u627e"}),"\n",(0,i.jsx)(e.li,{children:"\u8df3\u8868\u6bd4\u5e73\u8861\u6811\u5b9e\u73b0\u7b80\u5355\uff0c\u5e73\u8861\u6811\u7684\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u53ef\u80fd\u5f15\u53d1\u5b50\u6811\u7684\u65cb\u8f6c\u8c03\u6574\uff0c\u800c\u8df3\u8868\u7684\u63d2\u5165\u548c\u5220\u9664\u53ea\u9700\u8981\u4fee\u6539\u76f8\u90bb\u8282\u70b9\u7684\u6307\u9488"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5e94\u7528-4",children:"\u5e94\u7528"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6392\u884c\u699c"}),"\n",(0,i.jsx)(e.li,{children:"\u5bf9\u4e8e\u57fa\u4e8e\u65f6\u95f4\u7ebf\u9650\u5b9a\u7684\u4efb\u52a1\u5904\u7406\uff0c\u5c06\u5904\u7406\u65f6\u95f4\u8bb0\u5f55\u4e3a score \u503c\uff0c\u5229\u7528\u6392\u5e8f\u529f\u80fd\u533a\u5206\u5904\u7406\u7684\u5148\u540e\u987a\u5e8f"}),"\n",(0,i.jsx)(e.li,{children:"\u5f53\u4efb\u52a1\u6216\u8005\u6d88\u606f\u5f85\u5904\u7406\uff0c\u5f62\u6210\u4e86\u4efb\u52a1\u961f\u5217\u6216\u6d88\u606f\u961f\u5217\u65f6\uff0c\u5bf9\u4e8e\u9ad8\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\u8981\u4fdd\u969c\u5bf9\u5176\u4f18\u5148\u5904\u7406\uff0c\u91c7\u7528 score \u8bb0\u5f55\u6743\u91cd"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"bitmaps",children:"Bitmaps"}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u64cd\u4f5c-3",children:"\u57fa\u672c\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"Bitmaps \u662f\u4e8c\u8fdb\u5236\u4f4d\u6570\u7ec4\uff08bit array\uff09\uff0c\u5e95\u5c42\u4f7f\u7528 SDS \u5b57\u7b26\u4e32\u8868\u793a\uff0c\u56e0\u4e3a SDS \u662f\u4e8c\u8fdb\u5236\u5b89\u5168\u7684"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(53376).A+"",width:"1017",height:"316"})}),"\n",(0,i.jsxs)(e.p,{children:["buf \u6570\u7ec4\u7684\u6bcf\u4e2a\u5b57\u8282\u7528\u4e00\u884c\u8868\u793a\uff0cbuf[1] \u662f ",(0,i.jsx)(e.code,{children:"'\\0'"}),"\uff0c\u4fdd\u5b58\u4f4d\u6570\u7ec4\u7684\u987a\u5e8f\u548c\u4e66\u5199\u4f4d\u6570\u7ec4\u7684\u987a\u5e8f\u662f\u5b8c\u5168\u76f8\u53cd\u7684\uff0c\u56fe\u793a\u7684\u4f4d\u6570\u7ec4 0100 1101"]}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u7ed3\u6784\u7684\u8be6\u89e3\u67e5\u770b Java \u2192 Algorithm \u2192 \u4f4d\u56fe"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u547d\u4ee4\u5b9e\u73b0",children:"\u547d\u4ee4\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.h5,{id:"getbit",children:"GETBIT"}),"\n",(0,i.jsx)(e.p,{children:"GETBIT \u547d\u4ee4\u83b7\u53d6\u4f4d\u6570\u7ec4 bitarray \u5728 offset \u504f\u79fb\u91cf\u4e0a\u7684\u4e8c\u8fdb\u5236\u4f4d\u7684\u503c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"GETBIT <bitarray> <offset>\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u8fc7\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u8ba1\u7b97 ",(0,i.jsx)(e.code,{children:"byte = offset/8"}),"\uff08\u5411\u4e0b\u53d6\u6574\uff09, byte \u503c\u8bb0\u5f55\u6570\u636e\u4fdd\u5b58\u5728\u4f4d\u6570\u7ec4\u4e2d\u7684\u7d22\u5f15"]}),"\n",(0,i.jsxs)(e.li,{children:["\u8ba1\u7b97 ",(0,i.jsx)(e.code,{children:"bit = (offset mod 8) + 1"}),"\uff0cbit \u503c\u8bb0\u5f55\u6570\u636e\u5728\u4f4d\u6570\u7ec4\u4e2d\u7684\u7b2c\u51e0\u4e2a\u4e8c\u8fdb\u5236\u4f4d"]}),"\n",(0,i.jsx)(e.li,{children:"\u6839\u636e byte \u548c bit \u503c\uff0c\u5728\u4f4d\u6570\u7ec4 bitarray \u4e2d\u5b9a\u4f4d offset \u504f\u79fb\u91cf\u6307\u5b9a\u7684\u4e8c\u8fdb\u5236\u4f4d\uff0c\u5e76\u8fd4\u56de\u8fd9\u4e2a\u4f4d\u7684\u503c"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"GETBIT \u547d\u4ee4\u6267\u884c\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u53ef\u4ee5\u5728\u5e38\u6570\u65f6\u95f4\u5185\u5b8c\u6210\uff0c\u6240\u4ee5\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(1)"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"setbit",children:"SETBIT"}),"\n",(0,i.jsx)(e.p,{children:"SETBIT \u5c06\u4f4d\u6570\u7ec4 bitarray \u5728 offset \u504f\u79fb\u91cf\u4e0a\u7684\u4e8c\u8fdb\u5236\u4f4d\u7684\u503c\u8bbe\u7f6e\u4e3a value\uff0c\u5e76\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u4e8c\u8fdb\u5236\u4f4d\u7684\u65e7\u503c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"SETBIT <bitarray> <offset> <value> \n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u8fc7\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u8ba1\u7b97 ",(0,i.jsx)(e.code,{children:"len = offset/8 + 1"}),"\uff0clen \u503c\u8bb0\u5f55\u4e86\u4fdd\u5b58\u8be5\u6570\u636e\u81f3\u5c11\u9700\u8981\u591a\u5c11\u4e2a\u5b57\u8282"]}),"\n",(0,i.jsx)(e.li,{children:"\u68c0\u67e5 bitarray \u952e\u4fdd\u5b58\u7684\u4f4d\u6570\u7ec4\u7684\u957f\u5ea6\u662f\u5426\u5c0f\u4e8e len\uff0c\u6210\u7acb\u5c31\u4f1a\u5c06 SDS \u6269\u5c55\u4e3a len \u5b57\u8282\uff08\u6ce8\u610f\u7a7a\u95f4\u9884\u5206\u914d\u673a\u5236\uff09\uff0c\u6240\u6709\u65b0\u6269\u5c55\u7a7a\u95f4\u7684\u4e8c\u8fdb\u5236\u4f4d\u7684\u503c\u7f6e\u4e3a 0"}),"\n",(0,i.jsxs)(e.li,{children:["\u8ba1\u7b97 ",(0,i.jsx)(e.code,{children:"byte = offset/8"}),"\uff08\u5411\u4e0b\u53d6\u6574\uff09, byte \u503c\u8bb0\u5f55\u6570\u636e\u4fdd\u5b58\u5728\u4f4d\u6570\u7ec4\u4e2d\u7684\u7d22\u5f15"]}),"\n",(0,i.jsxs)(e.li,{children:["\u8ba1\u7b97 ",(0,i.jsx)(e.code,{children:"bit = (offset mod 8) + 1"}),"\uff0cbit \u503c\u8bb0\u5f55\u6570\u636e\u5728\u4f4d\u6570\u7ec4\u4e2d\u7684\u7b2c\u51e0\u4e2a\u4e8c\u8fdb\u5236\u4f4d"]}),"\n",(0,i.jsx)(e.li,{children:"\u6839\u636e byte \u548c bit \u503c\uff0c\u5728\u4f4d\u6570\u7ec4 bitarray \u4e2d\u5b9a\u4f4d offset \u504f\u79fb\u91cf\u6307\u5b9a\u7684\u4e8c\u8fdb\u5236\u4f4d\uff0c\u9996\u5148\u5c06\u6307\u5b9a\u4f4d\u73b0\u5b58\u7684\u503c\u4fdd\u5b58\u5728 oldvalue \u53d8\u91cf\uff0c\u7136\u540e\u5c06\u65b0\u503c value \u8bbe\u7f6e\u4e3a\u8fd9\u4e2a\u4e8c\u8fdb\u5236\u4f4d\u7684\u503c"}),"\n",(0,i.jsx)(e.li,{children:"\u5411\u5ba2\u6237\u7aef\u8fd4\u56de oldvalue \u53d8\u91cf\u7684\u503c"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"bitcount",children:"BITCOUNT"}),"\n",(0,i.jsx)(e.p,{children:"BITCOUNT \u547d\u4ee4\u7528\u4e8e\u7edf\u8ba1\u7ed9\u5b9a\u4f4d\u6570\u7ec4\u4e2d\uff0c\u503c\u4e3a 1 \u7684\u4e8c\u8fdb\u5236\u4f4d\u7684\u6570\u91cf"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"BITCOUNT <bitarray> [start end]\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4e8c\u8fdb\u5236\u4f4d\u7edf\u8ba1\u7b97\u6cd5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u904d\u5386\u6cd5\uff1a\u904d\u5386\u4f4d\u6570\u7ec4\u4e2d\u7684\u6bcf\u4e2a\u4e8c\u8fdb\u5236\u4f4d"}),"\n",(0,i.jsx)(e.li,{children:"\u67e5\u8868\u7b97\u6cd5\uff1a\u8bfb\u53d6\u6bcf\u4e2a\u5b57\u8282\uff088 \u4f4d\uff09\u7684\u6570\u636e\uff0c\u67e5\u8868\u83b7\u53d6\u6570\u503c\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u4e2d\u6709\u51e0\u4e2a 1"}),"\n",(0,i.jsx)(e.li,{children:"variable-precision SWAR\u7b97\u6cd5\uff1a\u8ba1\u7b97\u6c49\u660e\u8ddd\u79bb"}),"\n",(0,i.jsxs)(e.li,{children:["Redis \u5b9e\u73b0\uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u4e8c\u8fdb\u5236\u4f4d\u7684\u6570\u91cf\u5927\u4e8e\u7b49\u4e8e 128 \u4f4d\uff0c \u90a3\u4e48\u4f7f\u7528 variable-precision SWAR \u7b97\u6cd5\u6765\u8ba1\u7b97\u4e8c\u8fdb\u5236\u4f4d\u7684\u6c49\u660e\u91cd\u91cf"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u4e8c\u8fdb\u5236\u4f4d\u7684\u6570\u91cf\u5c0f\u4e8e 128 \u4f4d\uff0c\u90a3\u4e48\u4f7f\u7528\u67e5\u8868\u7b97\u6cd5\u6765\u8ba1\u7b97\u4e8c\u8fdb\u5236\u4f4d\u7684\u6c49\u660e\u91cd\u91cf"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"bitop",children:"BITOP"}),"\n",(0,i.jsx)(e.p,{children:"BITOP \u547d\u4ee4\u5bf9\u6307\u5b9a key \u6309\u4f4d\u8fdb\u884c\u4ea4\u3001\u5e76\u3001\u975e\u3001\u5f02\u6216\u64cd\u4f5c\uff0c\u5e76\u5c06\u7ed3\u679c\u4fdd\u5b58\u5230\u6307\u5b9a\u7684\u952e\u4e2d"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"BITOP OPTION destKey key1 [key2...]\n"})}),"\n",(0,i.jsx)(e.p,{children:"OPTION \u6709 AND\uff08\u4e0e\uff09\u3001OR\uff08\u6216\uff09\u3001 XOR\uff08\u5f02\u6216\uff09\u548c NOT\uff08\u975e\uff09\u56db\u4e2a\u9009\u9879"}),"\n",(0,i.jsx)(e.p,{children:"AND\u3001OR\u3001XOR \u4e09\u4e2a\u547d\u4ee4\u53ef\u4ee5\u63a5\u53d7\u591a\u4e2a\u4f4d\u6570\u7ec4\u4f5c\u4e3a\u8f93\u5165\uff0c\u9700\u8981\u904d\u5386\u8f93\u5165\u7684\u6bcf\u4e2a\u4f4d\u6570\u7ec4\u7684\u6bcf\u4e2a\u5b57\u8282\u6765\u8fdb\u884c\u8ba1\u7b97\uff0c\u6240\u4ee5\u547d\u4ee4\u7684\u590d\u6742\u5ea6\u4e3a O(n^2)\uff1b\u4e0e\u6b64\u76f8\u53cd\uff0cNOT \u547d\u4ee4\u53ea\u63a5\u53d7\u4e00\u4e2a\u4f4d\u6570\u7ec4\u8f93\u5165\uff0c\u6240\u4ee5\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(n)"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5e94\u7528\u573a\u666f-1",children:"\u5e94\u7528\u573a\u666f"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u89e3\u51b3 Redis \u7f13\u5b58\u7a7f\u900f"}),"\uff0c\u5224\u65ad\u7ed9\u5b9a\u6570\u636e\u662f\u5426\u5b58\u5728\uff0c \u9632\u6b62\u7f13\u5b58\u7a7f\u900f"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(7262).A+"",width:"886",height:"633"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5783\u573e\u90ae\u4ef6\u8fc7\u6ee4\uff0c\u5bf9\u6bcf\u4e00\u4e2a\u53d1\u9001\u90ae\u4ef6\u7684\u5730\u5740\u8fdb\u884c\u5224\u65ad\u662f\u5426\u5728\u5e03\u9686\u7684\u9ed1\u540d\u5355\u4e2d\uff0c\u5982\u679c\u5728\u5c31\u5224\u65ad\u4e3a\u5783\u573e\u90ae\u4ef6"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u722c\u866b\u53bb\u91cd\uff0c\u722c\u7ed9\u5b9a\u7f51\u5740\u7684\u65f6\u5019\u5bf9\u5df2\u7ecf\u722c\u53d6\u8fc7\u7684 URL \u53bb\u91cd"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fe1\u606f\u72b6\u6001\u7edf\u8ba1"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"hyper",children:"Hyper"}),"\n",(0,i.jsx)(e.p,{children:"\u57fa\u6570\u662f\u6570\u636e\u96c6\u53bb\u91cd\u540e\u5143\u7d20\u4e2a\u6570\uff0cHyperLogLog \u662f\u7528\u6765\u505a\u57fa\u6570\u7edf\u8ba1\u7684\uff0c\u8fd0\u7528\u4e86 LogLog \u7684\u7b97\u6cd5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"{1, 3, 5, 7, 5, 7, 8} \t\u57fa\u6570\u96c6\uff1a {1, 3, 5 ,7, 8} \t\u57fa\u6570\uff1a5\n{1, 1, 1, 1, 1, 7, 1} \t\u57fa\u6570\u96c6\uff1a {1,7} \t\t\t\t\u57fa\u6570\uff1a2\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u76f8\u5173\u6307\u4ee4\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6dfb\u52a0\u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"pfadd key element [element ...]\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7edf\u8ba1\u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"pfcount key [key ...]\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5408\u5e76\u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"pfmerge destkey sourcekey [sourcekey...]\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5e94\u7528\u573a\u666f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7528\u4e8e\u8fdb\u884c\u57fa\u6570\u7edf\u8ba1\uff0c\u4e0d\u662f\u96c6\u5408\u4e0d\u4fdd\u5b58\u6570\u636e\uff0c\u53ea\u8bb0\u5f55\u6570\u91cf\u800c\u4e0d\u662f\u5177\u4f53\u6570\u636e\uff0c\u6bd4\u5982\u7f51\u7ad9\u7684\u8bbf\u95ee\u91cf"}),"\n",(0,i.jsx)(e.li,{children:"\u6838\u5fc3\u662f\u57fa\u6570\u4f30\u7b97\u7b97\u6cd5\uff0c\u6700\u7ec8\u6570\u503c\u5b58\u5728\u4e00\u5b9a\u8bef\u5dee"}),"\n",(0,i.jsx)(e.li,{children:"\u8bef\u5dee\u8303\u56f4\uff1a\u57fa\u6570\u4f30\u8ba1\u7684\u7ed3\u679c\u662f\u4e00\u4e2a\u5e26\u6709 0.81% \u6807\u51c6\u9519\u8bef\u7684\u8fd1\u4f3c\u503c"}),"\n",(0,i.jsx)(e.li,{children:"\u8017\u7a7a\u95f4\u6781\u5c0f\uff0c\u6bcf\u4e2a hyperloglog key \u5360\u7528\u4e8612K\u7684\u5185\u5b58\u7528\u4e8e\u6807\u8bb0\u57fa\u6570"}),"\n",(0,i.jsx)(e.li,{children:"pfadd \u547d\u4ee4\u4e0d\u662f\u4e00\u6b21\u6027\u5206\u914d12K\u5185\u5b58\u4f7f\u7528\uff0c\u4f1a\u968f\u7740\u57fa\u6570\u7684\u589e\u52a0\u5185\u5b58\u9010\u6e10\u589e\u5927"}),"\n",(0,i.jsx)(e.li,{children:"Pfmerge \u547d\u4ee4\u5408\u5e76\u540e\u5360\u7528\u7684\u5b58\u50a8\u7a7a\u95f4\u4e3a12K\uff0c\u65e0\u8bba\u5408\u5e76\u4e4b\u524d\u6570\u636e\u91cf\u591a\u5c11"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"geo",children:"GEO"}),"\n",(0,i.jsx)(e.p,{children:"GeoHash \u662f\u4e00\u79cd\u5730\u5740\u7f16\u7801\u65b9\u6cd5\uff0c\u628a\u4e8c\u7ef4\u7684\u7a7a\u95f4\u7ecf\u7eac\u5ea6\u6570\u636e\u7f16\u7801\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6dfb\u52a0\u5750\u6807\u70b9"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"geoadd key longitude latitude member [longitude latitude member ...]\ngeoradius key longitude latitude radius m|km|ft|mi [withcoord] [withdist] [withhash] [count count]\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u83b7\u53d6\u5750\u6807\u70b9"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"geopos key member [member ...]\ngeoradiusbymember key member radius m|km|ft|mi [withcoord] [withdist] [withhash] [count count]\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8ba1\u7b97\u8ddd\u79bb"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"geodist key member1 member2 [unit]\t#\u8ba1\u7b97\u5750\u6807\u70b9\u8ddd\u79bb\ngeohash key member [member ...]\t\t#\u8ba1\u7b97\u7ecf\u7eac\u5ea6\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Redis \u5e94\u7528\u4e8e\u5730\u7406\u4f4d\u7f6e\u8ba1\u7b97"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u6301\u4e45\u673a\u5236",children:"\u6301\u4e45\u673a\u5236"}),"\n",(0,i.jsx)(e.h3,{id:"\u6982\u8ff0-1",children:"\u6982\u8ff0"}),"\n",(0,i.jsx)(e.p,{children:"\u6301\u4e45\u5316\uff1a\u5229\u7528\u6c38\u4e45\u6027\u5b58\u50a8\u4ecb\u8d28\u5c06\u6570\u636e\u8fdb\u884c\u4fdd\u5b58\uff0c\u5728\u7279\u5b9a\u7684\u65f6\u95f4\u5c06\u4fdd\u5b58\u7684\u6570\u636e\u8fdb\u884c\u6062\u590d\u7684\u5de5\u4f5c\u673a\u5236\u79f0\u4e3a\u6301\u4e45\u5316"}),"\n",(0,i.jsx)(e.p,{children:"\u4f5c\u7528\uff1a\u6301\u4e45\u5316\u7528\u4e8e\u9632\u6b62\u6570\u636e\u7684\u610f\u5916\u4e22\u5931\uff0c\u786e\u4fdd\u6570\u636e\u5b89\u5168\u6027\uff0c\u56e0\u4e3a Redis \u662f\u5185\u5b58\u7ea7\uff0c\u6240\u4ee5\u9700\u8981\u6301\u4e45\u5316\u5230\u78c1\u76d8"}),"\n",(0,i.jsxs)(e.p,{children:["\u8ba1\u7b97\u673a\u4e2d\u7684\u6570\u636e\u5168\u90e8\u90fd\u662f\u4e8c\u8fdb\u5236\uff0c\u4fdd\u5b58\u4e00\u7ec4\u6570\u636e\u6709\u4e24\u79cd\u65b9\u5f0f\n",(0,i.jsx)(e.img,{src:s(41031).A+"",width:"1903",height:"800"})]}),"\n",(0,i.jsx)(e.p,{children:"RDB\uff1a\u5c06\u5f53\u524d\u6570\u636e\u72b6\u6001\u8fdb\u884c\u4fdd\u5b58\uff0c\u5feb\u7167\u5f62\u5f0f\uff0c\u5b58\u50a8\u6570\u636e\u7ed3\u679c\uff0c\u5b58\u50a8\u683c\u5f0f\u7b80\u5355"}),"\n",(0,i.jsx)(e.p,{children:"AOF\uff1a\u5c06\u6570\u636e\u7684\u64cd\u4f5c\u8fc7\u7a0b\u8fdb\u884c\u4fdd\u5b58\uff0c\u65e5\u5fd7\u5f62\u5f0f\uff0c\u5b58\u50a8\u64cd\u4f5c\u8fc7\u7a0b\uff0c\u5b58\u50a8\u683c\u5f0f\u590d\u6742"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"rdb",children:"RDB"}),"\n",(0,i.jsx)(e.h4,{id:"\u6587\u4ef6\u521b\u5efa",children:"\u6587\u4ef6\u521b\u5efa"}),"\n",(0,i.jsx)(e.p,{children:"RDB \u6301\u4e45\u5316\u529f\u80fd\u6240\u751f\u6210\u7684 RDB \u6587\u4ef6\u662f\u4e00\u4e2a\u7ecf\u8fc7\u538b\u7f29\u7684\u7d27\u51d1\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u901a\u8fc7\u8be5\u6587\u4ef6\u53ef\u4ee5\u8fd8\u539f\u751f\u6210 RDB \u6587\u4ef6\u65f6\u7684\u6570\u636e\u5e93\u72b6\u6001\uff0c\u6709\u4e24\u4e2a Redis \u547d\u4ee4\u53ef\u4ee5\u751f\u6210 RDB \u6587\u4ef6\uff0c\u4e00\u4e2a\u662f SAVE\uff0c\u53e6\u4e00\u4e2a\u662f BGSAVE"}),"\n",(0,i.jsx)(e.h5,{id:"save",children:"SAVE"}),"\n",(0,i.jsx)(e.p,{children:"SAVE \u6307\u4ee4\uff1a\u624b\u52a8\u6267\u884c\u4e00\u6b21\u4fdd\u5b58\u64cd\u4f5c\uff0c\u8be5\u6307\u4ee4\u7684\u6267\u884c\u4f1a\u963b\u585e\u5f53\u524d Redis \u670d\u52a1\u5668\uff0c\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u6240\u6709\u547d\u4ee4\u8bf7\u6c42\u90fd\u4f1a\u88ab\u62d2\u7edd\uff0c\u76f4\u5230\u5f53\u524d RDB \u8fc7\u7a0b\u5b8c\u6210\u4e3a\u6b62\uff0c\u6709\u53ef\u80fd\u4f1a\u9020\u6210\u957f\u65f6\u95f4\u963b\u585e\uff0c\u7ebf\u4e0a\u73af\u5883\u4e0d\u5efa\u8bae\u4f7f\u7528"}),"\n",(0,i.jsxs)(e.p,{children:["\u5de5\u4f5c\u539f\u7406\uff1aRedis \u662f\u4e2a",(0,i.jsx)(e.strong,{children:"\u5355\u7ebf\u7a0b\u7684\u5de5\u4f5c\u6a21\u5f0f"}),"\uff0c\u4f1a\u521b\u5efa\u4e00\u4e2a\u4efb\u52a1\u961f\u5217\uff0c\u6240\u6709\u7684\u547d\u4ee4\u90fd\u4f1a\u8fdb\u5230\u8fd9\u4e2a\u961f\u5217\u6392\u961f\u6267\u884c\u3002\u5f53\u67d0\u4e2a\u6307\u4ee4\u5728\u6267\u884c\u7684\u65f6\u5019\uff0c\u961f\u5217\u540e\u9762\u7684\u6307\u4ee4\u90fd\u8981\u7b49\u5f85\uff0c\u6240\u4ee5\u8fd9\u79cd\u6267\u884c\u65b9\u5f0f\u4f1a\u975e\u5e38\u8017\u65f6"]}),"\n",(0,i.jsx)(e.p,{children:"\u914d\u7f6e redis.conf\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'dir path\t\t\t\t#\u8bbe\u7f6e\u5b58\u50a8.rdb\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u901a\u5e38\u8bbe\u7f6e\u6210\u5b58\u50a8\u7a7a\u95f4\u8f83\u5927\u7684\u76ee\u5f55\u4e2d\uff0c\u76ee\u5f55\u540d\u79f0data\ndbfilename "x.rdb"\t\t#\u8bbe\u7f6e\u672c\u5730\u6570\u636e\u5e93\u6587\u4ef6\u540d\uff0c\u9ed8\u8ba4\u503c\u4e3adump.rdb\uff0c\u901a\u5e38\u8bbe\u7f6e\u4e3adump-\u7aef\u53e3\u53f7.rdb\nrdbcompression yes|no\t#\u8bbe\u7f6e\u5b58\u50a8\u81f3\u672c\u5730\u6570\u636e\u5e93\u65f6\u662f\u5426\u538b\u7f29\u6570\u636e\uff0c\u9ed8\u8ba4yes\uff0c\u8bbe\u7f6e\u4e3ano\u8282\u7701CPU\u8fd0\u884c\u65f6\u95f4\nrdbchecksum yes|no\t\t#\u8bbe\u7f6e\u8bfb\u5199\u6587\u4ef6\u8fc7\u7a0b\u662f\u5426\u8fdb\u884cRDB\u683c\u5f0f\u6821\u9a8c\uff0c\u9ed8\u8ba4yes\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"bgsave",children:"BGSAVE"}),"\n",(0,i.jsxs)(e.p,{children:["BGSAVE\uff1abg \u662f background\uff0c\u4ee3\u8868\u540e\u53f0\u6267\u884c\uff0c\u547d\u4ee4\u7684\u5b8c\u6210\u9700\u8981\u4e24\u4e2a\u8fdb\u7a0b\uff0c",(0,i.jsx)(e.strong,{children:"\u8fdb\u7a0b\u4e4b\u95f4\u4e0d\u76f8\u4e92\u5f71\u54cd"}),"\uff0c\u6240\u4ee5\u6301\u4e45\u5316\u671f\u95f4 Redis \u6b63\u5e38\u5de5\u4f5c"]}),"\n",(0,i.jsx)(e.p,{children:"\u5de5\u4f5c\u539f\u7406\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(79288).A+"",width:"1172",height:"240"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6d41\u7a0b\uff1a\u5ba2\u6237\u7aef\u53d1\u51fa BGSAVE \u6307\u4ee4\uff0cRedis \u670d\u52a1\u5668\u4f7f\u7528 fork \u51fd\u6570\u521b\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u7136\u540e\u54cd\u5e94\u540e\u53f0\u5df2\u7ecf\u5f00\u59cb\u6267\u884c\u7684\u4fe1\u606f\u7ed9\u5ba2\u6237\u7aef\u3002\u5b50\u8fdb\u7a0b\u4f1a\u5f02\u6b65\u6267\u884c\u6301\u4e45\u5316\u7684\u64cd\u4f5c\uff0c\u6301\u4e45\u5316\u8fc7\u7a0b\u662f\u5148\u5c06\u6570\u636e\u5199\u5165\u5230\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\u4e2d\uff0c\u6301\u4e45\u5316\u64cd\u4f5c\u7ed3\u675f\u518d\u7528\u8fd9\u4e2a\u4e34\u65f6\u6587\u4ef6",(0,i.jsx)(e.strong,{children:"\u66ff\u6362"}),"\u4e0a\u6b21\u6301\u4e45\u5316\u7684\u6587\u4ef6"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"# \u521b\u5efa\u5b50\u8fdb\u7a0b\npid = fork()\nif pid == 0:\n    # \u5b50\u8fdb\u7a0b\u8d1f\u8d23\u521b\u5efa RDB \u6587\u4ef6\n    rdbSave()\n    # \u5b8c\u6210\u4e4b\u540e\u5411\u7236\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7\n    signal_parent()\nelif pid > 0:\n    # \u7236\u8fdb\u7a0b\u7ee7\u7eed\u5904\u7406\u547d\u4ee4\u8bf7\u6c42\uff0c\u5e76\u901a\u8fc7\u8f6e\u8be2\u7b49\u5f85\u5b50\u8fdb\u7a0b\u7684\u4fe1\u53f7\n    handle_request_and_wait_signal()\nelse:\n    # \u5904\u7406\u51fa\u9519\u6043\u51b5\n    handle_fork_error() \n"})}),"\n",(0,i.jsx)(e.p,{children:"\u914d\u7f6e redis.conf"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"stop-writes-on-bgsave-error yes|no\t#\u540e\u53f0\u5b58\u50a8\u8fc7\u7a0b\u4e2d\u5982\u679c\u51fa\u73b0\u9519\u8bef\uff0c\u662f\u5426\u505c\u6b62\u4fdd\u5b58\u64cd\u4f5c\uff0c\u9ed8\u8ba4yes\ndbfilename filename  \ndir path  \nrdbcompression yes|no  \nrdbchecksum yes|no\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1aBGSAVE \u547d\u4ee4\u662f\u9488\u5bf9 SAVE \u963b\u585e\u95ee\u9898\u505a\u7684\u4f18\u5316\uff0cRedis \u5185\u90e8\u6240\u6709\u6d89\u53ca\u5230 RDB \u64cd\u4f5c\u90fd\u91c7\u7528 BGSAVE \u7684\u65b9\u5f0f\uff0cSAVE \u547d\u4ee4\u653e\u5f03\u4f7f\u7528"}),"\n",(0,i.jsx)(e.p,{children:"\u5728 BGSAVE \u547d\u4ee4\u6267\u884c\u671f\u95f4\uff0c\u670d\u52a1\u5668\u5904\u7406 SAVE\u3001BGSAVE\u3001BGREWRITEAOF \u4e09\u4e2a\u547d\u4ee4\u7684\u65b9\u5f0f\u4f1a\u548c\u5e73\u65f6\u6709\u6240\u4e0d\u540c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"SAVE \u547d\u4ee4\u4f1a\u88ab\u670d\u52a1\u5668\u62d2\u7edd\uff0c\u670d\u52a1\u5668\u7981\u6b62 SAVE \u548c BGSAVE \u547d\u4ee4\u540c\u65f6\u6267\u884c\u662f\u4e3a\u4e86\u907f\u514d\u7236\u8fdb\u7a0b\uff08\u670d\u52a1\u5668\u8fdb\u7a0b\uff09\u548c\u5b50\u8fdb\u7a0b\u540c\u65f6\u6267\u884c\u4e24\u4e2a rdbSave \u8c03\u7528\uff0c\u4ea7\u751f\u7ade\u4e89\u6761\u4ef6"}),"\n",(0,i.jsx)(e.li,{children:"BGSAVE \u547d\u4ee4\u4e5f\u4f1a\u88ab\u670d\u52a1\u5668\u62d2\u7edd\uff0c\u4e5f\u4f1a\u4ea7\u751f\u7ade\u4e89\u6761\u4ef6"}),"\n",(0,i.jsxs)(e.li,{children:["BGREWRITEAOF \u548c BGSAVE \u4e24\u4e2a\u547d\u4ee4\u4e0d\u80fd\u540c\u65f6\u6267\u884c\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c BGSAVE \u547d\u4ee4\u6b63\u5728\u6267\u884c\uff0c\u90a3\u4e48 BGREWRITEAOF \u547d\u4ee4\u4f1a\u88ab",(0,i.jsx)(e.strong,{children:"\u5ef6\u8fdf"}),"\u5230 BGSAVE \u547d\u4ee4\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\u6267\u884c"]}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c BGREWRITEAOF \u547d\u4ee4\u6b63\u5728\u6267\u884c\uff0c\u90a3\u4e48 BGSAVE \u547d\u4ee4\u4f1a\u88ab\u670d\u52a1\u5668\u62d2\u7edd"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u7279\u6b8a\u6307\u4ee4",children:"\u7279\u6b8a\u6307\u4ee4"}),"\n",(0,i.jsx)(e.p,{children:"RDB \u7279\u6b8a\u542f\u52a8\u5f62\u5f0f\u7684\u6307\u4ee4\uff08\u5ba2\u6237\u7aef\u8f93\u5165\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u91cd\u542f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"debug reload\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5173\u95ed\u670d\u52a1\u5668\u65f6\u6307\u5b9a\u4fdd\u5b58\u6570\u636e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"shutdown save\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6267\u884c shutdown \u547d\u4ee4\u65f6\uff0c\u81ea\u52a8\u6267\u884c bgsave\uff08\u5982\u679c\u6ca1\u6709\u5f00\u542f AOF \u6301\u4e45\u5316\u529f\u80fd\uff09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5168\u91cf\u590d\u5236\uff1a\u4e3b\u4ece\u590d\u5236\u90e8\u5206\u8be6\u89e3"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6587\u4ef6\u8f7d\u5165",children:"\u6587\u4ef6\u8f7d\u5165"}),"\n",(0,i.jsx)(e.p,{children:"RDB \u6587\u4ef6\u7684\u8f7d\u5165\u5de5\u4f5c\u662f\u5728\u670d\u52a1\u5668\u542f\u52a8\u65f6\u81ea\u52a8\u6267\u884c\uff0c\u671f\u95f4 Redis \u4f1a\u4e00\u76f4\u5904\u4e8e\u963b\u585e\u72b6\u6001\uff0c\u76f4\u5230\u8f7d\u5165\u5b8c\u6210"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u5e76\u6ca1\u6709\u4e13\u95e8\u7528\u4e8e\u8f7d\u5165 RDB \u6587\u4ef6\u7684\u547d\u4ee4\uff0c\u53ea\u8981\u670d\u52a1\u5668\u5728\u542f\u52a8\u65f6\u68c0\u6d4b\u5230 RDB \u6587\u4ef6\u5b58\u5728\uff0c\u5c31\u4f1a\u81ea\u52a8\u8f7d\u5165 RDB \u6587\u4ef6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"[7379] 30 Aug 21:07:01.289 * DB loaded from disk: 0.018 seconds  # \u670d\u52a1\u5668\u5728\u6210\u529f\u8f7d\u5165 RDB \u6587\u4ef6\u4e4b\u540e\u6253\u5370\n"})}),"\n",(0,i.jsx)(e.p,{children:"AOF \u6587\u4ef6\u7684\u66f4\u65b0\u9891\u7387\u901a\u5e38\u6bd4 RDB \u6587\u4ef6\u7684\u66f4\u65b0\u9891\u7387\u9ad8\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u670d\u52a1\u5668\u5f00\u542f\u4e86 AOF \u6301\u4e45\u5316\u529f\u80fd\uff0c\u90a3\u4e48\u4f1a\u4f18\u5148\u4f7f\u7528 AOF \u6587\u4ef6\u6765\u8fd8\u539f\u6570\u636e\u5e93\u72b6\u6001"}),"\n",(0,i.jsx)(e.li,{children:"\u53ea\u6709\u5728 AOF \u6301\u4e45\u5316\u529f\u80fd\u5904\u4e8e\u5173\u95ed\u72b6\u6001\u65f6\uff0c\u670d\u52a1\u5668\u624d\u4f1a\u4f7f\u7528 RDB \u6587\u4ef6\u6765\u8fd8\u539f\u6570\u636e\u5e93\u72b6\u6001"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u81ea\u52a8\u4fdd\u5b58",children:"\u81ea\u52a8\u4fdd\u5b58"}),"\n",(0,i.jsx)(e.h5,{id:"\u914d\u7f6e\u6587\u4ef6",children:"\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u652f\u6301\u901a\u8fc7\u914d\u7f6e\u670d\u52a1\u5668\u7684 save \u9009\u9879\uff0c\u8ba9\u670d\u52a1\u5668\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u81ea\u52a8\u6267\u884c\u4e00\u6b21 BGSAVE \u547d\u4ee4"}),"\n",(0,i.jsx)(e.p,{children:"\u914d\u7f6e redis.conf\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"save second changes #\u8bbe\u7f6e\u81ea\u52a8\u6301\u4e45\u5316\u6761\u4ef6\uff0c\u6ee1\u8db3\u9650\u5b9a\u65f6\u95f4\u8303\u56f4\u5185key\u7684\u53d8\u5316\u6570\u91cf\u5c31\u8fdb\u884c\u6301\u4e45\u5316(bgsave)\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"second\uff1a\u76d1\u63a7\u65f6\u95f4\u8303\u56f4"}),"\n",(0,i.jsx)(e.li,{children:"changes\uff1a\u76d1\u63a7 key \u7684\u53d8\u5316\u91cf"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u9ed8\u8ba4\u4e09\u4e2a\u6761\u4ef6\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"save 900 1\t\t# 900s\u51851\u4e2akey\u53d1\u751f\u53d8\u5316\u5c31\u8fdb\u884c\u6301\u4e45\u5316\nsave 300 10\nsave 60 10000\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5224\u5b9a key \u53d8\u5316\u7684\u4f9d\u636e\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5bf9\u6570\u636e\u4ea7\u751f\u4e86\u5f71\u54cd\uff0c\u4e0d\u5305\u62ec\u67e5\u8be2"}),"\n",(0,i.jsx)(e.li,{children:"\u4e0d\u8fdb\u884c\u6570\u636e\u6bd4\u5bf9\uff0c\u6bd4\u5982 name \u952e\u5b58\u5728\uff0c\u91cd\u65b0 set name seazean \u4e5f\u7b97\u4e00\u6b21\u53d8\u5316"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"save \u914d\u7f6e\u8981\u6839\u636e\u5b9e\u9645\u4e1a\u52a1\u60c5\u51b5\u8fdb\u884c\u8bbe\u7f6e\uff0c\u9891\u5ea6\u8fc7\u9ad8\u6216\u8fc7\u4f4e\u90fd\u4f1a\u51fa\u73b0\u6027\u80fd\u95ee\u9898\uff0c\u7ed3\u679c\u53ef\u80fd\u662f\u707e\u96be\u6027\u7684"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u81ea\u52a8\u539f\u7406",children:"\u81ea\u52a8\u539f\u7406"}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u72b6\u6001\u76f8\u5173\u7684\u5c5e\u6027\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n    // \u8bb0\u5f55\u4e86\u4fdd\u5b58\u6761\u4ef6\u7684\u6570\u7ec4\n    struct saveparam *saveparams;\n    \n    // \u4fee\u6539\u8ba1\u6570\u5668\n    long long dirty;\n    \n    // \u4e0a\u4e00\u6b21\u6267\u884c\u4fdd\u5b58\u7684\u65f6\u95f4 \n    time_t lastsave;\n};\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Redis \u670d\u52a1\u5668\u542f\u52a8\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u6216\u8005\u4f20\u5165\u542f\u52a8\u53c2\u6570\u7684\u65b9\u5f0f\u8bbe\u7f6e save \u9009\u9879\uff0c \u5982\u679c\u6ca1\u6709\u81ea\u5b9a\u4e49\u5c31\u8bbe\u7f6e\u4e3a\u4e09\u4e2a\u9ed8\u8ba4\u503c\uff08\u4e0a\u8282\u63d0\u53ca\uff09\uff0c\u8bbe\u7f6e\u670d\u52a1\u5668\u72b6\u6001 redisServe.saveparams \u5c5e\u6027\uff0c\u8be5\u6570\u7ec4\u6bcf\u4e00\u9879\u4e3a\u4e00\u4e2a saveparam \u7ed3\u6784\uff0c\u4ee3\u8868 save \u7684\u9009\u9879\u8bbe\u7f6e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct saveparam {\n    // \u79d2\u6570\n    time_t seconds\n    // \u4fee\u6539\u6570\n    int changes;\n};\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"dirty \u8ba1\u6570\u5668\u8bb0\u5f55\u8ddd\u79bb\u4e0a\u4e00\u6b21\u6210\u529f\u6267\u884c SAVE \u6216\u8005 BGSAVE \u547d\u4ee4\u4e4b\u540e\uff0c\u670d\u52a1\u5668\u4e2d\u7684\u6240\u6709\u6570\u636e\u5e93\u8fdb\u884c\u4e86\u591a\u5c11\u6b21\u4fee\u6539\uff08\u5305\u62ec\u5199\u5165\u3001\u5220\u9664\u3001\u66f4\u65b0\u7b49\u64cd\u4f5c\uff09\uff0c\u5f53\u670d\u52a1\u5668\u6210\u529f\u6267\u884c\u4e00\u4e2a\u4fee\u6539\u6307\u4ee4\uff0c\u8be5\u547d\u4ee4\u4fee\u6539\u4e86\u591a\u5c11\u6b21\u6570\u636e\u5e93\uff0c dirty \u7684\u503c\u5c31\u589e\u52a0\u591a\u5c11"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"lastsave \u5c5e\u6027\u662f\u4e00\u4e2a UNIX \u65f6\u95f4\u6233\uff0c\u8bb0\u5f55\u4e86\u670d\u52a1\u5668\u4e0a\u4e00\u6b21\u6210\u529f\u6267\u884c SAVE \u6216\u8005 BGSAVE \u547d\u4ee4\u7684\u65f6\u95f4"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Redis \u7684\u670d\u52a1\u5668\u5468\u671f\u6027\u64cd\u4f5c\u51fd\u6570 serverCron \u9ed8\u8ba4\u6bcf\u9694 100 \u6beb\u79d2\u5c31\u4f1a\u6267\u884c\u4e00\u6b21\uff0c\u8be5\u51fd\u6570\u7528\u4e8e\u5bf9\u6b63\u5728\u8fd0\u884c\u7684\u670d\u52a1\u5668\u8fdb\u884c\u7ef4\u62a4"}),"\n",(0,i.jsxs)(e.p,{children:["serverCron \u51fd\u6570\u7684\u5176\u4e2d\u4e00\u9879\u5de5\u4f5c\u662f\u68c0\u67e5 save \u9009\u9879\u6240\u8bbe\u7f6e\u7684\u4fdd\u5b58\u6761\u4ef6\u662f\u5426\u6ee1\u8db3\uff0c\u4f1a\u904d\u5386 saveparams \u6570\u7ec4\u4e2d\u7684",(0,i.jsx)(e.strong,{children:"\u6240\u6709\u4fdd\u5b58\u6761\u4ef6"}),"\uff0c\u53ea\u8981\u6709\u4efb\u610f\u4e00\u4e2a\u6761\u4ef6\u88ab\u6ee1\u8db3\u670d\u52a1\u5668\u5c31\u4f1a\u6267\u884c BGSAVE \u547d\u4ee4"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(5834).A+"",width:"1113",height:"375"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6587\u4ef6\u7ed3\u6784",children:"\u6587\u4ef6\u7ed3\u6784"}),"\n",(0,i.jsx)(e.p,{children:"RDB \u7684\u5b58\u50a8\u7ed3\u6784\uff1a\u56fe\u793a\u5168\u5927\u5199\u5355\u8bcd\u6807\u793a\u5e38\u91cf\uff0c\u7528\u5168\u5c0f\u5199\u5355\u8bcd\u6807\u793a\u53d8\u91cf\u548c\u6570\u636e"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(14510).A+"",width:"779",height:"77"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["REDIS\uff1a\u957f\u5ea6\u4e3a 5 \u5b57\u8282\uff0c\u4fdd\u5b58\u7740 ",(0,i.jsx)(e.code,{children:"REDIS"})," \u4e94\u4e2a\u5b57\u7b26\uff0c\u662f RDB \u6587\u4ef6\u7684\u5f00\u5934\uff0c\u5728\u8f7d\u5165\u6587\u4ef6\u65f6\u53ef\u4ee5\u5feb\u901f\u68c0\u67e5\u6240\u8f7d\u5165\u7684\u6587\u4ef6\u662f\u5426 RDB \u6587\u4ef6"]}),"\n",(0,i.jsx)(e.li,{children:"db_version\uff1a\u957f\u5ea6\u4e3a 4 \u5b57\u8282\uff0c\u662f\u4e00\u4e2a\u7528\u5b57\u7b26\u4e32\u8868\u793a\u7684\u6574\u6570\uff0c\u8bb0\u5f55 RDB \u7684\u7248\u672c\u53f7"}),"\n",(0,i.jsx)(e.li,{children:"database\uff1a\u5305\u542b\u7740\u96f6\u4e2a\u6216\u4efb\u610f\u591a\u4e2a\u6570\u636e\u5e93\uff0c\u4ee5\u53ca\u5404\u4e2a\u6570\u636e\u5e93\u4e2d\u7684\u952e\u503c\u5bf9\u6570\u636e"}),"\n",(0,i.jsx)(e.li,{children:"EOF\uff1a\u957f\u5ea6\u4e3a 1 \u5b57\u8282\u7684\u5e38\u91cf\uff0c\u6807\u5fd7\u7740 RDB \u6587\u4ef6\u6b63\u6587\u5185\u5bb9\u7684\u7ed3\u675f\uff0c\u5f53\u8bfb\u5165\u9047\u5230\u8fd9\u4e2a\u503c\u65f6\uff0c\u4ee3\u8868\u6240\u6709\u6570\u636e\u5e93\u7684\u952e\u503c\u5bf9\u90fd\u5df2\u7ecf\u8f7d\u5165\u5b8c\u6bd5"}),"\n",(0,i.jsx)(e.li,{children:"check_sum\uff1a\u957f\u5ea6\u4e3a 8 \u5b57\u8282\u7684\u65e0\u7b26\u53f7\u6574\u6570\uff0c\u4fdd\u5b58\u7740\u4e00\u4e2a\u6821\u9a8c\u548c\uff0c\u8be5\u503c\u662f\u901a\u8fc7 REDIS\u3001db_version\u3001databases\u3001EOF \u56db\u4e2a\u90e8\u5206\u7684\u5185\u5bb9\u8fdb\u884c\u8ba1\u7b97\u5f97\u51fa\u3002\u670d\u52a1\u5668\u5728\u8f7d\u5165 RDB \u6587\u4ef6\u65f6\uff0c\u4f1a\u5c06\u8f7d\u5165\u6570\u636e\u6240\u8ba1\u7b97\u51fa\u7684\u6821\u9a8c\u548c\u4e0e check_sum \u6240\u8bb0\u5f55\u7684\u6821\u9a8c\u548c\u8fdb\u884c\u5bf9\u6bd4\uff0c\u6765\u68c0\u67e5 RDB \u6587\u4ef6\u662f\u5426\u6709\u51fa\u9519\u6216\u8005\u635f\u574f"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Redis \u672c\u8eab\u5e26\u6709 RDB \u6587\u4ef6\u68c0\u67e5\u5de5\u5177 redis-check-dump"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"aof",children:"AOF"}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u6982\u8ff0",children:"\u57fa\u672c\u6982\u8ff0"}),"\n",(0,i.jsxs)(e.p,{children:["AOF\uff08append only file\uff09\u6301\u4e45\u5316\uff1a\u4ee5\u72ec\u7acb\u65e5\u5fd7\u7684\u65b9\u5f0f\u8bb0\u5f55\u6bcf\u6b21\u5199\u547d\u4ee4\uff08\u4e0d\u8bb0\u5f55\u8bfb\uff09\u6765\u8bb0\u5f55\u6570\u636e\u5e93\u72b6\u6001\uff0c",(0,i.jsx)(e.strong,{children:"\u589e\u91cf\u4fdd\u5b58"}),"\u53ea\u8bb8\u8ffd\u52a0\u6587\u4ef6\u4f46\u4e0d\u53ef\u4ee5\u6539\u5199\u6587\u4ef6\uff0c",(0,i.jsx)(e.strong,{children:"\u4e0e RDB \u76f8\u6bd4\u53ef\u4ee5\u7406\u89e3\u4e3a\u7531\u8bb0\u5f55\u6570\u636e\u6539\u4e3a\u8bb0\u5f55\u6570\u636e\u7684\u53d8\u5316"})]}),"\n",(0,i.jsxs)(e.p,{children:["AOF \u4e3b\u8981\u4f5c\u7528\u662f\u89e3\u51b3\u4e86",(0,i.jsx)(e.strong,{children:"\u6570\u636e\u6301\u4e45\u5316\u7684\u5b9e\u65f6\u6027"}),"\uff0c\u76ee\u524d\u5df2\u7ecf\u662f Redis \u6301\u4e45\u5316\u7684\u4e3b\u6d41\u65b9\u5f0f"]}),"\n",(0,i.jsx)(e.p,{children:"AOF \u5199\u6570\u636e\u8fc7\u7a0b\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(79542).A+"",width:"703",height:"260"})}),"\n",(0,i.jsx)(e.p,{children:"Redis \u53ea\u4f1a\u5c06\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u4e86\u4fee\u6539\u7684\u547d\u4ee4\u5199\u5165\u5230 AOF \u6587\u4ef6\uff0c\u5e76\u590d\u5236\u5230\u5404\u4e2a\u4ece\u670d\u52a1\u5668\uff0c\u4f46\u662f PUBSUB \u548c SCRIPT LOAD \u547d\u4ee4\u4f8b\u5916\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"PUBSUB \u547d\u4ee4\u867d\u7136\u6ca1\u6709\u4fee\u6539\u6570\u636e\u5e93\uff0c\u4f46 PUBSUB \u547d\u4ee4\u5411\u9891\u9053\u7684\u6240\u6709\u8ba2\u9605\u8005\u53d1\u9001\u6d88\u606f\u8fd9\u4e00\u884c\u4e3a\u5e26\u6709\u526f\u4f5c\u7528\uff0c\u63a5\u6536\u5230\u6d88\u606f\u7684\u6240\u6709\u5ba2\u6237\u7aef\u7684\u72b6\u6001\u90fd\u4f1a\u56e0\u4e3a\u8fd9\u4e2a\u547d\u4ee4\u800c\u6539\u53d8\uff0c\u6240\u4ee5\u670d\u52a1\u5668\u9700\u8981\u4f7f\u7528 REDIS_FORCE_AOF \u6807\u5fd7\u5f3a\u5236\u5c06\u8fd9\u4e2a\u547d\u4ee4\u5199\u5165 AOF \u6587\u4ef6\u3002\u8fd9\u6837\u5728\u5c06\u6765\u8f7d\u5165 AOF \u6587\u4ef6\u65f6\uff0c\u670d\u52a1\u5668\u5c31\u53ef\u4ee5\u518d\u6b21\u6267\u884c\u76f8\u540c\u7684 PUBSUB \u547d\u4ee4\uff0c\u5e76\u4ea7\u751f\u76f8\u540c\u7684\u526f\u4f5c\u7528"}),"\n",(0,i.jsx)(e.li,{children:"SCRIPT LOAD  \u547d\u4ee4\u867d\u7136\u6ca1\u6709\u4fee\u6539\u6570\u636e\u5e93\uff0c\u4f46\u5b83\u4fee\u6539\u4e86\u670d\u52a1\u5668\u72b6\u6001\uff0c\u6240\u4ee5\u4e5f\u662f\u4e00\u4e2a\u5e26\u6709\u526f\u4f5c\u7528\u7684\u547d\u4ee4\uff0c\u9700\u8981\u4f7f\u7528 REDIS_FORCE_AOF"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6301\u4e45\u5b9e\u73b0",children:"\u6301\u4e45\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.p,{children:"AOF \u6301\u4e45\u5316\u529f\u80fd\u7684\u5b9e\u73b0\u53ef\u4ee5\u5206\u4e3a\u547d\u4ee4\u8ffd\u52a0\uff08append\uff09\u3001\u6587\u4ef6\u5199\u5165\u3001\u6587\u4ef6\u540c\u6b65\uff08sync\uff09\u4e09\u4e2a\u6b65\u9aa4"}),"\n",(0,i.jsx)(e.h5,{id:"\u547d\u4ee4\u8ffd\u52a0",children:"\u547d\u4ee4\u8ffd\u52a0"}),"\n",(0,i.jsx)(e.p,{children:"\u542f\u52a8 AOF \u7684\u57fa\u672c\u914d\u7f6e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"appendonly yes|no\t\t\t\t#\u5f00\u542fAOF\u6301\u4e45\u5316\u529f\u80fd\uff0c\u9ed8\u8ba4no\uff0c\u5373\u4e0d\u5f00\u542f\u72b6\u6001\nappendfilename filename\t\t\t#AOF\u6301\u4e45\u5316\u6587\u4ef6\u540d\uff0c\u9ed8\u8ba4appendonly.aof\uff0c\u5efa\u8bae\u8bbe\u7f6eappendonly-\u7aef\u53e3\u53f7.aof\ndir\t\t\t\t\t\t\t\t#AOF\u6301\u4e45\u5316\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u4e0eRDB\u6301\u4e45\u5316\u6587\u4ef6\u8def\u5f84\u4fdd\u6301\u4e00\u81f4\u5373\u53ef\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5f53 AOF \u6301\u4e45\u5316\u529f\u80fd\u5904\u4e8e\u6253\u5f00\u72b6\u6001\u65f6\uff0c\u670d\u52a1\u5668\u5728\u6267\u884c\u5b8c\u4e00\u4e2a\u5199\u547d\u4ee4\u4e4b\u540e\uff0c\u4f1a\u4ee5\u534f\u8bae\u683c\u5f0f\u5c06\u88ab\u6267\u884c\u7684\u5199\u547d\u4ee4",(0,i.jsx)(e.strong,{children:"\u8ffd\u52a0"}),"\u5230\u670d\u52a1\u5668\u72b6\u6001\u7684 aof_buf \u7f13\u51b2\u533a\u7684\u672b\u5c3e"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n    // AOF \u7f13\u51b2\u533a\n    sds aof_buf;\n};\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u6587\u4ef6\u5199\u5165",children:"\u6587\u4ef6\u5199\u5165"}),"\n",(0,i.jsxs)(e.p,{children:["\u670d\u52a1\u5668\u5728\u5904\u7406\u6587\u4ef6\u4e8b\u4ef6\u65f6\u4f1a\u6267\u884c",(0,i.jsx)(e.strong,{children:"\u5199\u547d\u4ee4\uff0c\u8ffd\u52a0\u4e00\u4e9b\u5185\u5bb9\u5230 aof_buf \u7f13\u51b2\u533a"}),"\u91cc\uff0c\u6240\u4ee5\u670d\u52a1\u5668\u6bcf\u6b21\u7ed3\u675f\u4e00\u4e2a\u4e8b\u4ef6\u5faa\u73af\u4e4b\u524d\uff0c\u5c31\u4f1a\u6267\u884c flushAppendOnlyFile \u51fd\u6570\uff0c\u5224\u65ad\u662f\u5426\u9700\u8981",(0,i.jsx)(e.strong,{children:"\u5c06 aof_buf \u7f13\u51b2\u533a\u4e2d\u7684\u5185\u5bb9\u5199\u5165\u548c\u4fdd\u5b58\u5230 AOF \u6587\u4ef6"}),"\u91cc"]}),"\n",(0,i.jsx)(e.p,{children:"flushAppendOnlyFile \u51fd\u6570\u7684\u884c\u4e3a\u7531\u670d\u52a1\u5668\u914d\u7f6e\u7684 appendfsync \u9009\u9879\u7684\u503c\u6765\u51b3\u5b9a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"appendfsync always|everysec|no\t#AOF\u5199\u6570\u636e\u7b56\u7565\uff1a\u9ed8\u8ba4\u4e3aeverysec\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["always\uff1a\u6bcf\u6b21\u5199\u5165\u64cd\u4f5c\u90fd\u5c06 aof_buf \u7f13\u51b2\u533a\u4e2d\u7684\u6240\u6709\u5185\u5bb9",(0,i.jsx)(e.strong,{children:"\u5199\u5165\u5e76\u540c\u6b65"}),"\u5230 AOF \u6587\u4ef6"]}),"\n",(0,i.jsx)(e.p,{children:"\u7279\u70b9\uff1a\u5b89\u5168\u6027\u6700\u9ad8\uff0c\u6570\u636e\u96f6\u8bef\u5dee\uff0c\u4f46\u662f\u6027\u80fd\u8f83\u4f4e\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"everysec\uff1a\u5148\u5c06 aof_buf \u7f13\u51b2\u533a\u4e2d\u7684\u5185\u5bb9\u5199\u5165\u5230\u64cd\u4f5c\u7cfb\u7edf\u7f13\u5b58\uff0c\u5224\u65ad\u4e0a\u6b21\u540c\u6b65 AOF \u6587\u4ef6\u7684\u65f6\u95f4\u8ddd\u79bb\u73b0\u5728\u8d85\u8fc7\u4e00\u79d2\u949f\uff0c\u518d\u6b21\u8fdb\u884c\u540c\u6b65 fsync\uff0c\u8fd9\u4e2a\u540c\u6b65\u64cd\u4f5c\u662f\u7531\u4e00\u4e2a\uff08\u5b50\uff09\u7ebf\u7a0b\u4e13\u95e8\u8d1f\u8d23\u6267\u884c\u7684"}),"\n",(0,i.jsx)(e.p,{children:"\u7279\u70b9\uff1a\u5728\u7cfb\u7edf\u7a81\u7136\u5b95\u673a\u7684\u60c5\u51b5\u4e0b\u4e22\u5931 1 \u79d2\u5185\u7684\u6570\u636e\uff0c\u51c6\u786e\u6027\u8f83\u9ad8\uff0c\u6027\u80fd\u8f83\u9ad8\uff0c\u5efa\u8bae\u4f7f\u7528\uff0c\u4e5f\u662f\u9ed8\u8ba4\u914d\u7f6e"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"no\uff1a\u5c06 aof_buf \u7f13\u51b2\u533a\u4e2d\u7684\u5185\u5bb9\u5199\u5165\u5230\u64cd\u4f5c\u7cfb\u7edf\u7f13\u5b58\uff0c\u4f46\u5e76\u4e0d\u8fdb\u884c\u540c\u6b65\uff0c\u4f55\u65f6\u540c\u6b65\u7531\u64cd\u4f5c\u7cfb\u7edf\u6765\u51b3\u5b9a"}),"\n",(0,i.jsxs)(e.p,{children:["\u7279\u70b9\uff1a",(0,i.jsx)(e.strong,{children:"\u6574\u4f53\u4e0d\u53ef\u63a7"}),"\uff0c\u670d\u52a1\u5668\u5b95\u673a\u4f1a\u4e22\u5931\u4e0a\u6b21\u540c\u6b65 AOF \u540e\u7684\u6240\u6709\u5199\u6307\u4ee4"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u6587\u4ef6\u540c\u6b65",children:"\u6587\u4ef6\u540c\u6b65"}),"\n",(0,i.jsxs)(e.p,{children:["\u5728\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u5f53\u7528\u6237\u8c03\u7528 write \u51fd\u6570\u5c06\u6570\u636e\u5199\u5165\u6587\u4ef6\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u901a\u5e38\u4f1a\u5c06\u5199\u5165\u6570\u636e\u6682\u65f6\u4fdd\u5b58\u5728\u4e00\u4e2a\u5185\u5b58\u7f13\u51b2\u533a\u7a7a\u95f4\uff0c\u7b49\u5230\u7f13\u51b2\u533a",(0,i.jsx)(e.strong,{children:"\u5199\u6ee1\u6216\u8005\u5230\u8fbe\u7279\u5b9a\u65f6\u95f4\u5468\u671f"}),"\uff0c\u624d\u771f\u6b63\u5730\u5c06\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\u5199\u5165\u5230\u78c1\u76d8\u91cc\u9762\uff08\u5237\u810f\uff09"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f18\u70b9\uff1a\u63d0\u9ad8\u6587\u4ef6\u7684\u5199\u5165\u6548\u7387"}),"\n",(0,i.jsx)(e.li,{children:"\u7f3a\u70b9\uff1a\u4e3a\u5199\u5165\u6570\u636e\u5e26\u6765\u4e86\u5b89\u5168\u95ee\u9898\uff0c\u5982\u679c\u8ba1\u7b97\u673a\u53d1\u751f\u505c\u673a\uff0c\u90a3\u4e48\u4fdd\u5b58\u5728\u5185\u5b58\u7f13\u51b2\u533a\u91cc\u9762\u7684\u5199\u5165\u6570\u636e\u5c06\u4f1a\u4e22\u5931"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u7cfb\u7edf\u63d0\u4f9b\u4e86 fsync \u548c fdatasync \u4e24\u4e2a\u540c\u6b65\u51fd\u6570\u505a",(0,i.jsx)(e.strong,{children:"\u5f3a\u5236\u786c\u76d8\u540c\u6b65"}),"\uff0c\u53ef\u4ee5\u8ba9\u64cd\u4f5c\u7cfb\u7edf\u7acb\u5373\u5c06\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\u5199\u5165\u5230\u786c\u76d8\u91cc\u9762\uff0c\u51fd\u6570\u4f1a\u963b\u585e\u5230\u5199\u5165\u786c\u76d8\u5b8c\u6210\u540e\u8fd4\u56de\uff0c\u4fdd\u8bc1\u4e86\u6570\u636e\u6301\u4e45\u5316"]}),"\n",(0,i.jsx)(e.p,{children:"\u5f02\u5e38\u6062\u590d\uff1aAOF \u6587\u4ef6\u635f\u574f\uff0c\u901a\u8fc7 redis-check-aof--fix appendonly.aof \u8fdb\u884c\u6062\u590d\uff0c\u91cd\u542f Redis\uff0c\u7136\u540e\u91cd\u65b0\u52a0\u8f7d"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6587\u4ef6\u8f7d\u5165-1",children:"\u6587\u4ef6\u8f7d\u5165"}),"\n",(0,i.jsx)(e.p,{children:"AOF \u6587\u4ef6\u91cc\u5305\u542b\u4e86\u91cd\u5efa\u6570\u636e\u5e93\u72b6\u6001\u6240\u9700\u7684\u6240\u6709\u5199\u547d\u4ee4\uff0c\u6240\u4ee5\u670d\u52a1\u5668\u53ea\u8981\u8bfb\u5165\u5e76\u91cd\u65b0\u6267\u884c\u4e00\u904d AOF \u6587\u4ef6\u91cc\u7684\u547d\u4ee4\uff0c\u5c31\u8fd8\u539f\u670d\u52a1\u5668\u5173\u95ed\u4e4b\u524d\u7684\u6570\u636e\u5e93\u72b6\u6001\uff0c\u670d\u52a1\u5668\u5728\u542f\u52a8\u65f6\uff0c\u8fd8\u539f\u6570\u636e\u5e93\u72b6\u6001\u6253\u5370\u7684\u65e5\u5fd7\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"[8321] 05 Sep 11:58:50.449 * DB loaded from append only file: 0.000 seconds \n"})}),"\n",(0,i.jsx)(e.p,{children:"AOF \u6587\u4ef6\u91cc\u9762\u9664\u4e86\u7528\u4e8e\u6307\u5b9a\u6570\u636e\u5e93\u7684 SELECT \u547d\u4ee4\u662f\u670d\u52a1\u5668\u81ea\u52a8\u6dfb\u52a0\u7684\uff0c\u5176\u4ed6\u90fd\u662f\u901a\u8fc7\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u547d\u4ee4"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"* 2\\r\\n$6\\r\\nSELECT\\r\\n$1\\r\\n0\\r\\n\t# \u670d\u52a1\u5668\u81ea\u52a8\u6dfb\u52a0\n* 3\\r\\n$3\\r\\nSET\\r\\n$3\\r\\nmsg\\r\\n$5\\r\\nhello\\r\\n\n* 5\\r\\n$4\\r\\nSADD\\r\\n$6\\r\\nfruits\\r\\n$5\\r\\napple\\r\\n$6\\r\\nbanana\\r\\n$6\\r\\ncherry\\r\\n\n"})}),"\n",(0,i.jsx)(e.p,{children:"Redis \u8bfb\u53d6 AOF \u6587\u4ef6\u5e76\u8fd8\u539f\u6570\u636e\u5e93\u72b6\u6001\u7684\u6b65\u9aa4\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u521b\u5efa\u4e00\u4e2a",(0,i.jsx)(e.strong,{children:"\u4e0d\u5e26\u7f51\u7edc\u8fde\u63a5\u7684\u4f2a\u5ba2\u6237\u7aef"}),"\uff08fake client\uff09\u6267\u884c\u547d\u4ee4\uff0c\u56e0\u4e3a Redis \u7684\u547d\u4ee4\u53ea\u80fd\u5728\u5ba2\u6237\u7aef\u4e0a\u4e0b\u6587\u4e2d\u6267\u884c\uff0c \u800c\u8f7d\u5165 AOF \u6587\u4ef6\u65f6\u6240\u4f7f\u7528\u7684\u547d\u4ee4\u6765\u6e90\u4e8e\u672c\u5730 AOF \u6587\u4ef6\u800c\u4e0d\u662f\u7f51\u7edc\u8fde\u63a5"]}),"\n",(0,i.jsx)(e.li,{children:"\u4ece AOF \u6587\u4ef6\u5206\u6790\u5e76\u8bfb\u53d6\u4e00\u6761\u5199\u547d\u4ee4"}),"\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u4f2a\u5ba2\u6237\u7aef\u6267\u884c\u88ab\u8bfb\u51fa\u7684\u5199\u547d\u4ee4\uff0c\u7136\u540e\u91cd\u590d\u4e0a\u8ff0\u6b65\u9aa4"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u91cd\u5199\u5b9e\u73b0",children:"\u91cd\u5199\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.h5,{id:"\u91cd\u5199\u7b56\u7565",children:"\u91cd\u5199\u7b56\u7565"}),"\n",(0,i.jsxs)(e.p,{children:["AOF \u91cd\u5199\uff1a\u8bfb\u53d6\u670d\u52a1\u5668\u5f53\u524d\u7684\u6570\u636e\u5e93\u72b6\u6001\uff0c",(0,i.jsx)(e.strong,{children:"\u751f\u6210\u65b0 AOF \u6587\u4ef6\u6765\u66ff\u6362\u65e7 AOF \u6587\u4ef6"}),"\uff0c\u4e0d\u4f1a\u5bf9\u73b0\u6709\u7684 AOF \u6587\u4ef6\u8fdb\u884c\u4efb\u4f55\u8bfb\u53d6\u3001\u5206\u6790\u6216\u8005\u5199\u5165\u64cd\u4f5c\uff0c\u800c\u662f\u76f4\u63a5\u539f\u5b50\u66ff\u6362\u3002\u65b0 AOF \u6587\u4ef6\u4e0d\u4f1a\u5305\u542b\u4efb\u4f55\u6d6a\u8d39\u7a7a\u95f4\u7684\u5197\u4f59\u547d\u4ee4\uff0c\u6240\u4ee5\u4f53\u79ef\u901a\u5e38\u4f1a\u6bd4\u65e7 AOF \u6587\u4ef6\u5c0f\u5f97\u591a"]}),"\n",(0,i.jsx)(e.p,{children:"AOF \u91cd\u5199\u89c4\u5219\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8fdb\u7a0b\u5185\u5177\u6709\u65f6\u6548\u6027\u7684\u6570\u636e\uff0c\u5e76\u4e14\u6570\u636e\u5df2\u8d85\u65f6\u5c06\u4e0d\u518d\u5199\u5165\u6587\u4ef6"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5bf9\u540c\u4e00\u6570\u636e\u7684\u591a\u6761\u5199\u547d\u4ee4\u5408\u5e76\u4e3a\u4e00\u6761\u547d\u4ee4\uff0c\u56e0\u4e3a\u4f1a\u8bfb\u53d6\u5f53\u524d\u7684\u72b6\u6001\uff0c\u6240\u4ee5\u76f4\u63a5\u5c06\u5f53\u524d\u72b6\u6001\u8f6c\u6362\u4e3a\u4e00\u6761\u547d\u4ee4\u5373\u53ef\u3002\u4e3a\u9632\u6b62\u6570\u636e\u91cf\u8fc7\u5927\u9020\u6210\u5ba2\u6237\u7aef\u7f13\u51b2\u533a\u6ea2\u51fa\uff0c\u5bf9 list\u3001set\u3001hash\u3001zset \u7b49\u96c6\u5408\u7c7b\u578b\uff0c",(0,i.jsx)(e.strong,{children:"\u5355\u6761\u6307\u4ee4"}),"\u6700\u591a\u5199\u5165 64 \u4e2a\u5143\u7d20"]}),"\n",(0,i.jsx)(e.p,{children:"\u5982 lpushlist1 a\u3001lpush list1 b\u3001lpush list1 c \u53ef\u4ee5\u8f6c\u5316\u4e3a\uff1alpush list1 a b c"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u975e\u5199\u5165\u7c7b\u7684\u65e0\u6548\u6307\u4ee4\u5c06\u88ab\u5ffd\u7565\uff0c\u53ea\u4fdd\u7559\u6700\u7ec8\u6570\u636e\u7684\u5199\u5165\u547d\u4ee4\uff0c\u4f46\u662f select \u6307\u4ee4\u867d\u7136\u4e0d\u66f4\u6539\u6570\u636e\uff0c\u4f46\u662f\u66f4\u6539\u4e86\u6570\u636e\u7684\u5b58\u50a8\u4f4d\u7f6e\uff0c\u6b64\u7c7b\u547d\u4ee4\u540c\u6837\u9700\u8981\u8bb0\u5f55"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"AOF \u91cd\u5199\u4f5c\u7528\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u964d\u4f4e\u78c1\u76d8\u5360\u7528\u91cf\uff0c\u63d0\u9ad8\u78c1\u76d8\u5229\u7528\u7387"}),"\n",(0,i.jsx)(e.li,{children:"\u63d0\u9ad8\u6301\u4e45\u5316\u6548\u7387\uff0c\u964d\u4f4e\u6301\u4e45\u5316\u5199\u65f6\u95f4\uff0c\u63d0\u9ad8 IO \u6027\u80fd"}),"\n",(0,i.jsx)(e.li,{children:"\u964d\u4f4e\u6570\u636e\u6062\u590d\u7684\u7528\u65f6\uff0c\u63d0\u9ad8\u6570\u636e\u6062\u590d\u6548\u7387"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u91cd\u5199\u539f\u7406",children:"\u91cd\u5199\u539f\u7406"}),"\n",(0,i.jsx)(e.p,{children:"AOF \u91cd\u5199\u7a0b\u5e8f aof_rewrite \u51fd\u6570\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u65b0 AOF \u6587\u4ef6\uff0c \u4f46\u662f\u8be5\u51fd\u6570\u4f1a\u8fdb\u884c\u5927\u91cf\u7684\u5199\u5165\u64cd\u4f5c\uff0c\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\u7684\u7ebf\u7a0b\u5c06\u88ab\u957f\u65f6\u95f4\u963b\u585e\uff0c\u6240\u4ee5 Redis \u5c06 AOF \u91cd\u5199\u7a0b\u5e8f\u653e\u5230 fork \u7684\u5b50\u8fdb\u7a0b\u91cc\u6267\u884c\uff0c\u4e0d\u4f1a\u963b\u585e\u7236\u8fdb\u7a0b\uff0c\u91cd\u5199\u547d\u4ee4\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"bgrewriteaof\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b50\u8fdb\u7a0b\u8fdb\u884c AOF \u91cd\u5199\u671f\u95f4\uff0c\u670d\u52a1\u5668\u8fdb\u7a0b\uff08\u7236\u8fdb\u7a0b\uff09\u53ef\u4ee5\u7ee7\u7eed\u5904\u7406\u547d\u4ee4\u8bf7\u6c42"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b50\u8fdb\u7a0b\u5e26\u6709\u670d\u52a1\u5668\u8fdb\u7a0b\u7684\u6570\u636e\u526f\u672c\uff0c\u4f7f\u7528\u5b50\u8fdb\u7a0b\u800c\u4e0d\u662f\u7ebf\u7a0b\uff0c\u53ef\u4ee5\u5728\u907f\u514d\u4f7f\u7528\u9501\u7684\u60c5\u51b5\u4e0b\uff0c \u4fdd\u8bc1\u6570\u636e\u5b89\u5168\u6027"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(40694).A+"",width:"986",height:"195"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5b50\u8fdb\u7a0b\u5728\u8fdb\u884c AOF \u91cd\u5199\u671f\u95f4\uff0c\u670d\u52a1\u5668\u8fdb\u7a0b\u8fd8\u9700\u8981\u7ee7\u7eed\u5904\u7406\u547d\u4ee4\u8bf7\u6c42\uff0c\u800c\u65b0\u547d\u4ee4\u53ef\u80fd\u4f1a\u5bf9\u73b0\u6709\u7684\u6570\u636e\u5e93\u72b6\u6001\u8fdb\u884c\u4fee\u6539\uff0c\u4ece\u800c\u4f7f\u5f97\u670d\u52a1\u5668\u5f53\u524d\u7684\u6570\u636e\u5e93\u72b6\u6001\u548c\u91cd\u5199\u540e\u7684 AOF \u6587\u4ef6\u6240\u4fdd\u5b58\u7684\u6570\u636e\u5e93\u72b6\u6001\u4e0d\u4e00\u81f4\uff0c\u6240\u4ee5 Redis \u8bbe\u7f6e\u4e86 AOF \u91cd\u5199\u7f13\u51b2\u533a"}),"\n",(0,i.jsx)(e.p,{children:"\u5de5\u4f5c\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Redis \u670d\u52a1\u5668\u6267\u884c\u5b8c\u4e00\u4e2a\u5199\u547d\u4ee4\uff0c\u4f1a\u540c\u65f6\u5c06\u8be5\u547d\u4ee4\u8ffd\u52a0\u5230 AOF \u7f13\u51b2\u533a\u548c AOF \u91cd\u5199\u7f13\u51b2\u533a\uff08\u4ece\u521b\u5efa\u5b50\u8fdb\u7a0b\u540e\u624d\u5f00\u59cb\u5199\u5165\uff09"}),"\n",(0,i.jsxs)(e.li,{children:["\u5f53\u5b50\u8fdb\u7a0b\u5b8c\u6210 AOF \u91cd\u5199\u5de5\u4f5c\u4e4b\u540e\uff0c\u4f1a\u5411\u7236\u8fdb\u7a0b\u53d1\u9001\u4e00\u4e2a\u4fe1\u53f7\uff0c\u7236\u8fdb\u7a0b\u5728\u63a5\u5230\u8be5\u4fe1\u53f7\u4e4b\u540e\uff0c \u4f1a\u8c03\u7528\u4e00\u4e2a\u4fe1\u53f7\u5904\u7406\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u6267\u884c\u65f6\u4f1a",(0,i.jsx)(e.strong,{children:"\u5bf9\u670d\u52a1\u5668\u8fdb\u7a0b\uff08\u7236\u8fdb\u7a0b\uff09\u9020\u6210\u963b\u585e"}),"\uff08\u5f71\u54cd\u5f88\u5c0f\uff0c\u7c7b\u4f3c JVM STW\uff09\uff0c\u4e3b\u8981\u5de5\u4f5c\uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5c06 AOF \u91cd\u5199\u7f13\u51b2\u533a\u4e2d\u7684\u6240\u6709\u5185\u5bb9\u5199\u5165\u5230\u65b0 AOF \u6587\u4ef6\u4e2d\uff0c \u8fd9\u65f6\u65b0 AOF \u6587\u4ef6\u6240\u4fdd\u5b58\u7684\u72b6\u6001\u5c06\u548c\u670d\u52a1\u5668\u5f53\u524d\u7684\u6570\u636e\u5e93\u72b6\u6001\u4e00\u81f4"}),"\n",(0,i.jsxs)(e.li,{children:["\u5bf9\u65b0\u7684 AOF \u6587\u4ef6\u8fdb\u884c\u6539\u540d\uff0c",(0,i.jsx)(e.strong,{children:"\u539f\u5b50\u5730\uff08atomic\uff09\u8986\u76d6"}),"\u73b0\u6709\u7684 AOF \u6587\u4ef6\uff0c\u5b8c\u6210\u65b0\u65e7\u4e24\u4e2a AOF \u6587\u4ef6\u7684\u66ff\u6362"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u81ea\u52a8\u91cd\u5199",children:"\u81ea\u52a8\u91cd\u5199"}),"\n",(0,i.jsx)(e.p,{children:"\u89e6\u53d1\u65f6\u673a\uff1aRedis \u4f1a\u8bb0\u5f55\u4e0a\u6b21\u91cd\u5199\u65f6\u7684 AOF \u5927\u5c0f\uff0c\u9ed8\u8ba4\u914d\u7f6e\u662f\u5f53 AOF \u6587\u4ef6\u5927\u5c0f\u662f\u4e0a\u6b21\u91cd\u5199\u540e\u5927\u5c0f\u7684\u4e00\u500d\u4e14\u6587\u4ef6\u5927\u4e8e 64M \u65f6\u89e6\u53d1"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"auto-aof-rewrite-min-size size\t\t#\u8bbe\u7f6e\u91cd\u5199\u7684\u57fa\u51c6\u503c\uff0c\u6700\u5c0f\u6587\u4ef6 64MB\uff0c\u8fbe\u5230\u8fd9\u4e2a\u503c\u5f00\u59cb\u91cd\u5199\nauto-aof-rewrite-percentage percent\t#\u89e6\u53d1AOF\u6587\u4ef6\u6267\u884c\u91cd\u5199\u7684\u589e\u957f\u7387\uff0c\u5f53\u524dAOF\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u4e0a\u4e00\u6b21\u91cd\u5199\u7684AOF\u6587\u4ef6\u5927\u5c0f\u7684\u767e\u5206\u4e4b\u591a\u5c11\u624d\u4f1a\u91cd\u5199\uff0c\u6bd4\u5982\u6587\u4ef6\u8fbe\u5230 100% \u65f6\u5f00\u59cb\u91cd\u5199\u5c31\u662f\u4e24\u500d\u65f6\u89e6\u53d1\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u81ea\u52a8\u91cd\u5199\u89e6\u53d1\u6bd4\u5bf9\u53c2\u6570\uff08 \u8fd0\u884c\u6307\u4ee4 ",(0,i.jsx)(e.code,{children:"info Persistence"})," \u83b7\u53d6\u5177\u4f53\u4fe1\u606f \uff09\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"aof_current_size\t\t\t\t\t#AOF\u6587\u4ef6\u5f53\u524d\u5c3a\u5bf8\u5927\u5c0f\uff08\u5355\u4f4d:\u5b57\u8282\uff09\naof_base_size\t\t\t\t\t\t#AOF\u6587\u4ef6\u4e0a\u6b21\u542f\u52a8\u548c\u91cd\u5199\u65f6\u7684\u5c3a\u5bf8\u5927\u5c0f\uff08\u5355\u4f4d:\u5b57\u8282\uff09\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u81ea\u52a8\u91cd\u5199\u89e6\u53d1\u6761\u4ef6\u516c\u5f0f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"aof_current_size > auto-aof-rewrite-min-size"}),"\n",(0,i.jsx)(e.li,{children:"(aof_current_size - aof_base_size) / aof_base_size >= auto-aof-rewrite-percentage"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5bf9\u6bd4-1",children:"\u5bf9\u6bd4"}),"\n",(0,i.jsx)(e.p,{children:"RDB \u7684\u7279\u70b9"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"RDB \u4f18\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"RDB \u662f\u4e00\u4e2a\u7d27\u51d1\u538b\u7f29\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5b58\u50a8\u6548\u7387\u8f83\u9ad8\uff0c\u4f46\u5b58\u50a8\u6570\u636e\u91cf\u8f83\u5927\u65f6\uff0c\u5b58\u50a8\u6548\u7387\u8f83\u4f4e"}),"\n",(0,i.jsxs)(e.li,{children:["RDB \u5185\u90e8\u5b58\u50a8\u7684\u662f Redis \u5728\u67d0\u4e2a\u65f6\u95f4\u70b9\u7684\u6570\u636e\u5feb\u7167\uff0c\u975e\u5e38",(0,i.jsx)(e.strong,{children:"\u9002\u5408\u7528\u4e8e\u6570\u636e\u5907\u4efd\uff0c\u5168\u91cf\u590d\u5236\u3001\u707e\u96be\u6062\u590d"})]}),"\n",(0,i.jsx)(e.li,{children:"RDB \u6062\u590d\u6570\u636e\u7684\u901f\u5ea6\u8981\u6bd4 AOF \u5feb\u5f88\u591a\uff0c\u56e0\u4e3a\u662f\u5feb\u7167\uff0c\u76f4\u63a5\u6062\u590d"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"RDB \u7f3a\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"BGSAVE \u6307\u4ee4\u6bcf\u6b21\u8fd0\u884c\u8981\u6267\u884c fork \u64cd\u4f5c\u521b\u5efa\u5b50\u8fdb\u7a0b\uff0c\u4f1a\u727a\u7272\u4e00\u4e9b\u6027\u80fd"}),"\n",(0,i.jsx)(e.li,{children:"RDB \u65b9\u5f0f\u65e0\u8bba\u662f\u6267\u884c\u6307\u4ee4\u8fd8\u662f\u5229\u7528\u914d\u7f6e\uff0c\u65e0\u6cd5\u505a\u5230\u5b9e\u65f6\u6301\u4e45\u5316\uff0c\u5177\u6709\u4e22\u5931\u6570\u636e\u7684\u53ef\u80fd\u6027\uff0c\u6700\u540e\u4e00\u6b21\u6301\u4e45\u5316\u540e\u7684\u6570\u636e\u53ef\u80fd\u4e22\u5931"}),"\n",(0,i.jsx)(e.li,{children:"Redis \u7684\u4f17\u591a\u7248\u672c\u4e2d\u672a\u8fdb\u884c RDB \u6587\u4ef6\u683c\u5f0f\u7684\u7248\u672c\u7edf\u4e00\uff0c\u53ef\u80fd\u51fa\u73b0\u5404\u7248\u672c\u4e4b\u95f4\u6570\u636e\u683c\u5f0f\u65e0\u6cd5\u517c\u5bb9"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"AOF \u7279\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["AOF \u7684\u4f18\u70b9\uff1a\u6570\u636e\u6301\u4e45\u5316\u6709",(0,i.jsx)(e.strong,{children:"\u8f83\u597d\u7684\u5b9e\u65f6\u6027"}),"\uff0c\u901a\u8fc7 AOF \u91cd\u5199\u53ef\u4ee5\u964d\u4f4e\u6587\u4ef6\u7684\u4f53\u79ef"]}),"\n",(0,i.jsx)(e.li,{children:"AOF \u7684\u7f3a\u70b9\uff1a\u6587\u4ef6\u8f83\u5927\u65f6\u6062\u590d\u8f83\u6162"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"AOF \u548c RDB \u540c\u65f6\u5f00\u542f\uff0c\u7cfb\u7edf\u9ed8\u8ba4\u53d6 AOF \u7684\u6570\u636e\uff08\u6570\u636e\u4e0d\u4f1a\u5b58\u5728\u4e22\u5931\uff09"}),"\n",(0,i.jsx)(e.p,{children:"\u5e94\u7528\u573a\u666f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5bf9\u6570\u636e",(0,i.jsx)(e.strong,{children:"\u975e\u5e38\u654f\u611f"}),"\uff0c\u5efa\u8bae\u4f7f\u7528\u9ed8\u8ba4\u7684 AOF \u6301\u4e45\u5316\u65b9\u6848\uff0cAOF \u6301\u4e45\u5316\u7b56\u7565\u4f7f\u7528 everysecond\uff0c\u6bcf\u79d2\u949f fsync \u4e00\u6b21\uff0c\u8be5\u7b56\u7565 Redis \u4ecd\u53ef\u4ee5\u4fdd\u6301\u5f88\u597d\u7684\u5904\u7406\u6027\u80fd"]}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1aAOF \u6587\u4ef6\u5b58\u50a8\u4f53\u79ef\u8f83\u5927\uff0c\u6062\u590d\u901f\u5ea6\u8f83\u6162\uff0c\u56e0\u4e3a\u8981\u6267\u884c\u6bcf\u6761\u6307\u4ee4"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u6570\u636e\u5448\u73b0",(0,i.jsx)(e.strong,{children:"\u9636\u6bb5\u6709\u6548\u6027"}),"\uff0c\u5efa\u8bae\u4f7f\u7528 RDB \u6301\u4e45\u5316\u65b9\u6848\uff0c\u53ef\u4ee5\u505a\u5230\u9636\u6bb5\u5185\u65e0\u4e22\u5931\uff0c\u4e14\u6062\u590d\u901f\u5ea6\u8f83\u5feb"]}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u5229\u7528 RDB \u5b9e\u73b0\u7d27\u51d1\u7684\u6570\u636e\u6301\u4e45\u5316\uff0c\u5b58\u50a8\u6570\u636e\u91cf\u8f83\u5927\u65f6\uff0c\u5b58\u50a8\u6548\u7387\u8f83\u4f4e"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u7efc\u5408\u5bf9\u6bd4\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"RDB \u4e0e AOF \u7684\u9009\u62e9\u5b9e\u9645\u4e0a\u662f\u5728\u505a\u4e00\u79cd\u6743\u8861\uff0c\u6bcf\u79cd\u90fd\u6709\u5229\u6709\u5f0a"}),"\n",(0,i.jsx)(e.li,{children:"\u707e\u96be\u6062\u590d\u9009\u7528 RDB"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u4e0d\u80fd\u627f\u53d7\u6570\u5206\u949f\u4ee5\u5185\u7684\u6570\u636e\u4e22\u5931\uff0c\u5bf9\u4e1a\u52a1\u6570\u636e\u975e\u5e38\u654f\u611f\uff0c\u9009\u7528 AOF\uff1b\u5982\u80fd\u627f\u53d7\u6570\u5206\u949f\u4ee5\u5185\u7684\u6570\u636e\u4e22\u5931\uff0c\u4e14\u8ffd\u6c42\u5927\u6570\u636e\u96c6\u7684\u6062\u590d\u901f\u5ea6\uff0c\u9009\u7528 RDB"}),"\n",(0,i.jsx)(e.li,{children:"\u53cc\u4fdd\u9669\u7b56\u7565\uff0c\u540c\u65f6\u5f00\u542f RDB \u548c AOF\uff0c\u91cd\u542f\u540e Redis \u4f18\u5148\u4f7f\u7528 AOF \u6765\u6062\u590d\u6570\u636e\uff0c\u964d\u4f4e\u4e22\u5931\u6570\u636e\u7684\u91cf"}),"\n",(0,i.jsx)(e.li,{children:"\u4e0d\u5efa\u8bae\u5355\u72ec\u7528 AOF\uff0c\u56e0\u4e3a\u53ef\u80fd\u4f1a\u51fa\u73b0 Bug\uff0c\u5982\u679c\u53ea\u662f\u505a\u7eaf\u5185\u5b58\u7f13\u5b58\uff0c\u53ef\u4ee5\u90fd\u4e0d\u7528"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"fork",children:"fork"}),"\n",(0,i.jsx)(e.h4,{id:"\u4ecb\u7ecd",children:"\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.p,{children:"fork() \u51fd\u6570\u521b\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u5b50\u8fdb\u7a0b\u4e0e\u7236\u8fdb\u7a0b\u51e0\u4e4e\u662f\u5b8c\u5168\u76f8\u540c\u7684\u8fdb\u7a0b\uff0c\u7cfb\u7edf\u5148\u7ed9\u5b50\u8fdb\u7a0b\u5206\u914d\u8d44\u6e90\uff0c\u7136\u540e\u628a\u7236\u8fdb\u7a0b\u7684\u6240\u6709\u6570\u636e\u90fd\u590d\u5236\u5230\u5b50\u8fdb\u7a0b\u4e2d\uff0c\u53ea\u6709\u5c11\u6570\u503c\u4e0e\u7236\u8fdb\u7a0b\u7684\u503c\u4e0d\u540c\uff0c\u76f8\u5f53\u4e8e\u514b\u9686\u4e86\u4e00\u4e2a\u8fdb\u7a0b"}),"\n",(0,i.jsxs)(e.p,{children:["\u5728\u5b8c\u6210\u5bf9\u5176\u8c03\u7528\u4e4b\u540e\uff0c\u4f1a\u4ea7\u751f 2 \u4e2a\u8fdb\u7a0b\uff0c\u4e14\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u4f1a",(0,i.jsx)(e.strong,{children:"\u4ece fork() \u7684\u8fd4\u56de\u5904\u5f00\u59cb\u6267\u884c"}),"\uff0c\u8fd9\u4e24\u4e2a\u8fdb\u7a0b\u5c06\u6267\u884c\u76f8\u540c\u7684\u7a0b\u5e8f\u6bb5\uff0c\u4f46\u662f\u62e5\u6709\u5404\u81ea\u4e0d\u540c\u7684\u5806\u6bb5\uff0c\u6808\u6bb5\uff0c\u6570\u636e\u6bb5\uff0c\u6bcf\u4e2a\u5b50\u8fdb\u7a0b\u90fd\u53ef\u4fee\u6539\u5404\u81ea\u7684\u6570\u636e\u6bb5\uff0c\u5806\u6bb5\uff0c\u548c\u6808\u6bb5"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"#include<unistd.h>\npid_t fork(void);\n// \u7236\u8fdb\u7a0b\u8fd4\u56de\u5b50\u8fdb\u7a0b\u7684pid\uff0c\u5b50\u8fdb\u7a0b\u8fd4\u56de0\uff0c\u9519\u8bef\u8fd4\u56de\u8d1f\u503c\uff0c\u6839\u636e\u8fd4\u56de\u503c\u7684\u4e0d\u540c\u8fdb\u884c\u5bf9\u5e94\u7684\u903b\u8f91\u5904\u7406\n"})}),"\n",(0,i.jsxs)(e.p,{children:["fork \u8c03\u7528\u4e00\u6b21\uff0c\u5374\u80fd\u591f",(0,i.jsx)(e.strong,{children:"\u8fd4\u56de\u4e24\u6b21"}),"\uff0c\u53ef\u80fd\u6709\u4e09\u79cd\u4e0d\u540c\u7684\u8fd4\u56de\u503c\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5728\u7236\u8fdb\u7a0b\u4e2d\uff0cfork \u8fd4\u56de\u65b0\u521b\u5efa\u5b50\u8fdb\u7a0b\u7684\u8fdb\u7a0b ID"}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u5b50\u8fdb\u7a0b\u4e2d\uff0cfork \u8fd4\u56de 0"}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u51fa\u73b0\u9519\u8bef\uff0cfork \u8fd4\u56de\u4e00\u4e2a\u8d1f\u503c\uff0c\u9519\u8bef\u539f\u56e0\uff1a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5f53\u524d\u7684\u8fdb\u7a0b\u6570\u5df2\u7ecf\u8fbe\u5230\u4e86\u7cfb\u7edf\u89c4\u5b9a\u7684\u4e0a\u9650\uff0c\u8fd9\u65f6 errno \u7684\u503c\u88ab\u8bbe\u7f6e\u4e3a EAGAIN"}),"\n",(0,i.jsx)(e.li,{children:"\u7cfb\u7edf\u5185\u5b58\u4e0d\u8db3\uff0c\u8fd9\u65f6 errno \u7684\u503c\u88ab\u8bbe\u7f6e\u4e3a ENOMEM"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"fpid \u7684\u503c\u5728\u7236\u5b50\u8fdb\u7a0b\u4e2d\u4e0d\u540c\uff1a\u8fdb\u7a0b\u5f62\u6210\u4e86\u94fe\u8868\uff0c\u7236\u8fdb\u7a0b\u7684 fpid \u6307\u5411\u5b50\u8fdb\u7a0b\u7684\u8fdb\u7a0b id\uff0c\u56e0\u4e3a\u5b50\u8fdb\u7a0b\u6ca1\u6709\u5b50\u8fdb\u7a0b\uff0c\u6240\u4ee5\u5176 fpid \u4e3a0"}),"\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u65b0\u8fdb\u7a0b\u6210\u529f\u540e\uff0c\u7cfb\u7edf\u4e2d\u51fa\u73b0\u4e24\u4e2a\u57fa\u672c\u5b8c\u5168\u76f8\u540c\u7684\u8fdb\u7a0b\uff0c\u8fd9\u4e24\u4e2a\u8fdb\u7a0b\u6267\u884c\u6ca1\u6709\u56fa\u5b9a\u7684\u5148\u540e\u987a\u5e8f\uff0c\u54ea\u4e2a\u8fdb\u7a0b\u5148\u6267\u884c\u8981\u770b\u7cfb\u7edf\u7684\u8c03\u5ea6\u7b56\u7565"}),"\n",(0,i.jsx)(e.p,{children:"\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e00\u4e2a\u72ec\u7279\uff08\u4e92\u4e0d\u76f8\u540c\uff09\u7684\u8fdb\u7a0b\u6807\u8bc6\u7b26 process ID\uff0c\u53ef\u4ee5\u901a\u8fc7 getpid() \u51fd\u6570\u83b7\u5f97\uff1b\u8fd8\u6709\u4e00\u4e2a\u8bb0\u5f55\u7236\u8fdb\u7a0b pid \u7684\u53d8\u91cf\uff0c\u53ef\u4ee5\u901a\u8fc7 getppid() \u51fd\u6570\u83b7\u5f97\u53d8\u91cf\u7684\u503c"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u4f7f\u7528",children:"\u4f7f\u7528"}),"\n",(0,i.jsx)(e.p,{children:"\u57fa\u672c\u4f7f\u7528\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:'#include <unistd.h>  \n#include <stdio.h>   \nint main ()   \n{   \n    pid_t fpid; // fpid\u8868\u793afork\u51fd\u6570\u8fd4\u56de\u7684\u503c  \n    int count = 0;  \n    fpid = fork();   \n    if (fpid < 0)   \n        printf("error in fork!");   \n    else if (fpid == 0) {  \n        printf("i am the child process, my process id is %d/n", getpid());    \n        count++;  \n    }  \n    else {  \n        printf("i am the parent process, my process id is %d/n", getpid());   \n        count++;  \n    }  \n    printf("count: %d/n",count);// 1  \n    return 0;  \n}  \n/* \u8f93\u51fa\u5185\u5bb9\uff1a\n    i am the child process, my process id is 5574\n    count: 1\n    i am the parent process, my process id is 5573\n    count: 1\n*/\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u8fdb\u9636\u4f7f\u7528\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:'#include <unistd.h>  \n#include <stdio.h>  \nint main(void)  \n{  \n   int i = 0;  \n   // ppid \u6307\u5f53\u524d\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0bpid  \n   // pid \u6307\u5f53\u524d\u8fdb\u7a0b\u7684pid,  \n   // fpid \u6307fork\u8fd4\u56de\u7ed9\u5f53\u524d\u8fdb\u7a0b\u7684\u503c\uff0c\u5728\u8fd9\u53ef\u4ee5\u8868\u793a\u5b50\u8fdb\u7a0b\n   for(i = 0; i < 2; i++){  \n       pid_t fpid = fork();  \n       if(fpid == 0)  \n           printf("%d child  %4d %4d %4d/n",i, getppid(), getpid(), fpid);  \n       else  \n           printf("%d parent %4d %4d %4d/n",i, getppid(), getpid(),fpid);  \n   }  \n   return 0;  \n} \n/*\u8f93\u51fa\u5185\u5bb9\uff1a\n\ti        \u7236id  id  \u5b50id\n\t0 parent 2043 3224 3225\n    0 child  3224 3225    0\n    1 parent 2043 3224 3226\n    1 parent 3224 3225 3227\n    1 child     1 3227    0\n    1 child     1 3226    0 \n*/\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(50226).A+"",width:"761",height:"365"})}),"\n",(0,i.jsx)(e.p,{children:"\u5728 p3224 \u548c p3225 \u6267\u884c\u5b8c\u7b2c\u4e8c\u4e2a\u5faa\u73af\u540e\uff0cmain \u51fd\u6570\u9000\u51fa\uff0c\u8fdb\u7a0b\u6b7b\u4ea1\u3002\u6240\u4ee5 p3226\uff0cp3227 \u5c31\u6ca1\u6709\u7236\u8fdb\u7a0b\u4e86\uff0c\u6210\u4e3a\u5b64\u513f\u8fdb\u7a0b\uff0c\u6240\u4ee5 p3226 \u548c p3227 \u7684\u7236\u8fdb\u7a0b\u5c31\u88ab\u7f6e\u4e3a ID \u4e3a 1 \u7684 init \u8fdb\u7a0b\uff08\u7b14\u8bb0 Tool \u2192 Linux \u2192 \u8fdb\u7a0b\u7ba1\u7406\u8be6\u89e3\uff09"}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://blog.csdn.net/love_gaohz/article/details/41727415",children:"https://blog.csdn.net/love_gaohz/article/details/41727415"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5185\u5b58-1",children:"\u5185\u5b58"}),"\n",(0,i.jsx)(e.p,{children:"fork() \u8c03\u7528\u4e4b\u540e\u7236\u5b50\u8fdb\u7a0b\u7684\u5185\u5b58\u5173\u7cfb"}),"\n",(0,i.jsx)(e.p,{children:"\u65e9\u671f Linux \u7684 fork() \u5b9e\u73b0\u65f6\uff0c\u5c31\u662f\u5168\u90e8\u590d\u5236\uff0c\u8fd9\u79cd\u65b9\u6cd5\u6548\u7387\u592a\u4f4e\uff0c\u800c\u4e14\u9020\u6210\u4e86\u5f88\u5927\u7684\u5185\u5b58\u6d6a\u8d39\uff0c\u73b0\u5728 Linux \u5b9e\u73b0\u91c7\u7528\u4e86\u4e24\u79cd\u65b9\u6cd5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7236\u5b50\u8fdb\u7a0b\u7684\u4ee3\u7801\u6bb5\u662f\u76f8\u540c\u7684\uff0c\u6240\u4ee5\u4ee3\u7801\u6bb5\u662f\u6ca1\u5fc5\u8981\u590d\u5236\u7684\uff0c\u53ea\u9700\u5185\u6838\u5c06\u4ee3\u7801\u6bb5\u6807\u8bb0\u4e3a\u53ea\u8bfb\uff0c\u7236\u5b50\u8fdb\u7a0b\u5c31\u5171\u4eab\u6b64\u4ee3\u7801\u6bb5\u3002fork() \u4e4b\u540e\u5728\u8fdb\u7a0b\u521b\u5efa\u4ee3\u7801\u6bb5\u65f6\uff0c\u5b50\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u7ea7\u9875\u8868\u9879\u90fd\u6307\u5411\u548c\u7236\u8fdb\u7a0b\u76f8\u540c\u7684\u7269\u7406\u9875\u5e27"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(75033).A+"",width:"848",height:"400"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5bf9\u4e8e\u7236\u8fdb\u7a0b\u7684\u6570\u636e\u6bb5\uff0c\u5806\u6bb5\uff0c\u6808\u6bb5\u4e2d\u7684\u5404\u9875\uff0c\u7531\u4e8e\u7236\u5b50\u8fdb\u7a0b\u76f8\u4e92\u72ec\u7acb\uff0c\u91c7\u7528",(0,i.jsx)(e.strong,{children:"\u5199\u65f6\u590d\u5236 COW"})," \u7684\u6280\u672f\uff0c\u6765\u63d0\u9ad8\u5185\u5b58\u4ee5\u53ca\u5185\u6838\u7684\u5229\u7528\u7387"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5728 fork \u4e4b\u540e\u4e24\u4e2a\u8fdb\u7a0b\u7528\u7684\u662f\u76f8\u540c\u7684\u7269\u7406\u7a7a\u95f4\uff08\u5185\u5b58\u533a\uff09\uff0c\u5b50\u8fdb\u7a0b\u7684\u4ee3\u7801\u6bb5\u3001\u6570\u636e\u6bb5\u3001\u5806\u6808\u90fd\u662f\u6307\u5411\u7236\u8fdb\u7a0b\u7684\u7269\u7406\u7a7a\u95f4\uff0c",(0,i.jsx)(e.strong,{children:"\u4e24\u8005\u7684\u865a\u62df\u7a7a\u95f4\u4e0d\u540c\uff0c\u4f46\u5176\u5bf9\u5e94\u7684\u7269\u7406\u7a7a\u95f4\u662f\u540c\u4e00\u4e2a"}),"\uff0c\u5f53\u7236\u5b50\u8fdb\u7a0b\u4e2d\u6709\u66f4\u6539\u76f8\u5e94\u6bb5\u7684\u884c\u4e3a\u53d1\u751f\u65f6\uff0c\u518d\u4e3a\u5b50\u8fdb\u7a0b\u76f8\u5e94\u7684\u6bb5\u5206\u914d\u7269\u7406\u7a7a\u95f4\u3002\u5982\u679c\u4e24\u8005\u7684\u4ee3\u7801\u5b8c\u5168\u76f8\u540c\uff0c\u4ee3\u7801\u6bb5\u7ee7\u7eed\u5171\u4eab\u7236\u8fdb\u7a0b\u7684\u7269\u7406\u7a7a\u95f4\uff1b\u800c\u5982\u679c\u4e24\u8005\u6267\u884c\u7684\u4ee3\u7801\u4e0d\u540c\uff0c\u5b50\u8fdb\u7a0b\u7684\u4ee3\u7801\u6bb5\u4e5f\u4f1a\u5206\u914d\u5355\u72ec\u7684\u7269\u7406\u7a7a\u95f4\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"fork \u4e4b\u540e\u5185\u6838\u4f1a\u5c06\u5b50\u8fdb\u7a0b\u653e\u5728\u961f\u5217\u7684\u524d\u9762\uff0c\u8ba9\u5b50\u8fdb\u7a0b\u5148\u6267\u884c\uff0c\u4ee5\u514d\u7236\u8fdb\u7a0b\u6267\u884c\u5bfc\u81f4\u5199\u65f6\u590d\u5236\uff0c\u800c\u540e\u5b50\u8fdb\u7a0b\u518d\u6267\u884c\uff0c\u56e0\u65e0\u610f\u4e49\u7684\u590d\u5236\u800c\u9020\u6210\u6548\u7387\u7684\u4e0b\u964d"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(26850).A+"",width:"894",height:"404"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8865\u5145\u77e5\u8bc6\uff1a"}),"\n",(0,i.jsx)(e.p,{children:"vfork\uff08\u865a\u62df\u5185\u5b58 fork virtual memory fork\uff09\uff1a\u8c03\u7528 vfork() \u7236\u8fdb\u7a0b\u88ab\u6302\u8d77\uff0c\u5b50\u8fdb\u7a0b\u4f7f\u7528\u7236\u8fdb\u7a0b\u7684\u5730\u5740\u7a7a\u95f4\u3002\u4e0d\u91c7\u7528\u5199\u65f6\u590d\u5236\uff0c\u5982\u679c\u5b50\u8fdb\u7a0b\u4fee\u6539\u7236\u5730\u5740\u7a7a\u95f4\u7684\u4efb\u4f55\u9875\u9762\uff0c\u8fd9\u4e9b\u4fee\u6539\u8fc7\u7684\u9875\u9762\u5bf9\u4e8e\u6062\u590d\u7684\u7236\u8fdb\u7a0b\u662f\u53ef\u89c1\u7684"}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://blog.csdn.net/Shreck66/article/details/47039937",children:"https://blog.csdn.net/Shreck66/article/details/47039937"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u4e8b\u52a1\u673a\u5236-1",children:"\u4e8b\u52a1\u673a\u5236"}),"\n",(0,i.jsx)(e.h3,{id:"\u4e8b\u52a1\u7279\u5f81",children:"\u4e8b\u52a1\u7279\u5f81"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u4e8b\u52a1\u5c31\u662f\u5c06\u591a\u4e2a\u547d\u4ee4\u8bf7\u6c42\u6253\u5305\uff0c\u7136\u540e",(0,i.jsx)(e.strong,{children:"\u4e00\u6b21\u6027\u3001\u6309\u987a\u5e8f"}),"\u5730\u6267\u884c\u591a\u4e2a\u547d\u4ee4\u7684\u673a\u5236\uff0c\u5e76\u4e14\u5728\u4e8b\u52a1\u6267\u884c\u671f\u95f4\uff0c\u670d\u52a1\u5668\u4e0d\u4f1a\u4e2d\u65ad\u4e8b\u52a1\u53bb\u6267\u884c\u5176\u4ed6\u7684\u547d\u4ee4\u8bf7\u6c42\uff0c\u4f1a\u5c06\u4e8b\u52a1\u4e2d\u7684\u6240\u6709\u547d\u4ee4\u90fd\u6267\u884c\u5b8c\u6bd5\uff0c\u7136\u540e\u624d\u53bb\u5904\u7406\u5176\u4ed6\u5ba2\u6237\u7aef\u7684\u547d\u4ee4\u8bf7\u6c42\uff0cRedis \u4e8b\u52a1\u7684\u7279\u6027\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Redis \u4e8b\u52a1",(0,i.jsx)(e.strong,{children:"\u6ca1\u6709\u9694\u79bb\u7ea7\u522b"}),"\u7684\u6982\u5ff5\uff0c\u961f\u5217\u4e2d\u7684\u547d\u4ee4\u5728\u4e8b\u52a1\u6ca1\u6709\u63d0\u4ea4\u4e4b\u524d\u90fd\u4e0d\u4f1a\u5b9e\u9645\u88ab\u6267\u884c"]}),"\n",(0,i.jsxs)(e.li,{children:["Redis \u5355\u6761\u547d\u4ee4\u5f0f\u4fdd\u5b58\u539f\u5b50\u6027\u7684\uff0c\u4f46\u662f\u4e8b\u52a1",(0,i.jsx)(e.strong,{children:"\u4e0d\u4fdd\u8bc1\u539f\u5b50\u6027"}),"\uff0c\u4e8b\u52a1\u4e2d\u5982\u679c\u6709\u4e00\u6761\u547d\u4ee4\u6267\u884c\u5931\u8d25\uff0c\u5176\u540e\u7684\u547d\u4ee4\u4ecd\u7136\u4f1a\u88ab\u6267\u884c\uff0c\u6ca1\u6709\u56de\u6eda"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5de5\u4f5c\u6d41\u7a0b-3",children:"\u5de5\u4f5c\u6d41\u7a0b"}),"\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\u7684\u6267\u884c\u6d41\u7a0b\u5206\u4e3a\u4e09\u4e2a\u9636\u6bb5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\u5f00\u59cb\uff1aMULTI \u547d\u4ee4\u7684\u6267\u884c\u6807\u5fd7\u7740\u4e8b\u52a1\u7684\u5f00\u59cb\uff0c\u901a\u8fc7\u5728\u5ba2\u6237\u7aef\u72b6\u6001\u7684 flags \u5c5e\u6027\u4e2d\u6253\u5f00 REDIS_MULTI \u6807\u8bc6\uff0c\u5c06\u6267\u884c\u8be5\u547d\u4ee4\u7684\u5ba2\u6237\u7aef\u4ece\u975e\u4e8b\u52a1\u72b6\u6001\u5207\u6362\u81f3\u4e8b\u52a1\u72b6\u6001"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"MULTI\t# \u8bbe\u5b9a\u4e8b\u52a1\u7684\u5f00\u542f\u4f4d\u7f6e\uff0c\u6b64\u6307\u4ee4\u6267\u884c\u540e\uff0c\u540e\u7eed\u7684\u6240\u6709\u6307\u4ee4\u5747\u52a0\u5165\u5230\u4e8b\u52a1\u4e2d\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u547d\u4ee4\u5165\u961f\uff1a\u4e8b\u52a1\u961f\u5217\u4ee5\u5148\u8fdb\u5148\u51fa\uff08FIFO\uff09\u7684\u65b9\u5f0f\u4fdd\u5b58\u5165\u961f\u7684\u547d\u4ee4\uff0c\u6bcf\u4e2a Redis \u5ba2\u6237\u7aef\u90fd\u6709\u4e8b\u52a1\u72b6\u6001\uff0c\u5305\u542b\u7740\u4e8b\u52a1\u961f\u5217\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct redisClient {\n\t// \u4e8b\u52a1\u72b6\u6001\n    multiState mstate;\t/* MULTI/EXEC state */ \n}\n\ntypedef struct multiState {\n    // \u4e8b\u52a1\u961f\u5217\uff0cFIFO\u987a\u5e8f\n    multiCmd *commands; \n    \n   \t// \u5df2\u5165\u961f\u547d\u4ee4\u8ba1\u6570\n    int count\uff1b\n}\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u547d\u4ee4\u4e3a EXEC\u3001DISCARD\u3001WATCH\u3001MULTI \u56db\u4e2a\u547d\u4e2d\u7684\u4e00\u4e2a\uff0c\u90a3\u4e48\u670d\u52a1\u5668\u7acb\u5373\u6267\u884c\u8fd9\u4e2a\u547d\u4ee4"}),"\n",(0,i.jsx)(e.li,{children:"\u5176\u4ed6\u547d\u4ee4\u670d\u52a1\u5668\u4e0d\u6267\u884c\uff0c\u800c\u662f\u5c06\u547d\u4ee4\u653e\u5165\u4e00\u4e2a\u4e8b\u52a1\u961f\u5217\u91cc\u9762\uff0c\u7136\u540e\u5411\u5ba2\u6237\u7aef\u8fd4\u56de QUEUED \u56de\u590d"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\u6267\u884c\uff1aEXEC \u63d0\u4ea4\u4e8b\u52a1\u7ed9\u670d\u52a1\u5668\u6267\u884c\uff0c\u670d\u52a1\u5668\u4f1a\u904d\u5386\u8fd9\u4e2a\u5ba2\u6237\u7aef\u7684\u4e8b\u52a1\u961f\u5217\uff0c\u6267\u884c\u961f\u5217\u4e2d\u7684\u547d\u4ee4\u5e76\u5c06\u6267\u884c\u7ed3\u679c\u8fd4\u56de"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"EXEC\t# Commit \u63d0\u4ea4\uff0c\u6267\u884c\u4e8b\u52a1\uff0c\u4e0emulti\u6210\u5bf9\u51fa\u73b0\uff0c\u6210\u5bf9\u4f7f\u7528\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\u53d6\u6d88\u7684\u65b9\u6cd5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u53d6\u6d88\u4e8b\u52a1\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"DISCARD\t# \u7ec8\u6b62\u5f53\u524d\u4e8b\u52a1\u7684\u5b9a\u4e49\uff0c\u53d1\u751f\u5728multi\u4e4b\u540e\uff0cexec\u4e4b\u524d\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u822c\u7528\u4e8e\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d\u8f93\u5165\u4e86\u9519\u8bef\u7684\u6307\u4ee4\uff0c\u76f4\u63a5\u53d6\u6d88\u8fd9\u6b21\u4e8b\u52a1\uff0c\u7c7b\u4f3c\u4e8e\u56de\u6eda"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"watch",children:"WATCH"}),"\n",(0,i.jsx)(e.h4,{id:"\u76d1\u89c6\u673a\u5236",children:"\u76d1\u89c6\u673a\u5236"}),"\n",(0,i.jsx)(e.p,{children:"WATCH \u547d\u4ee4\u662f\u4e00\u4e2a\u4e50\u89c2\u9501\uff08optimistic locking\uff09\uff0c\u53ef\u4ee5\u5728 EXEC \u547d\u4ee4\u6267\u884c\u4e4b\u524d\uff0c\u76d1\u89c6\u4efb\u610f\u6570\u91cf\u7684\u6570\u636e\u5e93\u952e\uff0c\u5e76\u5728 EXEC \u547d\u4ee4\u6267\u884c\u65f6\uff0c\u68c0\u67e5\u88ab\u76d1\u89c6\u7684\u952e\u662f\u5426\u81f3\u5c11\u6709\u4e00\u4e2a\u5df2\u7ecf\u88ab\u4fee\u6539\u8fc7\u4e86\uff0c\u5982\u679c\u662f\u670d\u52a1\u5668\u5c06\u62d2\u7edd\u6267\u884c\u4e8b\u52a1\uff0c\u5e76\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u4ee3\u8868\u4e8b\u52a1\u6267\u884c\u5931\u8d25\u7684\u7a7a\u56de\u590d"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6dfb\u52a0\u76d1\u63a7\u9501"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"WATCH key1 [key2\u2026\u2026]\t#\u53ef\u4ee5\u76d1\u63a7\u4e00\u4e2a\u6216\u8005\u591a\u4e2akey\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u53d6\u6d88\u5bf9\u6240\u6709 key \u7684\u76d1\u89c6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"UNWATCH\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5b9e\u73b0\u539f\u7406-1",children:"\u5b9e\u73b0\u539f\u7406"}),"\n",(0,i.jsx)(e.p,{children:"\u6bcf\u4e2a Redis \u6570\u636e\u5e93\u90fd\u4fdd\u5b58\u7740\u4e00\u4e2a watched_keys \u5b57\u5178\uff0c\u952e\u662f\u67d0\u4e2a\u88ab WATCH \u76d1\u89c6\u7684\u6570\u636e\u5e93\u952e\uff0c\u503c\u5219\u662f\u4e00\u4e2a\u94fe\u8868\uff0c\u8bb0\u5f55\u4e86\u6240\u6709\u76d1\u89c6\u76f8\u5e94\u6570\u636e\u5e93\u952e\u7684\u5ba2\u6237\u7aef\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct redisDb {\n\t// \u6b63\u5728\u88ab WATCH \u547d\u4ee4\u76d1\u89c6\u7684\u952e\n    dict *watched_keys;\n}\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6240\u6709\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u4fee\u6539\u7684\u547d\u4ee4\uff0c\u5728\u6267\u884c\u540e\u90fd\u4f1a\u8c03\u7528 ",(0,i.jsx)(e.code,{children:"multi.c/touchWatchKey"})," \u51fd\u6570\u5bf9 watched_keys \u5b57\u5178\u8fdb\u884c\u68c0\u67e5\uff0c\u662f\u5426\u6709\u5ba2\u6237\u7aef\u6b63\u5728\u76d1\u89c6\u521a\u88ab\u547d\u4ee4\u4fee\u6539\u8fc7\u7684\u6570\u636e\u5e93\u952e\uff0c\u5982\u679c\u6709\u7684\u8bdd\u51fd\u6570\u4f1a\u5c06\u76d1\u89c6\u88ab\u4fee\u6539\u952e\u7684\u5ba2\u6237\u7aef\u7684 REDIS_DIRTY_CAS \u6807\u8bc6\u6253\u5f00\uff0c\u8868\u793a\u8be5\u5ba2\u6237\u7aef\u7684\u4e8b\u52a1\u5b89\u5168\u6027\u5df2\u7ecf\u88ab\u7834\u574f"]}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u63a5\u6536\u5230\u4e2a\u5ba2\u6237\u7aef EXEC \u547d\u4ee4\u65f6\uff0c\u4f1a\u6839\u636e\u8fd9\u4e2a\u5ba2\u6237\u7aef\u662f\u5426\u6253\u5f00\u4e86 REDIS_DIRTY_CAS \u6807\u8bc6\uff0c\u5982\u679c\u6253\u5f00\u4e86\u8bf4\u660e\u5ba2\u6237\u7aef\u63d0\u4ea4\u4e8b\u52a1\u4e0d\u5b89\u5168\uff0c\u670d\u52a1\u5668\u4f1a\u62d2\u7edd\u6267\u884c"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"acid",children:"ACID"}),"\n",(0,i.jsx)(e.h4,{id:"\u539f\u5b50\u6027",children:"\u539f\u5b50\u6027"}),"\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\u5177\u6709\u539f\u5b50\u6027\uff08Atomicity\uff09\u3001\u4e00\u81f4\u6027\uff08Consistency\uff09\u3001\u9694\u79bb\u6027\uff08Isolation\uff09\u3001\u6301\u4e45\u6027\uff08Durability\uff09"}),"\n",(0,i.jsx)(e.p,{children:"\u539f\u5b50\u6027\u6307\u4e8b\u52a1\u961f\u5217\u4e2d\u7684\u547d\u4ee4\u8981\u4e48\u5c31\u5168\u90e8\u90fd\u6267\u884c\uff0c\u8981\u4e48\u4e00\u4e2a\u90fd\u4e0d\u6267\u884c\uff0c\u4f46\u662f\u5728\u547d\u4ee4\u6267\u884c\u51fa\u9519\u65f6\uff0c\u4e0d\u4f1a\u4fdd\u8bc1\u539f\u5b50\u6027\uff08\u4e0b\u4e00\u8282\u8be6\u89e3\uff09"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u4e0d\u652f\u6301\u4e8b\u52a1\u56de\u6eda\u673a\u5236\uff08rollback\uff09\uff0c\u5373\u4f7f\u4e8b\u52a1\u961f\u5217\u4e2d\u7684\u67d0\u4e2a\u547d\u4ee4\u5728\u6267\u884c\u671f\u95f4\u51fa\u73b0\u4e86\u9519\u8bef\uff0c\u6574\u4e2a\u4e8b\u52a1\u4e5f\u4f1a\u7ee7\u7eed\u6267\u884c\u4e0b\u53bb\uff0c\u76f4\u5230\u5c06\u4e8b\u52a1\u961f\u5217\u4e2d\u7684\u6240\u6709\u547d\u4ee4\u90fd\u6267\u884c\u5b8c\u6bd5\u4e3a\u6b62"}),"\n",(0,i.jsx)(e.p,{children:"\u56de\u6eda\u9700\u8981\u7a0b\u5e8f\u5458\u5728\u4ee3\u7801\u4e2d\u5b9e\u73b0\uff0c\u5e94\u8be5\u5c3d\u53ef\u80fd\u907f\u514d\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\u64cd\u4f5c\u4e4b\u524d\u8bb0\u5f55\u6570\u636e\u7684\u72b6\u6001"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5355\u6570\u636e\uff1astring"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u591a\u6570\u636e\uff1ahash\u3001list\u3001set\u3001zset"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bbe\u7f6e\u6307\u4ee4\u6062\u590d\u6240\u6709\u7684\u88ab\u4fee\u6539\u7684\u9879"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5355\u6570\u636e\uff1a\u76f4\u63a5 set\uff08\u6ce8\u610f\u5468\u8fb9\u5c5e\u6027\uff0c\u4f8b\u5982\u65f6\u6548\uff09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u591a\u6570\u636e\uff1a\u4fee\u6539\u5bf9\u5e94\u503c\u6216\u6574\u4f53\u514b\u9686\u590d\u5236"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u4e00\u81f4\u6027",children:"\u4e00\u81f4\u6027"}),"\n",(0,i.jsx)(e.p,{children:"\u4e8b\u52a1\u5177\u6709\u4e00\u81f4\u6027\u6307\u7684\u662f\uff0c\u6570\u636e\u5e93\u5728\u6267\u884c\u4e8b\u52a1\u4e4b\u524d\u662f\u4e00\u81f4\u7684\uff0c\u90a3\u4e48\u5728\u4e8b\u52a1\u6267\u884c\u4e4b\u540e\uff0c\u65e0\u8bba\u4e8b\u52a1\u662f\u5426\u6267\u884c\u6210\u529f\uff0c\u6570\u636e\u5e93\u4e5f\u5e94\u8be5\u4ecd\u7136\u662f\u4e00\u81f4\u7684"}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u81f4\u662f\u6570\u636e\u7b26\u5408\u6570\u636e\u5e93\u7684\u5b9a\u4e49\u548c\u8981\u6c42\uff0c\u6ca1\u6709\u5305\u542b\u975e\u6cd5\u6216\u8005\u65e0\u6548\u7684\u9519\u8bef\u6570\u636e\uff0cRedis \u901a\u8fc7\u9519\u8bef\u68c0\u6d4b\u548c\u7b80\u5355\u7684\u8bbe\u8ba1\u6765\u4fdd\u8bc1\u4e8b\u52a1\u7684\u4e00\u81f4\u6027\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5165\u961f\u9519\u8bef\uff1a\u547d\u4ee4\u683c\u5f0f\u8f93\u5165\u9519\u8bef\uff0c\u51fa\u73b0\u8bed\u6cd5\u9519\u8bef\u9020\u6210\uff0c",(0,i.jsx)(e.strong,{children:"\u6574\u4f53\u4e8b\u52a1\u4e2d\u6240\u6709\u547d\u4ee4\u5747\u4e0d\u4f1a\u6267\u884c"}),"\uff0c\u5305\u62ec\u90a3\u4e9b\u8bed\u6cd5\u6b63\u786e\u7684\u547d\u4ee4"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(43679).A+"",width:"653",height:"136"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u9519\u8bef\uff1a\u547d\u4ee4\u6267\u884c\u51fa\u73b0\u9519\u8bef\uff0c\u4f8b\u5982\u5bf9\u5b57\u7b26\u4e32\u8fdb\u884c incr \u64cd\u4f5c\uff0c\u4e8b\u52a1\u4e2d\u6b63\u786e\u7684\u547d\u4ee4\u4f1a\u88ab\u6267\u884c\uff0c\u8fd0\u884c\u9519\u8bef\u7684\u547d\u4ee4\u4e0d\u4f1a\u88ab\u6267\u884c"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(3372).A+"",width:"621",height:"237"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u505c\u673a\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u670d\u52a1\u5668\u8fd0\u884c\u5728\u65e0\u6301\u4e45\u5316\u7684\u5185\u5b58\u6a21\u5f0f\u4e0b\uff0c\u90a3\u4e48\u91cd\u542f\u4e4b\u540e\u7684\u6570\u636e\u5e93\u5c06\u662f\u7a7a\u767d\u7684\uff0c\u56e0\u6b64\u6570\u636e\u5e93\u662f\u4e00\u81f4\u7684"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u670d\u52a1\u5668\u8fd0\u884c\u5728\u6301\u4e45\u5316\u6a21\u5f0f\u4e0b\uff0c\u91cd\u542f\u4e4b\u540e\u5c06\u6570\u636e\u5e93\u8fd8\u539f\u5230\u4e00\u81f4\u7684\u72b6\u6001"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u9694\u79bb\u6027",children:"\u9694\u79bb\u6027"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u662f\u4e00\u4e2a\u5355\u7ebf\u7a0b\u7684\u6267\u884c\u539f\u7406\uff0c\u6240\u4ee5\u5bf9\u4e8e\u9694\u79bb\u6027\uff0c\u5206\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5e76\u53d1\u64cd\u4f5c\u5728 EXEC \u547d\u4ee4\u524d\u6267\u884c\uff0c\u9694\u79bb\u6027\u7684\u4fdd\u8bc1\u8981\u4f7f\u7528 WATCH \u673a\u5236\u6765\u5b9e\u73b0\uff0c\u5426\u5219\u9694\u79bb\u6027\u65e0\u6cd5\u4fdd\u8bc1"}),"\n",(0,i.jsx)(e.li,{children:"\u5e76\u53d1\u64cd\u4f5c\u5728 EXEC \u547d\u4ee4\u540e\u6267\u884c\uff0c\u9694\u79bb\u6027\u53ef\u4ee5\u4fdd\u8bc1"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6301\u4e45\u6027",children:"\u6301\u4e45\u6027"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u5e76\u6ca1\u6709\u4e3a\u4e8b\u52a1\u63d0\u4f9b\u4efb\u4f55\u989d\u5916\u7684\u6301\u4e45\u5316\u529f\u80fd\uff0c\u4e8b\u52a1\u7684\u6301\u4e45\u6027\u7531 Redis \u6240\u4f7f\u7528\u7684\u6301\u4e45\u5316\u6a21\u5f0f\u51b3\u5b9a"}),"\n",(0,i.jsxs)(e.p,{children:["\u914d\u7f6e\u9009\u9879 ",(0,i.jsx)(e.code,{children:"no-appendfsync-on-rewrite"})," \u53ef\u4ee5\u914d\u5408 appendfsync \u9009\u9879\u5728 AOF \u6301\u4e45\u5316\u6a21\u5f0f\u4f7f\u7528\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9009\u9879\u6253\u5f00\u65f6\u5728\u6267\u884c BGSAVE \u6216\u8005 BGREWRITEAOF \u671f\u95f4\uff0c\u670d\u52a1\u5668\u4f1a\u6682\u65f6\u505c\u6b62\u5bf9 AOF \u6587\u4ef6\u8fdb\u884c\u540c\u6b65\uff0c\u4ece\u800c\u5c3d\u53ef\u80fd\u5730\u51cf\u5c11 I/O \u963b\u585e"}),"\n",(0,i.jsx)(e.li,{children:"\u9009\u9879\u6253\u5f00\u65f6\u8fd0\u884c\u5728 always \u6a21\u5f0f\u7684 AOF \u6301\u4e45\u5316\uff0c\u4e8b\u52a1\u4e5f\u4e0d\u5177\u6709\u6301\u4e45\u6027\uff0c\u6240\u4ee5\u8be5\u9009\u9879\u9ed8\u8ba4\u5173\u95ed"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u4e00\u4e2a\u4e8b\u52a1\u7684\u6700\u540e\u52a0\u4e0a SAVE \u547d\u4ee4\u603b\u53ef\u4ee5\u4fdd\u8bc1\u4e8b\u52a1\u7684\u8010\u4e45\u6027"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"lua-\u811a\u672c",children:"Lua \u811a\u672c"}),"\n",(0,i.jsx)(e.h3,{id:"\u73af\u5883\u521b\u5efa",children:"\u73af\u5883\u521b\u5efa"}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u4ecb\u7ecd-16",children:"\u57fa\u672c\u4ecb\u7ecd"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u5bf9 Lua \u811a\u672c\u652f\u6301\uff0c\u901a\u8fc7\u5728\u670d\u52a1\u5668\u4e2d\u5d4c\u5165 Lua \u73af\u5883\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u4f7f\u7528 Lua \u811a\u672c\u76f4\u63a5\u5728\u670d\u52a1\u5668\u7aef",(0,i.jsx)(e.strong,{children:"\u539f\u5b50\u5730\u6267\u884c"}),"\u591a\u4e2a\u547d\u4ee4"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"EVAL <script> <numkeys> [key ...] [arg ...]\nEVALSHA <sha1> <numkeys> [key ...] [arg ...]\n"})}),"\n",(0,i.jsx)(e.p,{children:"EVAL \u547d\u4ee4\u53ef\u4ee5\u76f4\u63a5\u5bf9\u8f93\u5165\u7684\u811a\u672c\u8ba1\u7b97\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'redis> EVAL "return 1 + 1" 0\t# 0\u4ee3\u8868\u9700\u8981\u7684\u53c2\u6570\n(integer) 2 \n'})}),"\n",(0,i.jsx)(e.p,{children:"EVALSHA \u547d\u4ee4\u6839\u636e\u811a\u672c\u7684 SHA1 \u6821\u9a8c\u548c\u6765\u5bf9\u811a\u672c\u8ba1\u7b97\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'redis> EVALSHA "2f3lba2bb6d6a0f42ccl59d2e2dad55440778de3" 0\n(integer) 2 \n'})}),"\n",(0,i.jsx)(e.p,{children:"\u5e94\u7528\u573a\u666f\uff1aRedis \u53ea\u4fdd\u8bc1\u5355\u6761\u547d\u4ee4\u7684\u539f\u5b50\u6027\uff0c\u6240\u4ee5\u4e3a\u4e86\u5b9e\u73b0\u539f\u5b50\u64cd\u4f5c\uff0c\u5c06\u591a\u6761\u7684\u5bf9 Redis \u7684\u64cd\u4f5c\u6574\u5408\u5230\u4e00\u4e2a\u811a\u672c\u91cc\uff0c\u4f46\u662f\u907f\u514d\u628a\u4e0d\u9700\u8981\u505a\u5e76\u53d1\u63a7\u5236\u7684\u64cd\u4f5c\u5199\u5165\u811a\u672c\u4e2d"}),"\n",(0,i.jsx)(e.p,{children:"Lua \u8bed\u6cd5\u7279\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u58f0\u660e\u53d8\u91cf\u7684\u65f6\u5019\u65e0\u9700\u6307\u5b9a\u6570\u636e\u7c7b\u578b\uff0c\u800c\u662f\u7528 local \u6765\u58f0\u660e\u53d8\u91cf\u4e3a\u5c40\u90e8\u53d8\u91cf"}),"\n",(0,i.jsx)(e.li,{children:"\u6570\u7ec4\u4e0b\u6807\u662f\u4ece 1 \u5f00\u59cb"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u521b\u5efa\u8fc7\u7a0b",children:"\u521b\u5efa\u8fc7\u7a0b"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u670d\u52a1\u5668\u521b\u5efa\u5e76\u4fee\u6539 Lua \u73af\u5883\u7684\u6574\u4e2a\u8fc7\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u4e00\u4e2a\u57fa\u7840\u7684 Lua \u73af\u5883\uff0c\u8c03\u7528 Lua \u7684 API \u51fd\u6570 lua_open"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8f7d\u5165\u591a\u4e2a\u51fd\u6570\u5e93\u5230 Lua \u73af\u5883\u91cc\u9762\uff0c\u8ba9 Lua \u811a\u672c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u51fd\u6570\u5e93\u6765\u8fdb\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u5305\u62ec\u57fa\u7840\u6838\u5fc3\u51fd\u6570"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u5168\u5c40\u53d8\u91cf redis \u8868\u683c\uff0c\u8868\u683c\u5305\u542b\u4ee5\u4e0b\u51fd\u6570\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6267\u884c Redis \u547d\u4ee4\u7684 redis.call \u548c redis.pcall \u51fd\u6570"}),"\n",(0,i.jsx)(e.li,{children:"\u8bb0\u5f55 Redis \u65e5\u5fd7\u7684 redis.log \u51fd\u6570\uff0c\u4ee5\u53ca\u76f8\u5e94\u7684\u65e5\u5fd7\u7ea7\u522b (level) \u5e38\u91cf redis.LOG_DEBUG \u7b49"}),"\n",(0,i.jsx)(e.li,{children:"\u8ba1\u7b97 SHAl \u6821\u9a8c\u548c\u7684 redis.shalhex \u51fd\u6570"}),"\n",(0,i.jsx)(e.li,{children:"\u8fd4\u56de\u9519\u8bef\u4fe1\u606f\u7684 redis.error_reply \u51fd\u6570\u548c redis.status_reply \u51fd\u6570"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528 Redis \u81ea\u5236\u7684\u968f\u673a\u51fd\u6570\u6765\u66ff\u6362 Lua \u539f\u6709\u7684\u5e26\u6709\u526f\u4f5c\u7528\u7684\u968f\u673a\u51fd\u6570\uff0c\u4ece\u800c\u907f\u514d\u5728\u811a\u672c\u4e2d\u5f15\u5165\u526f\u4f5c\u7528"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u8981\u6c42\u6240\u6709\u4f20\u5165\u670d\u52a1\u5668\u7684 Lua \u811a\u672c\uff0c\u4ee5\u53ca Lua \u73af\u5883\u4e2d\u7684\u6240\u6709\u51fd\u6570\uff0c\u90fd\u5fc5\u987b\u662f\u65e0\u526f\u4f5c\u7528\uff08side effect\uff09\u7684\u7eaf\u51fd\u6570\uff08pure function\uff09\uff0c\u6240\u4ee5\u5bf9\u6709\u526f\u4f5c\u7528\u7684\u968f\u673a\u51fd\u6570 ",(0,i.jsx)(e.code,{children:"math.random"})," \u548c ",(0,i.jsx)(e.code,{children:"math.randornseed"})," \u8fdb\u884c\u66ff\u6362"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u521b\u5efa\u6392\u5e8f\u8f85\u52a9\u51fd\u6570 ",(0,i.jsx)(e.code,{children:" _redis_compare_helper"}),"\uff0c\u4f7f\u7528\u8f85\u52a9\u51fd\u6570\u6765\u5bf9\u4e00\u90e8\u5206 Redis \u547d\u4ee4\u7684\u7ed3\u679c\u8fdb\u884c\u6392\u5e8f\uff0c\u4ece\u800c\u6d88\u9664\u547d\u4ee4\u7684\u4e0d\u786e\u5b9a\u6027"]}),"\n",(0,i.jsx)(e.p,{children:"\u6bd4\u5982\u96c6\u5408\u5143\u7d20\u7684\u6392\u5217\u662f\u65e0\u5e8f\u7684\uff0c \u6240\u4ee5\u5373\u4f7f\u4e24\u4e2a\u96c6\u5408\u7684\u5143\u7d20\u5b8c\u5168\u76f8\u540c\uff0c\u8f93\u51fa\u7ed3\u679c\u4e5f\u4e0d\u4e00\u5b9a\u76f8\u540c\uff0cRedis \u5c06 SMEMBERS \u8fd9\u7c7b\u5728\u76f8\u540c\u6570\u636e\u96c6\u4e0a\u4ea7\u751f\u4e0d\u540c\u8f93\u51fa\u7684\u547d\u4ee4\u79f0\u4e3a\u5e26\u6709\u4e0d\u786e\u5b9a\u6027\u7684\u547d\u4ee4"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u521b\u5efa redis.pcall \u51fd\u6570\u7684\u9519\u8bef\u62a5\u544a\u8f85\u52a9\u51fd\u6570 ",(0,i.jsx)(e.code,{children:"_redis_err_handler "}),"\uff0c\u8fd9\u4e2a\u51fd\u6570\u53ef\u4ee5\u6253\u5370\u51fa\u9519\u4ee3\u7801\u7684\u6765\u6e90\u548c\u53d1\u751f\u9519\u8bef\u7684\u884c\u6570"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5bf9 Lua \u73af\u5883\u4e2d\u7684\u5168\u5c40\u73af\u5883\u8fdb\u884c\u4fdd\u62a4\uff0c\u786e\u4fdd\u4f20\u5165\u670d\u52a1\u5668\u7684\u811a\u672c\u4e0d\u4f1a\u56e0\u5fd8\u8bb0\u4f7f\u7528 local \u5173\u952e\u5b57\uff0c\u800c\u5c06\u989d\u5916\u7684\u5168\u5c40\u53d8\u91cf\u6dfb\u52a0\u5230 Lua \u73af\u5883"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5c06\u5b8c\u6210\u4fee\u6539\u7684 Lua \u73af\u5883\u4fdd\u5b58\u5230\u670d\u52a1\u5668\u72b6\u6001\u7684 lua \u5c5e\u6027\u4e2d\uff0c\u7b49\u5f85\u6267\u884c\u670d\u52a1\u5668\u4f20\u6765\u7684 Lua \u811a\u672c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n    Lua *lua;\n};\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Redis \u4f7f\u7528\u4e32\u884c\u5316\u7684\u65b9\u5f0f\u6765\u6267\u884c Redis \u547d\u4ee4\uff0c\u6240\u4ee5\u5728\u4efb\u4f55\u65f6\u95f4\u91cc\u6700\u591a\u90fd\u53ea\u4f1a\u6709\u4e00\u4e2a\u811a\u672c\u80fd\u591f\u88ab\u653e\u8fdb Lua \u73af\u5883\u91cc\u9762\u8fd0\u884c\uff0c\u56e0\u6b64\u6574\u4e2a Redis \u670d\u52a1\u5668\u53ea\u9700\u8981\u521b\u5efa\u4e00\u4e2a Lua \u73af\u5883\u5373\u53ef"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u534f\u4f5c\u7ec4\u4ef6",children:"\u534f\u4f5c\u7ec4\u4ef6"}),"\n",(0,i.jsx)(e.h4,{id:"\u4f2a\u5ba2\u6237\u7aef",children:"\u4f2a\u5ba2\u6237\u7aef"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u670d\u52a1\u5668\u4e3a Lua \u73af\u5883\u521b\u5efa\u4e86\u4e00\u4e2a\u4f2a\u5ba2\u6237\u7aef\u8d1f\u8d23\u5904\u7406 Lua \u811a\u672c\u4e2d\u5305\u542b\u7684\u6240\u6709 Redis \u547d\u4ee4\uff0c\u5de5\u4f5c\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Lua \u73af\u5883\u5c06 redis.call \u6216\u8005 redis.pcall \u51fd\u6570\u60f3\u8981\u6267\u884c\u7684\u547d\u4ee4\u4f20\u7ed9\u4f2a\u5ba2\u6237\u7aef"}),"\n",(0,i.jsx)(e.li,{children:"\u4f2a\u5ba2\u6237\u7aef\u5c06\u547d\u4ee4\u4f20\u7ed9\u547d\u4ee4\u6267\u884c\u5668"}),"\n",(0,i.jsx)(e.li,{children:"\u547d\u4ee4\u6267\u884c\u5668\u6267\u884c\u547d\u4ee4\u5e76\u5c06\u547d\u4ee4\u7684\u6267\u884c\u7ed3\u679c\u8fd4\u56de\u7ed9\u4f2a\u5ba2\u6237\u7aef"}),"\n",(0,i.jsx)(e.li,{children:"\u4f2a\u5ba2\u6237\u7aef\u63a5\u6536\u547d\u4ee4\u6267\u884c\u5668\u8fd4\u56de\u7684\u547d\u4ee4\u7ed3\u679c\uff0c\u5e76\u5c06\u7ed3\u679c\u8fd4\u56de\u7ed9 Lua \u73af\u5883"}),"\n",(0,i.jsx)(e.li,{children:"Lua \u5c06\u547d\u4ee4\u7ed3\u679c\u8fd4\u56de\u7ed9 redis.call \u51fd\u6570\u6216\u8005 redis.pcall \u51fd\u6570"}),"\n",(0,i.jsx)(e.li,{children:"redis.call \u51fd\u6570\u6216\u8005 redis.pcall \u51fd\u6570\u4f1a\u5c06\u547d\u4ee4\u7ed3\u679c\u4f5c\u4e3a\u8fd4\u56de\u503c\u8fd4\u56de\u7ed9\u811a\u672c\u7684\u8c03\u7528\u8005"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(15037).A+"",width:"1181",height:"244"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u811a\u672c\u5b57\u5178",children:"\u811a\u672c\u5b57\u5178"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u670d\u52a1\u5668\u4e3a Lua \u73af\u5883\u521b\u5efa lua_scripts \u5b57\u5178\uff0c\u952e\u4e3a\u67d0\u4e2a Lua \u811a\u672c\u7684 SHA1 \u6821\u9a8c\u548c\uff08checksum\uff09\uff0c\u503c\u5219\u662f\u6821\u9a8c\u548c\u5bf9\u5e94\u7684 Lua \u811a\u672c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n    dict *lua_scripts;\n};\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u4f1a\u5c06\u6240\u6709\u88ab EVAL \u547d\u4ee4\u6267\u884c\u8fc7\u7684 Lua \u811a\u672c\uff0c\u4ee5\u53ca\u6240\u6709\u88ab SCRIPT LOAD \u547d\u4ee4\u8f7d\u5165\u8fc7\u7684 Lua \u811a\u672c\u90fd\u4fdd\u5b58\u5230 lua_scripts \u5b57\u5178"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'redis> SCRIPT LOAD "return \'hi\'"\n"2f3lba2bb6d6a0f42ccl59d2e2dad55440778de3" # \u5b57\u5178\u7684\u952e\uff0cSHA1 \u6821\u9a8c\u548c\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u547d\u4ee4\u5b9e\u73b0-1",children:"\u547d\u4ee4\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.h4,{id:"\u811a\u672c\u51fd\u6570",children:"\u811a\u672c\u51fd\u6570"}),"\n",(0,i.jsx)(e.p,{children:"EVAL \u547d\u4ee4\u7684\u6267\u884c\u7684\u7b2c\u4e00\u6b65\u662f\u4e3a\u4f20\u5165\u7684\u811a\u672c\u5b9a\u4e49\u4e00\u4e2a\u76f8\u5bf9\u5e94\u7684 Lua \u51fd\u6570\uff0cLua \u51fd\u6570\u7684\u540d\u5b57\u7531 f_ \u524d\u7f00\u52a0\u4e0a\u811a\u672c\u7684 SHA1 \u6821\u9a8c\u548c\uff08\u56db\u5341\u4e2a\u5b57\u7b26\u957f\uff09\u7ec4\u6210\uff0c\u800c\u51fd\u6570\u7684\u4f53\uff08body\uff09\u5219\u662f\u811a\u672c\u672c\u8eab"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"EVAL \"return 'hello world'\" 0 \n# \u547d\u4ee4\u5c06\u4f1a\u5b9a\u4e49\u4ee5\u4e0b\u7684\u51fd\u6570\nfunction f_533203lc6b470dc5a0dd9b4bf2030dea6d65de91() {\n\treturn 'hello world'\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u51fd\u6570\u6765\u4fdd\u5b58\u5ba2\u6237\u7aef\u4f20\u5165\u7684\u811a\u672c\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u901a\u8fc7\u51fd\u6570\u7684\u5c40\u90e8\u6027\u6765\u8ba9 Lua \u73af\u5883\u4fdd\u6301\u6e05\u6d01\uff0c\u51cf\u5c11\u4e86\u5783\u573e\u56de\u6536\u7684\u5de5\u4f5c\u6700\uff0c \u5e76\u4e14\u907f\u514d\u4e86\u4f7f\u7528\u5168\u5c40\u53d8\u91cf"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u67d0\u4e2a\u811a\u672c\u5728 Lua \u73af\u5883\u4e2d\u88ab\u5b9a\u4e49\u8fc7\u81f3\u5c11\u4e00\u6b21\uff0c\u90a3\u4e48\u53ea\u9700\u8981 SHA1 \u6821\u9a8c\u548c\uff0c\u670d\u52a1\u5668\u5c31\u53ef\u4ee5\u5728\u4e0d\u77e5\u9053\u811a\u672c\u672c\u8eab\u7684\u60c5\u51b5\u4e0b\uff0c\u76f4\u63a5\u901a\u8fc7\u8c03\u7528 Lua \u51fd\u6570\u6765\u6267\u884c\u811a\u672c"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"EVAL \u547d\u4ee4\u7b2c\u4e8c\u6b65\u662f\u5c06\u5ba2\u6237\u7aef\u4f20\u5165\u7684\u811a\u672c\u4fdd\u5b58\u5230\u670d\u52a1\u5668\u7684 lua_scripts \u5b57\u5178\u91cc\uff0c\u5728\u5b57\u5178\u4e2d\u65b0\u6dfb\u52a0\u4e00\u4e2a\u952e\u503c\u5bf9"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6267\u884c\u51fd\u6570",children:"\u6267\u884c\u51fd\u6570"}),"\n",(0,i.jsx)(e.p,{children:"EVAL \u547d\u4ee4\u7b2c\u4e09\u6b65\u662f\u6267\u884c\u811a\u672c\u51fd\u6570"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5c06 EVAL \u547d\u4ee4\u4e2d\u4f20\u5165\u7684",(0,i.jsx)(e.strong,{children:"\u952e\u540d\u53c2\u6570\u548c\u811a\u672c\u53c2\u6570"}),"\u5206\u522b\u4fdd\u5b58\u5230 KEYS \u6570\u7ec4\u548c ARGV \u6570\u7ec4\uff0c\u5c06\u8fd9\u4e24\u4e2a\u6570\u7ec4\u4f5c\u4e3a",(0,i.jsx)(e.strong,{children:"\u5168\u5c40\u53d8\u91cf"}),"\u4f20\u5165\u5230 Lua \u73af\u5883"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u4e3a Lua \u73af\u5883\u88c5\u8f7d\u8d85\u65f6\u5904\u7406\u94a9\u5b50\uff08hook\uff09\uff0c\u8fd9\u4e2a\u94a9\u5b50\u53ef\u4ee5\u5728\u811a\u672c\u51fa\u73b0\u8d85\u65f6\u8fd0\u884c\u60c5\u51b5\u65f6\uff0c\u8ba9\u5ba2\u6237\u7aef\u901a\u8fc7 ",(0,i.jsx)(e.code,{children:"SCRIPT KILL"})," \u547d\u4ee4\u505c\u6b62\u811a\u672c\uff0c\u6216\u8005\u901a\u8fc7 SHUTDOWN \u547d\u4ee4\u76f4\u63a5\u5173\u95ed\u670d\u52a1\u5668"]}),"\n",(0,i.jsx)(e.p,{children:"\u56e0\u4e3a Redis \u662f\u5355\u7ebf\u7a0b\u7684\u6267\u884c\u547d\u4ee4\uff0c\u5f53 Lua \u811a\u672c\u963b\u585e\u65f6\u9700\u8981\u515c\u5e95\u7b56\u7565\uff0c\u53ef\u4ee5\u4e2d\u65ad\u6267\u884c"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6267\u884c\u811a\u672c\u51fd\u6570"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u79fb\u9664\u4e4b\u524d\u88c5\u8f7d\u7684\u8d85\u65f6\u94a9\u5b50"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5c06\u6267\u884c\u811a\u672c\u51fd\u6570\u7684\u7ed3\u679c\u4fdd\u5b58\u5230\u5ba2\u6237\u7aef\u72b6\u6001\u7684\u8f93\u51fa\u7f13\u51b2\u533a\u91cc\uff0c\u7b49\u5f85\u670d\u52a1\u5668\u5c06\u7ed3\u679c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"evalsha",children:"EVALSHA"}),"\n",(0,i.jsxs)(e.p,{children:["EVALSHA \u547d\u4ee4\u7684\u5b9e\u73b0\u539f\u7406\u5c31\u662f\u6839\u636e\u811a\u672c\u7684 SHA1 \u6821\u9a8c\u548c\u6765\u8c03\u7528",(0,i.jsx)(e.strong,{children:"\u811a\u672c\u5bf9\u5e94\u7684\u51fd\u6570"}),"\uff0c\u5982\u679c\u51fd\u6570\u5728 Lua \u73af\u5883\u4e2d\u4e0d\u5b58\u5728\uff0c\u627e\u4e0d\u5230 f_ \u5f00\u5934\u7684\u51fd\u6570\uff0c\u5c31\u4f1a\u8fd4\u56de ",(0,i.jsx)(e.code,{children:"SCRIPT NOT FOUND"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u7ba1\u7406\u547d\u4ee4",children:"\u7ba1\u7406\u547d\u4ee4"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u4e2d\u4e0e Lua \u811a\u672c\u6709\u5173\u7684\u7ba1\u7406\u547d\u4ee4\u6709\u56db\u4e2a\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"SCRIPT FLUSH\uff1a\u7528\u4e8e\u6e05\u9664\u670d\u52a1\u5668\u4e2d\u6240\u6709\u548c Lua \u811a\u672c\u6709\u5173\u7684\u4fe1\u606f\uff0c\u4f1a\u91ca\u653e\u5e76\u91cd\u5efa lua_scripts \u5b57\u5178\uff0c\u5173\u95ed\u73b0\u6709\u7684 Lua \u73af\u5883\u5e76\u91cd\u65b0\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 Lua \u73af\u5883"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"SCRIPT EXISTS\uff1a\u6839\u636e\u8f93\u5165\u7684 SHA1 \u6821\u9a8c\u548c\uff08\u5141\u8bb8\u4e00\u6b21\u4f20\u5165\u591a\u4e2a\u6821\u9a8c\u548c\uff09\uff0c\u68c0\u67e5\u6821\u9a8c\u548c\u5bf9\u5e94\u7684\u811a\u672c\u662f\u5426\u5b58\u5728\u4e8e\u670d\u52a1\u5668\u4e2d\uff0c\u901a\u8fc7\u68c0\u67e5 lua_scripts \u5b57\u5178\u5b9e\u73b0"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"SCRIPT LOAD\uff1a\u5728 Lua \u73af\u5883\u4e2d\u4e3a\u811a\u672c\u521b\u5efa\u76f8\u5bf9\u5e94\u7684\u51fd\u6570\uff0c\u7136\u540e\u5c06\u811a\u672c\u4fdd\u5b58\u5230 lua_scripts\u5b57\u5178\u91cc"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'redis> SCRIPT LOAD "return \'hi\'"\n"2f3lba2bb6d6a0f42ccl59d2e2dad55440778de3"\n'})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"SCRIPT KILL\uff1a\u505c\u6b62\u811a\u672c"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u670d\u52a1\u5668\u914d\u7f6e\u4e86 lua-time-li\xadmit \u9009\u9879\uff0c\u90a3\u4e48\u5728\u6bcf\u6b21\u6267\u884c Lua \u811a\u672c\u4e4b\u524d\uff0c\u90fd\u4f1a\u8bbe\u7f6e\u4e00\u4e2a\u8d85\u65f6\u5904\u7406\u7684\u94a9\u5b50\u3002\u94a9\u5b50\u4f1a\u5728\u811a\u672c\u8fd0\u884c\u671f\u95f4\u4f1a\u5b9a\u671f\u68c0\u67e5\u8fd0\u884c\u65f6\u95f4\u662f\u5426\u8d85\u8fc7\u914d\u7f6e\u65f6\u95f4\uff0c\u5982\u679c\u8d85\u65f6\u94a9\u5b50\u5c06\u5b9a\u671f\u5728\u811a\u672c\u8fd0\u884c\u7684\u95f4\u9699\u4e2d\uff0c\u67e5\u770b\u662f\u5426\u6709 SCRIPT KILL \u6216\u8005 SHUTDOWN \u5230\u8fbe\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u8d85\u65f6\u8fd0\u884c\u7684\u811a\u672c\u6ca1\u6709\u6267\u884c\u8fc7\u5199\u5165\u64cd\u4f5c\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7 SCRIPT KILL \u6765\u505c\u6b62\u8fd9\u4e2a\u811a\u672c"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u6267\u884c\u8fc7\u5199\u5165\u64cd\u4f5c\uff0c\u5ba2\u6237\u7aef\u53ea\u80fd\u7528 SHUTDOWN nosave \u547d\u4ee4\u6765\u505c\u6b62\u670d\u52a1\u5668\uff0c\u9632\u6b62\u4e0d\u5408\u6cd5\u7684\u6570\u636e\u88ab\u5199\u5165\u6570\u636e\u5e93\u4e2d"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u811a\u672c\u590d\u5236",children:"\u811a\u672c\u590d\u5236"}),"\n",(0,i.jsx)(e.h4,{id:"\u547d\u4ee4\u590d\u5236",children:"\u547d\u4ee4\u590d\u5236"}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u670d\u52a1\u5668\u8fd0\u884c\u5728\u590d\u5236\u6a21\u5f0f\u65f6\uff0c\u5177\u6709\u5199\u6027\u8d28\u7684\u811a\u672c\u547d\u4ee4\u4e5f\u4f1a\u88ab\u590d\u5236\u5230\u4ece\u670d\u52a1\u5668\uff0c\u5305\u62ec EVAL\u3001EVALSHA\u3001SCRIPT FLUSH\uff0c\u4ee5\u53ca SCRIPT LOAD \u547d\u4ee4"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u590d\u5236 EVAL\u3001SCRIPT FLUSH\u3001SCRIPT LOAD \u4e09\u4e2a\u547d\u4ee4\u7684\u65b9\u6cd5\u548c\u590d\u5236\u666e\u901a Redis \u547d\u4ee4\u7684\u65b9\u6cd5\u4e00\u6837\uff0c\u5f53\u4e3b\u670d\u52a1\u5668\u6267\u884c\u5b8c\u4ee5\u4e0a\u4e09\u4e2a\u547d\u4ee4\u7684\u5176\u4e2d\u4e00\u4e2a\u65f6\uff0c\u4f1a\u76f4\u63a5\u5c06\u88ab\u6267\u884c\u7684\u547d\u4ee4\u4f20\u64ad\uff08propagate\uff09\u7ed9\u6240\u6709\u4ece\u670d\u52a1\u5668\uff0c\u5728\u4ece\u670d\u52a1\u5668\u4e2d\u4ea7\u751f\u76f8\u540c\u7684\u6548\u679c"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"evalsha-1",children:"EVALSHA"}),"\n",(0,i.jsx)(e.p,{children:"EVALSHA \u547d\u4ee4\u7684\u590d\u5236\u64cd\u4f5c\u76f8\u5bf9\u590d\u6742\uff0c\u56e0\u4e3a\u591a\u4e2a\u4ece\u670d\u52a1\u5668\u4e4b\u95f4\u8f7d\u5165 Lua \u811a\u672c\u7684\u6e05\u51b5\u5404\u6709\u4e0d\u540c\uff0c\u4e00\u4e2a\u5728\u4e3b\u670d\u52a1\u5668\u88ab\u6210\u529f\u6267\u884c\u7684 EVALSHA \u547d\u4ee4\uff0c\u5728\u4ece\u670d\u52a1\u5668\u6267\u884c\u65f6\u53ef\u80fd\u4f1a\u51fa\u73b0\u811a\u672c\u672a\u627e\u5230\uff08not found\uff09\u9519\u8bef"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u8981\u6c42\u4e3b\u670d\u52a1\u5668\u5728\u4f20\u64ad EVALSHA \u547d\u4ee4\u65f6\uff0c\u5fc5\u987b\u786e\u4fdd EVALSHA \u547d\u4ee4\u8981\u6267\u884c\u7684\u811a\u672c\u5df2\u7ecf\u88ab\u6240\u6709\u4ece\u670d\u52a1\u5668\u8f7d\u5165\u8fc7\uff0c\u5982\u679c\u4e0d\u80fd\u786e\u4fdd\u4e3b\u670d\u52a1\u5668\u4f1a",(0,i.jsx)(e.strong,{children:"\u5c06 EVALSHA \u547d\u4ee4\u8f6c\u6362\u6210\u4e00\u4e2a\u7b49\u4ef7\u7684 EVAL \u547d\u4ee4"}),"\uff0c\u7136\u540e\u901a\u8fc7\u4f20\u64ad EVAL \u547d\u4ee4\u6765\u4ee3\u66ff EVALSHA \u547d\u4ee4"]}),"\n",(0,i.jsxs)(e.p,{children:["\u4e3b\u670d\u52a1\u5668\u4f7f\u7528\u670d\u52a1\u5668\u72b6\u6001\u7684 repl_scriptcache_dict \u5b57\u5178\u8bb0\u5f55\u5df2\u7ecf\u5c06\u54ea\u4e9b\u811a\u672c\u4f20\u64ad\u7ed9\u4e86",(0,i.jsx)(e.strong,{children:"\u6240\u6709\u4ece\u670d\u52a1\u5668"}),"\uff0c\u5f53\u4e00\u4e2a\u6821\u9a8c\u548c\u51fa\u73b0\u5728\u5b57\u5178\u65f6\uff0c\u8bf4\u660e\u6821\u9a8c\u548c\u5bf9\u5e94\u7684 Lua \u811a\u672c\u5df2\u7ecf\u4f20\u64ad\u7ed9\u4e86\u6240\u6709\u4ece\u670d\u52a1\u5668\uff0c\u4e3b\u670d\u52a1\u5668\u53ef\u4ee5\u76f4\u63a5\u4f20\u64ad EVALSHA \u547d\u4ee4"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n    // \u952e\u662f\u4e00\u4e2a\u4e2a Lua \u811a\u672c\u7684 SHA1 \u6821\u9a8c\u548c\uff0c\u503c\u5219\u5168\u90e8\u90fd\u662f NULL\n    dict *repl_scriptcache_dict;\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u6bcf\u5f53\u4e3b\u670d\u52a1\u5668\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u4ece\u670d\u52a1\u5668\u65f6\uff0c\u90fd\u4f1a\u6e05\u7a7a repl_scriptcache_dict \u5b57\u5178\uff0c\u56e0\u4e3a\u5b57\u5178\u91cc\u9762\u8bb0\u5f55\u7684\u811a\u672c\u5df2\u7ecf\u4e0d\u518d\u88ab\u6240\u6709\u4ece\u670d\u52a1\u5668\u8f7d\u5165\u8fc7\uff0c\u6240\u4ee5\u670d\u52a1\u5668\u4ee5\u6e05\u7a7a\u5b57\u5178\u7684\u65b9\u5f0f\uff0c\u5f3a\u5236\u91cd\u65b0\u5411\u6240\u6709\u4ece\u670d\u52a1\u5668\u4f20\u64ad\u811a\u672c"}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u4f7f\u7528 EVALSHA \u547d\u4ee4\u6307\u5b9a\u7684 SHA1 \u6821\u9a8c\u548c\uff0c\u4ee5\u53ca lua_scripts \u5b57\u5178\u4fdd\u5b58\u7684 Lua \u811a\u672c\uff0c\u53ef\u4ee5\u5c06\u4e00\u4e2a EVALSHA \u547d\u4ee4\u8f6c\u5316\u4e3a EVAL \u547d\u4ee4"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'EVALSHA "533203lc6b470dc5a0dd9b4bf2030dea6d65de91" 0 \n# -> \u8f6c\u6362\nEVAL "return\'hello world\'" 0 \n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u811a\u672c\u5185\u5bb9 ",(0,i.jsx)(e.code,{children:"\"return'hello world'\""})," \u6765\u6e90\u4e8e lua_scripts \u5b57\u5178 533203lc6b470dc5a0dd9b4bf2030dea6d65de91 \u952e\u7684\u503c"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u5206\u5e03\u5f0f\u9501",children:"\u5206\u5e03\u5f0f\u9501"}),"\n",(0,i.jsx)(e.h3,{id:"\u57fa\u672c\u64cd\u4f5c-4",children:"\u57fa\u672c\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u5206\u5e03\u5f0f\u573a\u666f\u4e0b\uff0c\u9501\u53d8\u91cf\u9700\u8981\u7531\u4e00\u4e2a\u5171\u4eab\u5b58\u50a8\u7cfb\u7edf\u6765\u7ef4\u62a4\uff0c\u591a\u4e2a\u5ba2\u6237\u7aef\u624d\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee\u5171\u4eab\u5b58\u50a8\u7cfb\u7edf\u6765\u8bbf\u95ee\u9501\u53d8\u91cf\uff0c\u52a0\u9501\u548c\u91ca\u653e\u9501\u7684\u64cd\u4f5c\u5c31\u53d8\u6210\u4e86\u8bfb\u53d6\u3001\u5224\u65ad\u548c\u8bbe\u7f6e\u5171\u4eab\u5b58\u50a8\u7cfb\u7edf\u4e2d\u7684\u9501\u53d8\u91cf\u503c\u591a\u6b65\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u5206\u5e03\u5f0f\u9501\u7684\u57fa\u672c\u4f7f\u7528\uff0c\u60b2\u89c2\u9501"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528 SETNX \u8bbe\u7f6e\u4e00\u4e2a\u516c\u5171\u9501"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"SETNX lock-key value\t# value\u4efb\u610f\u6570\uff0c\u8fd4\u56de\u4e3a1\u8bbe\u7f6e\u6210\u529f\uff0c\u8fd4\u56de\u4e3a0\u8bbe\u7f6e\u5931\u8d25\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"NX"}),"\uff1a\u53ea\u5728\u952e\u4e0d\u5b58\u5728\u65f6\uff0c\u624d\u5bf9\u952e\u8fdb\u884c\u8bbe\u7f6e\u64cd\u4f5c\uff0c",(0,i.jsx)(e.code,{children:"SET key value NX"})," \u6548\u679c\u7b49\u540c\u4e8e ",(0,i.jsx)(e.code,{children:"SETNX key value"})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"XX"}),"\uff1a\u53ea\u5728\u952e\u5df2\u7ecf\u5b58\u5728\u65f6\uff0c\u624d\u5bf9\u952e\u8fdb\u884c\u8bbe\u7f6e\u64cd\u4f5c"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"EX"}),"\uff1a\u8bbe\u7f6e\u952e key \u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u5355\u4f4d\u65f6\u79d2"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"PX"}),"\uff1a\u8bbe\u7f6e\u952e key \u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u5355\u4f4d\u65f6\u6beb\u79d2"]}),"\n",(0,i.jsxs)(e.p,{children:["\u8bf4\u660e\uff1a\u7531\u4e8e ",(0,i.jsx)(e.code,{children:"SET"})," \u547d\u4ee4\u52a0\u4e0a\u9009\u9879\u5df2\u7ecf\u53ef\u4ee5\u5b8c\u5168\u53d6\u4ee3 SETNX\u3001SETEX\u3001PSETEX \u7684\u529f\u80fd\uff0cRedis \u4e0d\u63a8\u8350\u4f7f\u7528\u8fd9\u51e0\u4e2a\u547d\u4ee4"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u64cd\u4f5c\u5b8c\u6bd5\u901a\u8fc7 DEL \u64cd\u4f5c\u91ca\u653e\u9501"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"DEL lock-key \n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528 EXPIRE \u4e3a\u9501 key \u6dfb\u52a0\u5b58\u6d3b\uff08\u6301\u6709\uff09\u65f6\u95f4\uff0c\u8fc7\u671f\u81ea\u52a8\u5220\u9664\uff08\u653e\u5f03\uff09\u9501\uff0c\u9632\u6b62\u7ebf\u7a0b\u51fa\u73b0\u5f02\u5e38\uff0c\u65e0\u6cd5\u91ca\u653e\u9501"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"EXPIRE lock-key second \nPEXPIRE lock-key milliseconds\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7 EXPIRE \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\u7f3a\u4e4f\u539f\u5b50\u6027\uff0c\u5982\u679c\u5728 SETNX \u548c EXPIRE \u4e4b\u95f4\u51fa\u73b0\u5f02\u5e38\uff0c\u9501\u4e5f\u65e0\u6cd5\u91ca\u653e"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728 SET \u65f6\u6307\u5b9a\u8fc7\u671f\u65f6\u95f4\uff0c\u4fdd\u8bc1\u539f\u5b50\u6027"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"SET key value NX [EX seconds | PX milliseconds]\n\n\n\n\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u9632\u8bef\u5220",children:"\u9632\u8bef\u5220"}),"\n",(0,i.jsx)(e.p,{children:"\u573a\u666f\u63cf\u8ff0\uff1a\u7ebf\u7a0b A \u6b63\u5728\u6267\u884c\uff0c\u4f46\u662f\u4e1a\u52a1\u963b\u585e\uff0c\u5728\u9501\u7684\u8fc7\u671f\u65f6\u95f4\u5185\u672a\u6267\u884c\u5b8c\u6210\uff0c\u8fc7\u671f\u5220\u9664\u540e\u7ebf\u7a0b B \u91cd\u65b0\u83b7\u53d6\u5230\u9501\uff0c\u6b64\u65f6\u7ebf\u7a0b A \u6267\u884c\u5b8c\u6210\uff0c\u5220\u9664\u9501\uff0c\u5bfc\u81f4\u7ebf\u7a0b B \u7684\u9501\u88ab\u7ebf\u7a0b A \u8bef\u5220"}),"\n",(0,i.jsx)(e.p,{children:"SETNX \u83b7\u53d6\u9501\u65f6\uff0c\u8bbe\u7f6e\u4e00\u4e2a\u6307\u5b9a\u7684\u552f\u4e00\u503c\uff08UUID\uff09\uff0c\u91ca\u653e\u524d\u83b7\u53d6\u8fd9\u4e2a\u503c\uff0c\u5224\u65ad\u662f\u5426\u81ea\u5df1\u7684\u9501\uff0c\u9632\u6b62\u51fa\u73b0\u7ebf\u7a0b\u4e4b\u95f4\u8bef\u5220\u4e86\u5176\u4ed6\u7ebf\u7a0b\u7684\u9501"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// \u52a0\u9501, unique_value\u4f5c\u4e3a\u5ba2\u6237\u7aef\u552f\u4e00\u6027\u7684\u6807\u8bc6\uff0c\n// PX 10000 \u5219\u8868\u793a lock_key \u4f1a\u5728 10s \u540e\u8fc7\u671f\uff0c\u4ee5\u514d\u5ba2\u6237\u7aef\u5728\u8fd9\u671f\u95f4\u53d1\u751f\u5f02\u5e38\u800c\u65e0\u6cd5\u91ca\u653e\u9501\nSET lock_key unique_value NX PX 10000\n"})}),"\n",(0,i.jsxs)(e.p,{children:["Lua \u811a\u672c\uff08unlock.script\uff09\u5b9e\u73b0\u7684\u91ca\u653e\u9501\u64cd\u4f5c\u7684\u4f2a\u4ee3\u7801\uff1akey \u7c7b\u578b\u53c2\u6570\u4f1a\u653e\u5165 KEYS \u6570\u7ec4\uff0c\u5176\u5b83\u53c2\u6570\u4f1a\u653e\u5165 ARGV \u6570\u7ec4\uff0c\u5728\u811a\u672c\u4e2d\u901a\u8fc7 KEYS \u548c ARGV \u4f20\u9012\u53c2\u6570\uff0c",(0,i.jsx)(e.strong,{children:"\u4fdd\u8bc1\u5224\u65ad\u6807\u8bc6\u548c\u91ca\u653e\u9501\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u7684\u539f\u5b50\u6027"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"EVAL \"return redis.call('set', KEYS[1], ARGV[1])\" 1 lock_key unique_value # 1 \u4ee3\u8868\u9700\u8981\u4e00\u4e2a\u53c2\u6570\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:'// \u91ca\u653e\u9501\uff0cKEYS[1] \u5c31\u662f\u9501\u7684 key\uff0cARGV[1] \u5c31\u662f\u6807\u8bc6\u503c\uff0c\u907f\u514d\u8bef\u91ca\u653e\n// \u83b7\u53d6\u6807\u8bc6\u503c\uff0c\u5224\u65ad\u662f\u5426\u4e0e\u5f53\u524d\u7ebf\u7a0b\u6807\u793a\u4e00\u81f4\nif redis.call("get", KEYS[1]) == ARGV[1] then\n    return redis.call("del", KEYS[1])\nelse\n    return 0\nend\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u4f18\u5316\u9501-1",children:"\u4f18\u5316\u9501"}),"\n",(0,i.jsx)(e.h4,{id:"\u4e0d\u53ef\u91cd\u5165",children:"\u4e0d\u53ef\u91cd\u5165"}),"\n",(0,i.jsx)(e.p,{children:"\u4e0d\u53ef\u91cd\u5165\uff1a\u540c\u4e00\u4e2a\u7ebf\u7a0b\u65e0\u6cd5\u591a\u6b21\u83b7\u53d6\u540c\u4e00\u628a\u9501"}),"\n",(0,i.jsxs)(e.p,{children:["\u4f7f\u7528 hash \u952e\uff0cfiled \u662f\u52a0\u9501\u7684\u7ebf\u7a0b\u6807\u8bc6\uff0c value \u662f",(0,i.jsx)(e.strong,{children:"\u9501\u91cd\u5165\u6b21\u6570"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"|    key    |       value       |\n|           |  filed  |  value  |\n|-------------------------------|\n|  lock_key | thread1 |    1    |\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u9501\u91cd\u5165\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u52a0\u9501\u65f6\u5224\u65ad\u9501\u7684 filed \u5c5e\u6027\u662f\u5426\u662f\u5f53\u524d\u7ebf\u7a0b\uff0c\u5982\u679c\u662f\u5c06 value \u52a0 1"}),"\n",(0,i.jsx)(e.li,{children:"\u89e3\u9501\u65f6\u5224\u65ad\u9501\u7684 filed \u5c5e\u6027\u662f\u5426\u662f\u5f53\u524d\u7ebf\u7a0b\uff0c\u9996\u5148\u5c06 value \u51cf\u4e00\uff0c\u5982\u679c value \u4e3a 0 \u76f4\u63a5\u91ca\u653e\u9501"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528 Lua \u811a\u672c\u4fdd\u8bc1\u591a\u6761\u547d\u4ee4\u7684\u539f\u5b50\u6027"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u4e0d\u53ef\u91cd\u8bd5",children:"\u4e0d\u53ef\u91cd\u8bd5"}),"\n",(0,i.jsx)(e.p,{children:"\u4e0d\u53ef\u91cd\u8bd5\uff1a\u83b7\u53d6\u9501\u53ea\u5c1d\u8bd5\u4e00\u6b21\u5c31\u8fd4\u56de false\uff0c\u6ca1\u6709\u91cd\u8bd5\u673a\u5236"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5229\u7528 Lua \u811a\u672c\u5c1d\u8bd5\u83b7\u53d6\u9501\uff0c\u83b7\u53d6\u5931\u8d25\u83b7\u53d6\u9501\u7684\u5269\u4f59\u8d85\u65f6\u65f6\u95f4 ttl\uff0c\u6216\u8005\u901a\u8fc7\u53c2\u6570\u4f20\u5165\u7ebf\u7a0b\u62a2\u9501\u5141\u8bb8\u7b49\u5f85\u7684\u65f6\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"\u5229\u7528\u8ba2\u9605\u529f\u80fd\u8ba2\u9605\u9501\u91ca\u653e\u7684\u4fe1\u606f\uff0c\u7136\u540e\u7ebf\u7a0b\u6302\u8d77\u7b49\u5f85 ttl \u65f6\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"\u5229\u7528 Lua \u811a\u672c\u5728\u91ca\u653e\u9501\u65f6\uff0c\u53d1\u5e03\u4e00\u6761\u9501\u91ca\u653e\u7684\u6d88\u606f"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u8d85\u65f6\u91ca\u653e",children:"\u8d85\u65f6\u91ca\u653e"}),"\n",(0,i.jsx)(e.p,{children:"\u8d85\u65f6\u91ca\u653e\uff1a\u9501\u8d85\u65f6\u91ca\u653e\u53ef\u4ee5\u907f\u514d\u6b7b\u9501\uff0c\u4f46\u5982\u679c\u662f\u4e1a\u52a1\u6267\u884c\u8017\u65f6\u8f83\u957f\uff0c\u9700\u8981\u8fdb\u884c\u9501\u7eed\u65f6\uff0c\u9632\u6b62\u4e1a\u52a1\u672a\u6267\u884c\u5b8c\u63d0\u524d\u91ca\u653e\u9501"}),"\n",(0,i.jsx)(e.p,{children:"\u770b\u95e8\u72d7 Watch Dog \u673a\u5236\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u83b7\u53d6\u9501\u6210\u529f\u540e\uff0c\u63d0\u4ea4\u5468\u671f\u4efb\u52a1\uff0c\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\uff08Redisson \u4e2d\u9ed8\u8ba4\u4e3a\u8fc7\u671f\u65f6\u95f4 / 3\uff09\uff0c\u91cd\u7f6e\u4e00\u6b21\u8d85\u65f6\u65f6\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u670d\u52a1\u5b95\u673a\uff0cWatch Dog \u673a\u5236\u7ebf\u7a0b\u5c31\u505c\u6b62\uff0c\u5c31\u4e0d\u4f1a\u518d\u5ef6\u957f key \u7684\u8fc7\u671f\u65f6\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"\u91ca\u653e\u9501\u540e\uff0c\u7ec8\u6b62\u5468\u671f\u4efb\u52a1"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u4e3b\u4ece\u4e00\u81f4",children:"\u4e3b\u4ece\u4e00\u81f4"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u4ece\u4e00\u81f4\u6027\uff1a\u96c6\u7fa4\u6a21\u5f0f\u4e0b\uff0c\u4e3b\u4ece\u540c\u6b65\u5b58\u5728\u5ef6\u8fdf\uff0c\u5f53\u52a0\u9501\u540e\u4e3b\u670d\u52a1\u5668\u5b95\u673a\u65f6\uff0c\u4ece\u670d\u52a1\u5668\u8fd8\u6ca1\u540c\u6b65\u4e3b\u670d\u52a1\u5668\u4e2d\u7684\u9501\u6570\u636e\uff0c\u6b64\u65f6\u4ece\u670d\u52a1\u5668\u5347\u7ea7\u4e3a\u4e3b\u670d\u52a1\u5668\uff0c\u5176\u4ed6\u7ebf\u7a0b\u53c8\u53ef\u4ee5\u83b7\u53d6\u5230\u9501"}),"\n",(0,i.jsx)(e.p,{children:"\u5c06\u670d\u52a1\u5668\u5347\u7ea7\u4e3a\u591a\u4e3b\u591a\u4ece\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u83b7\u53d6\u9501\u9700\u8981\u4ece\u6240\u6709\u4e3b\u670d\u52a1\u5668 SET \u6210\u529f\u624d\u7b97\u83b7\u53d6\u6210\u529f"}),"\n",(0,i.jsx)(e.li,{children:"\u67d0\u4e2a master \u5b95\u673a\uff0cslave \u8fd8\u6ca1\u6709\u540c\u6b65\u9501\u6570\u636e\u5c31\u5347\u7ea7\u4e3a master\uff0c\u5176\u4ed6\u7ebf\u7a0b\u5c1d\u8bd5\u52a0\u9501\u4f1a\u52a0\u9501\u5931\u8d25\uff0c\u56e0\u4e3a\u5176\u4ed6 master \u4e0a\u5df2\u7ecf\u5b58\u5728\u8be5\u9501"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u4e3b\u4ece\u590d\u5236-1",children:"\u4e3b\u4ece\u590d\u5236"}),"\n",(0,i.jsx)(e.h3,{id:"\u57fa\u672c\u64cd\u4f5c-5",children:"\u57fa\u672c\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.h4,{id:"\u4e3b\u4ece\u4ecb\u7ecd",children:"\u4e3b\u4ece\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u4ece\u590d\u5236\uff1a\u4e00\u4e2a\u670d\u52a1\u5668\u53bb\u590d\u5236\u53e6\u4e00\u4e2a\u670d\u52a1\u5668\uff0c\u88ab\u590d\u5236\u7684\u670d\u52a1\u5668\u4e3a\u4e3b\u670d\u52a1\u5668 master\uff0c\u590d\u5236\u7684\u670d\u52a1\u5668\u4e3a\u4ece\u670d\u52a1\u5668 slave"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["master \u7528\u6765",(0,i.jsx)(e.strong,{children:"\u5199\u6570\u636e"}),"\uff0c\u6267\u884c\u5199\u64cd\u4f5c\u65f6\uff0c\u5c06\u51fa\u73b0\u53d8\u5316\u7684\u6570\u636e\u81ea\u52a8\u540c\u6b65\u5230 slave\uff0c\u5f88\u5c11\u4f1a\u8fdb\u884c\u8bfb\u53d6\u64cd\u4f5c"]}),"\n",(0,i.jsx)(e.li,{children:"slave \u7528\u6765\u8bfb\u6570\u636e\uff0c\u7981\u6b62\u5728 slave \u670d\u52a1\u5668\u4e0a\u8fdb\u884c\u8bfb\u64cd\u4f5c"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u8fdb\u884c\u590d\u5236\u4e2d\u7684\u4e3b\u4ece\u670d\u52a1\u5668\u53cc\u65b9\u7684\u6570\u636e\u5e93\u5c06\u4fdd\u5b58\u76f8\u540c\u7684\u6570\u636e\uff0c\u5c06\u8fd9\u79cd\u73b0\u8c61\u79f0\u4f5c",(0,i.jsx)(e.strong,{children:"\u6570\u636e\u5e93\u72b6\u6001\u4e00\u81f4"})]}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u4ece\u590d\u5236\u7684\u7279\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u85aa\u706b\u76f8\u4f20"}),"\uff1a\u4e00\u4e2a slave \u53ef\u4ee5\u662f\u4e0b\u4e00\u4e2a slave \u7684 master\uff0cslave \u540c\u6837\u53ef\u4ee5\u63a5\u6536\u5176\u4ed6 slave \u7684\u8fde\u63a5\u548c\u540c\u6b65\u8bf7\u6c42\uff0c\u90a3\u4e48\u8be5 slave \u4f5c\u4e3a\u4e86\u94fe\u6761\u4e2d\u4e0b\u4e00\u4e2a\u7684 master\uff0c\u53ef\u4ee5\u6709\u6548\u51cf\u8f7b master \u7684\u5199\u538b\u529b\uff0c\u53bb\u4e2d\u5fc3\u5316\u964d\u4f4e\u98ce\u9669"]}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u4e3b\u673a\u6302\u4e86\uff0c\u4ece\u673a\u8fd8\u662f\u4ece\u673a\uff0c\u65e0\u6cd5\u5199\u6570\u636e\u4e86"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u53cd\u5ba2\u4e3a\u4e3b"}),"\uff1a\u5f53\u4e00\u4e2a master \u5b95\u673a\u540e\uff0c\u540e\u9762\u7684 slave \u53ef\u4ee5\u7acb\u523b\u5347\u4e3a master\uff0c\u5176\u540e\u9762\u7684 slave \u4e0d\u505a\u4efb\u4f55\u4fee\u6539"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u4ece\u590d\u5236\u7684\u4f5c\u7528\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u8bfb\u5199\u5206\u79bb"}),"\uff1amaster \u5199\u3001slave \u8bfb\uff0c\u63d0\u9ad8\u670d\u52a1\u5668\u7684\u8bfb\u5199\u8d1f\u8f7d\u80fd\u529b"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u8d1f\u8f7d\u5747\u8861"}),"\uff1a\u57fa\u4e8e\u4e3b\u4ece\u7ed3\u6784\uff0c\u914d\u5408\u8bfb\u5199\u5206\u79bb\uff0c\u7531 slave \u5206\u62c5 master \u8d1f\u8f7d\uff0c\u5e76\u6839\u636e\u9700\u6c42\u7684\u53d8\u5316\uff0c\u6539\u53d8 slave \u7684\u6570\u91cf\uff0c\u901a\u8fc7\u591a\u4e2a\u4ece\u8282\u70b9\u5206\u62c5\u6570\u636e\u8bfb\u53d6\u8d1f\u8f7d\uff0c\u5927\u5927\u63d0\u9ad8 Redis \u670d\u52a1\u5668\u5e76\u53d1\u91cf\u4e0e\u6570\u636e\u541e\u5410\u91cf"]}),"\n",(0,i.jsx)(e.li,{children:"\u6545\u969c\u6062\u590d\uff1a\u5f53 master \u51fa\u73b0\u95ee\u9898\u65f6\uff0c\u7531 slave \u63d0\u4f9b\u670d\u52a1\uff0c\u5b9e\u73b0\u5feb\u901f\u7684\u6545\u969c\u6062\u590d"}),"\n",(0,i.jsx)(e.li,{children:"\u6570\u636e\u5197\u4f59\uff1a\u5b9e\u73b0\u6570\u636e\u70ed\u5907\u4efd\uff0c\u662f\u6301\u4e45\u5316\u4e4b\u5916\u7684\u4e00\u79cd\u6570\u636e\u5197\u4f59\u65b9\u5f0f"}),"\n",(0,i.jsx)(e.li,{children:"\u9ad8\u53ef\u7528\u57fa\u77f3\uff1a\u57fa\u4e8e\u4e3b\u4ece\u590d\u5236\uff0c\u6784\u5efa\u54e8\u5175\u6a21\u5f0f\u4e0e\u96c6\u7fa4\uff0c\u5b9e\u73b0 Redis \u7684\u9ad8\u53ef\u7528\u65b9\u6848"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u4e09\u9ad8"}),"\u67b6\u6784\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u9ad8\u5e76\u53d1\uff1a\u5e94\u7528\u63d0\u4f9b\u67d0\u4e00\u4e1a\u52a1\u8981\u80fd\u652f\u6301\u5f88\u591a\u5ba2\u6237\u7aef\u540c\u65f6\u8bbf\u95ee\u7684\u80fd\u529b\uff0c\u79f0\u4e3a\u5e76\u53d1"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u9ad8\u6027\u80fd\uff1a\u6027\u80fd\u6700\u76f4\u89c2\u7684\u611f\u53d7\u5c31\u662f\u901f\u5ea6\u5feb\uff0c\u65f6\u95f4\u77ed"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u9ad8\u53ef\u7528\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53ef\u7528\u6027\uff1a\u5e94\u7528\u670d\u52a1\u5728\u5168\u5e74\u5b95\u673a\u7684\u65f6\u95f4\u52a0\u5728\u4e00\u8d77\u5c31\u662f\u5168\u5e74\u5e94\u7528\u670d\u52a1\u4e0d\u53ef\u7528\u7684\u65f6\u95f4"}),"\n",(0,i.jsx)(e.li,{children:"\u4e1a\u754c\u53ef\u7528\u6027\u76ee\u6807 5 \u4e2a 9\uff0c\u5373 99.999%\uff0c\u5373\u670d\u52a1\u5668\u5e74\u5b95\u673a\u65f6\u957f\u4f4e\u4e8e 315 \u79d2\uff0c\u7ea6 5.25 \u5206\u949f"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u64cd\u4f5c\u6307\u4ee4",children:"\u64cd\u4f5c\u6307\u4ee4"}),"\n",(0,i.jsx)(e.p,{children:"\u7cfb\u7edf\u72b6\u6001\u6307\u4ee4\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"INFO replication\n"})}),"\n",(0,i.jsx)(e.p,{children:"master \u548c slave \u4e92\u8fde\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u65b9\u5f0f\u4e00\uff1a\u5ba2\u6237\u7aef\u53d1\u9001\u547d\u4ee4\uff0c\u8bbe\u7f6e slaveof \u9009\u9879\uff0c\u4ea7\u751f\u4e3b\u4ece\u7ed3\u6784"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"slaveof masterip masterport\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u65b9\u5f0f\u4e8c\uff1a\u670d\u52a1\u5668\u5e26\u53c2\u542f\u52a8"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis-server --slaveof masterip masterport\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u65b9\u5f0f\u4e09\uff1a\u670d\u52a1\u5668\u914d\u7f6e\uff08\u4e3b\u6d41\u65b9\u5f0f\uff09"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"slaveof masterip masterport\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u4ece\u65ad\u5f00\u8fde\u63a5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["slave \u65ad\u5f00\u8fde\u63a5\u540e\uff0c\u4e0d\u4f1a\u5220\u9664\u5df2\u6709\u6570\u636e\uff0c\u53ea\u662f\u4e0d\u518d\u63a5\u53d7 master \u53d1\u9001\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u4f5c",(0,i.jsx)(e.strong,{children:"\u4e3a\u4ece\u670d\u52a1\u5668\u5347\u7ea7\u4e3a\u4e3b\u670d\u52a1\u5668\u7684\u6307\u4ee4"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"slaveof no one\t\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6388\u6743\u8bbf\u95ee\uff1amaster \u6709\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\uff0cslave \u4e5f\u6709\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\uff0c\u4e0d\u4ec5\u670d\u52a1\u7aef\u4e4b\u95f4\u53ef\u4ee5\u53d1\u547d\u4ee4\uff0c\u5ba2\u6237\u7aef\u4e5f\u53ef\u4ee5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"master \u5ba2\u6237\u7aef\u53d1\u9001\u547d\u4ee4\u8bbe\u7f6e\u5bc6\u7801\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"requirepass password\n"})}),"\n",(0,i.jsx)(e.p,{children:"master \u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\u5bc6\u7801\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"config set requirepass password\nconfig get requirepass\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"slave \u5ba2\u6237\u7aef\u53d1\u9001\u547d\u4ee4\u8bbe\u7f6e\u5bc6\u7801\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"auth password\n"})}),"\n",(0,i.jsx)(e.p,{children:"slave \u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\u5bc6\u7801\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"masterauth password\n"})}),"\n",(0,i.jsx)(e.p,{children:"slave \u542f\u52a8\u670d\u52a1\u5668\u8bbe\u7f6e\u5bc6\u7801\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis-server \u2013a password\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u590d\u5236\u6d41\u7a0b",children:"\u590d\u5236\u6d41\u7a0b"}),"\n",(0,i.jsx)(e.h4,{id:"\u65e7\u7248\u590d\u5236",children:"\u65e7\u7248\u590d\u5236"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u7684\u590d\u5236\u529f\u80fd\u5206\u4e3a\u540c\u6b65\uff08sync\uff09\u548c\u547d\u4ee4\u4f20\u64ad\uff08command propagate\uff09\u4e24\u4e2a\u64cd\u4f5c\uff0c\u4e3b\u4ece\u5e93\u95f4\u7684\u590d\u5236\u662f",(0,i.jsx)(e.strong,{children:"\u5f02\u6b65\u8fdb\u884c\u7684"})]}),"\n",(0,i.jsx)(e.p,{children:"\u540c\u6b65\u64cd\u4f5c\u7528\u4e8e\u5c06\u4ece\u670d\u52a1\u5668\u7684\u6570\u636e\u5e93\u72b6\u6001\u66f4\u65b0\u81f3\u4e3b\u670d\u52a1\u5668\u5f53\u524d\u6240\u5904\u7684\u6570\u636e\u5e93\u72b6\u6001\uff0c\u8be5\u8fc7\u7a0b\u53c8\u53eb\u5168\u91cf\u590d\u5236\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ece\u670d\u52a1\u5668\u5411\u4e3b\u670d\u52a1\u5668\u53d1\u9001 SYNC \u547d\u4ee4\u6765\u8fdb\u884c\u540c\u6b65"}),"\n",(0,i.jsxs)(e.li,{children:["\u6536\u5230 SYNC \u7684\u4e3b\u670d\u52a1\u5668\u6267\u884c BGSAVE \u547d\u4ee4\uff0c\u5728\u540e\u53f0\u751f\u6210\u4e00\u4e2a RDB \u6587\u4ef6\uff0c\u5e76\u4f7f\u7528\u4e00\u4e2a",(0,i.jsx)(e.strong,{children:"\u7f13\u51b2\u533a"}),"\u8bb0\u5f55\u4ece\u73b0\u5728\u5f00\u59cb\u6267\u884c\u7684\u6240\u6709",(0,i.jsx)(e.strong,{children:"\u5199\u547d\u4ee4"})]}),"\n",(0,i.jsx)(e.li,{children:"\u5f53 BGSAVE \u547d\u4ee4\u6267\u884c\u5b8c\u6bd5\u65f6\uff0c\u4e3b\u670d\u52a1\u5668\u4f1a\u5c06 RDB \u6587\u4ef6\u53d1\u9001\u7ed9\u4ece\u670d\u52a1\u5668"}),"\n",(0,i.jsxs)(e.li,{children:["\u4ece\u670d\u52a1\u63a5\u6536\u5e76\u8f7d\u5165 RDB \u6587\u4ef6\uff08\u4ece\u670d\u52a1\u5668\u4f1a",(0,i.jsx)(e.strong,{children:"\u6e05\u7a7a\u539f\u6709\u6570\u636e"}),"\uff09"]}),"\n",(0,i.jsx)(e.li,{children:"\u7f13\u51b2\u533a\u8bb0\u5f55\u4e86 RDB \u6587\u4ef6\u6240\u5728\u72b6\u6001\u540e\u7684\u6240\u6709\u5199\u547d\u4ee4\uff0c\u4e3b\u670d\u52a1\u5668\u5c06\u5728\u7f13\u51b2\u533a\u7684\u6240\u6709\u547d\u4ee4\u53d1\u9001\u7ed9\u4ece\u670d\u52a1\u5668\uff0c\u4ece\u670d\u52a1\u5668\u6267\u884c\u8fd9\u4e9b\u5199\u547d\u4ee4"}),"\n",(0,i.jsx)(e.li,{children:"\u81f3\u6b64\u4ece\u670d\u52a1\u5668\u7684\u6570\u636e\u5e93\u72b6\u6001\u548c\u4e3b\u670d\u52a1\u5668\u4e00\u81f4"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u547d\u4ee4\u4f20\u64ad\u7528\u4e8e\u5728\u4e3b\u670d\u52a1\u5668\u7684\u6570\u636e\u5e93\u72b6\u6001\u88ab\u4fee\u6539\uff0c\u5bfc\u81f4\u4e3b\u4ece\u6570\u636e\u5e93\u72b6\u6001\u51fa\u73b0\u4e0d\u4e00\u81f4\u65f6\uff0c \u8ba9\u4e3b\u4ece\u670d\u52a1\u5668\u7684\u6570\u636e\u5e93\u91cd\u65b0\u56de\u5230\u4e00\u81f4\u72b6\u6001"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e3b\u670d\u52a1\u5668\u4f1a\u5c06\u81ea\u5df1\u6267\u884c\u7684\u5199\u547d\u4ee4\uff0c\u4e5f\u5373\u662f\u9020\u6210\u4e3b\u4ece\u670d\u52a1\u5668\u4e0d\u4e00\u81f4\u7684\u90a3\u6761\u5199\u547d\u4ee4\uff0c\u53d1\u9001\u7ed9\u4ece\u670d\u52a1\u5668"}),"\n",(0,i.jsx)(e.li,{children:"\u4ece\u670d\u52a1\u5668\u63a5\u53d7\u547d\u4ee4\u5e76\u6267\u884c\uff0c\u4e3b\u4ece\u670d\u52a1\u5668\u5c06\u518d\u6b21\u56de\u5230\u4e00\u81f4\u72b6\u6001"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u529f\u80fd\u7f3a\u9677",children:"\u529f\u80fd\u7f3a\u9677"}),"\n",(0,i.jsx)(e.p,{children:"SYNC \u672c\u8eab\u5c31\u662f\u4e00\u4e2a\u975e\u5e38\u6d88\u8017\u8d44\u6e90\u7684\u64cd\u4f5c\uff0c\u6bcf\u6b21\u6267\u884c SYNC \u547d\u4ee4\uff0c\u90fd\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u52a8\u4f5c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u751f\u6210 RDB \u6587\u4ef6\uff0c\u8017\u8d39\u4e3b\u670d\u52a1\u5668\u5927\u91cf CPU \u3001\u5185\u5b58\u548c\u78c1\u76d8 I/O \u8d44\u6e90"}),"\n",(0,i.jsx)(e.li,{children:"RDB \u6587\u4ef6\u53d1\u9001\u7ed9\u4ece\u670d\u52a1\u5668\uff0c\u8017\u8d39\u4e3b\u4ece\u670d\u52a1\u5668\u5927\u91cf\u7684\u7f51\u7edc\u8d44\u6e90\uff08\u5e26\u5bbd\u548c\u6d41\u91cf\uff09\uff0c\u5e76\u5bf9\u4e3b\u670d\u52a1\u5668\u54cd\u5e94\u547d\u4ee4\u8bf7\u6c42\u7684\u65f6\u95f4\u4ea7\u751f\u5f71\u54cd"}),"\n",(0,i.jsx)(e.li,{children:"\u4ece\u670d\u52a1\u5668\u8f7d\u5165 RDB \u6587\u4ef6\uff0c\u671f\u95f4\u4f1a\u56e0\u4e3a\u963b\u585e\u800c\u6ca1\u529e\u6cd5\u5904\u7406\u547d\u4ee4\u8bf7\u6c42"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"SYNC \u547d\u4ee4\u4e0b\u7684\u4ece\u670d\u52a1\u5668\u5bf9\u4e3b\u670d\u52a1\u5668\u7684\u590d\u5236\u5206\u4e3a\u4e24\u79cd\u60c5\u51b5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u521d\u6b21\u590d\u5236\uff1a\u4ece\u670d\u52a1\u5668\u6ca1\u6709\u590d\u5236\u8fc7\u4efb\u4f55\u4e3b\u670d\u52a1\u5668\uff0c\u6216\u8005\u4ece\u670d\u52a1\u5668\u5f53\u524d\u8981\u590d\u5236\u7684\u4e3b\u670d\u52a1\u5668\u548c\u4e0a\u4e00\u6b21\u590d\u5236\u7684\u4e3b\u670d\u52a1\u5668\u4e0d\u540c"}),"\n",(0,i.jsx)(e.li,{children:"\u65ad\u7ebf\u540e\u91cd\u590d\u5236\uff1a\u5904\u4e8e\u547d\u4ee4\u4f20\u64ad\u9636\u6bb5\u7684\u4e3b\u4ece\u670d\u52a1\u5668\u56e0\u4e3a\u7f51\u7edc\u539f\u56e0\u800c\u4e2d\u65ad\u4e86\u590d\u5236\uff0c\u81ea\u52a8\u91cd\u8fde\u540e\u5e76\u7ee7\u7eed\u590d\u5236\u4e3b\u670d\u52a1\u5668"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u65e7\u7248\u590d\u5236\u5728\u65ad\u7ebf\u540e\u91cd\u590d\u5236\u65f6\uff0c\u4e5f\u4f1a\u521b\u5efa RDB \u6587\u4ef6\u8fdb\u884c",(0,i.jsx)(e.strong,{children:"\u5168\u91cf\u590d\u5236"}),"\uff0c\u4f46\u662f\u4ece\u670d\u52a1\u5668\u53ea\u9700\u8981\u65ad\u7ebf\u65f6\u95f4\u5185\u7684\u8fd9\u90e8\u5206\u6570\u636e\uff0c\u6240\u4ee5\u65e7\u7248\u590d\u5236\u7684\u5b9e\u73b0\u65b9\u5f0f\u975e\u5e38\u6d6a\u8d39\u8d44\u6e90"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u65b0\u7248\u590d\u5236",children:"\u65b0\u7248\u590d\u5236"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u4ece 2.8 \u7248\u672c\u5f00\u59cb\uff0c\u4f7f\u7528 PSYNC \u547d\u4ee4\u4ee3\u66ff SYNC \u547d\u4ee4\u6765\u6267\u884c\u590d\u5236\u65f6\u7684",(0,i.jsx)(e.strong,{children:"\u540c\u6b65\u64cd\u4f5c"}),"\uff08\u547d\u4ee4\u4f20\u64ad\u9636\u6bb5\u76f8\u540c\uff09\uff0c\u89e3\u51b3\u4e86\u65e7\u7248\u590d\u5236\u5728\u5904\u7406\u65ad\u7ebf\u91cd\u590d\u5236\u60c5\u51b5\u7684\u4f4e\u6548\u95ee\u9898"]}),"\n",(0,i.jsxs)(e.p,{children:["PSYNC \u547d\u4ee4\u5177\u6709\u5b8c\u6574\u91cd\u540c\u6b65\uff08full resynchronization\uff09\u548c",(0,i.jsx)(e.strong,{children:"\u90e8\u5206\u91cd\u540c\u6b65"}),"\uff08partial resynchronization\uff09\u4e24\u79cd\u6a21\u5f0f\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5b8c\u6574\u91cd\u540c\u6b65\uff1a\u5904\u7406\u521d\u6b21\u590d\u5236\u60c5\u51b5\uff0c\u6267\u884c\u6b65\u9aa4\u548c SYNC\u547d\u4ee4\u57fa\u672c\u4e00\u6837"}),"\n",(0,i.jsxs)(e.li,{children:["\u90e8\u5206\u91cd\u540c\u6b65\uff1a\u5904\u7406\u65ad\u7ebf\u540e\u91cd\u590d\u5236\u60c5\u51b5\uff0c\u4e3b\u670d\u52a1\u5668\u53ef\u4ee5\u5c06\u4e3b\u4ece\u8fde\u63a5\u65ad\u5f00\u671f\u95f4\u6267\u884c\u7684\u5199\u547d\u4ee4\u53d1\u9001\u7ed9\u4ece\u670d\u52a1\u5668\uff0c\u4ece\u670d\u52a1\u5668\u53ea\u8981\u63a5\u6536\u5e76\u6267\u884c\u8fd9\u4e9b\u5199\u547d\u4ee4\uff0c\u5c31\u53ef\u4ee5\u5c06\u6570\u636e\u5e93\u66f4\u65b0\u81f3\u4e3b\u670d\u52a1\u5668\u5f53\u524d\u6240\u5904\u7684\u72b6\u6001\uff0c\u8be5\u8fc7\u7a0b\u53c8\u53eb",(0,i.jsx)(e.strong,{children:"\u90e8\u5206\u590d\u5236"})]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u90e8\u5206\u540c\u6b65",children:"\u90e8\u5206\u540c\u6b65"}),"\n",(0,i.jsx)(e.p,{children:"\u90e8\u5206\u91cd\u540c\u6b65\u529f\u80fd\u7531\u4ee5\u4e0b\u4e09\u4e2a\u90e8\u5206\u6784\u6210\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e3b\u670d\u52a1\u5668\u7684\u590d\u5236\u504f\u79fb\u91cf\uff08replication offset\uff09\u548c\u4ece\u670d\u52a1\u5668\u7684\u590d\u5236\u504f\u79fb\u91cf"}),"\n",(0,i.jsx)(e.li,{children:"\u4e3b\u670d\u52a1\u5668\u7684\u590d\u5236\u79ef\u538b\u7f13\u51b2\u533a\uff08replication backlog\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u670d\u52a1\u5668\u7684\u8fd0\u884c ID (run ID)"}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"\u504f\u79fb\u91cf",children:"\u504f\u79fb\u91cf"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u670d\u52a1\u5668\u548c\u4ece\u670d\u52a1\u5668\u4f1a\u5206\u522b\u7ef4\u62a4\u4e00\u4e2a\u590d\u5236\u504f\u79fb\u91cf\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e3b\u670d\u52a1\u5668\u6bcf\u6b21\u5411\u4ece\u670d\u52a1\u5668\u4f20\u64ad N \u4e2a\u5b57\u8282\u7684\u6570\u636e\u65f6\uff0c\u5c31\u5c06\u81ea\u5df1\u7684\u590d\u5236\u504f\u79fb\u91cf\u7684\u503c\u52a0\u4e0a N"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4ece\u670d\u52a1\u5668\u6bcf\u6b21\u6536\u5230\u4e3b\u670d\u52a1\u5668\u4f20\u64ad\u6765\u7684 N \u4e2a\u5b57\u8282\u7684\u6570\u636e\u65f6\uff0c\u5c31\u5c06\u81ea\u5df1\u7684\u590d\u5236\u504f\u79fb\u91cf\u7684\u503c\u52a0\u4e0a N"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u5bf9\u6bd4\u4e3b\u4ece\u670d\u52a1\u5668\u7684\u590d\u5236\u504f\u79fb\u91cf\uff0c\u53ef\u4ee5\u5224\u65ad\u4e3b\u4ece\u670d\u52a1\u5668\u662f\u5426\u5904\u4e8e\u4e00\u81f4\u72b6\u6001"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e3b\u4ece\u670d\u52a1\u5668\u7684\u504f\u79fb\u91cf\u662f\u76f8\u540c\u7684\uff0c\u8bf4\u660e\u4e3b\u4ece\u670d\u52a1\u5668\u5904\u4e8e\u4e00\u81f4\u72b6\u6001"}),"\n",(0,i.jsx)(e.li,{children:"\u4e3b\u4ece\u670d\u52a1\u5668\u7684\u504f\u79fb\u91cf\u662f\u4e0d\u540c\u7684\uff0c\u8bf4\u660e\u4e3b\u4ece\u670d\u52a1\u5668\u5904\u4e8e\u4e0d\u4e00\u81f4\u72b6\u6001"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u7f13\u51b2\u533a-1",children:"\u7f13\u51b2\u533a"}),"\n",(0,i.jsx)(e.p,{children:"\u590d\u5236\u79ef\u538b\u7f13\u51b2\u533a\u662f\u7531\u4e3b\u670d\u52a1\u5668\u7ef4\u62a4\u7684\u4e00\u4e2a\u56fa\u5b9a\u957f\u5ea6\uff08fixed-size\uff09\u5148\u8fdb\u5148\u51fa\uff08FIFO\uff09\u961f\u5217\uff0c\u9ed8\u8ba4\u5927\u5c0f\u4e3a 1MB"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u51fa\u961f\u89c4\u5219\u8ddf\u666e\u901a\u7684\u5148\u8fdb\u5148\u51fa\u961f\u5217\u4e00\u6837"}),"\n",(0,i.jsx)(e.li,{children:"\u5165\u961f\u89c4\u5219\u662f\u5f53\u5165\u961f\u5143\u7d20\u7684\u6570\u91cf\u5927\u4e8e\u961f\u5217\u957f\u5ea6\u65f6\uff0c\u6700\u5148\u5165\u961f\u7684\u5143\u7d20\u4f1a\u88ab\u5f39\u51fa\uff0c\u7136\u540e\u65b0\u5143\u7d20\u624d\u4f1a\u88ab\u653e\u5165\u961f\u5217"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5f53\u4e3b\u670d\u52a1\u5668\u8fdb\u884c",(0,i.jsx)(e.strong,{children:"\u547d\u4ee4\u4f20\u64ad\u65f6\uff0c\u4e0d\u4ec5\u4f1a\u5c06\u5199\u547d\u4ee4\u53d1\u9001\u7ed9\u6240\u6709\u4ece\u670d\u52a1\u5668\uff0c\u8fd8\u4f1a\u5c06\u5199\u547d\u4ee4\u5165\u961f\u5230\u590d\u5236\u79ef\u538b\u7f13\u51b2\u533a"}),"\uff0c\u7f13\u51b2\u533a\u4f1a\u4fdd\u5b58\u7740\u4e00\u90e8\u5206\u6700\u8fd1\u4f20\u64ad\u7684\u5199\u547d\u4ee4\uff0c\u5e76\u4e14\u7f13\u51b2\u533a\u4f1a\u4e3a\u961f\u5217\u4e2d\u7684\u6bcf\u4e2a\u5b57\u8282\u8bb0\u5f55\u76f8\u5e94\u7684\u590d\u5236\u504f\u79fb\u91cf"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(84302).A+"",width:"1410",height:"303"})}),"\n",(0,i.jsx)(e.p,{children:"\u4ece\u670d\u52a1\u5668\u4f1a\u901a\u8fc7 PSYNC \u547d\u4ee4\u5c06\u81ea\u5df1\u7684\u590d\u5236\u504f\u79fb\u91cf offset \u53d1\u9001\u7ed9\u4e3b\u670d\u52a1\u5668\uff0c\u4e3b\u670d\u52a1\u5668\u4f1a\u6839\u636e\u8fd9\u4e2a\u590d\u5236\u504f\u79fb\u91cf\u6765\u51b3\u5b9a\u5bf9\u4ece\u670d\u52a1\u5668\u6267\u884c\u4f55\u79cd\u540c\u6b65\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"offset \u4e4b\u540e\u7684\u6570\u636e\uff08\u5373 offset+1\uff09\u4ecd\u7136\u5b58\u5728\u4e8e\u590d\u5236\u79ef\u538b\u7f13\u51b2\u533a\u91cc\uff0c\u90a3\u4e48\u4e3b\u670d\u52a1\u5668\u5c06\u5bf9\u4ece\u670d\u52a1\u5668\u6267\u884c\u90e8\u5206\u91cd\u540c\u6b65\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.li,{children:"offset \u4e4b\u540e\u7684\u6570\u636e\u5df2\u7ecf\u4e0d\u5728\u590d\u5236\u79ef\u538b\u7f13\u51b2\u533a\uff0c\u8bf4\u660e\u90e8\u5206\u6570\u636e\u5df2\u7ecf\u4e22\u5931\uff0c\u90a3\u4e48\u4e3b\u670d\u52a1\u5668\u5c06\u5bf9\u4ece\u670d\u52a1\u5668\u6267\u884c\u5b8c\u6574\u91cd\u540c\u6b65\u64cd\u4f5c"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u590d\u5236\u7f13\u51b2\u533a\u5927\u5c0f\u8bbe\u5b9a\u4e0d\u5408\u7406\uff0c\u4f1a\u5bfc\u81f4",(0,i.jsx)(e.strong,{children:"\u6570\u636e\u6ea2\u51fa"}),"\u3002\u6bd4\u5982\u4e3b\u670d\u52a1\u5668\u9700\u8981\u6267\u884c\u5927\u91cf\u5199\u547d\u4ee4\uff0c\u53c8\u6216\u8005\u4e3b\u4ece\u670d\u52a1\u5668\u65ad\u7ebf\u540e\u91cd\u8fde\u63a5\u6240\u9700\u7684\u65f6\u95f4\u8f83\u957f\uff0c\u5bfc\u81f4\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\u5df2\u7ecf\u4e22\u5931\uff0c\u5219\u5fc5\u987b\u8fdb\u884c\u5b8c\u6574\u91cd\u540c\u6b65"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"repl-backlog-size ?mb\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5efa\u8bae\u8bbe\u7f6e\u5982\u4e0b\uff0c\u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\u7edd\u5927\u90e8\u5206\u65ad\u7ebf\u60c5\u51b5\u90fd\u80fd\u7528\u90e8\u5206\u91cd\u540c\u6b65\u6765\u5904\u7406\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ece\u670d\u52a1\u5668\u65ad\u7ebf\u540e\u91cd\u65b0\u8fde\u63a5\u4e0a\u4e3b\u670d\u52a1\u5668\u6240\u9700\u7684\u5e73\u5747\u65f6\u95f4 second"}),"\n",(0,i.jsx)(e.li,{children:"\u83b7\u53d6 master \u5e73\u5747\u6bcf\u79d2\u4ea7\u751f\u5199\u547d\u4ee4\u6570\u636e\u603b\u91cf write_size_per_second"}),"\n",(0,i.jsx)(e.li,{children:"\u6700\u4f18\u590d\u5236\u7f13\u51b2\u533a\u7a7a\u95f4 = 2 * second * write_size_per_second"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u8fd0\u884cid",children:"\u8fd0\u884cID"}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u8fd0\u884c ID\uff08run ID\uff09\uff1a\u662f\u6bcf\u4e00\u53f0\u670d\u52a1\u5668\u6bcf\u6b21\u8fd0\u884c\u7684\u8eab\u4efd\u8bc6\u522b\u7801\uff0c\u5728\u670d\u52a1\u5668\u542f\u52a8\u65f6\u81ea\u52a8\u751f\u6210\uff0c\u7531 40 \u4f4d\u968f\u673a\u7684\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u7ec4\u6210\uff0c\u4e00\u53f0\u670d\u52a1\u5668\u591a\u6b21\u8fd0\u884c\u53ef\u4ee5\u751f\u6210\u591a\u4e2a\u8fd0\u884c ID"}),"\n",(0,i.jsxs)(e.p,{children:["\u4f5c\u7528\uff1a\u670d\u52a1\u5668\u95f4\u8fdb\u884c\u4f20\u8f93\u8bc6\u522b\u8eab\u4efd\uff0c\u5982\u679c\u60f3\u4e24\u6b21\u64cd\u4f5c\u5747\u5bf9\u540c\u4e00\u53f0\u670d\u52a1\u5668\u8fdb\u884c\uff0c",(0,i.jsx)(e.strong,{children:"\u6bcf\u6b21\u5fc5\u987b\u64cd\u4f5c\u643a\u5e26\u5bf9\u5e94\u7684\u8fd0\u884c ID"}),"\uff0c\u7528\u4e8e\u5bf9\u65b9\u8bc6\u522b"]}),"\n",(0,i.jsx)(e.p,{children:"\u4ece\u670d\u52a1\u5668\u5bf9\u4e3b\u670d\u52a1\u5668\u8fdb\u884c\u521d\u6b21\u590d\u5236\u65f6\uff0c\u4e3b\u670d\u52a1\u5668\u5c06\u81ea\u5df1\u7684\u8fd0\u884c ID \u4f20\u9001\u7ed9\u4ece\u670d\u52a1\u5668\uff0c\u7136\u540e\u4ece\u670d\u52a1\u5668\u4f1a\u5c06\u8be5\u8fd0\u884c ID \u4fdd\u5b58\u3002\u5f53\u4ece\u670d\u52a1\u5668\u65ad\u7ebf\u5e76\u91cd\u65b0\u8fde\u4e0a\u4e00\u4e2a\u4e3b\u670d\u52a1\u5668\u65f6\uff0c\u4f1a\u5411\u5f53\u524d\u8fde\u63a5\u7684\u4e3b\u670d\u52a1\u5668\u53d1\u9001\u4e4b\u524d\u4fdd\u5b58\u7684\u8fd0\u884c ID\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u8fd0\u884c ID \u548c\u5f53\u524d\u8fde\u63a5\u7684\u4e3b\u670d\u52a1\u5668\u7684\u8fd0\u884c ID \u76f8\u540c\uff0c\u8bf4\u660e\u4ece\u670d\u52a1\u5668\u65ad\u7ebf\u4e4b\u524d\u590d\u5236\u7684\u5c31\u662f\u5f53\u524d\u8fde\u63a5\u7684\u8fd9\u4e2a\u4e3b\u670d\u52a1\u5668\uff0c\u6267\u884c\u90e8\u5206\u91cd\u540c\u6b65"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u4e0d\u540c\uff0c\u9700\u8981\u6267\u884c\u5b8c\u6574\u91cd\u540c\u6b65\u64cd\u4f5c"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"psync",children:"PSYNC"}),"\n",(0,i.jsx)(e.p,{children:"PSYNC \u547d\u4ee4\u7684\u8c03\u7528\u65b9\u6cd5\u6709\u4e24\u79cd"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u4ece\u670d\u52a1\u5668\u4e4b\u524d\u6ca1\u6709\u590d\u5236\u8fc7\u4efb\u4f55\u4e3b\u670d\u52a1\u5668\uff0c\u6216\u8005\u6267\u884c\u4e86 ",(0,i.jsx)(e.code,{children:"SLAVEOF no one"}),"\uff0c\u5f00\u59cb\u4e00\u6b21\u65b0\u7684\u590d\u5236\u65f6\u5c06\u5411\u4e3b\u670d\u52a1\u5668\u53d1\u9001 ",(0,i.jsx)(e.code,{children:"PSYNC ? -1"})," \u547d\u4ee4\uff0c\u4e3b\u52a8\u8bf7\u6c42\u4e3b\u670d\u52a1\u5668\u8fdb\u884c\u5b8c\u6574\u91cd\u540c\u6b65"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u4ece\u670d\u52a1\u5668\u5df2\u7ecf\u590d\u5236\u8fc7\u67d0\u4e2a\u4e3b\u670d\u52a1\u5668\uff0c\u90a3\u4e48\u4ece\u670d\u52a1\u5668\u5728\u5f00\u59cb\u4e00\u6b21\u65b0\u7684\u590d\u5236\u65f6\u5c06\u5411\u4e3b\u670d\u52a1\u5668\u53d1\u9001 ",(0,i.jsx)(e.code,{children:"PSYNC <runid> <offset>"})," \u547d\u4ee4\uff0crunid \u662f\u4e0a\u4e00\u6b21\u590d\u5236\u7684\u4e3b\u670d\u52a1\u5668\u7684\u8fd0\u884c ID\uff0coffset \u662f\u590d\u5236\u7684\u504f\u79fb\u91cf"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u63a5\u6536\u5230 PSYNC \u547d\u4ee4\u7684\u4e3b\u670d\u52a1\u5668\u4f1a\u5411\u4ece\u670d\u52a1\u5668\u8fd4\u56de\u4ee5\u4e0b\u4e09\u79cd\u56de\u590d\u7684\u5176\u4e2d\u4e00\u79cd\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u6267\u884c\u5b8c\u6574\u91cd\u540c\u6b65\u64cd\u4f5c\uff1a\u8fd4\u56de ",(0,i.jsx)(e.code,{children:"+FULLRESYNC <runid> <offset>"}),"\uff0crunid \u662f\u4e3b\u670d\u52a1\u5668\u7684\u8fd0\u884c ID\uff0coffset \u662f\u4e3b\u670d\u52a1\u5668\u7684\u590d\u5236\u504f\u79fb\u91cf"]}),"\n",(0,i.jsxs)(e.li,{children:["\u6267\u884c\u90e8\u5206\u91cd\u540c\u6b65\u64cd\u4f5c\uff1a\u8fd4\u56de ",(0,i.jsx)(e.code,{children:"+CONTINUE"}),"\uff0c\u4ece\u670d\u52a1\u5668\u6536\u5230\u8be5\u56de\u590d\u8bf4\u660e\u53ea\u9700\u8981\u7b49\u5f85\u4e3b\u670d\u52a1\u5668\u53d1\u9001\u7f3a\u5931\u7684\u90e8\u5206\u6570\u636e\u5373\u53ef"]}),"\n",(0,i.jsxs)(e.li,{children:["\u4e3b\u670d\u52a1\u5668\u7684\u7248\u672c\u4f4e\u4e8e Redis2.8\uff1a\u8fd4\u56de ",(0,i.jsx)(e.code,{children:"-ERR"}),"\uff0c\u7248\u672c\u8fc7\u4f4e\u8bc6\u522b\u4e0d\u4e86 PSYNC\uff0c\u4ece\u670d\u52a1\u5668\u5c06\u5411\u4e3b\u670d\u52a1\u5668\u53d1\u9001 SYNC \u547d\u4ee4"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u590d\u5236\u5b9e\u73b0",children:"\u590d\u5236\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.h4,{id:"\u5b9e\u73b0\u6d41\u7a0b",children:"\u5b9e\u73b0\u6d41\u7a0b"}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u5411\u4ece\u670d\u52a1\u5668\u53d1\u9001 SLAVEOF \u547d\u4ee4\uff0c\u53ef\u4ee5\u8ba9\u4ece\u670d\u52a1\u5668\u53bb\u590d\u5236\u4e00\u4e2a\u4e3b\u670d\u52a1\u5668"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bbe\u7f6e\u4e3b\u670d\u52a1\u5668\u7684\u5730\u5740\u548c\u7aef\u53e3\uff1a\u5c06 SLAVEOF \u547d\u4ee4\u6307\u5b9a\u7684 ip \u548c port \u4fdd\u5b58\u5230\u670d\u52a1\u5668\u72b6\u6001 redisServer"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n\t// \u4e3b\u670d\u52a1\u5668\u7684\u5730\u5740 \n    char *masterhost; \n\t //\u4e3b\u670d\u52a1\u5668\u7684\u7aef\u53e3 \n    int masterport; \n};\n"})}),"\n",(0,i.jsxs)(e.p,{children:["SLAVEOF \u547d\u4ee4\u662f\u4e00\u4e2a",(0,i.jsx)(e.strong,{children:"\u5f02\u6b65\u547d\u4ee4"}),"\uff0c\u5728\u5b8c\u6210\u5c5e\u6027\u7684\u8bbe\u7f6e\u540e\u670d\u52a1\u5668\u76f4\u63a5\u8fd4\u56de OK\uff0c\u800c\u5b9e\u9645\u7684\u590d\u5236\u5de5\u4f5c\u5c06\u5728 OK \u8fd4\u56de\u4e4b\u540e\u624d\u771f\u6b63\u5f00\u59cb\u6267\u884c"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ece\u670d\u52a1\u5668 connect \u4e3b\u670d\u52a1\u5668\u5efa\u7acb\u5957\u63a5\u5b57\u8fde\u63a5\uff0c\u6210\u529f\u540e\u4ece\u670d\u52a1\u5668\u5c06\u4e3a\u8fd9\u4e2a\u5957\u63a5\u5b57\u5173\u8054\u4e00\u4e2a\u7528\u4e8e\u590d\u5236\u5de5\u4f5c\u7684\u6587\u4ef6\u4e8b\u4ef6\u5904\u7406\u5668\uff0c\u8d1f\u8d23\u6267\u884c\u540e\u7eed\u7684\u590d\u5236\u5de5\u4f5c\uff0c\u5982\u63a5\u6536 RDB \u6587\u4ef6\u3001\u63a5\u6536\u4e3b\u670d\u52a1\u5668\u4f20\u64ad\u6765\u7684\u5199\u547d\u4ee4\u7b49"}),"\n",(0,i.jsx)(e.li,{children:"\u4e3b\u670d\u52a1\u5668\u5728\u63a5\u53d7 accept \u4ece\u52a1\u5668\u7684\u5957\u63a5\u5b57\u8fde\u63a5\u540e\uff0c\u5c06\u4e3a\u8be5\u5957\u63a5\u5b57\u521b\u5efa\u76f8\u5e94\u7684\u5ba2\u6237\u7aef\u72b6\u6001\uff0c\u5c06\u4ece\u670d\u52a1\u5668\u770b\u4f5c\u4e00\u4e2a\u5ba2\u6237\u7aef\uff0c\u4ece\u670d\u52a1\u5668\u5c06\u540c\u65f6\u5177\u6709 server \u548c client\uff08\u53ef\u4ee5\u53d1\u547d\u4ee4\uff09\u4e24\u4e2a\u8eab\u4efd"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u53d1\u9001 PING \u547d\u4ee4\uff1a\u4ece\u670d\u52a1\u5668\u5411\u4e3b\u670d\u52a1\u5668\u53d1\u9001\u4e00\u4e2a PING \u547d\u4ee4\uff0c\u68c0\u67e5\u4e3b\u4ece\u4e4b\u95f4\u7684\u901a\u4fe1\u662f\u5426\u6b63\u5e38\u3001\u4e3b\u670d\u52a1\u5668\u5904\u7406\u547d\u4ee4\u7684\u80fd\u529b\u662f\u5426\u6b63\u5e38"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8fd4\u56de\u9519\u8bef\uff0c\u8868\u793a\u4e3b\u670d\u52a1\u5668\u65e0\u6cd5\u5904\u7406\u4ece\u670d\u52a1\u5668\u7684\u547d\u4ee4\u8bf7\u6c42\uff08\u5fd9\u788c\uff09\uff0c\u4ece\u670d\u52a1\u5668\u65ad\u5f00\u5e76\u91cd\u65b0\u521b\u5efa\u8fde\u5411\u4e3b\u670d\u52a1\u5668\u7684\u5957\u63a5\u5b57"}),"\n",(0,i.jsx)(e.li,{children:"\u8fd4\u56de\u547d\u4ee4\u56de\u590d\uff0c\u4f46\u4ece\u670d\u52a1\u5668\u4e0d\u80fd\u5728\u89c4\u5b9a\u7684\u65f6\u95f4\u5185\u8bfb\u53d6\u51fa\u547d\u4ee4\u56de\u590d\u7684\u5185\u5bb9\uff0c\u8868\u793a\u4e3b\u4ece\u4e4b\u95f4\u7684\u7f51\u7edc\u72b6\u6001\u4e0d\u4f73\uff0c\u9700\u8981\u65ad\u5f00\u91cd\u8fde"}),"\n",(0,i.jsx)(e.li,{children:"\u8bfb\u53d6\u5230 PONG\uff0c\u8868\u793a\u4e00\u5207\u72b6\u6001\u6b63\u5e38\uff0c\u53ef\u4ee5\u6267\u884c\u590d\u5236"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8eab\u4efd\u9a8c\u8bc1\uff1a\u5982\u679c\u4ece\u670d\u52a1\u5668\u8bbe\u7f6e\u4e86 masterauth \u9009\u9879\u5c31\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5c06\u5411\u4e3b\u670d\u52a1\u5668\u53d1\u9001\u4e00\u6761 AUTH \u547d\u4ee4\uff0c\u547d\u4ee4\u53c2\u6570\u4e3a\u4ece\u670d\u52a1\u5668 masterauth \u9009\u9879\u7684\u503c\uff0c\u5982\u679c\u4e3b\u4ece\u8bbe\u7f6e\u7684\u5bc6\u7801\u4e0d\u76f8\u540c\uff0c\u90a3\u4e48\u4e3b\u5c06\u8fd4\u56de\u4e00\u4e2a invalid password \u9519\u8bef"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u53d1\u9001\u7aef\u53e3\u4fe1\u606f\uff1a\u8eab\u4efd\u9a8c\u8bc1\u540e"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4ece\u670d\u52a1\u5668\u6267\u884c\u547d\u4ee4 ",(0,i.jsx)(e.code,{children:"REPLCONF listening-port <port\xadnumber>"}),"\uff0c \u5411\u4e3b\u670d\u52a1\u5668\u53d1\u9001\u4ece\u670d\u52a1\u5668\u7684\u76d1\u542c\u7aef\u53e3\u53f7"]}),"\n",(0,i.jsx)(e.li,{children:"\u4e3b\u670d\u52a1\u5668\u5728\u63a5\u6536\u5230\u8fd9\u4e2a\u547d\u4ee4\u540e\uff0c\u4f1a\u5c06\u7aef\u53e3\u53f7\u8bb0\u5f55\u5728\u5bf9\u5e94\u7684\u5ba2\u6237\u7aef\u72b6\u6001 redisClient.slave_listening_port \u5c5e\u6027\u4e2d\uff1a"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u540c\u6b65\uff1a\u4ece\u670d\u52a1\u5668\u5c06\u5411\u4e3b\u670d\u52a1\u5668\u53d1\u9001 PSYNC \u547d\u4ee4\uff0c\u5728\u540c\u6b65\u64cd\u4f5c\u6267\u884c\u4e4b\u540e\uff0c",(0,i.jsx)(e.strong,{children:"\u4e3b\u4ece\u670d\u52a1\u5668\u53cc\u65b9\u90fd\u662f\u5bf9\u65b9\u7684\u5ba2\u6237\u7aef"}),"\uff0c\u53ef\u4ee5\u76f8\u4e92\u53d1\u9001\u547d\u4ee4"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b8c\u6574\u91cd\u540c\u6b65\uff1a\u4e3b\u670d\u52a1\u5668\u9700\u8981\u6210\u4e3a\u4ece\u670d\u52a1\u5668\u7684\u5ba2\u6237\u7aef\uff0c\u624d\u80fd\u5c06\u4fdd\u5b58\u5728\u7f13\u51b2\u533a\u91cc\u9762\u7684\u5199\u547d\u4ee4\u53d1\u9001\u7ed9\u4ece\u670d\u52a1\u5668\u6267\u884c"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u90e8\u5206\u91cd\u540c\u6b65\uff1a\u4e3b\u670d\u52a1\u5668\u9700\u8981\u6210\u4e3a\u4ece\u670d\u52a1\u5668\u7684\u5ba2\u6237\u7aef\uff0c\u624d\u80fd\u5411\u4ece\u670d\u52a1\u5668\u53d1\u9001\u4fdd\u5b58\u5728\u590d\u5236\u79ef\u538b\u7f13\u51b2\u533a\u91cc\u9762\u7684\u5199\u547d\u4ee4"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u547d\u4ee4\u4f20\u64ad\uff1a\u4e3b\u670d\u52a1\u5668\u5c06\u5199\u547d\u4ee4\u53d1\u9001\u7ed9\u4ece\u670d\u52a1\u5668\uff0c\u4fdd\u6301\u6570\u636e\u5e93\u7684\u72b6\u6001\u4e00\u81f4"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u590d\u5236\u56fe\u793a",children:"\u590d\u5236\u56fe\u793a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(7284).A+"",width:"1190",height:"522"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5fc3\u8df3\u68c0\u6d4b",children:"\u5fc3\u8df3\u68c0\u6d4b"}),"\n",(0,i.jsx)(e.h4,{id:"\u5fc3\u8df3\u673a\u5236",children:"\u5fc3\u8df3\u673a\u5236"}),"\n",(0,i.jsxs)(e.p,{children:["\u5fc3\u8df3\u673a\u5236\uff1a\u8fdb\u5165\u547d\u4ee4\u4f20\u64ad\u9636\u6bb5\uff0c",(0,i.jsx)(e.strong,{children:"\u4ece\u670d\u52a1\u5668"}),"\u9ed8\u8ba4\u4f1a\u4ee5\u6bcf\u79d2\u4e00\u6b21\u7684\u9891\u7387\uff0c",(0,i.jsx)(e.strong,{children:"\u5411\u4e3b\u670d\u52a1\u5668\u53d1\u9001\u547d\u4ee4"}),"\uff1a",(0,i.jsx)(e.code,{children:"REPLCONF ACK <replication_offset>"}),"\uff0creplication_offset \u662f\u4ece\u670d\u52a1\u5668\u5f53\u524d\u7684\u590d\u5236\u504f\u79fb\u91cf"]}),"\n",(0,i.jsx)(e.p,{children:"\u5fc3\u8df3\u7684\u4f5c\u7528\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u68c0\u6d4b\u4e3b\u4ece\u670d\u52a1\u5668\u7684\u7f51\u7edc\u8fde\u63a5\u72b6\u6001"}),"\n",(0,i.jsx)(e.li,{children:"\u8f85\u52a9\u5b9e\u73b0 min-slaves \u9009\u9879"}),"\n",(0,i.jsx)(e.li,{children:"\u68c0\u6d4b\u547d\u4ee4\u4e22\u5931"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u7f51\u7edc\u72b6\u6001",children:"\u7f51\u7edc\u72b6\u6001"}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u4e3b\u670d\u52a1\u5668\u8d85\u8fc7\u4e00\u79d2\u949f\u6ca1\u6709\u6536\u5230\u4ece\u670d\u52a1\u5668\u53d1\u6765\u7684 REPLCONF ACK \u547d\u4ee4\uff0c\u4e3b\u670d\u52a1\u5c31\u8ba4\u4e3a\u4e3b\u4ece\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u8fde\u63a5\u51fa\u73b0\u95ee\u9898"}),"\n",(0,i.jsxs)(e.p,{children:["\u5411\u4e3b\u670d\u52a1\u5668\u53d1\u9001 ",(0,i.jsx)(e.code,{children:"INFO replication"})," \u547d\u4ee4\uff0clag \u4e00\u680f\u8868\u793a\u4ece\u670d\u52a1\u5668\u6700\u540e\u4e00\u6b21\u5411\u4e3b\u670d\u52a1\u5668\u53d1\u9001 ACK \u547d\u4ee4\u8ddd\u79bb\u73b0\u5728\u591a\u5c11\u79d2\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"127.0.0.1:6379> INFO replication \n# Replication \nrole:master \nconnected_slaves:2 \nslave0: ip=127.0.0.1,port=11111,state=online,offset=123,lag=0 # \u521a\u521a\u53d1\u9001\u8fc7 REPLCONF ACK \nslavel: ip=127.0.0.1,port=22222,state=online,offset=456,lag=3 # 3\u79d2\u4e4b\u524d\u53d1\u9001\u8fc7REPLCONF ACK \n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u4e00\u822c\u60c5\u51b5\u4e0b\uff0clag \u7684\u503c\u5e94\u8be5\u5728 0 \u6216\u8005 1 \u79d2\u4e4b\u95f4\u8df3\u52a8\uff0c\u5982\u679c\u8d85\u8fc7 1 \u79d2\u8bf4\u660e\u4e3b\u4ece\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u8fde\u63a5\u51fa\u73b0\u4e86\u6545\u969c"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u914d\u7f6e\u9009\u9879",children:"\u914d\u7f6e\u9009\u9879"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u7684 min-slaves-to-write \u548c min-slaves-max-lag \u4e24\u4e2a\u9009\u9879\u53ef\u4ee5\u9632\u6b62\u4e3b\u670d\u52a1\u5668\u5728",(0,i.jsx)(e.strong,{children:"\u4e0d\u5b89\u5168\u7684\u60c5\u51b5\u4e0b"}),"\u62d2\u7edd\u6267\u884c\u5199\u547d\u4ee4"]}),"\n",(0,i.jsx)(e.p,{children:"\u6bd4\u5982\u5411\u4e3b\u670d\u52a1\u5668\u8bbe\u7f6e\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"min-slaves-to-write\uff1a\u4e3b\u5e93\u6700\u5c11\u6709 N \u4e2a\u5065\u5eb7\u7684\u4ece\u5e93\u5b58\u6d3b\u624d\u80fd\u6267\u884c\u5199\u547d\u4ee4\uff0c\u6ca1\u6709\u8db3\u591f\u7684\u4ece\u5e93\u76f4\u63a5\u62d2\u7edd\u5199\u5165"}),"\n",(0,i.jsx)(e.li,{children:"min-slaves-max-lag\uff1a\u4ece\u5e93\u548c\u4e3b\u5e93\u8fdb\u884c\u6570\u636e\u590d\u5236\u65f6\u7684 ACK \u6d88\u606f\u5ef6\u8fdf\u7684\u6700\u5927\u65f6\u95f4"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"min-slaves-to-write 5\nmin-slaves-max-lag 10\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u90a3\u4e48\u5728\u4ece\u670d\u52a1\u5668\u7684\u6570\u5c11\u4e8e 5 \u4e2a\uff0c\u6216\u8005 5 \u4e2a\u4ece\u670d\u52a1\u5668\u7684\u5ef6\u8fdf\uff08lag\uff09\u503c\u90fd\u5927\u4e8e\u6216\u7b49\u4e8e10 \u79d2\u65f6\uff0c\u4e3b\u670d\u52a1\u5668\u5c06\u62d2\u7edd\u6267\u884c\u5199\u547d\u4ee4"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u547d\u4ee4\u4e22\u5931",children:"\u547d\u4ee4\u4e22\u5931"}),"\n",(0,i.jsx)(e.p,{children:"\u68c0\u6d4b\u547d\u4ee4\u4e22\u5931\uff1a\u7531\u4e8e\u7f51\u7edc\u6216\u8005\u5176\u4ed6\u539f\u56e0\uff0c\u4e3b\u670d\u52a1\u5668\u4f20\u64ad\u7ed9\u4ece\u670d\u52a1\u5668\u7684\u5199\u547d\u4ee4\u4e22\u5931\uff0c\u90a3\u4e48\u5f53\u4ece\u670d\u52a1\u5668\u5411\u4e3b\u670d\u52a1\u5668\u53d1\u9001 REPLCONF ACK \u547d\u4ee4\u65f6\uff0c\u4e3b\u670d\u52a1\u5668\u4f1a\u68c0\u67e5\u4ece\u670d\u52a1\u5668\u7684\u590d\u5236\u504f\u79fb\u91cf\u662f\u5426\u5c0f\u4e8e\u81ea\u5df1\u7684\uff0c\u7136\u540e\u5728\u590d\u5236\u79ef\u538b\u7f13\u51b2\u533a\u91cc\u627e\u5230\u4ece\u670d\u52a1\u5668\u7f3a\u5c11\u7684\u6570\u636e\uff0c\u5e76\u5c06\u8fd9\u4e9b\u6570\u636e\u91cd\u65b0\u53d1\u9001\u7ed9\u4ece\u670d\u52a1\u5668"}),"\n",(0,i.jsxs)(e.p,{children:["\u8bf4\u660e\uff1aREPLCONF ACK \u547d\u4ee4\u548c\u590d\u5236\u79ef\u538b\u7f13\u51b2\u533a\u90fd\u662f Redis 2.8 \u7248\u672c\u65b0\u589e\u7684\uff0c\u5728 Redis 2.8 \u7248\u672c\u4ee5\u524d\uff0c\u5373\u4f7f\u547d\u4ee4\u5728\u4f20\u64ad\u8fc7\u7a0b\u4e2d\u4e22\u5931\uff0c\u4e3b\u4ece\u670d\u52a1\u5668\u90fd\u4e0d\u4f1a\u6ce8\u610f\u5230\uff0c\u4e5f\u4e0d\u4f1a\u5411\u4ece\u670d\u52a1\u5668\u8865\u53d1\u4e22\u5931\u7684\u6570\u636e\uff0c\u6240\u4ee5\u4e3a\u4e86\u4fdd\u8bc1",(0,i.jsx)(e.strong,{children:"\u4e3b\u4ece\u590d\u5236\u7684\u6570\u636e\u4e00\u81f4\u6027"}),"\uff0c\u6700\u597d\u4f7f\u7528 2.8 \u6216\u4ee5\u4e0a\u7248\u672c\u7684 Redis"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5e38\u89c1\u95ee\u9898",children:"\u5e38\u89c1\u95ee\u9898"}),"\n",(0,i.jsx)(e.h4,{id:"\u91cd\u542f\u6062\u590d",children:"\u91cd\u542f\u6062\u590d"}),"\n",(0,i.jsxs)(e.p,{children:["\u7cfb\u7edf\u4e0d\u65ad\u8fd0\u884c\uff0cmaster \u7684\u6570\u636e\u91cf\u4f1a\u8d8a\u6765\u8d8a\u5927\uff0c\u4e00\u65e6 ",(0,i.jsx)(e.strong,{children:"master \u91cd\u542f"}),"\uff0crunid \u5c06\u53d1\u751f\u53d8\u5316\uff0c\u4f1a\u5bfc\u81f4\u5168\u90e8 slave \u7684\u5168\u91cf\u590d\u5236\u64cd\u4f5c"]}),"\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6cd5\uff1a\u672c\u673a\u4fdd\u5b58\u4e0a\u6b21 runid\uff0c\u91cd\u542f\u540e\u6062\u590d\u8be5\u503c\uff0c\u4f7f\u6240\u6709 slave \u8ba4\u4e3a\u8fd8\u662f\u4e4b\u524d\u7684 master"}),"\n",(0,i.jsx)(e.p,{children:"\u4f18\u5316\u65b9\u6848\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"master \u5185\u90e8\u521b\u5efa master_replid \u53d8\u91cf\uff0c\u4f7f\u7528 runid \u76f8\u540c\u7684\u7b56\u7565\u751f\u6210\uff0c\u5e76\u53d1\u9001\u7ed9\u6240\u6709 slave"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5728 master \u5173\u95ed\u65f6\u6267\u884c\u547d\u4ee4 ",(0,i.jsx)(e.code,{children:"shutdown save"}),"\uff0c\u8fdb\u884c RDB \u6301\u4e45\u5316\uff0c\u5c06 runid \u4e0e offset \u4fdd\u5b58\u5230 RDB \u6587\u4ef6\u4e2d"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"redis-check-rdb dump.rdb"})," \u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u8be5\u4fe1\u606f\uff0c\u4fdd\u5b58\u4e3a repl-id \u548c repl-offset"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"master \u91cd\u542f\u540e\u52a0\u8f7d RDB \u6587\u4ef6\uff0c\u6062\u590d\u6570\u636e\uff0c\u5c06 RDB \u6587\u4ef6\u4e2d\u4fdd\u5b58\u7684 repl-id \u4e0e repl-offset \u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0cmaster_repl_id = repl-id\uff0cmaster_repl_offset = repl-offset"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7 info \u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u8be5\u4fe1\u606f"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u7f51\u7edc\u4e2d\u65ad",children:"\u7f51\u7edc\u4e2d\u65ad"}),"\n",(0,i.jsx)(e.p,{children:"master \u7684 CPU \u5360\u7528\u8fc7\u9ad8\u6216 slave \u9891\u7e41\u65ad\u5f00\u8fde\u63a5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u51fa\u73b0\u7684\u539f\u56e0\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"slave \u6bcf 1 \u79d2\u53d1\u9001 REPLCONF ACK \u547d\u4ee4\u5230 master"}),"\n",(0,i.jsx)(e.li,{children:"\u5f53 slave \u63a5\u5230\u4e86\u6162\u67e5\u8be2\u65f6\uff08keys * \uff0chgetall \u7b49\uff09\uff0c\u4f1a\u5927\u91cf\u5360\u7528 CPU \u6027\u80fd"}),"\n",(0,i.jsx)(e.li,{children:"master \u6bcf 1 \u79d2\u8c03\u7528\u590d\u5236\u5b9a\u65f6\u51fd\u6570 replicationCron()\uff0c\u6bd4\u5bf9 slave \u53d1\u73b0\u957f\u65f6\u95f4\u6ca1\u6709\u8fdb\u884c\u54cd\u5e94"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6700\u7ec8\u5bfc\u81f4 master \u5404\u79cd\u8d44\u6e90\uff08\u8f93\u51fa\u7f13\u51b2\u533a\u3001\u5e26\u5bbd\u3001\u8fde\u63a5\u7b49\uff09\u88ab\u4e25\u91cd\u5360\u7528"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6cd5\uff1a\u901a\u8fc7\u8bbe\u7f6e\u5408\u7406\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u786e\u8ba4\u662f\u5426\u91ca\u653e slave"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"repl-timeout\t# \u8be5\u53c2\u6570\u5b9a\u4e49\u4e86\u8d85\u65f6\u65f6\u95f4\u7684\u9608\u503c\uff08\u9ed8\u8ba460\u79d2\uff09\uff0c\u8d85\u8fc7\u8be5\u503c\uff0c\u91ca\u653eslave\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"slave \u4e0e master \u8fde\u63a5\u65ad\u5f00"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u51fa\u73b0\u7684\u539f\u56e0\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"master \u53d1\u9001 ping \u6307\u4ee4\u9891\u5ea6\u8f83\u4f4e"}),"\n",(0,i.jsx)(e.li,{children:"master \u8bbe\u5b9a\u8d85\u65f6\u65f6\u95f4\u8f83\u77ed"}),"\n",(0,i.jsx)(e.li,{children:"ping \u6307\u4ee4\u5728\u7f51\u7edc\u4e2d\u5b58\u5728\u4e22\u5305"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6cd5\uff1a\u63d0\u9ad8 ping \u6307\u4ee4\u53d1\u9001\u7684\u9891\u5ea6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"repl-ping-slave-period\t\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8d85\u65f6\u65f6\u95f4 repl-time \u7684\u65f6\u95f4\u81f3\u5c11\u662f ping \u6307\u4ee4\u9891\u5ea6\u76845\u523010\u500d\uff0c\u5426\u5219 slave \u5f88\u5bb9\u6613\u5224\u5b9a\u8d85\u65f6"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u4e00\u81f4\u6027-1",children:"\u4e00\u81f4\u6027"}),"\n",(0,i.jsx)(e.p,{children:"\u7f51\u7edc\u4fe1\u606f\u4e0d\u540c\u6b65\uff0c\u6570\u636e\u53d1\u9001\u6709\u5ef6\u8fdf\uff0c\u5bfc\u81f4\u591a\u4e2a slave \u83b7\u53d6\u76f8\u540c\u6570\u636e\u4e0d\u540c\u6b65"}),"\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6848\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u4f18\u5316\u4e3b\u4ece\u95f4\u7684\u7f51\u7edc\u73af\u5883"}),"\uff0c\u901a\u5e38\u653e\u7f6e\u5728\u540c\u4e00\u4e2a\u673a\u623f\u90e8\u7f72\uff0c\u5982\u4f7f\u7528\u963f\u91cc\u4e91\u7b49\u4e91\u670d\u52a1\u5668\u65f6\u8981\u6ce8\u610f\u6b64\u73b0\u8c61"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u76d1\u63a7\u4e3b\u4ece\u8282\u70b9\u5ef6\u8fdf\uff08\u901a\u8fc7offset\uff09\u5224\u65ad\uff0c\u5982\u679c slave \u5ef6\u8fdf\u8fc7\u5927\uff0c",(0,i.jsx)(e.strong,{children:"\u6682\u65f6\u5c4f\u853d\u7a0b\u5e8f\u5bf9\u8be5 slave \u7684\u6570\u636e\u8bbf\u95ee"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"slave-serve-stale-data yes|no\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5f00\u542f\u540e\u4ec5\u54cd\u5e94 info\u3001slaveof \u7b49\u5c11\u6570\u547d\u4ee4\uff08\u614e\u7528\uff0c\u9664\u975e\u5bf9\u6570\u636e\u4e00\u81f4\u6027\u8981\u6c42\u5f88\u9ad8\uff09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u591a\u4e2a slave \u540c\u65f6\u5bf9 master \u8bf7\u6c42\u6570\u636e\u540c\u6b65\uff0cmaster \u53d1\u9001\u7684 RDB \u6587\u4ef6\u589e\u591a\uff0c\u4f1a\u5bf9\u5e26\u5bbd\u9020\u6210\u5de8\u5927\u51b2\u51fb\uff0c\u9020\u6210 master \u5e26\u5bbd\u4e0d\u8db3\uff0c\u56e0\u6b64\u6570\u636e\u540c\u6b65\u9700\u8981\u6839\u636e\u4e1a\u52a1\u9700\u6c42\uff0c\u9002\u91cf\u9519\u5cf0"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u54e8\u5175\u6a21\u5f0f",children:"\u54e8\u5175\u6a21\u5f0f"}),"\n",(0,i.jsx)(e.h3,{id:"\u54e8\u5175\u6982\u8ff0",children:"\u54e8\u5175\u6982\u8ff0"}),"\n",(0,i.jsx)(e.p,{children:"Sentinel\uff08\u54e8\u5175\uff09\u662f Redis \u7684\u9ad8\u53ef\u7528\u6027\uff08high availability\uff09\u89e3\u51b3\u65b9\u6848\uff0c\u7531\u4e00\u4e2a\u6216\u591a\u4e2a Sentinel \u5b9e\u4f8b instance \u7ec4\u6210\u7684 Sentinel \u7cfb\u7edf\u53ef\u4ee5\u76d1\u89c6\u4efb\u610f\u591a\u4e2a\u4e3b\u670d\u52a1\u5668\uff0c\u4ee5\u53ca\u8fd9\u4e9b\u4e3b\u670d\u52a1\u5668\u7684\u6240\u6709\u4ece\u670d\u52a1\u5668\uff0c\u5e76\u5728\u88ab\u76d1\u89c6\u7684\u4e3b\u670d\u52a1\u5668\u4e0b\u7ebf\u65f6\u8fdb\u884c\u6545\u969c\u8f6c\u79fb"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(51649).A+"",width:"737",height:"482"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53cc\u73af\u56fe\u6848\u8868\u793a\u4e3b\u670d\u52a1\u5668"}),"\n",(0,i.jsx)(e.li,{children:"\u5355\u73af\u56fe\u6848\u8868\u793a\u4e09\u4e2a\u4ece\u670d\u52a1\u5668"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u54e8\u5175\u7684\u4f5c\u7528\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u76d1\u63a7\uff1a\u76d1\u63a7 master \u548c slave\uff0c\u4e0d\u65ad\u7684\u68c0\u67e5 master \u548c slave \u662f\u5426\u6b63\u5e38\u8fd0\u884c\uff0cmaster \u5b58\u6d3b\u68c0\u6d4b\u3001master \u4e0e slave \u8fd0\u884c\u60c5\u51b5\u68c0\u6d4b"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u901a\u77e5\uff1a\u5f53\u88ab\u76d1\u63a7\u7684\u670d\u52a1\u5668\u51fa\u73b0\u95ee\u9898\u65f6\uff0c\u5411\u5176\u4ed6\u54e8\u5175\u53d1\u9001\u901a\u77e5"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\uff1a\u65ad\u5f00 master \u4e0e slave \u8fde\u63a5\uff0c\u9009\u53d6\u4e00\u4e2a slave \u4f5c\u4e3a master\uff0c\u5c06\u5176\u4ed6 slave \u8fde\u63a5\u65b0\u7684 master\uff0c\u5e76\u544a\u77e5\u5ba2\u6237\u7aef\u65b0\u7684\u670d\u52a1\u5668\u5730\u5740"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u542f\u7528\u54e8\u5175",children:"\u542f\u7528\u54e8\u5175"}),"\n",(0,i.jsx)(e.h4,{id:"\u914d\u7f6e\u65b9\u5f0f",children:"\u914d\u7f6e\u65b9\u5f0f"}),"\n",(0,i.jsx)(e.p,{children:"\u914d\u7f6e\u4e09\u4e2a\u54e8\u5175 sentinel.conf\uff1a\u4e00\u822c\u591a\u4e2a\u54e8\u5175\u914d\u7f6e\u76f8\u540c\u3001\u7aef\u53e3\u4e0d\u540c\uff0c\u7279\u6b8a\u9700\u6c42\u53ef\u4ee5\u914d\u7f6e\u4e0d\u540c\u7684\u5c5e\u6027"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'port 26401\ndir "/redis/data"\nsentinel monitor mymaster 127.0.0.1 6401 2\nsentinel down-after-milliseconds mymaster 5000\nsentinel failover-timeout mymaster 20000\nsentinel parallel-sync mymaster 1\nsentinel deny-scripts-reconfig yes\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u914d\u7f6e\u8bf4\u660e\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bbe\u7f6e\u54e8\u5175\u76d1\u542c\u7684\u4e3b\u670d\u52a1\u5668\u4fe1\u606f\uff0c\u5224\u65ad\u4e3b\u89c2\u4e0b\u7ebf\u6240\u9700\u8981\u7684\u7968\u6570"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"sentinel monitor <master-name> <master_ip> <master_port> <quorum>\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6307\u5b9a\u54e8\u5175\u5728\u76d1\u63a7 Redis \u670d\u52a1\u65f6\uff0c\u8bbe\u7f6e\u5224\u5b9a\u670d\u52a1\u5668\u5b95\u673a\u7684\u65f6\u957f\uff0c\u8be5\u8bbe\u7f6e\u63a7\u5236\u662f\u5426\u8fdb\u884c\u4e3b\u4ece\u5207\u6362"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"sentinel down-after-milliseconds <master-name> <million_seconds>\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u51fa\u73b0\u6545\u969c\u540e\uff0c\u6545\u969c\u5207\u6362\u7684\u6700\u5927\u8d85\u65f6\u65f6\u95f4\uff0c\u8d85\u8fc7\u8be5\u503c\uff0c\u8ba4\u5b9a\u5207\u6362\u5931\u8d25\uff0c\u9ed8\u8ba4 3 \u5206\u949f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"sentinel failover-timeout <master_name> <million_seconds>\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6545\u969c\u8f6c\u79fb\u65f6\uff0c\u540c\u65f6\u8fdb\u884c\u4e3b\u4ece\u540c\u6b65\u7684 slave \u6570\u91cf\uff0c\u6570\u503c\u8d8a\u5927\uff0c\u8981\u6c42\u7f51\u7edc\u8d44\u6e90\u8d8a\u9ad8"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"sentinel parallel-syncs <master_name> <sync_slave_number>\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u542f\u52a8\u54e8\u5175\uff1a\u670d\u52a1\u7aef\u547d\u4ee4\uff08Linux \u547d\u4ee4\uff09"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis-sentinel filename\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u521d\u59cb\u5316-1",children:"\u521d\u59cb\u5316"}),"\n",(0,i.jsxs)(e.p,{children:["Sentinel \u672c\u8d28\u4e0a\u53ea\u662f\u4e00\u4e2a\u8fd0\u884c\u5728\u7279\u6b8a\u6a21\u5f0f\u4e0b\u7684 Redis \u670d\u52a1\u5668\uff0c\u5f53\u4e00\u4e2a Sentinel \u542f\u52a8\u65f6\uff0c\u9996\u5148\u521d\u59cb\u5316 Redis \u670d\u52a1\u5668\uff0c\u4f46\u662f\u521d\u59cb\u5316\u8fc7\u7a0b\u548c\u666e\u901a Redis \u670d\u52a1\u5668\u7684\u521d\u59cb\u5316\u8fc7\u7a0b\u5e76\u4e0d\u5b8c\u5168\u76f8\u540c\uff0c\u54e8\u5175",(0,i.jsx)(e.strong,{children:"\u4e0d\u63d0\u4f9b\u6570\u636e\u76f8\u5173\u670d\u52a1"}),"\uff0c\u6240\u4ee5\u4e0d\u4f1a\u8f7d\u5165 RDB\u3001AOF \u6587\u4ef6"]}),"\n",(0,i.jsx)(e.p,{children:"\u6574\u4f53\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521d\u59cb\u5316\u670d\u52a1\u5668"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5c06\u666e\u901a Redis \u670d\u52a1\u5668\u4f7f\u7528\u7684\u4ee3\u7801\u66ff\u6362\u6210 Sentinel \u4e13\u7528\u4ee3\u7801"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521d\u59cb\u5316 Sentinel \u72b6\u6001"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6839\u636e\u7ed9\u5b9a\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u521d\u59cb\u5316 Sentinel \u7684\u76d1\u89c6\u4e3b\u670d\u52a1\u5668\u5217\u8868"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u8fde\u5411\u4e3b\u670d\u52a1\u5668\u7684\u7f51\u7edc\u8fde\u63a5"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u4ee3\u7801\u66ff\u6362",children:"\u4ee3\u7801\u66ff\u6362"}),"\n",(0,i.jsx)(e.p,{children:"\u5c06\u4e00\u90e8\u5206\u666e\u901a Redis \u670d\u52a1\u5668\u4f7f\u7528\u7684\u4ee3\u7801\u66ff\u6362\u6210 Sentinel \u4e13\u7528\u4ee3\u7801"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u670d\u52a1\u5668\u7aef\u53e3\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"# define REDIS_SERVERPORT 6379 \t\t// \u666e\u901a\u670d\u52a1\u5668\u7aef\u53e3\n# define REDIS_SENTINEL_PORT 26379 \t// \u54e8\u5175\u7aef\u53e3\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u7684\u547d\u4ee4\u8868\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:'// \u666e\u901a Redis \u670d\u52a1\u5668\nstruct redisCommand redisCommandTable[] = {\n    {"get", getCommand, 2, "r", 0, NULL, 1, 1, 1, 0, 0},\n    {"set", setCommand, -3, "wm", 0, noPreloadGetKeys, 1, 1, 1, 0, 0},\n    //....\n}\n// \u54e8\u5175\nstruct redisCommand sentinelcmds[] = {\n    {"ping", pingCommand, 1, "", 0, NULL, 0, 0, 0, 0, 0},\n    {"sentinel", sentinelCommand, -2,"",0,NULL,0,0,0,0,0},\n    {"subscribe",...}, {"unsubscribe",...O}, {"psubscribe",...}, {"punsubscribe",...},\n    {"info",...}\n};\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u4e0a\u8ff0\u8868\u662f\u54e8\u5175\u6a21\u5f0f\u4e0b\u5ba2\u6237\u7aef\u53ef\u4ee5\u6267\u884c\u7684\u547d\u4ee4\uff0c\u6240\u4ee5\u5bf9\u4e8e GET\u3001SET \u7b49\u547d\u4ee4\uff0c\u670d\u52a1\u5668\u6839\u672c\u5c31\u6ca1\u6709\u8f7d\u5165"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u54e8\u5175\u72b6\u6001",children:"\u54e8\u5175\u72b6\u6001"}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u5668\u4f1a\u521d\u59cb\u5316\u4e00\u4e2a sentinelState \u7ed3\u6784\uff0c\u53c8\u53eb Sentinel \u72b6\u6001\uff0c\u7ed3\u6784\u4fdd\u5b58\u4e86\u670d\u52a1\u5668\u4e2d\u6240\u6709\u548c Sentinel \u529f\u80fd\u6709\u5173\u7684\u72b6\u6001\uff08\u670d\u52a1\u5668\u7684\u4e00\u822c\u72b6\u6001\u4ecd\u7136\u7531 redisServer \u7ed3\u6784\u4fdd\u5b58\uff09"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct sentinelState {\n    // \u5f53\u524d\u7eaa\u5143\uff0c\u7528\u4e8e\u5b9e\u73b0\u6545\u969c\u8f6c\u79fb\n    uint64_t current_epoch; \n    \n    // \u3010\u4fdd\u5b58\u4e86\u6240\u6709\u88ab\u8fd9\u4e2asentinel\u76d1\u89c6\u7684\u4e3b\u670d\u52a1\u5668\u3011\n    dict *masters;\n    \n    // \u662f\u5426\u8fdb\u5165\u4e86 TILT \u6a21\u5f0f\n    int tilt;\n    // \u8fdb\u5165 TILT \u6a21\u5f0f\u7684\u65f6\u95f4\n    mstime_t tilt_start_time;\n    \n    // \u6700\u540e\u4e00\u6b21\u6267\u884c\u65f6\u95f4\u5904\u7406\u7684\u4e8b\u4ef6\n    mstime_t previous_time;\n    \n    // \u76ee\u524d\u6b63\u5728\u6267\u884c\u7684\u811a\u672c\u6570\u91cf\n    int running_scripts;\n    // \u4e00\u4e2aFIFO\u961f\u5217\uff0c\u5305\u542b\u4e86\u6240\u6709\u9700\u8981\u6267\u884c\u7684\u7528\u6237\u811a\u672c\n    list *scripts_queue;\n    \n} sentinel;\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u76d1\u63a7\u5217\u8868",children:"\u76d1\u63a7\u5217\u8868"}),"\n",(0,i.jsx)(e.p,{children:"Sentinel \u72b6\u6001\u7684\u521d\u59cb\u5316\u5c06 masters \u5b57\u5178\u7684\u521d\u59cb\u5316\uff0c\u6839\u636e\u88ab\u8f7d\u5165\u7684 Sentinel \u914d\u7f6e\u6587\u4ef6 conf \u6765\u8fdb\u884c\u5c5e\u6027\u8d4b\u503c"}),"\n",(0,i.jsxs)(e.p,{children:["Sentinel \u72b6\u6001\u4e2d\u7684 masters \u5b57\u5178\u8bb0\u5f55\u4e86\u6240\u6709\u88ab Sentinel \u76d1\u89c6\u7684",(0,i.jsx)(e.strong,{children:"\u4e3b\u670d\u52a1\u5668\u7684\u76f8\u5173\u4fe1\u606f"}),"\uff0c\u5b57\u5178\u7684\u952e\u662f\u88ab\u76d1\u89c6\u4e3b\u670d\u52a1\u5668\u7684\u540d\u5b57\uff0c\u503c\u662f\u4e3b\u670d\u52a1\u5668\u5bf9\u5e94\u7684\u5b9e\u4f8b\u7ed3\u6784"]}),"\n",(0,i.jsx)(e.p,{children:"\u5b9e\u4f8b\u7ed3\u6784\u662f\u4e00\u4e2a sentinelRedisinstance \u6570\u636e\u7c7b\u578b\uff0c\u4ee3\u8868\u88ab Sentinel \u76d1\u89c6\u7684\u5b9e\u4f8b\uff0c\u8fd9\u4e2a\u5b9e\u4f8b\u53ef\u4ee5\u662f\u4e3b\u3001\u4ece\u670d\u52a1\u5668\uff0c\u6216\u8005\u5176\u4ed6 Sentinel"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct sentinelRedisinstance {\n    // \u6807\u8bc6\u503c\uff0c\u8bb0\u5f55\u4e86\u5b9e\u4f8b\u7684\u7c7b\u578b\uff0c\u4ee5\u53ca\u8be5\u5b9e\u4f8b\u7684\u5f53\u524d\u72b6\u6001\n    int flags;\n    \n    // \u5b9e\u4f8b\u7684\u540d\u5b57\uff0c\u4e3b\u670d\u52a1\u5668\u7684\u540d\u5b57\u7531\u7528\u6237\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\uff0c\n    // \u4ece\u670d\u52a1\u5668\u548c\u54e8\u5175\u7684\u540d\u5b57\u7531 Sentinel \u81ea\u52a8\u8bbe\u7f6e\uff0c\u683c\u5f0f\u4e3a ip:port\uff0c\u4f8b\u5982 127.0.0.1:6379\n    char *name;\n    \n    // \u5b9e\u4f8b\u8fd0\u884c\u7684 ID\n    char *runid;\n    \n    // \u914d\u7f6e\u7eaa\u5143\uff0c\u7528\u4e8e\u5b9e\u73b0\u6545\u969c\u8f6c\u79fb\n    uint64_t config_epoch;\n    \n    // \u5b9e\u4f8b\u5730\u5740\n    sentinelAddr *addr; \n    \n    // \u5982\u679c\u5f53\u524d\u5b9e\u4f8b\u65f6\u4e3b\u670d\u52a1\u5668\uff0c\u8be5\u5b57\u6bb5\u4fdd\u5b58\u4ece\u670d\u52a1\u5668\u4fe1\u606f\uff0c\u952e\u662f\u540d\u5b57\u683c\u5f0f\u4e3a ip:port\uff0c\u503c\u662f\u5b9e\u4f8b\u7ed3\u6784\n    dict *slaves;\n    \n    // \u6240\u6709\u76d1\u89c6\u5f53\u524d\u670d\u52a1\u5668\u7684 Sentinel \u5b9e\u4f8b\uff0c\u952e\u662f\u540d\u5b57\u683c\u5f0f\u4e3a ip:port\uff0c\u503c\u662f\u5b9e\u4f8b\u7ed3\u6784\n    dict *sentinels;\n    \n    // sentinel down-after-milliseconds \u7684\u503c\uff0c\u8868\u793a\u5b9e\u4f8b\u65e0\u54cd\u5e94\u591a\u5c11\u6beb\u79d2\u540e\u4f1a\u88ab\u5224\u65ad\u4e3a\u4e3b\u89c2\u4e0b\u7ebf(subjectively down) \n    mstime_t down_after_period;\n    \n    // sentinel monitor \u9009\u9879\u4e2d\u7684quorum\u53c2\u6570\uff0c\u5224\u65ad\u8fd9\u4e2a\u5b9e\u4f8b\u4e3a\u5ba2\u89c2\u4e0b\u7ebf(objectively down)\u6240\u9700\u7684\u652f\u6301\u6295\u7968\u6570\u91cf\n    int quorum;\n    \n    // sentinel parallel-syncs \u7684\u503c\uff0c\u5728\u6267\u884c\u6545\u969c\u8f6c\u79fb\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u540c\u65f6\u5bf9\u65b0\u7684\u4e3b\u670d\u52a1\u5668\u8fdb\u884c\u540c\u6b65\u7684\u4ece\u670d\u52a1\u5668\u6570\u91cf\n    int parallel-syncs;\n    \n    // sentinel failover-timeout\u7684\u503c\uff0c\u5237\u65b0\u6545\u969c\u8fc1\u79fb\u72b6\u6001\u7684\u6700\u5927\u65f6\u9650\n    mstime_t failover_timeout;\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"addr \u5c5e\u6027\u662f\u4e00\u4e2a\u6307\u5411 sentinelAddr \u7684\u6307\u9488\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct sentinelAddr {\n    char *ip;\n    int port;\n}\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u7f51\u7edc\u8fde\u63a5",children:"\u7f51\u7edc\u8fde\u63a5"}),"\n",(0,i.jsx)(e.p,{children:"\u521d\u59cb\u5316 Sentinel \u7684\u6700\u540e\u4e00\u6b65\u662f\u521b\u5efa\u8fde\u5411\u88ab\u76d1\u89c6\u4e3b\u670d\u52a1\u5668\u7684\u7f51\u7edc\u8fde\u63a5\uff0cSentinel \u5c06\u6210\u4e3a\u4e3b\u670d\u52a1\u5668\u7684\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u5411\u4e3b\u670d\u52a1\u5668\u53d1\u9001\u547d\u4ee4\uff0c\u5e76\u4ece\u547d\u4ee4\u56de\u590d\u4e2d\u83b7\u53d6\u76f8\u5173\u7684\u4fe1\u606f"}),"\n",(0,i.jsxs)(e.p,{children:["\u6bcf\u4e2a\u88ab Sentinel \u76d1\u89c6\u7684\u4e3b\u670d\u52a1\u5668\uff0cSentinel \u4f1a\u521b\u5efa\u4e24\u4e2a\u8fde\u5411\u4e3b\u670d\u52a1\u5668\u7684",(0,i.jsx)(e.strong,{children:"\u5f02\u6b65\u7f51\u7edc\u8fde\u63a5"}),"\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u547d\u4ee4\u8fde\u63a5\uff1a\u7528\u4e8e\u5411\u4e3b\u670d\u52a1\u5668\u53d1\u9001\u547d\u4ee4\uff0c\u5e76\u63a5\u6536\u547d\u4ee4\u56de\u590d"}),"\n",(0,i.jsxs)(e.li,{children:["\u8ba2\u9605\u8fde\u63a5\uff1a\u7528\u4e8e\u8ba2\u9605\u4e3b\u670d\u52a1\u5668\u7684 ",(0,i.jsx)(e.code,{children:"_sentinel_:hello"})," \u9891\u9053"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5efa\u7acb\u4e24\u4e2a\u8fde\u63a5\u7684\u539f\u56e0\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728 Redis \u76ee\u524d\u7684\u53d1\u5e03\u4e0e\u8ba2\u9605\u529f\u80fd\u4e2d\uff0c\u88ab\u53d1\u9001\u7684\u4fe1\u606f\u90fd\u4e0d\u4f1a\u4fdd\u5b58\u5728 Redis \u670d\u52a1\u5668\u91cc\uff0c \u5982\u679c\u5728\u4fe1\u606f\u53d1\u9001\u65f6\u63a5\u6536\u4fe1\u606f\u7684\u5ba2\u6237\u7aef\u79bb\u7ebf\u6216\u65ad\u7ebf\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5ba2\u6237\u7aef\u5c31\u4f1a\u4e22\u5931\u8fd9\u6761\u4fe1\u606f\uff0c\u4e3a\u4e86\u4e0d\u4e22\u5931 hello \u9891\u9053\u7684\u4efb\u4f55\u4fe1\u606f\uff0cSentinel \u5fc5\u987b\u7528\u4e00\u4e2a\u8ba2\u9605\u8fde\u63a5\u6765\u63a5\u6536\u8be5\u9891\u9053\u7684\u4fe1\u606f"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Sentinel \u8fd8\u5fc5\u987b\u5411\u4e3b\u670d\u52a1\u5668\u53d1\u9001\u547d\u4ee4\uff0c\u4ee5\u6b64\u6765\u4e0e\u4e3b\u670d\u52a1\u5668\u8fdb\u884c\u901a\u4fe1\uff0c\u6240\u4ee5 Sentinel \u8fd8\u5fc5\u987b\u5411\u4e3b\u670d\u52a1\u5668\u521b\u5efa\u547d\u4ee4\u8fde\u63a5"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\uff1a\u65ad\u7ebf\u7684\u610f\u601d\u5c31\u662f\u7f51\u7edc\u8fde\u63a5\u65ad\u5f00"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(37047).A+"",width:"715",height:"375"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u4fe1\u606f\u4ea4\u4e92",children:"\u4fe1\u606f\u4ea4\u4e92"}),"\n",(0,i.jsx)(e.h4,{id:"\u83b7\u53d6\u4fe1\u606f",children:"\u83b7\u53d6\u4fe1\u606f"}),"\n",(0,i.jsx)(e.h5,{id:"\u4e3b\u670d\u52a1\u5668",children:"\u4e3b\u670d\u52a1\u5668"}),"\n",(0,i.jsx)(e.p,{children:"Sentinel \u9ed8\u8ba4\u4f1a\u4ee5\u6bcf\u5341\u79d2\u4e00\u6b21\u7684\u9891\u7387\uff0c\u901a\u8fc7\u547d\u4ee4\u8fde\u63a5\u5411\u88ab\u76d1\u89c6\u7684\u4e3b\u670d\u52a1\u5668\u53d1\u9001 INFO \u547d\u4ee4\uff0c\u6765\u83b7\u53d6\u4e3b\u670d\u52a1\u5668\u7684\u4fe1\u606f"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e00\u90e8\u5206\u662f\u4e3b\u670d\u52a1\u5668\u672c\u8eab\u7684\u4fe1\u606f\uff0c\u5305\u62ec runid \u57df\u8bb0\u5f55\u7684\u670d\u52a1\u5668\u8fd0\u884c ID\uff0c\u4ee5\u53ca role \u57df\u8bb0\u5f55\u7684\u670d\u52a1\u5668\u89d2\u8272"}),"\n",(0,i.jsxs)(e.li,{children:["\u53e6\u4e00\u90e8\u5206\u662f\u670d\u52a1\u5668\u5c5e\u4e0b\u6240\u6709\u4ece\u670d\u52a1\u5668\u7684\u4fe1\u606f\uff0c\u6bcf\u4e2a\u4ece\u670d\u52a1\u5668\u90fd\u7531\u4e00\u4e2a slave \u5b57\u7b26\u4e32\u5f00\u5934\u7684\u884c\u8bb0\u5f55\uff0c\u6839\u636e\u8fd9\u4e9b IP \u5730\u5740\u548c\u7aef\u53e3\u53f7\uff0cSentinel \u65e0\u987b\u7528\u6237\u63d0\u4f9b\u4ece\u670d\u52a1\u5668\u7684\u5730\u5740\u4fe1\u606f\uff0c\u5c31\u53ef\u4ee5",(0,i.jsx)(e.strong,{children:"\u81ea\u52a8\u53d1\u73b0\u4ece\u670d\u52a1\u5668"})]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"# Server \nrun_id:76llc59dc3a29aa6fa0609f84lbb6al019008a9c\n...\n# Replication \nrole:master \n...\nslave0: ip=l27.0.0.1, port=11111, state=online, offset=22, lag=0\nslave1: ip=l27.0.0.1, port=22222, state=online, offset=22, lag=0\n...\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6839\u636e run_id \u548c role \u8bb0\u5f55\u7684\u4fe1\u606f Sentinel \u5c06\u5bf9\u4e3b\u670d\u52a1\u5668\u7684\u5b9e\u4f8b\u7ed3\u6784\u8fdb\u884c\u66f4\u65b0\uff0c\u6bd4\u5982\u4e3b\u670d\u52a1\u5668\u91cd\u542f\u4e4b\u540e\uff0c\u8fd0\u884c ID \u5c31\u4f1a\u548c\u5b9e\u4f8b\u7ed3\u6784\u4e4b\u524d\u4fdd\u5b58\u7684\u8fd0\u884c ID \u4e0d\u540c\uff0c\u54e8\u5175\u68c0\u6d4b\u5230\u8fd9\u4e00\u60c5\u51b5\u4e4b\u540e\u5c31\u4f1a\u5bf9\u5b9e\u4f8b\u7ed3\u6784\u7684\u8fd0\u884c ID \u8fdb\u884c\u66f4\u65b0"}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u4e8e\u4e3b\u670d\u52a1\u5668\u8fd4\u56de\u7684\u4ece\u670d\u52a1\u5668\u4fe1\u606f\uff0c\u7528\u5b9e\u4f8b\u7ed3\u6784\u7684 slaves \u5b57\u5178\u8bb0\u5f55\u4e86\u4ece\u670d\u52a1\u5668\u7684\u4fe1\u606f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u4ece\u670d\u52a1\u5668\u5bf9\u5e94\u7684\u5b9e\u4f8b\u7ed3\u6784\u5df2\u7ecf\u5b58\u5728\uff0c\u90a3\u4e48 Sentinel \u5bf9\u4ece\u670d\u52a1\u5668\u7684\u5b9e\u4f8b\u7ed3\u6784\u8fdb\u884c\u66f4\u65b0"}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u4e3a\u8fd9\u4e2a\u4ece\u670d\u52a1\u5668\u65b0\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b\u7ed3\u6784\u52a0\u5165\u5b57\u5178\uff0c\u5b57\u5178\u952e\u4e3a ",(0,i.jsx)(e.code,{children:"ip:port"})]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u4ece\u670d\u52a1\u5668",children:"\u4ece\u670d\u52a1\u5668"}),"\n",(0,i.jsxs)(e.p,{children:["\u5f53 Sentinel \u53d1\u73b0\u4e3b\u670d\u52a1\u5668\u6709\u65b0\u7684\u4ece\u670d\u52a1\u5668\u51fa\u73b0\u65f6\uff0c\u4f1a\u4e3a\u8fd9\u4e2a\u65b0\u7684\u4ece\u670d\u52a1\u5668\u521b\u5efa\u76f8\u5e94\u7684\u5b9e\u4f8b\u7ed3\u6784\uff0c\u8fd8\u4f1a",(0,i.jsx)(e.strong,{children:"\u521b\u5efa\u5230\u4ece\u670d\u52a1\u5668\u7684\u547d\u4ee4\u8fde\u63a5\u548c\u8ba2\u9605\u8fde\u63a5"}),"\uff0c\u6240\u4ee5 Sentinel \u5bf9\u6240\u6709\u7684\u4ece\u670d\u52a1\u5668\u4e4b\u95f4\u90fd\u53ef\u4ee5\u8fdb\u884c\u547d\u4ee4\u64cd\u4f5c"]}),"\n",(0,i.jsx)(e.p,{children:"Sentinel \u9ed8\u8ba4\u4f1a\u4ee5\u6bcf\u5341\u79d2\u4e00\u6b21\u7684\u9891\u7387\uff0c\u5411\u4ece\u670d\u52a1\u5668\u53d1\u9001 INFO \u547d\u4ee4\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"# Server \nrun_id:76llc59dc3a29aa6fa0609f84lbb6al019008a9c\t#\u4ece\u670d\u52a1\u5668\u7684\u8fd0\u884c id\n...\n# Replication \nrole:slave \t\t\t\t# \u4ece\u670d\u52a1\u5668\u89d2\u8272\n...\nmaster_host:127.0.0.1 \t# \u4e3b\u670d\u52a1\u5668\u7684 ip\nmaster_port:6379 \t\t# \u4e3b\u670d\u52a1\u5668\u7684 port\nmaster_link_status:up \t# \u4e3b\u4ece\u670d\u52a1\u5668\u7684\u8fde\u63a5\u72b6\u6001\nslave_repl_offset:11111\t# \u4ece\u670d\u52a1\u5668\u7684\u590d\u5236\u504f\u79fb\u8707\nslave_priority:100 \t\t# \u4ece\u670d\u52a1\u5668\u7684\u4f18\u5148\u7ea7\n...\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u4f18\u5148\u7ea7\u5c5e\u6027"}),"\u5728\u6545\u969c\u8f6c\u79fb\u65f6\u4f1a\u7528\u5230"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6839\u636e\u8fd9\u4e9b\u4fe1\u606f\uff0cSentinel \u4f1a\u5bf9\u4ece\u670d\u52a1\u5668\u7684\u5b9e\u4f8b\u7ed3\u6784\u8fdb\u884c\u66f4\u65b0"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u53d1\u9001\u4fe1\u606f",children:"\u53d1\u9001\u4fe1\u606f"}),"\n",(0,i.jsx)(e.p,{children:"Sentinel \u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4ee5\u6bcf\u4e24\u79d2\u4e00\u6b21\u7684\u9891\u7387\uff0c\u901a\u8fc7\u547d\u4ee4\u8fde\u63a5\u5411\u6240\u6709\u88ab\u76d1\u89c6\u7684\u4e3b\u670d\u52a1\u5668\u548c\u4ece\u670d\u52a1\u5668\u53d1\u9001\u4ee5\u4e0b\u683c\u5f0f\u7684\u547d\u4ee4\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'PUBLISH _sentinel_:hello "<s_ip>, <s_port>, <s_runid>, <s_epoch>, <m_name>, <m_ip>, <m_port>, <m_epoch>\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u8fd9\u6761\u547d\u4ee4\u5411\u670d\u52a1\u5668\u7684 ",(0,i.jsx)(e.code,{children:"_sentinel_:hello"})," \u9891\u9053\u53d1\u9001\u4e86\u4e00\u6761\u4fe1\u606f\uff0c\u4fe1\u606f\u7684\u5185\u5bb9\u7531\u591a\u4e2a\u53c2\u6570\u7ec4\u6210\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4ee5 s_ \u5f00\u5934\u7684\u53c2\u6570\u8bb0\u5f55\u7684\u662f Sentinel \u672c\u8eab\u7684\u4fe1\u606f"}),"\n",(0,i.jsx)(e.li,{children:"\u4ee5 m_ \u5f00\u5934\u7684\u53c2\u6570\u8bb0\u5f55\u7684\u5219\u662f\u4e3b\u670d\u52a1\u5668\u7684\u4fe1\u606f"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u8bf4\u660e\uff1a",(0,i.jsx)(e.strong,{children:"\u901a\u8fc7\u547d\u4ee4\u8fde\u63a5\u53d1\u9001\u7684\u9891\u9053\u4fe1\u606f"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u63a5\u53d7\u4fe1\u606f",children:"\u63a5\u53d7\u4fe1\u606f"}),"\n",(0,i.jsx)(e.h5,{id:"\u8ba2\u9605\u9891\u9053",children:"\u8ba2\u9605\u9891\u9053"}),"\n",(0,i.jsx)(e.p,{children:"Sentinel \u4e0e\u4e00\u4e2a\u4e3b\u6216\u4ece\u670d\u52a1\u5668\u5efa\u7acb\u8d77\u8ba2\u9605\u8fde\u63a5\u4e4b\u540e\uff0c\u5c31\u4f1a\u901a\u8fc7\u8ba2\u9605\u8fde\u63a5\u5411\u670d\u52a1\u5668\u53d1\u9001\u8ba2\u9605\u547d\u4ee4\uff0c\u9891\u9053\u7684\u8ba2\u9605\u4f1a\u4e00\u76f4\u6301\u7eed\u5230 Sentinel \u4e0e\u670d\u52a1\u5668\u7684\u8fde\u63a5\u65ad\u5f00\u4e3a\u6b62"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"SUBSCRIBE _sentinel_:hello\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u8ba2\u9605\u6210\u529f\u540e\uff0cSentinel \u5c31\u53ef\u4ee5\u901a\u8fc7\u8ba2\u9605\u8fde\u63a5\u4ece\u670d\u52a1\u5668\u7684 ",(0,i.jsx)(e.code,{children:"_sentinel_:hello"})," \u9891\u9053\u63a5\u6536\u4fe1\u606f\uff0c\u5bf9\u6d88\u606f\u5206\u6790\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u4fe1\u606f\u4e2d\u8bb0\u5f55\u7684 Sentinel \u8fd0\u884c ID \u4e0e\u81ea\u5df1\u7684\u76f8\u540c\uff0c\u4e0d\u505a\u8fdb\u4e00\u6b65\u5904\u7406"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u4e0d\u540c\uff0c\u5c06\u6839\u636e\u4fe1\u606f\u4e2d\u7684\u5404\u4e2a\u53c2\u6570\uff0c\u5bf9\u76f8\u5e94\u4e3b\u670d\u52a1\u5668\u7684\u5b9e\u4f8b\u7ed3\u6784\u8fdb\u884c\u66f4\u65b0"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["Sentinel \u4e3a\u4e3b\u670d\u52a1\u5668\u521b\u5efa\u7684\u5b9e\u4f8b\u7ed3\u6784\u7684 sentinels \u5b57\u5178\u4fdd\u5b58\u6240\u6709\u540c\u6837\u76d1\u89c6\u8fd9\u4e2a",(0,i.jsx)(e.strong,{children:"\u4e3b\u670d\u52a1\u5668\u7684 Sentinel \u4fe1\u606f"}),"\uff08\u5305\u62ec Sentinel \u81ea\u5df1\uff09\uff0c\u5b57\u5178\u7684\u952e\u662f Sentinel \u7684\u540d\u5b57\uff0c\u683c\u5f0f\u4e3a ",(0,i.jsx)(e.code,{children:"ip:port"}),"\uff0c\u503c\u662f\u952e\u6240\u5bf9\u5e94 Sentinel \u7684\u5b9e\u4f8b\u7ed3\u6784"]}),"\n",(0,i.jsx)(e.p,{children:"\u76d1\u89c6\u540c\u4e00\u4e2a\u670d\u52a1\u5668\u7684 Sentinel \u8ba2\u9605\u7684\u9891\u9053\u76f8\u540c\uff0cSentinel \u53d1\u9001\u7684\u4fe1\u606f\u4f1a\u88ab\u5176\u4ed6 Sentinel \u63a5\u6536\u5230\uff08\u53d1\u9001\u4fe1\u606f\u7684\u4e3a\u6e90 Sentinel\uff0c\u63a5\u6536\u4fe1\u606f\u7684\u4e3a\u76ee\u6807 Sentinel\uff09\uff0c\u76ee\u6807 Sentinel \u5728\u81ea\u5df1\u7684 sentinelState.masters \u4e2d\u67e5\u627e\u6e90 Sentinel \u670d\u52a1\u5668\u7684\u5b9e\u4f8b\u7ed3\u6784\u8fdb\u884c\u6dfb\u52a0\u6216\u66f4\u65b0"}),"\n",(0,i.jsxs)(e.p,{children:["\u56e0\u4e3a Sentinel \u53ef\u4ee5\u63a5\u6536\u5230\u7684\u9891\u9053\u4fe1\u606f\u6765\u611f\u77e5\u5176\u4ed6 Sentinel \u7684\u5b58\u5728\uff0c\u5e76\u901a\u8fc7\u53d1\u9001\u9891\u9053\u4fe1\u606f\u6765\u8ba9\u5176\u4ed6 Sentinel \u77e5\u9053\u81ea\u5df1\u7684\u5b58\u5728\uff0c\u6240\u4ee5\u7528\u6237\u5728\u4f7f\u7528 Sentinel \u65f6\u5e76\u4e0d\u9700\u8981\u63d0\u4f9b\u5404\u4e2a Sentinel \u7684\u5730\u5740\u4fe1\u606f\uff0c",(0,i.jsx)(e.strong,{children:"\u76d1\u89c6\u540c\u4e00\u4e2a\u4e3b\u670d\u52a1\u5668\u7684\u591a\u4e2a Sentinel \u53ef\u4ee5\u76f8\u4e92\u53d1\u73b0\u5bf9\u65b9"})]}),"\n",(0,i.jsx)(e.p,{children:"\u54e8\u5175\u5b9e\u4f8b\u4e4b\u95f4\u53ef\u4ee5\u76f8\u4e92\u53d1\u73b0\uff0c\u8981\u5f52\u529f\u4e8e Redis \u63d0\u4f9b\u53d1\u5e03\u8ba2\u9605\u673a\u5236"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u547d\u4ee4\u8fde\u63a5",children:"\u547d\u4ee4\u8fde\u63a5"}),"\n",(0,i.jsx)(e.p,{children:"Sentinel \u901a\u8fc7\u9891\u9053\u4fe1\u606f\u53d1\u73b0\u65b0\u7684 Sentinel\uff0c\u9664\u4e86\u521b\u5efa\u5b9e\u4f8b\u7ed3\u6784\uff0c\u8fd8\u4f1a\u521b\u5efa\u4e00\u4e2a\u8fde\u5411\u65b0 Sentinel \u7684\u547d\u4ee4\u8fde\u63a5\uff0c\u800c\u65b0 Sentinel \u4e5f\u540c\u6837\u4f1a\u521b\u5efa\u8fde\u5411\u8fd9\u4e2a Sentinel \u7684\u547d\u4ee4\u8fde\u63a5\uff0c\u6700\u7ec8\u76d1\u89c6\u540c\u4e00\u4e3b\u670d\u52a1\u5668\u7684\u591a\u4e2a Sentinel \u5c06\u5f62\u6210\u76f8\u4e92\u8fde\u63a5\u7684\u7f51\u7edc"}),"\n",(0,i.jsxs)(e.p,{children:["\u4f5c\u7528\uff1a",(0,i.jsx)(e.strong,{children:"\u901a\u8fc7\u547d\u4ee4\u8fde\u63a5\u76f8\u8fde\u7684\u5404\u4e2a Sentinel"})," \u53ef\u4ee5\u5411\u5176\u4ed6 Sentinel \u53d1\u9001\u547d\u4ee4\u8bf7\u6c42\u6765\u8fdb\u884c\u4fe1\u606f\u4ea4\u6362"]}),"\n",(0,i.jsx)(e.p,{children:"Sentinel \u4e4b\u95f4\u4e0d\u4f1a\u521b\u5efa\u8ba2\u9605\u8fde\u63a5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Sentinel \u9700\u8981\u901a\u8fc7\u63a5\u6536\u4e3b\u670d\u52a1\u5668\u6216\u8005\u4ece\u670d\u52a1\u5668\u53d1\u6765\u7684\u9891\u9053\u4fe1\u606f\u6765\u53d1\u73b0\u672a\u77e5\u7684\u65b0 Sentinel\uff0c\u6240\u4ee5\u624d\u521b\u5efa\u8ba2\u9605\u8fde\u63a5"}),"\n",(0,i.jsx)(e.li,{children:"\u76f8\u4e92\u5df2\u77e5\u7684 Sentinel \u53ea\u8981\u4f7f\u7528\u547d\u4ee4\u8fde\u63a5\u6765\u8fdb\u884c\u901a\u4fe1\u5c31\u8db3\u591f\u4e86"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u4e0b\u7ebf\u68c0\u6d4b",children:"\u4e0b\u7ebf\u68c0\u6d4b"}),"\n",(0,i.jsx)(e.h4,{id:"\u4e3b\u89c2\u4e0b\u7ebf",children:"\u4e3b\u89c2\u4e0b\u7ebf"}),"\n",(0,i.jsx)(e.p,{children:"Sentinel \u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f1a\u4ee5\u6bcf\u79d2\u4e00\u6b21\u7684\u9891\u7387\u5411\u6240\u6709\u4e0e\u5b83\u521b\u5efa\u4e86\u547d\u4ee4\u8fde\u63a5\u7684\u5b9e\u4f8b\uff08\u5305\u62ec\u4e3b\u4ece\u670d\u52a1\u5668\u3001\u5176\u4ed6 Sentinel\uff09\u53d1\u9001 PING \u547d\u4ee4\uff0c\u901a\u8fc7\u5b9e\u4f8b\u8fd4\u56de\u7684 PING \u547d\u4ee4\u56de\u590d\u6765\u5224\u65ad\u5b9e\u4f8b\u662f\u5426\u5728\u7ebf"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6709\u6548\u56de\u590d\uff1a\u5b9e\u4f8b\u8fd4\u56de +PONG\u3001-LOADING\u3001-MASTERDOWN \u4e09\u79cd\u56de\u590d\u7684\u5176\u4e2d\u4e00\u79cd"}),"\n",(0,i.jsx)(e.li,{children:"\u65e0\u6548\u56de\u590d\uff1a\u5b9e\u4f8b\u8fd4\u56de\u9664\u4e0a\u8ff0\u4e09\u79cd\u4ee5\u5916\u7684\u4efb\u4f55\u6570\u636e"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Sentinel \u914d\u7f6e\u6587\u4ef6\u4e2d down-after-milliseconds \u9009\u9879\u6307\u5b9a\u4e86\u5224\u65ad\u5b9e\u4f8b\u8fdb\u5165\u4e3b\u89c2\u4e0b\u7ebf\u6240\u9700\u7684\u65f6\u957f\uff0c\u5982\u679c\u4e3b\u670d\u52a1\u5668\u5728\u8be5\u65f6\u95f4\u5185\u4e00\u76f4\u5411 Sentinel \u8fd4\u56de\u65e0\u6548\u56de\u590d\uff0cSentinel \u5c31\u4f1a\u5728\u8be5\u670d\u52a1\u5668\u5bf9\u5e94\u5b9e\u4f8b\u7ed3\u6784\u7684 flags \u5c5e\u6027\u6253\u5f00 SRI_S_DOWN \u6807\u8bc6\uff0c\u8868\u793a\u8be5\u4e3b\u670d\u52a1\u5668\u8fdb\u5165\u4e3b\u89c2\u4e0b\u7ebf\u72b6\u6001"}),"\n",(0,i.jsx)(e.p,{children:"\u914d\u7f6e\u7684 down-after-milliseconds \u503c\u4e0d\u4ec5\u9002\u7528\u4e8e\u4e3b\u670d\u52a1\u5668\uff0c\u8fd8\u4f1a\u88ab\u7528\u4e8e\u5f53\u524d Sentinel \u5224\u65ad\u4e3b\u670d\u52a1\u5668\u5c5e\u4e0b\u7684\u6240\u6709\u4ece\u670d\u52a1\u5668\uff0c\u4ee5\u53ca\u6240\u6709\u540c\u6837\u76d1\u89c6\u8fd9\u4e2a\u4e3b\u670d\u52a1\u5668\u7684\u5176\u4ed6 Sentinel \u7684\u4e3b\u89c2\u4e0b\u7ebf\u72b6\u6001"}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u5bf9\u4e8e\u76d1\u89c6\u540c\u4e00\u4e2a\u4e3b\u670d\u52a1\u5668\u7684\u591a\u4e2a Sentinel \u6765\u8bf4\uff0c\u8bbe\u7f6e\u7684 down-after-milliseconds \u9009\u9879\u7684\u503c\u53ef\u80fd\u4e0d\u540c\uff0c\u6240\u4ee5\u5f53\u4e00\u4e2a Sentinel \u5c06\u4e3b\u670d\u52a1\u5668\u5224\u65ad\u4e3a\u4e3b\u89c2\u4e0b\u7ebf\u65f6\uff0c\u5176\u4ed6 Sentinel \u53ef\u80fd\u4ecd\u7136\u4f1a\u8ba4\u4e3a\u4e3b\u670d\u52a1\u5668\u5904\u4e8e\u5728\u7ebf\u72b6\u6001"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5ba2\u89c2\u4e0b\u7ebf",children:"\u5ba2\u89c2\u4e0b\u7ebf"}),"\n",(0,i.jsx)(e.p,{children:"\u5f53 Sentinel \u5c06\u4e00\u4e2a\u4e3b\u670d\u52a1\u5668\u5224\u65ad\u4e3a\u4e3b\u89c2\u4e0b\u7ebf\u4e4b\u540e\uff0c\u4f1a\u5411\u540c\u6837\u76d1\u89c6\u8fd9\u4e00\u4e3b\u670d\u52a1\u5668\u7684\u5176\u4ed6 Sentinel \u8fdb\u884c\u8be2\u95ee"}),"\n",(0,i.jsx)(e.p,{children:"Sentinel \u4f7f\u7528\u547d\u4ee4\u8be2\u95ee\u5176\u4ed6 Sentinel \u662f\u5426\u540c\u610f\u4e3b\u670d\u52a1\u5668\u5df2\u4e0b\u7ebf\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"SENTINEL is-master-down-by-addr <ip> <port> <current_epoch> <runid>\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"ip\uff1a\u88ab Sentinel \u5224\u65ad\u4e3a\u4e3b\u89c2\u4e0b\u7ebf\u7684\u4e3b\u670d\u52a1\u5668\u7684 IP \u5730\u5740"}),"\n",(0,i.jsx)(e.li,{children:"port\uff1a\u88ab Sentinel \u5224\u65ad\u4e3a\u4e3b\u89c2\u4e0b\u7ebf\u7684\u4e3b\u670d\u52a1\u5668\u7684\u7aef\u53e3\u53f7"}),"\n",(0,i.jsx)(e.li,{children:"current_epoch\uff1aSentinel \u5f53\u524d\u7684\u914d\u7f6e\u7eaa\u5143\uff0c\u7528\u4e8e\u9009\u4e3e\u9886\u5934 Sentinel"}),"\n",(0,i.jsx)(e.li,{children:"runid\uff1a\u53d6\u503c\u4e3a * \u7b26\u53f7\u4ee3\u8868\u547d\u4ee4\u4ec5\u4ec5\u7528\u4e8e\u68c0\u6d4b\u4e3b\u670d\u52a1\u5668\u7684\u5ba2\u89c2\u4e0b\u7ebf\u72b6\u6001\uff1b\u53d6\u503c\u4e3a Sentinel \u7684\u8fd0\u884c ID \u5219\u7528\u4e8e\u9009\u4e3e\u9886\u5934 Sentinel"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u76ee\u6807 Sentinel \u63a5\u6536\u5230\u6e90 Sentinel \u7684\u547d\u4ee4\u65f6\uff0c\u4f1a\u6839\u636e\u53c2\u6570\u7684 lP \u548c\u7aef\u53e3\u53f7\uff0c\u68c0\u67e5\u4e3b\u670d\u52a1\u5668\u662f\u5426\u5df2\u4e0b\u7ebf\uff0c\u7136\u540e\u8fd4\u56de\u4e00\u6761\u5305\u542b\u4e09\u4e2a\u53c2\u6570\u7684 Multi Bulk \u56de\u590d\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"down_state\uff1a\u8fd4\u56de\u76ee\u6807 Sentinel \u5bf9\u670d\u52a1\u5668\u7684\u68c0\u67e5\u7ed3\u679c\uff0c1 \u4ee3\u8868\u4e3b\u670d\u52a1\u5668\u5df2\u4e0b\u7ebf\uff0c0 \u4ee3\u8868\u672a\u4e0b\u7ebf"}),"\n",(0,i.jsx)(e.li,{children:"leader_runid\uff1a\u53d6\u503c\u4e3a * \u7b26\u53f7\u4ee3\u8868\u547d\u4ee4\u4ec5\u7528\u4e8e\u68c0\u6d4b\u670d\u52a1\u5668\u7684\u4e0b\u7ebf\u72b6\u6001\uff1b\u800c\u5c40\u90e8\u9886\u5934 Sentinel \u7684\u8fd0\u884c ID \u5219\u7528\u4e8e\u9009\u4e3e\u9886\u5934 Sentinel"}),"\n",(0,i.jsx)(e.li,{children:"leader_epoch\uff1a\u76ee\u6807 Sentinel \u7684\u5c40\u90e8\u9886\u5934 Sentinel \u7684\u914d\u7f6e\u7eaa\u5143"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6e90 Sentinel \u5c06\u7edf\u8ba1\u5176\u4ed6 Sentinel \u540c\u610f\u4e3b\u670d\u52a1\u5668\u5df2\u4e0b\u7ebf\u7684\u6570\u91cf\uff0c\u5f53\u8fd9\u4e00\u6570\u91cf\u8fbe\u5230\u914d\u7f6e\u6307\u5b9a\u7684\u5224\u65ad\u5ba2\u89c2\u4e0b\u7ebf\u6240\u9700\u7684\u6570\u91cf\uff08quorum\uff09\u65f6\uff0cSentinel \u4f1a\u5c06\u4e3b\u670d\u52a1\u5668\u5bf9\u5e94\u5b9e\u4f8b\u7ed3\u6784 flags \u5c5e\u6027\u7684 SRI_O_DOWN \u6807\u8bc6\u6253\u5f00\uff0c\u4ee3\u8868\u5ba2\u89c2\u4e0b\u7ebf\uff0c\u5e76\u5bf9\u4e3b\u670d\u52a1\u5668\u6267\u884c\u6545\u969c\u8f6c\u79fb\u64cd\u4f5c"}),"\n",(0,i.jsxs)(e.p,{children:["\u6ce8\u610f\uff1a",(0,i.jsx)(e.strong,{children:"\u4e0d\u540c Sentinel \u5224\u65ad\u5ba2\u89c2\u4e0b\u7ebf\u7684\u6761\u4ef6\u53ef\u80fd\u4e0d\u540c"}),"\uff0c\u56e0\u4e3a\u8f7d\u5165\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u5c5e\u6027 quorum \u53ef\u80fd\u4e0d\u540c"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u9886\u5934\u9009\u4e3e",children:"\u9886\u5934\u9009\u4e3e"}),"\n",(0,i.jsxs)(e.p,{children:["\u4e3b\u670d\u52a1\u5668\u88ab\u5224\u65ad\u4e3a\u5ba2\u89c2\u4e0b\u7ebf\u65f6\uff0c",(0,i.jsx)(e.strong,{children:"\u76d1\u89c6\u8be5\u4e3b\u670d\u52a1\u5668\u7684\u5404\u4e2a Sentinel \u4f1a\u8fdb\u884c\u534f\u5546"}),"\uff0c\u9009\u4e3e\u51fa\u4e00\u4e2a\u9886\u5934 Sentinel \u5bf9\u4e0b\u7ebf\u670d\u52a1\u5668\u6267\u884c\u6545\u969c\u8f6c\u79fb"]}),"\n",(0,i.jsx)(e.p,{children:"Redis \u9009\u4e3e\u9886\u5934 Sentinel \u7684\u89c4\u5219\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6240\u6709\u5728\u7ebf\u7684 Sentinel \u90fd\u6709\u88ab\u9009\u4e3a\u9886\u5934 Sentinel \u7684\u8d44\u683c"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6bcf\u4e2a\u53d1\u73b0\u4e3b\u670d\u52a1\u5668\u8fdb\u5165\u5ba2\u89c2\u4e0b\u7ebf\u7684 Sentinel \u90fd\u4f1a\u8981\u6c42\u5176\u4ed6 Sentinel \u5c06\u81ea\u5df1\u8bbe\u7f6e\u4e3a\u5c40\u90e8\u9886\u5934 Sentinel"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728\u4e00\u4e2a\u914d\u7f6e\u7eaa\u5143\u91cc\uff0c\u6240\u6709 Sentinel \u90fd\u53ea\u6709\u4e00\u6b21\u5c06\u67d0\u4e2a Sentinel \u8bbe\u7f6e\u4e3a\u5c40\u90e8\u9886\u5934 Sentinel \u7684\u673a\u4f1a\uff0c\u5e76\u4e14\u5c40\u90e8\u9886\u5934\u4e00\u65e6\u8bbe\u7f6e\uff0c\u5728\u8fd9\u4e2a\u914d\u7f6e\u7eaa\u5143\u91cc\u5c31\u4e0d\u80fd\u518d\u66f4\u6539"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Sentinel \u8bbe\u7f6e\u5c40\u90e8\u9886\u5934 Sentinel \u7684\u89c4\u5219\u662f\u5148\u5230\u5148\u5f97\uff0c\u6700\u5148\u5411\u76ee\u6807 Sentinel \u53d1\u9001\u8bbe\u7f6e\u8981\u6c42\u7684\u6e90 Sentinel \u5c06\u6210\u4e3a\u76ee\u6807 Sentinel \u7684\u5c40\u90e8\u9886\u5934 Sentinel\uff0c\u4e4b\u540e\u63a5\u6536\u5230\u7684\u6240\u6709\u8bbe\u7f6e\u8981\u6c42\u90fd\u4f1a\u88ab\u76ee\u6807 Sentinel \u62d2\u7edd"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u9886\u5934 Sentinel \u7684\u4ea7\u751f",(0,i.jsx)(e.strong,{children:"\u9700\u8981\u534a\u6570\u4ee5\u4e0a Sentinel \u7684\u652f\u6301"}),"\uff0c\u5e76\u4e14\u6bcf\u4e2a Sentinel \u53ea\u6709\u4e00\u7968\uff0c\u6240\u4ee5\u4e00\u4e2a\u914d\u7f6e\u7eaa\u5143\u53ea\u4f1a\u51fa\u73b0\u4e00\u4e2a\u9886\u5934 Sentinel\uff0c\u6bd4\u5982 10 \u4e2a Sentinel \u7684\u7cfb\u7edf\u4e2d\uff0c\u81f3\u5c11\u9700\u8981 ",(0,i.jsx)(e.code,{children:"10/2 + 1 = 6"})," \u7968"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u9009\u4e3e\u8fc7\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4e00\u4e2a Sentinel \u5411\u76ee\u6807 Sentinel \u53d1\u9001 ",(0,i.jsx)(e.code,{children:"SENTINEL is-master-down-by-addr"})," \u547d\u4ee4\uff0c\u547d\u4ee4\u4e2d\u7684 runid \u53c2\u6570\u4e0d\u662f\uff0a\u7b26\u53f7\u800c\u662f\u6e90 Sentinel \u7684\u8fd0\u884c ID\uff0c\u8868\u793a\u6e90 Sentinel \u8981\u6c42\u76ee\u6807 Sentinel \u5c06\u81ea\u5df1\u8bbe\u7f6e\u4e3a\u5b83\u7684\u5c40\u90e8\u9886\u5934 Sentinel"]}),"\n",(0,i.jsx)(e.li,{children:"\u76ee\u6807 Sentinel \u63a5\u53d7\u547d\u4ee4\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5c06\u8fd4\u56de\u4e00\u6761\u547d\u4ee4\u56de\u590d\uff0c\u56de\u590d\u4e2d\u7684 leader_runid \u548c leader_epoch \u53c2\u6570\u5206\u522b\u8bb0\u5f55\u4e86\u76ee\u6807 Sentinel \u7684\u5c40\u90e8\u9886\u5934 Sentinel \u7684\u8fd0\u884c ID \u548c\u914d\u7f6e\u7eaa\u5143"}),"\n",(0,i.jsx)(e.li,{children:"\u6e90 Sentinel \u63a5\u6536\u76ee\u6807 Sentinel \u547d\u4ee4\u56de\u590d\u4e4b\u540e\uff0c\u4f1a\u5224\u65ad leader_epoch \u662f\u5426\u548c\u81ea\u5df1\u7684\u76f8\u540c\uff0c\u76f8\u540c\u5c31\u7ee7\u7eed\u5224\u65ad leader_runid \u662f\u5426\u548c\u81ea\u5df1\u7684\u8fd0\u884c ID \u4e00\u81f4\uff0c\u6210\u7acb\u8868\u793a\u76ee\u6807 Sentinel \u5c06\u6e90 Sentinel \u8bbe\u7f6e\u6210\u4e86\u5c40\u90e8\u9886\u5934 Sentinel\uff0c\u5373\u83b7\u5f97\u4e00\u7968"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u67d0\u4e2a Sentinel \u88ab\u534a\u6570\u4ee5\u4e0a\u7684 Sentinel \u8bbe\u7f6e\u6210\u4e86\u5c40\u90e8\u9886\u5934 Sentinel\uff0c\u90a3\u4e48\u8fd9\u4e2a Sentinel \u6210\u4e3a\u9886\u5934 Sentinel"}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u5728\u7ed9\u5b9a\u65f6\u9650\u5185\uff0c\u6ca1\u6709\u4e00\u4e2a Sentinel \u88ab\u9009\u4e3e\u4e3a\u9886\u5934 Sentinel\uff0c\u90a3\u4e48\u5404\u4e2a Sentinel \u5c06\u5728\u4e00\u6bb5\u65f6\u95f4\u540e",(0,i.jsx)(e.strong,{children:"\u518d\u6b21\u9009\u4e3e"}),"\uff0c\u76f4\u5230\u9009\u51fa\u9886\u5934"]}),"\n",(0,i.jsx)(e.li,{children:"\u6bcf\u6b21\u8fdb\u884c\u9886\u5934 Sentinel \u9009\u4e3e\u4e4b\u540e\uff0c\u4e0d\u8bba\u9009\u4e3e\u662f\u5426\u6210\u529f\uff0c\u6240\u6709 Sentinel \u7684\u914d\u7f6e\u7eaa\u5143\uff08configuration epoch\uff09\u90fd\u8981\u81ea\u589e\u4e00\u6b21"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Sentinel \u96c6\u7fa4\u81f3\u5c11 3 \u4e2a\u8282\u70b9\u7684\u539f\u56e0\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c Sentinel \u96c6\u7fa4\u53ea\u6709 2 \u4e2a Sentinel \u8282\u70b9\uff0c\u5219\u9886\u5934\u9009\u4e3e\u9700\u8981 ",(0,i.jsx)(e.code,{children:"2/2 + 1 = 2"})," \u7968\uff0c\u5982\u679c\u4e00\u4e2a\u8282\u70b9\u6302\u4e86\uff0c\u90a3\u5c31\u6c38\u8fdc\u9009\u4e0d\u51fa\u9886\u5934"]}),"\n",(0,i.jsx)(e.li,{children:"Sentinel \u96c6\u7fa4\u5141\u8bb8 1 \u4e2a Sentinel \u8282\u70b9\u6545\u969c\u5219\u9700\u8981 3 \u4e2a\u8282\u70b9\u7684\u96c6\u7fa4\uff0c\u5141\u8bb8 2 \u4e2a\u8282\u70b9\u6545\u969c\u5219\u9700\u8981 5 \u4e2a\u8282\u70b9\u96c6\u7fa4"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u5982\u4f55\u83b7\u53d6\u54e8\u5175\u8282\u70b9\u7684\u534a\u6570\u6570\u91cf"}),"\uff1f"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5ba2\u89c2\u4e0b\u7ebf\u662f\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u7684\u6570\u91cf\uff0c\u8fbe\u5230  quorum \u5c31\u5ba2\u89c2\u4e0b\u7ebf"}),"\n",(0,i.jsx)(e.li,{children:"\u54e8\u5175\u6570\u91cf\u662f\u901a\u8fc7\u4e3b\u8282\u70b9\u662f\u5b9e\u4f8b\u7ed3\u6784\u4e2d\uff0c\u4fdd\u5b58\u7740\u76d1\u89c6\u8be5\u4e3b\u8282\u70b9\u7684\u6240\u6709\u54e8\u5175\u4fe1\u606f\uff0c\u4ece\u800c\u83b7\u53d6\u5f97\u5230"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u6545\u969c\u8f6c\u79fb",children:"\u6545\u969c\u8f6c\u79fb"}),"\n",(0,i.jsx)(e.h4,{id:"\u6267\u884c\u6d41\u7a0b-2",children:"\u6267\u884c\u6d41\u7a0b"}),"\n",(0,i.jsx)(e.p,{children:"\u9886\u5934 Sentinel \u5c06\u5bf9\u5df2\u4e0b\u7ebf\u7684\u4e3b\u670d\u52a1\u5668\u6267\u884c\u6545\u969c\u8f6c\u79fb\u64cd\u4f5c\uff0c\u8be5\u64cd\u4f5c\u5305\u542b\u4ee5\u4e0b\u4e09\u4e2a\u6b65\u9aa4"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u4ece\u4e0b\u7ebf\u4e3b\u670d\u52a1\u5668\u5c5e\u4e0b\u7684\u6240\u6709\u4ece\u670d\u52a1\u5668\u91cc\u9762\uff0c\u6311\u9009\u51fa\u4e00\u4e2a\u4ece\u670d\u52a1\u5668\uff0c\u6267\u884c ",(0,i.jsx)(e.code,{children:"SLAVEOF no one"}),"\uff0c\u5c06\u4ece\u670d\u52a1\u5668\u5347\u7ea7\u4e3a\u4e3b\u670d\u52a1\u5668"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5728\u53d1\u9001 SLAVEOF no one \u547d\u4ee4\u540e\uff0c\u9886\u5934 Sentinel \u4f1a\u4ee5",(0,i.jsx)(e.strong,{children:"\u6bcf\u79d2\u4e00\u6b21\u7684\u9891\u7387"}),"\uff08\u4e00\u822c\u662f 10s/\u6b21\uff09\u5411\u88ab\u5347\u7ea7\u7684\u4ece\u670d\u52a1\u5668\u53d1\u9001 INFO \u547d\u4ee4\uff0c\u89c2\u5bdf\u547d\u4ee4\u56de\u590d\u4e2d\u7684\u89d2\u8272\u4fe1\u606f\uff0c\u5f53\u88ab\u5347\u7ea7\u670d\u52a1\u5668\u7684 role \u4ece slave \u53d8\u4e3a master \u65f6\uff0c\u8bf4\u660e\u4ece\u670d\u52a1\u5668\u5df2\u7ecf\u987a\u5229\u5347\u7ea7\u4e3a\u4e3b\u670d\u52a1\u5668"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5c06\u5df2\u4e0b\u7ebf\u7684\u4e3b\u670d\u52a1\u5668\u7684\u6240\u6709\u4ece\u670d\u52a1\u5668\u6539\u4e3a\u590d\u5236\u65b0\u7684\u4e3b\u670d\u52a1\u5668\uff0c\u901a\u8fc7\u5411\u4ece\u670d\u52a1\u5668\u53d1\u9001 SLAVEOF \u547d\u4ee4\u5b9e\u73b0"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5c06\u5df2\u7ecf\u4e0b\u7ebf\u7684\u4e3b\u670d\u52a1\u5668\u8bbe\u7f6e\u4e3a\u65b0\u7684\u4e3b\u670d\u52a1\u5668\u7684\u4ece\u670d\u52a1\u5668\uff0c\u8bbe\u7f6e\u662f\u4fdd\u5b58\u5728\u670d\u52a1\u5668\u5bf9\u5e94\u7684\u5b9e\u4f8b\u7ed3\u6784\u4e2d\uff0c\u5f53\u65e7\u7684\u4e3b\u670d\u52a1\u5668\u91cd\u65b0\u4e0a\u7ebf\u65f6\uff0cSentinel \u5c31\u4f1a\u5411\u5b83\u53d1\u9001 SLAVEOF \u547d\u4ee4\uff0c\u6210\u4e3a\u65b0\u7684\u4e3b\u670d\u52a1\u5668\u7684\u4ece\u670d\u52a1\u5668"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u793a\u4f8b\uff1asever1 \u662f\u4e3b\uff0csever2\u3001sever3\u3001sever4 \u662f\u4ece\u670d\u52a1\u5668\uff0csever1 \u6545\u969c\u540e\u9009\u4e2d sever2 \u5347\u7ea7"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(23590).A+"",width:"1374",height:"529"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u9009\u62e9\u7b97\u6cd5",children:"\u9009\u62e9\u7b97\u6cd5"}),"\n",(0,i.jsxs)(e.p,{children:["\u9886\u5934 Sentinel \u4f1a\u5c06\u5df2\u4e0b\u7ebf\u4e3b\u670d\u52a1\u5668\u7684\u6240\u6709\u4ece\u670d\u52a1\u5668\u4fdd\u5b58\u5230\u4e00\u4e2a\u5217\u8868\u91cc\uff0c\u7136\u540e\u6309\u7167\u4ee5\u4e0b\u89c4\u5219\u5bf9\u5217\u8868\u8fdb\u884c\u8fc7\u6ee4\uff0c\u6700\u540e\u6311\u9009\u51fa\u4e00\u4e2a",(0,i.jsx)(e.strong,{children:"\u72b6\u6001\u826f\u597d\u3001\u6570\u636e\u5b8c\u6574"}),"\u7684\u4ece\u670d\u52a1\u5668"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u5217\u8868\u4e2d\u6240\u6709\u5904\u4e8e\u4e0b\u7ebf\u6216\u8005\u65ad\u7ebf\u72b6\u6001\u7684\u4ece\u670d\u52a1\u5668\uff0c\u4fdd\u8bc1\u5217\u8868\u4e2d\u7684\u4ece\u670d\u52a1\u5668\u90fd\u662f\u6b63\u5e38\u5728\u7ebf\u7684"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u5217\u8868\u4e2d\u6240\u6709\u6700\u8fd1\u4e94\u79d2\u5185\u6ca1\u6709\u56de\u590d\u8fc7\u9886\u5934 Sentinel \u7684 INFO \u547d\u4ee4\u7684\u4ece\u670d\u52a1\u5668\uff0c\u4fdd\u8bc1\u5217\u8868\u4e2d\u7684\u4ece\u670d\u52a1\u5668\u6700\u8fd1\u6210\u529f\u8fdb\u884c\u8fc7\u901a\u4fe1"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5220\u9664\u6240\u6709\u4e0e\u5df2\u4e0b\u7ebf\u4e3b\u670d\u52a1\u5668\u8fde\u63a5\u65ad\u5f00\u8d85\u8fc7 ",(0,i.jsx)(e.code,{children:"down-after-milliseconds * 10"})," \u6beb\u79d2\u7684\u4ece\u670d\u52a1\u5668\uff0c\u4fdd\u8bc1\u5217\u8868\u4e2d\u5269\u4f59\u7684\u4ece\u670d\u52a1\u5668\u90fd\u6ca1\u6709\u8fc7\u65e9\u5730\u4e0e\u4e3b\u670d\u52a1\u5668\u65ad\u5f00\u8fde\u63a5\uff0c\u4fdd\u5b58\u7684\u6570\u636e\u90fd\u662f\u6bd4\u8f83\u65b0\u7684"]}),"\n",(0,i.jsx)(e.p,{children:"down-after-milliseconds \u65f6\u95f4\u7528\u6765\u5224\u65ad\u662f\u5426\u4e3b\u89c2\u4e0b\u7ebf\uff0c\u5176\u4f59\u7684\u65f6\u95f4\u5b8c\u5168\u53ef\u4ee5\u5b8c\u6210\u5ba2\u89c2\u4e0b\u7ebf\u548c\u9886\u5934\u9009\u4e3e"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u6839\u636e\u4ece\u670d\u52a1\u5668\u7684\u4f18\u5148\u7ea7\uff0c\u5bf9\u5217\u8868\u4e2d\u5269\u4f59\u7684\u4ece\u670d\u52a1\u5668\u8fdb\u884c\u6392\u5e8f\uff0c\u5e76\u9009\u51fa\u5176\u4e2d",(0,i.jsx)(e.strong,{children:"\u4f18\u5148\u7ea7\u6700\u9ad8"}),"\u7684\u4ece\u670d\u52a1\u5668"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u6709\u591a\u4e2a\u5177\u6709\u76f8\u540c\u6700\u9ad8\u4f18\u5148\u7ea7\u7684\u4ece\u670d\u52a1\u5668\uff0c\u9886\u5934 Sentinel \u5c06\u5bf9\u8fd9\u4e9b\u76f8\u540c\u4f18\u5148\u7ea7\u7684\u670d\u52a1\u5668\u6309\u7167\u590d\u5236\u504f\u79fb\u91cf\u8fdb\u884c\u6392\u5e8f\uff0c\u9009\u51fa\u5176\u4e2d\u504f\u79fb\u91cf\u6700\u5927\u7684\u4ece\u670d\u52a1\u5668\uff0c\u4e5f\u5c31\u662f\u4fdd\u5b58\u7740\u6700\u65b0\u6570\u636e\u7684\u4ece\u670d\u52a1\u5668"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u8fd8\u6ca1\u9009\u51fa\u6765\uff0c\u5c31\u6309\u7167\u8fd0\u884c ID \u5bf9\u8fd9\u4e9b\u4ece\u670d\u52a1\u5668\u8fdb\u884c\u6392\u5e8f\uff0c\u5e76\u9009\u51fa\u5176\u4e2d\u8fd0\u884c ID \u6700\u5c0f\u7684\u4ece\u670d\u52a1\u5668"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u96c6\u7fa4\u6a21\u5f0f",children:"\u96c6\u7fa4\u6a21\u5f0f"}),"\n",(0,i.jsx)(e.h3,{id:"\u96c6\u7fa4\u8282\u70b9",children:"\u96c6\u7fa4\u8282\u70b9"}),"\n",(0,i.jsx)(e.h4,{id:"\u8282\u70b9\u6982\u8ff0",children:"\u8282\u70b9\u6982\u8ff0"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u96c6\u7fa4\u662f Redis \u63d0\u4f9b\u7684\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u65b9\u6848\uff0c\u96c6\u7fa4\u901a\u8fc7\u5206\u7247\uff08sharding\uff09\u6765\u8fdb\u884c\u6570\u636e\u5171\u4eab\uff0c \u5e76\u63d0\u4f9b\u590d\u5236\u548c\u6545\u969c\u8f6c\u79fb\u529f\u80fd\uff0c\u4e00\u4e2a Redis \u96c6\u7fa4\u901a\u5e38\u7531\u591a\u4e2a\u8282\u70b9\uff08node\uff09\u7ec4\u6210\uff0c\u5c06\u5404\u4e2a\u72ec\u7acb\u7684\u8282\u70b9\u8fde\u63a5\u8d77\u6765\uff0c\u6784\u6210\u4e00\u4e2a\u5305\u542b\u591a\u8282\u70b9\u7684\u96c6\u7fa4"}),"\n",(0,i.jsxs)(e.p,{children:["\u4e00\u4e2a\u8282\u70b9\u5c31\u662f\u4e00\u4e2a",(0,i.jsx)(e.strong,{children:"\u8fd0\u884c\u5728\u96c6\u7fa4\u6a21\u5f0f\u4e0b\u7684 Redis \u670d\u52a1\u5668"}),"\uff0cRedis \u5728\u542f\u52a8\u65f6\u4f1a\u6839\u636e\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 ",(0,i.jsx)(e.code,{children:"cluster-enabled"})," \u914d\u7f6e\u9009\u9879\u662f\u5426\u4e3a yes \u6765\u51b3\u5b9a\u662f\u5426\u5f00\u542f\u670d\u52a1\u5668\u7684\u96c6\u7fa4\u6a21\u5f0f"]}),"\n",(0,i.jsx)(e.p,{children:"\u8282\u70b9\u4f1a\u7ee7\u7eed\u4f7f\u7528\u6240\u6709\u5728\u5355\u673a\u6a21\u5f0f\u4e2d\u4f7f\u7528\u7684\u670d\u52a1\u5668\u7ec4\u4ef6\uff0c\u4f7f\u7528 redisServer \u7ed3\u6784\u6765\u4fdd\u5b58\u670d\u52a1\u5668\u7684\u72b6\u6001\uff0c\u4f7f\u7528 redisClient \u7ed3\u6784\u6765\u4fdd\u5b58\u5ba2\u6237\u7aef\u7684\u72b6\u6001\uff0c\u4e5f\u6709\u96c6\u7fa4\u7279\u6709\u7684\u6570\u636e\u7ed3\u6784"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(4780).A+"",width:"1087",height:"376"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6570\u636e\u7ed3\u6784-3",children:"\u6570\u636e\u7ed3\u6784"}),"\n",(0,i.jsx)(e.p,{children:"\u6bcf\u4e2a\u8282\u70b9\u90fd\u4fdd\u5b58\u7740\u4e00\u4e2a\u96c6\u7fa4\u72b6\u6001 clusterState \u7ed3\u6784\uff0c\u8fd9\u4e2a\u7ed3\u6784\u8bb0\u5f55\u4e86\u5728\u5f53\u524d\u8282\u70b9\u7684\u89c6\u89d2\u4e0b\uff0c\u96c6\u7fa4\u76ee\u524d\u6240\u5904\u7684\u72b6\u6001"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct clusterState {\n    // \u6307\u5411\u5f53\u524d\u8282\u70b9\u7684\u6307\u9488\n\tclusterNode *myself;\n    \n\t// \u96c6\u7fa4\u5f53\u524d\u7684\u914d\u7f6e\u7eaa\u5143\uff0c\u7528\u4e8e\u5b9e\u73b0\u6545\u969c\u8f6c\u79fb\n\tuint64_t currentEpoch;\n    \n\t// \u96c6\u7fa4\u5f53\u524d\u7684\u72b6\u6001\uff0c\u662f\u5728\u7ebf\u8fd8\u662f\u4e0b\u7ebf\n\tint state;\n    \n\t// \u96c6\u7fa4\u4e2d\u81f3\u5c11\u5904\u7406\u7740\u4e00\u4e2a\u69fd\u7684\uff08\u4e3b\uff09\u8282\u70b9\u7684\u6570\u91cf\uff0c\u4e3a0\u8868\u793a\u96c6\u7fa4\u76ee\u524d\u6ca1\u6709\u4efb\u4f55\u8282\u70b9\u5728\u5904\u7406\u69fd\n    // \u3010\u9009\u4e3e\u65f6\u6295\u7968\u6570\u91cf\u8d85\u8fc7\u534a\u6570\uff0c\u4ece\u8fd9\u91cc\u83b7\u53d6\u7684\u3011\n\tint size;\n\n    // \u96c6\u7fa4\u8282\u70b9\u540d\u5355\uff08\u5305\u62ec myself \u8282\u70b9\uff09\uff0c\u5b57\u5178\u7684\u952e\u4e3a\u8282\u70b9\u7684\u540d\u5b57\uff0c\u5b57\u5178\u7684\u503c\u4e3a\u8282\u70b9\u5bf9\u5e94\u7684clusterNode\u7ed3\u6784 \n    dict *nodes;\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6bcf\u4e2a\u8282\u70b9\u90fd\u4f1a\u4f7f\u7528 clusterNode \u7ed3\u6784\u8bb0\u5f55\u5f53\u524d\u72b6\u6001\uff0c\u5e76\u4e3a\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u5176\u4ed6\u8282\u70b9\uff08\u5305\u62ec\u4e3b\u8282\u70b9\u548c\u4ece\u8282\u70b9\uff09\u90fd\u521b\u5efa\u4e00\u4e2a\u76f8\u5e94\u7684 clusterNode \u7ed3\u6784\uff0c\u4ee5\u6b64\u6765\u8bb0\u5f55\u5176\u4ed6\u8282\u70b9\u7684\u72b6\u6001"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct clusterNode {\n    // \u521b\u5efa\u8282\u70b9\u7684\u65f6\u95f4\n    mstime_t ctime;\n    \n    // \u8282\u70b9\u7684\u540d\u5b57\uff0c\u7531 40 \u4e2a\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u7ec4\u6210\n    char name[REDIS_CLUSTER_NAMELEN];\n    \n    // \u8282\u70b9\u6807\u8bc6\uff0c\u4f7f\u7528\u5404\u79cd\u4e0d\u540c\u7684\u6807\u8bc6\u503c\u8bb0\u5f55\u8282\u70b9\u7684\u89d2\u8272\uff08\u6bd4\u5982\u4e3b\u8282\u70b9\u6216\u8005\u4ece\u8282\u70b9\uff09\u4ee5\u53ca\u8282\u70b9\u76ee\u524d\u6240\u5904\u7684\u72b6\u6001\uff08\u6bd4\u5982\u5728\u7ebf\u6216\u8005\u4e0b\u7ebf\uff09\n    int flags;\n    \n    // \u8282\u70b9\u5f53\u524d\u7684\u914d\u7f6e\u7eaa\u5143\uff0c\u7528\u4e8e\u5b9e\u73b0\u6545\u969c\u8f6c\u79fb\n    uint64_t configEpoch;\n    \n    // \u8282\u70b9\u7684IP\u5730\u5740\n    char ip[REDIS_IP_STR_LEN];\n    \n    // \u8282\u70b9\u7684\u7aef\u53e3\u53f7\n    int port;\n    \n    // \u4fdd\u5b58\u8fde\u63a5\u8282\u70b9\u6240\u9700\u7684\u6709\u5173\u4fe1\u606f\n    clusterLink *link;\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"clusterNode \u7ed3\u6784\u7684 link \u5c5e\u6027\u662f\u4e00\u4e2a clusterLink \u7ed3\u6784\uff0c\u8be5\u7ed3\u6784\u4fdd\u5b58\u4e86\u8fde\u63a5\u8282\u70b9\u6240\u9700\u7684\u6709\u5173\u4fe1\u606f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct clusterLink {\n    // \u8fde\u63a5\u7684\u521b\u5efa\u65f6\u95f4 \n    mstime_t ctime;\n    \n\t// TCP\u5957\u63a5\u5b57\u63cf\u8ff0\u7b26\n\tint fd;\n    \n\t// \u8f93\u51fa\u7f13\u51b2\u533a\uff0c\u4fdd\u5b58\u7740\u7b49\u5f85\u53d1\u9001\u7ed9\u5176\u4ed6\u8282\u70b9\u7684\u6d88\u606f(message)\u3002 \n    sds sndbuf;\n    \n\t// \u8f93\u5165\u7f13\u51b2\u533a\uff0c\u4fdd\u5b58\u7740\u4ece\u5176\u4ed6\u8282\u70b9\u63a5\u6536\u5230\u7684\u6d88\u606f\u3002\n\tsds rcvbuf;\n    \n\t// \u4e0e\u8fd9\u4e2a\u8fde\u63a5\u76f8\u5173\u8054\u7684\u8282\u70b9\uff0c\u5982\u679c\u6ca1\u6709\u7684\u8bdd\u5c31\u4e3aNULL\n\tstruct clusterNode *node; \n}\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"redisClient \u7ed3\u6784\u4e2d\u7684\u5957\u63a5\u5b87\u548c\u7f13\u51b2\u533a\u662f\u7528\u4e8e\u8fde\u63a5\u5ba2\u6237\u7aef\u7684"}),"\n",(0,i.jsx)(e.li,{children:"clusterLink \u7ed3\u6784\u4e2d\u7684\u5957\u63a5\u5b87\u548c\u7f13\u51b2\u533a\u5219\u662f\u7528\u4e8e\u8fde\u63a5\u8282\u70b9\u7684"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"meet",children:"MEET"}),"\n",(0,i.jsx)(e.p,{children:"CLUSTER MEET \u547d\u4ee4\u7528\u6765\u5c06 ip \u548c port \u6240\u6307\u5b9a\u7684\u8282\u70b9\u6dfb\u52a0\u5230\u63a5\u53d7\u547d\u4ee4\u7684\u8282\u70b9\u6240\u5728\u7684\u96c6\u7fa4\u4e2d"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"CLUSTER MEET <ip> <port> \n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5047\u8bbe\u5411\u8282\u70b9 A \u53d1\u9001 CLUSTER MEET \u547d\u4ee4\uff0c\u8ba9\u8282\u70b9 A \u5c06\u53e6\u4e00\u4e2a\u8282\u70b9 B \u6dfb\u52a0\u5230\u8282\u70b9 A \u5f53\u524d\u6240\u5728\u7684\u96c6\u7fa4\u91cc\uff0c\u6536\u5230\u547d\u4ee4\u7684\u8282\u70b9 A \u5c06\u4e0e\u6839\u636e ip \u548c port \u5411\u8282\u70b9 B \u8fdb\u884c\u63e1\u624b\uff08handshake\uff09\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u8282\u70b9 A \u4f1a\u4e3a\u8282\u70b9 B \u521b\u5efa\u4e00\u4e2a clusterNode \u7ed3\u6784\uff0c\u5e76\u5c06\u8be5\u7ed3\u6784\u6dfb\u52a0\u5230\u81ea\u5df1\u7684 clusterState.nodes \u5b57\u5178\u91cc\uff0c\u7136\u540e\u8282\u70b9 A \u5411\u8282\u70b9 B ",(0,i.jsx)(e.strong,{children:"\u53d1\u9001 MEET \u6d88\u606f"}),"\uff08message\uff09"]}),"\n",(0,i.jsxs)(e.li,{children:["\u8282\u70b9 B \u6536\u5230 MEET \u6d88\u606f\u540e\uff0c\u8282\u70b9 B \u4f1a\u4e3a\u8282\u70b9 A \u521b\u5efa\u4e00\u4e2a clusterNode \u7ed3\u6784\uff0c\u5e76\u5c06\u8be5\u7ed3\u6784\u6dfb\u52a0\u5230\u81ea\u5df1\u7684 clusterState.nodes \u5b57\u5178\u91cc\uff0c\u4e4b\u540e\u8282\u70b9 B \u5c06\u5411\u8282\u70b9 A ",(0,i.jsx)(e.strong,{children:"\u8fd4\u56de\u4e00\u6761 PONG \u6d88\u606f"})]}),"\n",(0,i.jsxs)(e.li,{children:["\u8282\u70b9 A \u6536\u5230 PONG \u6d88\u606f\u540e\uff0c\u4ee3\u8868\u8282\u70b9 A \u53ef\u4ee5\u77e5\u9053\u8282\u70b9 B \u5df2\u7ecf\u6210\u529f\u5730\u63a5\u6536\u5230\u4e86\u81ea\u5df2\u53d1\u9001\u7684 MEET \u6d88\u606f\uff0c\u6b64\u65f6\u8282\u70b9 A \u5c06\u5411\u8282\u70b9 B ",(0,i.jsx)(e.strong,{children:"\u8fd4\u56de\u4e00\u6761 PING \u6d88\u606f"})]}),"\n",(0,i.jsx)(e.li,{children:"\u8282\u70b9 B \u6536\u5230 PING \u6d88\u606f\u540e\uff0c \u4ee3\u8868\u8282\u70b9 B \u53ef\u4ee5\u77e5\u9053\u8282\u70b9 A \u5df2\u7ecf\u6210\u529f\u5730\u63a5\u6536\u5230\u4e86\u81ea\u5df1\u8fd4\u56de\u7684 PONG \u6d88\u606f\uff0c\u63e1\u624b\u5b8c\u6210"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(81555).A+"",width:"790",height:"215"})}),"\n",(0,i.jsx)(e.p,{children:"\u8282\u70b9 A \u4f1a\u5c06\u8282\u70b9 B \u7684\u4fe1\u606f\u901a\u8fc7 Gossip \u534f\u8bae\u4f20\u64ad\u7ed9\u96c6\u7fa4\u4e2d\u7684\u5176\u4ed6\u8282\u70b9\uff0c\u8ba9\u5176\u4ed6\u8282\u70b9\u4e5f\u4e0e\u8282\u70b9 B \u8fdb\u884c\u63e1\u624b\uff0c\u6700\u7ec8\u7ecf\u8fc7\u4e00\u6bb5\u65f6\u95f4\u4e4b\u540e\uff0c\u8282\u70b9 B \u4f1a\u88ab\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u8282\u70b9\u8ba4\u8bc6"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u69fd\u6307\u6d3e",children:"\u69fd\u6307\u6d3e"}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u64cd\u4f5c-6",children:"\u57fa\u672c\u64cd\u4f5c"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u96c6\u7fa4\u901a\u8fc7\u5206\u7247\u7684\u65b9\u5f0f\u6765\u4fdd\u5b58\u6570\u636e\u5e93\u4e2d\u7684\u952e\u503c\u5bf9\uff0c\u96c6\u7fa4\u7684\u6574\u4e2a\u6570\u636e\u5e93\u88ab\u5206\u4e3a 16384 \u4e2a\u69fd\uff08slot\uff09\uff0c\u6570\u636e\u5e93\u4e2d\u7684\u6bcf\u4e2a\u952e\u90fd\u5c5e\u4e8e 16384 \u4e2a\u69fd\u4e2d\u7684\u4e00\u4e2a\uff0c\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u8282\u70b9\u53ef\u4ee5\u5904\u7406 0 \u4e2a\u6216\u6700\u591a 16384 \u4e2a\u69fd\uff08",(0,i.jsx)(e.strong,{children:"\u6bcf\u4e2a\u4e3b\u8282\u70b9\u5b58\u50a8\u7684\u6570\u636e\u5e76\u4e0d\u4e00\u6837"}),"\uff09"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5f53\u6570\u636e\u5e93\u4e2d\u7684 16384 \u4e2a\u69fd\u90fd\u6709\u8282\u70b9\u5728\u5904\u7406\u65f6\uff0c\u96c6\u7fa4\u5904\u4e8e\u4e0a\u7ebf\u72b6\u6001\uff08ok\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u6570\u636e\u5e93\u4e2d\u6709\u4efb\u4f55\u4e00\u4e2a\u69fd\u5f97\u5230\u5904\u7406\uff0c\u90a3\u4e48\u96c6\u7fa4\u5904\u4e8e\u4e0b\u7ebf\u72b6\u6001\uff08fail\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u5411\u8282\u70b9\u53d1\u9001 CLUSTER ADDSLOTS \u547d\u4ee4\uff0c\u53ef\u4ee5\u5c06\u4e00\u4e2a\u6216\u591a\u4e2a\u69fd\u6307\u6d3e\uff08assign\uff09\u7ed9\u8282\u70b9\u8d1f\u8d23"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"CLUSTER ADDSLOTS <slot> [slot ... ] \n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"127.0.0.1:7000> CLUSTER ADDSLOTS 0 1 2 3 4 ... 5000 # \u5c06\u69fd0\u81f3\u69fd5000\u6307\u6d3e\u7ed9\u8282\u70b97000\u8d1f\u8d23\nOK \n"})}),"\n",(0,i.jsx)(e.p,{children:"\u547d\u4ee4\u6267\u884c\u7ec6\u8282\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u547d\u4ee4\u53c2\u6570\u4e2d\u6709\u4e00\u4e2a\u69fd\u5df2\u7ecf\u88ab\u6307\u6d3e\u7ed9\u4e86\u67d0\u4e2a\u8282\u70b9\uff0c\u90a3\u4e48\u4f1a\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u9519\u8bef\uff0c\u5e76\u7ec8\u6b62\u547d\u4ee4\u6267\u884c"}),"\n",(0,i.jsx)(e.li,{children:"\u5c06 slots \u6570\u7ec4\u4e2d\u7684\u7d22\u5f15 i \u4e0a\u7684\u4e8c\u8fdb\u5236\u4f4d\u8bbe\u7f6e\u4e3a 1\uff0c\u5c31\u4ee3\u8868\u6307\u6d3e\u6210\u529f"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u8282\u70b9\u6307\u6d3e",children:"\u8282\u70b9\u6307\u6d3e"}),"\n",(0,i.jsx)(e.p,{children:"clusterNode \u7ed3\u6784\u7684 slots \u5c5e\u6027\u548c numslot \u5c5e\u6027\u8bb0\u5f55\u4e86\u8282\u70b9\u8d1f\u8d23\u5904\u7406\u54ea\u4e9b\u69fd\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct clusterNode {\n    // \u5904\u7406\u4fe1\u606f\uff0c\u4e00\u5b57\u8282\u7b49\u4e8e 8 \u4f4d\n    unsigned char slots[l6384/8];\n    // \u8bb0\u5f55\u8282\u70b9\u8d1f\u8d23\u5904\u7406\u7684\u69fd\u7684\u6570\u91cf\uff0c\u5c31\u662f slots \u6570\u7ec4\u4e2d\u503c\u4e3a 1 \u7684\u4e8c\u8fdb\u5236\u4f4d\u6570\u91cf\n    int numslots;\n}\n"})}),"\n",(0,i.jsxs)(e.p,{children:["slots \u662f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u4f4d\u6570\u7ec4\uff08bit array\uff09\uff0c\u957f\u5ea6\u4e3a ",(0,i.jsx)(e.code,{children:"16384/8 = 2048"})," \u4e2a\u5b57\u8282\uff0c\u5305\u542b 16384 \u4e2a\u4e8c\u8fdb\u5236\u4f4d\uff0cRedis \u4ee5 0 \u4e3a\u8d77\u59cb\u7d22\u5f15\uff0c16383 \u4e3a\u7ec8\u6b62\u7d22\u5f15\uff0c\u5bf9 slots \u6570\u7ec4\u7684 16384 \u4e2a\u4e8c\u8fdb\u5236\u4f4d\u8fdb\u884c\u7f16\u53f7\uff0c\u5e76\u6839\u636e\u7d22\u5f15 i \u4e0a\u7684\u4e8c\u8fdb\u5236\u4f4d\u7684\u503c\u6765\u5224\u65ad\u8282\u70b9\u662f\u5426\u8d1f\u8d23\u5904\u7406\u69fd i\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5728\u7d22\u5f15 i \u4e0a\u7684\u4e8c\u8fdb\u5236\u4f4d\u7684\u503c\u4e3a 1\uff0c\u90a3\u4e48\u8868\u793a\u8282\u70b9\u8d1f\u8d23\u5904\u7406\u69fd i"}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u7d22\u5f15 i \u4e0a\u7684\u4e8c\u8fdb\u5236\u4f4d\u7684\u503c\u4e3a 0\uff0c\u90a3\u4e48\u8868\u793a\u8282\u70b9\u4e0d\u8d1f\u8d23\u5904\u7406\u69fd i"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(48824).A+"",width:"1257",height:"173"})}),"\n",(0,i.jsxs)(e.p,{children:["\u53d6\u51fa\u548c\u8bbe\u7f6e slots \u6570\u7ec4\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u4f4d\u7684\u503c\u7684",(0,i.jsx)(e.strong,{children:"\u590d\u6742\u5ea6\u4ec5\u4e3a O(1)"}),"\uff0c\u6240\u4ee5\u5bf9\u4e8e\u4e00\u4e2a\u7ed9\u5b9a\u8282\u70b9\u7684 slots \u6570\u7ec4\u6765\u8bf4\uff0c\u68c0\u67e5\u8282\u70b9\u662f\u5426\u8d1f\u8d23\u5904\u7406\u67d0\u4e2a\u69fd\u6216\u8005\u5c06\u67d0\u4e2a\u69fd\u6307\u6d3e\u7ed9\u8282\u70b9\u8d1f\u8d23\uff0c\u8fd9\u4e24\u4e2a\u52a8\u4f5c\u7684\u590d\u6742\u5ea6\u90fd\u662f O(1)"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u4f20\u64ad\u8282\u70b9\u7684\u69fd\u6307\u6d3e\u4fe1\u606f"}),"\uff1a\u4e00\u4e2a\u8282\u70b9\u9664\u4e86\u4f1a\u5c06\u81ea\u5df1\u8d1f\u8d23\u5904\u7406\u7684\u69fd\u8bb0\u5f55\u5728 clusterNode \u4e2d\uff0c\u8fd8\u4f1a\u5c06\u81ea\u5df1\u7684 slots \u6570\u7ec4\u901a\u8fc7\u6d88\u606f\u53d1\u9001\u7ed9\u96c6\u7fa4\u4e2d\u7684\u5176\u4ed6\u8282\u70b9\uff0c\u6bcf\u4e2a\u63a5\u6536\u5230 slots \u6570\u7ec4\u7684\u8282\u70b9\u90fd\u4f1a\u5c06\u6570\u7ec4\u4fdd\u5b58\u5230\u76f8\u5e94\u8282\u70b9\u7684 clusterNode \u7ed3\u6784\u91cc\u9762\uff0c\u56e0\u6b64\u96c6\u7fa4\u4e2d\u7684",(0,i.jsx)(e.strong,{children:"\u6bcf\u4e2a\u8282\u70b9"}),"\u90fd\u4f1a\u77e5\u9053\u6570\u636e\u5e93\u4e2d\u7684 16384 \u4e2a\u69fd\u5206\u522b\u88ab\u6307\u6d3e\u7ed9\u4e86\u96c6\u7fa4\u4e2d\u7684\u54ea\u4e9b\u8282\u70b9"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u96c6\u7fa4\u6307\u6d3e",children:"\u96c6\u7fa4\u6307\u6d3e"}),"\n",(0,i.jsx)(e.p,{children:"\u96c6\u7fa4\u72b6\u6001 clusterState \u7ed3\u6784\u4e2d\u7684 slots \u6570\u7ec4\u8bb0\u5f55\u4e86\u96c6\u7fa4\u4e2d\u6240\u6709 16384 \u4e2a\u69fd\u7684\u6307\u6d3e\u4fe1\u606f\uff0c\u6570\u7ec4\u6bcf\u4e00\u9879\u90fd\u662f\u4e00\u4e2a\u6307\u5411 clusterNode \u7684\u6307\u9488"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct clusterState {\n    // ...\n    clusterNode *slots[16384];\n}\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c slots[i] \u6307\u9488\u6307\u5411 NULL\uff0c\u90a3\u4e48\u8868\u793a\u69fd i \u5c1a\u672a\u6307\u6d3e\u7ed9\u4efb\u4f55\u8282\u70b9"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c slots[i] \u6307\u9488\u6307\u5411\u4e00\u4e2a clusterNode \u7ed3\u6784\uff0c\u90a3\u4e48\u8868\u793a\u69fd i \u5df2\u7ecf\u6307\u6d3e\u7ed9\u8be5\u8282\u70b9\u6240\u4ee3\u8868\u7684\u8282\u70b9"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u8be5\u8282\u70b9\uff0c\u7a0b\u5e8f\u68c0\u67e5\u69fd i \u662f\u5426\u5df2\u7ecf\u88ab\u6307\u6d3e\u6216\u8005\u53d6\u5f97\u8d1f\u8d23\u5904\u7406\u69fd i \u7684\u8282\u70b9\uff0c\u53ea\u9700\u8981\u8bbf\u95ee clusterState. slots[i] \u5373\u53ef\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4ec5\u4e3a O(1)"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u96c6\u7fa4\u6570\u636e",children:"\u96c6\u7fa4\u6570\u636e"}),"\n",(0,i.jsxs)(e.p,{children:["\u96c6\u7fa4\u8282\u70b9\u4fdd\u5b58\u952e\u503c\u5bf9\u4ee5\u53ca\u952e\u503c\u5bf9\u8fc7\u671f\u65f6\u95f4\u7684\u65b9\u5f0f\uff0c\u4e0e\u5355\u673a Redis \u670d\u52a1\u5668\u4fdd\u5b58\u952e\u503c\u5bf9\u4ee5\u53ca\u952e\u503c\u5bf9\u8fc7\u671f\u65f6\u95f4\u7684\u65b9\u5f0f\u5b8c\u5168\u76f8\u540c\uff0c\u4f46\u662f",(0,i.jsx)(e.strong,{children:"\u96c6\u7fa4\u8282\u70b9\u53ea\u80fd\u4f7f\u7528 0 \u53f7\u6570\u636e\u5e93"}),"\uff0c\u5355\u673a\u670d\u52a1\u5668\u53ef\u4ee5\u4efb\u610f\u4f7f\u7528"]}),"\n",(0,i.jsxs)(e.p,{children:["\u9664\u4e86\u5c06\u952e\u503c\u5bf9\u4fdd\u5b58\u5728\u6570\u636e\u5e93\u91cc\u9762\u4e4b\u5916\uff0c\u8282\u70b9\u8fd8\u4f1a\u7528 clusterState \u7ed3\u6784\u4e2d\u7684 slots_to_keys \u8df3\u8dc3\u8868\u6765",(0,i.jsx)(e.strong,{children:"\u4fdd\u5b58\u69fd\u548c\u952e\u4e4b\u95f4\u7684\u5173\u7cfb"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct clusterState {\n    // ...\n    zskiplist *slots_to_keys;\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"slots_to_keys \u8df3\u8dc3\u8868\u6bcf\u4e2a\u8282\u70b9\u7684\u5206\u503c\uff08score\uff09\u90fd\u662f\u4e00\u4e2a\u69fd\u53f7\uff0c\u800c\u6bcf\u4e2a\u8282\u70b9\u7684\u6210\u5458\uff08member\uff09\u90fd\u662f\u4e00\u4e2a\u6570\u636e\u5e93\u952e\uff08\u6309\u69fd\u53f7\u5347\u5e8f\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5f53\u8282\u70b9\u5f80\u6570\u636e\u5e93\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u952e\u503c\u5bf9\u65f6\uff0c\u8282\u70b9\u5c31\u4f1a\u5c06\u8fd9\u4e2a\u952e\u4ee5\u53ca\u952e\u7684\u69fd\u53f7\u5173\u8054\u5230 slots_to_keys \u8df3\u8dc3\u8868"}),"\n",(0,i.jsx)(e.li,{children:"\u5f53\u8282\u70b9\u5220\u9664\u6570\u636e\u5e93\u4e2d\u7684\u67d0\u4e2a\u952e\u503c\u5bf9\u65f6\uff0c\u8282\u70b9\u5c31\u4f1a\u5728 slots_to_keys \u8df3\u8dc3\u8868\u89e3\u9664\u88ab\u5220\u9664\u952e\u4e0e\u69fd\u53f7\u7684\u5173\u8054"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(33481).A+"",width:"1408",height:"494"})}),"\n",(0,i.jsxs)(e.p,{children:["\u901a\u8fc7\u5728 slots_to_keys \u8df3\u8dc3\u8868\u4e2d\u8bb0\u5f55\u5404\u4e2a\u6570\u636e\u5e93\u952e\u6240\u5c5e\u7684\u69fd\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5bf9\u5c5e\u4e8e\u67d0\u4e2a\u6216\u67d0\u4e9b\u69fd\u7684\u6240\u6709\u6570\u636e\u5e93\u952e\u8fdb\u884c\u6279\u91cf\u64cd\u4f5c\uff0c\u6bd4\u5982 ",(0,i.jsx)(e.code,{children:"CLUSTER GETKEYSINSLOT <slot> <count>"})," \u547d\u4ee4\u8fd4\u56de\u6700\u591a count \u4e2a\u5c5e\u4e8e\u69fd slot \u7684\u6570\u636e\u5e93\u952e\uff0c\u5c31\u662f\u901a\u8fc7\u8be5\u8df3\u8868\u5b9e\u73b0"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u96c6\u7fa4\u547d\u4ee4",children:"\u96c6\u7fa4\u547d\u4ee4"}),"\n",(0,i.jsx)(e.h4,{id:"\u6267\u884c\u547d\u4ee4",children:"\u6267\u884c\u547d\u4ee4"}),"\n",(0,i.jsx)(e.p,{children:"\u96c6\u7fa4\u5904\u4e8e\u4e0a\u7ebf\u72b6\u6001\uff0c\u5ba2\u6237\u7aef\u5c31\u53ef\u4ee5\u5411\u96c6\u7fa4\u4e2d\u7684\u8282\u70b9\u53d1\u9001\u547d\u4ee4\uff0816384 \u4e2a\u69fd\u5168\u90e8\u6307\u6d3e\u5c31\u8fdb\u5165\u4e0a\u7ebf\u72b6\u6001\uff09"}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u5ba2\u6237\u7aef\u5411\u8282\u70b9\u53d1\u9001\u4e0e\u6570\u636e\u5e93\u952e\u6709\u5173\u7684\u547d\u4ee4\u65f6\uff0c\u63a5\u6536\u547d\u4ee4\u7684\u8282\u70b9\u4f1a\u8ba1\u7b97\u51fa\u547d\u4ee4\u8be5\u952e\u5c5e\u4e8e\u54ea\u4e2a\u69fd\uff0c\u5e76\u68c0\u67e5\u8fd9\u4e2a\u69fd\u662f\u5426\u6307\u6d3e\u7ed9\u4e86\u81ea\u5df1"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u952e\u6240\u5728\u7684\u69fd\u6b63\u597d\u5c31\u6307\u6d3e\u7ed9\u4e86\u5f53\u524d\u8282\u70b9\uff0c\u90a3\u4e48\u8282\u70b9\u76f4\u63a5\u6267\u884c\u8fd9\u4e2a\u547d\u4ee4"}),"\n",(0,i.jsx)(e.li,{children:"\u53cd\u4e4b\uff0c\u8282\u70b9\u4f1a\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u4e00\u4e2a MOVED \u9519\u8bef\uff0c\u6307\u5f15\u5ba2\u6237\u7aef\u8f6c\u5411\uff08redirect\uff09\u81f3\u6b63\u786e\u7684\u8282\u70b9\uff0c\u518d\u6b21\u53d1\u9001\u8be5\u547d\u4ee4"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u8ba1\u7b97\u952e\u5f52\u5c5e\u54ea\u4e2a\u69fd\u7684",(0,i.jsx)(e.strong,{children:"\u5bfb\u5740\u7b97\u6cd5"}),"\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"def slot_number(key): \t\t\t// CRC16(key) \u8bed\u53e5\u8ba1\u7b97\u952e key \u7684 CRC-16 \u6821\u9a8c\u548c\n\treturn CRC16(key) & 16383;\t// \u53d6\u6a21\uff0c\u5341\u8fdb\u5236\u5bf916384\u7684\u53d6\u4f59\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"CLUSTER KEYSLOT <key>"})," \u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u4e00\u4e2a\u7ed9\u5b9a\u952e\u5c5e\u4e8e\u54ea\u4e2a\u69fd\uff0c\u5e95\u5c42\u5b9e\u73b0\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"def CLUSTER_KEYSLOT(key):\n\t// \u8ba1\u7b97\u69fd\u53f7\n\tslot = slot_number(key);\n\t// \u5c06\u69fd\u53f7\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\n\treply_client(slot);\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5224\u65ad\u69fd\u662f\u5426\u7531\u5f53\u524d\u8282\u70b9\u8d1f\u8d23\u5904\u7406\uff1a\u5982\u679c clusterState.slots[i] \u4e0d\u7b49\u4e8e clusterState.myself\uff0c\u90a3\u4e48\u8bf4\u660e\u69fd i \u5e76\u975e\u7531\u5f53\u524d\u8282\u70b9\u8d1f\u8d23\uff0c\u8282\u70b9\u4f1a\u6839\u636e clusterState.slots[i] \u6307\u5411\u7684 clusterNode \u7ed3\u6784\u6240\u8bb0\u5f55\u7684\u8282\u70b9 IP \u548c\u7aef\u53e3\u53f7\uff0c\u5411\u5ba2\u6237\u7aef\u8fd4\u56de MOVED \u9519\u8bef"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"moved",children:"MOVED"}),"\n",(0,i.jsx)(e.p,{children:"MOVED \u9519\u8bef\u7684\u683c\u5f0f\u4e3a\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"MOVED <slot> <ip>:<port\uff1e\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u53c2\u6570 slot \u4e3a\u952e\u6240\u5728\u7684\u69fd\uff0cip \u548c port \u662f\u8d1f\u8d23\u5904\u7406\u69fd slot \u7684\u8282\u70b9\u7684 ip \u5730\u5740\u548c\u7aef\u53e3\u53f7"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"MOVED 12345 127.0.0.1:6380 # \u8868\u793a\u69fd 12345 \u6b63\u7531 IP\u5730\u5740\u4e3a 127.0.0.1, \u7aef\u53e3\u53f7\u4e3a 6380 \u7684\u8282\u70b9\u8d1f\u8d23\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u5ba2\u6237\u7aef\u63a5\u6536\u5230\u8282\u70b9\u8fd4\u56de\u7684 MOVED \u9519\u8bef\u65f6\uff0c\u5ba2\u6237\u7aef\u4f1a\u6839\u636e MOVED \u9519\u8bef\u4e2d\u63d0\u4f9b\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u53f7\uff0c\u8f6c\u81f3\u8d1f\u8d23\u5904\u7406\u69fd slot \u7684\u8282\u70b9\u91cd\u65b0\u53d1\u9001\u6267\u884c\u7684\u547d\u4ee4"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e00\u4e2a\u96c6\u7fa4\u5ba2\u6237\u7aef\u901a\u5e38\u4f1a\u4e0e\u96c6\u7fa4\u4e2d\u7684\u591a\u4e2a\u8282\u70b9\u521b\u5efa\u5957\u63a5\u5b57\u8fde\u63a5\uff0c\u8282\u70b9\u8f6c\u5411\u5b9e\u9645\u4e0a\u5c31\u662f\u6362\u4e00\u4e2a\u5957\u63a5\u5b57\u6765\u53d1\u9001\u547d\u4ee4"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u5ba2\u6237\u7aef\u5c1a\u672a\u4e0e\u8f6c\u5411\u7684\u8282\u70b9\u521b\u5efa\u5957\u63a5\u5b57\u8fde\u63a5\uff0c\u90a3\u4e48\u5ba2\u6237\u7aef\u4f1a\u5148\u6839\u636e IP \u5730\u5740\u548c\u7aef\u53e3\u53f7\u6765\u8fde\u63a5\u8282\u70b9\uff0c\u7136\u540e\u518d\u8fdb\u884c\u8f6c\u5411"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u96c6\u7fa4\u6a21\u5f0f\u7684 redis-cli \u5728\u63a5\u6536\u5230 MOVED \u9519\u8bef\u65f6\uff0c\u5e76\u4e0d\u4f1a\u6253\u5370\u51fa MOVED \u9519\u8bef\uff0c\u800c\u662f\u6839\u636e\u9519\u8bef",(0,i.jsx)(e.strong,{children:"\u81ea\u52a8\u8fdb\u884c\u8282\u70b9\u8f6c\u5411"}),"\uff0c\u5e76\u6253\u5370\u51fa\u8f6c\u5411\u4fe1\u606f\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'$ redis-cli -c -p 6379 \t#\u96c6\u7fa4\u6a21\u5f0f\n127.0.0.1:6379> SET msg "happy" \n-> Redirected to slot [6257] located at 127.0.0.1:6380\nOK \n\n127.0.0.1:6379> \n'})}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u5355\u673a\uff08stand alone\uff09\u6a21\u5f0f\u7684 redis-cli \u4f1a\u6253\u5370\u9519\u8bef\uff0c\u56e0\u4e3a\u5355\u673a\u6a21\u5f0f\u5ba2\u6237\u7aef\u4e0d\u6e05\u695a MOVED \u9519\u8bef\u7684\u4f5c\u7528\uff0c\u4e0d\u4f1a\u8fdb\u884c\u81ea\u52a8\u8f6c\u5411\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'$ redis-cli -c -p 6379 \t#\u96c6\u7fa4\u6a21\u5f0f\n127.0.0.1:6379> SET msg "happy" \n(error) MOVED 6257 127.0.0.1:6380\n\n127.0.0.1:6379>\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u91cd\u65b0\u5206\u7247",children:"\u91cd\u65b0\u5206\u7247"}),"\n",(0,i.jsx)(e.h4,{id:"\u5b9e\u73b0\u539f\u7406-2",children:"\u5b9e\u73b0\u539f\u7406"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u96c6\u7fa4\u7684\u91cd\u65b0\u5206\u7247\u64cd\u4f5c\u53ef\u4ee5\u5c06\u4efb\u610f\u6570\u91cf\u5df2\u7ecf\u6307\u6d3e\u7ed9\u67d0\u4e2a\u8282\u70b9\uff08\u6e90\u8282\u70b9\uff09\u7684\u69fd\u6539\u4e3a\u6307\u6d3e\u7ed9\u53e6\u4e00\u4e2a\u8282\u70b9\uff08\u76ee\u6807\u8282\u70b9\uff09\uff0c\u5e76\u4e14\u76f8\u5173\u69fd\u7684\u952e\u503c\u5bf9\u4e5f\u4f1a\u4ece\u6e90\u8282\u70b9\u88ab\u79fb\u52a8\u5230\u76ee\u6807\u8282\u70b9\uff0c\u8be5\u64cd\u4f5c\u662f\u53ef\u4ee5\u5728\u7ebf\uff08online\uff09\u8fdb\u884c\uff0c\u5728\u91cd\u65b0\u5206\u7247\u7684\u8fc7\u7a0b\u4e2d\u6e90\u8282\u70b9\u548c\u76ee\u6807\u8282\u70b9\u90fd\u53ef\u4ee5\u5904\u7406\u547d\u4ee4\u8bf7\u6c42"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u7684\u96c6\u7fa4\u7ba1\u7406\u8f6f\u4ef6 redis-trib \u8d1f\u8d23\u6267\u884c\u91cd\u65b0\u5206\u7247\u64cd\u4f5c\uff0credis-trib \u901a\u8fc7\u5411\u6e90\u8282\u70b9\u548c\u76ee\u6807\u8282\u70b9\u53d1\u9001\u547d\u4ee4\u6765\u8fdb\u884c\u91cd\u65b0\u5206\u7247\u64cd\u4f5c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5411\u76ee\u6807\u8282\u70b9\u53d1\u9001 ",(0,i.jsx)(e.code,{children:"CLUSTER SETSLOT <slot> IMPORTING <source_id>"})," \u547d\u4ee4\uff0c\u51c6\u5907\u597d\u4ece\u6e90\u8282\u70b9\u5bfc\u5165\u5c5e\u4e8e\u69fd slot \u7684\u952e\u503c\u5bf9"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5411\u6e90\u8282\u70b9\u53d1\u9001 ",(0,i.jsx)(e.code,{children:"CLUSTER SETSLOT <slot> MIGRATING <target_id>"})," \u547d\u4ee4\uff0c\u8ba9\u6e90\u8282\u70b9\u51c6\u5907\u597d\u5c06\u5c5e\u4e8e\u69fd slot \u7684\u952e\u503c\u5bf9\u8fc1\u79fb"]}),"\n",(0,i.jsxs)(e.li,{children:["redis-trib \u5411\u6e90\u8282\u70b9\u53d1\u9001 ",(0,i.jsx)(e.code,{children:"CLUSTER GETKEYSINSLOT <slot> <count>"})," \u547d\u4ee4\uff0c\u83b7\u5f97\u6700\u591a count \u4e2a\u5c5e\u4e8e\u69fd slot \u7684\u952e\u503c\u5bf9\u7684\u952e\u540d"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5bf9\u4e8e\u6bcf\u4e2a key\uff0credis-trib \u90fd\u5411\u6e90\u8282\u70b9\u53d1\u9001\u4e00\u4e2a ",(0,i.jsx)(e.code,{children:"MIGRATE <target_ip> <target_port> <key_name> 0 <timeout\uff1e"})," \u547d\u4ee4\uff0c\u5c06\u88ab\u9009\u4e2d\u7684\u952e",(0,i.jsx)(e.strong,{children:"\u539f\u5b50\u5730"}),"\u4ece\u6e90\u8282\u70b9\u8fc1\u79fb\u81f3\u76ee\u6807\u8282\u70b9"]}),"\n",(0,i.jsx)(e.li,{children:"\u91cd\u590d\u4e0a\u8ff0\u6b65\u9aa4\uff0c\u76f4\u5230\u6e90\u8282\u70b9\u4fdd\u5b58\u7684\u6240\u6709\u69fd slot \u7684\u952e\u503c\u5bf9\u90fd\u88ab\u8fc1\u79fb\u81f3\u76ee\u6807\u8282\u70b9\u4e3a\u6b62"}),"\n",(0,i.jsxs)(e.li,{children:["redis-trib \u5411\u96c6\u7fa4\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u8282\u70b9\u53d1\u9001 ",(0,i.jsx)(e.code,{children:"CLUSTER SETSLOT <slot> NODE <target _id>"})," \u547d\u4ee4\uff0c\u5c06\u69fd slot \u6307\u6d3e\u7ed9\u76ee\u6807\u8282\u70b9\uff0c\u8fd9\u4e00\u6307\u6d3e\u4fe1\u606f\u4f1a\u901a\u8fc7\u6d88\u606f\u4f20\u64ad\u81f3\u6574\u4e2a\u96c6\u7fa4\uff0c\u6700\u7ec8\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u8282\u70b9\u90fd\u76f4\u5230\u69fd slot \u5df2\u7ecf\u6307\u6d3e\u7ed9\u4e86\u76ee\u6807\u8282\u70b9"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(26962).A+"",width:"1276",height:"279"})}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u91cd\u65b0\u5206\u7247\u6d89\u53ca\u591a\u4e2a\u69fd\uff0c\u90a3\u4e48 redis-trib \u5c06\u5bf9\u6bcf\u4e2a\u7ed9\u5b9a\u7684\u69fd\u5206\u522b\u6267\u884c\u4e0a\u9762\u7ed9\u51fa\u7684\u6b65\u9aa4"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u547d\u4ee4\u539f\u7406",children:"\u547d\u4ee4\u539f\u7406"}),"\n",(0,i.jsx)(e.p,{children:"clusterState \u7ed3\u6784\u7684 importing_slots_from \u6570\u7ec4\u8bb0\u5f55\u4e86\u5f53\u524d\u8282\u70b9\u6b63\u5728\u4ece\u5176\u4ed6\u8282\u70b9\u5bfc\u5165\u7684\u69fd\uff0cmigrating_slots_to \u6570\u7ec4\u8bb0\u5f55\u4e86\u5f53\u524d\u8282\u70b9\u6b63\u5728\u8fc1\u79fb\u81f3\u5176\u4ed6\u8282\u70b9\u7684\u69fd\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct clusterState {\n    // \u5982\u679c importing_slots_from[i] \u7684\u503c\u4e0d\u4e3a NULL\uff0c\u800c\u662f\u6307\u5411\u4e00\u4e2a clusterNode \u7ed3\u6784\uff0c\n    // \u90a3\u4e48\u8868\u793a\u5f53\u524d\u8282\u70b9\u6b63\u5728\u4ece clusterNode \u6240\u4ee3\u8868\u7684\u8282\u70b9\u5bfc\u5165\u69fd i\n    clusterNode *importing_slots_from[16384];\n    \n    // \u8868\u793a\u5f53\u524d\u8282\u70b9\u6b63\u5728\u5c06\u69fd i \u8fc1\u79fb\u81f3 clusterNode \u6240\u4ee3\u8868\u7684\u8282\u70b9\n    clusterNode *migrating_slots_to[16384];\n}\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"CLUSTER SETSLOT <slot> IMPORTING <source_id>"})," \u547d\u4ee4\uff1a\u5c06\u76ee\u6807\u8282\u70b9 ",(0,i.jsx)(e.code,{children:"clusterState.importing_slots_from[slot]"})," \u7684\u503c\u8bbe\u7f6e\u4e3a  source_id \u6240\u4ee3\u8868\u8282\u70b9\u7684 clusterNode \u7ed3\u6784"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"CLUSTER SETSLOT <slot> MIGRATING <target_id>"})," \u547d\u4ee4\uff1a\u5c06\u6e90\u8282\u70b9 ",(0,i.jsx)(e.code,{children:"clusterState.migrating_slots_to[slot]"})," \u7684\u503c\u8bbe\u7f6e\u4e3atarget_id \u6240\u4ee3\u8868\u8282\u70b9\u7684 clusterNode \u7ed3\u6784"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"ask-\u9519\u8bef",children:"ASK \u9519\u8bef"}),"\n",(0,i.jsx)(e.p,{children:"\u91cd\u65b0\u5206\u7247\u671f\u95f4\uff0c\u6e90\u8282\u70b9\u5411\u76ee\u6807\u8282\u70b9\u8fc1\u79fb\u4e00\u4e2a\u69fd\u7684\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u51fa\u73b0\u88ab\u8fc1\u79fb\u69fd\u7684\u4e00\u90e8\u5206\u952e\u503c\u5bf9\u4fdd\u5b58\u5728\u6e90\u8282\u70b9\uff0c\u53e6\u4e00\u90e8\u5206\u4fdd\u5b58\u5728\u76ee\u6807\u8282\u70b9"}),"\n",(0,i.jsx)(e.p,{children:"\u5ba2\u6237\u7aef\u5411\u6e90\u8282\u70b9\u53d1\u9001\u547d\u4ee4\u8bf7\u6c42\uff0c\u5e76\u4e14\u547d\u4ee4\u8981\u5904\u7406\u7684\u6570\u636e\u5e93\u952e\u5c5e\u4e8e\u88ab\u8fc1\u79fb\u7684\u69fd\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6e90\u8282\u70b9\u4f1a\u5148\u5728\u6570\u636e\u5e93\u91cc\u9762\u67e5\u627e\u6307\u5b9a\u952e\uff0c\u5982\u679c\u627e\u5230\u7684\u8bdd\uff0c\u5c31\u76f4\u63a5\u6267\u884c\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u547d\u4ee4"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u672a\u627e\u5230\u4f1a\u68c0\u67e5 clusterState.migrating_slots_to[slot]\uff0c\u770b\u952e key \u6240\u5c5e\u7684\u69fd slot \u662f\u5426\u6b63\u5728\u8fdb\u884c\u8fc1\u79fb"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u69fd slot \u6b63\u5728\u8fc1\u79fb\u5219\u6e90\u8282\u70b9\u5c06\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u4e00\u4e2a ASK \u9519\u8bef\uff0c\u6307\u5f15\u5ba2\u6237\u7aef\u8f6c\u5411\u6b63\u5728\u5bfc\u5165\u69fd\u7684\u76ee\u6807\u8282\u70b9"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"ASK <slot> <ip:port>\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u63a5\u5230 ASK \u9519\u8bef\u7684\u5ba2\u6237\u7aef\uff0c\u4f1a\u6839\u636e\u9519\u8bef\u63d0\u4f9b\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u53f7\u8f6c\u5411\u76ee\u6807\u8282\u70b9\uff0c\u9996\u5148\u5411\u76ee\u6807\u8282\u70b9\u53d1\u9001\u4e00\u4e2a ASKING \u547d\u4ee4\uff0c\u518d\u91cd\u65b0\u53d1\u9001\u539f\u672c\u60f3\u8981\u6267\u884c\u7684\u547d\u4ee4"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u548c MOVED \u9519\u8bef\u60c5\u51b5\u7c7b\u4f3c\uff0c\u96c6\u7fa4\u6a21\u5f0f\u7684 redis-cli \u5728\u63a5\u5230 ASK \u9519\u8bef\u65f6\u4e0d\u4f1a\u6253\u5370\u9519\u8bef\u8fdb\u884c\u81ea\u52a8\u8f6c\u5411\uff1b\u5355\u673a\u6a21\u5f0f\u7684 redis-cli \u4f1a\u6253\u5370\u9519\u8bef"}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u6bd4 MOVED \u9519\u8bef\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"MOVED \u9519\u8bef\u4ee3\u8868\u69fd\u7684\u8d1f\u8d23\u6743\u5df2\u7ecf\u4ece\u4e00\u4e2a\u8282\u70b9\u8f6c\u79fb\u5230\u4e86\u53e6\u4e00\u4e2a\u8282\u70b9\uff0c\u8f6c\u5411\u662f\u4e00\u79cd\u6301\u4e45\u6027\u7684\u8f6c\u5411"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"ASK \u9519\u8bef\u53ea\u662f\u4e24\u4e2a\u8282\u70b9\u5728\u8fc1\u79fb\u69fd\u7684\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u7684\u4e00\u79cd\u4e34\u65f6\u63aa\u65bd\uff0cASK \u7684\u8f6c\u5411\u4e0d\u4f1a\u5bf9\u5ba2\u6237\u7aef\u4eca\u540e\u53d1\u9001\u5173\u4e8e\u69fd slot \u7684\u547d\u4ee4\u8bf7\u6c42\u4ea7\u751f\u4efb\u4f55\u5f71\u54cd\uff0c\u5ba2\u6237\u7aef\u4ecd\u7136\u4f1a\u5c06\u69fd slot \u7684\u547d\u4ee4\u8bf7\u6c42\u53d1\u9001\u81f3\u76ee\u524d\u8d1f\u8d23\u5904\u7406\u69fd slot \u7684\u8282\u70b9\uff0c\u9664\u975e ASK \u9519\u8bef\u518d\u6b21\u51fa\u73b0"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"asking",children:"ASKING"}),"\n",(0,i.jsx)(e.p,{children:"\u5ba2\u6237\u7aef\u4e0d\u53d1\u9001 ASKING \u547d\u4ee4\uff0c\u800c\u662f\u76f4\u63a5\u53d1\u9001\u6267\u884c\u7684\u547d\u4ee4\uff0c\u90a3\u4e48\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u547d\u4ee4\u5c06\u88ab\u8282\u70b9\u62d2\u7edd\u6267\u884c\uff0c\u5e76\u8fd4\u56de MOVED \u9519\u8bef"}),"\n",(0,i.jsx)(e.p,{children:"ASKING \u547d\u4ee4\u4f5c\u7528\u662f\u6253\u5f00\u53d1\u9001\u8be5\u547d\u4ee4\u7684\u5ba2\u6237\u7aef\u7684 REDIS_ASKING \u6807\u8bc6\uff0c\u8be5\u547d\u4ee4\u7684\u4f2a\u4ee3\u7801\u5b9e\u73b0\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:'def ASKING ():\n    // \u6253\u5f00\u6807\u8bc6\n    client.flags |= REDIS_ASKING \n    // \u5411\u5ba2\u6237\u7aef\u8fd4\u56deOK\u56de\u590d\n    reply("OK") \n'})}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u524d\u8282\u70b9\u6b63\u5728\u5bfc\u5165\u69fd slot\uff0c\u5e76\u4e14\u53d1\u9001\u547d\u4ee4\u7684\u5ba2\u6237\u7aef\u5e26\u6709 REDIS_ASKING \u6807\u8bc6\uff0c\u90a3\u4e48\u8282\u70b9\u5c06\u7834\u4f8b\u6267\u884c\u8fd9\u4e2a\u5173\u4e8e\u69fd slot \u7684\u547d\u4ee4\u4e00\u6b21"}),"\n",(0,i.jsx)(e.p,{children:"\u5ba2\u6237\u7aef\u7684 REDIS_ASKING \u6807\u8bc6\u662f\u4e00\u6b21\u6027\u6807\u8bc6\uff0c\u5f53\u8282\u70b9\u6267\u884c\u4e86\u4e00\u4e2a\u5e26\u6709 REDIS_ASKING \u6807\u8bc6\u7684\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u547d\u4ee4\u4e4b\u540e\uff0c\u8be5\u5ba2\u6237\u7aef\u7684 REDIS_ASKING \u6807\u8bc6\u5c31\u4f1a\u88ab\u79fb\u9664"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u9ad8\u53ef\u7528",children:"\u9ad8\u53ef\u7528"}),"\n",(0,i.jsx)(e.h4,{id:"\u8282\u70b9\u590d\u5236",children:"\u8282\u70b9\u590d\u5236"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u96c6\u7fa4\u4e2d\u7684\u8282\u70b9\u5206\u4e3a\u4e3b\u8282\u70b9\uff08master\uff09\u548c\u4ece\u8282\u70b9\uff08slave\uff09\uff0c\u5176\u4e2d\u4e3b\u8282\u70b9\u7528\u4e8e\u5904\u7406\u69fd\uff0c\u800c\u4ece\u8282\u70b9\u5219\u7528\u4e8e\u590d\u5236\u4e3b\u8282\u70b9\uff0c\u5e76\u5728\u88ab\u590d\u5236\u7684\u4e3b\u8282\u70b9\u4e0b\u7ebf\u65f6\uff0c\u4ee3\u66ff\u4e0b\u7ebf\u4e3b\u8282\u70b9\u7ee7\u7eed\u5904\u7406\u547d\u4ee4\u8bf7\u6c42"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"CLUSTER REPLICATE <node_id> \n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5411\u4e00\u4e2a\u8282\u70b9\u53d1\u9001\u547d\u4ee4\u53ef\u4ee5\u8ba9\u63a5\u6536\u547d\u4ee4\u7684\u8282\u70b9\u6210\u4e3a node_id \u6240\u6307\u5b9a\u8282\u70b9\u7684\u4ece\u8282\u70b9\uff0c\u5e76\u5f00\u59cb\u5bf9\u4e3b\u8282\u70b9\u8fdb\u884c\u590d\u5236"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u63a5\u53d7\u547d\u4ee4\u7684\u8282\u70b9\u9996\u5148\u4f1a\u5728\u7684 clusterState.nodes \u5b57\u5178\u4e2d\u627e\u5230 node_id \u6240\u5bf9\u5e94\u8282\u70b9\u7684 clusterNode \u7ed3\u6784\uff0c\u5e76\u5c06\u81ea\u5df1\u7684\u8282\u70b9\u4e2d\u7684 clusterState.myself.slaveof \u6307\u9488\u6307\u5411\u8fd9\u4e2a\u7ed3\u6784\uff0c\u8bb0\u5f55\u8fd9\u4e2a\u8282\u70b9\u6b63\u5728\u590d\u5236\u7684\u4e3b\u8282\u70b9"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8282\u70b9\u4f1a\u4fee\u6539 clusterState.myself.flags \u4e2d\u7684\u5c5e\u6027\uff0c\u5173\u95ed REDIS_NODE_MASTER \u6807\u8bc6\uff0c\u6253\u5f00 REDIS_NODE_SLAVE \u6807\u8bc6"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8282\u70b9\u4f1a\u8c03\u7528\u590d\u5236\u4ee3\u7801\uff0c\u5bf9\u4e3b\u8282\u70b9\u8fdb\u884c\u590d\u5236\uff08\u8282\u70b9\u7684\u590d\u5236\u529f\u80fd\u548c\u5355\u673a Redis \u670d\u52a1\u5668\u7684\u4f7f\u7528\u4e86\u76f8\u540c\u7684\u4ee3\u7801\uff09"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u4e2a\u8282\u70b9\u6210\u4e3a\u4ece\u8282\u70b9\uff0c\u5e76\u5f00\u59cb\u590d\u5236\u67d0\u4e2a\u4e3b\u8282\u70b9\u8fd9\u4e00\u4fe1\u606f\u4f1a\u901a\u8fc7\u6d88\u606f\u53d1\u9001\u7ed9\u96c6\u7fa4\u4e2d\u7684\u5176\u4ed6\u8282\u70b9\uff0c\u6700\u7ec8\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u8282\u70b9\u90fd\u4f1a\u77e5\u9053\u67d0\u4e2a\u4ece\u8282\u70b9\u6b63\u5728\u590d\u5236\u67d0\u4e2a\u4e3b\u8282\u70b9"}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u8282\u70b9\u7684 clusterNode \u7ed3\u6784\u7684 slaves \u5c5e\u6027\u548c numslaves \u5c5e\u6027\u4e2d\u8bb0\u5f55\u6b63\u5728\u590d\u5236\u8fd9\u4e2a\u4e3b\u8282\u70b9\u7684\u4ece\u8282\u70b9\u540d\u5355\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct clusterNode {\n    // \u6b63\u5728\u590d\u5236\u8fd9\u4e2a\u4e3b\u8282\u70b9\u7684\u4ece\u8282\u70b9\u6570\u91cf\n    int numslaves;\n    \n    // \u6570\u7ec4\u9879\u6307\u5411\u4e00\u4e2a\u6b63\u5728\u590d\u5236\u8fd9\u4e2a\u4e3b\u8282\u70b9\u7684\u4ece\u8282\u70b9\u7684clusterNode\u7ed3\u6784\n    struct clusterNode **slaves; \n}\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6545\u969c\u68c0\u6d4b",children:"\u6545\u969c\u68c0\u6d4b"}),"\n",(0,i.jsxs)(e.p,{children:["\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u8282\u70b9\u90fd\u4f1a\u5b9a\u671f\u5730\u5411\u96c6\u7fa4\u4e2d\u7684\u5176\u4ed6\u8282\u70b9\u53d1\u9001 PING \u6d88\u606f\uff0c\u6765\u68c0\u6d4b\u5bf9\u65b9\u662f\u5426\u5728\u7ebf\uff0c\u5982\u679c\u63a5\u6536 PING \u7684\u8282\u70b9\u6ca1\u6709\u5728\u89c4\u5b9a\u7684\u65f6\u95f4\u5185\u8fd4\u56de PONG \u6d88\u606f\uff0c\u90a3\u4e48\u53d1\u9001\u6d88\u606f\u8282\u70b9\u5c31\u4f1a\u5c06\u63a5\u6536\u8282\u70b9\u6807\u8bb0\u4e3a",(0,i.jsx)(e.strong,{children:"\u7591\u4f3c\u4e0b\u7ebf"}),"\uff08probable fail\uff09"]}),"\n",(0,i.jsxs)(e.p,{children:["\u96c6\u7fa4\u4e2d\u7684\u8282\u70b9\u4f1a\u4e92\u76f8\u53d1\u9001\u6d88\u606f\uff0c\u6765",(0,i.jsx)(e.strong,{children:"\u4ea4\u6362\u96c6\u7fa4\u4e2d\u5404\u4e2a\u8282\u70b9\u7684\u72b6\u6001\u4fe1\u606f"}),"\uff0c\u5f53\u4e00\u4e2a\u4e3b\u8282\u70b9 A \u901a\u8fc7\u6d88\u606f\u5f97\u77e5\u4e3b\u8282\u70b9 B \u8ba4\u4e3a\u4e3b\u8282\u70b9 C \u8fdb\u5165\u4e86\u7591\u4f3c\u4e0b\u7ebf\u72b6\u6001\u65f6\uff0c\u4e3b\u8282\u70b9 A \u4f1a\u5728 clusterState.nodes \u5b57\u5178\u4e2d\u627e\u5230\u4e3b\u8282\u70b9 C \u6240\u5bf9\u5e94\u7684\u8282\u70b9\uff0c\u5e76\u5c06\u4e3b\u8282\u70b9 B \u7684\u4e0b\u7ebf\u62a5\u544a\uff08failure report\uff09\u6dfb\u52a0\u5230 clusterNode.fail_reports \u94fe\u8868\u91cc\u9762"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct clusterNode {\n    // \u4e00\u4e2a\u94fe\u8868\uff0c\u8bb0\u5f55\u4e86\u6240\u6709\u5176\u4ed6\u8282\u70b9\u5bf9\u8be5\u8282\u70b9\u7684\u4e0b\u7ebf\u62a5\u544a \n    list *fail_reports;\n}\n// \u6bcf\u4e2a\u4e0b\u7ebf\u62a5\u544a\u7531\u4e00\u4e2a clusterNodeFailReport \u7ed3\u6784\u8868\u793a\nstruct clusterNodeFailReport {\n    // \u62a5\u544a\u76ee\u6807\u8282\u70b9\u5df3\u7ecf\u4e0b\u7ebf\u7684\u8282\u70b9 \n    struct clusterNode *node;\n    \n    // \u6700\u540e\u4e00\u6b21\u4ecenode\u8282\u70b9\u6536\u5230\u4e0b\u7ebf\u62a5\u544a\u7684\u65f6\u95f4\n    // \u7a0b\u5e8f\u4f7f\u7528\u8fd9\u4e2a\u65f6\u95f4\u6233\u6765\u68c0\u67e5\u4e0b\u7ebf\u62a5\u544a\u662f\u5426\u8fc7\u671f\uff0c\u4e0e\u5f53\u524d\u65f6\u95f4\u76f8\u5dee\u592a\u4e45\u7684\u4e0b\u7ebf\u62a5\u544a\u4f1a\u88ab\u5220\u9664 \n    mstime_t time; \n};\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u96c6\u7fa4\u91cc",(0,i.jsx)(e.strong,{children:"\u534a\u6570\u4ee5\u4e0a"}),"\u8d1f\u8d23\u5904\u7406\u69fd\u7684\u4e3b\u8282\u70b9\u90fd\u5c06\u67d0\u4e2a\u4e3b\u8282\u70b9 X \u62a5\u544a\u4e3a\u7591\u4f3c\u4e0b\u7ebf\uff0c\u90a3\u4e48 X \u5c06\u88ab\u6807\u8bb0\u4e3a",(0,i.jsx)(e.strong,{children:"\u5df2\u4e0b\u7ebf"}),"\uff08FAIL\uff09\uff0c\u5c06 X \u6807\u8bb0\u4e3a\u5df2\u4e0b\u7ebf\u7684\u8282\u70b9\u4f1a\u5411\u96c6\u7fa4\u5e7f\u64ad\u4e00\u6761\u5173\u4e8e\u4e3b\u8282\u70b9 X \u7684 FAIL \u6d88\u606f\uff0c\u6240\u6709\u6536\u5230\u6d88\u606f\u7684\u8282\u70b9\u90fd\u4f1a\u5c06 X \u6807\u8bb0\u4e3a\u5df2\u4e0b\u7ebf"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6545\u969c\u8f6c\u79fb-1",children:"\u6545\u969c\u8f6c\u79fb"}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u4e00\u4e2a\u4ece\u8282\u70b9\u53d1\u73b0\u6240\u5c5e\u7684\u4e3b\u8282\u70b9\u8fdb\u5165\u4e86\u5df2\u4e0b\u7ebf\u72b6\u6001\uff0c\u4ece\u8282\u70b9\u5c06\u5f00\u59cb\u5bf9\u4e0b\u7ebf\u4e3b\u8282\u70b9\u8fdb\u884c\u6545\u969c\u8f6c\u79fb\uff0c\u6267\u884c\u6b65\u9aa4\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e0b\u5c5e\u7684\u4ece\u8282\u70b9\u901a\u8fc7\u9009\u4e3e\u4ea7\u751f\u4e00\u4e2a\u8282\u70b9"}),"\n",(0,i.jsxs)(e.li,{children:["\u88ab\u9009\u4e2d\u7684\u4ece\u8282\u70b9\u4f1a\u6267\u884c ",(0,i.jsx)(e.code,{children:"SLAVEOF no one"})," \u547d\u4ee4\uff0c\u6210\u4e3a\u65b0\u7684\u4e3b\u8282\u70b9"]}),"\n",(0,i.jsxs)(e.li,{children:["\u65b0\u7684\u4e3b\u8282\u70b9\u4f1a",(0,i.jsx)(e.strong,{children:"\u64a4\u9500\u6240\u6709\u5bf9\u5df2\u4e0b\u7ebf\u4e3b\u8282\u70b9\u7684\u69fd\u6307\u6d3e"}),"\uff0c\u5e76\u5c06\u8fd9\u4e9b\u69fd\u5168\u90e8\u6307\u6d3e\u7ed9\u81ea\u5df1"]}),"\n",(0,i.jsx)(e.li,{children:"\u65b0\u7684\u4e3b\u8282\u70b9\u5411\u96c6\u7fa4\u5e7f\u64ad\u4e00\u6761 PONG \u6d88\u606f\uff0c\u8ba9\u96c6\u7fa4\u4e2d\u7684\u5176\u4ed6\u8282\u70b9\u77e5\u9053\u5f53\u524d\u8282\u70b9\u53d8\u6210\u4e86\u4e3b\u8282\u70b9\uff0c\u5e76\u4e14\u63a5\u7ba1\u4e86\u4e0b\u7ebf\u8282\u70b9\u8d1f\u8d23\u5904\u7406\u7684\u69fd"}),"\n",(0,i.jsx)(e.li,{children:"\u65b0\u7684\u4e3b\u8282\u70b9\u5f00\u59cb\u63a5\u6536\u6709\u5173\u7684\u547d\u4ee4\u8bf7\u6c42\uff0c\u6545\u969c\u8f6c\u79fb\u5b8c\u6210"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u9009\u4e3e\u7b97\u6cd5",children:"\u9009\u4e3e\u7b97\u6cd5"}),"\n",(0,i.jsx)(e.p,{children:"\u96c6\u7fa4\u9009\u4e3e\u65b0\u7684\u4e3b\u8282\u70b9\u7684\u89c4\u5219\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u96c6\u7fa4\u7684\u914d\u7f6e\u7eaa\u5143\u662f\u4e00\u4e2a\u81ea\u589e\u7684\u8ba1\u6570\u5668\uff0c\u521d\u59cb\u503c\u4e3a 0"}),"\n",(0,i.jsx)(e.li,{children:"\u5f53\u96c6\u7fa4\u91cc\u67d0\u4e2a\u8282\u70b9\u5f00\u59cb\u4e00\u6b21\u6545\u969c\u8f6c\u79fb\uff0c\u96c6\u7fa4\u7684\u914d\u7f6e\u7eaa\u5143\u5c31\u662f\u589e\u52a0\u4e00"}),"\n",(0,i.jsx)(e.li,{children:"\u6bcf\u4e2a\u914d\u7f6e\u7eaa\u5143\u91cc\uff0c\u96c6\u7fa4\u4e2d\u6bcf\u4e2a\u4e3b\u8282\u70b9\u90fd\u6709\u4e00\u6b21\u6295\u7968\u7684\u673a\u4f1a\uff0c\u800c\u7b2c\u4e00\u4e2a\u5411\u4e3b\u8282\u70b9\u8981\u6c42\u6295\u7968\u7684\u4ece\u8282\u70b9\u5c06\u83b7\u5f97\u8be5\u4e3b\u8282\u70b9\u7684\u6295\u7968"}),"\n",(0,i.jsx)(e.li,{children:"\u5177\u6709\u6295\u7968\u6743\u7684\u4e3b\u8282\u70b9\u662f\u5fc5\u987b\u5177\u6709\u6b63\u5728\u5904\u7406\u7684\u69fd"}),"\n",(0,i.jsxs)(e.li,{children:["\u96c6\u7fa4\u91cc\u6709 N \u4e2a\u5177\u6709\u6295\u7968\u6743\u7684\u4e3b\u8282\u70b9\uff0c\u90a3\u4e48\u5f53\u4e00\u4e2a\u4ece\u8282\u70b9\u6536\u96c6\u5230\u5927\u4e8e\u7b49\u4e8e ",(0,i.jsx)(e.code,{children:"N/2+1"})," \u5f20\u652f\u6301\u7968\u65f6\uff0c\u4ece\u8282\u70b9\u5c31\u4f1a\u5f53\u9009"]}),"\n",(0,i.jsx)(e.li,{children:"\u6bcf\u4e2a\u914d\u7f6e\u7eaa\u5143\u91cc\uff0c\u5177\u6709\u6295\u7968\u6743\u7684\u4e3b\u8282\u70b9\u53ea\u80fd\u6295\u4e00\u6b21\u7968\uff0c\u6240\u4ee5\u83b7\u5f97\u4e00\u534a\u4ee5\u4e0a\u7968\u7684\u8282\u70b9\u53ea\u4f1a\u6709\u4e00\u4e2a"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u9009\u4e3e\u6d41\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5f53\u67d0\u4e2a\u4ece\u8282\u70b9\u53d1\u73b0\u6b63\u5728\u590d\u5236\u7684\u4e3b\u8282\u70b9\u8fdb\u5165\u5df2\u4e0b\u7ebf\u72b6\u6001\u65f6\uff0c\u4f1a\u5411\u96c6\u7fa4\u5e7f\u64ad\u4e00\u6761 ",(0,i.jsx)(e.code,{children:"CLUSTERMSG_TYPE_FAILOVER_AUTH_REQUEST"})," \u6d88\u606f\uff0c\u8981\u6c42\u6240\u6709\u6536\u5230\u8fd9\u6761\u6d88\u606f\u3001\u5e76\u4e14\u5177\u6709\u6295\u7968\u6743\u7684\u4e3b\u8282\u70b9\u5411\u8fd9\u4e2a\u4ece\u8282\u70b9\u6295\u7968"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u4e3b\u8282\u70b9\u5c1a\u672a\u6295\u7968\u7ed9\u5176\u4ed6\u4ece\u8282\u70b9\uff0c\u5c06\u5411\u8981\u6c42\u6295\u7968\u7684\u4ece\u8282\u70b9\u8fd4\u56de\u4e00\u6761 ",(0,i.jsx)(e.code,{children:"CLUSTERMSG_TYPE_FAILOVER_AUTH_ACK"})," \u6d88\u606f\uff0c\u8868\u793a\u8fd9\u4e2a\u4e3b\u8282\u70b9\u652f\u6301\u4ece\u8282\u70b9\u6210\u4e3a\u65b0\u7684\u4e3b\u8282\u70b9"]}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u4ece\u8282\u70b9\u83b7\u53d6\u5230\u4e86\u534a\u6570\u4ee5\u4e0a\u7684\u9009\u7968\uff0c\u5219\u4f1a\u5f53\u9009\u65b0\u7684\u4e3b\u8282\u70b9"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u4e00\u4e2a\u914d\u7f6e\u7eaa\u5143\u91cc\u6ca1\u6709\u4ece\u8282\u70b9\u80fd\u6536\u96c6\u5230\u8db3\u591f\u591a\u7684\u652f\u5f85\u7968\uff0c\u90a3\u4e48\u96c6\u7fa4\u8fdb\u5165\u4e00\u4e2a\u65b0\u7684\u914d\u7f6e\u7eaa\u5143\uff0c\u5e76\u518d\u6b21\u8fdb\u884c\u9009\u4e3e\uff0c\u76f4\u5230\u9009\u51fa\u65b0\u7684\u4e3b\u8282\u70b9"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u9009\u4e3e\u65b0\u4e3b\u8282\u70b9\u7684\u65b9\u6cd5\u548c\u9009\u4e3e\u9886\u5934 Sentinel \u7684\u65b9\u6cd5\u975e\u5e38\u76f8\u4f3c\uff0c\u4e24\u8005\u90fd\u662f\u57fa\u4e8e Raft \u7b97\u6cd5\u7684\u9886\u5934\u9009\u4e3e\uff08leader election\uff09\u65b9\u6cd5\u5b9e\u73b0\u7684"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u6d88\u606f\u673a\u5236",children:"\u6d88\u606f\u673a\u5236"}),"\n",(0,i.jsx)(e.h4,{id:"\u6d88\u606f\u7ed3\u6784",children:"\u6d88\u606f\u7ed3\u6784"}),"\n",(0,i.jsx)(e.p,{children:"\u96c6\u7fa4\u4e2d\u7684\u5404\u4e2a\u8282\u70b9\u901a\u8fc7\u53d1\u9001\u548c\u63a5\u6536\u6d88\u606f\uff08message\uff09\u6765\u8fdb\u884c\u901a\u4fe1\uff0c\u5c06\u53d1\u9001\u6d88\u606f\u7684\u8282\u70b9\u79f0\u4e3a\u53d1\u9001\u8005\uff08sender\uff09\uff0c\u63a5\u6536\u6d88\u606f\u7684\u8282\u70b9\u79f0\u4e3a\u63a5\u6536\u8005\uff08receiver\uff09"}),"\n",(0,i.jsx)(e.p,{children:"\u8282\u70b9\u53d1\u9001\u7684\u6d88\u606f\u4e3b\u8981\u6709\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"MEET \u6d88\u606f\uff1a\u5f53\u53d1\u9001\u8005\u63a5\u5230\u5ba2\u6237\u7aef\u53d1\u9001\u7684 CLUSTER MEET \u547d\u4ee4\u65f6\uff0c\u4f1a\u5411\u63a5\u6536\u8005\u53d1\u9001 MEET \u6d88\u606f\uff0c\u8bf7\u6c42\u63a5\u6536\u8005\u52a0\u5165\u5230\u53d1\u9001\u8005\u5f53\u524d\u6240\u5904\u7684\u96c6\u7fa4\u91cc"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["PING \u6d88\u606f\uff1a\u96c6\u7fa4\u91cc\u7684\u6bcf\u4e2a\u8282\u70b9\u9ed8\u8ba4\u6bcf\u9694\u4e00\u79d2\u949f\u5c31\u4f1a\u4ece\u5df2\u77e5\u8282\u70b9\u5217\u8868\u4e2d\u968f\u673a\u9009\u51fa\u4e94\u4e2a\uff0c\u7136\u540e\u5bf9\u8fd9\u4e94\u4e2a\u8282\u70b9\u4e2d\u6700\u957f\u65f6\u95f4\u6ca1\u6709\u53d1\u9001\u8fc7 PING \u6d88\u606f\u7684\u8282\u70b9\u53d1\u9001 PING\uff0c\u4ee5\u6b64\u6765",(0,i.jsx)(e.strong,{children:"\u968f\u673a\u68c0\u6d4b"}),"\u88ab\u9009\u4e2d\u7684\u8282\u70b9\u662f\u5426\u5728\u7ebf"]}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u8282\u70b9 A \u6700\u540e\u4e00\u6b21\u6536\u5230\u8282\u70b9 B \u53d1\u9001\u7684 PONG \u6d88\u606f\u7684\u65f6\u95f4\uff0c\u8ddd\u79bb\u5f53\u524d\u5df2\u7ecf\u8d85\u8fc7\u4e86\u8282\u70b9 A \u7684 cluster-node\xad-timeout \u8bbe\u7f6e\u65f6\u957f\u7684\u4e00\u534a\uff0c\u90a3\u4e48 A \u4e5f\u4f1a\u5411 B \u53d1\u9001 PING \u6d88\u606f\uff0c\u9632\u6b62 A \u56e0\u4e3a\u957f\u65f6\u95f4\u6ca1\u6709\u968f\u673a\u9009\u4e2d B \u53d1\u9001 PING\uff0c\u800c\u5bfc\u81f4\u5bf9\u8282\u70b9 B \u7684\u4fe1\u606f\u66f4\u65b0\u6ede\u540e"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"PONG \u6d88\u606f\uff1a\u5f53\u63a5\u6536\u8005\u6536\u5230 MEET \u6d88\u606f\u6216\u8005 PING \u6d88\u606f\u65f6\uff0c\u4e3a\u4e86\u8ba9\u53d1\u9001\u8005\u786e\u8ba4\u5df2\u7ecf\u6210\u529f\u63a5\u6536\u6d88\u606f\uff0c\u4f1a\u5411\u53d1\u9001\u8005\u8fd4\u56de\u4e00\u6761 PONG\uff1b\u8282\u70b9\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5411\u96c6\u7fa4\u5e7f\u64ad PONG \u6d88\u606f\u6765\u8ba9\u96c6\u7fa4\u4e2d\u7684\u5176\u4ed6\u8282\u70b9\u7acb\u5373\u5237\u65b0\u5173\u4e8e\u8fd9\u4e2a\u8282\u70b9\u7684\u8ba4\u8bc6\uff08\u4ece\u5347\u7ea7\u4e3a\u4e3b\uff09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"FAIL \u6d88\u606f\uff1a\u5f53\u4e00\u4e2a\u4e3b\u8282\u70b9 A \u5224\u65ad\u53e6\u4e00\u4e2a\u4e3b\u8282\u70b9 B \u5df2\u7ecf\u8fdb\u5165 FAIL \u72b6\u6001\u65f6\uff0c\u8282\u70b9 A \u4f1a\u5411\u96c6\u7fa4\u5e7f\u64ad\u4e00\u6761 B \u8282\u70b9\u7684 FAIL \u4fe1\u606f"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"PUBLISH \u6d88\u606f\uff1a\u5f53\u8282\u70b9\u63a5\u6536\u5230\u4e00\u4e2a PUBLISH \u547d\u4ee4\u65f6\uff0c\u8282\u70b9\u4f1a\u6267\u884c\u8fd9\u4e2a\u547d\u4ee4\u5e76\u5411\u96c6\u7fa4\u5e7f\u64ad\u4e00\u6761 PUBLISH \u6d88\u606f\uff0c\u63a5\u6536\u5230 PUBLISH \u6d88\u606f\u7684\u8282\u70b9\u90fd\u4f1a\u6267\u884c\u76f8\u540c\u7684 PUBLISH \u547d\u4ee4"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6d88\u606f\u5934",children:"\u6d88\u606f\u5934"}),"\n",(0,i.jsx)(e.p,{children:"\u8282\u70b9\u53d1\u9001\u7684\u6240\u6709\u6d88\u606f\u90fd\u7531\u4e00\u4e2a\u6d88\u606f\u5934\u5305\u88f9\uff0c\u6d88\u606f\u5934\u9664\u4e86\u5305\u542b\u6d88\u606f\u6b63\u6587\u4e4b\u5916\uff0c\u8fd8\u8bb0\u5f55\u4e86\u6d88\u606f\u53d1\u9001\u8005\u81ea\u8eab\u7684\u4e00\u4e9b\u4fe1\u606f"}),"\n",(0,i.jsx)(e.p,{children:"\u6d88\u606f\u5934\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct clusterMsg {\n    // \u6d88\u606f\u7684\u957f\u5ea6\uff08\u5305\u62ec\u8fd9\u4e2a\u6d88\u606f\u5934\u7684\u957f\u5ea6\u548c\u6d88\u606f\u6b63\u6587\u7684\u957f\u5ea6\uff09\n\tuint32_t totlen;\n\t// \u6d88\u606f\u7684\u7c7b\u578b\n\tuint16_t type;\n    // \u6d88\u606f\u6b63\u6587\u5305\u542b\u7684\u8282\u70b9\u4fe1\u606f\u6570\u91cf\uff0c\u53ea\u5728\u53d1\u9001MEET\u3001PING\u3001PONG\u8fd9\u4e09\u79cdGossip\u534f\u8bae\u6d88\u606f\u65f6\u4f7f\u7528 \n    uint16_t count;\n    \n    // \u53d1\u9001\u8005\u6240\u5904\u7684\u914d\u7f6e\u7eaa\u5143\n    uint64_t currentEpoch;\n    // \u5982\u679c\u53d1\u9001\u8005\u662f\u4e00\u4e2a\u4e3b\u8282\u70b9\uff0c\u90a3\u4e48\u8fd9\u91cc\u8bb0\u5f55\u7684\u662f\u53d1\u9001\u8005\u7684\u914d\u7f6e\u7eaa\u5143\n    // \u5982\u679c\u53d1\u9001\u8005\u662f\u4e00\u4e2a\u4ece\u8282\u70b9\uff0c\u90a3\u4e48\u8fd9\u91cc\u8bb0\u5f55\u7684\u662f\u53d1\u9001\u8005\u6b63\u5728\u590d\u5236\u7684\u4e3b\u8282\u70b9\u7684\u914d\u7f6e\u7eaa\u5143\n    uint64_t configEpoch;\n    \n    // \u53d1\u9001\u8005\u7684\u540d\u5b57(ID)\n\tchar sender[REDIS CLUSTER NAMELEN];\n\t// \u53d1\u9001\u8005\u76ee\u524d\u7684\u69fd\u6307\u6d3e\u4fe1\u606f\n\tunsigned char myslots[REDIS_CLUSTER_SLOTS/8];\n    \n    // \u5982\u679c\u53d1\u9001\u8005\u662f\u4e00\u4e2a\u4ece\u8282\u70b9\uff0c\u90a3\u4e48\u8fd9\u91cc\u8bb0\u5f55\u7684\u662f\u53d1\u9001\u8005\u6b63\u5728\u590d\u5236\u7684\u4e3b\u8282\u70b9\u7684\u540d\u5b57\n    // \u5982\u679c\u53d1\u9001\u8005\u662f\u4e00\u4e2a\u4e3b\u8282\u70b9\uff0c\u90a3\u4e48\u8fd9\u91cc\u8bb0\u5f55\u7684\u662f REDIS_NODE_NULL_NAME\uff0c\u4e00\u4e2a 40 \u5b87\u8282\u957f\u503c\u5168\u4e3a 0 \u7684\u5b57\u8282\u6570\u7ec4\n    char slaveof[REDIS_CLUSTER_NAMELEN];\n    \n\t// \u53d1\u9001\u8005\u7684\u7aef\u53e3\u53f7\n\tuint16_t port;\n\t// \u53d1\u9001\u8005\u7684\u6807\u8bc6\u503c\n    uint16_t flags; \n\t//\u53d1\u9001\u8005\u6240\u5904\u96c6\u7fa4\u7684\u72b6\u6001\n    unsigned char state;\n\t// \u6d88\u606f\u7684\u6b63\u6587\uff08\u6216\u8005\u8bf4\uff0c \u5185\u5bb9\uff09 \n    union clusterMsgData data;\n}\n"})}),"\n",(0,i.jsxs)(e.p,{children:["clusterMsg \u7ed3\u6784\u7684 currentEpoch\u3001sender\u3001myslots \u7b49\u5c5e\u6027\u8bb0\u5f55\u4e86\u53d1\u9001\u8005\u7684\u8282\u70b9\u4fe1\u606f\uff0c\u63a5\u6536\u8005\u4f1a\u6839\u636e\u8fd9\u4e9b\u4fe1\u606f\u5728 clusterState.nodes \u5b57\u5178\u91cc\u627e\u5230\u53d1\u9001\u8005\u5bf9\u5e94\u7684 clusterNode \u7ed3\u6784\uff0c\u5e76\u5bf9\u7ed3\u6784\u8fdb\u884c\u66f4\u65b0\uff0c\u6bd4\u5982",(0,i.jsx)(e.strong,{children:"\u4f20\u64ad\u8282\u70b9\u7684\u69fd\u6307\u6d3e\u4fe1\u606f"})]}),"\n",(0,i.jsx)(e.p,{children:"\u6d88\u606f\u6b63\u6587\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"union clusterMsgData {\n    // MEET\u3001PING\u3001PONG \u6d88\u606f\u7684\u6b63\u6587\n    struct {\n        // \u6bcf\u6761 MEET\u3001PING\u3001PONG \u6d88\u606f\u90fd\u5305\u542b\u4e24\u4e2a clusterMsgDataGossip \u7ed3\u6784\n        clusterMsgDataGossip gossip[1];\n    } ping;\n    \n    // FAIL \u6d88\u606f\u7684\u6b63\u6587\n    struct { \n\t\tclusterMsgDataFail about;\n    } fail;\n    \n    // PUBLISH \u6d88\u606f\u7684\u6b63\u6587\n    struct {\n    \tclusterMsgDataPublish msg;\n    } publish;\n    \n    // \u5176\u4ed6\u6d88\u606f\u6b63\u6587...\n}\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"gossip",children:"Gossip"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u96c6\u7fa4\u4e2d\u7684\u5404\u4e2a\u8282\u70b9\u901a\u8fc7 Gossip \u534f\u8bae\u6765\u4ea4\u6362\u5404\u81ea\u5173\u4e8e\u4e0d\u540c\u8282\u70b9\u7684\u72b6\u6001\u4fe1\u606f\uff0c\u5176\u4e2d Gossip \u534f\u8bae\u7531 MEET\u3001PING\u3001PONG \u6d88\u606f\u5b9e\u73b0\uff0c\u4e09\u79cd\u6d88\u606f\u4f7f\u7528\u76f8\u540c\u7684\u6d88\u606f\u6b63\u6587\uff0c\u6240\u4ee5\u8282\u70b9\u901a\u8fc7\u6d88\u606f\u5934\u7684 type \u5c5e\u6027\u6765\u5224\u65ad\u6d88\u606f\u7684\u5177\u4f53\u7c7b\u578b"}),"\n",(0,i.jsxs)(e.p,{children:["\u53d1\u9001\u8005\u53d1\u9001\u8fd9\u4e09\u79cd\u6d88\u606f\u65f6\uff0c\u4f1a\u4ece\u5df2\u77e5\u8282\u70b9\u5217\u8868\u4e2d",(0,i.jsx)(e.strong,{children:"\u968f\u673a\u9009\u51fa\u4e24\u4e2a\u8282\u70b9"}),"\uff08\u4e3b\u4ece\u90fd\u53ef\u4ee5\uff09\uff0c\u5c06\u4e24\u4e2a\u88ab\u9009\u4e2d\u8282\u70b9\u4fe1\u606f\u4fdd\u5b58\u5230\u4e24\u4e2a Gossip \u7ed3\u6784"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct clusterMsgDataGossip {\n    // \u8282\u70b9\u7684\u540d\u5b57\n\tchar nodename[REDIS CLUSTER NAMELEN];\n    \n\t// \u6700\u540e\u4e00\u6b21\u5411\u8be5\u8282\u70b9\u53d1\u9001PING\u6d88\u606f\u7684\u65f6\u95f4\u6233\n    uint32_t ping_sent;\n\t// \u6700\u540e\u4e00\u6b21\u4ece\u8be5\u8282\u70b9\u63a5\u6536\u5230PONG\u6d88\u606f\u7684\u65f6\u95f4\u6233\n    uint32_t pong_received;\n    \n\t// \u8282\u70b9\u7684IP\u5730\u5740\n\tchar ip[16];\n    // \u8282\u70b9\u7684\u7aef\u53e3\u53f7\n    uint16_t port;\n\t// \u8282\u70b9\u7684\u6807\u8bc6\u503c\n    uint16_t flags;\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u63a5\u6536\u8005\u6536\u5230\u6d88\u606f\u65f6\uff0c\u4f1a\u8bbf\u95ee\u6d88\u606f\u6b63\u6587\u4e2d\u7684\u4e24\u4e2a\u6570\u636e\u7ed3\u6784\uff0c\u6765\u8fdb\u884c\u76f8\u5173\u64cd\u4f5c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u88ab\u9009\u4e2d\u8282\u70b9\u4e0d\u5b58\u5728\u4e8e\u63a5\u6536\u8005\u7684\u5df2\u77e5\u8282\u70b9\u5217\u8868\uff0c\u63a5\u6536\u8005\u5c06\u6839\u636e\u7ed3\u6784\u4e2d\u8bb0\u5f55\u7684 IP \u5730\u5740\u548c\u7aef\u53e3\u53f7\uff0c\u4e0e\u8282\u70b9\u8fdb\u884c\u63e1\u624b"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u5b58\u5728\uff0c\u6839\u636e Gossip \u7ed3\u6784\u8bb0\u5f55\u7684\u4fe1\u606f\u5bf9\u8282\u70b9\u6240\u5bf9\u5e94\u7684 clusterNode \u7ed3\u6784\u8fdb\u884c\u66f4\u65b0"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"fail",children:"FAIL"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u96c6\u7fa4\u7684\u8282\u70b9\u6570\u91cf\u6bd4\u8f83\u5927\u7684\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528 Gossip \u534f\u8bae\u6765\u4f20\u64ad\u8282\u70b9\u7684\u5df2\u4e0b\u7ebf\u4fe1\u606f\u4f1a\u5e26\u6765\u4e00\u5b9a\u5ef6\u8fdf\uff0c\u56e0\u4e3a Gossip \u534f\u8bae\u6d88\u606f\u901a\u5e38\u9700\u8981\u4e00\u6bb5\u65f6\u95f4\u624d\u80fd\u4f20\u64ad\u81f3\u6574\u4e2a\u96c6\u7fa4\uff0c\u6240\u4ee5\u901a\u8fc7\u53d1\u9001 FAIL\u6d88\u606f\u53ef\u4ee5\u8ba9\u96c6\u7fa4\u91cc\u7684\u6240\u6709\u8282\u70b9\u7acb\u5373\u77e5\u9053\u67d0\u4e2a\u4e3b\u8282\u70b9\u5df2\u4e0b\u7ebf\uff0c\u4ece\u800c\u5c3d\u5feb\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"FAIL \u6d88\u606f\u7684\u6b63\u6587\u7531 clusterMsgDataFail \u7ed3\u6784\u8868\u793a\uff0c\u8be5\u7ed3\u6784\u53ea\u6709\u4e00\u4e2a\u5c5e\u6027\uff0c\u8bb0\u5f55\u4e86\u5df2\u4e0b\u7ebf\u8282\u70b9\u7684\u540d\u5b57"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct clusterMsgDataFail {\n\tchar nodename[REDIS_CLUSTER_NAMELEN)];\n};\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u56e0\u4e3a\u4f20\u64ad\u4e0b\u7ebf\u4fe1\u606f\u4e0d\u9700\u8981\u5176\u4ed6\u5c5e\u6027\uff0c\u6240\u4ee5\u8282\u7701\u4e86\u4f20\u64ad\u7684\u8d44\u6e90"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"publish",children:"PUBLISH"}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u5ba2\u6237\u7aef\u5411\u96c6\u7fa4\u4e2d\u7684\u67d0\u4e2a\u8282\u70b9\u53d1\u9001\u547d\u4ee4\uff0c\u63a5\u6536\u5230 PUBLISH \u547d\u4ee4\u7684\u8282\u70b9\u4e0d\u4ec5\u4f1a\u5411 channel \u9891\u9053\u53d1\u9001\u6d88\u606f message\uff0c\u8fd8\u4f1a\u5411\u96c6\u7fa4\u5e7f\u64ad\u4e00\u6761 PUBLISH \u6d88\u606f\uff0c\u6240\u6709\u63a5\u6536\u5230\u8fd9\u6761 PUBLISH \u6d88\u606f\u7684\u8282\u70b9\u90fd\u4f1a\u5411 channel \u9891\u9053\u53d1\u9001 message \u6d88\u606f\uff0c\u6700\u7ec8\u96c6\u7fa4\u4e2d\u6240\u6709\u8282\u70b9\u90fd\u53d1\u4e86"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"PUBLISH <channel> <message> \n"})}),"\n",(0,i.jsx)(e.p,{children:"PUBLISH \u6d88\u606f\u7684\u6b63\u6587\u7531 clusterMsgDataPublish \u7ed3\u6784\u8868\u793a\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"typedef struct clusterMsgDataPublish {\n    // channel\u53c2\u6570\u7684\u957f\u5ea6\n    uint32_t channel_len;\n    // message\u53c2\u6570\u7684\u957f\u5ea6\n    uint32_t message_len;\n    \n    // \u5b9a\u4e49\u4e3a8\u5b57\u8282\u53ea\u662f\u4e3a\u4e86\u5bf9\u9f50\u5176\u4ed6\u6d88\u606f\u7ed3\u6784\uff0c\u5b9e\u9645\u7684\u957f\u5ea6\u7531\u4fdd\u5b58\u7684\u5185\u5bb9\u51b3\u5b9a\n    // bulk_data \u7684 0 \u81f3 channel_len-1 \u5b57\u8282\u4fdd\u5b58\u7684\u662fchannel\u53c2\u6570\n    // bulk_data\u7684 channel_len \u5b57\u8282\u81f3 channel_len + message_len-1 \u5b57\u8282\u4fdd\u5b58\u7684\u5219\u662fmessage\u53c2\u6570\n    unsigned char bulk_data[8];\n}\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u8ba9\u96c6\u7fa4\u7684\u6240\u6709\u8282\u70b9\u6267\u884c\u76f8\u540c\u7684 PUBLISH \u547d\u4ee4\uff0c\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u5c31\u662f\u5411\u6240\u6709\u8282\u70b9\u5e7f\u64ad\u76f8\u540c\u7684 PUBLISH \u547d\u4ee4\uff0c\u8fd9\u4e5f\u662f Redis \u590d\u5236 PUBLISH \u547d\u4ee4\u65f6\u6240\u4f7f\u7528\u7684\uff0c\u4f46\u662f\u8fd9\u79cd\u505a\u6cd5\u5e76\u4e0d\u7b26\u5408 Redis \u96c6\u7fa4\u7684\u5404",(0,i.jsx)(e.strong,{children:"\u4e2a\u8282\u70b9\u901a\u8fc7\u53d1\u9001\u548c\u63a5\u6536\u6d88\u606f\u6765\u8fdb\u884c\u901a\u4fe1"}),"\u7684\u89c4\u5219"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u8111\u88c2\u95ee\u9898",children:"\u8111\u88c2\u95ee\u9898"}),"\n",(0,i.jsx)(e.p,{children:"\u8111\u88c2\u6307\u5728\u4e3b\u4ece\u96c6\u7fa4\u4e2d\uff0c\u540c\u65f6\u6709\u4e24\u4e2a\u76f8\u540c\u7684\u4e3b\u8282\u70b9\u80fd\u63a5\u6536\u5199\u8bf7\u6c42\uff0c\u5bfc\u81f4\u5ba2\u6237\u7aef\u4e0d\u77e5\u9053\u5e94\u8be5\u5f80\u54ea\u4e2a\u4e3b\u8282\u70b9\u5199\u5165\u6570\u636e\uff0c\u6700\u540e \u4e0d\u540c\u5ba2\u6237\u7aef\u5f80\u4e0d\u540c\u7684\u4e3b\u8282\u70b9\u4e0a\u5199\u5165\u6570\u636e"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u539f\u4e3b\u8282\u70b9\u5e76\u6ca1\u6709\u771f\u7684\u53d1\u751f\u6545\u969c\uff0c\u7531\u4e8e\u67d0\u4e9b\u539f\u56e0\u65e0\u6cd5\u5904\u7406\u8bf7\u6c42\uff08CPU \u5229\u7528\u7387\u5f88\u9ad8\u3001\u81ea\u8eab\u963b\u585e\uff09\uff0c\u65e0\u6cd5\u6309\u65f6\u54cd\u5e94\u5fc3\u8df3\u8bf7\u6c42\uff0c\u88ab\u54e8\u5175/\u96c6\u7fa4\u4e3b\u8282\u70b9\u9519\u8bef\u7684\u5224\u65ad\u4e3a\u4e0b\u7ebf"}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u88ab\u5224\u65ad\u4e0b\u7ebf\u4e4b\u540e\uff0c\u539f\u4e3b\u5e93\u53c8\u91cd\u65b0\u5f00\u59cb\u5904\u7406\u8bf7\u6c42\u4e86\uff0c\u54e8\u5175/\u96c6\u7fa4\u4e3b\u8282\u70b9\u8fd8\u6ca1\u6709\u5b8c\u6210\u4e3b\u4ece\u5207\u6362\uff0c\u5ba2\u6237\u7aef\u4ecd\u7136\u53ef\u4ee5\u548c\u539f\u4e3b\u5e93\u901a\u4fe1\uff0c\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u5199\u64cd\u4f5c\u5c31\u4f1a\u5728\u539f\u4e3b\u5e93\u4e0a\u5199\u5165\u6570\u636e\uff0c\u9020\u6210\u8111\u88c2\u95ee\u9898"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u4e22\u5931\u95ee\u9898\uff1a\u4ece\u5e93\u4e00\u65e6\u5347\u7ea7\u4e3a\u65b0\u4e3b\u5e93\uff0c\u54e8\u5175\u5c31\u4f1a\u8ba9\u539f\u4e3b\u5e93\u6267\u884c slave of \u547d\u4ee4\uff0c\u548c\u65b0\u4e3b\u5e93\u91cd\u65b0\u8fdb\u884c\u5168\u91cf\u540c\u6b65\uff0c\u539f\u4e3b\u5e93\u9700\u8981\u6e05\u7a7a\u672c\u5730\u7684\u6570\u636e\uff0c\u52a0\u8f7d\u65b0\u4e3b\u5e93\u53d1\u9001\u7684 RDB \u6587\u4ef6\uff0c\u6240\u4ee5\u539f\u4e3b\u5e93\u5728\u4e3b\u4ece\u5207\u6362\u671f\u95f4\u4fdd\u5b58\u7684\u65b0\u5199\u6570\u636e\u5c31\u4e22\u5931\u4e86"}),"\n",(0,i.jsx)(e.p,{children:"\u9884\u9632\u8111\u88c2\uff1a\u5728\u4e3b\u4ece\u96c6\u7fa4\u90e8\u7f72\u65f6\uff0c\u5408\u7406\u5730\u914d\u7f6e\u53c2\u6570 min-slaves-to-write \u548c min-slaves-max-lag"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5047\u8bbe\u4ece\u5e93\u6709 K \u4e2a\uff0c\u53ef\u4ee5\u5c06 min-slaves-to-write \u8bbe\u7f6e\u4e3a K/2+1\uff08\u5982\u679c K \u7b49\u4e8e 1\uff0c\u5c31\u8bbe\u4e3a 1\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u5c06 min-slaves-max-lag \u8bbe\u7f6e\u4e3a\u5341\u51e0\u79d2\uff08\u4f8b\u5982 10\uff5e20s\uff09"}),"\n",(0,i.jsxs)(e.li,{children:["\u5728\u5047\u6545\u969c\u671f\u95f4\u65e0\u6cd5\u54cd\u5e94\u54e8\u5175\u53d1\u51fa\u7684\u5fc3\u8df3\u6d4b\u8bd5\uff0c\u65e0\u6cd5\u548c\u4ece\u5e93\u8fdb\u884c ACK \u786e\u8ba4\uff0c\u5e76\u4e14\u6ca1\u6709\u8db3\u591f\u7684\u4ece\u5e93\uff0c",(0,i.jsx)(e.strong,{children:"\u62d2\u7edd\u5ba2\u6237\u7aef\u7684\u5199\u5165"})]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u7ed3\u6784\u642d\u5efa",children:"\u7ed3\u6784\u642d\u5efa"}),"\n",(0,i.jsx)(e.p,{children:"\u6574\u4f53\u6846\u67b6\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u914d\u7f6e\u670d\u52a1\u5668\uff083 \u4e3b 3 \u4ece\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u5efa\u7acb\u901a\u4fe1\uff08Meet\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u5206\u69fd\uff08Slot\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u642d\u5efa\u4e3b\u4ece\uff08master-slave\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u96c6\u7fa4 conf \u914d\u7f6e\u6587\u4ef6\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"redis-6501.conf"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'port 6501\ndir "/redis/data"\ndbfilename "dump-6501.rdb"\ncluster-enabled yes\ncluster-config-file "cluster-6501.conf"\ncluster-node-timeout 5000\n\n#\u5176\u4ed6\u914d\u7f6e\u6587\u4ef6\u53c2\u7167\u4e0a\u9762\u7684\u4fee\u6539\u7aef\u53e3\u5373\u53ef\uff0c\u5185\u5bb9\u5b8c\u5168\u4e00\u6837\n'})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u7aef\u542f\u52a8\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis-server config_file_name\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5ba2\u6237\u7aef\u542f\u52a8\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis-cli -p 6504 -c\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"cluster \u914d\u7f6e\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u662f\u5426\u542f\u7528 cluster\uff0c\u52a0\u5165 cluster \u8282\u70b9"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"cluster-enabled yes|no\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"cluster \u914d\u7f6e\u6587\u4ef6\u540d\uff0c\u8be5\u6587\u4ef6\u5c5e\u4e8e\u81ea\u52a8\u751f\u6210\uff0c\u4ec5\u7528\u4e8e\u5feb\u901f\u67e5\u627e\u6587\u4ef6\u5e76\u67e5\u8be2\u6587\u4ef6\u5185\u5bb9"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"cluster-config-file filename\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8282\u70b9\u670d\u52a1\u54cd\u5e94\u8d85\u65f6\u65f6\u95f4\uff0c\u7528\u4e8e\u5224\u5b9a\u8be5\u8282\u70b9\u662f\u5426\u4e0b\u7ebf\u6216\u5207\u6362\u4e3a\u4ece\u8282\u70b9"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"cluster-node-timeout milliseconds\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"master \u8fde\u63a5\u7684 slave \u6700\u5c0f\u6570\u91cf"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"cluster-migration-barrier min_slave_number\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5ba2\u6237\u7aef\u542f\u52a8\u547d\u4ee4\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"cluster \u8282\u70b9\u64cd\u4f5c\u547d\u4ee4\uff08\u5ba2\u6237\u7aef\u547d\u4ee4\uff09\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u96c6\u7fa4\u8282\u70b9\u4fe1\u606f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"cluster nodes\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u66f4\u6539 slave \u6307\u5411\u65b0\u7684 master"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"cluster replicate master-id\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u53d1\u73b0\u4e00\u4e2a\u65b0\u8282\u70b9\uff0c\u65b0\u589e master"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"cluster meet ip:port\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5ffd\u7565\u4e00\u4e2a\u6ca1\u6709 solt \u7684\u8282\u70b9"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"cluster forget server_id\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u624b\u52a8\u6545\u969c\u8f6c\u79fb"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"cluster failover\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u96c6\u7fa4\u64cd\u4f5c\u547d\u4ee4\uff08Linux\uff09\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u96c6\u7fa4"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis-cli \u2013-cluster create masterhost1:masterport1 masterhost2:masterport2  masterhost3:masterport3 [masterhostn:masterportn \u2026] slavehost1:slaveport1  slavehost2:slaveport2 slavehost3:slaveport3 -\u2013cluster-replicas n\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1amaster \u4e0e slave \u7684\u6570\u91cf\u8981\u5339\u914d\uff0c\u4e00\u4e2a master \u5bf9\u5e94 n \u4e2a slave\uff0c\u7531\u6700\u540e\u7684\u53c2\u6570 n \u51b3\u5b9a\u3002master \u4e0e slave \u7684\u5339\u914d\u987a\u5e8f\u4e3a\u7b2c\u4e00\u4e2a master \u4e0e\u524d n \u4e2a slave \u5206\u4e3a\u4e00\u7ec4\uff0c\u5f62\u6210\u4e3b\u4ece\u7ed3\u6784"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6dfb\u52a0 master \u5230\u5f53\u524d\u96c6\u7fa4\u4e2d\uff0c\u8fde\u63a5\u65f6\u53ef\u4ee5\u6307\u5b9a\u4efb\u610f\u73b0\u6709\u8282\u70b9\u5730\u5740\u4e0e\u7aef\u53e3"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis-cli --cluster add-node new-master-host:new-master-port now-host:now-port\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6dfb\u52a0 slave"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis-cli --cluster add-node new-slave-host:new-slave-port master-host:master-port --cluster-slave --cluster-master-id masterid\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u8282\u70b9\uff0c\u5982\u679c\u5220\u9664\u7684\u8282\u70b9\u662f master\uff0c\u5fc5\u987b\u4fdd\u969c\u5176\u4e2d\u6ca1\u6709\u69fd slot"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis-cli --cluster del-node del-slave-host:del-slave-port del-slave-id\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u91cd\u65b0\u5206\u69fd\uff0c\u5206\u69fd\u662f\u4ece\u5177\u6709\u69fd\u7684 master \u4e2d\u5212\u5206\u4e00\u90e8\u5206\u7ed9\u5176\u4ed6 master\uff0c\u8fc7\u7a0b\u4e2d\u4e0d\u521b\u5efa\u65b0\u7684\u69fd"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis-cli --cluster reshard new-master-host:new-master:port --cluster-from src-  master-id1, src-master-id2, src-master-idn --cluster-to target-master-id --  cluster-slots slots\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6ce8\u610f\uff1a\u5c06\u9700\u8981\u53c2\u4e0e\u5206\u69fd\u7684\u6240\u6709 masterid \u4e0d\u5206\u5148\u540e\u987a\u5e8f\u6dfb\u52a0\u5230\u53c2\u6570\u4e2d\uff0c\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:","})," \u5206\u9694\uff0c\u6307\u5b9a\u76ee\u6807\u5f97\u5230\u7684\u69fd\u7684\u6570\u91cf\uff0c\u6240\u6709\u7684\u69fd\u5c06\u5e73\u5747\u4ece\u6bcf\u4e2a\u6765\u6e90\u7684 master \u5904\u83b7\u53d6"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u91cd\u65b0\u5206\u914d\u69fd\uff0c\u4ece\u5177\u6709\u69fd\u7684 master \u4e2d\u5206\u914d\u6307\u5b9a\u6570\u91cf\u7684\u69fd\u5230\u53e6\u4e00\u4e2a master \u4e2d\uff0c\u5e38\u7528\u4e8e\u6e05\u7a7a\u6307\u5b9a master \u4e2d\u7684\u69fd"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"redis-cli --cluster reshard src-master-host:src-master-port --cluster-from src-  master-id --cluster-to target-master-id --cluster-slots slots --cluster-yes\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u5176\u4ed6\u64cd\u4f5c",children:"\u5176\u4ed6\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.h3,{id:"\u53d1\u5e03\u8ba2\u9605",children:"\u53d1\u5e03\u8ba2\u9605"}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u672c\u6307\u4ee4-1",children:"\u57fa\u672c\u6307\u4ee4"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u53d1\u5e03\u8ba2\u9605\uff08pub/sub\uff09\u662f\u4e00\u79cd\u6d88\u606f\u901a\u4fe1\u6a21\u5f0f\uff1a\u53d1\u9001\u8005\uff08pub\uff09\u53d1\u9001\u6d88\u606f\uff0c\u8ba2\u9605\u8005\uff08sub\uff09\u63a5\u6536\u6d88\u606f"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u5ba2\u6237\u7aef\u53ef\u4ee5\u8ba2\u9605\u4efb\u610f\u6570\u91cf\u7684\u9891\u9053\uff0c\u6bcf\u5f53\u6709\u5ba2\u6237\u7aef\u5411\u88ab\u8ba2\u9605\u7684\u9891\u9053\u53d1\u9001\u6d88\u606f\uff08message\uff09\u65f6\uff0c\u9891\u9053\u7684",(0,i.jsx)(e.strong,{children:"\u6240\u6709\u8ba2\u9605\u8005\u90fd\u4f1a\u6536\u5230\u6d88\u606f"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(81873).A+"",width:"471",height:"303"})}),"\n",(0,i.jsx)(e.p,{children:"\u64cd\u4f5c\u8fc7\u7a0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u6253\u5f00\u4e00\u4e2a\u5ba2\u6237\u7aef\u8ba2\u9605 channel1\uff1a",(0,i.jsx)(e.code,{children:"SUBSCRIBE channel1"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u6253\u5f00\u53e6\u4e00\u4e2a\u5ba2\u6237\u7aef\uff0c\u7ed9 channel1 \u53d1\u5e03\u6d88\u606f hello\uff1a",(0,i.jsx)(e.code,{children:"PUBLISH channel1 hello"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7b2c\u4e00\u4e2a\u5ba2\u6237\u7aef\u53ef\u4ee5\u770b\u5230\u53d1\u9001\u7684\u6d88\u606f"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(73295).A+"",width:"552",height:"227"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5ba2\u6237\u7aef\u8fd8\u53ef\u4ee5\u901a\u8fc7 PSUBSCRIBE \u547d\u4ee4\u8ba2\u9605\u4e00\u4e2a\u6216\u591a\u4e2a\u6a21\u5f0f\uff0c\u6bcf\u5f53\u6709\u5176\u4ed6\u5ba2\u6237\u7aef\u5411\u67d0\u4e2a\u9891\u9053\u53d1\u9001\u6d88\u606f\u65f6\uff0c\u6d88\u606f\u4e0d\u4ec5\u4f1a\u88ab\u53d1\u9001\u7ed9\u8fd9\u4e2a\u9891\u9053\u7684\u6240\u6709\u8ba2\u9605\u8005\uff0c\u8fd8\u4f1a\u88ab",(0,i.jsx)(e.strong,{children:"\u53d1\u9001\u7ed9\u6240\u6709\u4e0e\u8fd9\u4e2a\u9891\u9053\u76f8\u5339\u914d\u7684\u6a21\u5f0f\u7684\u8ba2\u9605\u8005"}),"\uff0c\u6bd4\u5982 ",(0,i.jsx)(e.code,{children:"PSUBSCRIBE channel*"})," \u8ba2\u9605\u6a21\u5f0f\uff0c\u4e0e channel1 \u5339\u914d"]}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u53d1\u5e03\u7684\u6d88\u606f\u6ca1\u6709\u6301\u4e45\u5316\uff0c\u6240\u4ee5\u8ba2\u9605\u7684\u5ba2\u6237\u7aef\u53ea\u80fd\u6536\u5230\u8ba2\u9605\u540e\u53d1\u5e03\u7684\u6d88\u606f"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u9891\u9053\u64cd\u4f5c",children:"\u9891\u9053\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u5c06\u6240\u6709\u9891\u9053\u7684\u8ba2\u9605\u5173\u7cfb\u90fd\u4fdd\u5b58\u5728\u670d\u52a1\u5668\u72b6\u6001\u7684 pubsub_channels \u5b57\u5178\u91cc\uff0c\u952e\u662f\u67d0\u4e2a\u88ab\u8ba2\u9605\u7684\u9891\u9053\uff0c\u503c\u662f\u4e00\u4e2a\u8bb0\u5f55\u6240\u6709\u8ba2\u9605\u8fd9\u4e2a\u9891\u9053\u7684\u5ba2\u6237\u7aef\u94fe\u8868"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n\t// \u4fdd\u5b58\u6240\u6709\u9891\u9053\u7684\u8ba2\u9605\u5173\u7cfb\uff0c\n\tdict *pubsub_channels;\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5ba2\u6237\u7aef\u6267\u884c SUBSCRIBE \u547d\u4ee4\u8ba2\u9605\u67d0\u4e2a\u6216\u67d0\u4e9b\u9891\u9053\uff0c\u670d\u52a1\u5668\u4f1a\u5c06\u5ba2\u6237\u7aef\u4e0e\u9891\u9053\u8fdb\u884c\u5173\u8054\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9891\u9053\u5df2\u7ecf\u5b58\u5728\uff0c\u76f4\u63a5\u5c06\u5ba2\u6237\u7aef\u6dfb\u52a0\u5230\u94fe\u8868\u672b\u5c3e"}),"\n",(0,i.jsx)(e.li,{children:"\u9891\u9053\u8fd8\u672a\u6709\u4efb\u4f55\u8ba2\u9605\u8005\uff0c\u5728\u5b57\u5178\u4e2d\u4e3a\u9891\u9053\u521b\u5efa\u4e00\u4e2a\u952e\u503c\u5bf9\uff0c\u518d\u5c06\u5ba2\u6237\u7aef\u6dfb\u52a0\u5230\u94fe\u8868"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"UNSUBSCRIBE \u547d\u4ee4\u7528\u6765\u9000\u8ba2\u67d0\u4e2a\u9891\u9053\uff0c\u670d\u52a1\u5668\u5c06\u4ece pubsub_channels \u4e2d\u89e3\u9664\u5ba2\u6237\u7aef\u4e0e\u88ab\u9000\u8ba2\u9891\u9053\u4e4b\u95f4\u7684\u5173\u8054"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u6a21\u5f0f\u64cd\u4f5c",children:"\u6a21\u5f0f\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u670d\u52a1\u5668\u5c06\u6240\u6709\u6a21\u5f0f\u7684\u8ba2\u9605\u5173\u7cfb\u90fd\u4fdd\u5b58\u5728\u670d\u52a1\u5668\u72b6\u6001\u7684 pubsub_patterns \u5c5e\u6027\u91cc"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"struct redisServer {\n\t// \u4fdd\u5b58\u6240\u6709\u6a21\u5f0f\u8ba2\u9605\u5173\u7cfb\uff0c\u94fe\u8868\u4e2d\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a pubsubPattern\n\tlist *pubsub_patterns;\n}\n\ntypedef struct pubsubPattern {\n    // \u8ba2\u9605\u7684\u5ba2\u6237\u7aef\n    redisClient *client;\n\t// \u88ab\u8ba2\u9605\u7684\u6a21\u5f0f\uff0c\u6bd4\u5982  channel*\n    robj *pattern; \n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5ba2\u6237\u7aef\u6267\u884c PSUBSCRIBE \u547d\u4ee4\u8ba2\u9605\u67d0\u4e2a\u6a21\u5f0f\uff0c\u670d\u52a1\u5668\u4f1a\u65b0\u5efa\u4e00\u4e2a pubsubPattern \u7ed3\u6784\u5e76\u8d4b\u503c\uff0c\u653e\u5165 pubsub_patterns \u94fe\u8868\u7ed3\u5c3e"}),"\n",(0,i.jsx)(e.p,{children:"\u6a21\u5f0f\u7684\u9000\u8ba2\u547d\u4ee4 PUNSUBSCRIBE \u662f\u8ba2\u9605\u547d\u4ee4\u7684\u53cd\u64cd\u4f5c\uff0c\u670d\u52a1\u5668\u5728 pubsub_patterns \u94fe\u8868\u4e2d\u67e5\u627e\u5e76\u5220\u9664\u5bf9\u5e94\u7684\u7ed3\u6784"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u53d1\u9001\u6d88\u606f",children:"\u53d1\u9001\u6d88\u606f"}),"\n",(0,i.jsxs)(e.p,{children:["Redis \u5ba2\u6237\u7aef\u6267\u884c ",(0,i.jsx)(e.code,{children:"PUBLISH <channel> <message>"})," \u547d\u4ee4\u5c06\u6d88\u606f message\u53d1\u9001\u7ed9\u9891\u9053 channel\uff0c\u670d\u52a1\u5668\u4f1a\u6267\u884c\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5728 pubsub_channels \u5b57\u5178\u91cc\u627e\u5230\u9891\u9053 channel \u7684\u8ba2\u9605\u8005\u540d\u5355\uff0c\u5c06\u6d88\u606f message \u53d1\u9001\u7ed9\u6240\u6709\u8ba2\u9605\u8005"}),"\n",(0,i.jsxs)(e.li,{children:["\u904d\u5386\u6574\u4e2a pubsub_patterns \u94fe\u8868\uff0c\u67e5\u627e\u4e0e channel \u9891\u9053\u76f8",(0,i.jsx)(e.strong,{children:"\u5339\u914d\u7684\u6a21\u5f0f"}),"\uff0c\u5e76\u5c06\u6d88\u606f\u53d1\u9001\u7ed9\u6240\u6709\u8ba2\u9605\u4e86\u8fd9\u4e9b\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:"// \u5982\u679c\u9891\u9053\u548c\u6a21\u5f0f\u76f8\u5339\u914d\nif match(channel, pubsubPattern.pattern) {\n    // \u5c06\u6d88\u606f\u53d1\u9001\u7ed9\u8ba2\u9605\u8be5\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\n    send_message(pubsubPattern.client, message);\n}\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u67e5\u770b\u4fe1\u606f",children:"\u67e5\u770b\u4fe1\u606f"}),"\n",(0,i.jsx)(e.p,{children:"PUBSUB \u547d\u4ee4\u7528\u6765\u67e5\u770b\u9891\u9053\u6216\u8005\u6a21\u5f0f\u7684\u76f8\u5173\u4fe1\u606f"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"PUBSUB CHANNELS [pattern]"})," \u8fd4\u56de\u670d\u52a1\u5668\u5f53\u524d\u88ab\u8ba2\u9605\u7684\u9891\u9053\uff0c\u5176\u4e2d pattern \u53c2\u6570\u662f\u53ef\u9009\u7684"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u4e0d\u7ed9\u5b9a pattern  \u53c2\u6570\uff0c\u90a3\u4e48\u547d\u4ee4\u8fd4\u56de\u670d\u52a1\u5668\u5f53\u524d\u88ab\u8ba2\u9605\u7684\u6240\u6709\u9891\u9053"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u7ed9\u5b9a pattern \u53c2\u6570\uff0c\u90a3\u4e48\u547d\u4ee4\u8fd4\u56de\u670d\u52a1\u5668\u5f53\u524d\u88ab\u8ba2\u9605\u7684\u9891\u9053\u4e2d\u4e0e pattern \u6a21\u5f0f\u76f8\u5339\u914d\u7684\u9891\u9053"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"PUBSUB NUMSUB [channel-1 channel-2 ... channel-n]"}),"  \u547d\u4ee4\u63a5\u53d7\u4efb\u610f\u591a\u4e2a\u9891\u9053\u4f5c\u4e3a\u8f93\u5165\u53c2\u6570\uff0c\u5e76\u8fd4\u56de\u8fd9\u4e9b\u9891\u9053\u7684\u8ba2\u9605\u8005\u6570\u91cf"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"PUBSUB NUMPAT"})," \u547d\u4ee4\u7528\u4e8e\u8fd4\u56de\u670d\u52a1\u5668\u5f53\u524d\u88ab\u8ba2\u9605\u6a21\u5f0f\u7684\u6570\u91cf"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"acl-\u6307\u4ee4",children:"ACL \u6307\u4ee4"}),"\n",(0,i.jsx)(e.p,{children:"Redis ACL \u662f Access Control List\uff08\u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff09\u7684\u7f29\u5199\uff0c\u8be5\u529f\u80fd\u5141\u8bb8\u6839\u636e\u53ef\u4ee5\u6267\u884c\u7684\u547d\u4ee4\u548c\u53ef\u4ee5\u8bbf\u95ee\u7684\u952e\u6765\u9650\u5236\u67d0\u4e9b\u8fde\u63a5"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(44989).A+"",width:"554",height:"179"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"acl cat\uff1a\u67e5\u770b\u6dfb\u52a0\u6743\u9650\u6307\u4ee4\u7c7b\u522b"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"acl whoami\uff1a\u67e5\u770b\u5f53\u524d\u7528\u6237"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"acl setuser username on >password ~cached:* +get\uff1a\u8bbe\u7f6e\u6709\u7528\u6237\u540d\u3001\u5bc6\u7801\u3001ACL \u6743\u9650\uff08\u53ea\u80fd get\uff09"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u76d1\u89c6\u5668",children:"\u76d1\u89c6\u5668"}),"\n",(0,i.jsx)(e.p,{children:"MONITOR \u547d\u4ee4\uff0c\u53ef\u4ee5\u5c06\u5ba2\u6237\u7aef\u53d8\u4e3a\u4e00\u4e2a\u76d1\u89c6\u5668\uff0c\u5b9e\u65f6\u5730\u63a5\u6536\u5e76\u6253\u5370\u51fa\u670d\u52a1\u5668\u5f53\u524d\u5904\u7406\u7684\u547d\u4ee4\u8bf7\u6c42\u7684\u76f8\u5173\u4fe1\u606f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-c",children:'// \u5b9e\u73b0\u539f\u7406\ndef MONITOR():\n\t// \u6253\u5f00\u5ba2\u6237\u7aef\u7684\u76d1\u89c6\u5668\u6807\u5fd7\n\tclient.flags |= REDIS_MONITOR\n        \n  \t// \u5c06\u5ba2\u6237\u7aef\u6dfb\u52a0\u5230\u670d\u52a1\u5668\u72b6\u6001\u7684 redisServer.monitors\u94fe\u8868\u7684\u672b\u5c3e\n   \tserver.monitors.append(client)\n  \t// \u5411\u5ba2\u6237\u7aef\u8fd4\u56de ok\n\tsend_reply("OK")\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u670d\u52a1\u5668\u6bcf\u6b21\u5904\u7406\u547d\u4ee4\u8bf7\u6c42\u90fd\u4f1a\u8c03\u7528 replicationFeedMonitors \u51fd\u6570\uff0c\u51fd\u6570\u5c06\u88ab\u5904\u7406\u7684\u547d\u4ee4\u8bf7\u6c42\u7684\u76f8\u5173\u4fe1\u606f",(0,i.jsx)(e.strong,{children:"\u53d1\u9001\u7ed9\u5404\u4e2a\u76d1\u89c6\u5668"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(304).A+"",width:"1041",height:"522"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:'redis> MONITOR \nOK \n1378822099.421623 [0 127.0.0.1:56604] "PING" \n1378822105.089572 [0 127.0.0.1:56604] "SET" "msg" "hello world" \n1378822109.036925 [0 127.0.0.1:56604] "SET" "number" "123" \n1378822140.649496 (0 127.0.0.1:56604] "SADD" "fruits" "Apple" "Banana" "Cherry" \n1378822154.117160 [0 127.0.0.1:56604] "EXPIRE" "msg" "10086" \n1378822257.329412 [0 127.0.0.1:56604] "KEYS" "*" \n1378822258.690131 [0 127.0.0.1:56604] "DBSIZE" \n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u6279\u5904\u7406",children:"\u6279\u5904\u7406"}),"\n",(0,i.jsx)(e.p,{children:"Redis \u7684\u7ba1\u9053 Pipeline \u673a\u5236\u53ef\u4ee5\u4e00\u6b21\u5904\u7406\u591a\u6761\u6307\u4ee4"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Pipeline \u4e2d\u7684\u591a\u6761\u547d\u4ee4\u975e\u539f\u5b50\u6027\uff0c\u56e0\u4e3a\u5728\u5411\u7ba1\u9053\u5185\u6dfb\u52a0\u547d\u4ee4\u65f6\uff0c\u5176\u4ed6\u5ba2\u6237\u7aef\u7684\u53d1\u9001\u7684\u547d\u4ee4\u4ecd\u7136\u5728\u6267\u884c"}),"\n",(0,i.jsx)(e.li,{children:"\u539f\u751f\u6279\u547d\u4ee4\uff08MSET \u7b49\uff09\u662f\u670d\u52a1\u7aef\u5b9e\u73b0\uff0c\u800c Pipeline \u9700\u8981\u670d\u52a1\u7aef\u4e0e\u5ba2\u6237\u7aef\u5171\u540c\u5b8c\u6210"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528 Pipeline \u5c01\u88c5\u7684\u547d\u4ee4\u6570\u91cf\u4e0d\u80fd\u592a\u591a\uff0c\u6570\u636e\u91cf\u8fc7\u5927\u4f1a\u589e\u52a0\u5ba2\u6237\u7aef\u7684\u7b49\u5f85\u65f6\u95f4\uff0c\u9020\u6210\u7f51\u7edc\u963b\u585e\uff0cJedis \u4e2d\u7684 Pipeline \u4f7f\u7528\u65b9\u5f0f\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'// \u521b\u5efa\u7ba1\u9053\nPipeline pipeline = jedis.pipelined();\nfor (int i = 1; i <= 100000; i++) {\n    // \u653e\u5165\u547d\u4ee4\u5230\u7ba1\u9053\n    pipeline.set("key_" + i, "value_" + i);\n    if (i % 1000 == 0) {\n        // \u6bcf\u653e\u51651000\u6761\u547d\u4ee4\uff0c\u6279\u91cf\u6267\u884c\n        pipeline.sync();\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u96c6\u7fa4\u4e0b\u6a21\u5f0f\u4e0b\uff0c\u6279\u5904\u7406\u547d\u4ee4\u7684\u591a\u4e2a key \u5fc5\u987b\u843d\u5728\u4e00\u4e2a\u63d2\u69fd\u4e2d\uff0c\u5426\u5219\u5c31\u4f1a\u5bfc\u81f4\u6267\u884c\u5931\u8d25\uff0cN \u6761\u6279\u5904\u7406\u547d\u4ee4\u7684\u4f18\u5316\u65b9\u5f0f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e32\u884c\u547d\u4ee4\uff1afor \u5faa\u73af\u904d\u5386\uff0c\u4f9d\u6b21\u6267\u884c\u6bcf\u4e2a\u547d\u4ee4"}),"\n",(0,i.jsx)(e.li,{children:"\u4e32\u884c slot\uff1a\u5728\u5ba2\u6237\u7aef\u8ba1\u7b97\u6bcf\u4e2a key \u7684 slot\uff0c\u5c06 slot \u4e00\u81f4\u7684\u5206\u4e3a\u4e00\u7ec4\uff0c\u6bcf\u7ec4\u90fd\u5229\u7528 Pipeline \u6279\u5904\u7406\uff0c\u4e32\u884c\u6267\u884c\u5404\u7ec4\u547d\u4ee4"}),"\n",(0,i.jsxs)(e.li,{children:["\u5e76\u884c slot\uff1a\u5728\u5ba2\u6237\u7aef\u8ba1\u7b97\u6bcf\u4e2a key \u7684 slot\uff0c\u5c06 slot \u4e00\u81f4\u7684\u5206\u4e3a\u4e00\u7ec4\uff0c\u6bcf\u7ec4\u90fd\u5229\u7528 Pipeline \u6279\u5904\u7406\uff0c",(0,i.jsx)(e.strong,{children:"\u5e76\u884c\u6267\u884c\u5404\u7ec4\u547d\u4ee4"})]}),"\n",(0,i.jsx)(e.li,{children:"hash_tag\uff1a\u5c06\u6240\u6709 key \u8bbe\u7f6e\u76f8\u540c\u7684 hash_tag\uff0c\u5219\u6240\u6709 key \u7684 slot \u4e00\u5b9a\u76f8\u540c"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{}),(0,i.jsx)(e.th,{children:"\u8017\u65f6"}),(0,i.jsx)(e.th,{children:"\u4f18\u70b9"}),(0,i.jsx)(e.th,{children:"\u7f3a\u70b9"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u4e32\u884c\u547d\u4ee4"}),(0,i.jsx)(e.td,{children:"N \u6b21\u7f51\u7edc\u8017\u65f6 + N \u6b21\u547d\u4ee4\u8017\u65f6"}),(0,i.jsx)(e.td,{children:"\u5b9e\u73b0\u7b80\u5355"}),(0,i.jsx)(e.td,{children:"\u8017\u65f6\u4e45"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u4e32\u884c slot"}),(0,i.jsx)(e.td,{children:"m \u6b21\u7f51\u7edc\u8017\u65f6 + N \u6b21\u547d\u4ee4\u8017\u65f6\uff0cm = key \u7684 slot \u4e2a\u6570"}),(0,i.jsx)(e.td,{children:"\u8017\u65f6\u8f83\u77ed"}),(0,i.jsx)(e.td,{children:"\u5b9e\u73b0\u7a0d\u590d\u6742"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u5e76\u884c slot"}),(0,i.jsx)(e.td,{children:"1 \u6b21\u7f51\u7edc\u8017\u65f6 + N \u6b21\u547d\u4ee4\u8017\u65f6"}),(0,i.jsx)(e.td,{children:"\u8017\u65f6\u975e\u5e38\u77ed"}),(0,i.jsx)(e.td,{children:"\u5b9e\u73b0\u590d\u6742"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"hash_tag"}),(0,i.jsx)(e.td,{children:"1 \u6b21\u7f51\u7edc\u8017\u65f6 + N \u6b21\u547d\u4ee4\u8017\u65f6"}),(0,i.jsx)(e.td,{children:"\u8017\u65f6\u975e\u5e38\u77ed\u3001\u5b9e\u73b0\u7b80\u5355"}),(0,i.jsxs)(e.td,{children:["\u5bb9\u6613\u51fa\u73b0",(0,i.jsx)(e.strong,{children:"\u6570\u636e\u503e\u659c"})]})]})]})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u89e3\u51b3\u65b9\u6848",children:"\u89e3\u51b3\u65b9\u6848"}),"\n",(0,i.jsx)(e.h3,{id:"\u7f13\u5b58\u65b9\u6848",children:"\u7f13\u5b58\u65b9\u6848"}),"\n",(0,i.jsx)(e.h4,{id:"\u7f13\u5b58\u6a21\u5f0f",children:"\u7f13\u5b58\u6a21\u5f0f"}),"\n",(0,i.jsx)(e.h5,{id:"\u65c1\u8def\u7f13\u5b58",children:"\u65c1\u8def\u7f13\u5b58"}),"\n",(0,i.jsx)(e.p,{children:"\u7f13\u5b58\u672c\u8d28\uff1a\u5f25\u8865 CPU \u7684\u9ad8\u7b97\u529b\u548c IO \u7684\u6162\u8bfb\u5199\u4e4b\u95f4\u5de8\u5927\u7684\u9e3f\u6c9f"}),"\n",(0,i.jsx)(e.p,{children:"\u65c1\u8def\u7f13\u5b58\u6a21\u5f0f Cache Aside Pattern \u662f\u5e73\u65f6\u4f7f\u7528\u6bd4\u8f83\u591a\u7684\u4e00\u4e2a\u7f13\u5b58\u8bfb\u5199\u6a21\u5f0f\uff0c\u6bd4\u8f83\u9002\u5408\u8bfb\u8bf7\u6c42\u6bd4\u8f83\u591a\u7684\u573a\u666f"}),"\n",(0,i.jsx)(e.p,{children:"Cache Aside Pattern \u4e2d\u670d\u52a1\u7aef\u9700\u8981\u540c\u65f6\u7ef4\u7cfb DB \u548c cache\uff0c\u5e76\u4e14\u662f\u4ee5 DB \u7684\u7ed3\u679c\u4e3a\u51c6"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5199\u64cd\u4f5c\uff1a\u5148\u66f4\u65b0 DB\uff0c\u7136\u540e\u76f4\u63a5\u5220\u9664 cache"}),"\n",(0,i.jsx)(e.li,{children:"\u8bfb\u64cd\u4f5c\uff1a\u4ece cache \u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u8bfb\u53d6\u5230\u5c31\u76f4\u63a5\u8fd4\u56de\uff1b\u8bfb\u53d6\u4e0d\u5230\u5c31\u4ece DB \u4e2d\u8bfb\u53d6\u6570\u636e\u8fd4\u56de\uff0c\u5e76\u653e\u5230 cache"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u65f6\u5e8f\u5bfc\u81f4\u7684\u4e0d\u4e00\u81f4\u95ee\u9898\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728\u5199\u6570\u636e\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u80fd\u5148\u5220\u9664 cache \u518d\u66f4\u65b0 DB\uff0c\u56e0\u4e3a\u4f1a\u9020\u6210\u7f13\u5b58\u7684\u4e0d\u4e00\u81f4\u3002\u6bd4\u5982\u8bf7\u6c42 1 \u5148\u5199\u6570\u636e A\uff0c\u8bf7\u6c42 2 \u968f\u540e\u8bfb\u6570\u636e A\uff0c\u5f53\u8bf7\u6c42 1 \u5220\u9664 cache \u540e\uff0c\u8bf7\u6c42 2 \u76f4\u63a5\u8bfb\u53d6\u4e86 DB\uff0c\u6b64\u65f6\u8bf7\u6c42 1 \u8fd8\u6ca1\u5199\u5165 DB\uff08\u5ef6\u8fdf\u53cc\u5220\uff09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728\u5199\u6570\u636e\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5148\u66f4\u65b0 DB \u518d\u5220\u9664 cache \u4e5f\u4f1a\u51fa\u73b0\u95ee\u9898\uff0c\u4f46\u662f\u6982\u7387\u5f88\u5c0f\uff0c\u56e0\u4e3a\u7f13\u5b58\u7684\u5199\u5165\u901f\u5ea6\u975e\u5e38\u5feb"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u65c1\u8def\u7f13\u5b58\u7684\u7f3a\u70b9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9996\u6b21\u8bf7\u6c42\u6570\u636e\u4e00\u5b9a\u4e0d\u5728 cache \u7684\u95ee\u9898\uff0c\u4e00\u822c\u91c7\u7528\u7f13\u5b58\u9884\u70ed\u7684\u65b9\u6cd5\uff0c\u5c06\u70ed\u70b9\u6570\u636e\u53ef\u4ee5\u63d0\u524d\u653e\u5165 cache \u4e2d"}),"\n",(0,i.jsx)(e.li,{children:"\u5199\u64cd\u4f5c\u6bd4\u8f83\u9891\u7e41\u7684\u8bdd\u5bfc\u81f4 cache \u4e2d\u7684\u6570\u636e\u4f1a\u88ab\u9891\u7e41\u88ab\u5220\u9664\uff0c\u5f71\u54cd\u7f13\u5b58\u547d\u4e2d\u7387"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u5220\u9664\u7f13\u5b58\u800c\u4e0d\u662f\u66f4\u65b0\u7f13\u5b58\u7684\u539f\u56e0"}),"\uff1a\u6bcf\u6b21\u66f4\u65b0\u6570\u636e\u5e93\u90fd\u66f4\u65b0\u7f13\u5b58\uff0c\u9020\u6210\u65e0\u6548\u5199\u64cd\u4f5c\u8f83\u591a\uff08\u61d2\u60f0\u52a0\u8f7d\uff0c\u9700\u8981\u7684\u65f6\u5019\u518d\u653e\u5165\u7f13\u5b58\uff09"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u8bfb\u5199\u7a7f\u900f",children:"\u8bfb\u5199\u7a7f\u900f"}),"\n",(0,i.jsx)(e.p,{children:"\u8bfb\u5199\u7a7f\u900f\u6a21\u5f0f Read/Write Through Pattern\uff1a\u670d\u52a1\u7aef\u628a cache \u89c6\u4e3a\u4e3b\u8981\u6570\u636e\u5b58\u50a8\uff0c\u4ece\u4e2d\u8bfb\u53d6\u6570\u636e\u5e76\u5c06\u6570\u636e\u5199\u5165\u5176\u4e2d\uff0ccache \u8d1f\u8d23\u5c06\u6b64\u6570\u636e\u540c\u6b65\u5199\u5165 DB\uff0c\u4ece\u800c\u51cf\u8f7b\u4e86\u5e94\u7528\u7a0b\u5e8f\u7684\u804c\u8d23"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5199\u64cd\u4f5c\uff1a\u5148\u67e5 cache\uff0ccache \u4e2d\u4e0d\u5b58\u5728\uff0c\u76f4\u63a5\u66f4\u65b0 DB\uff1bcache \u4e2d\u5b58\u5728\u5219\u5148\u66f4\u65b0 cache\uff0c\u7136\u540e cache \u670d\u52a1\u66f4\u65b0 DB\uff08\u540c\u6b65\u66f4\u65b0 cache \u548c DB\uff09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bfb\u64cd\u4f5c\uff1a\u4ece cache \u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u8bfb\u53d6\u5230\u5c31\u76f4\u63a5\u8fd4\u56de \uff1b\u8bfb\u53d6\u4e0d\u5230\u5148\u4ece DB \u52a0\u8f7d\uff0c\u5199\u5165\u5230 cache \u540e\u8fd4\u56de\u54cd\u5e94"}),"\n",(0,i.jsx)(e.p,{children:"Read-Through Pattern \u5b9e\u9645\u53ea\u662f\u5728 Cache-Aside Pattern \u4e4b\u4e0a\u8fdb\u884c\u4e86\u5c01\u88c5\u3002\u5728 Cache-Aside Pattern \u4e0b\uff0c\u53d1\u751f\u8bfb\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u5982\u679c cache \u4e2d\u4e0d\u5b58\u5728\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u662f\u7531\u5ba2\u6237\u7aef\u8d1f\u8d23\u628a\u6570\u636e\u5199\u5165 cache\uff0c\u800c Read Through Pattern \u5219\u662f cache \u670d\u52a1\u81ea\u5df1\u6765\u5199\u5165\u7f13\u5b58\u7684\uff0c\u5bf9\u5ba2\u6237\u7aef\u662f\u900f\u660e\u7684"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Read-Through Pattern \u4e5f\u5b58\u5728\u9996\u6b21\u4e0d\u547d\u4e2d\u7684\u95ee\u9898\uff0c\u91c7\u7528\u7f13\u5b58\u9884\u70ed\u89e3\u51b3"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u5f02\u6b65\u7f13\u5b58",children:"\u5f02\u6b65\u7f13\u5b58"}),"\n",(0,i.jsxs)(e.p,{children:["\u5f02\u6b65\u7f13\u5b58\u5199\u5165 Write Behind Pattern \u7531 cache \u670d\u52a1\u6765\u8d1f\u8d23 cache \u548c DB \u7684\u8bfb\u5199\uff0c\u5bf9\u6bd4\u8bfb\u5199\u7a7f\u900f\u4e0d\u540c\u7684\u662f Write Behind Caching \u662f\u53ea\u66f4\u65b0\u7f13\u5b58\uff0c\u4e0d\u76f4\u63a5\u66f4\u65b0 DB\uff0c\u6539\u4e3a",(0,i.jsx)(e.strong,{children:"\u5f02\u6b65\u6279\u91cf"}),"\u7684\u65b9\u5f0f\u6765\u66f4\u65b0 DB\uff0c\u53ef\u4ee5\u51cf\u5c0f\u5199\u7684\u6210\u672c"]}),"\n",(0,i.jsx)(e.p,{children:"\u7f3a\u70b9\uff1a\u8fd9\u79cd\u6a21\u5f0f\u5bf9\u6570\u636e\u4e00\u81f4\u6027\u6ca1\u6709\u9ad8\u8981\u6c42\uff0c\u53ef\u80fd\u51fa\u73b0 cache \u8fd8\u6ca1\u5f02\u6b65\u66f4\u65b0 DB\uff0c\u670d\u52a1\u5c31\u6302\u6389\u4e86"}),"\n",(0,i.jsx)(e.p,{children:"\u5e94\u7528\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"DB \u7684\u5199\u6027\u80fd\u975e\u5e38\u9ad8\uff0c\u9002\u5408\u4e00\u4e9b\u6570\u636e\u7ecf\u5e38\u53d8\u5316\u53c8\u5bf9\u6570\u636e\u4e00\u81f4\u6027\u8981\u6c42\u4e0d\u9ad8\u7684\u573a\u666f\uff0c\u6bd4\u5982\u6d4f\u89c8\u91cf\u3001\u70b9\u8d5e\u91cf"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"MySQL \u7684 InnoDB Buffer Pool \u673a\u5236\u7528\u5230\u4e86\u8fd9\u79cd\u7b56\u7565"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u7f13\u5b58\u4e00\u81f4",children:"\u7f13\u5b58\u4e00\u81f4"}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u7f13\u5b58\u4ee3\u8868\u4e0d\u9700\u8981\u5f3a\u4e00\u81f4\u6027\uff0c\u53ea\u9700\u8981\u6700\u7ec8\u4e00\u81f4\u6027"}),"\n",(0,i.jsx)(e.p,{children:"\u7f13\u5b58\u4e0d\u4e00\u81f4\u7684\u65b9\u6cd5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5e93\u548c\u7f13\u5b58\u6570\u636e\u5f3a\u4e00\u81f4\u573a\u666f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u540c\u6b65\u53cc\u5199\uff1a\u66f4\u65b0 DB \u65f6\u540c\u6837\u66f4\u65b0 cache\uff0c\u4fdd\u8bc1\u5728\u4e00\u4e2a\u4e8b\u52a1\u4e2d\uff0c\u901a\u8fc7\u52a0\u9501\u6765\u4fdd\u8bc1\u66f4\u65b0 cache \u65f6\u4e0d\u5b58\u5728\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5ef6\u8fdf\u53cc\u5220\uff1a\u5148\u6dd8\u6c70\u7f13\u5b58\u518d\u5199\u6570\u636e\u5e93\uff0c\u4f11\u7720 1 \u79d2\u518d\u6b21\u6dd8\u6c70\u7f13\u5b58\uff0c\u53ef\u4ee5\u5c06 1 \u79d2\u5185\u9020\u6210\u7684\u7f13\u5b58\u810f\u6570\u636e\u518d\u6b21\u5220\u9664"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5f02\u6b65\u901a\u77e5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u57fa\u4e8e MQ \u7684\u5f02\u6b65\u901a\u77e5\uff1a\u5bf9\u6570\u636e\u7684\u4fee\u6539\u540e\uff0c\u4ee3\u7801\u9700\u8981\u53d1\u9001\u4e00\u6761\u6d88\u606f\u5230 MQ \u4e2d\uff0c\u7f13\u5b58\u670d\u52a1\u76d1\u542c MQ \u6d88\u606f"}),"\n",(0,i.jsxs)(e.li,{children:["Canal \u8ba2\u9605 MySQL binlog \u7684\u53d8\u66f4\u4e0a\u62a5\u7ed9 Kafka\uff0c\u7cfb\u7edf\u76d1\u542c Kafka \u6d88\u606f\u89e6\u53d1\u7f13\u5b58\u5931\u6548\uff0c\u6216\u8005\u76f4\u63a5\u5c06\u53d8\u66f4\u53d1\u9001\u5230\u5904\u7406\u670d\u52a1\uff0c",(0,i.jsx)(e.strong,{children:"\u6ca1\u6709\u4efb\u4f55\u4ee3\u7801\u4fb5\u5165"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4f4e\u8026\u5408\uff0c\u53ef\u4ee5\u540c\u65f6\u901a\u77e5\u591a\u4e2a\u7f13\u5b58\u670d\u52a1\uff0c\u4f46\u662f\u65f6\u6548\u6027\u4e00\u822c\uff0c\u53ef\u80fd\u5b58\u5728\u4e2d\u95f4\u4e0d\u4e00\u81f4\u72b6\u6001"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f4e\u4e00\u81f4\u6027\u573a\u666f\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u66f4\u65b0 DB \u7684\u65f6\u5019\u540c\u6837\u66f4\u65b0 cache\uff0c\u4f46\u662f\u7ed9\u7f13\u5b58\u52a0\u4e00\u4e2a\u6bd4\u8f83\u77ed\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u5373\u4f7f\u6570\u636e\u4e0d\u4e00\u81f4\u5f71\u54cd\u4e5f\u6bd4\u8f83\u5c0f"}),"\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528 Redis \u81ea\u5e26\u7684\u5185\u5b58\u6dd8\u6c70\u673a\u5236"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u7f13\u5b58\u95ee\u9898",children:"\u7f13\u5b58\u95ee\u9898"}),"\n",(0,i.jsx)(e.h5,{id:"\u7f13\u5b58\u9884\u70ed",children:"\u7f13\u5b58\u9884\u70ed"}),"\n",(0,i.jsx)(e.p,{children:"\u573a\u666f\uff1a\u5b95\u673a\uff0c\u670d\u52a1\u5668\u542f\u52a8\u540e\u8fc5\u901f\u5b95\u673a"}),"\n",(0,i.jsx)(e.p,{children:"\u95ee\u9898\u6392\u67e5\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bf7\u6c42\u6570\u91cf\u8f83\u9ad8\uff0c\u5927\u91cf\u7684\u8bf7\u6c42\u8fc7\u6765\u4e4b\u540e\u90fd\u9700\u8981\u53bb\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u6570\u636e\uff0c\u4f46\u662f\u7f13\u5b58\u4e2d\u53c8\u6ca1\u6709\uff0c\u6b64\u65f6\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u6570\u636e\u7136\u540e\u5c06\u6570\u636e\u518d\u5b58\u5165\u7f13\u5b58\uff0c\u9020\u6210\u4e86\u77ed\u671f\u5185\u5bf9 redis \u7684\u9ad8\u5f3a\u5ea6\u64cd\u4f5c\u4ece\u800c\u5bfc\u81f4\u95ee\u9898"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e3b\u4ece\u4e4b\u95f4\u6570\u636e\u541e\u5410\u91cf\u8f83\u5927\uff0c\u6570\u636e\u540c\u6b65\u64cd\u4f5c\u9891\u5ea6\u8f83\u9ad8"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6848\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u524d\u7f6e\u51c6\u5907\u5de5\u4f5c\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u65e5\u5e38\u4f8b\u884c\u7edf\u8ba1\u6570\u636e\u8bbf\u95ee\u8bb0\u5f55\uff0c\u7edf\u8ba1\u8bbf\u95ee\u9891\u5ea6\u8f83\u9ad8\u7684\u70ed\u70b9\u6570\u636e"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5229\u7528 LRU \u6570\u636e\u5220\u9664\u7b56\u7565\uff0c\u6784\u5efa\u6570\u636e\u7559\u5b58\u961f\u5217\u4f8b\u5982\uff1astorm \u4e0e kafka \u914d\u5408"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u51c6\u5907\u5de5\u4f5c\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5c06\u7edf\u8ba1\u7ed3\u679c\u4e2d\u7684\u6570\u636e\u5206\u7c7b\uff0c\u6839\u636e\u7ea7\u522b\uff0credis \u4f18\u5148\u52a0\u8f7d\u7ea7\u522b\u8f83\u9ad8\u7684\u70ed\u70b9\u6570\u636e"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5229\u7528\u5206\u5e03\u5f0f\u591a\u670d\u52a1\u5668\u540c\u65f6\u8fdb\u884c\u6570\u636e\u8bfb\u53d6\uff0c\u63d0\u901f\u6570\u636e\u52a0\u8f7d\u8fc7\u7a0b"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u70ed\u70b9\u6570\u636e\u4e3b\u4ece\u540c\u65f6\u9884\u70ed"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b9e\u65bd\uff1a"}),"\n",(0,i.jsxs)(e.ol,{start:"4",children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u811a\u672c\u7a0b\u5e8f\u56fa\u5b9a\u89e6\u53d1\u6570\u636e\u9884\u70ed\u8fc7\u7a0b"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u6761\u4ef6\u5141\u8bb8\uff0c\u4f7f\u7528\u4e86 CDN\uff08\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\uff09\uff0c\u6548\u679c\u4f1a\u66f4\u597d"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u603b\u7684\u6765\u8bf4\uff1a\u7f13\u5b58\u9884\u70ed\u5c31\u662f\u7cfb\u7edf\u542f\u52a8\u524d\uff0c\u63d0\u524d\u5c06\u76f8\u5173\u7684\u7f13\u5b58\u6570\u636e\u76f4\u63a5\u52a0\u8f7d\u5230\u7f13\u5b58\u7cfb\u7edf\u3002\u907f\u514d\u5728\u7528\u6237\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u5148\u67e5\u8be2\u6570\u636e\u5e93\uff0c\u7136\u540e\u518d\u5c06\u6570\u636e\u7f13\u5b58\u7684\u95ee\u9898\uff0c\u7528\u6237\u76f4\u63a5\u67e5\u8be2\u4e8b\u5148\u88ab\u9884\u70ed\u7684\u7f13\u5b58\u6570\u636e"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u7f13\u5b58\u96ea\u5d29",children:"\u7f13\u5b58\u96ea\u5d29"}),"\n",(0,i.jsx)(e.p,{children:"\u573a\u666f\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5d29\u6e83\uff0c\u4e00\u8fde\u4e32\u7684\u95ee\u9898\u4f1a\u968f\u4e4b\u800c\u6765"}),"\n",(0,i.jsxs)(e.p,{children:["\u95ee\u9898\u6392\u67e5\uff1a\u5728\u4e00\u4e2a\u8f83\u77ed\u7684\u65f6\u95f4\u5185\uff0c",(0,i.jsx)(e.strong,{children:"\u7f13\u5b58\u4e2d\u8f83\u591a\u7684 key \u96c6\u4e2d\u8fc7\u671f"}),"\uff0c\u6b64\u5468\u671f\u5185\u8bf7\u6c42\u8bbf\u95ee\u8fc7\u671f\u7684\u6570\u636e Redis \u672a\u547d\u4e2d\uff0cRedis \u5411\u6570\u636e\u5e93\u83b7\u53d6\u6570\u636e\uff0c\u6570\u636e\u5e93\u540c\u65f6\u6536\u5230\u5927\u91cf\u7684\u8bf7\u6c42\u65e0\u6cd5\u53ca\u65f6\u5904\u7406\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6848\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u52a0\u9501\uff0c\u614e\u7528"}),"\n",(0,i.jsx)(e.li,{children:"\u8bbe\u7f6e\u70ed\u70b9\u6570\u636e\u6c38\u8fdc\u4e0d\u8fc7\u671f\uff0c\u5982\u679c\u7f13\u5b58\u6570\u636e\u5e93\u662f\u5206\u5e03\u5f0f\u90e8\u7f72\uff0c\u5c06\u70ed\u70b9\u6570\u636e\u5747\u5300\u5206\u5e03\u5728\u4e0d\u540c\u641e\u5f97\u7f13\u5b58\u6570\u636e\u5e93\u4e2d"}),"\n",(0,i.jsx)(e.li,{children:"\u7f13\u5b58\u6570\u636e\u7684\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e\u968f\u673a\uff0c\u9632\u6b62\u540c\u4e00\u65f6\u95f4\u5927\u91cf\u6570\u636e\u8fc7\u671f\u73b0\u8c61\u53d1\u751f"}),"\n",(0,i.jsxs)(e.li,{children:["\u6784\u5efa",(0,i.jsx)(e.strong,{children:"\u591a\u7ea7\u7f13\u5b58"}),"\u67b6\u6784\uff0cNginx \u7f13\u5b58 + Redis \u7f13\u5b58 + ehcache \u7f13\u5b58"]}),"\n",(0,i.jsx)(e.li,{children:"\u707e\u96be\u9884\u8b66\u673a\u5236\uff0c\u76d1\u63a7 Redis \u670d\u52a1\u5668\u6027\u80fd\u6307\u6807\uff0cCPU \u4f7f\u7528\u7387\u3001\u5185\u5b58\u5bb9\u91cf\u3001\u5e73\u5747\u54cd\u5e94\u65f6\u95f4\u3001\u7ebf\u7a0b\u6570"}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u9650\u6d41\u3001\u964d\u7ea7"}),"\uff1a\u77ed\u65f6\u95f4\u8303\u56f4\u5185\u727a\u7272\u4e00\u4e9b\u5ba2\u6237\u4f53\u9a8c\uff0c\u9650\u5236\u4e00\u90e8\u5206\u8bf7\u6c42\u8bbf\u95ee\uff0c\u964d\u4f4e\u5e94\u7528\u670d\u52a1\u5668\u538b\u529b\uff0c\u5f85\u4e1a\u52a1\u4f4e\u901f\u8fd0\u8f6c\u540e\u518d\u9010\u6b65\u653e\u5f00\u8bbf\u95ee"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u603b\u7684\u6765\u8bf4\uff1a\u7f13\u5b58\u96ea\u5d29\u5c31\u662f\u77ac\u95f4\u8fc7\u671f\u6570\u636e\u91cf\u592a\u5927\uff0c\u5bfc\u81f4\u5bf9\u6570\u636e\u5e93\u670d\u52a1\u5668\u9020\u6210\u538b\u529b\u3002\u5982\u80fd\u591f\u6709\u6548\u907f\u514d\u8fc7\u671f\u65f6\u95f4\u96c6\u4e2d\uff0c\u53ef\u4ee5\u6709\u6548\u89e3\u51b3\u96ea\u5d29\u73b0\u8c61\u7684\u51fa\u73b0\uff08\u7ea6 40%\uff09\uff0c\u914d\u5408\u5176\u4ed6\u7b56\u7565\u4e00\u8d77\u4f7f\u7528\uff0c\u5e76\u76d1\u63a7\u670d\u52a1\u5668\u7684\u8fd0\u884c\u6570\u636e\uff0c\u6839\u636e\u8fd0\u884c\u8bb0\u5f55\u505a\u5feb\u901f\u8c03\u6574\u3002"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u7f13\u5b58\u51fb\u7a7f",children:"\u7f13\u5b58\u51fb\u7a7f"}),"\n",(0,i.jsx)(e.p,{children:"\u7f13\u5b58\u51fb\u7a7f\u4e5f\u53eb\u70ed\u70b9 Key \u95ee\u9898"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Redis \u4e2d\u67d0\u4e2a key \u8fc7\u671f\uff0c\u8be5 key \u8bbf\u95ee\u91cf\u5de8\u5927"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u591a\u4e2a\u6570\u636e\u8bf7\u6c42\u4ece\u670d\u52a1\u5668\u76f4\u63a5\u538b\u5230 Redis \u540e\uff0c\u5747\u672a\u547d\u4e2d"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Redis \u5728\u77ed\u65f6\u95f4\u5185\u53d1\u8d77\u4e86\u5927\u91cf\u5bf9\u6570\u636e\u5e93\u4e2d\u540c\u4e00\u6570\u636e\u7684\u8bbf\u95ee"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6848\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u9884\u5148\u8bbe\u5b9a\uff1a\u4ee5\u7535\u5546\u4e3a\u4f8b\uff0c\u6bcf\u4e2a\u5546\u5bb6\u6839\u636e\u5e97\u94fa\u7b49\u7ea7\uff0c\u6307\u5b9a\u82e5\u5e72\u6b3e\u4e3b\u6253\u5546\u54c1\uff0c\u5728\u8d2d\u7269\u8282\u671f\u95f4\uff0c\u52a0\u5927\u6b64\u7c7b\u4fe1\u606f key \u7684\u8fc7\u671f\u65f6\u957f \u6ce8\u610f\uff1a\u8d2d\u7269\u8282\u4e0d\u4ec5\u4ec5\u6307\u5f53\u5929\uff0c\u4ee5\u53ca\u540e\u7eed\u82e5\u5e72\u5929\uff0c\u8bbf\u95ee\u5cf0\u503c\u5448\u73b0\u9010\u6e10\u964d\u4f4e\u7684\u8d8b\u52bf"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u73b0\u573a\u8c03\u6574\uff1a\u76d1\u63a7\u8bbf\u95ee\u91cf\uff0c\u5bf9\u81ea\u7136\u6d41\u91cf\u6fc0\u589e\u7684\u6570\u636e",(0,i.jsx)(e.strong,{children:"\u5ef6\u957f\u8fc7\u671f\u65f6\u95f4\u6216\u8bbe\u7f6e\u4e3a\u6c38\u4e45\u6027 key"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u540e\u53f0\u5237\u65b0\u6570\u636e\uff1a\u542f\u52a8\u5b9a\u65f6\u4efb\u52a1\uff0c\u9ad8\u5cf0\u671f\u6765\u4e34\u4e4b\u524d\uff0c\u5237\u65b0\u6570\u636e\u6709\u6548\u671f\uff0c\u786e\u4fdd\u4e0d\u4e22\u5931"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u4e8c\u7ea7\u7f13\u5b58"}),"\uff1a\u8bbe\u7f6e\u4e0d\u540c\u7684\u5931\u6548\u65f6\u95f4\uff0c\u4fdd\u969c\u4e0d\u4f1a\u88ab\u540c\u65f6\u6dd8\u6c70\u5c31\u884c"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u52a0\u9501\uff1a\u5206\u5e03\u5f0f\u9501\uff0c\u9632\u6b62\u88ab\u51fb\u7a7f\uff0c\u4f46\u662f\u8981\u6ce8\u610f\u4e5f\u662f\u6027\u80fd\u74f6\u9888\uff0c\u614e\u91cd"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u603b\u7684\u6765\u8bf4\uff1a\u7f13\u5b58\u51fb\u7a7f\u5c31\u662f\u5355\u4e2a\u9ad8\u70ed\u6570\u636e\u8fc7\u671f\u7684\u77ac\u95f4\uff0c\u6570\u636e\u8bbf\u95ee\u91cf\u8f83\u5927\uff0c\u672a\u547d\u4e2d Redis \u540e\uff0c\u53d1\u8d77\u4e86\u5927\u91cf\u5bf9\u540c\u4e00\u6570\u636e\u7684\u6570\u636e\u5e93\u8bbf\u95ee\uff0c\u5bfc\u81f4\u5bf9\u6570\u636e\u5e93\u670d\u52a1\u5668\u9020\u6210\u538b\u529b\u3002\u5e94\u5bf9\u7b56\u7565\u5e94\u8be5\u5728\u4e1a\u52a1\u6570\u636e\u5206\u6790\u4e0e\u9884\u9632\u65b9\u9762\u8fdb\u884c\uff0c\u914d\u5408\u8fd0\u884c\u76d1\u63a7\u6d4b\u8bd5\u4e0e\u5373\u65f6\u8c03\u6574\u7b56\u7565\uff0c\u6bd5\u7adf\u5355\u4e2a key \u7684\u8fc7\u671f\u76d1\u63a7\u96be\u5ea6\u8f83\u9ad8\uff0c\u914d\u5408\u96ea\u5d29\u5904\u7406\u7b56\u7565\u5373\u53ef"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"\u7f13\u5b58\u7a7f\u900f",children:"\u7f13\u5b58\u7a7f\u900f"}),"\n",(0,i.jsx)(e.p,{children:"\u573a\u666f\uff1a\u7cfb\u7edf\u5e73\u7a33\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5e94\u7528\u670d\u52a1\u5668\u6d41\u91cf\u968f\u65f6\u95f4\u589e\u91cf\u8f83\u5927\uff0cRedis \u670d\u52a1\u5668\u547d\u4e2d\u7387\u968f\u65f6\u95f4\u9010\u6b65\u964d\u4f4e\uff0cRedis \u5185\u5b58\u5e73\u7a33\uff0c\u5185\u5b58\u65e0\u538b\u529b\uff0cRedis \u670d\u52a1\u5668 CPU \u5360\u7528\u6fc0\u589e\uff0c\u6570\u636e\u5e93\u670d\u52a1\u5668\u538b\u529b\u6fc0\u589e\uff0c\u6570\u636e\u5e93\u5d29\u6e83"}),"\n",(0,i.jsx)(e.p,{children:"\u95ee\u9898\u6392\u67e5\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Redis \u4e2d\u5927\u9762\u79ef\u51fa\u73b0\u672a\u547d\u4e2d"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u51fa\u73b0\u975e\u6b63\u5e38 URL \u8bbf\u95ee"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u95ee\u9898\u5206\u6790\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8bbf\u95ee\u4e86\u4e0d\u5b58\u5728\u7684\u6570\u636e\uff0c\u8df3\u8fc7\u4e86 Redis \u7f13\u5b58\uff0c\u6570\u636e\u5e93\u9875\u67e5\u8be2\u4e0d\u5230\u5bf9\u5e94\u6570\u636e"}),"\n",(0,i.jsx)(e.li,{children:"Redis \u83b7\u53d6\u5230 null \u6570\u636e\u672a\u8fdb\u884c\u6301\u4e45\u5316\uff0c\u76f4\u63a5\u8fd4\u56de"}),"\n",(0,i.jsx)(e.li,{children:"\u51fa\u73b0\u9ed1\u5ba2\u653b\u51fb\u670d\u52a1\u5668"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6848\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7f13\u5b58 null\uff1a\u5bf9\u67e5\u8be2\u7ed3\u679c\u4e3a null \u7684\u6570\u636e\u8fdb\u884c\u7f13\u5b58\uff0c\u8bbe\u5b9a\u77ed\u65f6\u9650\uff0c\u4f8b\u5982 30-60 \u79d2\uff0c\u6700\u9ad8 5 \u5206\u949f"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u767d\u540d\u5355\u7b56\u7565\uff1a\u63d0\u524d\u9884\u70ed\u5404\u79cd\u5206\u7c7b",(0,i.jsx)(e.strong,{children:"\u6570\u636e id \u5bf9\u5e94\u7684 bitmaps"}),"\uff0cid \u4f5c\u4e3a bitmaps \u7684 offset\uff0c\u76f8\u5f53\u4e8e\u8bbe\u7f6e\u4e86\u6570\u636e\u767d\u540d\u5355\u3002\u5f53\u52a0\u8f7d\u6b63\u5e38\u6570\u636e\u65f6\u653e\u884c\uff0c\u52a0\u8f7d\u5f02\u5e38\u6570\u636e\u65f6\u76f4\u63a5\u62e6\u622a\uff08\u6548\u7387\u504f\u4f4e\uff09\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5e03\u9686\u8fc7\u6ee4\u5668\uff08\u6709\u5173\u5e03\u9686\u8fc7\u6ee4\u5668\u7684\u547d\u4e2d\u95ee\u9898\u5bf9\u5f53\u524d\u72b6\u51b5\u53ef\u4ee5\u5ffd\u7565\uff09"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5b9e\u65f6\u76d1\u63a7\uff1a\u5b9e\u65f6\u76d1\u63a7 Redis \u547d\u4e2d\u7387\uff08\u4e1a\u52a1\u6b63\u5e38\u8303\u56f4\u65f6\uff0c\u901a\u5e38\u4f1a\u6709\u4e00\u4e2a\u6ce2\u52a8\u503c\uff09\u4e0e null \u6570\u636e\u7684\u5360\u6bd4"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u975e\u6d3b\u52a8\u65f6\u6bb5\u6ce2\u52a8\uff1a\u901a\u5e38\u68c0\u6d4b 3-5 \u500d\uff0c\u8d85\u8fc7 5 \u500d\u7eb3\u5165\u91cd\u70b9\u6392\u67e5\u5bf9\u8c61"}),"\n",(0,i.jsx)(e.li,{children:"\u6d3b\u52a8\u65f6\u6bb5\u6ce2\u52a8\uff1a\u901a\u5e38\u68c0\u6d4b10-50 \u500d\uff0c\u8d85\u8fc7 50 \u500d\u7eb3\u5165\u91cd\u70b9\u6392\u67e5\u5bf9\u8c61"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6839\u636e\u500d\u6570\u4e0d\u540c\uff0c\u542f\u52a8\u4e0d\u540c\u7684\u6392\u67e5\u6d41\u7a0b\u3002\u7136\u540e\u4f7f\u7528\u9ed1\u540d\u5355\u8fdb\u884c\u9632\u63a7"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"key \u52a0\u5bc6\uff1a\u4e34\u65f6\u542f\u52a8\u9632\u707e\u4e1a\u52a1 key\uff0c\u5bf9 key \u8fdb\u884c\u4e1a\u52a1\u5c42\u4f20\u8f93\u52a0\u5bc6\u670d\u52a1\uff0c\u8bbe\u5b9a\u6821\u9a8c\u7a0b\u5e8f\uff0c\u8fc7\u6765\u7684 key \u6821\u9a8c\uff1b\u4f8b\u5982\u6bcf\u5929\u968f\u673a\u5206\u914d 60 \u4e2a\u52a0\u5bc6\u4e32\uff0c\u6311\u9009 2 \u5230 3 \u4e2a\uff0c\u6df7\u6dc6\u5230\u9875\u9762\u6570\u636e id \u4e2d\uff0c\u53d1\u73b0\u8bbf\u95ee key \u4e0d\u6ee1\u8db3\u89c4\u5219\uff0c\u9a73\u56de\u6570\u636e\u8bbf\u95ee"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u603b\u7684\u6765\u8bf4\uff1a\u7f13\u5b58\u51fb\u7a7f\u662f\u6307\u8bbf\u95ee\u4e86\u4e0d\u5b58\u5728\u7684\u6570\u636e\uff0c\u8df3\u8fc7\u4e86\u5408\u6cd5\u6570\u636e\u7684 Redis \u6570\u636e\u7f13\u5b58\u9636\u6bb5\uff0c",(0,i.jsx)(e.strong,{children:"\u6bcf\u6b21\u8bbf\u95ee\u6570\u636e\u5e93"}),"\uff0c\u5bfc\u81f4\u5bf9\u6570\u636e\u5e93\u670d\u52a1\u5668\u9020\u6210\u538b\u529b\u3002\u901a\u5e38\u6b64\u7c7b\u6570\u636e\u7684\u51fa\u73b0\u91cf\u662f\u4e00\u4e2a\u8f83\u4f4e\u7684\u503c\uff0c\u5f53\u51fa\u73b0\u6b64\u7c7b\u60c5\u51b5\u4ee5\u6bd2\u653b\u6bd2\uff0c\u5e76\u53ca\u65f6\u62a5\u8b66\u3002\u65e0\u8bba\u662f\u9ed1\u540d\u5355\u8fd8\u662f\u767d\u540d\u5355\uff0c\u90fd\u662f\u5bf9\u6574\u4f53\u7cfb\u7edf\u7684\u538b\u529b\uff0c\u8b66\u62a5\u89e3\u9664\u540e\u5c3d\u5feb\u79fb\u9664"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u89c6\u9891\uff1a",(0,i.jsx)(e.a,{href:"https://www.bilibili.com/video/BV15y4y1r7X3",children:"https://www.bilibili.com/video/BV15y4y1r7X3"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"key-\u8bbe\u8ba1",children:"Key \u8bbe\u8ba1"}),"\n",(0,i.jsx)(e.p,{children:"\u5927 Key\uff1a\u901a\u5e38\u4ee5 Key \u7684\u5927\u5c0f\u548c Key \u4e2d\u6210\u5458\u7684\u6570\u91cf\u6765\u7efc\u5408\u5224\u5b9a\uff0c\u5f15\u53d1\u7684\u95ee\u9898\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5ba2\u6237\u7aef\u6267\u884c\u547d\u4ee4\u7684\u65f6\u957f\u53d8\u6162"}),"\n",(0,i.jsx)(e.li,{children:"Redis \u5185\u5b58\u8fbe\u5230 maxmemory \u5b9a\u4e49\u7684\u4e0a\u9650\u5f15\u53d1\u64cd\u4f5c\u963b\u585e\u6216\u91cd\u8981\u7684 Key \u88ab\u9010\u51fa\uff0c\u751a\u81f3\u5f15\u53d1\u5185\u5b58\u6ea2\u51fa\uff08OOM\uff09"}),"\n",(0,i.jsxs)(e.li,{children:["\u96c6\u7fa4\u67b6\u6784\u4e0b\uff0c\u67d0\u4e2a\u6570\u636e\u5206\u7247\u7684\u5185\u5b58\u4f7f\u7528\u7387\u8fdc\u8d85\u5176\u4ed6\u6570\u636e\u5206\u7247\uff0c\u4f7f",(0,i.jsx)(e.strong,{children:"\u6570\u636e\u5206\u7247\u7684\u5185\u5b58\u8d44\u6e90\u4e0d\u5747\u8861"})]}),"\n",(0,i.jsx)(e.li,{children:"\u5bf9\u5927 Key \u6267\u884c\u8bfb\u8bf7\u6c42\uff0c\u4f1a\u4f7f Redis \u5b9e\u4f8b\u7684\u5e26\u5bbd\u4f7f\u7528\u7387\u88ab\u5360\u6ee1\uff0c\u5bfc\u81f4\u81ea\u8eab\u670d\u52a1\u53d8\u6162\uff0c\u540c\u65f6\u6613\u6ce2\u53ca\u76f8\u5173\u7684\u670d\u52a1"}),"\n",(0,i.jsx)(e.li,{children:"\u5bf9\u5927 Key \u6267\u884c\u5220\u9664\u64cd\u4f5c\uff0c\u4f1a\u9020\u6210\u4e3b\u5e93\u8f83\u957f\u65f6\u95f4\u7684\u963b\u585e\uff0c\u8fdb\u800c\u53ef\u80fd\u5f15\u53d1\u540c\u6b65\u4e2d\u65ad\u6216\u4e3b\u4ece\u5207\u6362"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u70ed Key\uff1a\u901a\u5e38\u4ee5\u5176\u63a5\u6536\u5230\u7684 Key \u88ab\u8bf7\u6c42\u9891\u7387\u6765\u5224\u5b9a\uff0c\u5f15\u53d1\u7684\u95ee\u9898\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5360\u7528\u5927\u91cf\u7684 CPU \u8d44\u6e90\uff0c\u5f71\u54cd\u5176\u4ed6\u8bf7\u6c42\u5e76\u5bfc\u81f4\u6574\u4f53\u6027\u80fd\u964d\u4f4e"}),"\n",(0,i.jsxs)(e.li,{children:["\u5206\u5e03\u5f0f\u96c6\u7fa4\u67b6\u6784\u4e0b\uff0c\u4ea7\u751f",(0,i.jsx)(e.strong,{children:"\u8bbf\u95ee\u503e\u659c"}),"\uff0c\u5373\u67d0\u4e2a\u6570\u636e\u5206\u7247\u88ab\u5927\u91cf\u8bbf\u95ee\uff0c\u800c\u5176\u4ed6\u6570\u636e\u5206\u7247\u5904\u4e8e\u7a7a\u95f2\u72b6\u6001\uff0c\u53ef\u80fd\u5f15\u8d77\u8be5\u6570\u636e\u5206\u7247\u7684\u8fde\u63a5\u6570\u88ab\u8017\u5c3d\uff0c\u65b0\u7684\u8fde\u63a5\u5efa\u7acb\u8bf7\u6c42\u88ab\u62d2\u7edd\u7b49\u95ee\u9898"]}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u62a2\u8d2d\u6216\u79d2\u6740\u573a\u666f\u4e0b\uff0c\u53ef\u80fd\u56e0\u5546\u54c1\u5bf9\u5e94\u5e93\u5b58 Key \u7684\u8bf7\u6c42\u91cf\u8fc7\u5927\uff0c\u8d85\u51fa Redis \u5904\u7406\u80fd\u529b\u9020\u6210\u8d85\u5356"}),"\n",(0,i.jsx)(e.li,{children:"\u70ed Key \u7684\u8bf7\u6c42\u538b\u529b\u6570\u91cf\u8d85\u51fa Redis \u7684\u627f\u53d7\u80fd\u529b\u6613\u9020\u6210\u7f13\u5b58\u51fb\u7a7f\uff0c\u5373\u5927\u91cf\u8bf7\u6c42\u5c06\u88ab\u76f4\u63a5\u6307\u5411\u540e\u7aef\u7684\u5b58\u50a8\u5c42\uff0c\u5bfc\u81f4\u5b58\u50a8\u8bbf\u95ee\u91cf\u6fc0\u589e\u751a\u81f3\u5b95\u673a\uff0c\u4ece\u800c\u5f71\u54cd\u5176\u4ed6\u4e1a\u52a1"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u70ed Key \u5206\u7c7b\u4e24\u79cd\uff0c\u6cbb\u7406\u65b9\u5f0f\u5982\u4e0b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e00\u79cd\u662f\u5355\u4e00\u6570\u636e\uff0c\u6bd4\u5982\u79d2\u6740\u573a\u666f\uff0c\u5047\u8bbe\u603b\u91cf 10000 \u53ef\u4ee5\u62c6\u4e3a\u591a\u4e2a Key \u8fdb\u884c\u8bbf\u95ee\uff0c\u6bcf\u6b21\u5bf9\u8bf7\u6c42\u8fdb\u884c\u8def\u7531\u5230\u4e0d\u540c\u7684 Key \u8bbf\u95ee\uff0c\u4fdd\u8bc1\u6700\u7ec8\u4e00\u81f4\u6027\uff0c\u4f46\u662f\u4f1a\u51fa\u73b0\u8bbf\u95ee\u4e0d\u540c Key \u4ea7\u751f\u7684\u5269\u4f59\u91cf\u662f\u4e0d\u540c\u7684\uff0c\u8fd9\u65f6\u53ef\u4ee5\u901a\u8fc7\u524d\u7aef\u8fdb\u884c Mock \u5047\u6570\u636e"}),"\n",(0,i.jsx)(e.li,{children:"\u4e00\u79cd\u662f\u591a\u6570\u636e\u96c6\u5408\uff0c\u6bd4\u5982\u8fdb\u884c ID \u8fc7\u6ee4\uff0c\u8fd9\u65f6\u53ef\u4ee5\u6dfb\u52a0\u672c\u5730 LRU \u7f13\u5b58\uff0c\u51cf\u5c11\u5bf9\u70ed Key \u7684\u8bbf\u95ee"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u6863\uff1a",(0,i.jsx)(e.a,{href:"https://help.aliyun.com/document_detail/353223.html",children:"https://help.aliyun.com/document_detail/353223.html"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u6162\u67e5\u8be2",children:"\u6162\u67e5\u8be2"}),"\n",(0,i.jsx)(e.p,{children:"\u786e\u8ba4\u670d\u52a1\u548c Redis \u4e4b\u95f4\u7684\u94fe\u8def\u662f\u5426\u6b63\u5e38\uff0c\u6392\u9664\u7f51\u7edc\u539f\u56e0\u540e\u8fdb\u884c Redis \u7684\u6392\u67e5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u590d\u6742\u5ea6\u8fc7\u9ad8\u7684\u547d\u4ee4"}),"\n",(0,i.jsx)(e.li,{children:"\u64cd\u4f5c\u5927 key\uff0c\u5206\u914d\u5185\u5b58\u548c\u91ca\u653e\u5185\u5b58\u4f1a\u6bd4\u8f83\u8017\u65f6"}),"\n",(0,i.jsx)(e.li,{children:"key \u96c6\u4e2d\u8fc7\u671f\uff0c\u5bfc\u81f4\u5b9a\u65f6\u4efb\u52a1\u9700\u8981\u66f4\u957f\u7684\u65f6\u95f4\u53bb\u6e05\u7406"}),"\n",(0,i.jsx)(e.li,{children:"\u5b9e\u4f8b\u5185\u5b58\u8fbe\u5230\u4e0a\u9650\uff0c\u6bcf\u6b21\u5199\u5165\u65b0\u7684\u6570\u636e\u4e4b\u524d\uff0cRedis \u5fc5\u987b\u5148\u4ece\u5b9e\u4f8b\u4e2d\u8e22\u51fa\u4e00\u90e8\u5206\u6570\u636e"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u8003\u6587\u7ae0\uff1a",(0,i.jsx)(e.a,{href:"https://www.cnblogs.com/traditional/p/15633919.html%EF%BC%88%E9%9D%9E%E5%B8%B8%E5%A5%BD%EF%BC%89",children:"https://www.cnblogs.com/traditional/p/15633919.html\uff08\u975e\u5e38\u597d\uff09"})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h1,{id:"java",children:"Java"}),"\n",(0,i.jsx)(e.h2,{id:"jdbc",children:"JDBC"}),"\n",(0,i.jsx)(e.h3,{id:"\u6982\u8ff0-2",children:"\u6982\u8ff0"}),"\n",(0,i.jsx)(e.p,{children:"JDBC\uff08Java DataBase Connectivity\uff0cJava \u6570\u636e\u5e93\u8fde\u63a5\uff09\u662f\u4e00\u79cd\u7528\u4e8e\u6267\u884c SQL \u8bed\u53e5\u7684 Java API\uff0c\u53ef\u4ee5\u4e3a\u591a\u79cd\u5173\u7cfb\u578b\u6570\u636e\u5e93\u63d0\u4f9b\u7edf\u4e00\u8bbf\u95ee\uff0c\u662f\u7531\u4e00\u7ec4\u7528 Java \u8bed\u8a00\u7f16\u5199\u7684\u7c7b\u548c\u63a5\u53e3\u7ec4\u6210\u7684\u3002"}),"\n",(0,i.jsx)(e.p,{children:"JDBC \u662f Java \u5b98\u65b9\u63d0\u4f9b\u7684\u4e00\u5957\u89c4\u8303\uff08\u63a5\u53e3\uff09\uff0c\u7528\u4e8e\u5e2e\u52a9\u5f00\u53d1\u4eba\u5458\u5feb\u901f\u5b9e\u73b0\u4e0d\u540c\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u8fde\u63a5"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u529f\u80fd\u7c7b",children:"\u529f\u80fd\u7c7b"}),"\n",(0,i.jsx)(e.h4,{id:"drivermanager",children:"DriverManager"}),"\n",(0,i.jsx)(e.p,{children:"DriverManager\uff1a\u9a71\u52a8\u7ba1\u7406\u5bf9\u8c61"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6ce8\u518c\u9a71\u52a8\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u6ce8\u518c\u7ed9\u5b9a\u7684\u9a71\u52a8\uff1a",(0,i.jsx)(e.code,{children:"public static void registerDriver(Driver driver)"})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u4ee3\u7801\u5b9e\u73b0\u8bed\u6cd5\uff1a",(0,i.jsx)(e.code,{children:'Class.forName("com.mysql.jdbc.Driver)'})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"com.mysql.jdbc.Driver \u4e2d\u5b58\u5728\u9759\u6001\u4ee3\u7801\u5757"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'static {\n    try {\n        DriverManager.registerDriver(new Driver());\n    } catch (SQLException var1) {\n        throw new RuntimeException("Can\'t register driver!");\n    }\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e0d\u9700\u8981\u901a\u8fc7 DriverManager \u8c03\u7528\u9759\u6001\u65b9\u6cd5 registerDriver\uff0c\u56e0\u4e3a Driver \u7c7b\u88ab\u4f7f\u7528\uff0c\u5219\u81ea\u52a8\u6267\u884c\u9759\u6001\u4ee3\u7801\u5757\u5b8c\u6210\u6ce8\u518c\u9a71\u52a8"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"jar \u5305\u4e2d META-INF \u76ee\u5f55\u4e0b\u5b58\u5728\u4e00\u4e2a java.sql.Driver \u914d\u7f6e\u6587\u4ef6\uff0c\u6587\u4ef6\u4e2d\u6307\u5b9a\u4e86 com.mysql.jdbc.Driver"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\uff1a"}),"\n",(0,i.jsxs)(e.p,{children:["\u65b9\u6cd5\uff1a",(0,i.jsx)(e.code,{children:"public static Connection getConnection(String url, String user, String password)"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["url\uff1a\u6307\u5b9a\u8fde\u63a5\u7684\u8def\u5f84\uff0c\u8bed\u6cd5\u4e3a ",(0,i.jsx)(e.code,{children:"jdbc:mysql://ip\u5730\u5740(\u57df\u540d):\u7aef\u53e3\u53f7/\u6570\u636e\u5e93\u540d\u79f0"})]}),"\n",(0,i.jsx)(e.li,{children:"user\uff1a\u7528\u6237\u540d"}),"\n",(0,i.jsx)(e.li,{children:"password\uff1a\u5bc6\u7801"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"connection",children:"Connection"}),"\n",(0,i.jsx)(e.p,{children:"Connection\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u83b7\u53d6\u6267\u884c\u8005\u5bf9\u8c61\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u83b7\u53d6\u666e\u901a\u6267\u884c\u8005\u5bf9\u8c61\uff1a",(0,i.jsx)(e.code,{children:"Statement createStatement()"})]}),"\n",(0,i.jsxs)(e.li,{children:["\u83b7\u53d6\u9884\u7f16\u8bd1\u6267\u884c\u8005\u5bf9\u8c61\uff1a",(0,i.jsx)(e.code,{children:"PreparedStatement prepareStatement(String sql)"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u7ba1\u7406\u4e8b\u52a1\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5f00\u542f\u4e8b\u52a1\uff1a",(0,i.jsx)(e.code,{children:"setAutoCommit(boolean autoCommit)"}),"\uff0cfalse \u5f00\u542f\u4e8b\u52a1\uff0ctrue \u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\uff08\u9ed8\u8ba4\uff09"]}),"\n",(0,i.jsxs)(e.li,{children:["\u63d0\u4ea4\u4e8b\u52a1\uff1a",(0,i.jsx)(e.code,{children:"void commit()"})]}),"\n",(0,i.jsxs)(e.li,{children:["\u56de\u6eda\u4e8b\u52a1\uff1a",(0,i.jsx)(e.code,{children:"void rollback()"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u91ca\u653e\u8d44\u6e90\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u91ca\u653e\u6b64 Connection \u5bf9\u8c61\u7684\u6570\u636e\u5e93\u548c JDBC \u8d44\u6e90\uff1a",(0,i.jsx)(e.code,{children:"void close()"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"statement",children:"Statement"}),"\n",(0,i.jsx)(e.p,{children:"Statement\uff1a\u6267\u884c sql \u8bed\u53e5\u7684\u5bf9\u8c61"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u6267\u884c DML \u8bed\u53e5\uff1a",(0,i.jsx)(e.code,{children:"int executeUpdate(String sql)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8fd4\u56de\u503c int\uff1a\u8fd4\u56de\u5f71\u54cd\u7684\u884c\u6570"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u6570 sql\uff1a\u53ef\u4ee5\u6267\u884c insert\u3001update\u3001delete \u8bed\u53e5"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u6267\u884c DQL \u8bed\u53e5\uff1a",(0,i.jsx)(e.code,{children:"ResultSet executeQuery(String sql)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8fd4\u56de\u503c ResultSet\uff1a\u5c01\u88c5\u67e5\u8be2\u7684\u7ed3\u679c"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u6570 sql\uff1a\u53ef\u4ee5\u6267\u884c select \u8bed\u53e5"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u91ca\u653e\u8d44\u6e90\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u91ca\u653e\u6b64 Statement \u5bf9\u8c61\u7684\u6570\u636e\u5e93\u548c JDBC \u8d44\u6e90\uff1a",(0,i.jsx)(e.code,{children:"void close()"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"resultset",children:"ResultSet"}),"\n",(0,i.jsx)(e.p,{children:"ResultSet\uff1a\u7ed3\u679c\u96c6\u5bf9\u8c61\uff0cResultSet \u5bf9\u8c61\u7ef4\u62a4\u4e86\u4e00\u4e2a\u6e38\u6807\uff0c\u6307\u5411\u5f53\u524d\u7684\u6570\u636e\u884c\uff0c\u521d\u59cb\u5728\u7b2c\u4e00\u884c"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5224\u65ad\u7ed3\u679c\u96c6\u4e2d\u662f\u5426\u6709\u6570\u636e\uff1a",(0,i.jsx)(e.code,{children:"boolean next()"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u6709\u6570\u636e\u8fd4\u56de true\uff0c\u5e76\u5c06\u7d22\u5f15",(0,i.jsx)(e.strong,{children:"\u5411\u4e0b\u79fb\u52a8\u4e00\u884c"})]}),"\n",(0,i.jsx)(e.li,{children:"\u6ca1\u6709\u6570\u636e\u8fd4\u56de false"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u83b7\u53d6\u7ed3\u679c\u96c6\u4e2d",(0,i.jsx)(e.strong,{children:"\u5f53\u524d\u884c"}),"\u7684\u6570\u636e\uff1a",(0,i.jsx)(e.code,{children:'XXX getXxx("\u5217\u540d")'}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"XXX \u4ee3\u8868\u6570\u636e\u7c7b\u578b\uff08\u8981\u83b7\u53d6\u67d0\u5217\u6570\u636e\uff0c\u8fd9\u4e00\u5217\u7684\u6570\u636e\u7c7b\u578b\uff09"}),"\n",(0,i.jsx)(e.li,{children:'\u4f8b\u5982\uff1aString getString("name");   int getInt("age");'}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u91ca\u653e\u8d44\u6e90\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u91ca\u653e ResultSet \u5bf9\u8c61\u7684\u6570\u636e\u5e93\u548c JDBC \u8d44\u6e90\uff1a",(0,i.jsx)(e.code,{children:"void close()"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u4ee3\u7801\u5b9e\u73b0",children:"\u4ee3\u7801\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u51c6\u5907"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"-- \u521b\u5efadb14\u6570\u636e\u5e93\nCREATE DATABASE db14;\n\n-- \u4f7f\u7528db14\u6570\u636e\u5e93\nUSE db14;\n\n-- \u521b\u5efastudent\u8868\nCREATE TABLE student(\n\tsid INT PRIMARY KEY AUTO_INCREMENT,\t-- \u5b66\u751fid\n\tNAME VARCHAR(20),\t\t\t\t\t-- \u5b66\u751f\u59d3\u540d\n\tage INT,\t\t\t\t\t\t\t-- \u5b66\u751f\u5e74\u9f84\n\tbirthday DATE,\t\t\t\t\t\t-- \u5b66\u751f\u751f\u65e5\n);\n\n-- \u6dfb\u52a0\u6570\u636e\nINSERT INTO student VALUES (NULL,'\u5f20\u4e09',23,'1999-09-23'),(NULL,'\u674e\u56db',24,'1998-08-10'),\n(NULL,'\u738b\u4e94',25,'1996-06-06'),(NULL,'\u8d75\u516d',26,'1994-10-20');\n"})}),"\n",(0,i.jsx)(e.p,{children:"JDBC \u8fde\u63a5\u4ee3\u7801\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class JDBCDemo01 {\n    public static void main(String[] args) throws Exception{\n        //1.\u5bfc\u5165jar\u5305\n        //2.\u6ce8\u518c\u9a71\u52a8\n        Class.forName("com.mysql.jdbc.Driver");\n\n        //3.\u83b7\u53d6\u8fde\u63a5\n        Connection con = DriverManager.getConnection("jdbc:mysql://192.168.2.184:3306/db2","root","123456");\n\n        //4.\u83b7\u53d6\u6267\u884c\u8005\u5bf9\u8c61\n        Statement stat = con.createStatement();\n\n        //5.\u6267\u884csql\u8bed\u53e5\uff0c\u5e76\u4e14\u63a5\u6536\u7ed3\u679c\n        String sql = "SELECT * FROM user";\n        ResultSet rs = stat.executeQuery(sql);\n\n        //6.\u5904\u7406\u7ed3\u679c\n        while(rs.next()) {\n            System.out.println(rs.getInt("id") + "\\t" + rs.getString("name"));\n        }\n\n        //7.\u91ca\u653e\u8d44\u6e90\n        con.close();\n        stat.close();\n        con.close();\n    }\n}\n\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u6ce8\u5165\u653b\u51fb",children:"\u6ce8\u5165\u653b\u51fb"}),"\n",(0,i.jsx)(e.h4,{id:"\u653b\u51fb\u6f14\u793a",children:"\u653b\u51fb\u6f14\u793a"}),"\n",(0,i.jsx)(e.p,{children:"SQL \u6ce8\u5165\u653b\u51fb\u6f14\u793a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728\u767b\u5f55\u754c\u9762\uff0c\u8f93\u5165\u4e00\u4e2a\u9519\u8bef\u7684\u7528\u6237\u540d\u6216\u5bc6\u7801\uff0c\u4e5f\u53ef\u4ee5\u767b\u5f55\u6210\u529f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(807).A+"",width:"575",height:"334"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u539f\u7406\uff1a\u6211\u4eec\u5728\u5bc6\u7801\u5904\u8f93\u5165\u7684\u6240\u6709\u5185\u5bb9\uff0c\u90fd\u5e94\u8be5\u8ba4\u4e3a\u662f\u5bc6\u7801\u7684\u7ec4\u6210\uff0c\u4f46\u662f Statement \u5bf9\u8c61\u5728\u6267\u884c SQL \u8bed\u53e5\u65f6\uff0c\u5c06\u4e00\u90e8\u5206\u5185\u5bb9\u5f53\u505a\u67e5\u8be2\u6761\u4ef6\u6765\u6267\u884c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-mysql",children:"SELECT * FROM user WHERE loginname='aaa' AND password='aaa' OR '1'='1';\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u653b\u51fb\u89e3\u51b3",children:"\u653b\u51fb\u89e3\u51b3"}),"\n",(0,i.jsxs)(e.p,{children:["PreparedStatement\uff1a\u9884\u7f16\u8bd1 sql \u8bed\u53e5\u7684\u6267\u884c\u8005\u5bf9\u8c61\uff0c\u7ee7\u627f ",(0,i.jsx)(e.code,{children:"PreparedStatement extends Statement"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5728\u6267\u884c sql \u8bed\u53e5\u4e4b\u524d\uff0c\u5c06 sql \u8bed\u53e5\u8fdb\u884c\u63d0\u524d\u7f16\u8bd1\uff0c",(0,i.jsx)(e.strong,{children:"\u660e\u786e sql \u8bed\u53e5\u7684\u683c\u5f0f"}),"\uff0c\u5269\u4f59\u7684\u5185\u5bb9\u90fd\u4f1a\u8ba4\u4e3a\u662f\u53c2\u6570"]}),"\n",(0,i.jsxs)(e.li,{children:["sql \u8bed\u53e5\u4e2d\u7684\u53c2\u6570\u4f7f\u7528 ? \u4f5c\u4e3a",(0,i.jsx)(e.strong,{children:"\u5360\u4f4d\u7b26"})]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u4e3a ? \u5360\u4f4d\u7b26\u8d4b\u503c\u7684\u65b9\u6cd5\uff1a",(0,i.jsx)(e.code,{children:"setXxx(int parameterIndex, xxx data)"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u53c2\u65701\uff1a? \u7684\u4f4d\u7f6e\u7f16\u53f7\uff08\u7f16\u53f7\u4ece 1 \u5f00\u59cb\uff09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u53c2\u65702\uff1a? \u7684\u5b9e\u9645\u53c2\u6570"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'String sql = "SELECT * FROM user WHERE loginname=? AND password=?";\npst = con.prepareStatement(sql);\npst.setString(1,loginName);\npst.setString(2,password);\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u6267\u884c sql \u8bed\u53e5\u7684\u65b9\u6cd5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u6267\u884c insert\u3001update\u3001delete \u8bed\u53e5\uff1a",(0,i.jsx)(e.code,{children:"int executeUpdate()"})]}),"\n",(0,i.jsxs)(e.li,{children:["\u6267\u884c select \u8bed\u53e5\uff1a",(0,i.jsx)(e.code,{children:"ResultSet executeQuery()"})]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u8fde\u63a5\u6c60",children:"\u8fde\u63a5\u6c60"}),"\n",(0,i.jsx)(e.h4,{id:"\u6982\u5ff5",children:"\u6982\u5ff5"}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5e93\u8fde\u63a5\u80cc\u666f\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u662f\u4e00\u79cd\u5173\u952e\u7684\u3001\u6709\u9650\u7684\u3001\u6602\u8d35\u7684\u8d44\u6e90\uff0c\u8fd9\u4e00\u70b9\u5728\u591a\u7528\u6237\u7684\u7f51\u9875\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f53\u73b0\u5f97\u5c24\u4e3a\u7a81\u51fa\u3002\u5bf9\u6570\u636e\u5e93\u8fde\u63a5\u7684\u7ba1\u7406\u80fd\u663e\u8457\u5f71\u54cd\u5230\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u4f38\u7f29\u6027\u548c\u5065\u58ee\u6027\uff0c\u5f71\u54cd\u5230\u7a0b\u5e8f\u7684\u6027\u80fd\u6307\u6807\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u6570\u636e\u5e93\u8fde\u63a5\u6c60\uff1a",(0,i.jsx)(e.strong,{children:"\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u8d1f\u8d23\u5206\u914d\u3001\u7ba1\u7406\u548c\u91ca\u653e\u6570\u636e\u5e93\u8fde\u63a5"}),"\uff0c\u5b83\u5141\u8bb8\u5e94\u7528\u7a0b\u5e8f",(0,i.jsx)(e.strong,{children:"\u91cd\u590d\u4f7f\u7528"}),"\u4e00\u4e2a\u73b0\u6709\u7684\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u800c\u4e0d\u662f\u518d\u91cd\u65b0\u5efa\u7acb\u4e00\u4e2a\uff0c\u8fd9\u9879\u6280\u672f\u80fd\u660e\u663e\u63d0\u9ad8\u5bf9\u6570\u636e\u5e93\u64cd\u4f5c\u7684\u6027\u80fd\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u539f\u7406"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:s(94004).A+"",width:"1354",height:"685"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5f52\u8fd8\u8fde\u63a5",children:"\u5f52\u8fd8\u8fde\u63a5"}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u52a8\u6001\u4ee3\u7406\u7684\u65b9\u5f0f\u6765\u6539\u8fdb"}),"\n",(0,i.jsx)(e.p,{children:"\u81ea\u5b9a\u4e49\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u7c7b\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class MyDataSource implements DataSource {\n    //1.\u51c6\u5907\u4e00\u4e2a\u5bb9\u5668\u3002\u7528\u4e8e\u4fdd\u5b58\u591a\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61\n    private static List<Connection> pool = Collections.synchronizedList(new ArrayList<>());\n\n    //2.\u5b9a\u4e49\u9759\u6001\u4ee3\u7801\u5757,\u83b7\u53d6\u591a\u4e2a\u8fde\u63a5\u5bf9\u8c61\u4fdd\u5b58\u5230\u5bb9\u5668\u4e2d\n    static{\n        for(int i = 1; i <= 10; i++) {\n            Connection con = JDBCUtils.getConnection();\n            pool.add(con);\n        }\n    }\n    //3.\u63d0\u4f9b\u4e00\u4e2a\u83b7\u53d6\u8fde\u63a5\u6c60\u5927\u5c0f\u7684\u65b9\u6cd5\n    public int getSize() {\n        return pool.size();\n    }\n\n   \t//\u52a8\u6001\u4ee3\u7406\u65b9\u5f0f\n    @Override\n    public Connection getConnection() throws SQLException {\n        if(pool.size() > 0) {\n            Connection con = pool.remove(0);\n\n            Connection proxyCon = (Connection) Proxy.newProxyInstance(\n                con.getClass().getClassLoader(), new Class[]{Connection.class}, \n                new InvocationHandler() {\n                /*\n                    \u6267\u884cConnection\u5b9e\u73b0\u7c7b\u8fde\u63a5\u5bf9\u8c61\u6240\u6709\u7684\u65b9\u6cd5\u90fd\u4f1a\u7ecf\u8fc7invoke\n                    \u5982\u679c\u662fclose\u65b9\u6cd5\uff0c\u5f52\u8fd8\u8fde\u63a5\n                    \u5982\u679c\u4e0d\u662f\uff0c\u76f4\u63a5\u6267\u884c\u8fde\u63a5\u5bf9\u8c61\u539f\u6709\u7684\u529f\u80fd\u5373\u53ef\n                 */\n                @Override\n                public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n                    if(method.getName().equals("close")) {\n                        //\u5f52\u8fd8\u8fde\u63a5\n                        pool.add(con);\n                        return null;\n                    }else {\n                        return method.invoke(con,args);\n                    }\n                }\n            });\n            return proxyCon;\n        }else {\n            throw new RuntimeException("\u8fde\u63a5\u6570\u91cf\u5df2\u7528\u5c3d");\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h4,{id:"\u5f00\u6e90\u9879\u76ee",children:"\u5f00\u6e90\u9879\u76ee"}),"\n",(0,i.jsx)(e.h5,{id:"c3p0",children:"C3P0"}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528 C3P0 \u8fde\u63a5\u6c60\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u914d\u7f6e\u6587\u4ef6\u540d\u79f0\uff1ac3p0-config.xml\uff0c\u5fc5\u987b\u653e\u5728 src \u76ee\u5f55\u4e0b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:'<c3p0-config>\n  \x3c!-- \u4f7f\u7528\u9ed8\u8ba4\u7684\u914d\u7f6e\u8bfb\u53d6\u8fde\u63a5\u6c60\u5bf9\u8c61 --\x3e\n  <default-config>\n  \t\x3c!--  \u8fde\u63a5\u53c2\u6570 --\x3e\n    <property name="driverClass">com.mysql.jdbc.Driver</property>\n    <property name="jdbcUrl">jdbc:mysql://192.168.2.184:3306/db14</property>\n    <property name="user">root</property>\n    <property name="password">123456</property>\n    \n    \x3c!-- \u8fde\u63a5\u6c60\u53c2\u6570 --\x3e\n    \x3c!--\u521d\u59cb\u5316\u6570\u91cf--\x3e\n    <property name="initialPoolSize">5</property>\n    \x3c!--\u6700\u5927\u8fde\u63a5\u6570\u91cf--\x3e\n    <property name="maxPoolSize">10</property>\n    \x3c!--\u8d85\u65f6\u65f6\u95f4 3000ms--\x3e\n    <property name="checkoutTimeout">3000</property>\n  </default-config>\n\n  <named-config name="otherc3p0"> \n    \x3c!--  \u8fde\u63a5\u53c2\u6570 --\x3e\n    \x3c!-- \u8fde\u63a5\u6c60\u53c2\u6570 --\x3e\n  </named-config>\n</c3p0-config>\n'})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4ee3\u7801\u6f14\u793a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class C3P0Test1 {\n    public static void main(String[] args) throws Exception{\n        //1.\u521b\u5efac3p0\u7684\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5bf9\u8c61\n        DataSource dataSource = new ComboPooledDataSource();\n\n        //2.\u901a\u8fc7\u8fde\u63a5\u6c60\u5bf9\u8c61\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\n        Connection con = dataSource.getConnection();\n\n        //3.\u6267\u884c\u64cd\u4f5c\n        String sql = "SELECT * FROM student";\n        PreparedStatement pst = con.prepareStatement(sql);\n\n        //4.\u6267\u884csql\u8bed\u53e5\uff0c\u63a5\u6536\u7ed3\u679c\u96c6\n        ResultSet rs = pst.executeQuery();\n\n        //5.\u5904\u7406\u7ed3\u679c\u96c6\n        while(rs.next()) {\n            System.out.println(rs.getInt("sid") + "\\t" + rs.getString("name") + "\\t" + rs.getInt("age") + "\\t" + rs.getDate("birthday"));\n        }\n\n        //6.\u91ca\u653e\u8d44\u6e90\n        rs.close();   pst.close();   con.close();\n    }\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h5,{id:"druid",children:"Druid"}),"\n",(0,i.jsx)(e.p,{children:"Druid \u8fde\u63a5\u6c60\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u914d\u7f6e\u6587\u4ef6\uff1adruid.properties\uff0c\u5fc5\u987b\u653e\u5728 src \u76ee\u5f55\u4e0b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-properties",children:"driverClassName=com.mysql.jdbc.Driver\nurl=jdbc:mysql://192.168.2.184:3306/db14\nusername=root\npassword=123456\ninitialSize=5\nmaxActive=10\nmaxWait=3000\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4ee3\u7801\u6f14\u793a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class DruidTest1 {\n    public static void main(String[] args) throws Exception{\n        //\u83b7\u53d6\u914d\u7f6e\u6587\u4ef6\u7684\u6d41\u5bf9\u8c61\n        InputStream is = DruidTest1.class.getClassLoader().getResourceAsStream("druid.properties");\n\n        //1.\u901a\u8fc7Properties\u96c6\u5408\uff0c\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\n        Properties prop = new Properties();\n        prop.load(is);\n\n        //2.\u901a\u8fc7Druid\u8fde\u63a5\u6c60\u5de5\u5382\u7c7b\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5bf9\u8c61\n        DataSource dataSource = DruidDataSourceFactory.createDataSource(prop);\n\n        //3.\u901a\u8fc7\u8fde\u63a5\u6c60\u5bf9\u8c61\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u8fdb\u884c\u4f7f\u7528\n        Connection con = dataSource.getConnection();\n        \n\t\t//4.\u6267\u884csql\u8bed\u53e5\uff0c\u63a5\u6536\u7ed3\u679c\u96c6\n        String sql = "SELECT * FROM student";\n        PreparedStatement pst = con.prepareStatement(sql);\n        ResultSet rs = pst.executeQuery();\n\n        //5.\u5904\u7406\u7ed3\u679c\u96c6\n        while(rs.next()) {\n            System.out.println(rs.getInt("sid") + "\\t" + rs.getString("name") + "\\t" + rs.getInt("age") + "\\t" + rs.getDate("birthday"));\n        }\n\n        //6.\u91ca\u653e\u8d44\u6e90\n        rs.close();   pst.close();   con.close();\n    }\n}\n\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"jedis",children:"Jedis"}),"\n",(0,i.jsx)(e.h3,{id:"\u57fa\u672c\u4f7f\u7528",children:"\u57fa\u672c\u4f7f\u7528"}),"\n",(0,i.jsx)(e.p,{children:"Jedis \u7528\u4e8e Java \u8bed\u8a00\u8fde\u63a5 Redis \u670d\u52a1\uff0c\u5e76\u63d0\u4f9b\u5bf9\u5e94\u7684\u64cd\u4f5c API"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"jar \u5305\u5bfc\u5165"}),"\n",(0,i.jsxs)(e.p,{children:["\u4e0b\u8f7d\u5730\u5740\uff1a",(0,i.jsx)(e.a,{href:"https://mvnrepository.com/artifact/redis.clients/jedis",children:"https://mvnrepository.com/artifact/redis.clients/jedis"})]}),"\n",(0,i.jsx)(e.p,{children:"\u57fa\u4e8e maven\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<dependency>\n\t<groupId>redis.clients</groupId>\n\t<artifactId>jedis</artifactId>\n\t<version>2.9.0</version>\n</dependency>\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5ba2\u6237\u7aef\u8fde\u63a5 Redis\uff1aAPI \u6587\u6863 ",(0,i.jsx)(e.a,{href:"http://xetorthio.github.io/jedis/",children:"http://xetorthio.github.io/jedis/"})]}),"\n",(0,i.jsxs)(e.p,{children:["\u8fde\u63a5 redis\uff1a",(0,i.jsx)(e.code,{children:'Jedis jedis = new Jedis("192.168.0.185", 6379)'})]}),"\n",(0,i.jsxs)(e.p,{children:["\u64cd\u4f5c redis\uff1a",(0,i.jsx)(e.code,{children:'jedis.set("name", "seazean");  jedis.get("name")'})]}),"\n",(0,i.jsxs)(e.p,{children:["\u5173\u95ed redis\uff1a",(0,i.jsx)(e.code,{children:"jedis.close()"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4ee3\u7801\u5b9e\u73b0\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class JedisTest {\n    public static void main(String[] args) {\n        //1.\u83b7\u53d6\u8fde\u63a5\u5bf9\u8c61\n        Jedis jedis = new Jedis("192.168.2.185",6379);\n        //2.\u6267\u884c\u64cd\u4f5c\n        jedis.set("age","39");\n        String hello = jedis.get("hello");\n        System.out.println(hello);\n        jedis.lpush("list1","a","b","c","d");\n        List<String> list1 = jedis.lrange("list1", 0, -1);\n        for (String s:list1 ) {\n            System.out.println(s);\n        }\n        jedis.sadd("set1","abc","abc","def","poi","cba");\n        Long len = jedis.scard("set1");\n        System.out.println(len);\n        //3.\u5173\u95ed\u8fde\u63a5\n        jedis.close();\n    }\n}\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u5de5\u5177\u7c7b",children:"\u5de5\u5177\u7c7b"}),"\n",(0,i.jsx)(e.p,{children:"\u8fde\u63a5\u6c60\u5bf9\u8c61\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"JedisPool\uff1aJedis \u63d0\u4f9b\u7684\u8fde\u63a5\u6c60\u6280\u672f"}),"\n",(0,i.jsx)(e.li,{children:"poolConfig\uff1a\u8fde\u63a5\u6c60\u914d\u7f6e\u5bf9\u8c61"}),"\n",(0,i.jsx)(e.li,{children:"host\uff1aRedis \u670d\u52a1\u5730\u5740"}),"\n",(0,i.jsx)(e.li,{children:"port\uff1aRedis \u670d\u52a1\u7aef\u53e3\u53f7"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"JedisPool \u7684\u6784\u9020\u5668\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"public JedisPool(GenericObjectPoolConfig poolConfig, String host, int port) {\n\tthis(poolConfig, host, port, 2000, (String)null, 0, (String)null);\n}\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa\u914d\u7f6e\u6587\u4ef6 redis.properties"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-properties",children:"redis.maxTotal=50\nredis.maxIdel=10\nredis.host=192.168.2.185\nredis.port=6379\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5de5\u5177\u7c7b\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'public class JedisUtils {\n    private static int maxTotal;\n    private static int maxIdel;\n    private static String host;\n    private static int port;\n    private static JedisPoolConfig jpc;\n    private static JedisPool jp;\n\n    static {\n        ResourceBundle bundle = ResourceBundle.getBundle("redis");\n        //\u6700\u5927\u8fde\u63a5\u6570\n        maxTotal = Integer.parseInt(bundle.getString("redis.maxTotal"));\n        //\u6d3b\u52a8\u8fde\u63a5\u6570\n        maxIdel = Integer.parseInt(bundle.getString("redis.maxIdel"));\n        host = bundle.getString("redis.host");\n        port = Integer.parseInt(bundle.getString("redis.port"));\n\n        //Jedis\u8fde\u63a5\u914d\u7f6e\n        jpc = new JedisPoolConfig();\n        jpc.setMaxTotal(maxTotal);\n        jpc.setMaxIdle(maxIdel);\n        //\u8fde\u63a5\u6c60\u5bf9\u8c61\n        jp = new JedisPool(jpc, host, port);\n    }\n\n    //\u5bf9\u5916\u8bbf\u95ee\u63a5\u53e3\uff0c\u63d0\u4f9bjedis\u8fde\u63a5\u5bf9\u8c61\uff0c\u8fde\u63a5\u4ece\u8fde\u63a5\u6c60\u83b7\u53d6\n    public static Jedis getJedis() {\n        return jp.getResource();\n    }\n}\n'})}),"\n"]}),"\n"]})]})}function t(n={}){const{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(j,{...n})}):j(n)}},94181:(n,e,s)=>{s.d(e,{A:()=>l});const l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAP0AAAA/CAYAAAArFc5DAAAC5ElEQVR4nO3dMXLaQBjF8bcZH4W40gnECeSKijadVELjLjNu0rmRStylVZUG6QT4BFSW7rIuEI6cDJAiaIW+/2+GAoNnvmf0vAuzYzvvvRcAM76EHgDAsO5OPeCcG3IOAFd23NSfLH3/SVY458hsgNXMR2zvAWMoPWAMpQeMofSAMZQeMIbSA8ZQesAYSg8YQ+kBY8ZT+rbQ3Dk55+TcXEUbeqCh1Mr6uYtM86mH//RaZyqKbNKvdzHvXdP97PMiyDzjKf1spZ33avJYaRqp3E74KvhQK3MPUuXlvZdvlirXL6GHurJa2ddSy6bLXEnr9T70UFe12lVKY6l8rj+u8zxOVe1WQeY5e/Y+hG0ZabFbSPOttArzQxlM/Uv7vNEu6e7PVtp5C5l/ajPr7icb2TgGv9R3/VDRJlrNLj/7msaz0ktSW6iMFkqUaBGVk97ySVL7tld0H/gKGJjFzEfJ4/Kw2gc2qtK321LR4rDsJQsrW3y76uz4vt7JZeHLcHWzVbfahx1jVKXflq96eegugocXvZbb0CNd1ew+0v7N1i+2fuZkc3hfX6Wx8sfkwndOwxhW+/GUvi1URtXhw53uVk19i59stCy/fcpYZ06TXvSShaL1s6Yc8axutS9DzuBPOPPQ/9fkPpa8JK+08t57X6XdfcU+b4YZY9DMR/3svfxDCZK5Sn/nNZA5j/+4lpvcx0r9kKn7mV33hb9Y/esiZJ4+65nHs70HMAhKDxhD6QFjKD1gDKUHjKH0gDGUHjCG0gPGnD2cA2A6/ulwju+dgx/r7enpKfgM5LCR75Yz9N38MdxbmfOSqeQ4ZQr5bjkDx3ABwyg9YAylB4yh9IAxlB4whtIDxlB6wBhKDxhD6QFjKD1gDKUHjKH0gDGUHjCG0gPGUHrAGEoPGEPpAWMoPWAMpQeMofSAMZQeMIbSA8ZQesAYSg8YQ+kBYyg9YAz/wBIw4lj1u0tPADAtbO8BYyg9YMw7zxVmeoa1jrEAAAAASUVORK5CYII="},75406:(n,e,s)=>{s.d(e,{A:()=>l});const l="data:image/png;base64,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"},49047:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-BTree\u5de5\u4f5c\u6d41\u7a0b3-f39df81aa657d1bee66ca2badfd41f29.png"},85784:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-BTree\u5de5\u4f5c\u6d41\u7a0b4-51f826c540b57a88fd3174119357a6b8.png"},58497:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-BTree\u5de5\u4f5c\u6d41\u7a0b5-a13d489938387b6f79e650b41d182c43.png"},9514:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-BTree\u5de5\u4f5c\u6d41\u7a0b6-90e4ef0b3ccf96cbcb31f7bb0a692396.png"},60275:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-BTree\u5de5\u4f5c\u6d41\u7a0b7-e964129cb38024699af1a8757781700d.png"},64980:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-BTree\u5de5\u4f5c\u6d41\u7a0b8-6aadfcc9d66b4673cb5a31697fa10cb8.png"},8170:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-B\u52a0Tree\u6570\u636e\u7ed3\u6784-5562a5518ed7a201bbde0e0885adebc6.png"},46931:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-DQL\u5206\u9875\u67e5\u8be2\u56fe\u89e3-71a5bd10d58e98f08557fc04a9b7c3dc.png"},88639:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-DQL\u6570\u636e\u51c6\u5907-62687cda2e4a7de6a1df98f3c546d5f5.png"},54323:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-InnoDB\u67e5\u770b\u9501\u72b6\u6001-f0d6ae4f61e44c81531b1e41c588ca60.png"},28414:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-InnoDB\u805a\u7c07\u548c\u8f85\u52a9\u7d22\u5f15\u7ed3\u6784-e78e7fb76945d2f7e791fc5765015c0b.png"},13322:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-JOIN\u67e5\u8be2\u56fe-a6652140be1aa68279bbdea45bdb98d8.png"},85943:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-MERGE-3ac5654c0e1d516ed94febf1855575fe.png"},14242:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-MVCC\u5de5\u4f5c\u6d41\u7a0b1-e255091a6d57a0941ad02c23efcbb706.png"},44601:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-MVCC\u5de5\u4f5c\u6d41\u7a0b2-f616f9cdab6b4fcef267a30621ecdcb7.png"},40576:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-MVCC\u7248\u672c\u94fe-6984185d5eda8428e1af1d4ee7069f51.png"},97663:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-MVCC\u7248\u672c\u94fe\u9690\u85cf\u5b57\u6bb5-09b89a396681ad6d7d74a830e36a7bcf.png"},42234:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-MyISAM\u4e3b\u952e\u548c\u8f85\u52a9\u7d22\u5f15\u7ed3\u6784-f1f4a46bf5be5218ffbacc0c4c8860ee.png"},87489:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-SHOW_PROCESSLIST\u547d\u4ee4-452401272f98593926d2c609c49262c3.png"},88638:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-SQL\u5206\u7c7b-2ba3ba8ebf648593841423f7d83645ac.png"},98207:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-SQL\u6267\u884c\u6bcf\u4e2a\u72b6\u6001\u6d88\u8017\u7684CPU-1fb7d16e71be2b7a0bbc11ca13ba831b.png"},59843:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-SQL\u6267\u884c\u6bcf\u4e2a\u72b6\u6001\u6d88\u8017\u7684\u65f6\u95f4-022ecd7f5f9ca0823519dd4290609ddf.png"},52078:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-SQL\u7684\u6267\u884c\u6d41\u7a0b-a9cac26b2c32445ffda97bb097a79824.png"},17719:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-SQL\u8bed\u53e5\u5f71\u54cd\u7684\u884c\u6570-f2c2ff1d36d7badbecbf7cda1665f83b.png"},21572:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-SQL\u8bed\u53e5\u6267\u884c\u9891\u7387-afc393fa195475236522ce2f2c7557d9.png"},79299:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-explain\u4e4bid\u4e0d\u540c-ff44595cb51e1fb2eb5289fa7b0d288c.png"},17092:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-explain\u4e4bid\u76f8\u540c-d6cdc5a4762a81b3a659b2376f2e3e72.png"},38005:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-explain\u4e4bid\u76f8\u540c\u548c\u4e0d\u540c-9de18a392896655b7662acd16e91b5ad.png"},33357:(n,e,s)=>{s.d(e,{A:()=>l});const l="data:image/png;base64,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"},23982:(n,e,s)=>{s.d(e,{A:()=>l});const l="data:image/png;base64,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"},31161:(n,e,s)=>{s.d(e,{A:()=>l});const l="data:image/png;base64,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"},65575:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-update\u7684\u6267\u884c\u6d41\u7a0b-cb82829acfcb9f9a1fc84c1407c5ab4b.png"},10965:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4e0d\u4f7f\u7528\u7d22\u5f15\u4e0b\u63a8-0360e9f247e170327e11449a3e42a492.png"},43778:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4e3b\u4ece\u590d\u5236\u539f\u7406\u56fe-a453adba3d7f54a1e31f55df3f065de3.jpg"},90035:(n,e,s)=>{s.d(e,{A:()=>l});const l="data:image/jpeg;base64,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"},95876:(n,e,s)=>{s.d(e,{A:()=>l});const l="data:image/jpeg;base64,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"},6857:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u63d0\u793a1-5eeb14adba25bbc9742061165a82402c.png"},16146:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u63d0\u793a2-2d6ee1f5c9cee1d9904fa81ab551fdf7.png"},30363:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u63d0\u793a3-403b0b45c497911c6ce5eabb57f6fd08.png"},52942:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u7d22\u5f151-113549362cafc926e766022773e22a06.png"},31084:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u7d22\u5f1510-bded956312d8f8a65c144524b7b2af5c.png"},42709:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u7d22\u5f1511-16f46177298268392b82a24cf5731b31.png"},22334:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u7d22\u5f1512-675206bcbb95b76daaad093e04b65c9c.png"},98119:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u7d22\u5f1513-38fd2a192dcd9b06946826540b77329f.png"},18504:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u7d22\u5f1514-f35053ee5889c352a1692c505e796604.png"},66897:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u7d22\u5f1515-a3b45c7c8f08638144189df5208530d4.png"},55365:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u7d22\u5f152-deeea6ba97d608c31f87118d4b9093f1.png"},37852:(n,e,s)=>{s.d(e,{A:()=>l});const l="data:image/png;base64,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"},21459:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u7d22\u5f154-4fcd80acfab381b0908ffd1d8ae834f4.png"},70698:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u7d22\u5f155-d6a605ea6de7338c076db4391b63738c.png"},19681:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u7d22\u5f156-59f14ba97d75e246f75703eab9d9b776.png"},46968:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u7d22\u5f157-501d4c6680642c77aa3820a2cef5265a.png"},48623:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u7d22\u5f158-a774e7f34560510ab88528b60e135136.png"},79878:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u7d22\u5f159-cbbe529a41ac9682e868a6ebcd3d1d73.png"},64860:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u4f7f\u7528\u7d22\u5f15\u73af\u5883\u51c6\u5907-989bf33f6ff7b98ec9d66105ee58c0c3.png"},86318:(n,e,s)=>{s.d(e,{A:()=>l});const l="data:image/png;base64,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"},56677:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u5206\u9875\u67e5\u8be22-20777ef876056620762359e3756dda89.png"},73788:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u5206\u9875\u67e5\u8be23-43f8bc4a6966049c8718bb1e17f849f5.png"},4778:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u5d4c\u5957\u67e5\u8be21-63b605f9066c525169e6fa7d39cac336.png"},19009:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u5d4c\u5957\u67e5\u8be22-e013c97d3b7309c51041d26330d79e3b.png"},39293:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u63d2\u5165ID\u65e0\u5e8f\u6392\u5217\u6570\u636e-143cee88dc0b16419bc29c71d0edc488.png"},30467:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u63d2\u5165ID\u987a\u5e8f\u6392\u5217\u6570\u636e-e3cb3ca07f33a1f9e62c21a18527237b.png"},36437:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u63d2\u5165\u6570\u636e\u5173\u95ed\u552f\u4e00\u6027\u6821\u9a8c-1789353d85696c37b6fe8a222bf1b6db.png"},5057:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f18\u5316SQL\u63d2\u5165\u6570\u636e\u624b\u52a8\u63d0\u4ea4\u4e8b\u52a1-f0f84e508e9ba05bdff36cbba23a3a76.png"},19333:(n,e,s)=>{s.d(e,{A:()=>l});const l="data:image/png;base64,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"},9720:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f53\u7cfb\u7ed3\u6784-5077310f2fe87b395803134e17dea1a1.png"},17388:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u4f7f\u7528\u7d22\u5f15\u4e0b\u63a8-9b443a380aedbc39de895e6c7667f17c.png"},5337:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u5220\u9664\u6570\u636e-83f2afad463a389c419bf72288fdc0db.png"},98028:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u610f\u5411\u9501\u517c\u5bb9\u6027-d62e85bdf4f98867b24f269d9e50433b.png"},19997:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u6162\u65e5\u5fd7\u8bfb\u53d61-f8bbeafbf37cd44b03ede4bda8612671.png"},38790:(n,e,s)=>{s.d(e,{A:()=>l});const l="data:image/png;base64,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"},69436:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u6267\u884c\u8ba1\u5212\u73af\u5883\u51c6\u5907-1f95047b22c1690a292473e31a09537c.png"},12743:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u65e5\u5fd7\u8bfb\u53d61-1403b4bd474582c57c331591f556e09d.png"},92684:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u65e5\u5fd7\u8bfb\u53d62-7dae4521244d12edc6a78bd0659de4e8.png"},76719:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u6743\u9650\u8303\u56f4-7dbe2df8711d371870c0290dd19665b7.png"},60443:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u67e5\u770bSQL\u8bed\u53e5\u6267\u884c\u8017\u65f6-a4f2128699eafb5e703f393cca94a67a.png"},5642:(n,e,s)=>{s.d(e,{A:()=>l});const l="data:image/jpeg;base64,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"},12571:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u67e5\u8be2\u5185\u5b58\u4f18\u5316-733baf06bfc143d512ab5ae1b10dd846.png"},2706:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u67e5\u8be2\u65e5\u5fd7-7a3f286a3fd5a1f681a012b57ccf98b9.png"},58407:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u67e5\u8be2\u7f13\u5b58\u7684\u72b6\u6001\u53d8\u91cf-98da5660e7e6d3ee4085c37f0bf180dc.png"},36997:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u7a7a\u95f2\u94fe\u8868-86c7f73c396a7d2850b7155e01d7c1da.png"},97602:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u7d22\u5f15\u4e0b\u63a8\u4f18\u53161-7e8afb11e5518e04251f07ccb6e42845.png"},64185:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u7d22\u5f15\u4e0b\u63a8\u4f18\u53162-148174920d634335ae55f106e16506aa.png"},41464:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u7d22\u5f15\u5931\u6548\u5e95\u5c42\u539f\u74061-2039cf06c3f043c6be9e0d8a929bfcf9.png"},87219:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u7d22\u5f15\u5931\u6548\u5e95\u5c42\u539f\u74062-57af85da1388f81e7365bdc9f26495d4.png"},32010:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u7d22\u5f15\u5931\u6548\u5e95\u5c42\u539f\u74063-1f877beda58b33bb1847f3ad40fe42b1.png"},63602:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u7d22\u5f15\u7684\u4ecb\u7ecd-05dbcc2b895fdfeba710a35d4b6685a0.png"},13688:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u7ec4\u5408\u7d22\u5f15\u56fe-9a40a8e82db721f52baba3944abfa1a7.png"},86861:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u805a\u7c07\u7d22\u5f15\u548c\u8f85\u52a9\u7d22\u5f15\u68c0\u9501\u6570\u636e\u56fe-962557f8295fcf582ff452967f28e49d.jpg"},24193:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u810f\u9875\u94fe\u8868-e82db6876d75e024a83adeb2ae8e9fbd.png"},40805:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u8ba1\u6570count\u4f18\u5316-70cb7ec820061dfd7418e04b3750fb5e.png"},81209:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u8d1f\u8f7d\u5747\u8861\u4e3b\u4ece\u590d\u5236-2c05c649f96953cb428a4c6e2e55bb50.jpg"},46156:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u91cd\u5efa\u8868-9106bf29d41e478b5e1902394719666c.png"},72022:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u9501\u4e89\u7528\u60c5\u51b5\u67e5\u770b1-60090de44f1d960ef93b9dc0a1fff090.png"},53645:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/MySQL-\u9501\u4e89\u7528\u60c5\u51b5\u67e5\u770b2-81127017b83a20679ae5b879d54d6731.png"},44989:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-ACL\u6307\u4ee4-4da2f2f0c7f8ac5dd92e997dc3a22e39.png"},79542:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-AOF\u5de5\u4f5c\u539f\u7406-5c1c5178fefdbdbbabbf61293d4559b8.png"},40694:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-AOF\u624b\u52a8\u91cd\u5199\u539f\u7406-49004ddb0a5146035da92b1d7f860008.png"},5834:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-BGSAVE\u6267\u884c\u539f\u7406-c4d0ca44e13f37c9bfa100a3d961d329.png"},7262:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-Bitmaps\u5e94\u7528\u4e4b\u7f13\u5b58\u7a7f\u900f-ac5d2b1f1cb86bf66b712693ba631a6f.png"},46818:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-IO\u591a\u8def\u590d\u7528\u7a0b\u5e8f-72e7a83ed1c3cae4fa5b858fa09d11bb.png"},15037:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-Lua\u4f2a\u5ba2\u6237\u7aef\u6267\u884c-25f222517eca846bc417d7a75acf865f.png"},14510:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-RDB\u6587\u4ef6\u7ed3\u6784-7bae1ae8a6bae15b2c23b15800de7e46.png"},77064:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-SDS\u5185\u5b58\u9884\u5206\u914d-499a2d39db3753e27a015376bf15ce97.png"},54592:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-SDS\u5e95\u5c42\u7ed3\u6784-76b395ba0316d1670be494d24b628e41.png"},79288:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-bgsave\u5de5\u4f5c\u539f\u7406-c402043c0364c46857b799b5b88e2efe.png"},75033:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-fork\u4ee5\u540e\u5185\u5b58\u5173\u7cfb1-fe31d64f8c99f7b0e404048f3c81051d.png"},26850:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-fork\u4ee5\u540e\u5185\u5b58\u5173\u7cfb2-9761db7f67d1e16f0f59b03e406d43e1.png"},50226:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-fork\u51fd\u6570\u4f7f\u7528\u6f14\u793a-16f5ee16b692e84693ef87e01810e8a8.png"},10927:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-sort\u6392\u5e8f-f3b1df53ef236b1658ba9284669b1886.png"},6644:(n,e,s)=>{s.d(e,{A:()=>l});const l="data:image/png;base64,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"},7284:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u4e3b\u4ece\u590d\u5236\u6d41\u7a0b\u66f4\u65b0-d93535c9eae3bfc8a3aaf8d188b03dd6.png"},3372:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u4e8b\u52a1\u4e2d\u6267\u884c\u9519\u8bef-5d741892f1ea7f78aea21340b38a1759.png"},53376:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u4f4d\u6570\u7ec4\u7ed3\u6784-ba6cc6298184afeaf8f83577cfadb18f.png"},2423:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u5185\u5b58\u6ea2\u51fa\u95ee\u9898-e0c6676b76b8e6a118eac9ef5fc4bf27.png"},91410:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u5217\u8868\u5bf9\u8c61linkedlist-096e89006d8a48e89cc0c5615b38fb60.png"},96484:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u5217\u8868\u5bf9\u8c61ziplist-df9a37022a2bc175b4b0a3208db2dd03.png"},64651:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u538b\u7f29\u5217\u8868\u5b57\u8282\u6570\u7ec4\u7f16\u7801-ce782d1343467453a41f23a7e58dd60c.png"},40071:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u538b\u7f29\u5217\u8868\u5e95\u5c42\u7ed3\u6784-9e4df7054e0733ab458a3f0bfe25bb3d.png"},84272:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u538b\u7f29\u5217\u8868\u6574\u6570\u7f16\u7801-39182f9f5d179060c69229873495f803.png"},16466:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u538b\u7f29\u5217\u8868\u793a\u4f8b-12ccb62f58f0a6488be3dbd3888233ff.png"},65240:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u538b\u7f29\u5217\u8868\u8282\u70b9-f99e62c971af35929ef89409327c652e.png"},32435:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u538b\u7f29\u5217\u8868\u8fde\u9501\u66f4\u65b01-55dcce302ef886c6fdd59e178b4b4c55.png"},57944:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u538b\u7f29\u5217\u8868\u8fde\u9501\u66f4\u65b02-60111873607e1d57f4c0f67d69c473bc.png"},81873:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u53d1\u5e03\u8ba2\u9605-5c4db4d05a539facaadf136abf7ee3f5.png"},73295:(n,e,s)=>{s.d(e,{A:()=>l});const l="data:image/png;base64,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"},17225:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u53ef\u53d8\u8f93\u51fa\u7f13\u51b2\u533a-14d7c37879199c461a880837b56f82a4.png"},77961:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u547d\u4ee4\u6570\u7ec4-b213c6910af58448dc76f4963d93d17b.png"},59424:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u547d\u4ee4\u67e5\u627e-d03d4cf37e66d253a418f3563fd78c2b.png"},43679:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u547d\u4ee4\u7684\u8bed\u6cd5\u9519\u8bef-bbedd43be69ddcff2ee0c87399ae2080.png"},51940:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u54c8\u5e0c\u5bf9\u8c61dict-881b1542d6f135a24eaede55e10a0448.png"},26859:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u54c8\u5e0c\u5bf9\u8c61ziplist-b206ca4226e204ae604539fd11526e2a.png"},5280:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u54c8\u5e0c\u8868\u5e95\u5c42\u7ed3\u6784-4d7c3a753211f6d1b8e02e2c22189fdb.png"},23590:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u54e8\u5175\u6267\u884c\u6545\u969c\u8f6c\u79fb-4f853d5eda13d13809fa7454603024aa.png"},51649:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u54e8\u5175\u7cfb\u7edf-59a1416e8181ae5b371c156cd1ba1ff8.png"},37047:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u54e8\u5175\u7cfb\u7edf\u5efa\u7acb\u8fde\u63a5-ac16517d90bb6a84f20ba580548c5a61.png"},84302:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u590d\u5236\u79ef\u538b\u7f13\u51b2\u533a-099d93bfb30edd082b2a9fb76711ed25.png"},87020:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u591a\u7ebf\u7a0b-5cdbb8936e5feb0974018d61fb9e8eaa.png"},35207:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u5b57\u5178\u5e95\u5c42\u7ed3\u6784-74ee4e2e20338448372e13c3b52263ce.png"},7390:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u5b57\u5178\u89e3\u51b3\u54c8\u5e0c\u51b2\u7a81-d09c5992112814a8defde80c330291b3.png"},37359:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u5b57\u7b26\u4e32\u5bf9\u8c61embstr\u7f16\u7801-b096ab5150f984f4ca6ac27db63d8873.png"},77821:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u5b57\u7b26\u4e32\u5bf9\u8c61int\u7f16\u7801-015e2462347f2d80653f97b477adcabb.png"},32132:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u5b57\u7b26\u4e32\u5bf9\u8c61raw\u7f16\u7801-25e14ff8edff292baed07c6c5e1c3307.png"},15524:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u5bf9\u8c61\u5171\u4eab-192bc7d83bb336555aaa6c85caadbc8a.png"},77923:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u5bf9\u8c61\u7f16\u7801-75af988b3a25eeddf757c6e357b894af.png"},49222:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u5feb\u901f\u5217\u8868\u6570\u636e\u7ed3\u6784-88c40cc85cb4599f5520e9c15740f44a.png"},41031:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u6301\u4e45\u5316\u7684\u4e24\u79cd\u65b9\u5f0f-00b958d39eb16d1b4ac844522e056374.png"},64238:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u6570\u636e\u5e93\u901a\u77e5-1dce33cb8370093dc4435c326cb6399e.png"},73413:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u6570\u636e\u5e93\u952e\u7a7a\u95f4-ce358a5ee4c11abf059851187c61886f.png"},27958:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u6574\u6570\u96c6\u5408\u5347\u7ea7-64f1650aee6b93cc7c2b5b0312b1e54a.png"},78748:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u6574\u6570\u96c6\u5408\u5e95\u5c42\u7ed3\u6784-c6f63f4822939d5069e1a767b878295c.png"},88330:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u6587\u4ef6\u4e8b\u4ef6\u5904\u7406\u5668-d8445de41dd8c60e64cbee79559cb7ec.png"},61179:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u65f6\u95f4\u4e8b\u4ef6-1458528fa0f7a09577f51086e6ccdbab.png"},25053:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u6709\u5e8f\u96c6\u5408\u5bf9\u8c61ziplist-fe47709fba22fe5bdda658c8b4036ea4.png"},52236:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u6709\u5e8f\u96c6\u5408\u5bf9\u8c61zset-c3fcb0a2d622ba23b97ec00c1d039224.png"},75890:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u670d\u52a1\u5668clients\u94fe\u8868-d3f77b9f55a04fbf279645a3b9fff5f6.png"},65085:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u670d\u52a1\u5668\u6570\u636e\u5e93-e7270c8b2fe1c74001c5f654adf5cbe1.png"},33481:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u69fd\u548c\u952e\u8df3\u8dc3\u8868-ff77c06be8fafe4345721f506196f223.png"},304:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u76d1\u89c6\u5668-8904ade9d76dd6094edae2661a30d2b1.png"},80251:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u8df3\u8868\u5e95\u5c42\u7ed3\u6784-dbfd5091af45b1ddcac1249fad50fe10.png"},9704:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u94fe\u8868\u5e95\u5c42\u7ed3\u6784-ec5066e7dd59ac685b621832ffb62c24.png"},92871:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u94fe\u8868\u8282\u70b9\u5e95\u5c42\u7ed3\u6784-295d777d05fef750c36953f1020e49a3.png"},25926:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u96c6\u5408\u5bf9\u8c61dict-5369f8a37234915192eb4e053835a752.png"},95043:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u96c6\u5408\u5bf9\u8c61intset-234b6f8a77b8b24b38847321a4c760da.png"},48824:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u96c6\u7fa4\u69fd\u6307\u6d3e\u4fe1\u606f-780c8cb67f35e3b99bd68dc058dab289.png"},4780:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u96c6\u7fa4\u6a21\u5f0f-c8c0c68333ebdae0f8a1a301eadc0048.png"},81555:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u96c6\u7fa4\u8282\u70b9\u63e1\u624b-a6a3f39bb11abace0db7292e08594971.png"},26962:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/Redis-\u96c6\u7fa4\u91cd\u65b0\u5206\u7247-6e4e8c021299eabc329c513e2fc933c6.png"},807:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/SQL\u6ce8\u5165\u653b\u51fb\u6f14\u793a-a69a5d444d50eb669f60bcb15f563096.png"},49100:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/hash\u5e94\u7528\u573a\u666f\u7ed3\u6784\u56fe-e10d48000ea5342b4253daf42b8dde6e.png"},80635:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/hash\u7ed3\u6784\u56fe-10db5245d59937cc6633722ce0a53048.png"},15259:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/list\u7ed3\u6784\u56fe-d239a474deaf19a046feb719efc575b1.png"},99321:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/set\u7ed3\u6784\u56fe-992215e3c843597f117e2dc3f2d963e8.png"},83461:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/string\u5355\u6570\u636e\u4e0e\u591a\u6570\u636e\u64cd\u4f5c-24b2a0eb4d9819f8f0460011c2596823.png"},16818:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/\u4e09\u5927\u8303\u5f0f-a3af90e16a007c3b16474d2fdccb8712.png"},97890:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/\u56fe\u5f62\u5316\u754c\u9762\u5907\u4efd-e524f72eec8cda24394b6c6fef0e5720.png"},89909:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/\u56fe\u5f62\u5316\u754c\u9762\u6062\u590d-3cee2029785b79547abebac2201b1616.png"},89018:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/\u591a\u8868\u7ec3\u4e60\u67b6\u6784\u8bbe\u8ba1-efb77386ba88c1aae5929682737524d4.png"},4338:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/\u591a\u8868\u8bbe\u8ba1\u4e00\u5bf9\u4e00-16861ee4963a8014c379aadb3b09c9f2.png"},8728:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/\u591a\u8868\u8bbe\u8ba1\u4e00\u5bf9\u591a-8d00e13b2ec3a9d08dad3aa76457f7aa.png"},82694:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/\u591a\u8868\u8bbe\u8ba1\u591a\u5bf9\u591a-08645c35eecd2acb96850465737b5b23.png"},94004:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u539f\u7406\u56fe\u89e3-71d715c29a4dff7e8bea40ee8a71d3f8.png"},25338:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/\u666e\u901a\u8868-6a19322394f13e166cd4d290493a3ad7.png"},81626:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/\u7b2c\u4e00\u8303\u5f0f-a031d69a0226615fd954124e560afe95.png"},93931:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/\u7b2c\u4e09\u8303\u5f0f-bb622741535a6942cd577c2c10d978f4.png"},84318:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/\u7b2c\u4e8c\u8303\u5f0f-4d5baac660ec316819c6eb58ab301cc4.png"},95839:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/\u7d22\u5f15\u7684\u539f\u74061-fd25a11917c00bf2cf62b9fec3934a75.png"},58980:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/\u7d22\u5f15\u7684\u539f\u74062-10b72c2a4ce704dcfad88adb84708fd4.png"},84747:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/\u81ea\u5173\u8054\u67e5\u8be2\u6570\u636e\u51c6\u5907-f7a8a938ffc0630e8961637d51c988c8.png"},28453:(n,e,s)=>{s.d(e,{R:()=>r,x:()=>c});var l=s(96540);const i={},d=l.createContext(i);function r(n){const e=l.useContext(d);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),l.createElement(d.Provider,{value:e},n.children)}}}]);