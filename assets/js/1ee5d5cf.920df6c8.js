"use strict";(self.webpackChunkmybase=self.webpackChunkmybase||[]).push([[65509],{56096:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>m,contentTitle:()=>a,default:()=>l,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"\u7801\u519c/\u8ba1\u7b97\u673a\u57fa\u7840/\u8bbe\u8ba1\u6a21\u5f0f - \u8bbf\u95ee\u8005","title":"\u8bbe\u8ba1\u6a21\u5f0f - \u8bbf\u95ee\u8005","description":"\u8bbf\u95ee\u8005\uff08Visitor\uff09","source":"@site/docs/\u7801\u519c/\u8ba1\u7b97\u673a\u57fa\u7840/\u8bbe\u8ba1\u6a21\u5f0f - \u8bbf\u95ee\u8005.md","sourceDirName":"\u7801\u519c/\u8ba1\u7b97\u673a\u57fa\u7840","slug":"/\u7801\u519c/\u8ba1\u7b97\u673a\u57fa\u7840/\u8bbe\u8ba1\u6a21\u5f0f - \u8bbf\u95ee\u8005","permalink":"/\u7801\u519c/\u8ba1\u7b97\u673a\u57fa\u7840/\u8bbe\u8ba1\u6a21\u5f0f - \u8bbf\u95ee\u8005","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{}}');var i=r(74848),s=r(28453);const o={},a=void 0,m={},d=[{value:"\u8bbf\u95ee\u8005\uff08Visitor\uff09",id:"\u8bbf\u95ee\u8005visitor",level:2},{value:"Intent",id:"intent",level:3},{value:"Class Diagram",id:"class-diagram",level:3},{value:"Implementation",id:"implementation",level:3},{value:"JDK",id:"jdk",level:3}];function c(e){const n={code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"\u8bbf\u95ee\u8005visitor",children:"\u8bbf\u95ee\u8005\uff08Visitor\uff09"}),"\n",(0,i.jsx)(n.h3,{id:"intent",children:"Intent"}),"\n",(0,i.jsx)(n.p,{children:"\u4e3a\u4e00\u4e2a\u5bf9\u8c61\u7ed3\u6784\uff08\u6bd4\u5982\u7ec4\u5408\u7ed3\u6784\uff09\u589e\u52a0\u65b0\u80fd\u529b\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"class-diagram",children:"Class Diagram"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Visitor\uff1a\u8bbf\u95ee\u8005\uff0c\u4e3a\u6bcf\u4e00\u4e2a ConcreteElement \u58f0\u660e\u4e00\u4e2a visit \u64cd\u4f5c"}),"\n",(0,i.jsx)(n.li,{children:"ConcreteVisitor\uff1a\u5177\u4f53\u8bbf\u95ee\u8005\uff0c\u5b58\u50a8\u904d\u5386\u8fc7\u7a0b\u4e2d\u7684\u7d2f\u8ba1\u7ed3\u679c"}),"\n",(0,i.jsx)(n.li,{children:"ObjectStructure\uff1a\u5bf9\u8c61\u7ed3\u6784\uff0c\u53ef\u4ee5\u662f\u7ec4\u5408\u7ed3\u6784\uff0c\u6216\u8005\u662f\u4e00\u4e2a\u96c6\u5408\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:r(71638).A+"",width:"891",height:"711"})}),"\n",(0,i.jsx)(n.h3,{id:"implementation",children:"Implementation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public interface Element {\n    void accept(Visitor visitor);\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"class CustomerGroup {\n\n    private List<Customer> customers = new ArrayList<>();\n\n    void accept(Visitor visitor) {\n        for (Customer customer : customers) {\n            customer.accept(visitor);\n        }\n    }\n\n    void addCustomer(Customer customer) {\n        customers.add(customer);\n    }\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public class Customer implements Element {\n\n    private String name;\n    private List<Order> orders = new ArrayList<>();\n\n    Customer(String name) {\n        this.name = name;\n    }\n\n    String getName() {\n        return name;\n    }\n\n    void addOrder(Order order) {\n        orders.add(order);\n    }\n\n    public void accept(Visitor visitor) {\n        visitor.visit(this);\n        for (Order order : orders) {\n            order.accept(visitor);\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public class Order implements Element {\n\n    private String name;\n    private List<Item> items = new ArrayList();\n\n    Order(String name) {\n        this.name = name;\n    }\n\n    Order(String name, String itemName) {\n        this.name = name;\n        this.addItem(new Item(itemName));\n    }\n\n    String getName() {\n        return name;\n    }\n\n    void addItem(Item item) {\n        items.add(item);\n    }\n\n    public void accept(Visitor visitor) {\n        visitor.visit(this);\n\n        for (Item item : items) {\n            item.accept(visitor);\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public class Item implements Element {\n\n    private String name;\n\n    Item(String name) {\n        this.name = name;\n    }\n\n    String getName() {\n        return name;\n    }\n\n    public void accept(Visitor visitor) {\n        visitor.visit(this);\n    }\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public interface Visitor {\n    void visit(Customer customer);\n\n    void visit(Order order);\n\n    void visit(Item item);\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public class GeneralReport implements Visitor {\n\n    private int customersNo;\n    private int ordersNo;\n    private int itemsNo;\n\n    public void visit(Customer customer) {\n        System.out.println(customer.getName());\n        customersNo++;\n    }\n\n    public void visit(Order order) {\n        System.out.println(order.getName());\n        ordersNo++;\n    }\n\n    public void visit(Item item) {\n        System.out.println(item.getName());\n        itemsNo++;\n    }\n\n    public void displayResults() {\n        System.out.println("Number of customers: " + customersNo);\n        System.out.println("Number of orders:    " + ordersNo);\n        System.out.println("Number of items:     " + itemsNo);\n    }\n}\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public class Client {\n    public static void main(String[] args) {\n        Customer customer1 = new Customer("customer1");\n        customer1.addOrder(new Order("order1", "item1"));\n        customer1.addOrder(new Order("order2", "item1"));\n        customer1.addOrder(new Order("order3", "item1"));\n\n        Order order = new Order("order_a");\n        order.addItem(new Item("item_a1"));\n        order.addItem(new Item("item_a2"));\n        order.addItem(new Item("item_a3"));\n        Customer customer2 = new Customer("customer2");\n        customer2.addOrder(order);\n\n        CustomerGroup customers = new CustomerGroup();\n        customers.addCustomer(customer1);\n        customers.addCustomer(customer2);\n\n        GeneralReport visitor = new GeneralReport();\n        customers.accept(visitor);\n        visitor.displayResults();\n    }\n}\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"customer1\norder1\nitem1\norder2\nitem1\norder3\nitem1\ncustomer2\norder_a\nitem_a1\nitem_a2\nitem_a3\nNumber of customers: 2\nNumber of orders:    4\nNumber of items:     6\n"})}),"\n",(0,i.jsx)(n.h3,{id:"jdk",children:"JDK"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"javax.lang.model.element.Element and javax.lang.model.element.ElementVisitor"}),"\n",(0,i.jsx)(n.li,{children:"javax.lang.model.type.TypeMirror and javax.lang.model.type.TypeVisitor"}),"\n"]})]})}function l(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},71638:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/79c6f036-bde6-4393-85a3-ef36a0327bd2-df7d568dbbf3dab0c9af44e8215a4ba5.png"},28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>a});var t=r(96540);const i={},s=t.createContext(i);function o(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);