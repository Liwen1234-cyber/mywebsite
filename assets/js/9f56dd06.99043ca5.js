"use strict";(self.webpackChunkmybase=self.webpackChunkmybase||[]).push([[24777],{63633:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>u,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"\u7801\u519c/\u8ba1\u7b97\u673a\u57fa\u7840/\u8bbe\u8ba1\u6a21\u5f0f - \u72b6\u6001","title":"\u8bbe\u8ba1\u6a21\u5f0f - \u72b6\u6001","description":"8. \u72b6\u6001\uff08State\uff09","source":"@site/docs/\u7801\u519c/\u8ba1\u7b97\u673a\u57fa\u7840/\u8bbe\u8ba1\u6a21\u5f0f - \u72b6\u6001.md","sourceDirName":"\u7801\u519c/\u8ba1\u7b97\u673a\u57fa\u7840","slug":"/\u7801\u519c/\u8ba1\u7b97\u673a\u57fa\u7840/\u8bbe\u8ba1\u6a21\u5f0f - \u72b6\u6001","permalink":"/\u7801\u519c/\u8ba1\u7b97\u673a\u57fa\u7840/\u8bbe\u8ba1\u6a21\u5f0f - \u72b6\u6001","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{}}');var r=t(74848),l=t(28453);const u={},i=void 0,s={},c=[{value:"8. \u72b6\u6001\uff08State\uff09",id:"8-\u72b6\u6001state",level:2},{value:"Intent",id:"intent",level:3},{value:"Class Diagram",id:"class-diagram",level:3},{value:"Implementation",id:"implementation",level:3}];function o(n){const e={code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"8-\u72b6\u6001state",children:"8. \u72b6\u6001\uff08State\uff09"}),"\n",(0,r.jsx)(e.h3,{id:"intent",children:"Intent"}),"\n",(0,r.jsx)(e.p,{children:"\u5141\u8bb8\u5bf9\u8c61\u5728\u5185\u90e8\u72b6\u6001\u6539\u53d8\u65f6\u6539\u53d8\u5b83\u7684\u884c\u4e3a\uff0c\u5bf9\u8c61\u770b\u8d77\u6765\u597d\u50cf\u4fee\u6539\u4e86\u5b83\u6240\u5c5e\u7684\u7c7b\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"class-diagram",children:"Class Diagram"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:t(69596).A+"",width:"871",height:"383"})}),"\n",(0,r.jsx)(e.h3,{id:"implementation",children:"Implementation"}),"\n",(0,r.jsx)(e.p,{children:"\u7cd6\u679c\u9500\u552e\u673a\u6709\u591a\u79cd\u72b6\u6001\uff0c\u6bcf\u79cd\u72b6\u6001\u4e0b\u9500\u552e\u673a\u6709\u4e0d\u540c\u7684\u884c\u4e3a\uff0c\u72b6\u6001\u53ef\u4ee5\u53d1\u751f\u8f6c\u79fb\uff0c\u4f7f\u5f97\u9500\u552e\u673a\u7684\u884c\u4e3a\u4e5f\u53d1\u751f\u6539\u53d8\u3002"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:t(82732).A+"",width:"866",height:"604"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"public interface State {\n    /**\n     * \u6295\u5165 25 \u5206\u94b1\n     */\n    void insertQuarter();\n\n    /**\n     * \u9000\u56de 25 \u5206\u94b1\n     */\n    void ejectQuarter();\n\n    /**\n     * \u8f6c\u52a8\u66f2\u67c4\n     */\n    void turnCrank();\n\n    /**\n     * \u53d1\u653e\u7cd6\u679c\n     */\n    void dispense();\n}\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'public class HasQuarterState implements State {\n\n    private GumballMachine gumballMachine;\n\n    public HasQuarterState(GumballMachine gumballMachine) {\n        this.gumballMachine = gumballMachine;\n    }\n\n    @Override\n    public void insertQuarter() {\n        System.out.println("You can\'t insert another quarter");\n    }\n\n    @Override\n    public void ejectQuarter() {\n        System.out.println("Quarter returned");\n        gumballMachine.setState(gumballMachine.getNoQuarterState());\n    }\n\n    @Override\n    public void turnCrank() {\n        System.out.println("You turned...");\n        gumballMachine.setState(gumballMachine.getSoldState());\n    }\n\n    @Override\n    public void dispense() {\n        System.out.println("No gumball dispensed");\n    }\n}\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'public class NoQuarterState implements State {\n\n    GumballMachine gumballMachine;\n\n    public NoQuarterState(GumballMachine gumballMachine) {\n        this.gumballMachine = gumballMachine;\n    }\n\n    @Override\n    public void insertQuarter() {\n        System.out.println("You insert a quarter");\n        gumballMachine.setState(gumballMachine.getHasQuarterState());\n    }\n\n    @Override\n    public void ejectQuarter() {\n        System.out.println("You haven\'t insert a quarter");\n    }\n\n    @Override\n    public void turnCrank() {\n        System.out.println("You turned, but there\'s no quarter");\n    }\n\n    @Override\n    public void dispense() {\n        System.out.println("You need to pay first");\n    }\n}\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'public class SoldOutState implements State {\n\n    GumballMachine gumballMachine;\n\n    public SoldOutState(GumballMachine gumballMachine) {\n        this.gumballMachine = gumballMachine;\n    }\n\n    @Override\n    public void insertQuarter() {\n        System.out.println("You can\'t insert a quarter, the machine is sold out");\n    }\n\n    @Override\n    public void ejectQuarter() {\n        System.out.println("You can\'t eject, you haven\'t inserted a quarter yet");\n    }\n\n    @Override\n    public void turnCrank() {\n        System.out.println("You turned, but there are no gumballs");\n    }\n\n    @Override\n    public void dispense() {\n        System.out.println("No gumball dispensed");\n    }\n}\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'public class SoldState implements State {\n\n    GumballMachine gumballMachine;\n\n    public SoldState(GumballMachine gumballMachine) {\n        this.gumballMachine = gumballMachine;\n    }\n\n    @Override\n    public void insertQuarter() {\n        System.out.println("Please wait, we\'re already giving you a gumball");\n    }\n\n    @Override\n    public void ejectQuarter() {\n        System.out.println("Sorry, you already turned the crank");\n    }\n\n    @Override\n    public void turnCrank() {\n        System.out.println("Turning twice doesn\'t get you another gumball!");\n    }\n\n    @Override\n    public void dispense() {\n        gumballMachine.releaseBall();\n        if (gumballMachine.getCount() > 0) {\n            gumballMachine.setState(gumballMachine.getNoQuarterState());\n        } else {\n            System.out.println("Oops, out of gumballs");\n            gumballMachine.setState(gumballMachine.getSoldOutState());\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'public class GumballMachine {\n\n    private State soldOutState;\n    private State noQuarterState;\n    private State hasQuarterState;\n    private State soldState;\n\n    private State state;\n    private int count = 0;\n\n    public GumballMachine(int numberGumballs) {\n        count = numberGumballs;\n        soldOutState = new SoldOutState(this);\n        noQuarterState = new NoQuarterState(this);\n        hasQuarterState = new HasQuarterState(this);\n        soldState = new SoldState(this);\n\n        if (numberGumballs > 0) {\n            state = noQuarterState;\n        } else {\n            state = soldOutState;\n        }\n    }\n\n    public void insertQuarter() {\n        state.insertQuarter();\n    }\n\n    public void ejectQuarter() {\n        state.ejectQuarter();\n    }\n\n    public void turnCrank() {\n        state.turnCrank();\n        state.dispense();\n    }\n\n    public void setState(State state) {\n        this.state = state;\n    }\n\n    public void releaseBall() {\n        System.out.println("A gumball comes rolling out the slot...");\n        if (count != 0) {\n            count -= 1;\n        }\n    }\n\n    public State getSoldOutState() {\n        return soldOutState;\n    }\n\n    public State getNoQuarterState() {\n        return noQuarterState;\n    }\n\n    public State getHasQuarterState() {\n        return hasQuarterState;\n    }\n\n    public State getSoldState() {\n        return soldState;\n    }\n\n    public int getCount() {\n        return count;\n    }\n}\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"public class Client {\n\n    public static void main(String[] args) {\n        GumballMachine gumballMachine = new GumballMachine(5);\n\n        gumballMachine.insertQuarter();\n        gumballMachine.turnCrank();\n\n        gumballMachine.insertQuarter();\n        gumballMachine.ejectQuarter();\n        gumballMachine.turnCrank();\n\n        gumballMachine.insertQuarter();\n        gumballMachine.turnCrank();\n        gumballMachine.insertQuarter();\n        gumballMachine.turnCrank();\n        gumballMachine.ejectQuarter();\n\n        gumballMachine.insertQuarter();\n        gumballMachine.insertQuarter();\n        gumballMachine.turnCrank();\n        gumballMachine.insertQuarter();\n        gumballMachine.turnCrank();\n        gumballMachine.insertQuarter();\n        gumballMachine.turnCrank();\n    }\n}\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-html",children:"You insert a quarter\nYou turned...\nA gumball comes rolling out the slot...\nYou insert a quarter\nQuarter returned\nYou turned, but there's no quarter\nYou need to pay first\nYou insert a quarter\nYou turned...\nA gumball comes rolling out the slot...\nYou insert a quarter\nYou turned...\nA gumball comes rolling out the slot...\nYou haven't insert a quarter\nYou insert a quarter\nYou can't insert another quarter\nYou turned...\nA gumball comes rolling out the slot...\nYou insert a quarter\nYou turned...\nA gumball comes rolling out the slot...\nOops, out of gumballs\nYou can't insert a quarter, the machine is sold out\nYou turned, but there are no gumballs\nNo gumball dispensed\n"})})]})}function d(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},82732:(n,e,t)=>{t.d(e,{A:()=>a});const a=t.p+"assets/images/396be981-3f2c-4fd9-8101-dbf9c841504b-d806cafe9e213b3da94d0301636f7f58.jpg"},69596:(n,e,t)=>{t.d(e,{A:()=>a});const a=t.p+"assets/images/79df886f-fdc3-4020-a07f-c991bb58e0d8-2cea868b62417bac97815992a7f2e479.png"},28453:(n,e,t)=>{t.d(e,{R:()=>u,x:()=>i});var a=t(96540);const r={},l=a.createContext(r);function u(n){const e=a.useContext(l);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:u(n.components),a.createElement(l.Provider,{value:e},n.children)}}}]);