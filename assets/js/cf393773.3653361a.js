"use strict";(self.webpackChunkmybase=self.webpackChunkmybase||[]).push([[92664],{91274:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>c,default:()=>x,frontMatter:()=>r,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"\u7801\u519c/redis/Redis\u9ad8\u7ea7-\u5206\u5e03\u5f0f\u7f13\u5b58","title":"\u5206\u5e03\u5f0f\u7f13\u5b58","description":"\u7b14\u8bb0\u539f\u4ef6\u6765\u81ea\u9ed1\u9a6cB\u7ad9\u89c6\u9891\u914d\u5957\u7b14\u8bb0\uff0c\u7ecf\u8fc7\u81ea\u5df1\u52a0\u5de5\u4fee\u6539\u6dfb\u52a0\u7b49","source":"@site/docs/\u7801\u519c/redis/Redis\u9ad8\u7ea7-\u5206\u5e03\u5f0f\u7f13\u5b58.md","sourceDirName":"\u7801\u519c/redis","slug":"/\u7801\u519c/redis/Redis\u9ad8\u7ea7-\u5206\u5e03\u5f0f\u7f13\u5b58","permalink":"/\u7801\u519c/redis/Redis\u9ad8\u7ea7-\u5206\u5e03\u5f0f\u7f13\u5b58","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{}}');var l=n(74848),d=n(28453);const r={},c="\u5206\u5e03\u5f0f\u7f13\u5b58",a={},h=[{value:"1.1.RDB\u6301\u4e45\u5316",id:"11rdb\u6301\u4e45\u5316",level:2},{value:"1.1.1.\u6267\u884c\u65f6\u673a",id:"111\u6267\u884c\u65f6\u673a",level:3},{value:"1.1.2.RDB\u539f\u7406",id:"112rdb\u539f\u7406",level:3},{value:"1.1.3.\u5c0f\u7ed3",id:"113\u5c0f\u7ed3",level:3},{value:"1.2.AOF\u6301\u4e45\u5316",id:"12aof\u6301\u4e45\u5316",level:2},{value:"1.2.1.AOF\u539f\u7406",id:"121aof\u539f\u7406",level:3},{value:"1.2.2.AOF\u914d\u7f6e",id:"122aof\u914d\u7f6e",level:3},{value:"1.2.3.AOF\u6587\u4ef6\u91cd\u5199",id:"123aof\u6587\u4ef6\u91cd\u5199",level:3},{value:"1.2.4.AOF\u6587\u4ef6\u683c\u5f0f\uff08Redis7.0\u4ee5\u540e\uff09",id:"124aof\u6587\u4ef6\u683c\u5f0fredis70\u4ee5\u540e",level:3},{value:"1.3.RDB\u4e0eAOF\u5bf9\u6bd4",id:"13rdb\u4e0eaof\u5bf9\u6bd4",level:2},{value:"1.4 RDB\u548cAOF\u6df7\u5408\u4f7f\u7528",id:"14-rdb\u548caof\u6df7\u5408\u4f7f\u7528",level:2},{value:"redis\u6570\u636e\u5e93RDB\u548cAOF\u914d\u7f6e\uff0c\u6570\u636e\u5e93\u5907\u4efd\u7684\u533a\u522b\uff1a",id:"redis\u6570\u636e\u5e93rdb\u548caof\u914d\u7f6e\u6570\u636e\u5e93\u5907\u4efd\u7684\u533a\u522b",level:3},{value:"2.1.\u642d\u5efa\u4e3b\u4ece\u67b6\u6784",id:"21\u642d\u5efa\u4e3b\u4ece\u67b6\u6784",level:2},{value:"2.2.\u4e3b\u4ece\u6570\u636e\u540c\u6b65\u539f\u7406",id:"22\u4e3b\u4ece\u6570\u636e\u540c\u6b65\u539f\u7406",level:2},{value:"2.2.1.\u5168\u91cf\u540c\u6b65",id:"221\u5168\u91cf\u540c\u6b65",level:3},{value:"2.2.2.\u589e\u91cf\u540c\u6b65",id:"222\u589e\u91cf\u540c\u6b65",level:3},{value:"2.2.3.repl_backlog\u539f\u7406",id:"223repl_backlog\u539f\u7406",level:3},{value:"2.3.\u4e3b\u4ece\u540c\u6b65\u4f18\u5316",id:"23\u4e3b\u4ece\u540c\u6b65\u4f18\u5316",level:2},{value:"2.4.\u5c0f\u7ed3",id:"24\u5c0f\u7ed3",level:2},{value:"3.1.\u54e8\u5175\u539f\u7406",id:"31\u54e8\u5175\u539f\u7406",level:2},{value:"3.1.1.\u96c6\u7fa4\u7ed3\u6784\u548c\u4f5c\u7528",id:"311\u96c6\u7fa4\u7ed3\u6784\u548c\u4f5c\u7528",level:3},{value:"3.1.2.\u96c6\u7fa4\u76d1\u63a7\u539f\u7406",id:"312\u96c6\u7fa4\u76d1\u63a7\u539f\u7406",level:3},{value:"3.1.3.\u96c6\u7fa4\u6545\u969c\u6062\u590d\u539f\u7406",id:"313\u96c6\u7fa4\u6545\u969c\u6062\u590d\u539f\u7406",level:3},{value:"3.1.4.Sentinel \u53ef\u4ee5\u9632\u6b62\u8111\u88c2\u5417\uff1f",id:"314sentinel-\u53ef\u4ee5\u9632\u6b62\u8111\u88c2\u5417",level:3},{value:"3.1.5.\u5c0f\u7ed3",id:"315\u5c0f\u7ed3",level:3},{value:"3.2.\u642d\u5efa\u54e8\u5175\u96c6\u7fa4",id:"32\u642d\u5efa\u54e8\u5175\u96c6\u7fa4",level:2},{value:"3.3.RedisTemplate",id:"33redistemplate",level:2},{value:"3.3.1.\u5bfc\u5165Demo\u5de5\u7a0b",id:"331\u5bfc\u5165demo\u5de5\u7a0b",level:3},{value:"3.3.2.\u5f15\u5165\u4f9d\u8d56",id:"332\u5f15\u5165\u4f9d\u8d56",level:3},{value:"3.3.3.\u914d\u7f6eRedis\u5730\u5740",id:"333\u914d\u7f6eredis\u5730\u5740",level:3},{value:"3.3.4.\u914d\u7f6e\u8bfb\u5199\u5206\u79bb",id:"334\u914d\u7f6e\u8bfb\u5199\u5206\u79bb",level:3},{value:"4.1.\u5206\u7247\u96c6\u7fa4\u7684\u7279\u5f81",id:"41\u5206\u7247\u96c6\u7fa4\u7684\u7279\u5f81",level:2},{value:"4.2.\u642d\u5efa\u5206\u7247\u96c6\u7fa4",id:"42\u642d\u5efa\u5206\u7247\u96c6\u7fa4",level:2},{value:"4.3.\u6563\u5217\u63d2\u69fdslot",id:"43\u6563\u5217\u63d2\u69fdslot",level:2},{value:"4.3.1.\u63d2\u69fd\u539f\u7406",id:"431\u63d2\u69fd\u539f\u7406",level:3},{value:"4.3.2.\u69fd\u4f4d\u6620\u5c04\u7b97\u6cd5\uff1a\u4e00\u81f4\u6027\u54c8\u5e0c\u7b97\u6cd5",id:"432\u69fd\u4f4d\u6620\u5c04\u7b97\u6cd5\u4e00\u81f4\u6027\u54c8\u5e0c\u7b97\u6cd5",level:3},{value:"4.3.3.\u5ba2\u6237\u7aef\u64cd\u4f5c",id:"433\u5ba2\u6237\u7aef\u64cd\u4f5c",level:3},{value:"4.3.4.\u5c0f\u7ed3",id:"434\u5c0f\u7ed3",level:3},{value:"4.4.\u96c6\u7fa4\u4f38\u7f29",id:"44\u96c6\u7fa4\u4f38\u7f29",level:2},{value:"4.4.1.\u9700\u6c42\u5206\u6790",id:"441\u9700\u6c42\u5206\u6790",level:3},{value:"4.4.2.\u521b\u5efa\u65b0\u7684redis\u5b9e\u4f8b",id:"442\u521b\u5efa\u65b0\u7684redis\u5b9e\u4f8b",level:3},{value:"4.4.3.\u6dfb\u52a0\u65b0\u8282\u70b9\u5230redis",id:"443\u6dfb\u52a0\u65b0\u8282\u70b9\u5230redis",level:3},{value:"4.4.4.\u8f6c\u79fb\u63d2\u69fd",id:"444\u8f6c\u79fb\u63d2\u69fd",level:3},{value:"4.4.5.\u96c6\u7fa4\u7f29\u5bb9",id:"445\u96c6\u7fa4\u7f29\u5bb9",level:3},{value:"4.5.\u6545\u969c\u8f6c\u79fb",id:"45\u6545\u969c\u8f6c\u79fb",level:2},{value:"4.5.1.\u81ea\u52a8\u6545\u969c\u8f6c\u79fb",id:"451\u81ea\u52a8\u6545\u969c\u8f6c\u79fb",level:3},{value:"4.5.2.\u624b\u52a8\u6545\u969c\u8f6c\u79fb",id:"452\u624b\u52a8\u6545\u969c\u8f6c\u79fb",level:3},{value:"4.5.3 Redis\u52a8\u6001\u6269/\u7f29\u5bb9\u65f6\uff0c\u82e5\u6709\u8bf7\u6c42\u8fc7\u6765\u600e\u4e48\u529e\uff1f",id:"453-redis\u52a8\u6001\u6269\u7f29\u5bb9\u65f6\u82e5\u6709\u8bf7\u6c42\u8fc7\u6765\u600e\u4e48\u529e",level:3},{value:"4.5 RedisCluster\u7684\u6545\u969c\u9009\u4e3e",id:"45-rediscluster\u7684\u6545\u969c\u9009\u4e3e",level:3},{value:"4.6.RedisTemplate\u8bbf\u95ee\u5206\u7247\u96c6\u7fa4",id:"46redistemplate\u8bbf\u95ee\u5206\u7247\u96c6\u7fa4",level:2}];function t(e){const s={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.header,{children:(0,l.jsx)(s.h1,{id:"\u5206\u5e03\u5f0f\u7f13\u5b58",children:"\u5206\u5e03\u5f0f\u7f13\u5b58"})}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsx)(s.p,{children:"\u7b14\u8bb0\u539f\u4ef6\u6765\u81ea\u9ed1\u9a6cB\u7ad9\u89c6\u9891\u914d\u5957\u7b14\u8bb0\uff0c\u7ecf\u8fc7\u81ea\u5df1\u52a0\u5de5\u4fee\u6539\u6dfb\u52a0\u7b49"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"-- \u57fa\u4e8eRedis\u96c6\u7fa4\u89e3\u51b3\u5355\u673aRedis\u5b58\u5728\u7684\u95ee\u9898"}),"\n",(0,l.jsx)(s.p,{children:"\u5355\u673a\u7684Redis\u5b58\u5728\u56db\u5927\u95ee\u9898\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725144240631",src:n(5381).A+"",width:"1154",height:"480"})}),"\n",(0,l.jsx)(s.h1,{id:"0\u5b66\u4e60\u76ee\u6807",children:"0.\u5b66\u4e60\u76ee\u6807"}),"\n",(0,l.jsx)(s.h1,{id:"1redis\u6301\u4e45\u5316",children:"1.Redis\u6301\u4e45\u5316"}),"\n",(0,l.jsx)(s.p,{children:"Redis\u6709\u4e24\u79cd\u6301\u4e45\u5316\u65b9\u6848\uff1a"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"RDB\u6301\u4e45\u5316"}),"\n",(0,l.jsx)(s.li,{children:"AOF\u6301\u4e45\u5316"}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"11rdb\u6301\u4e45\u5316",children:"1.1.RDB\u6301\u4e45\u5316"}),"\n",(0,l.jsx)(s.p,{children:"RDB\u5168\u79f0Redis Database Backup file\uff08Redis\u6570\u636e\u5907\u4efd\u6587\u4ef6\uff09\uff0c\u4e5f\u88ab\u53eb\u505aRedis\u6570\u636e\u5feb\u7167\u3002\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u628a\u5185\u5b58\u4e2d\u7684\u6240\u6709\u6570\u636e\u90fd\u8bb0\u5f55\u5230\u78c1\u76d8\u4e2d\u3002\u5f53Redis\u5b9e\u4f8b\u6545\u969c\u91cd\u542f\u540e\uff0c\u4ece\u78c1\u76d8\u8bfb\u53d6\u5feb\u7167\u6587\u4ef6\uff0c\u6062\u590d\u6570\u636e\u3002\u5feb\u7167\u6587\u4ef6\u79f0\u4e3aRDB\u6587\u4ef6\uff0c\u9ed8\u8ba4\u662f\u4fdd\u5b58\u5728\u5f53\u524d\u8fd0\u884c\u76ee\u5f55\u3002"}),"\n",(0,l.jsx)(s.h3,{id:"111\u6267\u884c\u65f6\u673a",children:"1.1.1.\u6267\u884c\u65f6\u673a"}),"\n",(0,l.jsx)(s.p,{children:"RDB\u6301\u4e45\u5316\u5728\u56db\u79cd\u60c5\u51b5\u4e0b\u4f1a\u6267\u884c\uff1a"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsx)(s.li,{children:"\u6267\u884csave\u547d\u4ee4"}),"\n",(0,l.jsx)(s.li,{children:"\u6267\u884cbgsave\u547d\u4ee4"}),"\n",(0,l.jsx)(s.li,{children:"Redis\u505c\u673a\u65f6"}),"\n",(0,l.jsx)(s.li,{children:"\u89e6\u53d1RDB\u6761\u4ef6\u65f6"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"1\uff09save\u547d\u4ee4"})}),"\n",(0,l.jsx)(s.p,{children:"\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff0c\u53ef\u4ee5\u7acb\u5373\u6267\u884c\u4e00\u6b21RDB\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725144536958",src:n(13877).A+"",width:"1108",height:"193"})}),"\n",(0,l.jsx)(s.p,{children:"save\u547d\u4ee4\u4f1a\u5bfc\u81f4\u4e3b\u8fdb\u7a0b\u6267\u884cRDB\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u5176\u5b83\u6240\u6709\u547d\u4ee4\u90fd\u4f1a\u88ab\u963b\u585e\u3002\u53ea\u6709\u5728\u6570\u636e\u8fc1\u79fb\u65f6\u53ef\u80fd\u7528\u5230\u3002"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"2\uff09bgsave\u547d\u4ee4"})}),"\n",(0,l.jsx)(s.p,{children:"\u4e0b\u9762\u7684\u547d\u4ee4\u53ef\u4ee5\u5f02\u6b65\u6267\u884cRDB\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725144725943",src:n(99587).A+"",width:"1157",height:"112"})}),"\n",(0,l.jsx)(s.p,{children:"\u8fd9\u4e2a\u547d\u4ee4\u6267\u884c\u540e\u4f1a\u5f00\u542f\u72ec\u7acb\u8fdb\u7a0b\u5b8c\u6210RDB\uff0c\u4e3b\u8fdb\u7a0b\u53ef\u4ee5\u6301\u7eed\u5904\u7406\u7528\u6237\u8bf7\u6c42\uff0c\u4e0d\u53d7\u5f71\u54cd\u3002"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"3\uff09\u505c\u673a\u65f6"})}),"\n",(0,l.jsx)(s.p,{children:"Redis\u505c\u673a\u65f6\u4f1a\u6267\u884c\u4e00\u6b21save\u547d\u4ee4\uff0c\u5b9e\u73b0RDB\u6301\u4e45\u5316\u3002"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"4\uff09\u89e6\u53d1RDB\u6761\u4ef6"})}),"\n",(0,l.jsx)(s.p,{children:"Redis\u5185\u90e8\u6709\u89e6\u53d1RDB\u7684\u673a\u5236\uff0c\u53ef\u4ee5\u5728redis.conf\u6587\u4ef6\u4e2d\u627e\u5230\uff0c\u683c\u5f0f\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"redis6.0.16\u4ee5\u4e0b\u9ed8\u8ba4\u60c5\u51b5\uff1a"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-properties",children:'# 900\u79d2\u5185\uff0c\u5982\u679c\u81f3\u5c11\u67091\u4e2akey\u88ab\u4fee\u6539\uff0c\u5219\u6267\u884cbgsave \uff0c \u5982\u679c\u662fsave "" \u5219\u8868\u793a\u7981\u7528RDB\nsave 900 1  \nsave 300 10  \nsave 60 10000 \n'})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"redis6.2\u548credis7.0.0\u9ed8\u8ba4\u60c5\u51b5\uff1a"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-properties",children:"save 3600 1\nsave 300 100\nsave 60 10000\n"})}),"\n",(0,l.jsx)(s.p,{children:"RDB\u7684\u5176\u5b83\u914d\u7f6e\u4e5f\u53ef\u4ee5\u5728redis.conf\u6587\u4ef6\u4e2d\u8bbe\u7f6e\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-properties",children:"# \u662f\u5426\u538b\u7f29 ,\u5efa\u8bae\u4e0d\u5f00\u542f\uff0c\u538b\u7f29\u4e5f\u4f1a\u6d88\u8017cpu\uff0c\u78c1\u76d8\u7684\u8bdd\u4e0d\u503c\u94b1\nrdbcompression yes\n\n# RDB\u6587\u4ef6\u540d\u79f0\ndbfilename dump.rdb  \n\n# \u6587\u4ef6\u4fdd\u5b58\u7684\u8def\u5f84\u76ee\u5f55\ndir ./ \n"})}),"\n",(0,l.jsx)(s.h3,{id:"112rdb\u539f\u7406",children:"1.1.2.RDB\u539f\u7406"}),"\n",(0,l.jsxs)(s.p,{children:["bgsave\u5f00\u59cb\u65f6\u4f1a",(0,l.jsx)(s.strong,{children:"fork"}),"\u4e3b\u8fdb\u7a0b\u5f97\u5230\u5b50\u8fdb\u7a0b\uff0c\u5b50\u8fdb\u7a0b",(0,l.jsx)(s.strong,{children:"\u5171\u4eab"}),"\u4e3b\u8fdb\u7a0b\u7684\u5185\u5b58\u6570\u636e\u3002\u5b8c\u6210fork\u540e\u8bfb\u53d6",(0,l.jsx)(s.strong,{children:"\u5171\u4eab"}),"\u5185\u5b58\u6570\u636e\u5e76\u5199\u5165 RDB \u6587\u4ef6",(0,l.jsx)(s.strong,{children:"\u66ff\u6362"}),"\u65e7\u7684RDB\u6587\u4ef6\u3002"]}),"\n",(0,l.jsxs)(s.p,{children:["\u5f53\u5b50\u8fdb\u7a0b\u5728\u8bbf\u95ee\u5171\u4eab\u5185\u5b58\u6570\u636e\u5199RDB\u6587\u4ef6\u65f6\uff0c",(0,l.jsx)(s.strong,{children:"\u4e3b\u8fdb\u7a0b\u82e5\u8981\u6267\u884c\u5199\u64cd\u4f5c\uff0c\u91c7\u7528\u7684\u662fcopy-on-write\u6280\u672f"}),"\uff1a"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["\u5f53\u4e3b\u8fdb\u7a0b\u6267\u884c",(0,l.jsx)(s.strong,{children:"\u8bfb\u64cd\u4f5c"}),"\u65f6\uff0c\u8bbf\u95ee\u5171\u4eab\u5185\u5b58\uff1b"]}),"\n",(0,l.jsxs)(s.li,{children:["\u5f53\u4e3b\u8fdb\u7a0b\u6267\u884c",(0,l.jsx)(s.strong,{children:"\u5199\u64cd\u4f5c"}),"\u65f6\uff0c\u5c06\u5171\u4eab\u6570\u636e\u8bbe\u7f6e\u4e3aread-only\uff0c",(0,l.jsx)(s.strong,{children:"\u62f7\u8d1d"}),"\u4e00\u4efd\u6570\u636e\uff0c\u6267\u884c",(0,l.jsx)(s.strong,{children:"\u5199"}),"\u64cd\u4f5c\uff0c\u4e4b\u540e\u7684",(0,l.jsx)(s.strong,{children:"\u8bfb"}),"\u4e5f\u4f1a\u5728\u526f\u672c\u4e0a\u8fdb\u884c\u3002"]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725151319695",src:n(67704).A+"",width:"1514",height:"547"})}),"\n",(0,l.jsx)(s.h3,{id:"113\u5c0f\u7ed3",children:"1.1.3.\u5c0f\u7ed3"}),"\n",(0,l.jsx)(s.p,{children:"RDB\u65b9\u5f0fbgsave\u7684\u57fa\u672c\u6d41\u7a0b\uff1f"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"fork\u4e3b\u8fdb\u7a0b\u5f97\u5230\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u5171\u4eab\u5185\u5b58\u7a7a\u95f4"}),"\n",(0,l.jsxs)(s.li,{children:["\u5b50\u8fdb\u7a0b\u8bfb\u53d6\u5185\u5b58\u6570\u636e\u5e76",(0,l.jsx)(s.strong,{children:"\u5f02\u6b65"}),"\u5199\u5165\u65b0\u7684RDB\u6587\u4ef6"]}),"\n",(0,l.jsxs)(s.li,{children:["\u7528\u65b0RDB\u6587\u4ef6",(0,l.jsx)(s.strong,{children:"\u66ff\u6362"}),"\u65e7\u7684RDB\u6587\u4ef6"]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"RDB\u4f1a\u5728\u4ec0\u4e48\u65f6\u5019\u6267\u884c\uff1fsave 60 1000\u4ee3\u8868\u4ec0\u4e48\u542b\u4e49\uff1f"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u9ed8\u8ba4\u662f\u670d\u52a1\u505c\u6b62\u65f6"}),"\n",(0,l.jsx)(s.li,{children:"\u6267\u884csave\u548cbgsave"}),"\n",(0,l.jsx)(s.li,{children:"\u4ee3\u886860\u79d2\u5185\u81f3\u5c11\u6267\u884c1000\u6b21\u4fee\u6539\u5219\u89e6\u53d1RDB"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"RDB\u7684\u7f3a\u70b9\uff1f"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"RDB\u6267\u884c\u95f4\u9694\u65f6\u95f4\u957f\uff0c\u4e24\u6b21RDB\u4e4b\u95f4\u5199\u5165\u6570\u636e\u6709\u4e22\u5931\u7684\u98ce\u9669"}),"\n",(0,l.jsx)(s.li,{children:"fork\u5b50\u8fdb\u7a0b\u3001\u538b\u7f29\u3001\u5199\u51faRDB\u6587\u4ef6\u90fd\u6bd4\u8f83\u8017\u65f6"}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"12aof\u6301\u4e45\u5316",children:"1.2.AOF\u6301\u4e45\u5316"}),"\n",(0,l.jsx)(s.h3,{id:"121aof\u539f\u7406",children:"1.2.1.AOF\u539f\u7406"}),"\n",(0,l.jsx)(s.p,{children:"AOF\u5168\u79f0\u4e3aAppend Only File\uff08\u8ffd\u52a0\u6587\u4ef6\uff09\u3002Redis\u5904\u7406\u7684\u6bcf\u4e00\u4e2a\u5199\u547d\u4ee4\u90fd\u4f1a\u8bb0\u5f55\u5728AOF\u6587\u4ef6\uff0c\u53ef\u4ee5\u770b\u505a\u662f\u547d\u4ee4\u65e5\u5fd7\u6587\u4ef6\u3002"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725151543640",src:n(2315).A+"",width:"918",height:"444"})}),"\n",(0,l.jsx)(s.h3,{id:"122aof\u914d\u7f6e",children:"1.2.2.AOF\u914d\u7f6e"}),"\n",(0,l.jsx)(s.p,{children:"AOF\u9ed8\u8ba4\u662f\u5173\u95ed\u7684\uff0c\u9700\u8981\u4fee\u6539redis.conf\u914d\u7f6e\u6587\u4ef6\u6765\u5f00\u542fAOF\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-properties",children:'# \u662f\u5426\u5f00\u542fAOF\u529f\u80fd\uff0c\u9ed8\u8ba4\u662fno\nappendonly yes\n# AOF\u6587\u4ef6\u7684\u540d\u79f0\nappendfilename "appendonly.aof"\n'})}),"\n",(0,l.jsx)(s.p,{children:"AOF\u7684\u547d\u4ee4\u8bb0\u5f55\u7684\u9891\u7387\u4e5f\u53ef\u4ee5\u901a\u8fc7redis.conf\u6587\u4ef6\u6765\u914d\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-properties",children:"# \u8868\u793a\u6bcf\u6267\u884c\u4e00\u6b21\u5199\u547d\u4ee4\uff0c\u7acb\u5373\u8bb0\u5f55\u5230AOF\u6587\u4ef6\nappendfsync always \n# \u5199\u547d\u4ee4\u6267\u884c\u5b8c\u5148\u653e\u5165AOF\u7f13\u51b2\u533a\uff0c\u7136\u540e\u8868\u793a\u6bcf\u96941\u79d2\u5c06\u7f13\u51b2\u533a\u6570\u636e\u5199\u5230AOF\u6587\u4ef6\uff0c\u662f\u9ed8\u8ba4\u65b9\u6848\nappendfsync everysec \n# \u5199\u547d\u4ee4\u6267\u884c\u5b8c\u5148\u653e\u5165AOF\u7f13\u51b2\u533a\uff0c\u7531\u64cd\u4f5c\u7cfb\u7edf\u51b3\u5b9a\u4f55\u65f6\u5c06\u7f13\u51b2\u533a\u5185\u5bb9\u5199\u56de\u78c1\u76d8\nappendfsync no\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u4e09\u79cd\u7b56\u7565\u5bf9\u6bd4\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725151654046",src:n(94686).A+"",width:"1008",height:"168"})}),"\n",(0,l.jsx)(s.h3,{id:"123aof\u6587\u4ef6\u91cd\u5199",children:"1.2.3.AOF\u6587\u4ef6\u91cd\u5199"}),"\n",(0,l.jsx)(s.p,{children:"\u56e0\u4e3a\u662f\u8bb0\u5f55\u547d\u4ee4\uff0cAOF\u6587\u4ef6\u4f1a\u6bd4RDB\u6587\u4ef6\u5927\u7684\u591a\u3002\u800c\u4e14AOF\u4f1a\u8bb0\u5f55\u5bf9\u540c\u4e00\u4e2akey\u7684\u591a\u6b21\u5199\u64cd\u4f5c\uff0c\u4f46\u53ea\u6709\u6700\u540e\u4e00\u6b21\u5199\u64cd\u4f5c\u624d\u6709\u610f\u4e49\u3002\u901a\u8fc7\u6267\u884cbgrewriteaof\u547d\u4ee4\uff0c\u53ef\u4ee5\u8ba9AOF\u6587\u4ef6\u6267\u884c\u91cd\u5199\u529f\u80fd\uff0c\u7528\u6700\u5c11\u7684\u547d\u4ee4\u8fbe\u5230\u76f8\u540c\u6548\u679c\u3002"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725151729118",src:n(19973).A+"",width:"970",height:"134"})}),"\n",(0,l.jsxs)(s.p,{children:["\u5982\u56fe\uff0cAOF\u539f\u672c\u6709\u4e09\u4e2a\u547d\u4ee4\uff0c\u4f46\u662f",(0,l.jsx)(s.code,{children:"set num 123 \u548c set num 666"}),"\u90fd\u662f\u5bf9num\u7684\u64cd\u4f5c\uff0c\u7b2c\u4e8c\u6b21\u4f1a\u8986\u76d6\u7b2c\u4e00\u6b21\u7684\u503c\uff0c\u56e0\u6b64\u7b2c\u4e00\u4e2a\u547d\u4ee4\u8bb0\u5f55\u4e0b\u6765\u6ca1\u6709\u610f\u4e49\u3002"]}),"\n",(0,l.jsxs)(s.p,{children:["\u6240\u4ee5\u91cd\u5199\u547d\u4ee4\u540e\uff0cAOF\u6587\u4ef6\u5185\u5bb9\u5c31\u662f\uff1a",(0,l.jsx)(s.code,{children:"mset name jack num 666"})]}),"\n",(0,l.jsxs)(s.p,{children:["Redis\u4e5f\u4f1a\u5728\u89e6\u53d1\u9608\u503c\u65f6",(0,l.jsx)(s.strong,{children:"\u81ea\u52a8\u53bb\u91cd\u5199AOF\u6587\u4ef6"}),"\u3002\u9608\u503c\u4e5f\u53ef\u4ee5\u5728redis.conf\u4e2d\u914d\u7f6e\uff1a"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-properties",children:"# AOF\u6587\u4ef6\u6bd4\u4e0a\u6b21\u6587\u4ef6 \u589e\u957f\u8d85\u8fc7\u591a\u5c11\u767e\u5206\u6bd4\u5219\u89e6\u53d1\u91cd\u5199\nauto-aof-rewrite-percentage 100\n# AOF\u6587\u4ef6\u4f53\u79ef\u6700\u5c0f\u591a\u5927\u4ee5\u4e0a\u624d\u89e6\u53d1\u91cd\u5199 \nauto-aof-rewrite-min-size 64mb \n"})}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsx)(s.p,{children:"\u6ee1\u8db364M\u7684\u65f6\u5019\uff0c\u6ee1\u8db3percentage\u624d\u4f1a\u89e6\u53d1\u91cd\u5199\uff0c\u6587\u4ef6\u592a\u5c0f\u91cd\u5199\u6ca1\u610f\u4e49"}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"124aof\u6587\u4ef6\u683c\u5f0fredis70\u4ee5\u540e",children:"1.2.4.AOF\u6587\u4ef6\u683c\u5f0f\uff08Redis7.0\u4ee5\u540e\uff09"}),"\n",(0,l.jsx)(s.p,{children:"aof\u6587\u4ef6\u4fdd\u5b58\u4f4d\u7f6e\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"redis6\uff1a\u548cRDB\u4fdd\u5b58\u7684\u4f4d\u7f6e\u76f8\u540c"})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"==redis7\uff1a\u4f1a\u5728RAB\u6587\u4ef6\u4fdd\u5b58\u7684\u4f4d\u7f6e\u4e0a\u52a0\u4e0a\u4e00\u4e2a\u81ea\u5df1\u8bbe\u5b9a\u7684appenddirname\u76ee\u5f55\uff0c\u4fdd\u5b58\u5728\u5176\u4e2d=="})}),"\n",(0,l.jsx)(s.p,{children:"\u6587\u4ef6\u683c\u5f0f\uff1a"}),"\n",(0,l.jsx)(s.p,{children:"redis6\uff1aapendfilename.aof"}),"\n",(0,l.jsxs)(s.p,{children:["redis7\uff1a",(0,l.jsx)(s.strong,{children:"aof\u6587\u4ef6\u88ab\u62c6\u5206\u4e3a\u4e09\u4e2a"})]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{src:n(52951).A+"",width:"819",height:"620"})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20231013214141914",src:n(79632).A+"",width:"1219",height:"311"})}),"\n",(0,l.jsx)(s.h2,{id:"13rdb\u4e0eaof\u5bf9\u6bd4",children:"1.3.RDB\u4e0eAOF\u5bf9\u6bd4"}),"\n",(0,l.jsxs)(s.p,{children:["RDB\u548cAOF\u5404\u6709\u81ea\u5df1\u7684\u4f18\u7f3a\u70b9\uff0c\u5982\u679c\u5bf9\u6570\u636e\u5b89\u5168\u6027\u8981\u6c42\u8f83\u9ad8\uff0c\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\u5f80\u5f80\u4f1a",(0,l.jsx)(s.strong,{children:"\u7ed3\u5408"}),"\u4e24\u8005\u6765\u4f7f\u7528\u3002"]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725151940515",src:n(47767).A+"",width:"1198",height:"435"})}),"\n",(0,l.jsx)(s.h2,{id:"14-rdb\u548caof\u6df7\u5408\u4f7f\u7528",children:"1.4 RDB\u548cAOF\u6df7\u5408\u4f7f\u7528"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20231021214144751",src:n(57777).A+"",width:"1444",height:"996"})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20230406210220048",src:n(95309).A+"",width:"1855",height:"1028"})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20231021214028870",src:n(89896).A+"",width:"1438",height:"950"})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20230406210834433",src:n(2748).A+"",width:"2252",height:"912"})}),"\n",(0,l.jsx)(s.h3,{id:"redis\u6570\u636e\u5e93rdb\u548caof\u914d\u7f6e\u6570\u636e\u5e93\u5907\u4efd\u7684\u533a\u522b",children:"redis\u6570\u636e\u5e93RDB\u548cAOF\u914d\u7f6e\uff0c\u6570\u636e\u5e93\u5907\u4efd\u7684\u533a\u522b\uff1a"}),"\n",(0,l.jsxs)(s.p,{children:["==",(0,l.jsx)(s.strong,{children:"\u4e00\u53e5\u8bdd\uff1aAOF\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8eRDB=="})]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"\u60c5\u51b51\uff1a\u6574\u4e2aredis\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0credis\u4e3a\u4e0d\u8bbe\u7f6esave\u53c2\u6570\u4e14\u672a\u5f00\u542f\u4e86AOF\u6301\u4e45\u5316\u65f6\uff0c\u5f53shutdown\u65f6\u4f1a\u751f\u6210\u4e00\u4e2a\u6709\u6548dump\u6587\u4ef6\uff0c\u6574\u4e2a\u8fc7\u7a0b\u53ea\u80fd\u5728shutdown\u65f6\u4fdd\u5b58\u4e00\u4e2a\u6709\u6548\u7684dump\u6587\u4ef6\uff0c\u4ee5\u81f3\u4e8e\u4e0b\u4e00\u6b21\u6253\u5f00redis\u65f6\u53ef\u6062\u590d\u6570\u636e"})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"\u60c5\u51b52\uff1a\u4e0d\u8bbe\u7f6esave\u53c2\u6570\u4f46\u662f\u5f00\u542f\u4e86AOF\u6301\u4e45\u5316\u65f6\uff0c\u4ee5AOF\u4e3a\u4e3b\uff0c\u5f53shutdown\u65f6\u4e5f\u4f1a\u751f\u6210\u4e00\u4e2a\u65e0\u6548dump\u6587\u4ef6\uff0c\u5907\u4efd\u6570\u636e\u5e93\u7531AOF\u5b8c\u6210\uff0c\u82e5\u5c06AOF\u6587\u4ef6\u5220\u9664\uff0c\u6570\u636e\u5e93\u5c06\u65e0\u6cd5\u5b8c\u6210\u5907\u4efd"})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"\u60c5\u51b53\uff1a\u4f46\u662f\u82e5\u5c06save \u540e\u5199\u6210\u7a7a\u4e32\uff0c\u5219\u662f\u7981\u7528\u6240\u6709dump\u6587\u4ef6\u7684\u81ea\u52a8\u751f\u6210\u65b9\u5f0f\uff0cshutdown\u65f6\u8fde\u7a7a\u6587\u4ef6\u4e5f\u4e0d\u4f1a\u751f\u6210\uff0c\u82e5\u5f00\u542f\u4e86AOF\uff0c\u5219\u53ef\u7531AOF\u5b8c\u6210\u5907\u4efd\uff0c\u82e5\u672a\u5f00\u542fAOF\uff0c\u5219\u662f\u7eaf\u7f13\u5b58\u6a21\u5f0f\uff0c\u5219redis\u65e0\u6cd5\u81ea\u52a8\u5b8c\u6210\u5907\u4efd"})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"\u60c5\u51b54\uff1a\u8bbe\u7f6e\u4e86save\u53c2\u6570\u4ee5\u5f00\u542f\u81ea\u52a8\u89e6\u53d1RDB\uff0c\u82e5\u672a\u5f00\u542fAOF\uff0c\u5219\u7531RDB\u72ec\u81ea\u5b8c\u6210\u5907\u4efd\uff0c\u82e5\u5f00\u542f\u4e86AOF\u4e14\u5f00\u542f\u4e86\u6df7\u5408\u6a21\u5f0f\uff0c\u5219\u7531RDB\u548cAOF\u6df7\u5408\u5b8c\u6210\u5907\u4efd\uff0c\u751f\u6210\u7684AOF\u6587\u4ef6\u5305\u62ecRDB\u5934\u90e8\u548cAOF\u6df7\u5199\uff0c\u82e5\u672a\u5f00\u542f\u6df7\u5408\u6a21\u5f0f\uff0c\u5219\u4ee5AOF\u4e3a\u4e3b\uff0cAOF\u4f18\u5148\u7ea7\u9ad8"})}),"\n",(0,l.jsx)(s.h1,{id:"2redis\u4e3b\u4ece",children:"2.Redis\u4e3b\u4ece"}),"\n",(0,l.jsx)(s.h2,{id:"21\u642d\u5efa\u4e3b\u4ece\u67b6\u6784",children:"2.1.\u642d\u5efa\u4e3b\u4ece\u67b6\u6784"}),"\n",(0,l.jsx)(s.p,{children:"\u5355\u8282\u70b9Redis\u7684\u5e76\u53d1\u80fd\u529b\u662f\u6709\u4e0a\u9650\u7684\uff0c\u8981\u8fdb\u4e00\u6b65\u63d0\u9ad8Redis\u7684\u5e76\u53d1\u80fd\u529b\uff0c\u5c31\u9700\u8981\u642d\u5efa\u4e3b\u4ece\u96c6\u7fa4\uff0c\u5b9e\u73b0\u8bfb\u5199\u5206\u79bb\u3002"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725152037611",src:n(75198).A+"",width:"1297",height:"604"})}),"\n",(0,l.jsx)(s.p,{children:"\u5177\u4f53\u642d\u5efa\u6d41\u7a0b\u53c2\u8003\u8bfe\u524d\u8d44\u6599\u300aRedis\u96c6\u7fa4.md\u300b\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725152052501",src:n(71283).A+"",width:"194",height:"217"})}),"\n",(0,l.jsx)(s.h2,{id:"22\u4e3b\u4ece\u6570\u636e\u540c\u6b65\u539f\u7406",children:"2.2.\u4e3b\u4ece\u6570\u636e\u540c\u6b65\u539f\u7406"}),"\n",(0,l.jsx)(s.h3,{id:"221\u5168\u91cf\u540c\u6b65",children:"2.2.1.\u5168\u91cf\u540c\u6b65"}),"\n",(0,l.jsxs)(s.p,{children:["\u4e3b\u4ece\u7b2c\u4e00\u6b21\u5efa\u7acb\u8fde\u63a5\u65f6\uff0c\u4f1a\u6267\u884c",(0,l.jsx)(s.strong,{children:"\u5168\u91cf\u540c\u6b65"}),"\uff0c\u5c06master\u8282\u70b9\u7684\u6240\u6709\u6570\u636e\u90fd\u62f7\u8d1d\u7ed9slave\u8282\u70b9\uff0c\u6d41\u7a0b\uff1a"]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725152222497",src:n(25034).A+"",width:"1231",height:"687"})}),"\n",(0,l.jsxs)(s.p,{children:["\u8fd9\u91cc\u6709\u4e00\u4e2a\u95ee\u9898\uff0c",(0,l.jsx)(s.strong,{children:"master\u5982\u4f55\u5f97\u77e5salve\u662f\u7b2c\u4e00\u6b21\u6765\u8fde\u63a5\u5462"}),"\uff1f\uff1f"]}),"\n",(0,l.jsx)(s.p,{children:"\u6709\u51e0\u4e2a\u6982\u5ff5\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u5224\u65ad\u4f9d\u636e\uff1a"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Replication Id"}),"\uff1a\u7b80\u79f0replid\uff0c\u662f\u6570\u636e\u96c6\u7684\u6807\u8bb0\uff0cid\u4e00\u81f4\u5219\u8bf4\u660e\u662f\u540c\u4e00\u6570\u636e\u96c6\u3002\u6bcf\u4e00\u4e2amaster\u90fd\u6709\u552f\u4e00\u7684replid\uff0cslave\u5219\u4f1a\u7ee7\u627fmaster\u8282\u70b9\u7684replid"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"offset"}),"\uff1a\u504f\u79fb\u91cf\uff0c\u968f\u7740\u8bb0\u5f55\u5728repl_baklog\u4e2d\u7684\u6570\u636e\u589e\u591a\u800c\u9010\u6e10\u589e\u5927\u3002slave\u5b8c\u6210\u540c\u6b65\u65f6\u4e5f\u4f1a\u8bb0\u5f55\u5f53\u524d\u540c\u6b65\u7684offset\u3002\u5982\u679cslave\u7684offset\u5c0f\u4e8emaster\u7684offset\uff0c\u8bf4\u660eslave\u6570\u636e\u843d\u540e\u4e8emaster\uff0c\u9700\u8981\u66f4\u65b0\u3002"]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u56e0\u6b64slave\u505a\u6570\u636e\u540c\u6b65\uff0c\u5fc5\u987b\u5411master\u58f0\u660e\u81ea\u5df1\u7684replication id \u548coffset\uff0cmaster\u624d\u53ef\u4ee5\u5224\u65ad\u5230\u5e95\u9700\u8981\u540c\u6b65\u54ea\u4e9b\u6570\u636e\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u56e0\u4e3aslave\u539f\u672c\u4e5f\u662f\u4e00\u4e2amaster\uff0c\u6709\u81ea\u5df1\u7684replid\u548coffset\uff0c\u5f53\u7b2c\u4e00\u6b21\u53d8\u6210slave\uff0c\u4e0emaster\u5efa\u7acb\u8fde\u63a5\u65f6\uff0c\u53d1\u9001\u7684replid\u548coffset\u662f\u81ea\u5df1\u7684replid\u548coffset\u3002"}),"\n",(0,l.jsxs)(s.p,{children:["master\u5224\u65ad\u53d1\u73b0",(0,l.jsx)(s.strong,{children:"slave\u53d1\u9001\u6765\u7684replid\u4e0e\u81ea\u5df1\u7684\u4e0d\u4e00\u81f4"}),"\uff0c\u8bf4\u660e\u8fd9\u662f\u4e00\u4e2a\u5168\u65b0\u7684slave\uff0c\u5c31\u77e5\u9053\u8981\u505a",(0,l.jsx)(s.strong,{children:"\u5168\u91cf\u540c\u6b65"}),"\u4e86\u3002"]}),"\n",(0,l.jsx)(s.p,{children:"master\u4f1a\u5c06\u81ea\u5df1\u7684replid\u548coffset\u90fd\u53d1\u9001\u7ed9\u8fd9\u4e2aslave\uff0cslave\u4fdd\u5b58\u8fd9\u4e9b\u4fe1\u606f\u3002\u4ee5\u540eslave\u7684replid\u5c31\u4e0emaster\u4e00\u81f4\u4e86\u3002"}),"\n",(0,l.jsxs)(s.p,{children:["\u56e0\u6b64\uff0c",(0,l.jsx)(s.strong,{children:"master\u5224\u65ad\u4e00\u4e2a\u8282\u70b9\u662f\u5426\u662f\u7b2c\u4e00\u6b21\u540c\u6b65\u7684\u4f9d\u636e\uff0c\u5c31\u662f\u770breplid\u662f\u5426\u4e00\u81f4"}),"\u3002"]}),"\n",(0,l.jsx)(s.p,{children:"\u5982\u56fe\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725152700914",src:n(5467).A+"",width:"1239",height:"649"})}),"\n",(0,l.jsx)(s.p,{children:"\u5b8c\u6574\u6d41\u7a0b\u63cf\u8ff0\uff1a"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"slave\u8282\u70b9\u8bf7\u6c42\u589e\u91cf\u540c\u6b65"}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"master\u8282\u70b9\u5224\u65adreplid"}),"\uff0c\u53d1\u73b0\u4e0d\u4e00\u81f4\uff0c\u62d2\u7edd\u589e\u91cf\u540c\u6b65"]}),"\n",(0,l.jsx)(s.li,{children:"master\u5c06\u5b8c\u6574\u5185\u5b58\u6570\u636e\u751f\u6210RDB\uff0c\u53d1\u9001RDB\u5230slave"}),"\n",(0,l.jsx)(s.li,{children:"slave\u6e05\u7a7a\u672c\u5730\u6570\u636e\uff0c\u52a0\u8f7dmaster\u7684RDB"}),"\n",(0,l.jsx)(s.li,{children:"master\u5c06RDB\u671f\u95f4\u7684\u547d\u4ee4\u8bb0\u5f55\u5728repl_baklog\uff0c\u5e76\u6301\u7eed\u5c06log\u4e2d\u7684\u547d\u4ee4\u53d1\u9001\u7ed9slave"}),"\n",(0,l.jsx)(s.li,{children:"slave\u6267\u884c\u63a5\u6536\u5230\u7684\u547d\u4ee4\uff0c\u4fdd\u6301\u4e0emaster\u4e4b\u95f4\u7684\u540c\u6b65"}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"222\u589e\u91cf\u540c\u6b65",children:"2.2.2.\u589e\u91cf\u540c\u6b65"}),"\n",(0,l.jsxs)(s.p,{children:["\u5168\u91cf\u540c\u6b65\u9700\u8981\u5148\u505aRDB\uff0c\u7136\u540e\u5c06RDB\u6587\u4ef6\u901a\u8fc7\u7f51\u7edc\u4f20\u8f93\u4e2aslave\uff0c\u6210\u672c\u592a\u9ad8\u4e86\u3002\u56e0\u6b64\u9664\u4e86\u7b2c\u4e00\u6b21\u505a\u5168\u91cf\u540c\u6b65\uff0c\u5176\u5b83\u5927\u591a\u6570\u65f6\u5019slave\u4e0emaster\u90fd\u662f\u505a",(0,l.jsx)(s.strong,{children:"\u589e\u91cf\u540c\u6b65"}),"\u3002"]}),"\n",(0,l.jsx)(s.p,{children:"\u4ec0\u4e48\u662f\u589e\u91cf\u540c\u6b65\uff1f\u5c31\u662f\u53ea\u66f4\u65b0slave\u4e0emaster\u5b58\u5728\u5dee\u5f02\u7684\u90e8\u5206\u6570\u636e\u3002\u5982\u56fe\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725153201086",src:n(47366).A+"",width:"1210",height:"488"})}),"\n",(0,l.jsx)(s.p,{children:"\u90a3\u4e48master\u600e\u4e48\u77e5\u9053slave\u4e0e\u81ea\u5df1\u7684\u6570\u636e\u5dee\u5f02\u5728\u54ea\u91cc\u5462?"}),"\n",(0,l.jsx)(s.h3,{id:"223repl_backlog\u539f\u7406",children:"2.2.3.repl_backlog\u539f\u7406"}),"\n",(0,l.jsx)(s.p,{children:"master\u600e\u4e48\u77e5\u9053slave\u4e0e\u81ea\u5df1\u7684\u6570\u636e\u5dee\u5f02\u5728\u54ea\u91cc\u5462?"}),"\n",(0,l.jsx)(s.p,{children:"\u8fd9\u5c31\u8981\u8bf4\u5230\u5168\u91cf\u540c\u6b65\u65f6\u7684repl_baklog\u6587\u4ef6\u4e86\u3002"}),"\n",(0,l.jsxs)(s.p,{children:["\u8fd9\u4e2a\u6587\u4ef6\u662f\u4e00\u4e2a\u56fa\u5b9a\u5927\u5c0f\u7684\u6570\u7ec4\uff0c\u53ea\u4e0d\u8fc7\u6570\u7ec4\u662f\u73af\u5f62\uff0c\u4e5f\u5c31\u662f\u8bf4",(0,l.jsx)(s.strong,{children:"\u89d2\u6807\u5230\u8fbe\u6570\u7ec4\u672b\u5c3e\u540e\uff0c\u4f1a\u518d\u6b21\u4ece0\u5f00\u59cb\u8bfb\u5199"}),"\uff0c\u8fd9\u6837\u6570\u7ec4\u5934\u90e8\u7684\u6570\u636e\u5c31\u4f1a\u88ab\u8986\u76d6\u3002"]}),"\n",(0,l.jsx)(s.p,{children:"repl_baklog\u4e2d\u4f1a\u8bb0\u5f55Redis\u5904\u7406\u8fc7\u7684\u547d\u4ee4\u65e5\u5fd7\u53caoffset\uff0c\u5305\u62ecmaster\u5f53\u524d\u7684offset\uff0c\u548cslave\u5df2\u7ecf\u62f7\u8d1d\u5230\u7684offset\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725153359022",src:n(48234).A+"",width:"226",height:"243"})}),"\n",(0,l.jsx)(s.p,{children:"slave\u4e0emaster\u7684offset\u4e4b\u95f4\u7684\u5dee\u5f02\uff0c\u5c31\u662fsalve\u9700\u8981\u589e\u91cf\u62f7\u8d1d\u7684\u6570\u636e\u4e86\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u968f\u7740\u4e0d\u65ad\u6709\u6570\u636e\u5199\u5165\uff0cmaster\u7684offset\u9010\u6e10\u53d8\u5927\uff0cslave\u4e5f\u4e0d\u65ad\u7684\u62f7\u8d1d\uff0c\u8ffd\u8d76master\u7684offset\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725153524190",src:n(10614).A+"",width:"239",height:"252"})}),"\n",(0,l.jsx)(s.p,{children:"\u76f4\u5230\u6570\u7ec4\u88ab\u586b\u6ee1\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725153715910",src:n(30988).A+"",width:"238",height:"265"})}),"\n",(0,l.jsx)(s.p,{children:"\u6b64\u65f6\uff0c\u5982\u679c\u6709\u65b0\u7684\u6570\u636e\u5199\u5165\uff0c\u5c31\u4f1a\u8986\u76d6\u6570\u7ec4\u4e2d\u7684\u65e7\u6570\u636e\u3002\u4e0d\u8fc7\uff0c\u65e7\u7684\u6570\u636e\u53ea\u8981\u662f\u7eff\u8272\u7684\uff0c\u8bf4\u660e\u662f\u5df2\u7ecf\u88ab\u540c\u6b65\u5230slave\u7684\u6570\u636e\uff0c\u5373\u4fbf\u88ab\u8986\u76d6\u4e86\u4e5f\u6ca1\u4ec0\u4e48\u5f71\u54cd\u3002\u56e0\u4e3a\u672a\u540c\u6b65\u7684\u4ec5\u4ec5\u662f\u7ea2\u8272\u90e8\u5206\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u4f46\u662f\uff0c\u5982\u679cslave\u51fa\u73b0\u7f51\u7edc\u963b\u585e\uff0c\u5bfc\u81f4master\u7684offset\u8fdc\u8fdc\u8d85\u8fc7\u4e86slave\u7684offset\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725153937031",src:n(51148).A+"",width:"202",height:"249"})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"\u5982\u679cmaster\u7ee7\u7eed\u5199\u5165\u65b0\u6570\u636e\uff0c\u5176offset\u5c31\u4f1a\u8986\u76d6\u65e7\u7684\u6570\u636e"}),"\uff0c\u76f4\u5230\u5c06slave\u73b0\u5728\u7684offset\u4e5f\u8986\u76d6\uff1a"]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725154155984",src:n(88682).A+"",width:"218",height:"253"})}),"\n",(0,l.jsxs)(s.p,{children:["\u68d5\u8272\u6846\u4e2d\u7684\u7ea2\u8272\u90e8\u5206\uff0c\u5c31\u662f\u5c1a\u672a\u540c\u6b65\uff0c\u4f46\u662f\u5374\u5df2\u7ecf\u88ab\u8986\u76d6\u7684\u6570\u636e\u3002\u6b64\u65f6\u5982\u679cslave\u6062\u590d\uff0c\u9700\u8981\u540c\u6b65\uff0c\u5374",(0,l.jsx)(s.strong,{children:"\u53d1\u73b0\u81ea\u5df1\u7684offset\u90fd\u6ca1\u6709\u4e86\uff0c\u65e0\u6cd5\u5b8c\u6210\u589e\u91cf\u540c\u6b65\u4e86"}),"\u3002",(0,l.jsx)(s.code,{children:"\u53ea\u80fd\u505a\u5168\u91cf\u540c\u6b65"}),"\u3002"]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725154216392",src:n(42793).A+"",width:"1350",height:"134"})}),"\n",(0,l.jsx)(s.h2,{id:"23\u4e3b\u4ece\u540c\u6b65\u4f18\u5316",children:"2.3.\u4e3b\u4ece\u540c\u6b65\u4f18\u5316"}),"\n",(0,l.jsx)(s.p,{children:"\u4e3b\u4ece\u540c\u6b65\u53ef\u4ee5\u4fdd\u8bc1\u4e3b\u4ece\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0c\u975e\u5e38\u91cd\u8981\u3002"}),"\n",(0,l.jsxs)(s.p,{children:["\u56e0\u4e3a",(0,l.jsx)(s.strong,{children:"\u5168\u91cf\u540c\u6b65\u975e\u5e38\u6d88\u8017\u6027\u80fd"}),"\uff0crepl_baklog\u5199\u6ee1\u65f6\u8fd8\u4f1a\u53d1\u751f\u5168\u91cf\u540c\u6b65\uff0c\u4e3a\u4e86",(0,l.jsx)(s.strong,{children:"\u51cf\u5c11\u6216\u4f18\u5316\u5168\u91cf\u540c\u6b65"}),"\uff1a"]}),"\n",(0,l.jsxs)(s.p,{children:["\u53ef\u4ee5\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\u6765",(0,l.jsx)(s.strong,{children:"\u4f18\u5316Redis\u4e3b\u4ece\u96c6\u7fa4"}),"\uff1a"]}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["\u5728master\u4e2d\u914d\u7f6e",(0,l.jsx)(s.strong,{children:"repl-diskless-sync yes"}),"\u542f\u7528",(0,l.jsx)(s.strong,{children:"\u65e0\u78c1\u76d8\u590d\u5236"}),"\uff0c\u76f4\u63a5\u5c06\u751f\u6210\u7684rdb\u53d1\u9001\u7ed9salve\uff0c\u907f\u514d\u5168\u91cf\u540c\u6b65\u65f6\u7684\u78c1\u76d8IO\uff0c\u63d0\u9ad8\u5168\u91cf\u540c\u6b65\u6027\u80fd\u3002\uff08\u78c1\u76d8",(0,l.jsx)(s.strong,{children:"IO\u80fd\u529b\u8f83\u5dee\uff0c\u7f51\u7edc\u5f3a"}),"\u65f6\uff09"]}),"\n",(0,l.jsxs)(s.li,{children:["\u8bbe\u7f6eRedis\u5355\u8282\u70b9\u4e0a\u7684",(0,l.jsx)(s.strong,{children:"\u5185\u5b58\u5360\u7528\u4e0d\u8981\u592a\u5927"}),"\uff0c\u51cf\u5c11RDB\u5bfc\u81f4\u7684\u8fc7\u591a\u78c1\u76d8IO"]}),"\n",(0,l.jsxs)(s.li,{children:["\u9002\u5f53",(0,l.jsx)(s.strong,{children:"\u63d0\u9ad8repl_backlog_buffer\u7684\u5927\u5c0f"}),"\uff0c\u53c2\u6570\u4e3arepl-backlog-size\uff08\u9ed8\u8ba4\u4e3a1MB\uff09\u53d1\u73b0slave\u5b95\u673a\u65f6\u5c3d\u5feb\u5b9e\u73b0\u6545\u969c\u6062\u590d\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u5168\u91cf\u540c\u6b65"]}),"\n",(0,l.jsxs)(s.li,{children:["\u9650\u5236\u4e00\u4e2amaster\u4e0a\u7684slave\u8282\u70b9\u6570\u91cf\uff0c\u5982\u679c\u5b9e\u5728\u662f\u592a\u591aslave\uff0c\u5219\u53ef\u4ee5\u91c7\u7528",(0,l.jsx)(s.strong,{children:"\u4e3b-\u4ece-\u4ece\u94fe\u5f0f\u7ed3\u6784\uff0c\u51cf\u5c11master\u538b\u529b"})]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u4e3b\u4ece\u4ece\u67b6\u6784\u56fe\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725154405899",src:n(36523).A+"",width:"1308",height:"412"})}),"\n",(0,l.jsx)(s.h2,{id:"24\u5c0f\u7ed3",children:"2.4.\u5c0f\u7ed3"}),"\n",(0,l.jsx)(s.p,{children:"\u7b80\u8ff0\u5168\u91cf\u540c\u6b65\u548c\u589e\u91cf\u540c\u6b65\u533a\u522b\uff1f"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["\u5168\u91cf\u540c\u6b65\uff1amaster\u5c06\u5b8c\u6574\u5185\u5b58\u6570\u636e\u751f\u6210",(0,l.jsx)(s.strong,{children:"RDB"}),"\uff0c\u53d1\u9001RDB\u5230slave\u3002\u540e\u7eed\u547d\u4ee4\u5219\u8bb0\u5f55\u5728repl_baklog\uff0c\u9010\u4e2a\u53d1\u9001\u7ed9slave\u3002"]}),"\n",(0,l.jsx)(s.li,{children:"\u589e\u91cf\u540c\u6b65\uff1aslave\u63d0\u4ea4\u81ea\u5df1\u7684offset\u5230master\uff0cmaster\u83b7\u53d6repl_backlog\u4e2d\u4eceoffset\u4e4b\u540e\u7684\u547d\u4ee4\u7ed9slave"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u4ec0\u4e48\u65f6\u5019\u6267\u884c\u5168\u91cf\u540c\u6b65\uff1f"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"slave\u8282\u70b9\u7b2c\u4e00\u6b21\u8fde\u63a5master\u8282\u70b9\u65f6"}),"\n",(0,l.jsx)(s.li,{children:"slave\u8282\u70b9\u65ad\u5f00\u65f6\u95f4\u592a\u4e45\uff0crepl_baklog\u4e2d\u7684offset\u5df2\u7ecf\u88ab\u8986\u76d6\u65f6"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u4ec0\u4e48\u65f6\u5019\u6267\u884c\u589e\u91cf\u540c\u6b65\uff1f"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"slave\u8282\u70b9\u65ad\u5f00\u53c8\u6062\u590d\uff0c\u5e76\u4e14\u5728repl_baklog\u4e2d\u80fd\u627e\u5230offset\u65f6"}),"\n"]}),"\n",(0,l.jsx)(s.h1,{id:"3redis\u54e8\u5175",children:"3.Redis\u54e8\u5175"}),"\n",(0,l.jsx)(s.p,{children:"Redis\u63d0\u4f9b\u4e86\u54e8\u5175\uff08Sentinel\uff09\u673a\u5236\u6765\u5b9e\u73b0\u4e3b\u4ece\u96c6\u7fa4\u7684\u81ea\u52a8\u6545\u969c\u6062\u590d\u3002"}),"\n",(0,l.jsx)(s.h2,{id:"31\u54e8\u5175\u539f\u7406",children:"3.1.\u54e8\u5175\u539f\u7406"}),"\n",(0,l.jsx)(s.h3,{id:"311\u96c6\u7fa4\u7ed3\u6784\u548c\u4f5c\u7528",children:"3.1.1.\u96c6\u7fa4\u7ed3\u6784\u548c\u4f5c\u7528"}),"\n",(0,l.jsx)(s.p,{children:"\u54e8\u5175\u7684\u7ed3\u6784\u5982\u56fe\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725154528072",src:n(61580).A+"",width:"820",height:"617"})}),"\n",(0,l.jsx)(s.p,{children:"\u54e8\u5175\u7684\u4f5c\u7528\u5982\u4e0b\uff1a"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"\u76d1\u63a7"}),"\uff1aSentinel \u4f1a\u4e0d\u65ad\u68c0\u67e5\u60a8\u7684master\u548cslave\u662f\u5426\u6309\u9884\u671f\u5de5\u4f5c"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"\u81ea\u52a8\u6545\u969c\u6062\u590d"}),"\uff1a\u5982\u679cmaster\u6545\u969c\uff0cSentinel\u4f1a\u5c06\u4e00\u4e2aslave\u63d0\u5347\u4e3amaster\u3002\u5f53\u6545\u969c\u5b9e\u4f8b\u6062\u590d\u540e\u4e5f\u4ee5\u65b0\u7684master\u4e3a\u4e3b"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"\u901a\u77e5"}),"\uff1aSentinel\u5145\u5f53Redis\u5ba2\u6237\u7aef\u7684\u670d\u52a1\u53d1\u73b0\u6765\u6e90\uff0c\u5f53\u96c6\u7fa4\u53d1\u751f\u6545\u969c\u8f6c\u79fb\u65f6\uff0c\u4f1a\u5c06\u6700\u65b0\u4fe1\u606f\u63a8\u9001\u7ed9Redis\u7684\u5ba2\u6237\u7aef"]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"312\u96c6\u7fa4\u76d1\u63a7\u539f\u7406",children:"3.1.2.\u96c6\u7fa4\u76d1\u63a7\u539f\u7406"}),"\n",(0,l.jsxs)(s.p,{children:["Sentinel\u57fa\u4e8e\u5fc3\u8df3\u673a\u5236\u76d1\u6d4b\u670d\u52a1\u72b6\u6001\uff0c",(0,l.jsx)(s.strong,{children:"\u6bcf\u96941\u79d2\u5411\u96c6\u7fa4\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u53d1\u9001ping\u547d\u4ee4"}),"\uff1a"]}),"\n",(0,l.jsxs)(s.p,{children:["\u2022\u4e3b\u89c2\u4e0b\u7ebf\uff1a\u5982\u679c\u67d0sentinel\u8282\u70b9\u53d1\u73b0\u67d0\u5b9e\u4f8b\u672a\u5728\u89c4\u5b9a\u65f6\u95f4\u54cd\u5e94\uff0c\u5219\u8ba4\u4e3a\u8be5\u5b9e\u4f8b",(0,l.jsx)(s.strong,{children:"\u4e3b\u89c2\u4e0b\u7ebf"}),"\u3002"]}),"\n",(0,l.jsxs)(s.p,{children:["\u2022\u5ba2\u89c2\u4e0b\u7ebf\uff1a\u82e5",(0,l.jsx)(s.strong,{children:"\u8d85\u8fc7\u6307\u5b9a\u6570\u91cf\uff08quorum\uff09\u7684sentinel"}),"\u90fd\u8ba4\u4e3a\u8be5\u5b9e\u4f8b\u4e3b\u89c2\u4e0b\u7ebf\uff0c\u5219\u8be5\u5b9e\u4f8b",(0,l.jsx)(s.strong,{children:"\u5ba2\u89c2\u4e0b\u7ebf"}),"\u3002quorum\u503c\u6700\u597d\u8d85\u8fc7",(0,l.jsx)(s.strong,{children:"Sentinel\u5b9e\u4f8b\u6570\u91cf\u7684\u4e00\u534a"}),"\u3002"]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725154632354",src:n(64085).A+"",width:"660",height:"409"})}),"\n",(0,l.jsx)(s.h3,{id:"313\u96c6\u7fa4\u6545\u969c\u6062\u590d\u539f\u7406",children:"3.1.3.\u96c6\u7fa4\u6545\u969c\u6062\u590d\u539f\u7406"}),"\n",(0,l.jsxs)(s.p,{children:["\u4e00\u65e6\u53d1\u73b0master\u6545\u969c\uff0c\u4f1a\u5728sentinel\u96c6\u7fa4\u4e2d",(0,l.jsx)(s.strong,{children:"\u9009\u51fa\u4e00\u4e2asentinel-leader"}),"\uff0c\u91c7\u7528",(0,l.jsx)(s.strong,{children:"Raft\u7b97\u6cd5"})]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Raft\u7b97\u6cd5\u7684\u57fa\u672c\u601d\u8def\u662f",(0,l.jsx)(s.strong,{children:"\u5148\u5230\u5148\u5f97"})]}),"\n",(0,l.jsx)(s.li,{children:"\u6bd4\u5982sentinel 1\u9996\u5148\u53d1\u73b0master\u5b95\u673a\uff0c\u90a3\u4e48\u4ed6\u5c31\u4f1a\u5411sentinel 2\u548c3\u53d1\u9001\u8bf7\u6c42\u6210\u4e3aleader\uff0c\u82e5sentinel 2\u548c3\u6ca1\u6709\u63a5\u53d7/\u540c\u610f\u8fc7\u522b\u4eba\u7684\u8bf7\u6c42\uff0c\u5c31\u4f1a\u540c\u610fsentinel 1\u7684\u8bf7\u6c42"}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["\u4e00\u65e6\u53d1\u73b0master\u6545\u969c\uff0csentinel-leader\u9700\u8981\u5728salve\u4e2d",(0,l.jsx)(s.strong,{children:"\u9009\u62e9"}),"\u4e00\u4e2a\u4f5c\u4e3a",(0,l.jsx)(s.strong,{children:"\u65b0\u7684master"}),"\uff0c\u9009\u62e9\u4f9d\u636e\u662f\u8fd9\u6837\u7684\uff1a"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u9996\u5148\u4f1a\u5224\u65adslave\u8282\u70b9\u4e0emaster\u8282\u70b9\u65ad\u5f00\u65f6\u95f4\u957f\u77ed\uff0c\u5982\u679c\u8d85\u8fc7\u6307\u5b9a\u503c\uff08down-after-milliseconds * 10\uff09\u5219\u4f1a\u6392\u9664\u8be5slave\u8282\u70b9"}),"\n",(0,l.jsxs)(s.li,{children:["\u7136\u540e\u5224\u65adslave\u8282\u70b9\u7684",(0,l.jsx)(s.strong,{children:"slave-priority"}),"\u503c\uff0c\u8d8a\u5c0f\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u5982\u679c\u662f0\u5219\u6c38\u4e0d\u53c2\u4e0e\u9009\u4e3e"]}),"\n",(0,l.jsxs)(s.li,{children:["\u5982\u679cslave-prority\u4e00\u6837\uff0c\u5219\u5224\u65adslave\u8282\u70b9\u7684",(0,l.jsx)(s.strong,{children:"offset\u503c\uff0c\u8d8a\u5927\u8bf4\u660e\u6570\u636e\u8d8a\u65b0\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8"})]}),"\n",(0,l.jsxs)(s.li,{children:["\u6700\u540e\u662f\u5224\u65adslave\u8282\u70b9\u7684",(0,l.jsx)(s.strong,{children:"\u8fd0\u884cid\u5927\u5c0f"}),"\uff0c\u8d8a\u5c0f\u4f18\u5148\u7ea7\u8d8a\u9ad8\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["\u5f53\u9009\u51fa\u4e00\u4e2a\u65b0\u7684master\u540e\uff0c\u8be5",(0,l.jsx)(s.strong,{children:"\u5982\u4f55\u5b9e\u73b0\u5207\u6362"}),"\u5462\uff1f"]}),"\n",(0,l.jsx)(s.p,{children:"\u6d41\u7a0b\u5982\u4e0b\uff1a"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["sentinel\u7ed9\u5907\u9009\u7684slave1\u8282\u70b9\u53d1\u9001",(0,l.jsx)(s.strong,{children:"slaveof no one"}),"\u547d\u4ee4\uff0c\u8ba9\u8be5\u8282\u70b9\u6210\u4e3amaster"]}),"\n",(0,l.jsx)(s.li,{children:"sentinel\u7ed9\u6240\u6709\u5176\u5b83slave\u53d1\u9001slaveof 192.168.111.100 7002 \u547d\u4ee4\uff0c\u8ba9\u8fd9\u4e9bslave\u6210\u4e3a\u65b0master\u7684\u4ece\u8282\u70b9\uff0c\u5f00\u59cb\u4ece\u65b0\u7684master\u4e0a\u540c\u6b65\u6570\u636e\u3002"}),"\n",(0,l.jsxs)(s.li,{children:["\u6700\u540e\uff0csentinel",(0,l.jsx)(s.strong,{children:"\u5c06\u6545\u969c\u8282\u70b9\u6807\u8bb0\u4e3aslave"}),"\uff0c\u5f53\u6545\u969c\u8282\u70b9\u6062\u590d\u540e\u4f1a\u81ea\u52a8\u6210\u4e3a\u65b0\u7684master\u7684slave\u8282\u70b9"]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725154816841",src:n(87660).A+"",width:"838",height:"593"})}),"\n",(0,l.jsx)(s.h3,{id:"314sentinel-\u53ef\u4ee5\u9632\u6b62\u8111\u88c2\u5417",children:"3.1.4.Sentinel \u53ef\u4ee5\u9632\u6b62\u8111\u88c2\u5417\uff1f"}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsx)(s.p,{children:"\u5982\u679c M1 \u548c R2\u3001R3 \u4e4b\u95f4\u7684\u2f79\u7edc\u88ab\u9694\u79bb\uff0c\u4e5f\u5c31\u662f\u53d1\u2f63\u4e86\u8111\u88c2\uff0cM1 \u548c R2 \u3001 R3 \u9694\u79bb\u5728\u4e86\u4e24\u4e2a\u4e0d\u540c\u7684\u2f79\u7edc\u5206\u533a\u4e2d\u3002\u8fd9\u610f\u5473\u7740\uff0cR2 \u6216\u8005 R3 \u5176\u4e2d\u2f00\u4e2a\u4f1a\u88ab\u9009\u4e3a master\uff0c\u8fd9\u2fa5\u5047\u8bbe\u4e3a R2\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u4f46\u662f\uff01\u8fd9\u6837\u4f1a\u51fa\u73b0\u95ee\u9898\u4e86\uff01\uff01"}),"\n",(0,l.jsx)(s.p,{children:"\u5982\u679c\u5ba2\u6237\u7aef C1 \u662f\u548c M1 \u5728\u2f00\u4e2a\u2f79\u7edc\u5206\u533a\u7684\u8bdd\uff0c\u4ece\u2f79\u7edc\u88ab\u9694\u79bb\u5230\u2f79\u7edc\u5206\u533a\u6062\u590d\u8fd9\u6bb5\u65f6\u95f4\uff0cC1 \u5199\u2f0a M1 \u7684\u6570\u636e\u90fd\u4f1a\u4e22\u5931\uff0c\u5e76\u4e14\uff0cC1 \u8bfb\u53d6\u7684\u53ef\u80fd\u4e5f\u662f\u8fc7\u65f6\u7684\u6570\u636e\u3002\u8fd9\u662f\u56e0\u4e3a\u5f53\u2f79\u7edc\u5206\u533a\u6062\u590d\u4e4b\u540e\uff0cM1 \u5c06\u4f1a\u6210\u4e3a slave \u8282\u70b9\u3002"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u60f3\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u8bdd\u4e5f\u4e0d\u96be\uff0c\u5bf9 Redis \u4e3b\u4ece\u590d\u5236\u8fdb\u2f8f\u914d\u7f6e\u5373\u53ef\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u4e0b\u2faf\u5bf9\u8fd9\u4e24\u4e2a\u914d\u7f6e\u8fdb\u2f8f\u89e3\u91ca\uff1a"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"min-replicas-to-write"})," ",(0,l.jsx)(s.strong,{children:"1"}),"\uff1a\u2f64\u4e8e\u914d\u7f6e\u5199 master \u2f84\u5c11\u5199\u2f0a\u7684 slave \u6570\u91cf\uff0c\u8bbe\u7f6e\u4e3a 0 \u8868\u793a\u5173\u95ed\u8be5\u529f\u80fd\u30023 \u4e2a\u8282\u70b9\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u914d\u7f6e\u4e3a 1 \uff0c\u8868\u793a master \u5fc5\u987b\u5199\u2f0a\u2f84\u5c11 1 \u4e2a slave \uff0c\u5426\u5219\u5c31\u505c\u2f4c\u63a5\u53d7\u65b0\u7684\u5199\u2f0a\u547d\u4ee4\u8bf7\u6c42\u3002"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"min-replicas-max-lag"})," ",(0,l.jsx)(s.strong,{children:"10"})," \uff1a\u2f64\u4e8e\u914d\u7f6e master \u591a\u2ed3\u65f6\u95f4\uff08\u79d2\uff09\u2f46\u6cd5\u5f97\u5230\u4ece\u8282\u70b9\u7684\u54cd\u5e94\uff0c\u5c31\u8ba4\u4e3a\u8fd9\u4e2a\u8282\u70b9\u5931\u8054\u3002\u6211\u4eec\u8fd9\u2fa5\u914d\u7f6e\u7684\u662f 10 \u79d2\uff0c\u4e5f\u5c31\u662f\u8bf4master 10 \u79d2\u90fd\u5f97\u4e0d\u5230\u2f00\u4e2a\u4ece\u8282\u70b9\u7684\u54cd\u5e94\uff0c\u5c31\u4f1a\u8ba4\u4e3a\u8fd9\u4e2a\u4ece\u8282\u70b9\u5931\u8054\uff0c\u505c\u2f4c\u63a5\u53d7\u65b0\u7684\u5199\u2f0a\u547d\u4ee4\u8bf7\u6c42\u3002"]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u4e0d\u8fc7\uff0c\u8fd9\u6837\u914d\u7f6e\u4f1a\u964d\u4f4e Redis \u670d\u52a1\u7684\u6574\u4f53\u53ef\u2f64\u6027\uff0c\u5982\u679c 2 \u4e2a slave \u90fd\u6302\u6389\uff0cmaster \u5c06\u4f1a\u505c\u2f4c\u63a5\u53d7\u65b0\u7684\u5199\u2f0a\u547d\u4ee4\u8bf7\u6c42"}),"\n",(0,l.jsx)(s.h3,{id:"315\u5c0f\u7ed3",children:"3.1.5.\u5c0f\u7ed3"}),"\n",(0,l.jsx)(s.p,{children:"Sentinel\u7684\u4e09\u4e2a\u4f5c\u7528\u662f\u4ec0\u4e48\uff1f"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u76d1\u63a7"}),"\n",(0,l.jsx)(s.li,{children:"\u6545\u969c\u8f6c\u79fb"}),"\n",(0,l.jsx)(s.li,{children:"\u901a\u77e5"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"Sentinel\u5982\u4f55\u5224\u65ad\u4e00\u4e2aredis\u5b9e\u4f8b\u662f\u5426\u5065\u5eb7\uff1f"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u6bcf\u96941\u79d2\u53d1\u9001\u4e00\u6b21ping\u547d\u4ee4\uff0c\u5982\u679c\u8d85\u8fc7\u4e00\u5b9a\u65f6\u95f4\u6ca1\u6709\u76f8\u5411\u5219\u8ba4\u4e3a\u662f\u4e3b\u89c2\u4e0b\u7ebf"}),"\n",(0,l.jsx)(s.li,{children:"\u5982\u679c\u5927\u591a\u6570sentinel\u90fd\u8ba4\u4e3a\u5b9e\u4f8b\u4e3b\u89c2\u4e0b\u7ebf\uff0c\u5219\u5224\u5b9a\u670d\u52a1\u4e0b\u7ebf"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u6545\u969c\u8f6c\u79fb\u6b65\u9aa4\u6709\u54ea\u4e9b\uff1f"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u9996\u5148\u9009\u5b9a\u4e00\u4e2aslave\u4f5c\u4e3a\u65b0\u7684master\uff0c\u6267\u884cslaveof no one"}),"\n",(0,l.jsx)(s.li,{children:"\u7136\u540e\u8ba9\u6240\u6709\u8282\u70b9\u90fd\u6267\u884cslaveof \u65b0master"}),"\n",(0,l.jsx)(s.li,{children:"\u4fee\u6539\u6545\u969c\u8282\u70b9\u914d\u7f6e\uff0c\u6dfb\u52a0slaveof \u65b0master"}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"32\u642d\u5efa\u54e8\u5175\u96c6\u7fa4",children:"3.2.\u642d\u5efa\u54e8\u5175\u96c6\u7fa4"}),"\n",(0,l.jsx)(s.p,{children:"\u5177\u4f53\u642d\u5efa\u6d41\u7a0b\u53c2\u8003\u8bfe\u524d\u8d44\u6599\u300aRedis\u96c6\u7fa4.md\u300b\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725155019276",src:n(57820).A+"",width:"194",height:"217"})}),"\n",(0,l.jsx)(s.h2,{id:"33redistemplate",children:"3.3.RedisTemplate"}),"\n",(0,l.jsx)(s.p,{children:"\u5728Sentinel\u96c6\u7fa4\u76d1\u7ba1\u4e0b\u7684Redis\u4e3b\u4ece\u96c6\u7fa4\uff0c\u5176\u8282\u70b9\u4f1a\u56e0\u4e3a\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\u800c\u53d1\u751f\u53d8\u5316\uff0cRedis\u7684\u5ba2\u6237\u7aef\u5fc5\u987b\u611f\u77e5\u8fd9\u79cd\u53d8\u5316\uff0c\u53ca\u65f6\u66f4\u65b0\u8fde\u63a5\u4fe1\u606f\u3002Spring\u7684RedisTemplate\u5e95\u5c42\u5229\u7528lettuce\u5b9e\u73b0\u4e86\u8282\u70b9\u7684\u611f\u77e5\u548c\u81ea\u52a8\u5207\u6362\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u4e0b\u9762\uff0c\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u6d4b\u8bd5\u6765\u5b9e\u73b0RedisTemplate\u96c6\u6210\u54e8\u5175\u673a\u5236\u3002"}),"\n",(0,l.jsx)(s.h3,{id:"331\u5bfc\u5165demo\u5de5\u7a0b",children:"3.3.1.\u5bfc\u5165Demo\u5de5\u7a0b"}),"\n",(0,l.jsx)(s.p,{children:"\u9996\u5148\uff0c\u6211\u4eec\u5f15\u5165\u8bfe\u524d\u8d44\u6599\u63d0\u4f9b\u7684Demo\u5de5\u7a0b\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725155124958",src:n(43840).A+"",width:"196",height:"213"})}),"\n",(0,l.jsx)(s.h3,{id:"332\u5f15\u5165\u4f9d\u8d56",children:"3.3.2.\u5f15\u5165\u4f9d\u8d56"}),"\n",(0,l.jsx)(s.p,{children:"\u5728\u9879\u76ee\u7684pom\u6587\u4ef6\u4e2d\u5f15\u5165\u4f9d\u8d56\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-data-redis</artifactId>\n</dependency>\n"})}),"\n",(0,l.jsx)(s.h3,{id:"333\u914d\u7f6eredis\u5730\u5740",children:"3.3.3.\u914d\u7f6eRedis\u5730\u5740"}),"\n",(0,l.jsx)(s.p,{children:"\u7136\u540e\u5728\u914d\u7f6e\u6587\u4ef6application.yml\u4e2d\u6307\u5b9aredis\u7684sentinel\u76f8\u5173\u4fe1\u606f\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-java",children:"spring:\n  redis:\n    sentinel:\n      master: mymaster\n      nodes:\n        - 192.168.111.100:27001\n        - 192.168.111.100:27002\n        - 192.168.111.100:27003\n"})}),"\n",(0,l.jsx)(s.h3,{id:"334\u914d\u7f6e\u8bfb\u5199\u5206\u79bb",children:"3.3.4.\u914d\u7f6e\u8bfb\u5199\u5206\u79bb"}),"\n",(0,l.jsx)(s.p,{children:"\u5728\u9879\u76ee\u7684\u542f\u52a8\u7c7b\u4e2d\uff0c\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684bean\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-java",children:"@Bean\npublic LettuceClientConfigurationBuilderCustomizer clientConfigurationBuilderCustomizer(){\n    return clientConfigurationBuilder -> clientConfigurationBuilder.readFrom(ReadFrom.REPLICA_PREFERRED);\n}\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u8fd9\u4e2abean\u4e2d\u914d\u7f6e\u7684\u5c31\u662f\u8bfb\u5199\u7b56\u7565\uff0c\u5305\u62ec\u56db\u79cd\uff1a"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"MASTER\uff1a\u4ece\u4e3b\u8282\u70b9\u8bfb\u53d6"}),"\n",(0,l.jsx)(s.li,{children:"MASTER_PREFERRED\uff1a\u4f18\u5148\u4ecemaster\u8282\u70b9\u8bfb\u53d6\uff0cmaster\u4e0d\u53ef\u7528\u624d\u8bfb\u53d6replica"}),"\n",(0,l.jsx)(s.li,{children:"REPLICA\uff1a\u4eceslave\uff08replica\uff09\u8282\u70b9\u8bfb\u53d6"}),"\n",(0,l.jsx)(s.li,{children:"REPLICA_PREFERRED\uff1a\u4f18\u5148\u4eceslave\uff08replica\uff09\u8282\u70b9\u8bfb\u53d6\uff0c\u6240\u6709\u7684slave\u90fd\u4e0d\u53ef\u7528\u624d\u8bfb\u53d6master"}),"\n"]}),"\n",(0,l.jsx)(s.h1,{id:"4redis\u5206\u7247\u96c6\u7fa4",children:"4.Redis\u5206\u7247\u96c6\u7fa4"}),"\n",(0,l.jsx)(s.h2,{id:"41\u5206\u7247\u96c6\u7fa4\u7684\u7279\u5f81",children:"4.1.\u5206\u7247\u96c6\u7fa4\u7684\u7279\u5f81"}),"\n",(0,l.jsx)(s.p,{children:"\u4e3b\u4ece\u548c\u54e8\u5175\u53ef\u4ee5\u89e3\u51b3\u9ad8\u53ef\u7528\u3001\u9ad8\u5e76\u53d1\u8bfb\u7684\u95ee\u9898\u3002\u4f46\u662f\u4f9d\u7136\u6709\u4e24\u4e2a\u95ee\u9898\u6ca1\u6709\u89e3\u51b3\uff1a"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"\u6d77\u91cf\u6570\u636e\u5b58\u50a8\u95ee\u9898"}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"\u9ad8\u5e76\u53d1\u5199\u7684\u95ee\u9898"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u4f7f\u7528\u5206\u7247\u96c6\u7fa4\u53ef\u4ee5\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\uff0c\u5982\u56fe:"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725155747294",src:n(71886).A+"",width:"771",height:"631"})}),"\n",(0,l.jsx)(s.p,{children:"\u5206\u7247\u96c6\u7fa4\u7279\u5f81\uff1a"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"\u96c6\u7fa4\u4e2d\u6709\u591a\u4e2amaster\uff0c\u6bcf\u4e2amaster\u4fdd\u5b58\u4e0d\u540c\u6570\u636e"}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"\u6bcf\u4e2amaster\u90fd\u53ef\u4ee5\u6709\u591a\u4e2aslave\u8282\u70b9"}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"master\u4e4b\u95f4\u901a\u8fc7ping\u76d1\u6d4b\u5f7c\u6b64\u5065\u5eb7\u72b6\u6001"}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"\u5ba2\u6237\u7aef\u8bf7\u6c42\u53ef\u4ee5\u8bbf\u95ee\u96c6\u7fa4\u4efb\u610f\u8282\u70b9\uff0c\u6700\u7ec8\u90fd\u4f1a\u88ab\u8f6c\u53d1\u5230\u6b63\u786e\u8282\u70b9"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"42\u642d\u5efa\u5206\u7247\u96c6\u7fa4",children:"4.2.\u642d\u5efa\u5206\u7247\u96c6\u7fa4"}),"\n",(0,l.jsx)(s.p,{children:"\u5177\u4f53\u642d\u5efa\u6d41\u7a0b\u53c2\u8003\u8bfe\u524d\u8d44\u6599\u300aRedis\u96c6\u7fa4.md\u300b\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725155806288",src:n(88992).A+"",width:"194",height:"217"})}),"\n",(0,l.jsx)(s.h2,{id:"43\u6563\u5217\u63d2\u69fdslot",children:"4.3.\u6563\u5217\u63d2\u69fdslot"}),"\n",(0,l.jsx)(s.h3,{id:"431\u63d2\u69fd\u539f\u7406",children:"4.3.1.\u63d2\u69fd\u539f\u7406"}),"\n",(0,l.jsx)(s.p,{children:"Redis\u4f1a\u628a\u6bcf\u4e00\u4e2amaster\u8282\u70b9\u6620\u5c04\u52300~16383\u517116384\u4e2a\u63d2\u69fd\uff08hash slot\uff09\u4e0a\uff0c\u67e5\u770b\u96c6\u7fa4\u4fe1\u606f\u65f6\u5c31\u80fd\u770b\u5230\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725155820320",src:n(16560).A+"",width:"591",height:"124"})}),"\n",(0,l.jsx)(s.p,{children:"\u6570\u636ekey\u4e0d\u662f\u4e0e\u8282\u70b9\u7ed1\u5b9a\uff0c\u800c\u662f\u4e0e\u63d2\u69fd\u7ed1\u5b9a\u3002redis\u4f1a\u6839\u636ekey\u7684\u6709\u6548\u90e8\u5206\u8ba1\u7b97\u63d2\u69fd\u503c\uff0c\u5206\u4e24\u79cd\u60c5\u51b5\uff1a"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:'key\u4e2d\u5305\u542b"{}"\uff0c\u4e14\u201c{}\u201d\u4e2d\u81f3\u5c11\u5305\u542b1\u4e2a\u5b57\u7b26\uff0c\u201c{}\u201d\u4e2d\u7684\u90e8\u5206\u662f\u6709\u6548\u90e8\u5206'}),"\n",(0,l.jsx)(s.li,{children:"key\u4e2d\u4e0d\u5305\u542b\u201c{}\u201d\uff0c\u6574\u4e2akey\u90fd\u662f\u6709\u6548\u90e8\u5206"}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"\u4e3a\u4ec0\u4e48\u662f16384\uff082^14^\uff09\u4e2a\u69fd"}),"\uff0cCRC16\u7b97\u6cd5\u4ea7\u751f\u7684hash\u503c\u670916bit\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u4f7f\u75282^16^=65536\u4e2a\u69fd\u4f4d\u5462\uff1f"]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20231016230439953",src:n(97442).A+"",width:"2322",height:"310"})}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"\uff081\uff0965536\u4e2aslot\u69fdping\u5fc3\u8df3\u5305\u7684\u6d88\u606f\u5934\u592a\u5927"})}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20230410223821799",src:n(93244).A+"",width:"2358",height:"243"})}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"\uff082\uff09Redis\u4f5c\u8005\u63a8\u8350\u96c6\u7fa41000\u4ee5\u5185\u8282\u70b9\uff0c16384\u4e2a\u69fd\u591f\u7528\u4e86\uff0c\u56e0\u4e3a\u96c6\u7fa4\u8282\u70b9\u6570\u592a\u591aping\u5fc3\u8df3\u5305\u4e5f\u4f1a\u5f88\u5927\uff0c\u6d88\u8017\u5e26\u5bbd\uff0c\u5bb9\u6613\u9020\u6210\u7f51\u7edc\u62e5\u5835"})}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20230410223913265",src:n(34246).A+"",width:"2346",height:"213"})}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"\uff083\uff09\u5728\u8282\u70b9\u5c11\u7684\u60c5\u51b5\u4e0b\uff0c\u5373\u5c0f\u578b\u96c6\u7fa4\u4e2d\uff0c\u56e0\u4e3a\u586b\u5145\u7387\u4e3aslots/N\uff0c\u82e5\u91c7\u752865536\u7684\u8bdd\uff0c\u586b\u5145\u7387\u5c06\u4f1a\u5f88\u9ad8\uff0c\u538b\u7f29\u6bd4\u5c06\u4f1a\u5f88\u4f4e\uff0c\u4e0d\u5bb9\u6613\u4f20\u8f93\uff0c\u4f46\u662f\u91c7\u752816384\u7684\u8bdd\uff0c\u586b\u5145\u7387\u4f4e\u4e00\u4e9b\uff0c\u538b\u7f29\u6bd4\u5c06\u4f1a\u9ad8\u5f88\u591a\uff0c\u5bb9\u6613\u4f20\u8f93\u4e9b"})}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"432\u69fd\u4f4d\u6620\u5c04\u7b97\u6cd5\u4e00\u81f4\u6027\u54c8\u5e0c\u7b97\u6cd5",children:"4.3.2.\u69fd\u4f4d\u6620\u5c04\u7b97\u6cd5\uff1a\u4e00\u81f4\u6027\u54c8\u5e0c\u7b97\u6cd5"}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsx)(s.p,{children:"\u4fee\u6b63\uff1aRedis Cluster\u4f7f\u7528\u7684\u662f\u54c8\u5e0c\u69fd\u7b97\u6cd5\uff0c\u5728\u96c6\u7fa4\u6570\u91cf\u53d1\u751f\u6539\u53d8\u65f6\uff0c\u624b\u52a8\u8fdb\u884c\u54c8\u5e0c\u69fd\u7684\u5206\u914d\n\u7406\u7531:"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsx)(s.li,{children:"\u54c8\u5e0c\u69fd\u7b97\u6cd5\u66f4\u7b80\u5355"}),"\n",(0,l.jsx)(s.li,{children:"\u54c8\u5e0c\u69fd\u7b97\u6cd5\u53ef\u4ee5\u6839\u636e\u673a\u5668\u7684\u914d\u7f6e\u624b\u52a8\u5206\u914d\uff0c\u4e00\u81f4\u6027\u54c8\u5e0c\u4e0d\u597d\u624b\u52a8\u5206\u914d"}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["\u4f46\u662f\u4e00\u81f4\u6027\u54c8\u5e0c\u4e5f\u6709\u4f18\u70b9\uff1a\u6bd4\u5982\u4e0b\u9762\u6240\u8bf4\u7684",(0,l.jsx)(s.strong,{children:"\u7f13\u5b58\u6296\u52a8"}),"\u73b0\u8c61\uff0c\u5373\u5c06\u6570\u636e\u6dfb\u52a0\u5230\u540e\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u800c\u4f7f\u7528\u54c8\u5e0c\u69fd\u4f1a\u5bfc\u81f4\u90a3\u90e8\u5206\u69fd\u4f4d\u4e0d\u53ef\u7528"]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u8981\u5c06\u6570\u636e\u7f13\u5b58\u5728\u96c6\u7fa4\u7684\u54ea\u4e00\u53f0\u8282\u70b9\u4e0a\uff0c\u91c7\u7528\u54c8\u5e0c\u7b97\u6cd5\uff0c\u8fd9\u91cc\u6709\u4e24\u79cd\u54c8\u5e0c\u7b97\u6cd5\uff1a"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["\u54c8\u5e0c\u53d6\u4f59\u7b97\u6cd5\uff1a\u8ba1\u7b97\u516c\u5f0f\uff1ahash(key) % N \uff0cN\u4e3a\u96c6\u7fa4\u4e2d\u8282\u70b9\u7684\u6570\u91cf\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u8fd9\u79cd\u54c8\u5e0c\u7b97\u6cd5\u867d\u7136\u7b80\u5355\uff0c\u4f46\u662f\u4f1a\u6709\u4e00\u4e2a\u7f3a\u70b9\uff1a\u5f53\u96c6\u7fa4\u6570\u91cf\u53d1\u751f\u6539\u53d8\u7684\u65f6\u5019\uff0c\u90a3\u4e48\u8ba1\u7b97\u516c\u5f0f\u7684\u5206\u6bcd\u53d1\u751f\u6539\u53d8\uff0c\u4e4b\u524d\u5b58\u50a8\u7684\u6240\u6709slot\u4e2d\u7684\u6570\u636e\uff0c\u90fd\u8981\u91cd\u65b0\u8fdb\u884c\u6392\u5217"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\u4e00\u81f4\u6027\u54c8\u5e0c\u7b97\u6cd5\uff1a\u8ba1\u7b97\u516c\u5f0f\uff1ahash(key) % 2^32^\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u76ee\u7684\uff1a\u5f53\u670d\u52a1\u5668\u4e2a\u6570\u53d1\u751f\u53d8\u52a8\u65f6\u5c3d\u91cf\u51cf\u5c11\u5f71\u54cd\u5ba2\u6237\u7aef\u5230\u670d\u52a1\u5668\u7684\u6620\u5c04\u5173\u7cfb"}),"\n",(0,l.jsxs)(s.li,{children:["\u5b9e\u73b0\uff1a\u91c7\u7528\u4e00\u81f4\u6027\u54c8\u5e0c\u73af\uff0c\u5373\u4ee4 2^32^ = 0 \uff0c\u8ba9\u54c8\u5e0c\u8868\u9996\u4f4d\u76f8\u8fde\u6210\u4e00\u4e2a\u73af\uff0c\u96c6\u7fa4\u4e2d\u6bcf\u4e2a\u8282\u70b9\u843d\u5728\u73af\u4e0a\u7684\u4f4d\u7f6e\u662f\u56fa\u5b9a\u7684\n",(0,l.jsx)(s.img,{src:n(21064).A+"",width:"562",height:"572"})]}),"\n",(0,l.jsx)(s.li,{children:"\u843d\u952e\u89c4\u5219\uff1ahash(key) \u5e76\u5bf92^32^ \u53d6\u6a21\u8fc7\u540e\uff0c\u5c06\u4f1a\u843d\u5728\u4e00\u81f4\u6027\u54c8\u5e0c\u73af\u7684\u67d0\u4e2a\u4f4d\u7f6e\uff0c\u7136\u540e\u987a\u65f6\u9488\u5bfb\u627e\u7b2c\u4e00\u4e2aRedis\u8282\u70b9\uff0c\u90a3\u4e48\u6b64key\u5c31\u5c5e\u4e8e\u8be5\u8282\u70b9\u5b58\u50a8"}),"\n",(0,l.jsx)(s.li,{children:"\u4f18\u70b9\uff1a\u82e5\u8282\u70b9\u6570\u91cf\u53d1\u751f\u53d8\u5316\uff0c\u5f71\u54cd\u7684\u6620\u5c04\u5173\u7cfb\u4e5f\u53ea\u6709\u51fa\u73b0\u53d8\u5316\u7684\u90a3\u4e2a\u8282\u70b9\u9006\u65f6\u9488\u5230\u7b2c\u4e00\u4e2a\u8282\u70b9\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\n\u4f8b\u5982\uff1a\u65b0\u589e\u4e86\u4e00\u4e2a\u8282\u70b9\uff0c\u90a3\u4e48\u8be5\u8282\u70b9\u9006\u65f6\u9488\u5230\u4e0a\u4e00\u4e2a\u8282\u70b9\u4e4b\u95f4\u7684\u6570\u636e\u5f52\u65b0\u8282\u70b9\u6240\u6709\uff1b\u5220\u9664\u4e86\u4e00\u4e2a\u8282\u70b9\uff0c\u90a3\u4e48\u8be5\u8282\u70b9\u9006\u65f6\u9488\u5230\u4e0a\u4e00\u4e2a\u8282\u70b9\u4e4b\u95f4\u7684\u6570\u636e\u5f52\u987a\u65f6\u9488\u4e0b\u4e00\u4e2a\u8282\u70b9\u6240\u6709"}),"\n",(0,l.jsxs)(s.li,{children:["\u7f3a\u70b9\uff1a\u5f53\u8282\u70b9\u592a\u5c11\u65f6\uff0c\u5bb9\u6613\u53d1\u751f\u6570\u636e\u503e\u659c\u95ee\u9898",(0,l.jsx)(s.img,{src:n(6110).A+"",width:"413",height:"412"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"433\u5ba2\u6237\u7aef\u64cd\u4f5c",children:"4.3.3.\u5ba2\u6237\u7aef\u64cd\u4f5c"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"\u8fde\u63a5\u5ba2\u6237\u7aef\u96c6\u7fa4\u6a21\u5f0f\uff1a"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"redis-cli -p 7001 -c\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u6211\u7684\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"redis-cli -a 123456 -p 6381 -c\n"})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"-c\uff1a\u96c6\u7fa4\u6a21\u5f0f\uff0c\u82e5\u4e0d\u52a0-c\uff0c\u6839\u636ekey\u6620\u5c04\u7684slot\u4e0d\u5728\u6b64\u8282\u70b9\u65f6\u5c06\u4f1a\u62a5\u9519"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u4f8b\u5982\uff1akey\u662fnum\uff0c\u90a3\u4e48\u5c31\u6839\u636enum\u8ba1\u7b97\uff0c\u5982\u679c\u662f{itcast}num\uff0c\u5219\u6839\u636eitcast\u8ba1\u7b97\u3002\u8ba1\u7b97\u65b9\u5f0f\u662f\u5229\u7528CRC16\u7b97\u6cd5\u5f97\u5230\u4e00\u4e2ahash\u503c\uff0c\u7136\u540e\u5bf916384\u53d6\u4f59\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u5c31\u662fslot\u503c\u3002"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725155850200",src:n(22564).A+"",width:"574",height:"123"})}),"\n",(0,l.jsx)(s.p,{children:"\u5982\u56fe\uff0c\u57287001\u8fd9\u4e2a\u8282\u70b9\u6267\u884cset a 1\u65f6\uff0c\u5bf9a\u505ahash\u8fd0\u7b97\uff0c\u5bf916384\u53d6\u4f59\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u662f15495\uff0c\u56e0\u6b64\u8981\u5b58\u50a8\u5230103\u8282\u70b9\u3002"}),"\n",(0,l.jsxs)(s.p,{children:["\u5230\u4e867003\u540e\uff0c\u6267\u884c",(0,l.jsx)(s.code,{children:"get num"}),"\u65f6\uff0c\u5bf9num\u505ahash\u8fd0\u7b97\uff0c\u5bf916384\u53d6\u4f59\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u662f2765\uff0c\u56e0\u6b64\u9700\u8981\u5207\u6362\u52307001\u8282\u70b9"]}),"\n",(0,l.jsxs)(s.p,{children:["\u5982\u4f55\u5c06\u540c\u4e00\u7c7b\u6570\u636e\u56fa\u5b9a\u7684",(0,l.jsx)(s.strong,{children:"\u4fdd\u5b58\u5728\u540c\u4e00\u4e2aRedis\u5b9e\u4f8b"}),"\uff1f"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u8fd9\u4e00\u7c7b\u6570\u636e\u4f7f\u7528\u76f8\u540c\u7684\u6709\u6548\u90e8\u5206\uff0c\u4f8b\u5982key\u90fd\u4ee5**{typeId}\u4e3a\u524d\u7f00**"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"\u67e5\u770b\u96c6\u7fa4\u8282\u70b9\u4fe1\u606f\uff1a"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"127.0.0.1:7001> cluster nodes\n"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"redis-cli -a 123456 -p 7001 cluster nodes\n"})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"\u67e5\u770b\u67d0\u4e2akey\u5bf9\u5e94\u7684slot\uff1a"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"cluster keyslot key\n"})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"\u67e5\u770bslot\u662f\u5426\u88ab\u4f7f\u7528\uff1a"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"cluster countkeysinslot \u69fd\u4f4d\u6570\u5b57\u7f16\u53f7\n"})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u8fd4\u56de0\uff1a\u6ca1\u88ab\u4f7f\u7528"}),"\n",(0,l.jsx)(s.li,{children:"\u8fd4\u56de1\uff1a\u5df2\u88ab\u4f7f\u7528"}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"434\u5c0f\u7ed3",children:"4.3.4.\u5c0f\u7ed3"}),"\n",(0,l.jsx)(s.p,{children:"Redis\u5982\u4f55\u5224\u65ad\u67d0\u4e2akey\u5e94\u8be5\u5728\u54ea\u4e2a\u5b9e\u4f8b\uff1f"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u5c0616384\u4e2a\u63d2\u69fd\u5206\u914d\u5230\u4e0d\u540c\u7684\u5b9e\u4f8b"}),"\n",(0,l.jsx)(s.li,{children:"\u6839\u636ekey\u7684\u6709\u6548\u90e8\u5206\u8ba1\u7b97\u54c8\u5e0c\u503c\uff0c\u5bf916384\u53d6\u4f59"}),"\n",(0,l.jsx)(s.li,{children:"\u4f59\u6570\u4f5c\u4e3a\u63d2\u69fd\uff0c\u5bfb\u627e\u63d2\u69fd\u6240\u5728\u5b9e\u4f8b\u5373\u53ef"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u5982\u4f55\u5c06\u540c\u4e00\u7c7b\u6570\u636e\u56fa\u5b9a\u7684\u4fdd\u5b58\u5728\u540c\u4e00\u4e2aRedis\u5b9e\u4f8b\uff1f"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u8fd9\u4e00\u7c7b\u6570\u636e\u4f7f\u7528\u76f8\u540c\u7684\u6709\u6548\u90e8\u5206\uff0c\u4f8b\u5982key\u90fd\u4ee5{typeId}\u4e3a\u524d\u7f00"}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"44\u96c6\u7fa4\u4f38\u7f29",children:"4.4.\u96c6\u7fa4\u4f38\u7f29"}),"\n",(0,l.jsx)(s.p,{children:"redis-cli --cluster\u63d0\u4f9b\u4e86\u5f88\u591a\u64cd\u4f5c\u96c6\u7fa4\u7684\u547d\u4ee4\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u65b9\u5f0f\u67e5\u770b\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725160138290",src:n(42994).A+"",width:"572",height:"200"})}),"\n",(0,l.jsx)(s.p,{children:"\u6bd4\u5982\uff0c\u6dfb\u52a0\u8282\u70b9\u7684\u547d\u4ee4\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725160448139",src:n(1313).A+"",width:"665",height:"150"})}),"\n",(0,l.jsx)(s.h3,{id:"441\u9700\u6c42\u5206\u6790",children:"4.4.1.\u9700\u6c42\u5206\u6790"}),"\n",(0,l.jsx)(s.p,{children:"\u9700\u6c42\uff1a\u5411\u96c6\u7fa4\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684master\u8282\u70b9\uff0c\u5e76\u5411\u5176\u4e2d\u5b58\u50a8 num = 10"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u542f\u52a8\u4e00\u4e2a\u65b0\u7684redis\u5b9e\u4f8b\uff0c\u7aef\u53e3\u4e3a7004"}),"\n",(0,l.jsx)(s.li,{children:"\u6dfb\u52a07004\u5230\u4e4b\u524d\u7684\u96c6\u7fa4\uff0c\u5e76\u4f5c\u4e3a\u4e00\u4e2amaster\u8282\u70b9"}),"\n",(0,l.jsx)(s.li,{children:"\u7ed97004\u8282\u70b9\u5206\u914d\u63d2\u69fd\uff0c\u4f7f\u5f97num\u8fd9\u4e2akey\u53ef\u4ee5\u5b58\u50a8\u52307004\u5b9e\u4f8b"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u8fd9\u91cc\u9700\u8981\u4e24\u4e2a\u65b0\u7684\u529f\u80fd\uff1a"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u6dfb\u52a0\u4e00\u4e2a\u8282\u70b9\u5230\u96c6\u7fa4\u4e2d"}),"\n",(0,l.jsx)(s.li,{children:"\u5c06\u90e8\u5206\u63d2\u69fd\u5206\u914d\u5230\u65b0\u63d2\u69fd"}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"442\u521b\u5efa\u65b0\u7684redis\u5b9e\u4f8b",children:"4.4.2.\u521b\u5efa\u65b0\u7684redis\u5b9e\u4f8b"}),"\n",(0,l.jsx)(s.p,{children:"\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-sh",children:"mkdir 7004\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u62f7\u8d1d\u914d\u7f6e\u6587\u4ef6\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-sh",children:"cp redis.conf /7004\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-sh",children:"sed /s/6379/7004/g 7004/redis.conf\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u542f\u52a8"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-sh",children:"redis-server 7004/redis.conf\n"})}),"\n",(0,l.jsx)(s.h3,{id:"443\u6dfb\u52a0\u65b0\u8282\u70b9\u5230redis",children:"4.4.3.\u6dfb\u52a0\u65b0\u8282\u70b9\u5230redis"}),"\n",(0,l.jsxs)(s.p,{children:["\u6211\u7684\uff1a\n",(0,l.jsx)(s.strong,{children:"\u96c6\u7fa4\u6269\u5bb9\u5168\u90e8\u547d\u4ee4\u603b\u7ed3\uff1a"})]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"redis-server /myredis/cluster/redisCluster6387.conf\t\t#\u542f\u52a86387server\nredis-server /myredis/cluster/redisCluster6388.conf\t\t#\u542f\u52a86388server\nredis-cli -a 111111 --cluster add-node 192.168.111.100:6387 192.168.111.100:6381\t#\u5c066387\u4f5c\u4e3a\u65b0\u7684master\u52a0\u5165\u96c6\u7fa4\uff0c6381\u4e3a\u5f15\u8350\u4eba\nredis-cli -a 111111 --cluster check 192.168.111.100:6381\t#\u7b2c\u4e00\u6b21\u68c0\u67e5\nredis-cli -a 111111 --cluster reshard 192.168.111.100:6381\t\t#\u7ed96387\u5206\u914dslot\nredis-cli -a 111111 --cluster check 192.168.111.100:6381\t\t#\u7b2c\u4e8c\u6b21\u68c0\u67e5\nredis-cli -a 111111 --cluster add-node 192.168.111.100:6388 192.168.111.100:6387 --cluster-slave --cluster-master-id xxxxxxxxxxxxxxxxxxxxx(6387id)\t\t#\u8ba96388\u6210\u4e3a6387\u7684\u4ece\u8282\u70b9\nredis-cli -a 111111 --cluster check 192.168.111.100:6381\t\t#\u7b2c\u4e09c\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u6dfb\u52a0\u8282\u70b9\u7684\u8bed\u6cd5\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725160448139",src:n(1313).A+"",width:"665",height:"150"})}),"\n",(0,l.jsx)(s.p,{children:"\u6267\u884c\u547d\u4ee4\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-sh",children:"redis-cli --cluster add-node 192.168.111.100:7004 192.168.111.100:7001\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u901a\u8fc7\u547d\u4ee4\u67e5\u770b\u96c6\u7fa4\u72b6\u6001\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-sh",children:"redis-cli -p 7001 cluster nodes\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u6211\u7684\uff1a\u4e5f\u53ef\u4ee5\u4f7f\u7528check\u547d\u4ee4\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"redis-cli -a 111111 --cluster check 192.168.111.100:6381\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u5982\u56fe\uff0c7004\u52a0\u5165\u4e86\u96c6\u7fa4\uff0c\u5e76\u4e14\u9ed8\u8ba4\u662f\u4e00\u4e2amaster\u8282\u70b9\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725161007099",src:n(9065).A+"",width:"1445",height:"254"})}),"\n",(0,l.jsx)(s.p,{children:"\u4f46\u662f\uff0c\u53ef\u4ee5\u770b\u52307004\u8282\u70b9\u7684\u63d2\u69fd\u6570\u91cf\u4e3a0\uff0c\u56e0\u6b64\u6ca1\u6709\u4efb\u4f55\u6570\u636e\u53ef\u4ee5\u5b58\u50a8\u52307004\u4e0a"}),"\n",(0,l.jsx)(s.h3,{id:"444\u8f6c\u79fb\u63d2\u69fd",children:"4.4.4.\u8f6c\u79fb\u63d2\u69fd"}),"\n",(0,l.jsx)(s.p,{children:"\u6211\u4eec\u8981\u5c06num\u5b58\u50a8\u52307004\u8282\u70b9\uff0c\u56e0\u6b64\u9700\u8981\u5148\u770b\u770bnum\u7684\u63d2\u69fd\u662f\u591a\u5c11\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725161241793",src:n(12828).A+"",width:"928",height:"98"})}),"\n",(0,l.jsx)(s.p,{children:"\u5982\u4e0a\u56fe\u6240\u793a\uff0cnum\u7684\u63d2\u69fd\u4e3a2765."}),"\n",(0,l.jsx)(s.p,{children:"\u6211\u4eec\u53ef\u4ee5\u5c060~3000\u7684\u63d2\u69fd\u4ece7001\u8f6c\u79fb\u52307004\uff0c\u547d\u4ee4\u683c\u5f0f\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725161401925",src:n(29163).A+"",width:"877",height:"575"})}),"\n",(0,l.jsx)(s.p,{children:"\u5177\u4f53\u547d\u4ee4\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(s.p,{children:"\u5efa\u7acb\u8fde\u63a5\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725161506241",src:n(3e4).A+"",width:"883",height:"37"})}),"\n",(0,l.jsx)(s.p,{children:"\u5f97\u5230\u4e0b\u9762\u7684\u53cd\u9988\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725161540841",src:n(75500).A+"",width:"981",height:"178"})}),"\n",(0,l.jsx)(s.p,{children:"\u8be2\u95ee\u8981\u79fb\u52a8\u591a\u5c11\u4e2a\u63d2\u69fd\uff0c\u6211\u4eec\u8ba1\u5212\u662f3000\u4e2a\uff1a"}),"\n",(0,l.jsx)(s.p,{children:"\u65b0\u7684\u95ee\u9898\u6765\u4e86\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725161637152",src:n(62962).A+"",width:"840",height:"152"})}),"\n",(0,l.jsx)(s.p,{children:"\u90a3\u4e2anode\u6765\u63a5\u6536\u8fd9\u4e9b\u63d2\u69fd\uff1f\uff1f"}),"\n",(0,l.jsx)(s.p,{children:"\u663e\u7136\u662f7004\uff0c\u90a3\u4e487004\u8282\u70b9\u7684id\u662f\u591a\u5c11\u5462\uff1f"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725161731738",src:n(30169).A+"",width:"789",height:"248"})}),"\n",(0,l.jsx)(s.p,{children:"\u590d\u5236\u8fd9\u4e2aid\uff0c\u7136\u540e\u62f7\u8d1d\u5230\u521a\u624d\u7684\u63a7\u5236\u53f0\u540e\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725161817642",src:n(76610).A+"",width:"1186",height:"323"})}),"\n",(0,l.jsx)(s.p,{children:"\u8fd9\u91cc\u8be2\u95ee\uff0c\u4f60\u7684\u63d2\u69fd\u662f\u4ece\u54ea\u91cc\u79fb\u52a8\u8fc7\u6765\u7684\uff1f"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"all\uff1a\u4ee3\u8868\u5168\u90e8\uff0c\u4e5f\u5c31\u662f\u4e09\u4e2a\u8282\u70b9\u5404\u8f6c\u79fb\u4e00\u90e8\u5206"}),"\n",(0,l.jsx)(s.li,{children:"\u5177\u4f53\u7684id\uff1a\u76ee\u6807\u8282\u70b9\u7684id"}),"\n",(0,l.jsx)(s.li,{children:"done\uff1a\u6ca1\u6709\u4e86"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u8fd9\u91cc\u6211\u4eec\u8981\u4ece7001\u83b7\u53d6\uff0c\u56e0\u6b64\u586b\u51997001\u7684id\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725162030478",src:n(29924).A+"",width:"1053",height:"357"})}),"\n",(0,l.jsx)(s.p,{children:"\u586b\u5b8c\u540e\uff0c\u70b9\u51fbdone\uff0c\u8fd9\u6837\u63d2\u69fd\u8f6c\u79fb\u5c31\u51c6\u5907\u597d\u4e86\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725162101228",src:n(1961).A+"",width:"877",height:"205"})}),"\n",(0,l.jsx)(s.p,{children:"\u786e\u8ba4\u8981\u8f6c\u79fb\u5417\uff1f\u8f93\u5165yes\uff1a"}),"\n",(0,l.jsx)(s.p,{children:"\u7136\u540e\uff0c\u901a\u8fc7\u547d\u4ee4\u67e5\u770b\u7ed3\u679c\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725162145497",src:n(78521).A+"",width:"666",height:"31"})}),"\n",(0,l.jsx)(s.p,{children:"\u53ef\u4ee5\u770b\u5230\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725162224058",src:n(17678).A+"",width:"1451",height:"278"})}),"\n",(0,l.jsx)(s.p,{children:"\u76ee\u7684\u8fbe\u6210\u3002"}),"\n",(0,l.jsx)(s.h3,{id:"445\u96c6\u7fa4\u7f29\u5bb9",children:"4.4.5.\u96c6\u7fa4\u7f29\u5bb9"}),"\n",(0,l.jsxs)(s.p,{children:["\u6211\u7684\uff1a\n",(0,l.jsx)(s.strong,{children:"\u96c6\u7fa4\u7f29\u5bb9\u5168\u90e8\u547d\u4ee4\u603b\u7ed3\uff1a"})]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-shell",children:"redis-cli -a 111111 --cluster check 192.168.111.100:6388\t#\u83b7\u5f976388\u7684ID\nredis-cli -a 111111 --cluster del-node 192.168.111.100:6388 xxxxxxxx(6388id)  #\u5220\u96646388\nredis-cli -a 111111 --cluster reshard 192.168.111.100:6381    #\u628a6387\u7684slot\u90fd\u7ed96381\nredis-cli -a 111111 --cluster check 192.168.111.100:6381    #\u7b2c\u4e8c\u6b21\u68c0\u67e5\nredis-cli -a 111111 --cluster del-node 192.168.111.100:6387 xxxxxxxx(6387id)  #\u5220\u96646387\nredis-cli -a 111111 --cluster check 192.168.111.100:6381\t#\u7b2c\u4e09\u6b21\u68c0\u67e5\n"})}),"\n",(0,l.jsx)(s.h2,{id:"45\u6545\u969c\u8f6c\u79fb",children:"4.5.\u6545\u969c\u8f6c\u79fb"}),"\n",(0,l.jsx)(s.p,{children:"\u96c6\u7fa4\u521d\u8bc6\u72b6\u6001\u662f\u8fd9\u6837\u7684\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210727161152065",src:n(5059).A+"",width:"921",height:"104"})}),"\n",(0,l.jsx)(s.p,{children:"\u5176\u4e2d7001\u30017002\u30017003\u90fd\u662fmaster\uff0c\u6211\u4eec\u8ba1\u5212\u8ba97002\u5b95\u673a\u3002"}),"\n",(0,l.jsx)(s.h3,{id:"451\u81ea\u52a8\u6545\u969c\u8f6c\u79fb",children:"4.5.1.\u81ea\u52a8\u6545\u969c\u8f6c\u79fb"}),"\n",(0,l.jsx)(s.p,{children:"\u5f53\u96c6\u7fa4\u4e2d\u6709\u4e00\u4e2amaster\u5b95\u673a\u4f1a\u53d1\u751f\u4ec0\u4e48\u5462\uff1f"}),"\n",(0,l.jsx)(s.p,{children:"\u76f4\u63a5\u505c\u6b62\u4e00\u4e2aredis\u5b9e\u4f8b\uff0c\u4f8b\u59827002\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-sh",children:"redis-cli -p 7002 shutdown\n"})}),"\n",(0,l.jsx)(s.p,{children:"1\uff09\u9996\u5148\u662f\u8be5\u5b9e\u4f8b\u4e0e\u5176\u5b83\u5b9e\u4f8b\u5931\u53bb\u8fde\u63a5"}),"\n",(0,l.jsx)(s.p,{children:"2\uff09\u7136\u540e\u662f\u7591\u4f3c\u5b95\u673a\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725162319490",src:n(15061).A+"",width:"1118",height:"117"})}),"\n",(0,l.jsx)(s.p,{children:"3\uff09\u6700\u540e\u662f\u786e\u5b9a\u4e0b\u7ebf\uff0c\u81ea\u52a8\u63d0\u5347\u4e00\u4e2aslave\u4e3a\u65b0\u7684master\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725162408979",src:n(92472).A+"",width:"1118",height:"121"})}),"\n",(0,l.jsx)(s.p,{children:"4\uff09\u5f537002\u518d\u6b21\u542f\u52a8\uff0c\u5c31\u4f1a\u53d8\u4e3a\u4e00\u4e2aslave\u8282\u70b9\u4e86\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210727160803386",src:n(16829).A+"",width:"1382",height:"165"})}),"\n",(0,l.jsx)(s.h3,{id:"452\u624b\u52a8\u6545\u969c\u8f6c\u79fb",children:"4.5.2.\u624b\u52a8\u6545\u969c\u8f6c\u79fb"}),"\n",(0,l.jsx)(s.p,{children:"\u5229\u7528cluster failover\u547d\u4ee4\u53ef\u4ee5\u624b\u52a8\u8ba9\u96c6\u7fa4\u4e2d\u7684\u67d0\u4e2amaster\u5b95\u673a\uff0c\u5207\u6362\u5230\u6267\u884ccluster failover\u547d\u4ee4\u7684\u8fd9\u4e2aslave\u8282\u70b9\uff0c\u5b9e\u73b0\u65e0\u611f\u77e5\u7684\u6570\u636e\u8fc1\u79fb\u3002\u5176\u6d41\u7a0b\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210725162441407",src:n(96513).A+"",width:"762",height:"591"})}),"\n",(0,l.jsx)(s.p,{children:"\u8fd9\u79cdfailover\u547d\u4ee4\u53ef\u4ee5\u6307\u5b9a\u4e09\u79cd\u6a21\u5f0f\uff1a"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u7f3a\u7701\uff1a\u9ed8\u8ba4\u7684\u6d41\u7a0b\uff0c\u5982\u56fe1~6\u6b69"}),"\n",(0,l.jsx)(s.li,{children:"force\uff1a\u7701\u7565\u4e86\u5bf9offset\u7684\u4e00\u81f4\u6027\u6821\u9a8c"}),"\n",(0,l.jsx)(s.li,{children:"takeover\uff1a\u76f4\u63a5\u6267\u884c\u7b2c5\u6b69\uff0c\u5ffd\u7565\u6570\u636e\u4e00\u81f4\u6027\u3001\u5ffd\u7565master\u72b6\u6001\u548c\u5176\u5b83master\u7684\u610f\u89c1"}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"\u6848\u4f8b\u9700\u6c42"}),"\uff1a\u57287002\u8fd9\u4e2aslave\u8282\u70b9\u6267\u884c\u624b\u52a8\u6545\u969c\u8f6c\u79fb\uff0c\u91cd\u65b0\u593a\u56demaster\u5730\u4f4d"]}),"\n",(0,l.jsx)(s.p,{children:"\u6b65\u9aa4\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(s.p,{children:"1\uff09\u5229\u7528redis-cli\u8fde\u63a57002\u8fd9\u4e2a\u8282\u70b9"}),"\n",(0,l.jsxs)(s.p,{children:["2\uff09\u6267\u884c",(0,l.jsx)(s.strong,{children:"cluster failover"}),"\u547d\u4ee4"]}),"\n",(0,l.jsx)(s.p,{children:"\u5982\u56fe\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210727160037766",src:n(18620).A+"",width:"710",height:"71"})}),"\n",(0,l.jsx)(s.p,{children:"\u6548\u679c\uff1a"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"image-20210727161152065",src:n(5059).A+"",width:"921",height:"104"})}),"\n",(0,l.jsx)(s.h3,{id:"453-redis\u52a8\u6001\u6269\u7f29\u5bb9\u65f6\u82e5\u6709\u8bf7\u6c42\u8fc7\u6765\u600e\u4e48\u529e",children:"4.5.3 Redis\u52a8\u6001\u6269/\u7f29\u5bb9\u65f6\uff0c\u82e5\u6709\u8bf7\u6c42\u8fc7\u6765\u600e\u4e48\u529e\uff1f"}),"\n",(0,l.jsxs)(s.p,{children:["Redis\u52a8\u6001\u6269/\u7f29\u5bb9\u65f6\uff0cslot\u69fd\u4f4d\u4f1a\u53d1\u751f\u53d8\u5316\uff0c\u82e5\u662f\u8bf7\u6c42\u7ecf\u8fc7hash\u5230\u8fbe\u5bf9\u5e94\u7684\u8282\u70b9\u540e\uff0c\u53d1\u73b0slot\u69fd\u5df2\u7ecf\u8fc1\u79fb\u652f\u522b\u7684\u8282\u70b9\u4e0a\u4e86\uff0c\u8be5\u600e\u4e48\u529e\uff1f",(0,l.jsx)(s.img,{src:n(84402).A+"",width:"641",height:"564"})]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"1.\u5f53\u5ba2\u6237\u7aef\u5411\u96c6\u7fa4\u4e2d\u67d0\u4e2a\u8282\u70b9\u53d1\u9001\u547d\u4ee4\uff0c\u8282\u70b9\u5411\u5ba2\u6237\u7aef\u8fd4\u56demoved\u5f02\u5e38\uff0c\u544a\u8bc9\u5ba2\u6237\u7aef\u6570\u636e\u5bf9\u5e94\u76ee\u6807\u69fd\u7684\u8282\u70b9\u4fe1\u606f\u3002"}),"\n",(0,l.jsx)(s.li,{children:"2.\u5ba2\u6237\u7aef\u518d\u5411\u76ee\u6807\u8282\u70b9\u53d1\u9001\u547d\u4ee4\uff0c\u76ee\u6807\u8282\u70b9\u4e2d\u7684\u69fd\u5df2\u7ecf\u8fc1\u79fb\u51fa\u522b\u7684\u8282\u70b9\u4e0a\u4e86\uff0c\u6b64\u65f6\u76ee\u6807\u8282\u70b9\u4f1a\u8fd4\u56deask\u91cd\u5b9a\u5411\u7ed9\u5ba2\u6237\u7aef\u3002"}),"\n",(0,l.jsx)(s.li,{children:"2.\u5ba2\u6237\u7aef\u5411\u65b0\u7684target\u8282\u70b9\u53d1\u9001Asking\u547d\u4ee4\uff0c\u7136\u540e\u518d\u6b21\u5411\u65b0\u8282\u70b9\u53d1\u9001\u8bf7\u6c42\u8bf7\u6c42\u547d\u4ee4\u3002"}),"\n",(0,l.jsx)(s.li,{children:"3.\u65b0\u8282\u70b9target\u6267\u884c\u547d\u4ee4\uff0c\u628a\u547d\u4ee4\u6267\u884c\u7ed3\u679c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002"}),"\n"]}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsx)(s.p,{children:"moved\u548cask\u91cd\u5b9a\u5411\u7684\u533a\u522b\uff1a\n\u4e24\u8005\u90fd\u662f\u5ba2\u6237\u7aef\u91cd\u5b9a\u5411\nmoved\u5f02\u5e38\uff1a\u69fd\u5df2\u7ecf\u786e\u5b9a\u8fc1\u79fb\uff0c\u5373\u69fd\u5df2\u7ecf\u4e0d\u5728\u5f53\u524d\u8282\u70b9\nask\u5f02\u5e38\uff1a\u69fd\u8fd8\u5728\u8fc1\u79fb\u4e2d"}),"\n"]}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsx)(s.p,{children:"\u96c6\u7fa4\u8282\u70b9\u8f83\u591a\u65f6\uff0c\u5ba2\u670d\u7aef\u5927\u591a\u6570\u8bf7\u6c42\u90fd\u4f1a\u53d1\u751f\u91cd\u5b9a\u5411\uff0c\u6bcf\u6b21\u91cd\u5b9a\u5411\u90fd\u4f1a\u4ea7\u751f\u4e00\u6b21\u65e0\u7528\u7684\u8bf7\u6c42\uff0c\u4e25\u91cd\u5f71\u54cd\u4e86redis\u7684\u6027\u80fd\u3002"}),"\n",(0,l.jsx)(s.p,{children:"smart\u667a\u80fd\u5ba2\u6237\u7aef\u77e5\u9053\u7531\u54ea\u4e2a\u8282\u70b9\u8d1f\u8d23\u7ba1\u7406\u54ea\u4e2a\u69fd\uff0c\u800c\u4e14\u67d0\u4e2a\u5f53\u8282\u70b9\u4e0e\u69fd\u7684\u6620\u5c04\u5173\u7cfb\u53d1\u751f\u6539\u53d8\u65f6\uff0c\u5ba2\u6237\u7aef\u4e5f\u4f1a\u8fdb\u884c\u54cd\u5e94\u7684\u66f4\u65b0\uff0c\u8fd9\u662f\u4e00\u79cd\u975e\u5e38\u9ad8\u6548\u7684\u8bf7\u6c42\u65b9\u5f0f\u3002\u4f8b\u5982Jedis\u5c31\u8bbe\u7f6e\u4e86JedisCluster\u7c7b\u4f5c\u4e3asmart\u5ba2\u6237\u7aef\uff0c\u5c06\u6620\u5c04\u5173\u7cfb\u4fdd\u5b58\u5728\u672c\u5730\uff0c\u5f53\u51fa\u73b0\u91cd\u5b9a\u5411\u65f6\u66f4\u65b0\u672c\u5730\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u8fde\u7eed\u51fa\u73b05\u6b21\u672a\u627e\u5230\u76ee\u6807\u8282\u70b9\uff0c\u5219\u629b\u51fa\u5f02\u5e38\uff1aToo many cluster redirection"}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"45-rediscluster\u7684\u6545\u969c\u9009\u4e3e",children:"4.5 RedisCluster\u7684\u6545\u969c\u9009\u4e3e"}),"\n",(0,l.jsxs)(s.p,{children:["\u96c6\u7fa4\u8282\u70b9\u521b\u5efa\u65f6\uff0c\u4e0d\u7ba1\u662f master\u8fd8\u662fslave\uff0c\u90fd\u7f6e",(0,l.jsx)(s.strong,{children:"currentEpoch\u4e3a0"}),"\u3002 \u5f53\u524d\u8282\u70b9\u5728\u63a5\u53d7\u5176\u4ed6\u8282\u70b9\u53d1\u9001\u7684\u8bf7\u6c42\u65f6\uff0c\u5982\u679c\u53d1\u9001\u8005\u7684currentEpoch\uff08\u6d88\u606f\u5934\u90e8\u4f1a\u5305\u542b\u53d1\u9001\u8005\u7684 currentEpoch\uff09\u5927\u4e8e\u5f53\u524d\u8282\u70b9\u7684currentEpoch\uff0c\u90a3\u4e48\u5f53\u524d\u8282\u70b9\u4f1a\u66f4\u65b0currentEpoch\u3002 \u56e0\u6b64\uff0c\u96c6\u7fa4\u4e2d\u6240\u6709\u8282\u70b9\u7684 currentEpoch\u6700\u7ec8\u4f1a\u8fbe\u6210\u4e00\u81f4\uff0c\u76f8\u5f53\u4e8e\u5bf9\u96c6\u7fa4\u72b6\u6001\u7684\u8ba4\u77e5\u8fbe\u6210\u4e86\u4e00\u81f4\u3002"]}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"master\u8282\u70b9\u9009\u4e3e\u8fc7\u7a0b\uff1a"})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"1.slave\u53d1\u73b0\u81ea\u5df1\u7684master\u53d8\u4e3aFAIL\u3002"}),"\n",(0,l.jsx)(s.li,{children:"2.\u53d1\u8d77\u9009\u4e3e\u524d\uff0cslave\u5148\u7ed9\u81ea\u5df1\u7684epoch\uff08\u5373currentEpoch\uff09\u52a0\u4e00\uff0c\u7136\u540e\u8bf7\u6c42\u96c6\u7fa4\u4e2d\u5176\u5b83master\u7ed9\u81ea\u5df1\u6295\u7968\uff0c\u5e76\u5e7f\u64ad\u4fe1\u606f\u7ed9\u96c6\u7fa4\u4e2d\u5176\u4ed6\u8282\u70b9\u3002"}),"\n",(0,l.jsx)(s.li,{children:"3.slave\u53d1\u8d77\u6295\u7968\u540e\uff0c\u4f1a\u7b49\u5f85\u81f3\u5c11\u4e24\u500dNODE_TIMEOUT\u65f6\u957f\u63a5\u6536\u6295\u7968\u7ed3\u679c\uff0c\u4e0d\u7ba1NODE_TIMEOUT\u4f55\u503c\uff0c\u4e5f\u81f3\u5c11\u4f1a\u7b49\u5f852\u79d2\u3002"}),"\n",(0,l.jsx)(s.li,{children:"4.\u5176\u4ed6\u8282\u70b9\u6536\u5230\u8be5\u4fe1\u606f\uff0c\u53ea\u6709master\u54cd\u5e94\uff0c\u5224\u65ad\u8bf7\u6c42\u8005\u7684\u5408\u6cd5\u6027\uff0c\u5e76\u53d1\u9001\u7ed3\u679c\u3002"}),"\n",(0,l.jsx)(s.li,{children:"5.\u5c1d\u8bd5\u9009\u4e3e\u7684slave\u6536\u96c6master\u8fd4\u56de\u7684\u7ed3\u679c\uff0c\u6536\u5230\u8d85\u8fc7\u534a\u6295\u7968\u6570master\u7684\u7edf\u4e00\u540e\u53d8\u6210\u65b0Master\uff0c\u5982\u679c\u5931\u8d25\u4f1a\u53d1\u8d77\u7b2c\u4e8c\u6b21\u9009\u4e3e\uff0c\u9009\u4e3e\u8f6e\u6b21\u6807\u8bb0+1\u7ee7\u7eed\u4e0a\u9762\u7684\u6d41\u7a0b\u3002"}),"\n",(0,l.jsx)(s.li,{children:"6.\u9009\u4e3e\u6210\u529f\u540e\uff0c\u5e7f\u64adPong\u6d88\u606f\u901a\u77e5\u96c6\u7fa4\u5176\u5b83\u8282\u70b9\u3002"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u4e4b\u6240\u4ee5\u5f3a\u5236\u5ef6\u8fdf\u81f3\u5c110.5\u79d2\u9009\u4e3e\uff0c\u662f\u4e3a\u786e\u4fddmaster\u7684fail\u72b6\u6001\u5728\u6574\u4e2a\u96c6\u7fa4\u5185\u4f20\u5f00\uff0c\u5426\u5219\u53ef\u80fd\u53ea\u6709\u5c0f\u90e8\u5206master\u77e5\u6653\uff0c\u800cmaster\u53ea\u4f1a\u7ed9\u5904\u4e8efail\u72b6\u6001\u7684master\u7684slaves\u6295\u7968\u3002 \u5982\u679c\u4e00\u4e2aslave\u7684master\u72b6\u6001\u4e0d\u662ffail\uff0c\u5219\u5176\u5b83master\u4e0d\u4f1a\u7ed9\u5b83\u6295\u7968\uff0cRedis\u901a\u8fc7\u516b\u5366\u534f\u8bae\uff08\u5373Gossip\u534f\u8bae\uff0c\u4e5f\u53eb\u8c23\u8a00\u534f\u8bae\uff09\u4f20\u64adfail\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u800c\u5728\u56fa\u5b9a\u5ef6\u8fdf\u4e0a\u518d\u52a0\u4e00\u4e2a\u968f\u673a\u5ef6\u8fdf\uff0c\u662f\u4e3a\u4e86\u907f\u514d\u591a\u4e2aslaves\u540c\u65f6\u53d1\u8d77\u9009\u4e3e\u3002"}),"\n",(0,l.jsx)(s.h2,{id:"46redistemplate\u8bbf\u95ee\u5206\u7247\u96c6\u7fa4",children:"4.6.RedisTemplate\u8bbf\u95ee\u5206\u7247\u96c6\u7fa4"}),"\n",(0,l.jsx)(s.p,{children:"RedisTemplate\u5e95\u5c42\u540c\u6837\u57fa\u4e8elettuce\u5b9e\u73b0\u4e86\u5206\u7247\u96c6\u7fa4\u7684\u652f\u6301\uff0c\u800c\u4f7f\u7528\u7684\u6b65\u9aa4\u4e0e\u54e8\u5175\u6a21\u5f0f\u57fa\u672c\u4e00\u81f4\uff1a"}),"\n",(0,l.jsx)(s.p,{children:"1\uff09\u5f15\u5165redis\u7684starter\u4f9d\u8d56"}),"\n",(0,l.jsx)(s.p,{children:"2\uff09\u914d\u7f6e\u5206\u7247\u96c6\u7fa4\u5730\u5740"}),"\n",(0,l.jsx)(s.p,{children:"3\uff09\u914d\u7f6e\u8bfb\u5199\u5206\u79bb"}),"\n",(0,l.jsx)(s.p,{children:"\u4e0e\u54e8\u5175\u6a21\u5f0f\u76f8\u6bd4\uff0c1\uff09\u548c3\uff09\u5df2\u5728\u54e8\u5175\u6a21\u5f0f\u4e0b\u914d\u7f6e\u8fc7\u4e86\uff0c\u5176\u4e2d\u53ea\u6709\u5206\u7247\u96c6\u7fa4\u7684\u914d\u7f6e\u65b9\u5f0f\u7565\u6709\u5dee\u5f02\uff0c\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-yaml",children:"spring:\n  redis:\n    cluster:\n      nodes:\n        - 192.168.111.100:7001\n        - 192.168.111.100:7002\n        - 192.168.111.100:7003\n        - 192.168.111.100:8001\n        - 192.168.111.100:8002\n        - 192.168.111.100:8003\n"})})]})}function x(e={}){const{wrapper:s}={...(0,d.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(t,{...e})}):t(e)}},5381:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725144240631-7abcc3562daddaf42ac54b029d9546ac.png"},13877:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725144536958-dc5eb5998ce0b05c86e36f6e00ceffda.png"},99587:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725144725943-6ffe7b740ee4194c3be7eb9552f5e2e6.png"},67704:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725151319695-383ba4130209b0b99a1b0b3fc66cf665.png"},2315:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725151543640-479ef44f07d1f3fab2235c3271b829fa.png"},94686:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725151654046-687b4639694addbe3e32074b2479db4c.png"},19973:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725151729118-23604bbf35854c60217953c1588fe147.png"},47767:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725151940515-c420b57c9a2e75594a56da525d79a02b.png"},75198:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725152037611-b3ed472da2cc44d6bfec97285819fa4d.png"},71283:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725152052501-af6d91ffd8b7ce2023e5ab802ded0aad.png"},25034:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725152222497-8db5b1334b720defff5967389c74f6e0.png"},5467:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725152700914-1f67d74d369f310286f2105fc8ac6137.png"},47366:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725153201086-cd2dbdd24a3ce17676ff07ce2a1cd9a0.png"},48234:(e,s,n)=>{n.d(s,{A:()=>i});const i="data:image/png;base64,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"},10614:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725153524190-082b02db395bd6087436b73f688d43f2.png"},30988:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725153715910-5408000aa99dad456df0ae1e39334e86.png"},51148:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725153937031-07473e579d4002a5528a267c9f0a78e8.png"},88682:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725154155984-6d931d16cb0eee482b616276ed6cbfec.png"},42793:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725154216392-12ae8610756f0d2783803453cd1492ef.png"},36523:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725154405899-d20cdc8fc889094758acbdf6fb4703b6.png"},61580:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725154528072-8c652abf4299dfa05342973f20751849.png"},64085:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725154632354-c06b6469c92eada48a7a33ae4e81502e.png"},87660:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725154816841-a2a74bb239b77bdc663571bb49dca242.png"},57820:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725155019276-af6d91ffd8b7ce2023e5ab802ded0aad.png"},43840:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725155124958-ec55fdc66e2e8b0569f32d517ae84ccf.png"},71886:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725155747294-cc93dabba9f728637314368a3e68d743.png"},88992:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725155806288-af6d91ffd8b7ce2023e5ab802ded0aad.png"},16560:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725155820320-a690583ad8b1a590d7a40a503953e1a5.png"},22564:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725155850200-0e14b4ca147dd2954569c1f31c273b7c.png"},42994:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725160138290-5279c0d9e54304122b3ff9da10cd86a1.png"},1313:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725160448139-172c777afb0c5483e31feb88a38885a7.png"},9065:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725161007099-044311beaf5774d4c2fc642a882f6156.png"},12828:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725161241793-5bd630556cb7a85ab453cbcfa3a67f75.png"},29163:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725161401925-0f8522f36e9283ca4b6067300fe9dbec.png"},3e4:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725161506241-bc98852f044760d7175692ce58c036e8.png"},75500:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725161540841-2203fb63a6e9b862abc39668024b7ace.png"},62962:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725161637152-d0af3defbfb7d0b8b02b90b136c673c3.png"},30169:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725161731738-9d9acbe445399b04bda55833042d1786.png"},76610:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725161817642-f185b968e09594eec63d9dfd431c3648.png"},29924:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725162030478-f2e8f80c71732790a197eba678a60c56.png"},1961:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725162101228-0bf9092d222d09e2f2de797c45e2ba94.png"},78521:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725162145497-e0b327bb0255576ee755c1690dc86e7f.png"},17678:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725162224058-65f19ed6931d169e7370e7c94932db70.png"},15061:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725162319490-a1c606b590a716ab83b9310c7882a22a.png"},92472:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725162408979-b2c4b67adcde48c79f15696cef8be83a.png"},96513:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210725162441407-6a30ec5828608ab43db1c32d26728a0e.png"},18620:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210727160037766-53c60e01838f7fbc45c2b17d79704b77.png"},16829:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210727160803386-64be9c3dc35218770ba0edf79aa603e3.png"},5059:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20210727161152065-297726dc88d87904e322b42e12e7e42a.png"},95309:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20230406210220048-5175b8e80fd574a23c84b2b90dcdf98e.png"},2748:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20230406210834433-fa1ea565e45771d5536194d1002d5e56.png"},93244:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20230410223821799-39aaa74ad4bed106561d9563a6333e2b.png"},34246:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20230410223913265-d632371a8d4d1353699736b650771ee9.png"},52951:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20231013214118098-ede0467beebede6973ae3ac6d29f26b7.png"},79632:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20231013214141914-07c23925594fa3e34eabf98585acf416.png"},97442:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20231016230439953-15f7eb19fb9c6f1d1a23b79eb40a12eb.png"},89896:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20231021214028870-5815dfbc215f9ac0c7a3196ea215e842.png"},57777:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20231021214144751-b6b905ef5dd73a3f695ed068bb95cfad.png"},21064:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20231027232610828-c33fa472b0e6bb55d1d3f6f0837ef539.png"},6110:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20231027233202077-14453c86a3e804ce2955f2bbfbb04caf.png"},84402:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20240412203054321-17129270973171-9058f5de995408c66750077e25e8273a.png"},28453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>c});var i=n(96540);const l={},d=i.createContext(l);function r(e){const s=i.useContext(d);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(d.Provider,{value:s},e.children)}}}]);