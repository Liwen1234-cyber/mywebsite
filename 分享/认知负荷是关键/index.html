<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-分享/认知负荷是关键" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">认知负荷是关键 | Coisini</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://doc.minddiy.top/分享/认知负荷是关键/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="认知负荷是关键 | Coisini"><meta data-rh="true" name="description" content="非常建议直接读原文"><meta data-rh="true" property="og:description" content="非常建议直接读原文"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://doc.minddiy.top/分享/认知负荷是关键/"><link data-rh="true" rel="alternate" href="https://doc.minddiy.top/分享/认知负荷是关键/" hreflang="en"><link data-rh="true" rel="alternate" href="https://doc.minddiy.top/分享/认知负荷是关键/" hreflang="x-default"><meta name="google-site-verification" content="1FUPX6Qo4y3ecU623ShEurhgnjhSTjK49rRMhEDlzFA">
<link rel="stylesheet" href="/katex/katex.min.css">
<script src="/js/matomo.js" async defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.79037026.css">
<script src="/assets/js/runtime~main.468f2b27.js" defer="defer"></script>
<script src="/assets/js/main.4763ab3e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Chialisp Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Chialisp Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Coisini</b></a></div><div class="navbar__items navbar__items--right"><a href="https://minddiy.top" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Main site<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/分享/">分享</a><button aria-label="Collapse sidebar category &#x27;分享&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/收藏/">收藏</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/archived/目录/">过去Github trending</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/windows快捷键/">windows快捷键</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/让你吐槽不断的书/">让你吐槽不断的书</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/经济学小故事/">经济学小故事</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/不确定性/">不确定性</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/法律常识/">法律常识</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/健康延寿指南/">健康延寿指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/十本书/">十本书</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/emoji/">emoji</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/AI工具/">AI Tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/分享/认知负荷是关键/">认知负荷是关键</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/resilio-sync/">resilio-sync资源分享</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/MrBeast/">MrBeast员工培养手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/不确定性/">不确定性</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/自我管理/">自我管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/Done_is_better_than_Perfection/">Done_is_better_than_Perfection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/Experience_sharing/">Experience_sharing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/Nat_Friedman/">Nat Friedman</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/分享/好玩的网站、工具/">好玩的网站、工具</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/读书笔记/">读书笔记</a><button aria-label="Expand sidebar category &#x27;读书笔记&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/技巧/">技巧</a><button aria-label="Expand sidebar category &#x27;技巧&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/数学/">数学</a><button aria-label="Expand sidebar category &#x27;数学&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/思考/">思考</a><button aria-label="Expand sidebar category &#x27;思考&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/学习/">学习</a><button aria-label="Expand sidebar category &#x27;学习&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/码农/">码农</a><button aria-label="Expand sidebar category &#x27;码农&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/毛选/">毛选</a><button aria-label="Expand sidebar category &#x27;毛选&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/分享/"><span itemprop="name">分享</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">认知负荷是关键</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>认知负荷是关键</h1></header>
<blockquote>
<p>非常建议直接读<a href="https://zakirullin.md/cognitive" target="_blank" rel="noopener noreferrer">原文</a></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="介绍">介绍<a href="#介绍" class="hash-link" aria-label="Direct link to 介绍" title="Direct link to 介绍">​</a></h2>
<p>现在有很多流行语和最佳实践，但让我们关注一些更基本的东西。重要的是，开发人员在阅读代码时会感到多少困惑。</p>
<p>混乱会耗费时间和金钱。混乱是由高<strong>认知负荷</strong>引起的。这不是一些花哨的抽象概念，而是<strong>人类的基本约束</strong>。</p>
<p>因为我们花在阅读和理解代码上的时间远远多于写代码的时间，所以我们应该不断地问自己是否在代码中嵌入了过多的认知负荷。</p>
<p><img decoding="async" loading="lazy" alt="Cognitive Load" src="/assets/images/cognitiveloadv5-396d30ed516f1b1b848424fcc53906f2.png" width="2780" height="2052" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="认知负荷">认知负荷<a href="#认知负荷" class="hash-link" aria-label="Direct link to 认知负荷" title="Direct link to 认知负荷">​</a></h2>
<blockquote>
<p>认知负荷是指开发人员为完成一项任务需要思考的程度。</p>
</blockquote>
<p>阅读代码时，您会将变量值、控制流逻辑和调用序列等内容放入脑海中。一般人的工作记忆中可以容纳大约<a href="https://github.com/zakirullin/cognitive-load/issues/16" target="_blank" rel="noopener noreferrer">四个这样的块</a>。一旦认知负荷达到这个阈值，理解事物就会变得更加困难。</p>
<p>*比方说，我们被要求对一个完全陌生的项目进行一些修正。我们被告知，一位非常聪明的开发人员为该项目做出了贡献。他使用了很多很酷的架构、花哨的库和时髦的技术。换句话说，<em><strong>作者为我们创造了很高的认知负荷。</strong></em></p>
<p>我们应尽可能减少项目中的认知负荷。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="认知负荷的类型">认知负荷的类型<a href="#认知负荷的类型" class="hash-link" aria-label="Direct link to 认知负荷的类型" title="Direct link to 认知负荷的类型">​</a></h2>
<p><strong>内在</strong> - 由任务的内在难度造成。它无法降低，是软件开发的核心。</p>
<p><strong>外来</strong> - 信息呈现方式造成的。由与任务无直接关系的因素造成，如聪明的作者的怪癖。可以大大减少。我们将重点讨论这类认知负荷。</p>
<p><img decoding="async" loading="lazy" alt="Intrinsic vs Extraneous" src="/assets/images/smartauthorv13-c461a443eef7e534d49253b77ac22b42.png" width="1996" height="729" class="img_ev3q"></p>
<p>让我们直接跳到无关认知负荷的具体实例。</p>
<hr>
<p>我们将认知负荷水平称为如下：</p>
<p>🧠：新鲜工作记忆，零认知负荷</p>
<p>🧠++：我们工作记忆中的两个事实，认知负荷增加</p>
<p>🤯：工作记忆溢出，超过 4 个事实</p>
<blockquote>
<p>我们的大脑要复杂得多且未经探索，但我们可以采用这个简单化的模型。</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="复杂条件句">复杂条件句<a href="#复杂条件句" class="hash-link" aria-label="Direct link to 复杂条件句" title="Direct link to 复杂条件句">​</a></h2>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">if</span><span class="token plain"> val </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> someConstant </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// 🧠+</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">condition2 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">||</span><span class="token plain"> condition3</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// 🧠+++, prev cond should be true, one of c2 or c3 has be true</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">condition4 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain">condition5</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"> </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// 🤯, we are messed up by this point</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token operator" style="color:hsl(221, 87%, 60%)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>引入具有有意义名称的中间变量：</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">isValid </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> val </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> someConstant</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">isAllowed </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> condition2 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">||</span><span class="token plain"> condition3</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">isSecure </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> condition4 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain">condition5 </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// 🧠, we don&#x27;t need to remember the conditions, there are descriptive variables</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">if</span><span class="token plain"> isValid </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> isAllowed </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&amp;&amp;</span><span class="token plain"> isSecure </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token operator" style="color:hsl(221, 87%, 60%)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="嵌套-if">嵌套 if<a href="#嵌套-if" class="hash-link" aria-label="Direct link to 嵌套 if" title="Direct link to 嵌套 if">​</a></h2>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">if</span><span class="token plain"> isValid </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"> </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// 🧠+, okay nested code applies to valid input only</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">if</span><span class="token plain"> isSecure </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"> </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// 🧠++, we do stuff for valid and secure input only</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        stuff </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// 🧠+++</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>与早期回报进行比较：</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">if</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain">isValid</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"> </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token keyword" style="color:hsl(301, 63%, 40%)">if</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain">isSecure</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">// 🧠, we don&#x27;t really care about earlier returns, if we are here then all good</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">stuff </span><span class="token comment" style="color:hsl(230, 4%, 64%)">// 🧠+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>我们可以只专注于快乐的道路，从而将我们的工作记忆从各种先决条件中解放出来。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="继承噩梦">继承噩梦<a href="#继承噩梦" class="hash-link" aria-label="Direct link to 继承噩梦" title="Direct link to 继承噩梦">​</a></h2>
<p>我们被要求为我们的管理员用户更改一些内容：🧠</p>
<p><code>AdminController 扩展了 UserController 扩展了 GuestController 扩展了 BaseController</code></p>
<ul>
<li>部分功能在 <code>BaseController</code> 中，让我们看一下：<code>🧠+</code></li>
<li>在 <code>GuestController</code> 中引入了基本角色机制：<code>🧠++</code></li>
<li>在 <code>UserController</code> 中进行了部分更  改：<code>🧠+++ </code></li>
<li>终于到了，<code>AdminController</code>，让我们编写代码吧！ <code>🧠++++</code></li>
<li>等等，有一个扩展了“AdminController”的“SuperuserController”。通过修改“AdminController”，我们可以破坏继承类中的内容，所以让我们首先深入了解“SuperuserController”：“🤯”</li>
</ul>
<p>优先选择组合而不是继承。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="太多的小方法类或模块">太多的小方法、类或模块<a href="#太多的小方法类或模块" class="hash-link" aria-label="Direct link to 太多的小方法、类或模块" title="Direct link to 太多的小方法、类或模块">​</a></h2>
<blockquote>
<p>方法、类和模块在这种情况下是可以互换的</p>
</blockquote>
<p>诸如“方法应该少于 15 行代码”或“类应该很小”之类的咒语被证明是有些错误的。</p>
<p><strong>深层模块</strong> - 界面简单，功能复杂</p>
<p><strong>浅层模块</strong> - 界面相对于它提供的小功能来说相对复杂</p>
<p><img decoding="async" loading="lazy" alt="Deep module" src="/assets/images/deepmodulev5-20cbc3d13d5941a9bbfd73476f7886c0.png" width="2594" height="1310" class="img_ev3q"></p>
<p>过多的浅层模块会使项目难以理解。 <strong>我们不仅要牢记每个模块的职责，还要牢记它们所有的交互</strong>。要理解浅层模块的用途，我们首先需要查看所有相关模块的功能。 <code>🤯</code></p>
<blockquote>
<p>信息隐藏至关重要，我们不会在浅层模块中隐藏太多复杂性。</p>
</blockquote>
<p>我有两个喜欢的项目，它们都有 5K 行代码。第一个有 80 个浅层类，而第二个只有 7 个深层类。我已经一年半没有维护任何这些项目了。</p>
<p>回来后，我意识到在第一个项目中理清这 80 个类之间的所有交互是极其困难的。在开始编码之前，我必须重建大量的认知负荷。另一方面，我能够很快掌握第二个项目，因为它只有几个深层类和一个简单的接口。</p>
<blockquote>
<p>最好的组件是那些提供强大功能但界面简单的组件。
--<strong>约翰·K·奥斯特豪特</strong></p>
</blockquote>
<p>UNIX I/O 的接口非常简单。它只有五个基本调用：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token builtin" style="color:hsl(119, 34%, 47%)">open</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> flags</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> permissions</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">read</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">fd</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token builtin" style="color:hsl(119, 34%, 47%)">buffer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> count</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">write</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">fd</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token builtin" style="color:hsl(119, 34%, 47%)">buffer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> count</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">lseek</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">fd</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> offset</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> referencePosition</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">close</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">fd</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>该接口的现代实现有<strong>数十万行代码</strong>。许多复杂性隐藏在幕后。然而，由于其简单的界面，它很容易使  用。</p>
<blockquote>
<p>这个深层模块示例取自 John K. Ousterhout 所著的<a href="https://web.stanford.edu/~ouster/cgi-bin/book.php" target="_blank" rel="noopener noreferrer">《软件设计哲学》</a>一书。本书不仅涵盖了软件开发中复杂性的本质，而且还对Parnas颇具影响力的论文<a href="https://www.win.tue.nl/~wstomv/edu/2ip30/references/criteria_for_modularization.pdf" target="_blank" rel="noopener noreferrer">On the Criteria To Be Use in Decomusing Systems into Modules</a>。两者都是必备读物。其他相关阅读：<a href="https://qntm.org/clean" target="_blank" rel="noopener noreferrer">可能是时候停止推荐干净代码了</a>、[被认为有害的小函数](<a href="https://copyconstruct.medium.com/small-functions-considered-harmful" target="_blank" rel="noopener noreferrer">https://copyconstruct.medium.com/small-functions-considered-harmful</a> -91035d316c29)。</p>
</blockquote>
<p>附：如果你认为我们支持臃肿的上帝对象和太多的责任，那你就错了。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="浅层模块和-srp">浅层模块和 SRP<a href="#浅层模块和-srp" class="hash-link" aria-label="Direct link to 浅层模块和 SRP" title="Direct link to 浅层模块和 SRP">​</a></h2>
<p>很多时候，我们最终会创建大量浅层模块，遵循一些模糊的“一个模块应该负责一个且只负责一个事物”的原则。这模糊的一件事是什么？实例化一个对象是一回事，对吧？所以 <code>MetricsProviderFactoryFactory</code> 似乎就很好。这些类的名称和接口往往比它们的整个实现更费脑力，那是一种什么样的抽象？出了点问题。</p>
<blockquote>
<p>在如此浅层的组件之间跳转也很费脑力，<a href="https://blog.separateconcerns.com/2023-09-11-linear-code.html" target="_blank" rel="noopener noreferrer">线性思维</a>对我们人类来说更自然。</p>
</blockquote>
<p>我们对系统进行更改以满足我们的用户和利益相 关者的需求。我们对他们负责。</p>
<blockquote>
<p>一个模块应该对一个且仅对一个用户或利益相关者负责。</p>
</blockquote>
<p>这就是单一责任原则的全部内容。简单来说，如果我们在一个地方引入了一个bug，然后两个不同的业务人员来抱怨，我们就违反了原则。它与我们在模块中所做的事情的数量无关。</p>
<p>但即使是现在，这种解释也弊大于利。这条规则可以以多种不同的方式来理解，就像有多少个人一样。更好的方法是看看这一切会产生多少认知负荷。记住一个模块的变化可能会在不同的业务流中引发一系列反应，这对心理上的要求很高。就是这样。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="太多浅层微服务">太多浅层微服务<a href="#太多浅层微服务" class="hash-link" aria-label="Direct link to 太多浅层微服务" title="Direct link to 太多浅层微服务">​</a></h2>
<p>这种浅深模块原则与规模无关，我们可以将其应用到微服务架构中。太多的浅层微服务不会有任何好处——行业正在走向某种程度的“宏观服务”，即不那么浅层（=深层）的服务。最糟糕和最难修复的现象之一是所谓的分布式整体，这通常是这种过于细粒度的浅层分离的结果。</p>
<p>我曾经咨询过一家初创公司，该公司的 5 名开发人员团队引入了 17 个(!)微服务。它们比原计划晚了 10 个月，而且距离公开发布还差得很远。每一个新需求都会导致 4 个以上微服务的变化。集成空间的诊断难度急剧上升。上市时间和认知负荷都高得令人无法接受。 <code>🤯</code></p>
<p>这是处理新系统不确定性的正确方法吗？一开始就很难得出正确的逻辑界限。关键是在负责任地等待的时间内尽可能晚地做出决定，因为那时你拥有最多的信息来做出决定。通过预先引入网络层，我们的设计决策很难从一开始就恢复。该团队唯一的理由是：“FAANG 公司证明了微服务架构是有效的”。 <em>你好，你不能再做大梦了。</em></p>
<p><a href="https://en.wikipedia.org/wiki/Tanenbaum%E2%80%93Torvalds_debate" target="_blank" rel="noopener noreferrer">Tanenbaum-Torvalds 辩论</a> 认为 Linux 的整体设计是有缺陷且过时的，应该使用微内核架构来代替。事实上，“从理论和美学”的角度来看，微内核设计似乎更优越。从实际情况来看，三十年过去了，基于微内核的 GNU Hurd 仍在开发中，而整体 Linux 已经无处不在。此页面由 Linux 提供支持，您的智能茶壶由 Linux 提供支持。通过单片Linux。</p>
<p>具有真正隔离模块的精心设计的整体通常比一堆微服务灵活得多。它还需要更少的认知努力来维持。只有当单独部署的需求变得至关重要时（例如扩展开发团队），您才应该考虑在模块和未来的微服务之间添加网络层。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="功能丰富的语言">功能丰富的语言<a href="#功能丰富的语言" class="hash-link" aria-label="Direct link to 功能丰富的语言" title="Direct link to 功能丰富的语言">​</a></h2>
<p>当我们喜爱的语言发布新功能时，我们会感到兴奋。我们花一些时间学习这些功能，并在此基础上编写代码。</p>
<p>如果有很多功能，我们可能要花半小时来处理几行代码，以使用这样或那样的功能。这有点浪费时间。但更糟糕的是，当你稍后再回来时，你将不得不重新经历那个思考过程！</p>
<p>你不仅要理解这个复杂的程序，还要理解为什么程序员决定用这种方法来解决现有功能中的问题。🤯</p>
<p>发表这些言论的不是别人，正是罗伯-派克。</p>
<blockquote>
<p>通过限制选择数量来减少认知负荷。</p>
</blockquote>
<p>只要语言特征是相互正交的，就没有问题。</p>
<p>一位拥有20年C++经验的工程师的想 法️⭐️:</p>
<blockquote>
<p>前几天，我在看我的 RSS 阅读器时发现，我的 &quot;C++&quot;标签下有三百多篇未读文章。从去年夏天到现在，我一篇关于 C++ 语言的文章都没读过，感觉好极了！</p>
<p>我使用 C++ 已经有 20 年了，这几乎是我人生的三分之二的时间。我的大部分经验都在于处理语言中最黑暗的角落（例如各种未定义的行为）。这不是一个可重复使用的体验，现在把它全部扔掉有点令人毛骨悚然。</p>
<p>比如，你能想象 || 符号在 requires ((! P<t> || ! Q<t>) 和 requires (! (P<t> || Q<t>)) 中的含义不同吗？）前者是约束析取，后者是古老的逻辑 OR 运算符，它们的行为是不同的。</t></t></t></t></p>
<p>你不能为简单的类型分配空间，而无需额外的努力就可以在其中 memcpy 一组字节 - 这不会启动对象的生命周期。 C++20之前就是这种情况。它在 C++20 中得到了修复，但该语言的认知负荷只是增加了。</p>
<p>尽管事情已经解决，但认知负荷却在不断增加。我应该知道修复了什么，什么时候修复的，修复前是什么样子。毕竟我是专业人士。当然，C++ 擅长遗留问题支持，这也意味着你将面对遗留问题。例如，上个月我的一位同事向我询问 C++03 中的一些行为。</p>
<p>有 20 种初始化方式。现在增加了统一初始化语法。现在我们有 21 种初始化方式。顺便问一句，还有人记得从初始化列表中选择构造函数的规则吗？关于隐式转换，信息损失最小，但如果值是静态已知的，那么......</p>
<p>这种认知负荷的增加并不是由手头的业务任务造成的。它不是领域的内在复杂性。它只是由于历史原因而存在（外在认知负荷）。</p>
<p>我不得不想出一些规则。比如，如果那行代码不那么明显，而我又必须记住标准，那我最好不要那样写。顺便说一句，该标准长达 1500 页。</p>
<p>我 绝不是在指责 C++。我热爱这门语言。只是我现在累了</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="分层架构">分层架构<a href="#分层架构" class="hash-link" aria-label="Direct link to 分层架构" title="Direct link to 分层架构">​</a></h2>
<p>抽象本应隐藏复杂性，但在这里它只是增加了间接性。从一个调用跳转到另一个调用，以便阅读并找出出错的地方和遗漏的地方，这是快速解决问题的一个重要要求。由于该架构的层解耦（uncoupling），需要指数级的额外跟踪（通常是不连贯的）才能找到故障发生点。每一个这样的跟踪都会占用我们有限的工作内存空间。<code>🤯</code></p>
<p>这种架构起初很有直觉意义，但每次我们尝试将其应用到项目中时，都是弊大于利。最后，我们放弃了这一切，转而采用古老的依赖关系反转原则。<strong>没有需要学习的端口/适配器术语，没有不必要的水平抽象层，没有无关的认知负荷。</strong></p>
<p>如果你认为这样的分层可以让你快速更换数据库或其他依赖项，那就大错特错了。改变存储会带来很多问题，相信我们，对数据访问层进行抽象是最不需要担心的。抽象最多只能节省 10%的迁移时间（如果有的话），真正的痛苦在于数据模型不兼容、通信协议、分布式系统挑战和隐式接口。</p>
<p><strong>那么，如果将来没有回报，为什么要为这种分层架构付出高认知负荷的代价呢？</strong></p>
<p>不要为了架构而添加抽象层。只要出于实际原因需要扩展点，就应该添加抽象层。<strong>抽象层不是免费的，它们应保存在我们的工作记忆中</strong>。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ddd">DDD<a href="#ddd" class="hash-link" aria-label="Direct link to DDD" title="Direct link to DDD">​</a></h2>
<p>领域驱动设计（DDD）有一些很好的观点，尽管它经常被曲  解。人们说 &quot;我们用领域驱动设计来写代码&quot;，这有点奇怪，因为领域驱动设计是关于问题空间的，而不是关于解决方案空间的。</p>
<p>无处不在的语言、领域、有界上下文、聚合、事件风暴都是关于问题空间的。它们旨在帮助我们了解关于领域的见解并提取边界。DDD使开发人员、领域专家和业务人员能够使用单一的统一语言进行有效的沟通。我们倾向于强调特定的文件夹结构、服务、存储库，以及其他解决方案空间技术。</p>
<p>我们解释 DDD 的方式很可能是独特而主观的。如果我们在这种理解的基础上构建代码，也就是说，如果我们创造了大量无关的认知负荷，那么未来的开发人员就注定要失败。 <code>🤯</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="例如">例如<a href="#例如" class="hash-link" aria-label="Direct link to 例如" title="Direct link to 例如">​</a></h2>
<ul>
<li>我们的架构是一个标准的 CRUD 应用程序架构，Postgres 上的 Python 单体</li>
<li>Instagram 如何在 仅有 3 名工程师 的情况下将用户数量扩大到 1400 万</li>
<li>我们觉得 &quot;哇，这些人真是聪明绝顶 &quot;的公司大多失败了。</li>
<li>一个功能将整个系统连接起来。如果您想知道系统是如何工作的，请阅读<a href="https://www.infoq.com/presentations/8-lines-code-refactoring/" target="_blank" rel="noopener noreferrer">此文</a></li>
</ul>
<p>这些架构相当枯燥，而且易于理解。任何人都可以轻松掌握。</p>
<p>让初级开发人员参与架构评审。他们将帮助您识别需要脑力劳动的领域。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="熟悉项目中的认知负荷">熟悉项目中的认知负荷<a href="#熟悉项目中的认知负荷" class="hash-link" aria-label="Direct link to 熟悉项目中的认知负荷" title="Direct link to 熟悉项目中的认知负荷">​</a></h2>
<p>如果你已 经将项目的心理模型内化到你的长期记忆中，你就不会经历高认知负荷。</p>
<p><img decoding="async" loading="lazy" alt="Mental Models" src="/assets/images/mentalmodelsv15paper-f000b2691b94aea530707839787ffd16.png" width="1579" height="762" class="img_ev3q"></p>
<p>The more mental models there are to learn, the longer it takes for a new developer to deliver value.</p>
<p>Once you onboard new people on your project, try to measure the amount of confusion they have (pair programming may help). If they&#x27;re confused for more than ~40 minutes in a row - you&#x27;ve got things to improve in your code.</p>
<p>If you keep the cognitive load low, people can contribute to your codebase within the first few hours of joining your company.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="#总结" class="hash-link" aria-label="Direct link to 总结" title="Direct link to 总结">​</a></h2>
<p>试想一下，我们在第二章中的推论实际上并不正确。如果是这样的话，那么我们刚刚否定的结论，以及前一章中我们认为有效的结论，可能也不正确。 <code>🤯</code></p>
<p>你感觉到了吗？你不仅要在文章中跳来跳去才能理解意思（肤浅的模块！），而且段落一般都很难理解。我们只是在你的头脑中创造了一个不必要的认知负荷。<strong>不要对你的同事这样做</strong></p>
<p><img decoding="async" loading="lazy" alt="Smart Author" src="/assets/images/smartauthorv14paperthanksmari-14c32a96703cb29338c776373fba28a6.png" width="1996" height="729" class="img_ev3q"></p>
<p>我们应该减少任何认知负荷超过我们所做的工作的内在。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/分享/AI工具/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">AI Tools</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/分享/resilio-sync/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">resilio-sync资源分享</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#介绍" class="table-of-contents__link toc-highlight">介绍</a></li><li><a href="#认知负荷" class="table-of-contents__link toc-highlight">认知负荷</a></li><li><a href="#认知负荷的类型" class="table-of-contents__link toc-highlight">认知负荷的类型</a></li><li><a href="#复杂条件句" class="table-of-contents__link toc-highlight">复杂条件句</a></li><li><a href="#嵌套-if" class="table-of-contents__link toc-highlight">嵌套 if</a></li><li><a href="#继承噩梦" class="table-of-contents__link toc-highlight">继承噩梦</a></li><li><a href="#太多的小方法类或模块" class="table-of-contents__link toc-highlight">太多的小方法、类或模块</a></li><li><a href="#浅层模块和-srp" class="table-of-contents__link toc-highlight">浅层模块和 SRP</a></li><li><a href="#太多浅层微服务" class="table-of-contents__link toc-highlight">太多浅层微服务</a></li><li><a href="#功能丰富的语言" class="table-of-contents__link toc-highlight">功能丰富的语言</a></li><li><a href="#分层架构" class="table-of-contents__link toc-highlight">分层架构</a></li><li><a href="#ddd" class="table-of-contents__link toc-highlight">DDD</a></li><li><a href="#例如" class="table-of-contents__link toc-highlight">例如</a></li><li><a href="#熟悉项目中的认知负荷" class="table-of-contents__link toc-highlight">熟悉项目中的认知负荷</a></li><li><a href="#总结" class="table-of-contents__link toc-highlight">总结</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>